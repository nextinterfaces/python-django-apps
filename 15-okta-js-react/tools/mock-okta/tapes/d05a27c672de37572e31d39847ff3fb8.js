var path = require("path");

/**
 * GET /assets/js/mvc/loginpage/initLoginPage.pack.e6e54ac65131a6c36306a4cd5260a8fe.js
 *
 * host: rain.okta1.com:1802
 * connection: keep-alive
 * user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:48.0) Gecko/20100101 Firefox/48.0
 * accept: * / *
 * accept-encoding: gzip
 * accept-language: en-US
 * cookie: DT=DI0EkmlTG6BRuCK-KmuzEW1tw; t=default; JSESSIONID=32318D9749E47BC65D54C4524953822B
 * cache-control: no-cache, no-store
 * pragma: no-cache
 */

module.exports = function (req, res) {
  res.statusCode = 200;

  res.setHeader("server", "Apache-Coyote/1.1");
  res.setHeader("accept-ranges", "bytes");
  res.setHeader("etag", "W/\"1934722-1508287483000\"");
  res.setHeader("last-modified", "Wed, 18 Oct 2017 00:44:43 GMT");
  res.setHeader("content-type", "text/javascript");
  res.setHeader("content-length", "1934722");
  res.setHeader("date", "Wed, 25 Oct 2017 18:32:07 GMT");

  res.setHeader("x-yakbak-tape", path.basename(__filename, ".js"));

  res.write(new Buffer("dmFyIE9rdGFMb2dpbiA9IE9rdGFMb2dpbiB8fCB7fTsgT2t0YUxvZ2luWyJpbml0TG9naW5QYWdlIl0gPQovKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwoKLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7CgovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKCi8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7Ci8qKioqKiovIAkJCWV4cG9ydHM6IHt9LAovKioqKioqLyAJCQlpZDogbW9kdWxlSWQsCi8qKioqKiovIAkJCWxvYWRlZDogZmFsc2UKLyoqKioqKi8gCQl9OwoKLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sb2FkZWQgPSB0cnVlOwoKLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KCgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7CgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7CgovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwoKLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewo=", "base64"));
  res.write(new Buffer("CgkndXNlIHN0cmljdCc7CgoJLyogZXNsaW50IG1heC1wYXJhbXM6IFsyLCA2XSwgbWF4LXN0YXRlbWVudHM6IFsyLCAzNF0gKi8KCS8qIGdsb2JhbCBnb29nbGUsIG1vZHVsZSAqLwoKCXZhciBPa3RhU2lnbkluID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSksCgkgICAgVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMyksCgkgICAgQWNjb3VudENob29zZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKSwKCSAgICBpbml0TW9iaWxlU1NPID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSwKCSAgICAkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSwKCSAgICBfID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjb25maWcpIHsKCgkgIHZhciB1c2VybmFtZTsKCSAgdmFyIGlzQ2hyb21lT3MgPSBmYWxzZTsKCSAgdmFyIGNocm9tZU9zQWRkID0gJC5EZWZlcnJlZCgpOwoJICB2YXIgY2hyb21lT3NDb21wbGV0ZSA9ICQuRGVmZXJyZWQoKTsKCSAgdmFyIHdhaXRGb3JDaHJvbWVPc0NhbGxiYWNrID0gZmFsc2U7CgoJICB2YXIgdXNlRXh0ZXJuYWxDYWxsQmFjayA9IGZhbHNlOwoJICB0cnkgewoJICAgIHVzZUV4dGVybmFsQ2FsbEJhY2sgPSB3aW5kb3cuZXh0ZXJuYWwgJiYgJ09rdGFXaWRnZXRDYWxsYmFjaycgaW4gd2luZG93LmV4dGVybmFsOwoJICB9IGNhdGNoIChlKSB7CgkgICAgLy8gU29tZXRoaW5nIHdlbnQgd3JvbmcgYWNjZXNzaW5nIHdpbmRvdy5leHRlcm5hbC4KCSAgfQoKCSAgZnVuY3Rpb24gaW52b2tlRXh0ZXJuYWxDYWxsYmFjayhyZXMpIHsKCSAgICBpZiAoIXVzZUV4dGVybmFsQ2FsbEJhY2spIHsKCSAgICAgIHJldHVybjsKCSAgICB9CgoJICAgIHRyeSB7CgkgICAgICAvLyBFeHRlcm5hbCBDYWxsQmFjayBmdW5jdGlvbnMgY2FuIGhhbmRsZSBvbmx5IHNpbXBsZSBqcyB0eXBlcyAoaS5lLiBpbnRlZ2VycyBvciBzdHJpbmdzKQoJICAgICAgLy8gVGhpcyBpcyB0YXJnZXRpbmcgdGhlIGVtYmVkZGVkIHdpbmRvd3MgSUUgYnJvd3NlciBzY2VuYXJpbwoJICAgICAgdmFyIHJlc3VsdCA9IHJlcy5zdGF0dXMgPT09ICdTVUNDRVNTJyA/IDEgOiAwOwoJICAgICAgd2luZG93LmV4dGVybmFsLk9rdGFXaWRnZXRDYWxsYmFjayhyZXN1bHQpOwoJICAgIH0gY2F0Y2ggKGVycikgewoJICAgICAgLy8KCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIHN1Y2Nlc3NGdW5jKHJlcykgewoJICAgIGlmICh1c2VFeHRlcm5hbENhbGxCYWNrKSB7CgkgICAgICBpbnZva2VFeHRlcm5hbENhbGxiYWNrKHJlcyk7CgkgICAgICByZXR1cm47CgkgICAgfQoKCSAgICAvLyBNb2JpbGUgYXBwIGV4dGVuc2lvbgoJICAgIGlmIChjb25maWcuaXNNb2JpbGVDbGllbnRMb2dpbikgewoJICAgICAgd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMubG9naW5NZXNzYWdlLnBvc3RNZXNzYWdlKHsKCSAgICAgICAgdG9rZW46IHJlcy5zZXNzaW9uLnRva2VuCgkgICAgICB9KTsKCSAgICAgIHJldHVybjsKCSAgICB9CgoJICAgIC8vIFNBTUwgU1AtaW5pdDogUmVwb3N0IGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNvbWV0aW1lcyB0aGUgcG9zdCBwYXJhbXMgbWFrZQoJICAgIC8vIHRoZSByZWRpcmVjdFVyaSB0b28gbG9uZyAoYnJvd3NlcnMgYWNjZXB0IGFyb3VuZCAyMDAwIGNoYXJzKS4KCSAgICAvLyBUaGlzIHdpbGwgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBvbmNlIHdlIHN0YXJ0IGNhY2hpbmcgdGhlIHNhbWwgcGFyYW1zLgoJICAgIGlmIChjb25maWcucmVwb3N0KSB7CgkgICAgICBVdGlsLnBvc3RUb1VybChjb25maWcuc2lnbkluLmJhc2VVcmwgKyAnL2xvZ2luL3Nlc3Npb25Db29raWVSZWRpcmVjdD9jaGVja0FjY291bnRTZXR1cENvbXBsZXRlPXRydWUmcmVwb3N0PXRydWUnICsgJyZ0b2tlbj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlcy5zZXNzaW9uLnRva2VuKSArCgkgICAgICAvLyBmcm9tVXJpIChyZWxhdGl2ZSB1cmwpIGlzIHVzZWQgcmF0aGVyIHRoYW4gcmVkaXJlY3RVcmwgKGFic29sdXRlIHVybCkgYmVjYXVzZQoJICAgICAgLy8gY3VycmVudGx5IG9ubHkgcmVsYXRpdmUgdXJscyBhcmUgcmVwb3N0ZWQgcHJvcGVybHkgKHVzaW5nIGZvcndhcmQpCgkgICAgICAnJnJlZGlyZWN0VXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLmZyb21VcmkpLCAkKCdib2R5JykpOwoJICAgICAgcmV0dXJuOwoJICAgIH0KCgkgICAgLy8gT0tUQS0xMDIyMTcgSEFDSyB0byBmaXggbmV3IHJlbGVhc2Ugb2YgTWljcm9zb2Z0IGFwcHMgZm9yIGlPUyAxMCwgd2hpY2ggdHJpZ2dlciBkb3VibGUgcmVxdWVzdCB0byB0aGlzIFVSTAoJICAgIC8vaWYgKFV0aWwudXNlckFnZW50SXNJb3MxMChuYXZpZ2F0b3IudXNlckFnZW50KSkgewoJICAgIGlmIChjb25maWcuYXZvaWREb3VibGVSZXF1ZXN0TVNJb3NBcHAgJiYgVXRpbC51c2VyQWdlbnRJc0lvczEwKG5hdmlnYXRvci51c2VyQWdlbnQpKSB7CgkgICAgICBoYWNrUmVkaXJlY3RXaXRoUG9ydEFkZGVkT3JSZW1vdmVkKHJlcyk7CgkgICAgICByZXR1cm47CgkgICAgfQoKCSAgICBpZiAoY29uZmlnLnNpZ25Jbi5mZWF0dXJlcy5jb25zZW50KSB7CgkgICAgICBpZiAocmVzLnN0ZXBVcCkgewoJICAgICAgICByZXMuc3RlcFVwLmZpbmlzaCgpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmVzLnNlc3Npb24uc2V0Q29va2llQW5kUmVkaXJlY3QoY29uZmlnLnJlZGlyZWN0VXJpKTsKCSAgICAgIH0KCSAgICB9IGVsc2UgewoJICAgICAgLy8gTm9ybWFsIGZsb3c6IE5hdmlnYXRlIHRvIHRoZSBzZXNzaW9uQ29va2llUmVkaXJlY3QgZW5kcG9pbnQKCSAgICAgIHJlcy5zZXNzaW9uLnNldENvb2tpZUFuZFJlZGlyZWN0KGNvbmZpZy5yZWRpcmVjdFVyaSk7CgkgICAgfQoJICB9CgoJICBmdW5jdGlvbiBoYWNrUmVkaXJlY3RXaXRoUG9ydEFkZGVkT3JSZW1vdmVkKHJlcykgewoJICAgIC8vIEhhY2sgaGVyZSBpcyB0byBhcHBlbmQgOjgwIG9yIDo0NDMgdG8gYmFzZVVybCAob3IgcmVtb3ZlIGl0KSBhbmQgcmVkaXJlY3QgdG8gdGhhdCBiYXNlIFVSTC4KCSAgICAvLyBGb3Igc29tZSByZWFzb24sIHRoaXMgcHJldmVudHMgdGhlIGRvdWJsZSByZXF1ZXN0IGNhdXNlZCBieSBNaWNyb3NvZnQgYXBwcyBmb3IgaU9TIDEwIHdoaWNoIGludmFsaWRhdGVzIHRoZSBPVFQKCSAgICB2YXIgaGFja0hvc3RuYW1lVXJsID0gVXRpbC5iYXNlVXJsV2l0aFBvcnRBZGRlZE9yUmVtb3ZlZChjb25maWcuc2lnbkluLmJhc2VVcmwpOwoKCSAgICAvLyBVUkwgY29uc3RydWN0aW9uIGxvZ2ljIGNvdXJ0ZXN5IG9mIHNldENvb2tpZUFuZFJlZGlyZWN0KCkncyBpbXBsCgkgICAgLy8gQXBwZW5kaW5nICdtb2RpZmllZEJhc2VVcmw9dHJ1ZScgZm9yIHRyYWNraW5nIHB1cnBvc2VzCgkgICAgdmFyIHF1ZXJ5UGFyYW1zID0gVXRpbC50b1F1ZXJ5UGFyYW1zKHsKCSAgICAgICdjaGVja0FjY291bnRTZXR1cENvbXBsZXRlJzogdHJ1ZSwKCSAgICAgICd0b2tlbic6IHJlcy5zZXNzaW9uLnRva2VuLAoJICAgICAgJ3JlZGlyZWN0VXJsJzogY29uZmlnLnJlZGlyZWN0VXJpLAoJICAgICAgJ21vZGlmaWVkQmFzZVVybCc6IHRydWUgfSk7CgkgICAgdmFyIGhhY2tSZWRpcmVjdFVybCA9IGhhY2tIb3N0bmFtZVVybCArICcvbG9naW4vc2Vzc2lvbkNvb2tpZVJlZGlyZWN0JyArIHF1ZXJ5UGFyYW1zOwoKCSAgICB3aW5kb3cubG9jYXRpb24gPSBoYWNrUmVkaXJlY3RVcmw7CgkgIH0KCgkgIGZ1bmN0aW9uIG5vdGlmeUFjY291bnRDaG9vc2VyKHJlcywgYWNjb3VudENob29zZXIpIHsKCSAgICB2YXIgc3VjY2VzcyA9IF8ucGFydGlhbChzdWNjZXNzRnVuYywgcmVzKTsKCSAgICBpZiAoYWNjb3VudENob29zZXIpIHsKCSAgICAgIGFjY291bnRDaG9vc2VyLmxvZ2luKHJlcy51c2VyLnByb2ZpbGUsIHN1Y2Nlc3MpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBFTkdfQUNDT1VOVF9DSE9PU0VSX1BVQkxJU0ggZmVhdHVyZSBpcyBub3QgZW5hYmxlZCAtIHBlcmZvcm0gc3VjY2VzcwoJICAgICAgLy8gYWN0aW9ucyBpbW1lZGlhdGVseS4KCSAgICAgIHN1Y2Nlc3MoKTsKCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIHByb2Nlc3NDcmVkcyhjcmVkcykgewoJICAgIGlmICghaXNDaHJvbWVPcykgewoJICAgICAgcmV0dXJuOwoJICAgIH0KCSAgICB1c2VybmFtZSA9IGNyZWRzLnVzZXJuYW1lOwoJICAgIHZhciBkZXRhaWxzID0gewoJICAgICAgdG9rZW46IGNyZWRzLnVzZXJuYW1lLAoJICAgICAgdXNlcjogY3JlZHMudXNlcm5hbWUsCgkgICAgICBwYXNzd29yZEJ5dGVzOiBjcmVkcy5wYXNzd29yZCwKCSAgICAgIGtleVR5cGU6ICdLRVlfVFlQRV9QQVNTV09SRF9QTEFJTicKCSAgICB9OwoJICAgIGlmIChjaHJvbWVPc0FkZC5zdGF0ZSgpICE9PSAncGVuZGluZycpIHsKCSAgICAgIGNocm9tZU9zQWRkID0gJC5EZWZlcnJlZCgpOwoJICAgIH0KCSAgICB3YWl0Rm9yQ2hyb21lT3NDYWxsYmFjayA9IHRydWU7CgkgICAgZ29vZ2xlLnByaW5jaXBhbC5hZGQoZGV0YWlscywgZnVuY3Rpb24gKCkgewoJICAgICAgY2hyb21lT3NBZGQucmVzb2x2ZSgpOwoJICAgIH0pOwoJICB9CgoJICAvLyBUaGlzIHByZXZlbnRzIGFuIGVtcHR5IGN1c3RvbSBrZXkgdGhhdCBjb21lIGluIGZyb20gdGhlIGFkbWluIGN1c3RvbWl6YXRpb24KCSAgLy8gZnJvbSBvdmVycmlkaW5nIGEgbG9jYWxpemVkIGxvZ2luIGtleS4KCSAgdmFyIG92ZXJyaWRlcyA9IGNvbmZpZy5zaWduSW4uaTE4bltjb25maWcuc2lnbkluLmxhbmd1YWdlXTsKCSAgXy5lYWNoKG92ZXJyaWRlcywgZnVuY3Rpb24gKHZhbHVlLCBsYWJlbCkgewoJICAgIGlmICghdmFsdWUpIHsKCSAgICAgIGRlbGV0ZSBvdmVycmlkZXNbbGFiZWxdOwoJICAgIH0KCSAgfSk7CgoJICBjb25maWcuc2lnbkluLmFzc2V0cy5yZXdyaXRlID0gVXRpbC5hc3NldFJld3JpdGU7CgoJICBjb25maWcuc2lnbkluLmZlYXR1cmVzLnJvdXRlciA9IFV0aWwuc3VwcG9ydHNSb3V0ZXIoKTsKCgkgIHZhciBhY2NvdW50Q2hvb3NlcjsKCSAgaWYgKGNvbmZpZy5wdWJsaXNoVG9BY2NvdW50Q2hvb3NlcikgewoJICAgIGFjY291bnRDaG9vc2VyID0gbmV3IEFjY291bnRDaG9vc2VyKHsKCSAgICAgIGRpc2NvdmVyeVVybDogY29uZmlnLmFjY291bnRDaG9vc2VyRGlzY292ZXJ5VXJsCgkgICAgfSk7CgkgIH0KCgkgIC8qIGVzbGludCBjb21wbGV4aXR5OiBbMiwgOF0qLwoJICBpZiAoY29uZmlnLmVuYWJsZVVybEZpeEZvckVtYmVkZGVkQnJvd3NlcnMgJiYgVXRpbC5pc0xvZ2luVXJsU3RhbGUoY29uZmlnLmxvZ2luUGFnZVVybFJlZGlyZWN0LCBsb2NhdGlvbi5ocmVmKSkgewoJICAgIC8vRm9yIGNlcnRhaW4gZW1iZWRkZWQgYnJvd3NlcnMgKGFkb2JlIGFpcikgd2hpbGUgbG9hZGluZyB0aGUgbG9naW4gcGFnZSBhZnRlciBhIDMwMiByZWRpcmVjdGlvbiBmb3IKCSAgICAvL25vbi1sb2dnZWQgaW4gdXNlcnMsIHRoZSBwcm9ibGVtIGlzIHRoYXQgdGhlIHdpbmRvdy5sb2NhdGlvbiBvYmplY3QgKHdoaWNoIGhvbGRzIGF0dHJpYnV0ZWQgbGlrZSBocmVmLAoJICAgIC8vcGF0aG5hbWUgYW5kIHNlYXJjaCkgaXMgZGlmZmVyZW50IGNvbXBhcmVkIHRvIHRoYXQgb24gdGhlIGJyb3dzZXIuCgkgICAgLy9IZW5jZSB0aGUgbG9jYXRpb24uaHJlZiBuZWVkcyB0byBiZSBhZGp1c3RlZCB0byBpbmNsdWRlIHRoZSBmdWxsIGZyb21VUkkgdmFsdWUKCSAgICAvL3NvIHRoYXQgdGhlIHJvdXRpbmcgd29ya3MgY29ycmVjdGx5Lk9LVEEtMTA5MTQxCgkgICAgVXRpbC5hZGp1c3RVcmxQYXRoKGNvbmZpZy5sb2dpblBhZ2VVcmxSZWRpcmVjdCk7CgkgIH0KCgkgIHZhciBva3RhU2lnbkluID0gbmV3IE9rdGFTaWduSW4oY29uZmlnLnNpZ25Jbik7CgkgIG9rdGFTaWduSW4ucmVuZGVyRWwoewoJICAgIGVsOiBjb25maWcuc2lnbkluLmVsLAoJICAgIHByb2Nlc3NDcmVkczogcHJvY2Vzc0NyZWRzCgkgIH0sIGZ1bmN0aW9uIChyZXMpIHsKCSAgICAvLyBPa3RhIGxvZ2luIHBhZ2UgZG9lcyBub3QgY2FyZSBhYm91dCBub24tc3VjY2VzcyByZXNwb25zZXMKCSAgICBpZiAocmVzLnN0YXR1cyAhPT0gJ1NVQ0NFU1MnKSB7CgkgICAgICBpbnZva2VFeHRlcm5hbENhbGxiYWNrKHJlcyk7CgkgICAgICByZXR1cm47CgkgICAgfQoKCSAgICAvKgoJICAgICAqIEZvciBpbmZvIG9uIHdhaXRGb3JDaHJvbWVPc0NhbGxiYWNrLCBsb29rIGF0IE9LVEEtMTI3MzUzLgoJICAgICAqIElmIHNpZ24gaW4gd2lkZ2V0IHdhcyBsb2FkZWQgb24gYSBjaHJvbWUgZGV2aWNlIGRpcmVjdGx5IG9uIE1GQSBwYWdlLCBwcm9jZXNzIGNyZWRzIHdpbGwgbm90IGJlIGNhbGxlZC4KCSAgICAgKiBDaGVjayBpZiBpdCBoYXMgYmVlbiBjYWxsZWQgYW5kIG9ubHkgdGhlbiBnbyB0aHJvdWdoIHRoaXMgYmxvY2suCgkgICAgICovCgkgICAgaWYgKGNvbmZpZy5oYXNDaHJvbWVPU0ZlYXR1cmUgJiYgaXNDaHJvbWVPcyAmJiB3YWl0Rm9yQ2hyb21lT3NDYWxsYmFjaykgewoJICAgICAgJC53aGVuKGNocm9tZU9zQWRkKS50aGVuKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgZ29vZ2xlLnByaW5jaXBhbC5jb21wbGV0ZSh7IHRva2VuOiB1c2VybmFtZSB9LCBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgY2hyb21lT3NDb21wbGV0ZS5yZXNvbHZlKCk7CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgkgICAgICAkLndoZW4oY2hyb21lT3NBZGQsIGNocm9tZU9zQ29tcGxldGUpLnRoZW4oZnVuY3Rpb24gKCkgewoJICAgICAgICBub3RpZnlBY2NvdW50Q2hvb3NlcihyZXMsIGFjY291bnRDaG9vc2VyKTsKCSAgICAgIH0pOwoJICAgIH0gZWxzZSB7CgkgICAgICBub3RpZnlBY2NvdW50Q2hvb3NlcihyZXMsIGFjY291bnRDaG9vc2VyKTsKCSAgICB9CgkgIH0pOwoKCSAgVXRpbC5jbGVhckJlZW5Ub0hvbWVQYWdlKCk7CgkgIFV0aWwucmVzZXRBdXRvTGF1bmNoKCk7CgoJICBpZiAoY29uZmlnLmlzTW9iaWxlU1NPKSB7CgkgICAgaW5pdE1vYmlsZVNTTyhjb25maWcucmVkaXJlY3RVcmksIGNvbmZpZy5saW5rUGFyYW1zKTsKCSAgfQoKCSAgaWYgKGNvbmZpZy5oYXNDaHJvbWVPU0ZlYXR1cmUpIHsKCSAgICBnb29nbGUgJiYgZ29vZ2xlLnByaW5jaXBhbC5pbml0aWFsaXplKGZ1bmN0aW9uICgpIHsKCSAgICAgIGlzQ2hyb21lT3MgPSB0cnVlOwoJICAgIH0pOwoJICB9CgoJICBpZiAoY29uZmlnLnNob3dMaW5rVG9BcHBTdG9yZSkgewoJICAgICQuc21hcnRiYW5uZXIoeyAndGl0bGUnOiAnT2t0YSBNb2JpbGUnLCAnYXV0aG9yJzogJ09rdA==", "base64"));
  res.write(new Buffer("YSwgSW5jLicgfSk7CgkgIH0KCSAgLy8gVG8gZGlzYWJsZSB0aGUgdmFyaW91cyBicm93c2VycycgbWVjaGFuaXNtcyBmb3Igc2F2aW5nIHBhc3N3b3Jkcywgd2UgZG8gdGhpczoKCSAgLy8gVGhlIHNpZ24taW4gd2lkZ2V0IHNldHMgb2ZmIGEgdHJpZ2dlciBvbmNlIHRoZSBwcmltYXJ5IGF1dGggLyByZXNldCBwYXNzd29yZCBmb3JtIGlzIGxvYWRlZAoJICAvLyBXZSBjYXB0dXJlIHRoZSBldmVudCBoZXJlIGFuZCBhZGQgYnJvd3NlciBzcGVjaWZpYyBwYXNzd29yZCBqYW1tZXJzIGFzIGJlbG93OgoJICAvLyAxKSBTYWZhcmkgcmVxdWlyZXMgYW4gZW1wdHkgZXh0cmEgcGFzc3dvcmQgZmllbGQgYXQgdGhlIHRvcCwKCSAgLy8gICAgd2hpY2ggaXMgInZpc2libGUiIGFuZCBvbiB0aGUgc2NyZWVuLiBXZSBnZXQgYXJvdW5kIHRoaXMgd2l0aCBpbmplY3RpbmcKCSAgLy8gICAgZWxlbWVudHMgd2l0aCB3aWR0aCBhbmQgaGVpZ2h0IGVxdWFsIHRvIHplcm8KCSAgLy8gMikgRmlyZWZveCByZXF1aXJlcyBleHRyYSBib2d1cyBmaWxsZWQgcGFzc3dvcmQgZWxlbWVudHMKCSAgLy8gMykgQ2hyb21lIGxvb2tzIGZvciBhIHBhc3N3b3JkIGZpZWxkcyBhbmQgYSBuZWFyZXN0IHRleHQKCSAgLy8gICAgZmllbGQgdG8gZGV0ZWN0IHVzZXJuYW1lLXBhc3N3b3JkIHBhaXIuIFdlIGdldAoJICAvLyAgICBhcm91bmQgdGhpcyBieSBhZGRpbmcgYWRkaXRpb25hbCB1c2VybmFtZS1wYXNzd29yZCBwYWlycwoJICAvLyAgICB0byB0cmljayB0aGUgYnJvd3Nlci4KCSAgLy8gICAgQWRkaXRpb25hbGx5LCBjaHJvbWUgcmVxdWlyZXMgdGhlIGFkZGl0aW9uYWwgZWxlbWVudHMgdG8KCSAgLy8gICAgYmUgcHJlcGVuZGVkCgkgIC8vIDQpIFRPRE86IE90aGVyIGJyb3dzZXJzIChJRSkKCgkgIGlmIChjb25maWcucHJldmVudEJyb3dzZXJGcm9tU2F2aW5nT2t0YVBhc3N3b3JkKSB7CgkgICAgb2t0YVNpZ25Jbi5vbigncGFnZVJlbmRlcmVkJywgZnVuY3Rpb24gKCkgewoJICAgICAgLy8gT25jZSBwYWdlIGlzIHJlbmRlcmVkLCBhZGQgcGFzc3dvcmQgamFtbWVycyBpZiBwYXNzd29yZCBpbnB1dHMKCSAgICAgIC8vIGFyZSBwcmVzZW50IG9uIHRoZSByZW5kZXJlZCBwYWdlCgkgICAgICB2YXIgcGFzc3dvcmRGaWVsZHMgPSAkKCcjb2t0YS1zaWduLWluIDpwYXNzd29yZCcpOwoJICAgICAgaWYgKHBhc3N3b3JkRmllbGRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgVXRpbC5hZGRQYXNzd29yZEphbW1lcnMoJCgnI29rdGEtc2lnbi1pbiBmb3JtJykpOwoJICAgICAgfQoJICAgIH0pOwoJICB9Cgl9OwoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsndXNlIHN0cmljdCc7CgoJLy8gUG9ydGVkIG92ZXIgZnJvbSB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb246CgkvLyAvanMvc2VjdGlvbnMvbW9iaWxlLXNzby1sb2dpbi5qcwoJLyogZXNsaW50IGNhbWVsY2FzZTogMCAqLwoJIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW19fd2VicGFja19yZXF1aXJlX18oMiksIF9fd2VicGFja19yZXF1aXJlX18oMyksIF9fd2VicGFja19yZXF1aXJlX18oNCldLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uICgkLCBVdGlsLCBIYW5kbGViYXJzKSB7CgoJICB2YXIgdHBsID0gSGFuZGxlYmFycy5jb21waWxlLAoJICAgICAgdG9rZW5UcGwgPSB0cGwoJy9vYXV0aDIvdG9rZW4/Y2xpZW50X2lkPXt7Y2xpZW50SWR9fSZncmFudF90eXBlPXNlc3Npb24mY29kZT17e2NsaWVudENvZGV9fScpLAoJICAgICAgY29kZVRwbCA9IHRwbCgnL29hdXRoMi9jb2RlP2NsaWVudF9pZD17e2NsaWVudElkfX0nKSwKCSAgICAgIG9rdGFTU09UcGwgPSB0cGwoJ29rdGFzc286Ly92MS9vYXV0aC92YWxpZGF0ZS97e3VzZXJDb2RlfX0nKSwKCSAgICAgIG9rdGFVbml2ZXJzYWxMaW5rVHBsID0gdHBsKCd7e2RvbWFpbn19L2F1dGgvb2t0YW1vYmlsZS8/c2l0ZU5hbWU9e3tzaXRlTmFtZX19Jm9yZz17e29yZ319JyArICcmdXNlck5hbWU9e3t1c2VyTmFtZX19JmFwcE5hbWU9e3thcHBOYW1lfX0mYXBwRXh0ZXJuYWxLZXk9e3thcHBFeHRlcm5hbEtleX19JyArICcmYXBwTGlua0lkPXt7YXBwTGlua0lkfX0mdXNlckNvZGU9e3t1c2VyQ29kZX19JnRpbWVvdXRJbnRlcnZhbD17e3RpbWVvdXRJbnRlcnZhbH19JyksCgkgICAgICBtb2JpbGVMaW5rID0gJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS91cy9hcHAvb2t0YS1tb2JpbGUvaWQ1ODA3MDkyNTE/bXQ9OCc7CgoJICAvKiBlc2xpbnQgbWF4LXBhcmFtczogWzIsIDZdLCBtYXgtc3RhdGVtZW50czogWzIsIDI5XSAqLwoJICByZXR1cm4gZnVuY3Rpb24gaW5pdE1vYmlsZVNTTyhmcm9tVXJpLCBwYXJhbXMpIHsKCSAgICB2YXIgbGlua1BhcmFtcyA9IHBhcmFtczsKCSAgICB2YXIgb2t0YU1vYmlsZSA9IHsKCSAgICAgIGNsaWVudENvZGU6IHVuZGVmaW5lZCwKCSAgICAgIHVzZXJDb2RlOiB1bmRlZmluZWQsCgkgICAgICBwb2xsSW50ZXJ2YWw6IDUwMDAsCgkgICAgICAvLyAxMCBtaW50dWVzIC0tIE9rdGEgT0F1dGggY29kZSBleHBpcmF0aW9uIHRpbWU7IHNlZSBPa3RhT0F1dGgyMFNlcnZpY2UuT0FVVEhfQ09ERV9FWFBJUkFUSU9OX01JTlVURVMKCSAgICAgIHRpbWVvdXRJbnRlcnZhbDogNjAwMDAwLAoJICAgICAgY2xpZW50SWQ6ICdjYXBoeGNRS1BPVk9JSlVHQVhJQycsCgkgICAgICByZXF1aXJlVXNlclRyaWdnZXI6IHRydWUsCgkgICAgICBtYW51YWxMb2dpbjogZmFsc2UKCSAgICB9OwoKCSAgICB2YXIgdGltZW91dFRpbWVNczsKCgkgICAgdmFyIHNjcmVlbnMgPSB7CgkgICAgICBlbnRyeUxvYWRpbmdTY3JlZW5JZDogJ21vYmlsZVNTT19lbnRyeV9sb2FkaW5nJywKCSAgICAgIGFjY2Vzc1NjcmVlbklkOiAnbW9iaWxlU1NPX2FjY2VzcycsCgkgICAgICBvcGVuaW5nU2NyZWVuSWQ6ICdtb2JpbGVTU09fb3BlbmluZycsCgkgICAgICBsb2FkaW5nU2NyZWVuSWQ6ICdtb2JpbGVTU09fbG9hZGluZycsCgkgICAgICB0cmFkaXRpb25hbExvZ2luU2NyZWVuSWQ6ICdtb2JpbGVTU09fdHJhZGl0aW9uYWxMb2dpbicsCgkgICAgICBlcnJvclNjcmVlbklkOiAnbW9iaWxlU1NPX2Vycm9yJwoJICAgIH07CgoJICAgIGZ1bmN0aW9uIHNob3dTY3JlZW4oc2NyZWVuSWQpIHsKCSAgICAgICQuZWFjaChzY3JlZW5zLCBmdW5jdGlvbiAoa2V5LCB2YWwpIHsKCSAgICAgICAgJCgnIycgKyB2YWwpLnRvZ2dsZSh2YWwgPT09IHNjcmVlbklkKTsKCSAgICAgIH0pOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gaGlkZUxvYWRpbmdTY3JlZW4oc2NyZWVuSWQpIHsKCSAgICAgICQoJyMnICsgc2NyZWVuSWQpLmhpZGUoKTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIHVzZXJDb2RlU3VjY2Vzc0NhbGxiYWNrKHVzZXJDb2RlKSB7CgkgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9rdGFTU09UcGwoeyB1c2VyQ29kZTogdXNlckNvZGUgfSk7CgkgICAgfQoKCSAgICBmdW5jdGlvbiB1c2VyQ29kZVN1Y2Nlc3NDYWxsYmFja0ZvclVpbnZlcnNhbExpbmsobGlua1BhcmFtcykgewoJICAgICAgdmFyIGxpbmsgPSBva3RhVW5pdmVyc2FsTGlua1RwbCh7IGRvbWFpbjogbGlua1BhcmFtcy5kb21haW4sCgkgICAgICAgIHNpdGVOYW1lOiBsaW5rUGFyYW1zLnNpdGVOYW1lLAoJICAgICAgICBvcmc6IGxpbmtQYXJhbXMub3JnLAoJICAgICAgICB1c2VyTmFtZTogbGlua1BhcmFtcy51c2VyTmFtZSwKCSAgICAgICAgYXBwTmFtZTogbGlua1BhcmFtcy5hcHBOYW1lLAoJICAgICAgICBhcHBFeHRlcm5hbEtleTogbGlua1BhcmFtcy5hcHBFeHRlcm5hbEtleSwKCSAgICAgICAgYXBwTGlua0lkOiBsaW5rUGFyYW1zLmFwcExpbmtJZCwKCSAgICAgICAgdXNlckNvZGU6IGxpbmtQYXJhbXMudXNlckNvZGUsCgkgICAgICAgIHRpbWVvdXRJbnRlcnZhbDogb2t0YU1vYmlsZS50aW1lb3V0SW50ZXJ2YWwKCSAgICAgIH0pICsgJyZyZWRpcmVjdFVybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGxpbmtQYXJhbXMucmVkaXJlY3RVcmwpOwoJICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gcG9sbE9uT0F1dGhDb2RlKCkgewoJICAgICAgaWYgKG9rdGFNb2JpbGUubWFudWFsTG9naW4pIHsKCSAgICAgICAgcmV0dXJuOwoJICAgICAgfQoKCSAgICAgIHZhciBjdXJyZW50VGltZU1zID0gRGF0ZS5ub3coKTsKCSAgICAgIGlmICh0aW1lb3V0VGltZU1zICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFRpbWVNcyA+IHRpbWVvdXRUaW1lTXMpIHsKCSAgICAgICAgc2hvd1NjcmVlbihzY3JlZW5zLmVycm9yU2NyZWVuSWQpOwoJICAgICAgfQoKCSAgICAgIGlmIChva3RhTW9iaWxlLnRpbWVvdXRUaW1lTXMgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50VGltZU1zIDw9IHRpbWVvdXRUaW1lTXMgKyBva3RhTW9iaWxlLnRpbWVvdXRJbnRlcnZhbCAqIDEwKSB7CgkgICAgICAgICQuYWpheCh7CgkgICAgICAgICAgdHlwZTogJ1BPU1QnLAoJICAgICAgICAgIHVybDogdG9rZW5UcGwoeyBjbGllbnRJZDogb2t0YU1vYmlsZS5jbGllbnRJZCwgY2xpZW50Q29kZTogb2t0YU1vYmlsZS5jbGllbnRDb2RlIH0pLAoJICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCgkgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7CgkgICAgICAgICAgICBpZiAoZGF0YS5zZXNzaW9uICYmIGRhdGEuc2Vzc2lvbi5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAgIFV0aWwucG9zdFRvVXJsKGZyb21VcmksICQoJ2JvZHknKSk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICBzZXRUaW1lb3V0KHBvbGxPbk9BdXRoQ29kZSwgb2t0YU1vYmlsZS5wb2xsSW50ZXJ2YWwpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0sCgkgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKCkgewoJICAgICAgICAgICAgc2V0VGltZW91dChwb2xsT25PQXV0aENvZGUsIG9rdGFNb2JpbGUucG9sbEludGVydmFsKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgICAgfQoJICAgIH0KCgkgICAgZnVuY3Rpb24gcmVxdWVzdE9BdXRoQ29kZSgpIHsKCSAgICAgIHRpbWVvdXRUaW1lTXMgPSBEYXRlLm5vdygpICsgb2t0YU1vYmlsZS50aW1lb3V0SW50ZXJ2YWw7CgkgICAgICAkLmFqYXgoewoJICAgICAgICB0eXBlOiAnUE9TVCcsCgkgICAgICAgIHVybDogY29kZVRwbCh7IGNsaWVudElkOiBva3RhTW9iaWxlLmNsaWVudElkIH0pLAoJICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAoJICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHsKCSAgICAgICAgICBva3RhTW9iaWxlLmNsaWVudENvZGUgPSBkYXRhLmNsaWVudF9jb2RlOwoJICAgICAgICAgIG9rdGFNb2JpbGUudXNlckNvZGUgPSBkYXRhLnVzZXJfY29kZTsKCgkgICAgICAgICAgc2hvd1NjcmVlbihzY3JlZW5zLm9wZW5pbmdTY3JlZW5JZCk7CgkgICAgICAgICAgc2V0VGltZW91dChwb2xsT25PQXV0aENvZGUsIG9rdGFNb2JpbGUucG9sbEludGVydmFsKTsKCSAgICAgICAgICB1c2VyQ29kZVN1Y2Nlc3NDYWxsYmFjayhkYXRhLnVzZXJfY29kZSk7CgkgICAgICAgIH0sCgkgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHsKCSAgICAgICAgICBzaG93U2NyZWVuKHNjcmVlbnMuZXJyb3JTY3JlZW5JZCk7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCgkgICAgZnU=", "base64"));
  res.write(new Buffer("bmN0aW9uIHJlcXVlc3RPQXV0aENvZGVGb3JVaW52ZXJzYWxMaW5rKCkgewoJICAgICAgdGltZW91dFRpbWVNcyA9IERhdGUubm93KCkgKyBva3RhTW9iaWxlLnRpbWVvdXRJbnRlcnZhbDsKCSAgICAgICQuYWpheCh7CgkgICAgICAgIHR5cGU6ICdQT1NUJywKCSAgICAgICAgdXJsOiBjb2RlVHBsKHsgY2xpZW50SWQ6IG9rdGFNb2JpbGUuY2xpZW50SWQgfSksCgkgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCgkgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewoJICAgICAgICAgIG9rdGFNb2JpbGUuY2xpZW50Q29kZSA9IGRhdGEuY2xpZW50X2NvZGU7CgkgICAgICAgICAgb2t0YU1vYmlsZS51c2VyQ29kZSA9IGRhdGEudXNlcl9jb2RlOwoJICAgICAgICAgIGxpbmtQYXJhbXMudXNlckNvZGUgPSBkYXRhLnVzZXJfY29kZTsKCgkgICAgICAgICAgc2V0VGltZW91dChwb2xsT25PQXV0aENvZGUsIG9rdGFNb2JpbGUucG9sbEludGVydmFsKTsKCSAgICAgICAgICAkKCcjbW9iaWxlRGV2aWNlVHJ1c3RMb2dpbkJ1dHRvbicpLmNsaWNrKGxhdW5jaE9rdGFNb2JpbGVGb3JVbml2ZXJzYWxMaW5rKTsKCSAgICAgICAgICAkKCcjbW9iaWxlRGV2aWNlVHJ1c3RFeHBpcmVkTG9naW5CdXR0b24nKS5jbGljayhwdXJlTGF1bmNoT2t0YU1vYmlsZUZvclVuaXZlcnNhbExpbmspOwoJICAgICAgICB9LAoJICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoKSB7CgkgICAgICAgICAgc2hvd1NjcmVlbihzY3JlZW5zLmVycm9yU2NyZWVuSWQpOwoJICAgICAgICB9CgkgICAgICB9KTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGxhdW5jaE9rdGFNb2JpbGVGb3JVbml2ZXJzYWxMaW5rKCkgewoJICAgICAgc2hvd1NjcmVlbihzY3JlZW5zLmxvYWRpbmdTY3JlZW5JZCk7CgkgICAgICB1c2VyQ29kZVN1Y2Nlc3NDYWxsYmFja0ZvclVpbnZlcnNhbExpbmsobGlua1BhcmFtcyk7CgkgICAgfQoKCSAgICBmdW5jdGlvbiBwdXJlTGF1bmNoT2t0YU1vYmlsZUZvclVuaXZlcnNhbExpbmsoKSB7CgkgICAgICBzaG93U2NyZWVuKHNjcmVlbnMubG9hZGluZ1NjcmVlbklkKTsKCSAgICAgIHVzZXJDb2RlU3VjY2Vzc0NhbGxiYWNrRm9yVWludmVyc2FsTGluayhsaW5rUGFyYW1zKTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIHNob3dUcmFkaXRpb25hbExvZ2luKCkgewoJICAgICAgLy8gTm90ZTogVGhpcyBkaWZmZXJzIGZyb20gdGhlIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uIGluIHRoYXQgaXQganVzdAoJICAgICAgLy8gdG9nZ2xlcyB0byB0aGUgbmV3IGxvZ2luIGZsb3cKCSAgICAgIC8vIDEuIFJlbW92ZSBhbGwgc2NyZWVucwoJICAgICAgc2hvd1NjcmVlbigpOwoJICAgICAgb2t0YU1vYmlsZS5tYW51YWxMb2dpbiA9IHRydWU7CgkgICAgICAvLyAyLiBEaXNwbGF5IG5ldyBsb2dpbiBmbG93LCBtaW51cyBmb290ZXIKCSAgICAgICQoJyNzaWduaW4tY29udGFpbmVyJykuc2hvdygpOwoJICAgICAgJCgnI21vYmlsZVNTT19vdmVybGF5JykuaGlkZSgpOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gaW5pdCgpIHsKCSAgICAgIGhpZGVMb2FkaW5nU2NyZWVuKHNjcmVlbnMuZW50cnlMb2FkaW5nU2NyZWVuSWQpOwoJICAgICAgaWYgKG9rdGFNb2JpbGUucmVxdWlyZVVzZXJUcmlnZ2VyID09PSBmYWxzZSkgewoJICAgICAgICBzaG93U2NyZWVuKHNjcmVlbnMub3BlbmluZ1NjcmVlbklkKTsKCSAgICAgICAgcmVxdWVzdE9BdXRoQ29kZSgpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaWYgKGxpbmtQYXJhbXMgJiYgbGlua1BhcmFtcy5kb21haW4pIHsKCSAgICAgICAgICByZXF1ZXN0T0F1dGhDb2RlRm9yVWludmVyc2FsTGluaygpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICQoJyNtb2JpbGVTU09Mb2dpbkJ1dHRvbicpLmNsaWNrKHJlcXVlc3RPQXV0aENvZGUpOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgJCgnI2dldE9rdGFNb2JpbGVCdXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7CgkgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbW9iaWxlTGluazsKCSAgICAgIH0pOwoKCSAgICAgICQoJyN0cmFkaXRpb25hbExvZ2luQnV0dG9uLCAjcmV0dXJuVG9Mb2dpbkJ1dHRvbicpLmNsaWNrKHNob3dUcmFkaXRpb25hbExvZ2luKTsKCSAgICB9CgoJICAgICQoaW5pdCk7CgkgIH07Cgl9LmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CgovKioqLyB9KSwKLyogMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIQoJICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4xMi40CgkgKiBodHRwOi8vanF1ZXJ5LmNvbS8KCSAqCgkgKiBJbmNsdWRlcyBTaXp6bGUuanMKCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCgkgKgoJICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJICoKCSAqIERhdGU6IDIwMTYtMDUtMjBUMTc6MTdaCgkgKi8KCgkoZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHsKCgkJaWYgKCB0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJvYmplY3QiICkgewoJCQkvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcA==", "base64"));
  res.write(new Buffer("ZXIgYHdpbmRvd2AKCQkJLy8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS4KCQkJLy8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGAKCQkJLy8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuCgkJCS8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuCgkJCS8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoImpxdWVyeSIpKHdpbmRvdyk7CgkJCS8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uCgkJCW1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID8KCQkJCWZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDoKCQkJCWZ1bmN0aW9uKCB3ICkgewoJCQkJCWlmICggIXcuZG9jdW1lbnQgKSB7CgkJCQkJCXRocm93IG5ldyBFcnJvciggImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiICk7CgkJCQkJfQoJCQkJCXJldHVybiBmYWN0b3J5KCB3ICk7CgkJCQl9OwoJCX0gZWxzZSB7CgkJCWZhY3RvcnkoIGdsb2JhbCApOwoJCX0KCgkvLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldAoJfSh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkgewoKCS8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrCgkvLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlCgkvLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWYKCS8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCAidXNlIHN0cmljdCIgY2FsbCBjaGFpbnMuICgjMTMzMzUpCgkvLyJ1c2Ugc3RyaWN0IjsKCXZhciBkZWxldGVkSWRzID0gW107CgoJdmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50OwoKCXZhciBzbGljZSA9IGRlbGV0ZWRJZHMuc2xpY2U7CgoJdmFyIGNvbmNhdCA9IGRlbGV0ZWRJZHMuY29uY2F0OwoKCXZhciBwdXNoID0gZGVsZXRlZElkcy5wdXNoOwoKCXZhciBpbmRleE9mID0gZGVsZXRlZElkcy5pbmRleE9mOwoKCXZhciBjbGFzczJ0eXBlID0ge307CgoJdmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZzsKCgl2YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTsKCgl2YXIgc3VwcG9ydCA9IHt9OwoKCgoJdmFyCgkJdmVyc2lvbiA9ICIxLjEyLjQiLAoKCQkvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeQoJCWpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHsKCgkJCS8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJwoJCQkvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKQoJCQlyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApOwoJCX0sCgoJCS8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBJRTw5CgkJLy8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQCgkJcnRyaW0gPSAvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csCgoJCS8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZwoJCXJtc1ByZWZpeCA9IC9eLW1zLS8sCgkJcmRhc2hBbHBoYSA9IC8tKFtcZGEtel0pL2dpLAoKCQkvLyBVc2VkIGJ5IGpRdWVyeS5jYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpCgkJZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHsKCQkJcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpOwoJCX07CgoJalF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHsKCgkJLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZAoJCWpxdWVyeTogdmVyc2lvbiwKCgkJY29uc3RydWN0b3I6IGpRdWVyeSwKCgkJLy8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvcgoJCXNlbGVjdG9yOiAiIiwKCgkJLy8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwCgkJbGVuZ3RoOiAwLAoKCQl0b0FycmF5OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTsKCQl9LAoKCQkvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SCgkJLy8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXkKCQlnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7CgkJCXJldHVybiBudW0gIT0gbnVsbCA/CgoJCQkJLy8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldAoJCQkJKCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOgoKCQkJCS8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGluIGEgY2xlYW4gYXJyYXkKCQkJCXNsaWNlLmNhbGwoIHRoaXMgKTsKCQl9LAoKCQkvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrCgkJLy8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpCgkJcHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7CgoJCQkvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldAoJCQl2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7CgoJCQkvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbg==", "base64"));
  res.write(new Buffer("Y2UpCgkJCXJldC5wcmV2T2JqZWN0ID0gdGhpczsKCQkJcmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7CgoJCQkvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldAoJCQlyZXR1cm4gcmV0OwoJCX0sCgoJCS8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuCgkJZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkgewoJCQlyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrICk7CgkJfSwKCgkJbWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCggdGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7CgkJCQlyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApOwoJCQl9ICkgKTsKCQl9LAoKCQlzbGljZTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7CgkJfSwKCgkJZmlyc3Q6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5lcSggMCApOwoJCX0sCgoJCWxhc3Q6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5lcSggLTEgKTsKCQl9LAoKCQllcTogZnVuY3Rpb24oIGkgKSB7CgkJCXZhciBsZW4gPSB0aGlzLmxlbmd0aCwKCQkJCWogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTsKCQl9LAoKCQllbmQ6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTsKCQl9LAoKCQkvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuCgkJLy8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuCgkJcHVzaDogcHVzaCwKCQlzb3J0OiBkZWxldGVkSWRzLnNvcnQsCgkJc3BsaWNlOiBkZWxldGVkSWRzLnNwbGljZQoJfTsKCglqUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkgewoJCXZhciBzcmMsIGNvcHlJc0FycmF5LCBjb3B5LCBuYW1lLCBvcHRpb25zLCBjbG9uZSwKCQkJdGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sCgkJCWkgPSAxLAoJCQlsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLAoJCQlkZWVwID0gZmFsc2U7CgoJCS8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb24KCQlpZiAoIHR5cGVvZiB0YXJnZXQgPT09ICJib29sZWFuIiApIHsKCQkJZGVlcCA9IHRhcmdldDsKCgkJCS8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXQKCQkJdGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307CgkJCWkrKzsKCQl9CgoJCS8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KQoJCWlmICggdHlwZW9mIHRhcmdldCAhPT0gIm9iamVjdCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHsKCQkJdGFyZ2V0ID0ge307CgkJfQoKCQkvLyBleHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWQKCQlpZiAoIGkgPT09IGxlbmd0aCApIHsKCQkJdGFyZ2V0ID0gdGhpczsKCQkJaS0tOwoJCX0KCgkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgoJCQkvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzCgkJCWlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkgewoKCQkJCS8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3QKCQkJCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQkJCQlzcmMgPSB0YXJnZXRbIG5hbWUgXTsKCQkJCQljb3B5ID0gb3B0aW9uc1sgbmFtZSBdOwoKCQkJCQkvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wCgkJCQkJaWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCgkJCQkJLy8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzCgkJCQkJaWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8CgkJCQkJCSggY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheSggY29weSApICkgKSApIHsKCgkJCQkJCWlmICggY29weUlzQXJyYXkgKSB7CgkJCQkJCQljb3B5SXNBcnJheSA9IGZhbHNlOwoJCQkJCQkJY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApID8gc3JjIDoge307CgkJCQkJCX0KCgkJCQkJCS8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbQoJCQkJCQl0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7CgoJCQkJCS8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXMKCQkJCQl9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJCXRhcmdldFsgbmFtZSBdID0gY29weTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCS8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0CgkJcmV0dXJuIHRhcmdldDsKCX07CgoJalF1ZXJ5LmV4dGVuZCggewoKCQkvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2UKCQlleHBhbmRvOiAialF1ZXJ5IiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXEQvZywgIiIgKSwKCgkJLy8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGUKCQlpc1JlYWR5OiB0cnVlLAoKCQllcnJvcjogZnVuY3Rpb24oIG1zZyApIHsKCQkJdGhyb3cgbmV3IEVycm9yKCBtc2cgKTsKCQl9LAoKCQlub29wOiBmdW5jdGlvbigpIHt9LAoKCQkvLyBTZWUgdGVzdC91bml0L2NvcmUuanMgZm9yIGRldGFpbHMgY29uY2VybmluZyBpc0Z1bmN0aW9uLgoJCS8vIFNpbmNlIHZlcnNpb24gMS4zLCBET00gbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGxpa2UgYWxlcnQKCQkvLyBhcmVuJ3Qgc3VwcG9ydGVkLiBUaGV5IHJldHVybiBmYWxzZSBvbiBJRSAoIzI5NjgpLgoJCWlzRnVuY3Rpb246IGZ1bmN0aW9uKCBvYmogKSB7CgkJCXJldHVybiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJmdW5jdGlvbiI7CgkJfSwKCgkJaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiggb2JqICkgewoJCQlyZXR1cm4galF1ZXJ5LnR5cGUoIG9iaiApID09PSAiYXJyYXkiOwoJCX0sCgoJCWlzV2luZG93OiBmdW5jdGlvbiggb2JqICkgewoJCQkvKiBqc2hpbnQgZXFlcWVxOiBmYWxzZSAqLwoJCQlyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09IG9iai53aW5kb3c7CgkJfSwKCgkJaXNOdW1lcmljOiBmdW5jdGlvbiggb2JqICkgewoKCQkJLy8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXwiIikKCQkJLy8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoIjB4Li4uIikKCQkJLy8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOCgkJCS8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKQoJCQl2YXIgcmVhbFN0cmluZ09iaiA9IG9iaiAmJiBvYmoudG9TdHJpbmcoKTsKCQkJcmV0dXJuICFqUXVlcnkuaXNBcnJheSggb2JqICkgJiYgKCByZWFsU3RyaW5nT2JqIC0gcGFyc2VGbG9hdCggcmVhbFN0cmluZ09iaiApICsgMSApID49IDA7CgkJfSwKCgkJaXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHsKCQkJdmFyIG5hbWU7CgkJCWZvciAoIG5hbWUgaW4gb2JqICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCXJldHVybiB0cnVlOwoJCX0sCgoJCWlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7CgkJCXZhciBrZXk7CgoJCQkvLyBNdXN0IGJlIGFuIE9iamVjdC4KCQkJLy8gQmVjYXVzZSBvZiBJRSwgd2UgYWxzbyBoYXZlIHRvIGNoZWNrIHRoZSBwcmVzZW5jZSBvZiB0aGUgY29uc3RydWN0b3IgcHJvcGVydHkuCgkJCS8vIE1ha2Ugc3VyZSB0aGF0IERPTSBub2RlcyBhbmQgd2luZG93IG9iamVjdHMgZG9uJ3QgcGFzcyB0aHJvdWdoLCBhcyB3ZWxsCgkJCWlmICggIW9iaiB8fCBqUXVlcnkudHlwZSggb2JqICkgIT09ICJvYmplY3QiIHx8IG9iai5ub2RlVHlwZSB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQl0cnkgewoKCQkJCS8vIE5vdCBvd24gY29uc3RydWN0b3IgcHJvcGVydHkgbXVzdCBiZSBPYmplY3QKCQkJCWlmICggb2JqLmNvbnN0cnVjdG9yICYmCgkJCQkJIWhhc093bi5jYWxsKCBvYmosICJjb25zdHJ1Y3RvciIgKSAmJgoJCQkJCSFoYXNPd24uY2FsbCggb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgImlzUHJvdG90eXBlT2YiICkgKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9IGNhdGNoICggZSApIHsKCgkJCQkvLyBJRTgsOSBXaWxsIHRocm93IGV4Y2VwdGlvbnMgb24gY2VydGFpbiBob3N0IG9iamVjdHMgIzk4OTcKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBIYW5kbGUgaXRlcmF0aW9uIG92ZXIgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVmb3JlIG93biBwcm9wZXJ0aWVzLgoJCQlpZiAoICFzdXBwb3J0Lm93bkZpcnN0ICkgewoJCQkJZm9yICgga2V5IGluIG9iaiApIHsKCQkJCQlyZXR1cm4gaGFzT3duLmNhbGwoIG9iaiwga2V5ICk7CgkJCQl9CgkJCX0KCgkJCS8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLAoJCQkvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi4KCQkJZm9yICgga2V5IGluIG9iaiApIHt9CgoJCQlyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgfHwgaGFzT3duLmNhbGwoIG9iaiwga2V5ICk7CgkJfSwKCgkJdHlwZTogZnVuY3Rpb24oIG9iaiApIHsKCQkJaWYgKCBvYmogPT0gbnVsbCApIHsKCQkJCXJldHVybiBvYmogKyAiIjsKCQkJfQoJCQlyZXR1cm4gdHlwZW9mIG9iaiA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIG9iaiA9PT0gImZ1bmN0aW9uIiA/CgkJCQljbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8ICJvYmplY3QiIDoKCQkJCXR5cGVvZiBvYmo7CgkJfSwKCgkJLy8gV29ya2Fyb3VuZHMgYmFzZWQgb24gZmluZGluZ3MgYnkgSmltIERyaXNjb2xsCgkJLy8gaHR0cDovL3dlYmxvZ3MuamF2YS5uZXQvYmxvZy9kcmlzY29sbC9hcmNoaXZlLzIwMDkvMDkvMDgvZXZhbC1qYXZhc2NyaXB0LWdsb2JhbC1jb250ZXh0CgkJZ2xvYmFsRXZhbDogZnVuY3Rpb24oIGRhdGEgKSB7CgkJCWlmICggZGF0YSAmJiBqUXVlcnkudHJpbSggZGF0YSApICkgewoKCQkJCS8vIFdlIHVzZSBleGVjU2NyaXB0IG9uIEludGVybmV0IEV4cGxvcmVyCgkJCQkvLyBXZSB1c2UgYW4gYW5vbnltb3VzIGZ1bmN0aW9uIHNvIHRoYXQgY29udGV4dCBpcyB3aW5kb3cKCQkJCS8vIHJhdGhlciB0aGFuIGpRdWVyeSBpbiBGaXJlZm94CgkJCQkoIHdpbmRvdy5leGVjU2NyaXB0IHx8IGZ1bmN0aW9uKCBkYXRhICkgewoJCQkJCXdpbmRvd1sgImV2YWwiIF0uY2FsbCggd2luZG93LCBkYXRhICk7IC8vIGpzY3M6aWdub3JlIHJlcXVpcmVEb3ROb3RhdGlvbgoJCQkJfSApKCBkYXRhICk7CgkJCX0KCQl9LAoKCQkvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzCgkJLy8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKQoJCWNhbWVsQ2FzZTogZnVuY3Rpb24oIHN0cmluZyApIHsKCQkJcmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsICJtcy0iICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApOwoJCX0sCgoJCW5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7CgkJfSwKCgkJZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2sgKSB7CgkJCXZhciBsZW5ndGgsIGkgPSAwOwoKCQkJaWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7CgkJCQlsZW5ndGggPSBvYmoubGVuZ3RoOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCQkJaWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWZvciAoIGkgaW4gb2JqICkgewoJCQkJCWlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiBvYmo7CgkJfSwKCgkJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIElFPDkKCQl0cmltOiBmdW5jdGlvbiggdGV4dCApIHsKCQkJcmV0dXJuIHRleHQgPT0gbnVsbCA/CgkJCQkiIiA6CgkJCQkoIHRleHQgKyAiIiApLnJlcGxhY2UoIHJ0cmltLCAiIiApOwoJCX0sCgoJCS8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHkKCQltYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7CgkJCXZhciByZXQgPSByZXN1bHRzIHx8IFtdOwoKCQkJaWYgKCBhcnIgIT0gbnVsbCApIHsKCQkJCWlmICggaXNBcnJheUxpa2UoIE9iamVjdCggYXJyICkgKSApIHsKCQkJCQlqUXVlcnkubWVyZ2UoIHJldCwKCQkJCQkJdHlwZW9mIGFyciA9PT0gInN0cmluZyIgPwoJCQkJCQlbIGFyciBdIDogYXJyCgkJCQkJKTsKCQkJCX0gZWxzZSB7CgkJCQkJcHVzaC5jYWxsKCByZXQsIGFyciApOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gcmV0OwoJCX0sCgoJCWluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7CgkJCXZhciBsZW47CgoJCQlpZiAoIGFyciApIHsKCQkJCWlmICggaW5kZXhPZiApIHsKCQkJCQlyZXR1cm4gaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTsKCQkJCX0KCgkJCQlsZW4gPSBhcnIubGVuZ3RoOwoJCQkJaSA9IGkgPyBpIDwgMCA/IE1hdGgubWF4KCAwLCBsZW4gKyBpICkgOiBpIDogMDsKCgkJCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCgkJCQkJLy8gU2tpcCBhY2Nlc3NpbmcgaW4gc3BhcnNlIGFycmF5cwoJCQkJCWlmICggaSBpbiBhcnIgJiYgYXJyWyBpIF0gPT09IGVsZW0gKSB7CgkJCQkJCXJldHVybiBpOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIC0xOwoJCX0sCgoJCW1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHsKCQkJdmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLAoJCQkJaiA9IDAsCgkJCQlpID0gZmlyc3QubGVuZ3RoOwoKCQkJd2hpbGUgKCBqIDwgbGVuICkgewoJCQkJZmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqKysgXTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBXb3JrYXJvdW5kIGNhc3Rpbmcgb2YgLmxlbmd0aCB0byBOYU4gb24gb3RoZXJ3aXNlIGFycmF5bGlrZSBvYmplY3RzIChlLmcuLCBOb2RlTGlzdHMpCgkJCWlmICggbGVuICE9PSBsZW4gKSB7CgkJCQl3aGlsZSAoIHNlY29uZFsgaiBdICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJZmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqKysgXTsKCQkJCX0KCQkJfQoKCQkJZmlyc3QubGVuZ3RoID0gaTsKCgkJCXJldHVybiBmaXJzdDsKCQl9LAoKCQlncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7CgkJCXZhciBjYWxsYmFja0ludmVyc2UsCgkJCQltYXRjaGVzID0gW10sCgkJCQlpID0gMCwKCQkJCWxlbmd0aCA9IGVsZW1zLmxlbmd0aCwKCQkJCWNhbGxiYWNrRXhwZWN0ID0gIWludmVydDsKCgkJCS8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXMKCQkJLy8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb24KCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCQljYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTsKCQkJCWlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHsKCQkJCQltYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIG1hdGNoZXM7CgkJfSwKCgkJLy8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5CgkJbWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7CgkJCXZhciBsZW5ndGgsIHZhbHVlLAoJCQkJaSA9IDAsCgkJCQlyZXQgPSBbXTsKCgkJCS8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzCgkJCWlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7CgkJCQlsZW5ndGggPSBlbGVtcy5sZW5ndGg7CgkJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCQl2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTsKCgkJCQkJaWYgKCB2YWx1ZSAhPSBudWxsICkgewoJCQkJCQlyZXQucHVzaCggdmFsdWUgKTsKCQkJCQl9CgkJ", "base64"));
  res.write(new Buffer("CQl9CgoJCQkvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LAoJCQl9IGVsc2UgewoJCQkJZm9yICggaSBpbiBlbGVtcyApIHsKCQkJCQl2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTsKCgkJCQkJaWYgKCB2YWx1ZSAhPSBudWxsICkgewoJCQkJCQlyZXQucHVzaCggdmFsdWUgKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXMKCQkJcmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApOwoJCX0sCgoJCS8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0cwoJCWd1aWQ6IDEsCgoJCS8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueQoJCS8vIGFyZ3VtZW50cy4KCQlwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkgewoJCQl2YXIgYXJncywgcHJveHksIHRtcDsKCgkJCWlmICggdHlwZW9mIGNvbnRleHQgPT09ICJzdHJpbmciICkgewoJCQkJdG1wID0gZm5bIGNvbnRleHQgXTsKCQkJCWNvbnRleHQgPSBmbjsKCQkJCWZuID0gdG1wOwoJCQl9CgoJCQkvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlYwoJCQkvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLgoJCQlpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHsKCQkJCXJldHVybiB1bmRlZmluZWQ7CgkJCX0KCgkJCS8vIFNpbXVsYXRlZCBiaW5kCgkJCWFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTsKCQkJcHJveHkgPSBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApOwoJCQl9OwoKCQkJLy8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkCgkJCXByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrOwoKCQkJcmV0dXJuIHByb3h5OwoJCX0sCgoJCW5vdzogZnVuY3Rpb24oKSB7CgkJCXJldHVybiArKCBuZXcgRGF0ZSgpICk7CgkJfSwKCgkJLy8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyCgkJLy8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC4KCQlzdXBwb3J0OiBzdXBwb3J0Cgl9ICk7CgoJLy8gSlNIaW50IHdvdWxkIGVycm9yIG9uIHRoaXMgY29kZSBkdWUgdG8gdGhlIFN5bWJvbCBub3QgYmVpbmcgZGVmaW5lZCBpbiBFUzUuCgkvLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuanNoaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWwKCS8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBqdXN0IGRpc2FibGUgSlNIaW50IGZvciB0aGVzZQoJLy8gdGhyZWUgbGluZXMuCgkvKiBqc2hpbnQgaWdub3JlOiBzdGFydCAqLwoJaWYgKCB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICkgewoJCWpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBkZWxldGVkSWRzWyBTeW1ib2wuaXRlcmF0b3IgXTsKCX0KCS8qIGpzaGludCBpZ25vcmU6IGVuZCAqLwoKCS8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcAoJalF1ZXJ5LmVhY2goICJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoICIgIiApLAoJZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJY2xhc3MydHlwZVsgIltvYmplY3QgIiArIG5hbWUgKyAiXSIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKCX0gKTsKCglmdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkgewoKCQkvLyBTdXBwb3J0OiBpT1MgOC4yIChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcikKCQkvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpCgkJLy8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzCgkJLy8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRQoJCXZhciBsZW5ndGggPSAhIW9iaiAmJiAibGVuZ3RoIiBpbiBvYmogJiYgb2JqLmxlbmd0aCwKCQkJdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTsKCgkJaWYgKCB0eXBlID09PSAiZnVuY3Rpb24iIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXJldHVybiB0eXBlID09PSAiYXJyYXkiIHx8IGxlbmd0aCA9PT0gMCB8fAoJCQl0eXBlb2YgbGVuZ3RoID09PSAibnVtYmVyIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajsKCX0KCXZhciBTaXp6bGUgPQoJLyohCgkgKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjEKCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCgkgKgoJICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJICoKCSAqIERhdGU6IDIwMTUtMTAtMTcKCSAqLwoJKGZ1bmN0aW9uKCB3aW5kb3cgKSB7CgoJdmFyIGksCgkJc3VwcG9ydCwKCQlFeHByLAoJCWdldFRleHQsCgkJaXNYTUwsCgkJdG9rZW5pemUsCgkJY29tcGlsZSwKCQlzZWxlY3QsCgkJb3V0ZXJtb3N0Q29udGV4dCwKCQlzb3J0SW5wdXQsCgkJaGFzRHVwbGljYXRlLAoKCQkvLyBMb2NhbCBkb2N1bWVudCB2YXJzCgkJc2V0RG9jdW1lbnQsCgkJZG9jdW1lbnQsCg==", "base64"));
  res.write(new Buffer("CQlkb2NFbGVtLAoJCWRvY3VtZW50SXNIVE1MLAoJCXJidWdneVFTQSwKCQlyYnVnZ3lNYXRjaGVzLAoJCW1hdGNoZXMsCgkJY29udGFpbnMsCgoJCS8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGEKCQlleHBhbmRvID0gInNpenpsZSIgKyAxICogbmV3IERhdGUoKSwKCQlwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsCgkJZGlycnVucyA9IDAsCgkJZG9uZSA9IDAsCgkJY2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJdG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJY29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7CgkJCWlmICggYSA9PT0gYiApIHsKCQkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJCX0KCQkJcmV0dXJuIDA7CgkJfSwKCgkJLy8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50cwoJCU1BWF9ORUdBVElWRSA9IDEgPDwgMzEsCgoJCS8vIEluc3RhbmNlIG1ldGhvZHMKCQloYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LAoJCWFyciA9IFtdLAoJCXBvcCA9IGFyci5wb3AsCgkJcHVzaF9uYXRpdmUgPSBhcnIucHVzaCwKCQlwdXNoID0gYXJyLnB1c2gsCgkJc2xpY2UgPSBhcnIuc2xpY2UsCgkJLy8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlCgkJLy8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81CgkJaW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkgewoJCQl2YXIgaSA9IDAsCgkJCQlsZW4gPSBsaXN0Lmxlbmd0aDsKCQkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCQlpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7CgkJCQkJcmV0dXJuIGk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIC0xOwoJCX0sCgoJCWJvb2xlYW5zID0gImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIiwKCgkJLy8gUmVndWxhciBleHByZXNzaW9ucwoKCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZQoJCXdoaXRlc3BhY2UgPSAiW1xceDIwXFx0XFxyXFxuXFxmXSIsCgoJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllcgoJCWlkZW50aWZpZXIgPSAiKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLAoKCQkvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnMKCQlhdHRyaWJ1dGVzID0gIlxcWyIgKyB3aGl0ZXNwYWNlICsgIiooIiArIGlkZW50aWZpZXIgKyAiKSg/OiIgKyB3aGl0ZXNwYWNlICsKCQkJLy8gT3BlcmF0b3IgKGNhcHR1cmUgMikKCQkJIiooWypeJHwhfl0/PSkiICsgd2hpdGVzcGFjZSArCgkJCS8vICJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdIgoJCQkiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiICsgaWRlbnRpZmllciArICIpKXwpIiArIHdoaXRlc3BhY2UgKwoJCQkiKlxcXSIsCgoJCXBzZXVkb3MgPSAiOigiICsgaWRlbnRpZmllciArICIpKD86XFwoKCIgKwoJCQkvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOgoJCQkvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSkKCQkJIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IiArCgkJCS8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KQoJCQkiKCg/OlxcXFwufFteXFxcXCgpW1xcXV18IiArIGF0dHJpYnV0ZXMgKyAiKSopfCIgKwoJCQkvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpCgkJCSIuKiIgKwoJCQkiKVxcKXwpIiwKCgkJLy8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlcgoJCXJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArICIrIiwgImciICksCgkJcnRyaW0gPSBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIgKyB3aGl0ZXNwYWNlICsgIiskIiwgImciICksCgoJCXJjb21tYSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKiwiICsgd2hpdGVzcGFjZSArICIqIiApLAoJCXJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKihbPit+XXwiICsgd2hpdGVzcGFjZSArICIpIiArIHdoaXRlc3BhY2UgKyAiKiIgKSwKCgkJcmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoICI9IiArIHdoaXRlc3BhY2UgKyAiKihbXlxcXSdcIl0qPykiICsgd2hpdGVzcGFjZSArICIqXFxdIiwgImciICksCgoJCXJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksCgkJcmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCAiXiIgKyBpZGVudGlmaWVyICsgIiQiICksCgoJCW1hdGNoRXhwciA9IHsKCQkJIklEIjogbmV3IFJlZ0V4cCggIl4jKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJCSJDTEFTUyI6IG5ldyBSZWdFeHAoICJeXFwuKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJCSJUQUciOiBuZXcgUmVnRXhwKCAiXigiICsgaWRlbnRpZmllciArICJ8WypdKSIgKSwKCQkJIkFUVFIiOg==", "base64"));
  res.write(new Buffer("IG5ldyBSZWdFeHAoICJeIiArIGF0dHJpYnV0ZXMgKSwKCQkJIlBTRVVETyI6IG5ldyBSZWdFeHAoICJeIiArIHBzZXVkb3MgKSwKCQkJIkNISUxEIjogbmV3IFJlZ0V4cCggIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIgKyB3aGl0ZXNwYWNlICsKCQkJCSIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIiArIHdoaXRlc3BhY2UgKyAiKig/OihbKy1dfCkiICsgd2hpdGVzcGFjZSArCgkJCQkiKihcXGQrKXwpKSIgKyB3aGl0ZXNwYWNlICsgIipcXCl8KSIsICJpIiApLAoJCQkiYm9vbCI6IG5ldyBSZWdFeHAoICJeKD86IiArIGJvb2xlYW5zICsgIikkIiwgImkiICksCgkJCS8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKQoJCQkvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgCgkJCSJuZWVkc0NvbnRleHQiOiBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIgKwoJCQkJd2hpdGVzcGFjZSArICIqKCg/Oi1cXGQpP1xcZCopIiArIHdoaXRlc3BhY2UgKyAiKlxcKXwpKD89W14tXXwkKSIsICJpIiApCgkJfSwKCgkJcmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksCgkJcmhlYWRlciA9IC9eaFxkJC9pLAoKCQlybmF0aXZlID0gL15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLAoKCQkvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnMKCQlycXVpY2tFeHByID0gL14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywKCgkJcnNpYmxpbmcgPSAvWyt+XS8sCgkJcmVzY2FwZSA9IC8nfFxcL2csCgoJCS8vIENTUyBlc2NhcGVzIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnMKCQlydW5lc2NhcGUgPSBuZXcgUmVnRXhwKCAiXFxcXChbXFxkYS1mXXsxLDZ9IiArIHdoaXRlc3BhY2UgKyAiP3woIiArIHdoaXRlc3BhY2UgKyAiKXwuKSIsICJpZyIgKSwKCQlmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7CgkJCXZhciBoaWdoID0gIjB4IiArIGVzY2FwZWQgLSAweDEwMDAwOwoJCQkvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludAoJCQkvLyBTdXBwb3J0OiBGaXJlZm94PDI0CgkJCS8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgKyIweCIKCQkJcmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgPwoJCQkJZXNjYXBlZCA6CgkJCQloaWdoIDwgMCA/CgkJCQkJLy8gQk1QIGNvZGVwb2ludAoJCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOgoJCQkJCS8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKQoJCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggPj4gMTAgfCAweEQ4MDAsIGhpZ2ggJiAweDNGRiB8IDB4REMwMCApOwoJCX0sCgoJCS8vIFVzZWQgZm9yIGlmcmFtZXMKCQkvLyBTZWUgc2V0RG9jdW1lbnQoKQoJCS8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhICJQZXJtaXNzaW9uIERlbmllZCIKCQkvLyBlcnJvciBpbiBJRQoJCXVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHsKCQkJc2V0RG9jdW1lbnQoKTsKCQl9OwoKCS8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApCgl0cnkgewoJCXB1c2guYXBwbHkoCgkJCShhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSwKCQkJcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMKCQkpOwoJCS8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wCgkJLy8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseQoJCWFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7Cgl9IGNhdGNoICggZSApIHsKCQlwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/CgoJCQkvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZQoJCQlmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7CgkJCQlwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTsKCQkJfSA6CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHkKCQkJZnVuY3Rpb24oIHRhcmdldCwgZWxzICkgewoJCQkJdmFyIGogPSB0YXJnZXQubGVuZ3RoLAoJCQkJCWkgPSAwOwoJCQkJLy8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoCgkJCQl3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9CgkJCQl0YXJnZXQubGVuZ3RoID0gaiAtIDE7CgkJCX0KCQl9OwoJfQoKCWZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7CgkJdmFyIG0sIGksIGVsZW0sIG5pZCwgbmlkc2VsZWN0LCBtYXRjaCwgZ3JvdXBzLCBuZXdTZWxlY3RvciwKCQkJbmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LAoKCQkJLy8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudAoJCQlub2RlVHlwZSA9IGNvbnRleHQgPyBjb250ZXh0Lm5vZGVUeXBlIDogOTsKCgkJcmVzdWx0cyA9IHJlc3VsdHMgfHwgW107CgoJCS8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0CgkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09ICJzdHJpbmciIHx8ICFzZWxlY3RvciB8fAoJCQlub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7CgoJCQlyZXR1cm4gcmVzdWx0czsKCQl9CgoJCS8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgKGFzIG9wcG9zZWQgdG8gZmlsdGVycykgaW4gSFRNTCBkb2N1bWVudHMKCQlpZiAoICFzZWVkICkgewoKCQkJaWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHsKCQkJCXNldERvY3VtZW50KCBjb250ZXh0ICk7CgkJCX0KCQkJY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7CgoJCQlpZiAoIGRvY3VtZW50SXNIVE1MICkgewoKCQkJCS8vIElmIHRoZSBzZWxlY3RvciBpcyBzdWZmaWNpZW50bHkgc2ltcGxlLCB0cnkgdXNpbmcgYSAiZ2V0KkJ5KiIgRE9NIG1ldGhvZAoJCQkJLy8gKGV4Y2VwdGluZyBEb2N1bWVudEZyYWdtZW50IGNvbnRleHQsIHdoZXJlIHRoZSBtZXRob2RzIGRvbid0IGV4aXN0KQoJCQkJaWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHsKCgkJCQkJLy8gSUQgc2VsZWN0b3IKCQkJCQlpZiAoIChtID0gbWF0Y2hbMV0pICkgewoKCQkJCQkJLy8gRG9jdW1lbnQgY29udGV4dAoJCQkJCQlpZiAoIG5vZGVUeXBlID09PSA5ICkgewoJCQkJCQkJaWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7CgoJCQkJCQkJCS8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0CgkJCQkJCQkJLy8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnMKCQkJCQkJCQkvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElECgkJCQkJCQkJaWYgKCBlbGVtLmlkID09PSBtICkgewoJCQkJCQkJCQlyZXN1bHRzLnB1c2goIGVsZW0gKTsKCQkJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJCX0KCgkJCQkJCS8vIEVsZW1lbnQgY29udGV4dAoJCQkJCQl9IGVsc2UgewoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0CgkJCQkJCQkvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9ucwoJCQkJCQkJLy8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRAoJCQkJCQkJaWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJgoJCQkJCQkJCWNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYKCQkJCQkJCQllbGVtLmlkID09PSBtICkgewoKCQkJCQkJCQlyZXN1bHRzLnB1c2goIGVsZW0gKTsKCQkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkvLyBUeXBlIHNlbGVjdG9yCgkJCQkJfSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7CgkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHNlbGVjdG9yICkgKTsKCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgoJCQkJCS8vIENsYXNzIHNlbGVjdG9yCgkJCQkJfSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmCgkJCQkJCWNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHsKCgkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsCgkJCQlpZiAoIHN1cHBvcnQucXNhICYmCgkJCQkJIWNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF0gJiYKCQkJCQkoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkgewoKCQkJCQlpZiAoIG5vZGVUeXBlICE9PSAxICkgewoJCQkJCQluZXdDb250ZXh0ID0gY29udGV4dDsKCQkJCQkJbmV3U2VsZWN0b3IgPSBzZWxlY3RvcjsKCgkJCQkJLy8gcVNBIGxvb2tzIG91dHNpZGUgRWxlbWVudCBjb250ZXh0LCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50CgkJCQkJLy8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgd29ya2Fyb3VuZCB0ZWNobmlxdWUKCQkJCQkvLyBTdXBwb3J0OiBJRSA8PTgKCQkJCQkvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50cwoJCQkJCX0gZWxzZSBpZiAoIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gIm9iamVjdCIgKSB7CgoJCQkJCQkvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeQoJCQkJCQlpZiAoIChuaWQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZSggImlkIiApKSApIHsKCQkJCQkJCW5pZCA9IG5pZC5yZXBsYWNlKCByZXNjYXBlLCAiXFwkJiIgKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNvbnRleHQuc2V0QXR0cmlidXRlKCAiaWQiLCAobmlkID0gZXhwYW5kbykgKTsKCQkJCQkJfQoKCQkJCQkJLy8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0CgkJCQkJCWdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApOwoJCQkJCQlpID0gZ3JvdXBzLmxlbmd0aDsKCQkJCQkJbmlkc2VsZWN0ID0gcmlkZW50aWZpZXIudGVzdCggbmlkICkgPyAiIyIgKyBuaWQgOiAiW2lkPSciICsgbmlkICsgIiddIjsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlncm91cHNbaV0gPSBuaWRzZWxlY3QgKyAiICIgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTsKCQkJCQkJfQoJCQkJCQluZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCAiLCIgKTsKCgkJCQkJCS8vIEV4cGFuZCBjb250ZXh0IGZvciBzaWJsaW5nIHNlbGVjdG9ycwoJCQkJCQluZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiA=", "base64"));
  res.write(new Buffer("dGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8CgkJCQkJCQljb250ZXh0OwoJCQkJCX0KCgkJCQkJaWYgKCBuZXdTZWxlY3RvciApIHsKCQkJCQkJdHJ5IHsKCQkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsCgkJCQkJCQkJbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApCgkJCQkJCQkpOwoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0gY2F0Y2ggKCBxc2FFcnJvciApIHsKCQkJCQkJfSBmaW5hbGx5IHsKCQkJCQkJCWlmICggbmlkID09PSBleHBhbmRvICkgewoJCQkJCQkJCWNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCAiaWQiICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEFsbCBvdGhlcnMKCQlyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7Cgl9CgoJLyoqCgkgKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemUKCSAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGgKCSAqCXByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpCgkgKglkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5CgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkgewoJCXZhciBrZXlzID0gW107CgoJCWZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkgewoJCQkvLyBVc2UgKGtleSArICIgIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1NykKCQkJaWYgKCBrZXlzLnB1c2goIGtleSArICIgIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHsKCQkJCS8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllcwoJCQkJZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTsKCQkJfQoJCQlyZXR1cm4gKGNhY2hlWyBrZXkgKyAiICIgXSA9IHZhbHVlKTsKCQl9CgkJcmV0dXJuIGNhY2hlOwoJfQoKCS8qKgoJICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGUKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrCgkgKi8KCWZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7CgkJZm5bIGV4cGFuZG8gXSA9IHRydWU7CgkJcmV0dXJuIGZuOwoJfQoKCS8qKgoJICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnQKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdAoJICovCglmdW5jdGlvbiBhc3NlcnQoIGZuICkgewoJCXZhciBkaXYgPSBkb2M=", "base64"));
  res.write(new Buffer("dW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgoJCXRyeSB7CgkJCXJldHVybiAhIWZuKCBkaXYgKTsKCQl9IGNhdGNoIChlKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9IGZpbmFsbHkgewoJCQkvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHQKCQkJaWYgKCBkaXYucGFyZW50Tm9kZSApIHsKCQkJCWRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTsKCQkJfQoJCQkvLyByZWxlYXNlIG1lbW9yeSBpbiBJRQoJCQlkaXYgPSBudWxsOwoJCX0KCX0KCgkvKioKCSAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnMKCSAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXMKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZAoJICovCglmdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkgewoJCXZhciBhcnIgPSBhdHRycy5zcGxpdCgifCIpLAoJCQlpID0gYXJyLmxlbmd0aDsKCgkJd2hpbGUgKCBpLS0gKSB7CgkJCUV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyOwoJCX0KCX0KCgkvKioKCSAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3MKCSAqIEBwYXJhbSB7RWxlbWVudH0gYQoJICogQHBhcmFtIHtFbGVtZW50fSBiCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGIKCSAqLwoJZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkgewoJCXZhciBjdXIgPSBiICYmIGEsCgkJCWRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmCgkJCQkoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC0KCQkJCSggfmEuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICk7CgoJCS8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2RlcwoJCWlmICggZGlmZiApIHsKCQkJcmV0dXJuIGRpZmY7CgkJfQoKCQkvLyBDaGVjayBpZiBiIGZvbGxvd3MgYQoJCWlmICggY3VyICkgewoJCQl3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkgewoJCQkJaWYgKCBjdXIgPT09IGIgKSB7CgkJCQkJcmV0dXJuIC0xOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gYSA/IDEgOiAtMTsKCX0KCgkvKioKCSAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXMKCSAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkgewoJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiBuYW1lID09PSAiaW5wdXQiICYmIGVsZW0udHlwZSA9PT0gdHlwZTsKCQl9OwoJfQoKCS8qKgoJICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zCgkgKiBAcGFyYW0ge1N0cmluZ30gdHlwZQoJICovCglmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7CgkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIChuYW1lID09PSAiaW5wdXQiIHx8IG5hbWUgPT09ICJidXR0b24iKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7CgkJfTsKCX0KCgkvKioKCSAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHMKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuCgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkgewoJCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkgewoJCQlhcmd1bWVudCA9ICthcmd1bWVudDsKCQkJcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCXZhciBqLAoJCQkJCW1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksCgkJCQkJaSA9IG1hdGNoSW5kZXhlcy5sZW5ndGg7CgoJCQkJLy8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzCgkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQlpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkgewoJCQkJCQlzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9KTsKCX0KCgkvKioKCSAqIENoZWNrcyBhIG5vZGUgZm9yIHZhbGlkaXR5IGFzIGEgU2l6emxlIGNvbnRleHQKCSAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3Q9fSBjb250ZXh0CgkgKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWUKCSAqLwoJZnVuY3Rpb24gdGVzdENvbnRleHQoIGNvbnRleHQgKSB7CgkJcmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09ICJ1bmRlZmluZWQiICYmIGNvbnRleHQ7Cgl9CgoJLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2UKCXN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9OwoKCS8qKgoJICogRGV0ZWN0cyBYTUwgbm9kZXMKCSAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50CgkgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlCgkgKi8KCWlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7Cg==", "base64"));
  res.write(new Buffer("CQkvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0CgkJLy8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpCgkJdmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7CgkJcmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gIkhUTUwiIDogZmFsc2U7Cgl9OwoKCS8qKgoJICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50CgkgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudAoJICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudAoJICovCglzZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkgewoJCXZhciBoYXNDb21wYXJlLCBwYXJlbnQsCgkJCWRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYzsKCgkJLy8gUmV0dXJuIGVhcmx5IGlmIGRvYyBpcyBpbnZhbGlkIG9yIGFscmVhZHkgc2VsZWN0ZWQKCQlpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkgewoJCQlyZXR1cm4gZG9jdW1lbnQ7CgkJfQoKCQkvLyBVcGRhdGUgZ2xvYmFsIHZhcmlhYmxlcwoJCWRvY3VtZW50ID0gZG9jOwoJCWRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgkJZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvY3VtZW50ICk7CgoJCS8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2UKCQkvLyBBY2Nlc3NpbmcgaWZyYW1lIGRvY3VtZW50cyBhZnRlciB1bmxvYWQgdGhyb3dzICJwZXJtaXNzaW9uIGRlbmllZCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KQoJCWlmICggKHBhcmVudCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3KSAmJiBwYXJlbnQudG9wICE9PSBwYXJlbnQgKSB7CgkJCS8vIFN1cHBvcnQ6IElFIDExCgkJCWlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCQlwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggInVubG9hZCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7CgoJCQkvLyBTdXBwb3J0OiBJRSA5IC0gMTAgb25seQoJCQl9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7CgkJCQlwYXJlbnQuYXR0YWNoRXZlbnQoICJvbnVubG9hZCIsIHVubG9hZEhhbmRsZXIgKTsKCQkJfQoJCX0KCgkJLyogQXR0cmlidXRlcwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgkJLy8gU3VwcG9ydDogSUU8OAoJCS8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllcwoJCS8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKQoJCXN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlkaXYuY2xhc3NOYW1lID0gImkiOwoJCQlyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpOwoJCX0pOwoKCQkvKiBnZXRFbGVtZW50KHMpQnkqCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpIHJldHVybnMgb25seSBlbGVtZW50cwoJCXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSApOwoJCQlyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aDsKCQl9KTsKCgkJLy8gU3VwcG9ydDogSUU8OQoJCXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApOwoKCQkvLyBTdXBwb3J0OiBJRTwxMAoJCS8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZQoJCS8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1hdGljYWxseS1zZXQgbmFtZXMsCgkJLy8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0CgkJc3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCWRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbzsKCQkJcmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7CgkJfSk7CgoJCS8vIElEIGZpbmQgYW5kIGZpbHRlcgoJCWlmICggc3VwcG9ydC5nZXRCeUlkICkgewoJCQlFeHByLmZpbmRbIklEIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7CgkJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSAidW5kZWZpbmVkIiAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCQl2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7CgkJCQkJcmV0dXJuIG0gPyBbIG0gXSA6IFtdOwoJCQkJfQoJCQl9OwoJCQlFeHByLmZpbHRlclsiSUQiXSA9IGZ1bmN0aW9uKCBpZCApIHsKCQkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gYXR0cklkOwoJCQkJfTsKCQkJfTsKCQl9IGVsc2UgewoJCQkvLyBTdXBwb3J0OiBJRTYvNwoJCQkvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0CgkJCWRlbGV0ZSBFeHByLmZpbmRbIklEIl07CgoJCQlFeHByLmZpbHRlclsiSUQiXSA9ICBmdW5jdGlvbiggaWQgKSB7CgkJCQl2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09ICJ1bmRlZmluZWQiICYmCgkJCQkJCWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKCQkJCQlyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7CgkJCQl9OwoJCQl9OwoJCX0KCgkJLy8gVGFnCgkJRXhwci5maW5kWyJUQUciXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPwoJCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApOwoKCQkJCS8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTgoJCQkJfSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7CgkJCQkJcmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7CgkJCQl9CgkJCX0gOgoKCQkJZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHsKCQkJCXZhciBlbGVtLAoJCQkJCXRtcCA9IFtdLAoJCQkJCWkgPSAwLAoJCQkJCS8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b28KCQkJCQlyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQkJLy8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50cwoJCQkJaWYgKCB0YWcgPT09ICIqIiApIHsKCQkJCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQkJdG1wLnB1c2goIGVsZW0gKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIHRtcDsKCQkJCX0KCQkJCXJldHVybiByZXN1bHRzOwoJCQl9OwoKCQkvLyBDbGFzcwoJCUV4cHIuZmluZFsiQ0xBU1MiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50SXNIVE1MICkgewoJCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVu", "base64"));
  res.write(new Buffer("dHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7CgkJCX0KCQl9OwoKCQkvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0CgoJCS8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpCgkJcmJ1Z2d5TWF0Y2hlcyA9IFtdOwoKCQkvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKQoJCS8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvcgoJCS8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWUKCQkvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvcgoJCS8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OAoJCXJidWdneVFTQSA9IFtdOwoKCQlpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApKSApIHsKCQkJLy8gQnVpbGQgUVNBIHJlZ2V4CgkJCS8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmkKCQkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCQkvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlCgkJCQkvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHkKCQkJCS8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLAoJCQkJLy8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2gKCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzU5CgkJCQlkb2NFbGVtLmFwcGVuZENoaWxkKCBkaXYgKS5pbm5lckhUTUwgPSAiPGEgaWQ9JyIgKyBleHBhbmRvICsgIic+PC9hPiIgKwoJCQkJCSI8c2VsZWN0IGlkPSciICsgZXhwYW5kbyArICItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+IiArCgkJCQkJIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjsKCgkJCQkvLyBTdXBwb3J0OiBJRTgsIE9wZXJhIDExLTEyLjE2CgkJCQkvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9CgkJCQkvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCAic2FmZSIgZm9yIFdpblJUCgkJCQkvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGk=", "base64"));
  res.write(new Buffer("b24KCQkJCWlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2FwdHVyZV49JyddIikubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCAiWypeJF09IiArIHdoaXRlc3BhY2UgKyAiKig/OicnfFwiXCIpIiApOwoJCQkJfQoKCQkJCS8vIFN1cHBvcnQ6IElFOAoJCQkJLy8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCAidmFsdWUiIGFyZSBub3QgdHJlYXRlZCBjb3JyZWN0bHkKCQkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCAiXFxbIiArIHdoaXRlc3BhY2UgKyAiKig/OnZhbHVlfCIgKyBib29sZWFucyArICIpIiApOwoJCQkJfQoKCQkJCS8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44KwoJCQkJaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoICJbaWR+PSIgKyBleHBhbmRvICsgIi1dIiApLmxlbmd0aCApIHsKCQkJCQlyYnVnZ3lRU0EucHVzaCgifj0iKTsKCQkJCX0KCgkJCQkvLyBXZWJraXQvT3BlcmEgLSA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIHNlbGVjdGVkIG9wdGlvbiBlbGVtZW50cwoJCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWQKCQkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goIjpjaGVja2VkIik7CgkJCQl9CgoJCQkJLy8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCsKCQkJCS8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTEKCQkJCS8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmluZy1jb21iaW5hdG9yIHNlbGVjdG9yYCBmYWlscwoJCQkJaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoICJhIyIgKyBleHBhbmRvICsgIisqIiApLmxlbmd0aCApIHsKCQkJCQlyYnVnZ3lRU0EucHVzaCgiLiMuK1srfl0iKTsKCQkJCX0KCQkJfSk7CgoJCQlhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJCS8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwcwoJCQkJLy8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50CgkJCQl2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJoaWRkZW4iICk7CgkJCQlkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCAibmFtZSIsICJEIiApOwoKCQkJCS8vIFN1cHBvcnQ6IElFOAoJCQkJLy8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXQ=", "base64"));
  res.write(new Buffer("eSBvZiBuYW1lIGF0dHJpYnV0ZQoJCQkJaWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICJuYW1lIiArIHdoaXRlc3BhY2UgKyAiKlsqXiR8IX5dPz0iICk7CgkJCQl9CgoJCQkJLy8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZCkKCQkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICI6ZW5hYmxlZCIsICI6ZGlzYWJsZWQiICk7CgkJCQl9CgoJCQkJLy8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3MKCQkJCWRpdi5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iik7CgkJCQlyYnVnZ3lRU0EucHVzaCgiLC4qOiIpOwoJCQl9KTsKCQl9CgoJCWlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fAoJCQlkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fAoJCQlkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fAoJCQlkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHwKCQkJZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7CgoJCQlhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJCS8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvcgoJCQkJLy8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSkKCQkJCXN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggPSBtYXRjaGVzLmNhbGwoIGRpdiwgImRpdiIgKTsKCgkJCQkvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uCgkJCQkvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkCgkJCQltYXRjaGVzLmNhbGwoIGRpdiwgIltzIT0nJ106eCIgKTsKCQkJCXJidWdneU1hdGNoZXMucHVzaCggIiE9IiwgcHNldWRvcyApOwoJCQl9KTsKCQl9CgoJCXJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oInwiKSApOwoJCXJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oInwiKSApOwoKCQkvKiBDb250YWlucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCQloYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7CgoJCS8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlcgoJCS8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZQoJCS8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmCgkJY29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID8KCQkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCQl2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLAoJCQkJCWJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlOwoJCQkJcmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoCgkJCQkJYWRvd24uY29udGFpbnMgPwoJCQkJCQlhZG93bi5jb250YWlucyggYnVwICkgOgoJCQkJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTYKCQkJCSkpOwoJCQl9IDoKCQkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCQlpZiAoIGIgKSB7CgkJCQkJd2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7CgkJCQkJCWlmICggYiA9PT0gYSApIHsKCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoKCQkvKiBTb3J0aW5nCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nCgkJc29ydE9yZGVyID0gaGFzQ29tcGFyZSA/CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgoJCQkvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbAoJCQlpZiAoIGEgPT09IGIgKSB7CgkJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQkJcmV0dXJuIDA7CgkJCX0KCgkJCS8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb24KCQkJdmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCQlpZiAoIGNvbXBhcmUgKSB7CgkJCQlyZXR1cm4gY29tcGFyZTsKCQkJfQoKCQkJLy8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudAoJCQljb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgPwoJCQkJYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDoKCgkJCQkvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWQKCQkJCTE7CgoJCQkvLyBEaXNjb25uZWN0ZWQgbm9kZXMKCQkJaWYgKCBjb21wYXJlICYgMSB8fAoJCQkJKCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkgewoKCQkJCS8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudAoJCQkJaWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkgewoJCQkJCXJldHVybiAtMTsKCQkJCX0KCQkJCWlmICggYiA9PT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHsKCQkJCQlyZXR1cm4gMTsKCQkJCX0KCgkJCQkvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlcgoJCQkJcmV0dXJuIHNvcnRJbnB1dCA/CgkJCQkJKCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJCTA7CgkJCX0KCgkJCXJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTsKCQl9IDoKCQlmdW5jdGlvbiggYSwgYiApIHsKCQkJLy8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbAoJCQlpZiAoIGEgPT09IGIgKSB7CgkJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQkJcmV0dXJuIDA7CgkJCX0KCgkJCXZhciBjdXIsCgkJCQlpID0gMCwKCQkJCWF1cCA9IGEucGFyZW50Tm9kZSwKCQkJCWJ1cCA9IGIucGFyZW50Tm9kZSwKCQkJCWFwID0gWyBhIF0sCgkJCQlicCA9IFsgYiBdOwoKCQkJLy8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWQKCQkJaWYgKCAhYXVwIHx8ICFidXAgKSB7CgkJCQlyZXR1cm4gYSA9PT0gZG9jdW1lbnQgPyAtMSA6CgkJCQkJYiA9PT0gZG9jdW1lbnQgPyAxIDoKCQkJCQlhdXAgPyAtMSA6CgkJCQkJYnVwID8gMSA6CgkJCQkJc29ydElucHV0ID8KCQkJCQkoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6CgkJCQkJMDsKCgkJCS8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrCgkJCX0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkgewoJCQkJcmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApOwoJCQl9CgoJCQkvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvbgoJCQljdXIgPSBhOwoJCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCQlhcC51bnNoaWZ0KCBjdXIgKTsKCQkJfQoJCQljdXIgPSBiOwoJCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCQlicC51bnNoaWZ0KCBjdXIgKTsKCQkJfQoKCQkJLy8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3kKCQkJd2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7CgkJCQlpKys7CgkJCX0KCgkJCXJldHVybiBpID8KCQkJCS8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvcgoJCQkJc2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6CgoJCQkJLy8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0CgkJCQlhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOgoJCQkJYnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOgoJCQkJMDsKCQl9OwoKCQlyZXR1cm4gZG9jdW1lbnQ7Cgl9OwoKCVNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkgewoJCXJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7Cgl9OwoKCVNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHsKCQkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCQlpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBlbGVtICk7CgkJfQoKCQkvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWQKCQlleHByID0gZXhwci5yZXBsYWNlKCByYXR0cmlidXRlUXVvdGVzLCAiPSckMSddIiApOwoKCQlpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCSFjb21waWxlckNhY2hlWyBleHByICsgIiAiIF0gJiYKCQkJKCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJgoJCQkoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7CgoJCQl0cnkgewoJCQkJdmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApOwoKCQkJCS8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKCQkJCWlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHwKCQkJCQkJLy8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnQKCQkJCQkJLy8gZnJhZ21lbnQgaW4gSUUgOQoJCQkJCQllbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkgewoJCQkJCXJldHVybiByZXQ7CgkJCQl9CgkJCX0gY2F0Y2ggKGUpIHt9CgkJfQoKCQlyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwOwoJfTsKCglTaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHsKCQkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCQlpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBjb250ZXh0ICk7CgkJfQoJCXJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApOwoJfTsKCglTaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCS8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZAoJCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCQl9CgoJCXZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sCgkJCS8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KQoJCQl2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/CgkJCQlmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOgoJCQkJdW5kZWZpbmVkOwoKCQlyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgPwoJCQl2YWwgOgoJCQlzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID8KCQkJCWVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOgoJCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/CgkJCQkJdmFsLnZhbHVlIDoKCQkJCQludWxsOwoJfTsKCglTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkgewoJCXRocm93IG5ldyBFcnJvciggIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIgKyBtc2cgKTsKCX07CgoJLyoqCgkgKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzCgkgKiBAcGFyYW0ge0FycmF5TGlrZX0gcmVzdWx0cwoJICovCglTaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkgewoJCXZhciBlbGVtLAoJCQlkdXBsaWNhdGVzID0gW10sCgkJCWogPSAwLAoJCQlpID0gMDsKCgkJLy8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZQoJCWhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7CgkJc29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7CgkJcmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTsKCgkJaWYgKCBoYXNEdXBsaWNhdGUgKSB7CgkJCXdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkgewoJCQkJaWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7CgkJCQkJaiA9IGR1cGxpY2F0ZXMucHVzaCggaSApOwoJCQkJfQoJCQl9CgkJCXdoaWxlICggai0tICkgewoJCQkJcmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApOwoJCQl9CgkJfQoKCQkvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0cwoJCS8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNQoJCXNvcnRJbnB1dCA9IG51bGw7CgoJCXJldHVybiByZXN1bHRzOwoJfTsKCgkvKioKCSAqIA==", "base64"));
  res.write(new Buffer("VXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXMKCSAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbQoJICovCglnZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgbm9kZSwKCQkJcmV0ID0gIiIsCgkJCWkgPSAwLAoJCQlub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7CgoJCWlmICggIW5vZGVUeXBlICkgewoJCQkvLyBJZiBubyBub2RlVHlwZSwgdGhpcyBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheQoJCQl3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHsKCQkJCS8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzCgkJCQlyZXQgKz0gZ2V0VGV4dCggbm9kZSApOwoJCQl9CgkJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkgewoJCQkvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzCgkJCS8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKGpRdWVyeSAjMTExNTMpCgkJCWlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09ICJzdHJpbmciICkgewoJCQkJcmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7CgkJCX0gZWxzZSB7CgkJCQkvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW4KCQkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJCXJldCArPSBnZXRUZXh0KCBlbGVtICk7CgkJCQl9CgkJCX0KCQl9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHsKCQkJcmV0dXJuIGVsZW0ubm9kZVZhbHVlOwoJCX0KCQkvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXMKCgkJcmV0dXJuIHJldDsKCX07CgoJRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7CgoJCS8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlcgoJCWNhY2hlTGVuZ3RoOiA1MCwKCgkJY3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sCgoJCW1hdGNoOiBtYXRjaEV4cHIsCgoJCWF0dHJIYW5kbGU6IHt9LAoKCQlmaW5kOiB7fSwKCgkJcmVsYXRpdmU6IHsKCQkJIj4iOiB7IGRpcjogInBhcmVudE5vZGUiLCBmaXJzdDogdHJ1ZSB9LAoJCQkiICI6IHsgZGlyOiAicGFyZW50Tm9kZSIgfSwKCQkJIisiOiB7IGRpcjogInByZXZpb3VzU2libGluZyIsIGZpcnN0OiB0cnVlIH0sCgkJCSJ+IjogeyBkaXI6ICJwcmV2aW91c1NpYmxpbmciIH0KCQl9LAoKCQlwcmVGaWx0ZXI6IHsKCQkJIkFUVFIiOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJCQltYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgoJCQkJLy8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWQKCQkJCW1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCAiIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgoJCQkJaWYgKCBtYXRjaFsyXSA9PT0gIn49IiApIHsKCQkJCQltYXRjaFszXSA9ICIgIiArIG1hdGNoWzNdICsgIiAiOwoJCQkJfQoKCQkJCXJldHVybiBtYXRjaC5zbGljZSggMCwgNCApOwoJCQl9LAoKCQkJIkNISUxEIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQkJLyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwclsiQ0hJTEQiXQoJCQkJCTEgdHlwZSAob25seXxudGh8Li4uKQoJCQkJCTIgd2hhdCAoY2hpbGR8b2YtdHlwZSkKCQkJCQkzIGFyZ3VtZW50IChldmVufG9kZHxcZCp8XGQqbihbKy1dXGQrKT98Li4uKQoJCQkJCTQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XGQqbnwpCgkJCQkJNSBzaWduIG9mIHhuLWNvbXBvbmVudAoJCQkJCTYgeCBvZiB4bi1jb21wb25lbnQKCQkJCQk3IHNpZ24gb2YgeS1jb21wb25lbnQKCQkJCQk4IHkgb2YgeS1jb21wb25lbnQKCQkJCSovCgkJCQltYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7CgoJCQkJaWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSAibnRoIiApIHsKCQkJCQkvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudAoJCQkJCWlmICggIW1hdGNoWzNdICkgewoJCQkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCQkJfQoKCQkJCQkvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTEQKCQkJCQkvLyByZW1lbWJlciB0aGF0IGZhbHNlL3RydWUgY2FzdCByZXNwZWN0aXZlbHkgdG8gMC8xCgkJCQkJbWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09ICJldmVuIiB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKSApOwoJCQkJCW1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09ICJvZGQiICk7CgoJCQkJLy8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzCgkJCQl9IGVsc2UgaWYgKCBtYXRjaFszXSApIHsKCQkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCQl9CgoJCQkJcmV0dXJuIG1hdGNoOwoJCQl9LAoKCQkJIlBTRVVETyI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJCXZhciBleGNlc3MsCgkJCQkJdW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07CgoJCQkJaWYgKCBtYXRjaEV4cHJbIkNISUxEIl0udGVzdCggbWF0Y2hbMF0gKSApIHsKCQkJCQlyZXR1cm4gbnVsbDsKCQkJCX0KCgkJCQkvLyBBY2NlcHQgcXVvdGVkIGFyZ3VtZW50cyBhcy1pcwoJCQkJaWYgKCBtYXRjaFszXSApIHsKCQkJCQltYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8ICIiOwoKCQkJCS8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzCgkJCQl9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiYKCQkJCQkvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KQoJCQkJCShleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSkgJiYKCQkJCQkvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXMKCQkJCQkoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggIikiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7CgoJCQkJCS8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4CgkJCQkJbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7CgkJCQkJbWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7CgkJCQl9CgoJCQkJLy8gUmV0dXJuIG9ubHkgY2FwdHVyZXMgbmVlZGVkIGJ5IHRoZSBwc2V1ZG8gZmlsdGVyIG1ldGhvZCAodHlwZSBhbmQgYXJndW1lbnQpCgkJCQlyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTsKCQkJfQoJCX0sCgoJCWZpbHRlcjogewoKCQkJIlRBRyI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkgewoJCQkJdmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gIioiID8KCQkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOgoJCQkJCWZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQlyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lOwoJCQkJCX07CgkJCX0sCgoJCQkiQ0xBU1MiOiBmdW5jdGlvbiggY2xhc3NOYW1lICkgewoJCQkJdmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyAiICIgXTsKCgkJCQlyZXR1cm4gcGF0dGVybiB8fAoJCQkJCShwYXR0ZXJuID0gbmV3IFJlZ0V4cCggIihefCIgKyB3aGl0ZXNwYWNlICsgIikiICsgY2xhc3NOYW1lICsgIigiICsgd2hpdGVzcGFjZSArICJ8JCkiICkpICYmCgkJCQkJY2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQkJcmV0dXJuIHBhdHRlcm4udGVzdCggdHlwZW9mIGVsZW0uY2xhc3NOYW1lID09PSAic3RyaW5nIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09ICJ1bmRlZmluZWQiICYmIGVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiICk7CgkJCQkJfSk7CgkJCX0sCgoJCQkiQVRUUiI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJdmFyIHJl", "base64"));
  res.write(new Buffer("c3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7CgoJCQkJCWlmICggcmVzdWx0ID09IG51bGwgKSB7CgkJCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIiE9IjsKCQkJCQl9CgkJCQkJaWYgKCAhb3BlcmF0b3IgKSB7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0KCgkJCQkJcmVzdWx0ICs9ICIiOwoKCQkJCQlyZXR1cm4gb3BlcmF0b3IgPT09ICI9IiA/IHJlc3VsdCA9PT0gY2hlY2sgOgoJCQkJCQlvcGVyYXRvciA9PT0gIiE9IiA/IHJlc3VsdCAhPT0gY2hlY2sgOgoJCQkJCQlvcGVyYXRvciA9PT0gIl49IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDoKCQkJCQkJb3BlcmF0b3IgPT09ICIqPSIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQkJb3BlcmF0b3IgPT09ICIkPSIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOgoJCQkJCQlvcGVyYXRvciA9PT0gIn49IiA/ICggIiAiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCAiICIgKSArICIgIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6CgkJCQkJCW9wZXJhdG9yID09PSAifD0iID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyAiLSIgOgoJCQkJCQlmYWxzZTsKCQkJCX07CgkJCX0sCgoJCQkiQ0hJTEQiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkgewoJCQkJdmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gIm50aCIsCgkJCQkJZm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09ICJsYXN0IiwKCQkJCQlvZlR5cGUgPSB3aGF0ID09PSAib2YtdHlwZSI7CgoJCQkJcmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgPwoKCQkJCQkvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pCgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTsKCQkJCQl9IDoKCgkJCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCQkJdmFyIGNhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSwgbm9kZSwgbm9kZUluZGV4LCBzdGFydCwKCQkJCQkJCWRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/ICJuZXh0U2libGluZyIgOiAicHJldmlvdXNTaWJsaW5nIiwKCQkJCQkJCXBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSwKCQkJCQkJCW5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLAoJCQkJCQkJdXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsCgkJCQkJCQlkaWZmID0gZmFsc2U7CgoJCQkJCQlpZiAoIHBhcmVudCApIHsKCgkJCQkJCQkvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpCgkJCQkJCQlpZiAoIHNpbXBsZSApIHsKCQkJCQkJCQl3aGlsZSAoIGRpciApIHsKCQkJCQkJCQkJbm9kZSA9IGVsZW07CgkJCQkJCQkJCXdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7CgkJCQkJCQkJCQlpZiAoIG9mVHlwZSA/CgkJCQkJCQkJCQkJbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDoKCQkJCQkJCQkJCQlub2RlLm5vZGVUeXBlID09PSAxICkgewoKCQkJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQkJLy8gUmV2ZXJzZSBkaXJlY3Rpb24gZm9yIDpvbmx5LSogKGlmIHdlIGhhdmVuJ3QgeWV0IGRvbmUgc28pCgkJCQkJCQkJCXN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gIm9ubHkiICYmICFzdGFydCAmJiAibmV4dFNpYmxpbmciOwoJCQkJCQkJCX0KCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCX0KCgkJCQkJCQlzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdOwoKCQkJCQkJCS8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgCgkJCQkJCQlpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7CgoJCQkJCQkJCS8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleAoKCQkJCQkJCQkvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5CgkJCQkJCQkJbm9kZSA9IHBhcmVudDsKCQkJCQkJCQlvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fAoJCQkJCQkJCQkob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCQljYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107CgkJCQkJCQkJbm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdOwoJCQkJCQkJCWRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTsKCQkJCQkJCQlub2RlID0gbm9kZUluZGV4ICYmIHBhcmVudC5jaGlsZE5vZGVzWyBub2RlSW5kZXggXTsKCgkJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCgkJCQkJCQkJCS8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0CgkJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQkJLy8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWsKCQkJCQkJCQkJaWYgKCBub2RlLm5vZGVUeXBlID09PSAxICYmICsrZGlmZiAmJiBub2RlID09PSBlbGVtICkgewoJCQkJCQkJCQkJdW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCS8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZQoJCQkJCQkJCWlmICggdXNlQ2FjaGUgKSB7CgkJCQkJCQkJCS8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXkKCQkJCQkJCQkJbm9kZSA9IGVsZW07CgkJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCQkJLy8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpCgkJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCQkob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCQkJY2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdOwoJCQkJCQkJCQlub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07CgkJCQkJCQkJCWRpZmYgPSBub2RlSW5kZXg7CgkJCQkJCQkJfQoKCQkJCQkJCQkvLyB4bWwgOm50aC1jaGlsZCguLi4pCgkJCQkJCQkJLy8gb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKQoJCQkJCQkJCWlmICggZGlmZiA9PT0gZmFsc2UgKSB7CgkJCQkJCQkJCS8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0CgkJCQkJCQkJCXdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8CgkJCQkJCQkJCQkoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHsKCgkJCQkJCQkJCQlpZiAoICggb2ZUeXBlID8KCQkJCQkJCQkJCQlub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOgoJCQkJCQkJCQkJCW5vZGUubm9kZVR5cGUgPT09IDEgKSAmJgoJCQkJCQkJCQkJCSsrZGlmZiApIHsKCgkJCQkJCQkJCQkJLy8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudAoJCQkJCQkJCQkJCWlmICggdXNlQ2FjaGUgKSB7CgkJCQkJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCQkJCQkJLy8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpCgkJCQkJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCQkJCQkob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCQkJCQkJdW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdOwoJCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQkJaWYgKCBub2RlID09PSBlbGVtICkgewoJCQkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJLy8gSW5jb3Jwb3JhdGUgdGhlIG9mZnNldCwgdGhlbiBjaGVjayBhZ2FpbnN0IGN5Y2xlIHNpemUKCQkJCQkJCWRpZmYgLT0gbGFzdDsKCQkJCQkJCXJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApOwoJCQkJCQl9CgkJCQkJfTsKCQkJfSwKCgkJCSJQU0VVRE8iOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHsKCQkJCS8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZQoJCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3NlcwoJCQkJLy8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnMKCQkJCS8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3MKCQkJCXZhciBhcmdzLAoJCQkJCWZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHwKCQkJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgcHNldWRvOiAiICsgcHNldWRvICk7CgoJCQkJLy8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdAoJCQkJLy8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb24KCQkJCS8vIGp1c3QgYXMgU2l6emxlIGRvZXMKCQkJCWlmICggZm5bIGV4cGFuZG8gXSApIHsKCQkJCQlyZXR1cm4gZm4oIGFyZ3VtZW50ICk7CgkJCQl9CgoJCQkJLy8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzCgkJCQlpZiAoIGZuLmxlbmd0aCA+IDEgKSB7CgkJCQkJYXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sICIiLCBhcmd1bWVudCBdOwoJCQkJCXJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgPwoJCQkJCQltYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7CgkJCQkJCQl2YXIgaWR4LAoJCQkJCQkJCW1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSwKCQkJCQkJCQlpID0gbWF0Y2hlZC5sZW5ndGg7CgkJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCQlpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7CgkJCQkJCQkJc2VlZFsgaWR4IF0gPSA=", "base64"));
  res.write(new Buffer("ISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7CgkJCQkJCQl9CgkJCQkJCX0pIDoKCQkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCQlyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTsKCQkJCQkJfTsKCQkJCX0KCgkJCQlyZXR1cm4gZm47CgkJCX0KCQl9LAoKCQlwc2V1ZG9zOiB7CgkJCS8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvcwoJCQkibm90IjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJCS8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlCgkJCQkvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZwoJCQkJLy8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzCgkJCQl2YXIgaW5wdXQgPSBbXSwKCQkJCQlyZXN1bHRzID0gW10sCgkJCQkJbWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCAiJDEiICkgKTsKCgkJCQlyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID8KCQkJCQltYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHsKCQkJCQkJdmFyIGVsZW0sCgkJCQkJCQl1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksCgkJCQkJCQlpID0gc2VlZC5sZW5ndGg7CgoJCQkJCQkvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgCgkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCQkJCQkJc2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSkgOgoJCQkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJCWlucHV0WzBdID0gZWxlbTsKCQkJCQkJbWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApOwoJCQkJCQkvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KQoJCQkJCQlpbnB1dFswXSA9IG51bGw7CgkJCQkJCXJldHVybiAhcmVzdWx0cy5wb3AoKTsKCQkJCQl9OwoJCQl9KSwKCgkJCSJoYXMiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDsKCQkJCX07CgkJCX0pLAoKCQkJImNvbnRhaW5zIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkgewoJCQkJdGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xOwoJCQkJfTsKCQkJfSksCgoJCQkvLyAiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvcgoJCQkvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZQoJCQkvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLAoJCQkvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5ICItIi4KCQkJLy8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuCgkJCS8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuIgoJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvCgkJCSJsYW5nIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHsKCQkJCS8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXIKCQkJCWlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCAiIikgKSB7CgkJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgbGFuZzogIiArIGxhbmcgKTsKCQkJCX0KCQkJCWxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgZWxlbUxhbmc7CgkJCQkJZG8gewoJCQkJCQlpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID8KCQkJCQkJCWVsZW0ubGFuZyA6CgkJCQkJCQllbGVtLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKSB8fCBlbGVtLmdldEF0dHJpYnV0ZSgibGFuZyIpKSApIHsKCgkJCQkJCQllbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQlyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArICItIiApID09PSAwOwoJCQkJCQl9CgkJCQkJfSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfTsKCQkJfSksCgoJCQkvLyBNaXNjZWxsYW5lb3VzCgkJCSJ0YXJnZXQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwoJCQkJcmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkOwoJCQl9LAoKCQkJInJvb3QiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtID09PSBkb2NFbGVtOwoJCQl9LAoKCQkJImZvY3VzIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfA==", "base64"));
  res.write(new Buffer("fCB+ZWxlbS50YWJJbmRleCk7CgkJCX0sCgoJCQkvLyBCb29sZWFuIHByb3BlcnRpZXMKCQkJImVuYWJsZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmRpc2FibGVkID09PSBmYWxzZTsKCQkJfSwKCgkJCSJkaXNhYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWU7CgkJCX0sCgoJCQkiY2hlY2tlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJLy8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzCgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZAoJCQkJdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJcmV0dXJuIChub2RlTmFtZSA9PT0gImlucHV0IiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSAib3B0aW9uIiAmJiAhIWVsZW0uc2VsZWN0ZWQpOwoJCQl9LAoKCQkJInNlbGVjdGVkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0CgkJCQkvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5CgkJCQlpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHsKCQkJCQllbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCX0KCgkJCQlyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTsKCQkJfSwKCgkJCS8vIENvbnRlbnRzCgkJCSJlbXB0eSI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG8KCQkJCS8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSwKCQkJCS8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pCgkJCQkvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuCgkJCQlmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHsKCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHRydWU7CgkJCX0sCgoJCQkicGFyZW50IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gIUV4cHIucHNldWRvc1siZW1wdHkiXSggZWxlbSApOwoJCQl9LAoKCQkJLy8gRWxlbWVudC9pbnB1dCB0eXBlcwoJCQkiaGVhZGVyIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7CgkJCX0sCgoJCQkiaW5wdXQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTsKCQkJfSwKCgkJCSJidXR0b24iOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSAiYnV0dG9uIiB8fCBuYW1lID09PSAiYnV0dG9uIjsKCQkJfSwKCgkJCSJ0ZXh0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgYXR0cjsKCQkJCXJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJpbnB1dCIgJiYKCQkJCQllbGVtLnR5cGUgPT09ICJ0ZXh0IiAmJgoKCQkJCQkvLyBTdXBwb3J0OiBJRTw4CgkJCQkJLy8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sICJzZWFyY2giKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09ICJ0ZXh0IgoJCQkJCSggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gInRleHQiICk7CgkJCX0sCgoJCQkvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uCgkJCSJmaXJzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gWyAwIF07CgkJCX0pLAoKCQkJImxhc3QiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJCXJldHVybiBbIGxlbmd0aCAtIDEgXTsKCQkJfSksCgoJCQkiZXEiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCQlyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07CgkJCX0pLAoKCQkJImV2ZW4iOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJCXZhciBpID0gMDsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkgewoJCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCQl9KSwKCgkJCSJvZGQiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJCXZhciBpID0gMTsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkgewoJCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCQl9KSwKCgkJCSJsdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJCXZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDsKCQkJCWZvciAoIDsgLS1pID49IDA7ICkgewoJCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCQl9KSwKCgkJCSJndCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJCXZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDsKCQkJCWZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHsKCQkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQkJfQoJCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQkJfSkKCQl9Cgl9OwoKCUV4cHIucHNldWRvc1sibnRoIl0gPSBFeHByLnBzZXVkb3NbImVxIl07CgoJLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3MKCWZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkgewoJCUV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTsKCX0KCWZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7CgkJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTsKCX0KCgkvLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnMKCWZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fQoJc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7CglFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpOwoKCXRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7CgkJdmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsCgkJCXNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsCgkJCWNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF07CgoJCWlmICggY2FjaGVkICkgewoJCQlyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApOwoJCX0KCgkJc29GYXIgPSBzZWxlY3RvcjsKCQlncm91cHMgPSBbXTsKCQlwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7CgoJCXdoaWxlICggc29GYXIgKSB7CgoJCQkvLyBDb21tYSBhbmQgZmlyc3QgcnVuCgkJCWlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkgewoJCQkJaWYgKCBtYXRjaCApIHsKCQkJCQkvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZAoJCQkJCXNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyOwoJCQkJfQoJCQkJZ3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTsKCQkJfQoKCQkJbWF0Y2hlZCA9IGZhbHNlOwoKCQkJLy8gQ29tYmluYXRvcnMKCQkJaWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7CgkJCQltYXRjaGVkID0gbWF0Y2guc2hpZnQoKTsKCQkJCXRva2Vucy5wdXNoKHsKCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQkvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2UKCQkJCQl0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgIiAiICkKCQkJCX0pOwoJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTsKCQkJfQoKCQkJLy8gRmlsdGVycwoJCQlmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkgewoJCQkJaWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fAoJCQkJCShtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkgewoJCQkJCW1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpOwoJCQkJCXRva2Vucy5wdXNoKHsKCQkJCQkJdmFsdWU6IG1hdGNoZWQsCgkJCQkJCXR5cGU6IHR5cGUsCgkJCQkJCW1hdGNoZXM6IG1hdGNoCgkJCQkJfSk7CgkJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTsKCQkJCX0KCQkJfQoKCQkJaWYgKCAhbWF0Y2hlZCApIHsKCQkJCWJyZWFrOwoJCQl9CgkJfQoKCQkvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3MKCQkvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmcKCQkvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnMKCQlyZXR1cm4gcGFyc2VPbmx5ID8KCQkJc29GYXIubGVuZ3RoIDoKCQkJc29GYXIgPwoJCQkJU2l6emxlLmVycm9yKCBzZWxlY3RvciApIDoKCQkJCS8vIENhY2hlIHRoZSB0b2tlbnMKCQkJCXRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApOwoJfTsKCglmdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7CgkJdmFyIGkgPSAwLAoJCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCQlzZWxlY3RvciA9ICIiOwoJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQlzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7CgkJfQoJCXJldHVybiBzZWxlY3RvcjsKCX0KCglmdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkgewoJCXZhciBkaXIgPSBjb21iaW5hdG9yLmRpciwKCQkJY2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSAicGFyZW50Tm9kZSIsCgkJCWRvbmVOYW1lID0gZG9uZSsrOwoKCQlyZXR1cm4gY29tYmluYXRvci5maXJzdCA/CgkJCS8vIENoZWNrIGFnYWluc3QgY2xvc2VzdCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudAoJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJd2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHsKCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHsKCQkJCQkJcmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApOwoJCQkJCX0KCQkJCX0KCQkJfSA6CgoJCQkvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHMKCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCXZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsCgkJCQkJbmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07CgoJCQkJLy8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gY29tYmluYXRvciBjYWNoaW5nCgkJCQlpZiAoIHhtbCApIHsKCQkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHsKCQkJCQkJCWlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQkJb3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pOwoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw5IG9ubHkKCQkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQkJdW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTsKCgkJCQkJCQlpZiAoIChvbGRDYWNoZSA9IHVuaXF1ZUNhY2hlWyBkaXIgXSkgJiYKCQkJCQkJCQlvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkgewoKCQkJCQkJCQkvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50cwoJCQkJCQkJCXJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzCgkJCQkJCQkJdW5pcXVlQ2FjaGVbIGRpciBdID0gbmV3Q2FjaGU7CgoJCQkJCQkJCS8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZwoJCQkJCQkJCWlmICggKG5ld0NhY2hlWyAyIF0gPSBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSkgKSB7CgkJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfTsKCQ==", "base64"));
  res.write(new Buffer("fQoKCWZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHsKCQlyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/CgkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQl2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0cnVlOwoJCQl9IDoKCQkJbWF0Y2hlcnNbMF07Cgl9CgoJZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkgewoJCXZhciBpID0gMCwKCQkJbGVuID0gY29udGV4dHMubGVuZ3RoOwoJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQlTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApOwoJCX0KCQlyZXR1cm4gcmVzdWx0czsKCX0KCglmdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkgewoJCXZhciBlbGVtLAoJCQluZXdVbm1hdGNoZWQgPSBbXSwKCQkJaSA9IDAsCgkJCWxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsCgkJCW1hcHBlZCA9IG1hcCAhPSBudWxsOwoKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCQlpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHsKCQkJCQluZXdVbm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJCWlmICggbWFwcGVkICkgewoJCQkJCQltYXAucHVzaCggaSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIG5ld1VubWF0Y2hlZDsKCX0KCglmdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7CgkJaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7CgkJCXBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7CgkJfQoJCWlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkgewoJCQlwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7CgkJfQoJCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIHRlbXAsIGksIGVsZW0sCgkJCQlwcmVNYXAgPSBbXSwKCQkJCXBvc3RNYXAgPSBbXSwKCQkJCXByZWV4aXN0aW5nID0gcmVzdWx0cy5sZW5ndGgsCgoJCQkJLy8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHQKCQkJCWVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCAiKiIsIGNvbnRleHQubm9kZVR5cGU=", "base64"));
  res.write(new Buffer("ID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLAoKCQkJCS8vIFByZWZpbHRlciB0byBnZXQgbWF0Y2hlciBpbnB1dCwgcHJlc2VydmluZyBhIG1hcCBmb3Igc2VlZC1yZXN1bHRzIHN5bmNocm9uaXphdGlvbgoJCQkJbWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/CgkJCQkJY29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOgoJCQkJCWVsZW1zLAoKCQkJCW1hdGNoZXJPdXQgPSBtYXRjaGVyID8KCQkJCQkvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLAoJCQkJCXBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID8KCgkJCQkJCS8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeQoJCQkJCQlbXSA6CgoJCQkJCQkvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHkKCQkJCQkJcmVzdWx0cyA6CgkJCQkJbWF0Y2hlckluOwoKCQkJLy8gRmluZCBwcmltYXJ5IG1hdGNoZXMKCQkJaWYgKCBtYXRjaGVyICkgewoJCQkJbWF0Y2hlciggbWF0Y2hlckluLCBtYXRjaGVyT3V0LCBjb250ZXh0LCB4bWwgKTsKCQkJfQoKCQkJLy8gQXBwbHkgcG9zdEZpbHRlcgoJCQlpZiAoIHBvc3RGaWx0ZXIgKSB7CgkJCQl0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTsKCQkJCXBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTsKCgkJCQkvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluCgkJCQlpID0gdGVtcC5sZW5ndGg7CgkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQlpZiAoIChlbGVtID0gdGVtcFtpXSkgKSB7CgkJCQkJCW1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWlmICggc2VlZCApIHsKCQkJCWlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7CgkJCQkJaWYgKCBwb3N0RmluZGVyICkgewoJCQkJCQkvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHMKCQkJCQkJdGVtcCA9IFtdOwoJCQkJCQlpID0gbWF0Y2hlck91dC5sZW5ndGg7CgkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkgewoJCQkJCQkJCS8vIFJlc3RvcmUgbWF0Y2hlckluIHNpbmNlIGVsZW0gaXMgbm90IHlldCBhIGZpbmFsIG1hdGNoCgkJCQkJCQkJdGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7CgkJCQkJfQoKCQkJCQkvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZAoJCQkJCWkgPSBtYXRjaGVyT3V0Lmxlbmd0aDsKCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICYmCgkJCQkJCQkodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbaV0pID4gLTEgKSB7CgoJCQkJCQkJc2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJLy8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkCgkJCX0gZWxzZSB7CgkJCQltYXRjaGVyT3V0ID0gY29uZGVuc2UoCgkJCQkJbWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/CgkJCQkJCW1hdGNoZXJPdXQuc3BsaWNlKCBwcmVleGlzdGluZywgbWF0Y2hlck91dC5sZW5ndGggKSA6CgkJCQkJCW1hdGNoZXJPdXQKCQkJCSk7CgkJCQlpZiAoIHBvc3RGaW5kZXIgKSB7CgkJCQkJcG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7CgkJCQl9IGVsc2UgewoJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTsKCQkJCX0KCQkJfQoJCX0pOwoJfQoKCWZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7CgkJdmFyIGNoZWNrQ29udGV4dCwgbWF0Y2hlciwgaiwKCQkJbGVuID0gdG9rZW5zLmxlbmd0aCwKCQkJbGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSwKCQkJaW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlWyIgIl0sCgkJCWkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCwKCgkJCS8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpCgkJCW1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0gPT09IGNoZWNrQ29udGV4dDsKCQkJfSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLAoJCQltYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xOwoJCQl9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksCgkJCW1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJdmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoCgkJCQkJKGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID8KCQkJCQkJbWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6CgkJCQkJCW1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTsKCQkJCS8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KQoJCQkJY2hlY2tDb250ZXh0ID0gbnVsbDsKCQkJCXJldHVybiByZXQ7CgkJCX0gXTsKCgkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCWlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHsKCQkJCW1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdOwoJCQl9IGVsc2UgewoJCQkJbWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbaV0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbaV0ubWF0Y2hlcyApOwoKCQkJCS8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyCgkJCQlpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHsKCQkJCQkvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmcKCQkJCQlqID0gKytpOwoJCQkJCWZvciAoIDsgaiA8IGxlbjsgaisrICkgewoJCQkJCQlpZiAoIEV4cHIucmVsYXRpdmVbIHRva2Vuc1tqXS50eXBlIF0gKSB7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCQlyZXR1cm4gc2V0TWF0Y2hlcigKCQkJCQkJaSA+IDEgJiYgZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksCgkJCQkJCWkgPiAxICYmIHRvU2VsZWN0b3IoCgkJCQkJCQkvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYAoJCQkJCQkJdG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gIiAiID8gIioiIDogIiIgfSkKCQkJCQkJKS5yZXBsYWNlKCBydHJpbSwgIiQxIiApLAoJCQkJCQltYXRjaGVyLAoJCQkJCQlpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSwKCQkJCQkJaiA8IGxlbiAmJiBtYXRjaGVyRnJvbVRva2VucyggKHRva2VucyA9IHRva2Vucy5zbGljZSggaiApKSApLAoJCQkJCQlqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApCgkJCQkJKTsKCQkJCX0KCQkJCW1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTsKCQkJfQoJCX0KCgkJcmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApOwoJfQoKCWZ1bmN0aW9uIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApIHsKCQl2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLAoJCQlieUVsZW1lbnQgPSBlbGVtZW50TWF0Y2hlcnMubGVuZ3RoID4gMCwKCQkJc3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkgewoJCQkJdmFyIGVsZW0sIGosIG1hdGNoZXIsCgkJCQkJbWF0Y2hlZENvdW50ID0gMCwKCQkJCQlpID0gIjAiLAoJCQkJCXVubWF0Y2hlZCA9IHNlZWQgJiYgW10sCgkJCQkJc2V0TWF0Y2hlZCA9IFtdLAoJCQkJCWNvbnRleHRCYWNrdXAgPSBvdXRlcm1vc3RDb250ZXh0LAoJCQkJCS8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHQKCQkJCQllbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFsiVEFHIl0oICIqIiwgb3V0ZXJtb3N0ICksCgkJCQkJLy8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXIKCQkJCQlkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSwKCQkJCQlsZW4gPSBlbGVtcy5sZW5ndGg7CgoJCQkJaWYgKCBvdXRlcm1vc3QgKSB7CgkJCQkJb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0OwoJCQkJfQoKCQkJCS8vIEFkZCBlbGVtZW50cyBwYXNzaW5nIGVsZW1lbnRNYXRjaGVycyBkaXJlY3RseSB0byByZXN1bHRzCgkJCQkvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmkKCQkJCS8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiAibGVuZ3RoIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWQKCQkJCWZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHsKCQkJCQlpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkgewoJCQkJCQlqID0gMDsKCQkJCQkJaWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkgewoJCQkJCQkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCQkJCQkJCXhtbCA9ICFkb2N1bWVudElzSFRNTDsKCQkJCQkJfQoJCQkJCQl3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkgewoJCQkJCQkJaWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkgewoJCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnMKCQkJCQlpZiAoIGJ5U2V0ICkgewoJCQkJCQkvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3M=", "base64"));
  res.write(new Buffer("aWJsZSBtYXRjaGVycwoJCQkJCQlpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7CgkJCQkJCQltYXRjaGVkQ291bnQtLTsKCQkJCQkJfQoKCQkJCQkJLy8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdAoJCQkJCQlpZiAoIHNlZWQgKSB7CgkJCQkJCQl1bm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGAKCQkJCS8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuCgkJCQltYXRjaGVkQ291bnQgKz0gaTsKCgkJCQkvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHMKCQkJCS8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGAKCQkJCS8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZQoJCQkJLy8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC4KCQkJCS8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nICIwIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0CgkJCQkvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhICIwMCIgYG1hdGNoZWRDb3VudGAgdGhhdCBkaWZmZXJzIGZyb20gYGlgIGJ1dCBpcyBhbHNvCgkJCQkvLyBudW1lcmljYWxseSB6ZXJvLgoJCQkJaWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7CgkJCQkJaiA9IDA7CgkJCQkJd2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkgewoJCQkJCQltYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApOwoJCQkJCX0KCgkJCQkJaWYgKCBzZWVkICkgewoJCQkJCQkvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nCgkJCQkJCWlmICggbWF0Y2hlZENvdW50ID4gMCApIHsKCQkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJCWlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7CgkJCQkJCQkJCXNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXMKCQkJCQkJc2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7CgkJCQkJfQoKCQkJCQkvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzCgkJCQkJcHVzaC5hcHBseSggcmVzdWw=", "base64"));
  res.write(new Buffer("dHMsIHNldE1hdGNoZWQgKTsKCgkJCQkJLy8gU2VlZGxlc3Mgc2V0IG1hdGNoZXMgc3VjY2VlZGluZyBtdWx0aXBsZSBzdWNjZXNzZnVsIG1hdGNoZXJzIHN0aXB1bGF0ZSBzb3J0aW5nCgkJCQkJaWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmCgkJCQkJCSggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkgewoKCQkJCQkJU2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzCgkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQlkaXJydW5zID0gZGlycnVuc1VuaXF1ZTsKCQkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDsKCQkJCX0KCgkJCQlyZXR1cm4gdW5tYXRjaGVkOwoJCQl9OwoKCQlyZXR1cm4gYnlTZXQgPwoJCQltYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDoKCQkJc3VwZXJNYXRjaGVyOwoJfQoKCWNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7CgkJdmFyIGksCgkJCXNldE1hdGNoZXJzID0gW10sCgkJCWVsZW1lbnRNYXRjaGVycyA9IFtdLAoJCQljYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdOwoKCQlpZiAoICFjYWNoZWQgKSB7CgkJCS8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudAoJCQlpZiAoICFtYXRjaCApIHsKCQkJCW1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJCX0KCQkJaSA9IG1hdGNoLmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQljYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTsKCQkJCWlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7CgkJCQkJc2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7CgkJCQl9IGVsc2UgewoJCQkJCWVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJCX0KCQkJfQoKCQkJLy8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uCgkJCWNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApOwoKCQkJLy8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uCgkJCWNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yOwoJCX0KCQlyZXR1cm4gY2FjaGVkOwoJfTsKCgkvKioKCSAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWQKCSAqICBzZWxlY3RvciBmdW5jdGlvbnMKCSAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkCgkgKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZQoJICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0CgkgKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c10KCSAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0CgkgKi8KCXNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7CgkJdmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsCgkJCWNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICYmIHNlbGVjdG9yLAoJCQltYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTsKCgkJcmVzdWx0cyA9IHJlc3VsdHMgfHwgW107CgoJCS8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG9ubHkgb25lIHNlbGVjdG9yIGluIHRoZSBsaXN0IGFuZCBubyBzZWVkCgkJLy8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KQoJCWlmICggbWF0Y2gubGVuZ3RoID09PSAxICkgewoKCQkJLy8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSUQKCQkJdG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApOwoJCQlpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gIklEIiAmJgoJCQkJCXN1cHBvcnQuZ2V0QnlJZCAmJiBjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCQkJRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHsKCgkJCQljb250ZXh0ID0gKCBFeHByLmZpbmRbIklEIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdOwoJCQkJaWYgKCAhY29udGV4dCApIHsKCQkJCQlyZXR1cm4gcmVzdWx0czsKCgkJCQkvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsCgkJCQl9IGVsc2UgaWYgKCBjb21waWxlZCApIHsKCQkJCQljb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlOwoJCQkJfQoKCQkJCXNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApOwoJCQl9CgoJCQkvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nCgkJCWkgPSBtYXRjaEV4cHJbIm5lZWRzQ29udGV4dCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQl0b2tlbiA9IHRva2Vuc1tpXTsKCgkJCQkvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yCgkJCQlpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHsKCQkJCQlicmVhazsKCQkJCX0KCQkJCWlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7CgkJCQkJLy8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzCgkJCQkJaWYgKCAoc2VlZCA9IGZpbmQoCgkJCQkJCXRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSwKCQkJCQkJcnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJCQkJCSkpICkgewoKCQkJCQkJLy8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5CgkJCQkJCXRva2Vucy5zcGxpY2UoIGksIDEgKTsKCQkJCQkJc2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTsKCQkJCQkJaWYgKCAhc2VsZWN0b3IgKSB7CgkJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7CgkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJfQoKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQKCQkvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlCgkJKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKAoJCQlzZWVkLAoJCQljb250ZXh0LAoJCQkhZG9jdW1lbnRJc0hUTUwsCgkJCXJlc3VsdHMsCgkJCSFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQKCQkpOwoJCXJldHVybiByZXN1bHRzOwoJfTsKCgkvLyBPbmUtdGltZSBhc3NpZ25tZW50cwoKCS8vIFNvcnQgc3RhYmlsaXR5CglzdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KCIiKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKCIiKSA9PT0gZXhwYW5kbzsKCgkvLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrCgkvLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uCglzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTsKCgkvLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnQKCXNldERvY3VtZW50KCk7CgoJLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNykKCS8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKgoJc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7CgkJLy8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpCgkJcmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpICkgJiAxOwoJfSk7CgoJLy8gU3VwcG9ydDogSUU8OAoJLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgImludGVycG9sYXRpb24iCgkvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4CglpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuaW5uZXJIVE1MID0gIjxhIGhyZWY9JyMnPjwvYT4iOwoJCXJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSA9PT0gIiMiIDsKCX0pICkgewoJCWFkZEhhbmRsZSggInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCWlmICggIWlzWE1MICkgewoJCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJ0eXBlIiA/IDEgOiAyICk7CgkJCX0KCQl9KTsKCX0KCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZSgidmFsdWUiKQoJaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuaW5uZXJIVE1MID0gIjxpbnB1dC8+IjsKCQlkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoICJ2YWx1ZSIsICIiICk7CgkJcmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSAiIjsKCX0pICkgewoJCWFkZEhhbmRsZSggInZhbHVlIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQlpZiAoICFpc1hNTCAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJpbnB1dCIgKSB7CgkJCQlyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7CgkJCX0KCQl9KTsKCX0KCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBVc2UgZ2V0QXR0cmlidXRlTm9kZSB0byBmZXRjaCBib29sZWFucyB3aGVuIGdldEF0dHJpYnV0ZSBsaWVzCglpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSA9PSBudWxsOwoJfSkgKSB7CgkJYWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQl2YXIgdmFsOwoJCQlpZiAoICFpc1hNTCApIHsKCQkJCXJldHVybiBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOgoJCQkJCQkodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJCQl2YWwudmFsdWUgOgoJCQkJCW51bGw7CgkJCX0KCQl9KTsKCX0KCglyZXR1cm4gU2l6emxlOwoKCX0pKCB3aW5kb3cgKTsKCgoKCWpRdWVyeS5maW5kID0gU2l6emxlOwoJalF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzOwoJalF1ZXJ5LmV4cHJbICI6IiBdID0galF1ZXJ5LmV4cHIucHNldWRvczsKCWpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0OwoJalF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDsKCWpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDsKCWpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWluczsKCgoKCXZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHsKCQl2YXIgbWF0Y2hlZCA9IFtdLAoJCQl0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7CgoJCXdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkgewoJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQlpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJbWF0Y2hlZC5wdXNoKCBlbGVtICk7CgkJCX0KCQl9CgkJcmV0dXJuIG1hdGNoZWQ7Cgl9OwoKCgl2YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHsKCQl2YXIgbWF0Y2hlZCA9IFtdOwoKCQlmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkgewoJCQlpZiAoIG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gZWxlbSApIHsKCQkJCW1hdGNoZWQucHVzaCggbiApOwoJCQl9CgkJfQoKCQlyZXR1cm4gbWF0Y2hlZDsKCX07CgoKCXZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0OwoKCXZhciByc2luZ2xlVGFnID0gKCAvXjwoW1x3LV0rKVxzKlwvPz4oPzo8XC9cMT58KSQvICk7CgoKCgl2YXIgcmlzU2ltcGxlID0gL14uW146I1xbXC4sXSokLzsKCgkvLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdAoJZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7CgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7CgkJCXJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkgewoJCQkJLyoganNoaW50IC1XMDE4ICovCgkJCQlyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7CgkJCX0gKTsKCgkJfQoKCQlpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90OwoJCQl9ICk7CgoJCX0KCgkJaWYgKCB0eXBlb2YgcXVhbGlmaWVyID09PSAic3RyaW5nIiApIHsKCQkJaWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7CgkJCX0KCgkJCXF1YWxpZmllciA9IGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMgKTsKCQl9CgoJCXJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gKCBqUXVlcnkuaW5BcnJheSggZWxlbSwgcXVhbGlmaWVyICkgPiAtMSApICE9PSBub3Q7CgkJfSApOwoJfQoKCWpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHsKCQl2YXIgZWxlbSA9IGVsZW1zWyAwIF07CgoJCWlmICggbm90ICkgewoJCQlleHByID0gIjpub3QoIiArIGV4cHIgKyAiKSI7CgkJfQoKCQlyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgPwoJCQlqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOgoJCQlqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7CgkJCX0gKSApOwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQl2YXIgaSwKCQkJCXJldCA9IFtdLAoJCQkJc2VsZiA9IHRoaXMsCgkJCQlsZW4gPSBzZWxmLmxlbmd0aDsKCgkJCWlmICggdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiApIHsKCQkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7CgkJCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCQkJaWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkgewoJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCX0KCQkJCQl9CgkJCQl9ICkgKTsKCQkJfQoKCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCWpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTsKCQkJfQoKCQkJLy8gTmVlZGVkIGJlY2F1c2UgJCggc2VsZWN0b3IsIGNvbnRleHQgKSBiZWNvbWVzICQoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApCgkJCXJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTsKCQkJcmV0LnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuc2VsZWN0b3IgKyAiICIgKyBzZWxlY3RvciA6IHNlbGVjdG9yOwoJCQlyZXR1cm4gcmV0OwoJCX0sCgkJZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UgKSApOwoJCX0sCgkJbm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7CgkJfSwKCQlpczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gISF3aW5ub3coCgkJCQl0aGlzLAoKCQkJCS8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXQKCQkJCS8vIHNvICQoInA6Zmlyc3QiKS5pcygicDpsYXN0Iikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvICJwIi4KCQkJCXR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID8KCQkJCQlqUXVlcnkoIHNlbGVjdG9yICkgOgoJCQkJCXNlbGVjdG9yIHx8IFtdLAoJCQkJZmFsc2UKCQkJKS5sZW5ndGg7CgkJfQoJfSApOwoKCgkvLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdAoKCgkvLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudCkKCXZhciByb290alF1ZXJ5LAoKCQkvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5ncwoJCS8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSkKCQkvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPCkKCQlycXVpY2tFeHByID0gL14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLywKCgkJaW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkgewoJCQl2YXIgbWF0Y2gsIGVsZW07CgoJCQkvLyBIQU5ETEU6ICQoIiIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpCgkJCWlmICggIXNlbGVjdG9yICkgewoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCgkJCS8vIGluaXQgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeQoJCQkvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpCgkJCXJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7CgoJCQkvLyBIYW5kbGUgSFRNTCBzdHJpbmdzCgkJCWlmICggdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiApIHsKCQkJCWlmICggc2VsZWN0b3IuY2hhckF0KCAwICkgPT09ICI8IiAmJgoJCQkJCXNlbGVjdG9yLmNoYXJBdCggc2VsZWN0b3IubGVuZ3RoIC0gMSApID09PSAiPiIgJiYKCQkJCQlzZWxlY3Rvci5sZW5ndGggPj0gMyApIHsKCgkJCQkJLy8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2sKCQkJCQltYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTsKCgkJCQl9IGVsc2UgewoJCQkJCW1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApOwoJCQkJfQoKCQkJCS8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWQKCQkJCWlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7CgoJCQkJCS8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KQoJCQkJCWlmICggbWF0Y2hbIDEgXSApIHsKCQkJCQkJY29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0OwoKCQkJCQkJLy8gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdAoJCQkJCQkvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudAoJCQkJCQlqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoCgkJCQkJCQltYXRjaFsgMSBdLAoJCQkJCQkJY29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCwKCQkJCQkJCXRydWUKCQkJCQkJKSApOwoKCQkJCQkJLy8gSEFORExFOiAkKGh0bWwsIHByb3BzKQoJCQkJCQlpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7CgkJCQkJCQlmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkgewoKCQkJCQkJCQkvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlCgkJCQkJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkgewoJCQkJCQkJCQl0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7CgoJCQkJCQkJCS8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXMKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlyZXR1cm4gdGhpczsKCgkJCQkJLy8gSEFORExFOiAkKCNpZCkKCQkJCQl9IGVsc2UgewoJCQkJCQllbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTsKCgkJCQkJCS8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zCgkJCQkJCS8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjMKCQkJCQkJaWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHsKCgkJCQkJCQkvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgSUUgYW5kIE9wZXJhIHJldHVybiBpdGVtcwoJCQkJCQkJLy8gYnkgbmFtZSBpbnN0ZWFkIG9mIElECgkJCQkJCQlpZiAoIGVsZW0uaWQgIT09IG1hdGNoWyAyIF0gKSB7CgkJCQkJCQkJcmV0dXJuIHJvb3RqUXVlcnkuZmluZCggc2VsZWN0b3IgKTsKCQkJCQkJCX0KCgkJCQkJCQkvLyBPdGhlcndpc2UsIHdlIGluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0CgkJCQkJCQl0aGlzLmxlbmd0aCA9IDE7CgkJCQkJCQl0aGlzWyAwIF0gPSBlbGVtOwoJCQkJCQl9CgoJCQkJCQl0aGlzLmNvbnRleHQgPSBkb2N1bWVudDsKCQkJCQkJdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yOwoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9CgoJCQkJLy8gSEFORExFOiAkKGV4cHIsICQoLi4uKSkKCQkJCX0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkgewoJCQkJCXJldHVybiAoIGNvbnRleHQgfHwgcm9vdCApLmZpbmQoIHNlbGVjdG9yICk7CgoJCQkJLy8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpCgkJCQkvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcikKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApOwoJCQkJfQoKCQkJLy8gSEFORExFOiAkKERPTUVsZW1lbnQpCgkJCX0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkgewoJCQkJdGhpcy5jb250ZXh0ID0gdGhpc1sgMCBdID0gc2VsZWN0b3I7CgkJCQl0aGlzLmxlbmd0aCA9IDE7CgkJCQlyZXR1cm4gdGhpczsKCgkJCS8vIEhBTkRMRTogJChmdW5jdGlvbikKCQkJLy8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5CgkJCX0gZWxzZSBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBzZWxlY3RvciApICkgewoJCQkJcmV0dXJuIHR5cGVvZiByb290LnJlYWR5ICE9PSAidW5kZWZpbmVkIiA/CgkJCQkJcm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6CgoJCQkJCS8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnQKCQkJCQlzZWxlY3RvciggalF1ZXJ5ICk7CgkJCX0KCgkJCWlmICggc2VsZWN0b3Iuc2VsZWN0b3IgIT09IHVuZGVmaW5lZCApIHsKCQkJCXRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvci5zZWxlY3RvcjsKCQkJCXRoaXMuY29udGV4dCA9IHNlbGVjdG9yLmNvbnRleHQ7CgkJCX0KCgkJCXJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApOwoJCX07CgoJLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvbgoJaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47CgoJLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZQoJcm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTsKCgoJdmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLAoKCQkvLyBtZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldAoJCWd1YXJhbnRlZWRVbmlxdWUgPSB7CgkJCWNoaWxkcmVuOiB0cnVlLAoJCQljb250ZW50czogdHJ1ZSwKCQkJbmV4dDogdHJ1ZSwKCQkJcHJldjogdHJ1ZQoJCX07CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCWhhczogZnVuY3Rpb24oIHRhcmdldCApIHsKCQkJdmFyIGksCgkJCQl0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSwKCQkJCWxlbiA9IHRhcmdldHMubGVuZ3RoOwoKCQkJcmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHsKCQkJCWZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7CgkJCQkJaWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkgewoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQljbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkgewoJCQl2YXIgY3VyLAoJCQkJaSA9IDAsCgkJCQlsID0gdGhpcy5sZW5ndGgsCgkJCQltYXRjaGVkID0gW10sCgkJCQlwb3MgPSBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApIHx8IHR5cGVvZiBzZWxlY3RvcnMgIT09ICJzdHJpbmciID8KCQkJCQlqUXVlcnkoIHNlbGVjdG9ycywgY29udGV4dCB8fCB0aGlzLmNvbnRleHQgKSA6CgkJCQkJMDsKCgkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJCWZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgoJCQkJCS8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50cwoJCQkJCWlmICggY3VyLm5vZGVUeXBlIDwgMTEgJiYgKCBwb3MgPwoJCQkJCQlwb3MuaW5kZXgoIGN1ciApID4gLTEgOgoKCQkJCQkJLy8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlCgkJCQkJCWN1ci5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCQkJalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7CgoJCQkJCQltYXRjaGVkLnB1c2goIGN1ciApOwoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTsKCQl9LAoKCQkvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluCgkJLy8gdGhlIG1hdGNoZWQgc2V0IG9mIGVsZW1lbnRzCgkJaW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJLy8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnQKCQkJaWYgKCAhZWxlbSApIHsKCQkJCXJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTsKCQkJfQoKCQkJLy8gaW5kZXggaW4gc2VsZWN0b3IKCQkJaWYgKCB0eXBlb2YgZWxlbSA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmluQXJyYXkoIHRoaXNbIDAgXSwgalF1ZXJ5KCBlbGVtICkgKTsKCQkJfQoKCQkJLy8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50CgkJCXJldHVybiBqUXVlcnkuaW5BcnJheSgKCgkJCQkvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWQKCQkJCWVsZW0uanF1ZXJ5ID8gZWxlbVsgMCBdIDogZWxlbSwgdGhpcyApOwoJCX0sCgoJCWFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkgewoJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soCgkJCQlqUXVlcnkudW5pcXVlU29ydCgKCQkJCQlqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApCgkJCQkpCgkJCSk7CgkJfSwKCgkJYWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgPwoJCQkJdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKQoJCQkpOwoJCX0KCX0gKTsKCglmdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHsKCQlkbyB7CgkJCWN1ciA9IGN1clsgZGlyIF07CgkJfSB3aGlsZSAoIGN1ciAmJiBjdXIubm9kZVR5cGUgIT09IDEgKTsKCgkJcmV0dXJuIGN1cjsKCX0KCglqUXVlcnkuZWFjaCggewoJCXBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7CgkJCXJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7CgkJfSwKCQlwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiICk7CgkJfSwKCQlwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiLCB1bnRpbCApOwoJCX0sCgkJbmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBzaWJsaW5nKCBlbGVtLCAibmV4dFNpYmxpbmciICk7CgkJfSwKCQlwcmV2OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmcoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7CgkJfSwKCQluZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiApOwoJCX0sCgkJcHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBkaXIoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7CgkJfSwKCQluZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiwgdW50aWwgKTsKCQl9LAoJCXByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAicHJldmlvdXNTaWJsaW5nIiwgdW50aWwgKTsKCQl9LAoJCXNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTsKCQl9LAoJCWNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTsKCQl9LAoJCWNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlmcmFtZSIgKSA/CgkJCQllbGVtLmNvbnRlbnREb2N1bWVudCB8fCBlbGVtLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQgOgoJCQkJalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7CgkJfQoJfSwgZnVuY3Rpb24oIG5hbWUsIGZuICkgewoJCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHsKCQkJdmFyIHJldCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApOwoKCQkJaWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSAiVW50aWwiICkgewoJCQkJc2VsZWN0b3IgPSB1bnRpbDsKCQkJfQoKCQkJaWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICkgewoJCQkJcmV0ID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIHJldCApOwoJCQl9CgoJCQlpZiAoIHRoaXMubGVuZ3RoID4gMSApIHsKCgkJCQkvLyBSZW1vdmUgZHVwbGljYXRlcwoJCQkJaWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkgewoJCQkJCXJldCA9IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKTsKCQkJCX0KCgkJCQkvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlcwoJCQkJaWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkgewoJCQkJCXJldCA9IHJldC5yZXZlcnNlKCk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7CgkJfTsKCX0gKTsKCXZhciBybm90d2hpdGUgPSAoIC9cUysvZyApOwoKCgoJLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMKCWZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7CgkJdmFyIG9iamVjdCA9IHt9OwoJCWpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7CgkJCW9iamVjdFsgZmxhZyBdID0gdHJ1ZTsKCQl9ICk7CgkJcmV0dXJuIG9iamVjdDsKCX0KCgkvKgoJICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6CgkgKgoJICoJb3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvdwoJICoJCQl0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0CgkgKgoJICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmUKCSAqICJmaXJlZCIgbXVsdGlwbGUgdGltZXMuCgkgKgoJICogUG9zc2libGUgb3B0aW9uczoKCSAqCgkgKglvbmNlOgkJCXdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZCkKCSAqCgkgKgltZW1vcnk6CQkJd2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZAoJICoJCQkJCWFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0ICJtZW1vcml6ZWQiCgkgKgkJCQkJdmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpCgkgKgoJICoJdW5pcXVlOgkJCXdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KQoJICoKCSAqCXN0b3BPbkZhbHNlOglpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UKCSAqCgkgKi8KCWpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCgkJLy8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZAoJCS8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdCkKCQlvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciID8KCQkJY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIDoKCQkJalF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTsKCgkJdmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmcKCQkJZmlyaW5nLAoKCQkJLy8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHMKCQkJbWVtb3J5LAoKCQkJLy8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWQKCQkJZmlyZWQsCgoJCQkvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nCgkJCWxvY2tlZCwKCgkJCS8vIEFjdHVhbCBjYWxsYmFjayBsaXN0CgkJCWxpc3QgPSBbXSwKCgkJCS8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzCgkJCXF1ZXVlID0gW10sCgoJCQkvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZCkKCQkJZmlyaW5nSW5kZXggPSAtMSwKCgkJCS8vIEZpcmUgY2FsbGJhY2tzCgkJCWZpcmUgPSBmdW5jdGlvbigpIHsKCgkJCQkvLyBFbmZvcmNlIHNpbmdsZS1maXJpbmcKCQkJCWxvY2tlZCA9IG9wdGlvbnMub25jZTsKCgkJCQkvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucywKCQkJCS8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXMKCQkJCWZpcmVkID0gZmlyaW5nID0gdHJ1ZTsKCQkJCWZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkgewoJCQkJCW1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7CgkJCQkJd2hpbGUgKCArK2ZpcmluZ0luZGV4IDwgbGlzdC5sZW5ndGggKSB7CgoJCQkJCQkvLyBSdW4gY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBlYXJseSB0ZXJtaW5hdGlvbgoJCQkJCQlpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJgoJCQkJCQkJb3B0aW9ucy5zdG9wT25GYWxzZSApIHsKCgkJCQkJCQkvLyBKdW1wIHRvIGVuZCBhbmQgZm9yZ2V0IHRoZSBkYXRhIHNvIC5hZGQgZG9lc24ndCByZS1maXJlCgkJCQkJCQlmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoOwoJCQkJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJLy8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdAoJCQkJaWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7CgkJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCQl9CgoJCQkJZmlyaW5nID0gZmFsc2U7CgoJCQkJLy8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2QKCQkJCWlmICggbG9ja2VkICkgewoKCQkJCQkvLyBLZWVwIGFuIGVtcHR5IGxpc3QgaWYgd2UgaGF2ZSBkYXRhIGZvciBmdXR1cmUgYWRkIGNhbGxzCgkJCQkJaWYgKCBtZW1vcnkgKSB7CgkJCQkJCWxpc3QgPSBbXTsKCgkJCQkJLy8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudAoJCQkJCX0gZWxzZSB7CgkJCQkJCWxpc3QgPSAiIjsKCQkJCQl9CgkJCQl9CgkJCX0sCgoJCQkvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdAoJCQlzZWxmID0gewoKCQkJCS8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3QKCQkJCWFkZDogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBsaXN0ICkgewoKCQkJCQkJLy8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmcKCQkJCQkJaWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHsKCQkJCQkJCWZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxOwoJCQkJCQkJcXVldWUucHVzaCggbWVtb3J5ICk7CgkJCQkJCX0KCgkJCQkJCSggZnVuY3Rpb24gYWRkKCBhcmdzICkgewoJCQkJCQkJalF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7CgkJCQkJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYXJnICkgKSB7CgkJCQkJCQkJCWlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7CgkJCQkJCQkJCQlsaXN0LnB1c2goIGFyZyApOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgalF1ZXJ5LnR5cGUoIGFyZyApICE9PSAic3RyaW5nIiApIHsKCgkJCQkJCQkJCS8vIEluc3BlY3QgcmVjdXJzaXZlbHkKCQkJCQkJCQkJYWRkKCBhcmcgKTsKCQkJCQkJCQl9CgkJCQkJCQl9ICk7CgkJCQkJCX0gKSggYXJndW1lbnRzICk7CgoJCQkJCQlpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkgewoJCQkJCQkJZmlyZSgpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0CgkJCQlyZW1vdmU6IGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7CgkJCQkJCXZhciBpbmRleDsKCQkJCQkJd2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7CgkJCQkJCQlsaXN0LnNwbGljZSggaW5kZXgsIDEgKTsKCgkJCQkJCQkvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXMKCQkJCQkJCWlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7CgkJCQkJCQkJZmlyaW5nSW5kZXgtLTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0gKTsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC4KCQkJCS8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLgoJCQkJaGFzOiBmdW5jdGlvbiggZm4gKSB7CgkJCQkJcmV0dXJuIGZuID8KCQkJCQkJalF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6CgkJCQkJCWxpc3QubGVuZ3RoID4gMDsKCQkJCX0sCgoJCQkJLy8gUmVtb3ZlIGFsbCBjYWxsYmFja3MgZnJvbSB0aGUgbGlzdAoJCQkJZW1wdHk6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggbGlzdCApIHsKCQkJCQkJbGlzdCA9IFtdOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gRGlzYWJsZSAuZmlyZSBhbmQgLmFkZAoJCQkJLy8gQWJvcnQgYW55IGN1cnJlbnQvcGVuZGluZyBleGVjdXRpb25zCgkJCQkvLyBDbGVhciBhbGwgY2FsbGJhY2tzIGFuZCB2YWx1ZXMKCQkJCWRpc2FibGU6IGZ1bmN0aW9uKCkgewoJCQkJCWxvY2tlZCA9IHF1ZXVlID0gW107CgkJCQkJbGlzdCA9IG1lbW9yeSA9ICIiOwoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCQkJCWRpc2FibGVkOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gIWxpc3Q7CgkJCQl9LAoKCQkJCS8vIERpc2FibGUgLmZpcmUKCQkJCS8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpCgkJCQkvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zCgkJCQlsb2NrOiBmdW5jdGlvbigpIHsKCQkJCQlsb2NrZWQgPSB0cnVlOwoJCQkJCWlmICggIW1lbW9yeSApIHsKCQkJCQkJc2VsZi5kaXNhYmxlKCk7CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCQkJCWxvY2tlZDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuICEhbG9ja2VkOwoJCQkJfSwKCgkJCQkvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzCgkJCQlmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7CgkJCQkJaWYgKCAhbG9ja2VkICkgewoJCQkJCQlhcmdzID0gYXJncyB8fCBbXTsKCQkJCQkJYXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTsKCQkJCQkJcXVldWUucHVzaCggYXJncyApOwoJCQkJCQlpZiAoICFmaXJpbmcgKSB7CgkJCQkJCQlmaXJlKCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoKCQkJCS8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzCgkJCQlmaXJlOiBmdW5jdGlvbigpIHsKCQkJCQlzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlCgkJCQlmaXJlZDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuICEhZmlyZWQ7CgkJCQl9CgkJCX07CgoJCXJldHVybiBzZWxmOwoJfTsKCgoJalF1ZXJ5LmV4dGVuZCggewoKCQlEZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7CgkJCXZhciB0dXBsZXMgPSBbCgoJCQkJCS8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBsaXN0ZW5lciBsaXN0LCBmaW5hbCBzdGF0ZQoJCQkJCVsgInJlc29sdmUiLCAiZG9uZSIsIGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKSwgInJlc29sdmVkIiBdLAoJCQkJCVsgInJlamVjdCIsICJmYWlsIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLCAicmVqZWN0ZWQiIF0sCgkJCQkJWyAibm90aWZ5IiwgInByb2dyZXNzIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm1lbW9yeSIgKSBdCgkJCQldLAoJCQkJc3RhdGUgPSAicGVuZGluZyIsCgkJCQlwcm9taXNlID0gewoJCQkJCXN0YXRlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHN0YXRlOwoJCQkJCX0sCgkJCQkJYWx3YXlzOiBmdW5jdGlvbigpIHsKCQkJCQkJZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0sCgkJCQkJdGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkgewoJCQkJCQl2YXIgZm5zID0=", "base64"));
  res.write(new Buffer("IGFyZ3VtZW50czsKCQkJCQkJcmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkgewoJCQkJCQkJalF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkgewoJCQkJCQkJCXZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdOwoKCQkJCQkJCQkvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXIKCQkJCQkJCQlkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHsKCQkJCQkJCQkJdmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJCQkJCQlpZiAoIHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7CgkJCQkJCQkJCQlyZXR1cm5lZC5wcm9taXNlKCkKCQkJCQkJCQkJCQkucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApCgkJCQkJCQkJCQkJLmRvbmUoIG5ld0RlZmVyLnJlc29sdmUgKQoJCQkJCQkJCQkJCS5mYWlsKCBuZXdEZWZlci5yZWplY3QgKTsKCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCW5ld0RlZmVyWyB0dXBsZVsgMCBdICsgIldpdGgiIF0oCgkJCQkJCQkJCQkJdGhpcyA9PT0gcHJvbWlzZSA/IG5ld0RlZmVyLnByb21pc2UoKSA6IHRoaXMsCgkJCQkJCQkJCQkJZm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHMKCQkJCQkJCQkJCSk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9ICk7CgkJCQkJCQl9ICk7CgkJCQkJCQlmbnMgPSBudWxsOwoJCQkJCQl9ICkucHJvbWlzZSgpOwoJCQkJCX0sCgoJCQkJCS8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWQKCQkJCQkvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0CgkJCQkJcHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHsKCQkJCQkJcmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlOwoJCQkJCX0KCQkJCX0sCgkJCQlkZWZlcnJlZCA9IHt9OwoKCQkJLy8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdAoJCQlwcm9taXNlLnBpcGUgPSBwcm9taXNlLnRoZW47CgoJCQkvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzCgkJCWpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHsKCQkJCXZhciBsaXN0ID0gdHVwbGVbIDIgXSwKCQkJCQlzdGF0ZVN0cmluZyA9IHR1cGxlWyAzIF07CgoJCQkJLy8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGQKCQkJCXByb21pc2VbIHR1cGxlWyAxIF0gXSA9IGxpc3QuYWRkOwoKCQkJCS8vIEhhbmRsZSBzdGF0ZQoJCQkJaWYgKCBzdGF0ZVN0cmluZyApIHsKCQkJCQlsaXN0LmFkZCggZnVuY3Rpb24oKSB7CgoJCQkJCQkvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdCgkJCQkJCXN0YXRlID0gc3RhdGVTdHJpbmc7CgoJCQkJCS8vIFsgcmVqZWN0X2xpc3QgfCByZXNvbHZlX2xpc3QgXS5kaXNhYmxlOyBwcm9ncmVzc19saXN0LmxvY2sKCQkJCQl9LCB0dXBsZXNbIGkgXiAxIF1bIDIgXS5kaXNhYmxlLCB0dXBsZXNbIDIgXVsgMiBdLmxvY2sgKTsKCQkJCX0KCgkJCQkvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdCgkJCQlkZWZlcnJlZFsgdHVwbGVbIDAgXSBdID0gZnVuY3Rpb24oKSB7CgkJCQkJZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyAiV2l0aCIgXSggdGhpcyA9PT0gZGVmZXJyZWQgPyBwcm9taXNlIDogdGhpcywgYXJndW1lbnRzICk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9OwoJCQkJZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyAiV2l0aCIgXSA9IGxpc3QuZmlyZVdpdGg7CgkJCX0gKTsKCgkJCS8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZQoJCQlwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7CgoJCQkvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55CgkJCWlmICggZnVuYyApIHsKCQkJCWZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7CgkJCX0KCgkJCS8vIEFsbCBkb25lIQoJCQlyZXR1cm4gZGVmZXJyZWQ7CgkJfSwKCgkJLy8gRGVmZXJyZWQgaGVscGVyCgkJd2hlbjogZnVuY3Rpb24oIHN1Ym9yZGluYXRlIC8qICwgLi4uLCBzdWJvcmRpbmF0ZU4gKi8gKSB7CgkJCXZhciBpID0gMCwKCQkJCXJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSwKCQkJCWxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLAoKCQkJCS8vIHRoZSBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXMKCQkJCXJlbWFpbmluZyA9IGxlbmd0aCAhPT0gMSB8fAoJCQkJCSggc3Vib3JkaW5hdGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHN1Ym9yZGluYXRlLnByb21pc2UgKSApID8gbGVuZ3RoIDogMCwKCgkJCQkvLyB0aGUgbWFzdGVyIERlZmVycmVkLgoJCQkJLy8gSWYgcmVzb2x2ZVZhbHVlcyBjb25zaXN0IG9mIG9ubHkgYSBzaW5nbGUgRGVmZXJyZWQsIGp1c3QgdXNlIHRoYXQuCgkJCQlkZWZlcnJlZCA9IHJlbWFpbmluZyA9PT0gMSA/IHN1Ym9yZGluYXRlIDogalF1ZXJ5LkRlZmVycmVkKCksCgoJCQkJLy8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlcwoJCQkJdXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkgewoJCQkJCXJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQkJCWNvbnRleHRzWyBpIF0gPSB0aGlzOwoJCQkJCQl2YWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTsKCQkJCQkJaWYgKCB2YWx1ZXMgPT09IHByb2dyZXNzVmFsdWVzICkgewoJCQkJCQkJZGVmZXJyZWQubm90aWZ5V2l0aCggY29udGV4dHMsIHZhbHVlcyApOwoKCQkJCQkJfSBlbHNlIGlmICggISggLS1yZW1haW5pbmcgKSApIHsKCQkJCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7CgkJCQkJCX0KCQkJCQl9OwoJCQkJfSwKCgkJCQlwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzOwoKCQkJLy8gYWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZAoJCQlpZiAoIGxlbmd0aCA+IDEgKSB7CgkJCQlwcm9ncmVzc1ZhbHVlcyA9IG5ldyBBcnJheSggbGVuZ3RoICk7CgkJCQlwcm9ncmVzc0NvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTsKCQkJCXJlc29sdmVDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7CgkJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCQlpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHsKCQkJCQkJcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UoKQoJCQkJCQkJLnByb2dyZXNzKCB1cGRhdGVGdW5jKCBpLCBwcm9ncmVzc0NvbnRleHRzLCBwcm9ncmVzc1ZhbHVlcyApICkKCQkJCQkJCS5kb25lKCB1cGRhdGVGdW5jKCBpLCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKSApCgkJCQkJCQkuZmFpbCggZGVmZXJyZWQucmVqZWN0ICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJLS1yZW1haW5pbmc7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBpZiB3ZSdyZSBub3Qgd2FpdGluZyBvbiBhbnl0aGluZywgcmVzb2x2ZSB0aGUgbWFzdGVyCgkJCWlmICggIXJlbWFpbmluZyApIHsKCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTsKCQkJfQoKCQkJcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTsKCQl9Cgl9ICk7CgoKCS8vIFRoZSBkZWZlcnJlZCB1c2VkIG9uIERPTSByZWFkeQoJdmFyIHJlYWR5TGlzdDsKCglqUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7CgoJCS8vIEFkZCB0aGUgY2FsbGJhY2sKCQlqUXVlcnkucmVhZHkucHJvbWlzZSgpLmRvbmUoIGZuICk7CgoJCXJldHVybiB0aGlzOwoJfTsKCglqUXVlcnkuZXh0ZW5kKCB7CgoJCS8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuCgkJaXNSZWFkeTogZmFsc2UsCgoJCS8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmUKCQkvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MQoJCXJlYWR5V2FpdDogMSwKCgkJLy8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50CgkJaG9sZFJlYWR5OiBmdW5jdGlvbiggaG9sZCApIHsKCQkJaWYgKCBob2xkICkgewoJCQkJalF1ZXJ5LnJlYWR5V2FpdCsrOwoJCQl9IGVsc2UgewoJCQkJalF1ZXJ5LnJlYWR5KCB0cnVlICk7CgkJCX0KCQl9LAoKCQkvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5CgkJcmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkgewoKCQkJLy8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeQoJCQlpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5CgkJCWpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTsKCgkJCS8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlCgkJCWlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlCgkJCXJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTsKCgkJCS8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50cwoJCQlpZiAoIGpRdWVyeS5mbi50cmlnZ2VySGFuZGxlciApIHsKCQkJCWpRdWVyeSggZG9jdW1lbnQgKS50cmlnZ2VySGFuZGxlciggInJlYWR5IiApOwoJCQkJalF1ZXJ5KCBkb2N1bWVudCApLm9mZiggInJlYWR5IiApOwoJCQl9CgkJfQoJfSApOwoKCS8qKgoJICogQ2xlYW4tdXAgbWV0aG9kIGZvciBkb20gcmVhZHkgZXZlbnRzCgkgKi8KCWZ1bmN0aW9uIGRldGFjaCgpIHsKCQlpZiAoIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICJET01Db250ZW50TG9hZGVkIiwgY29tcGxldGVkICk7CgkJCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoKCQl9IGVsc2UgewoJCQlkb2N1bWVudC5kZXRhY2hFdmVudCggIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIGNvbXBsZXRlZCApOwoJCQl3aW5kb3cuZGV0YWNoRXZlbnQoICJvbmxvYWQiLCBjb21wbGV0ZWQgKTsKCQl9Cgl9CgoJLyoqCgkgKiBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZAoJICovCglmdW5jdGlvbiBjb21wbGV0ZWQoKSB7CgoJCS8vIHJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgaXMgZ29vZCBlbm91Z2ggZm9yIHVzIHRvIGNhbGwgdGhlIGRvbSByZWFkeSBpbiBvbGRJRQoJCWlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciB8fAoJCQl3aW5kb3cuZXZlbnQudHlwZSA9PT0gImxvYWQiIHx8CgkJCWRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgKSB7CgoJCQlkZXRhY2goKTsKCQkJalF1ZXJ5LnJlYWR5KCk7CgkJfQoJfQoKCWpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHsKCQlpZiAoICFyZWFkeUxpc3QgKSB7CgoJCQlyZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTsKCgkJCS8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkCgkJCS8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLgoJCQkvLyBTdXBwb3J0OiBJRTYtMTAKCQkJLy8gT2xkZXIgSUUgc29tZXRpbWVzIHNpZ25hbHMgImludGVyYWN0aXZlIiB0b28gc29vbgoJCQlpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgfHwKCQkJCSggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gImxvYWRpbmciICYmICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgKSApIHsKCgkJCQkvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHkKCQkJCXdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTsKCgkJCS8vIFN0YW5kYXJkcy1iYXNlZCBicm93c2VycyBzdXBwb3J0IERPTUNvbnRlbnRMb2FkZWQKCQkJfSBlbHNlIGlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCgkJCQkvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrCgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAiRE9NQ29udGVudExvYWRlZCIsIGNvbXBsZXRlZCApOwoKCQkJCS8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrCgkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggImxvYWQiLCBjb21wbGV0ZWQgKTsKCgkJCS8vIElmIElFIGV2ZW50IG1vZGVsIGlzIHVzZWQKCQkJfSBlbHNlIHsKCgkJCQkvLyBFbnN1cmUgZmlyaW5nIGJlZm9yZSBvbmxvYWQsIG1heWJlIGxhdGUgYnV0IHNhZmUgYWxzbyBmb3IgaWZyYW1lcwoJCQkJZG9jdW1lbnQuYXR0YWNoRXZlbnQoICJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBjb21wbGV0ZWQgKTsKCgkJCQkvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29yawoJCQkJd2luZG93LmF0dGFjaEV2ZW50KCAib25sb2FkIiwgY29tcGxldGVkICk7CgoJCQkJLy8gSWYgSUUgYW5kIG5vdCBhIGZyYW1lCgkJCQkvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvY3VtZW50IGlzIHJlYWR5CgkJCQl2YXIgdG9wID0gZmFsc2U7CgoJCQkJdHJ5IHsKCQkJCQl0b3AgPSB3aW5kb3cuZnJhbWVFbGVtZW50ID09IG51bGwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoJCQkJfSBjYXRjaCAoIGUgKSB7fQoKCQkJCWlmICggdG9wICYmIHRvcC5kb1Njcm9sbCApIHsKCQkJCQkoIGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKSB7CgkJCQkJCWlmICggIWpRdWVyeS5pc1JlYWR5ICkgewoKCQkJCQkJCXRyeSB7CgoJCQkJCQkJCS8vIFVzZSB0aGUgdHJpY2sgYnkgRGllZ28gUGVyaW5pCgkJCQkJCQkJLy8gaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0lFQ29udGVudExvYWRlZC8KCQkJCQkJCQl0b3AuZG9TY3JvbGwoICJsZWZ0IiApOwoJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQkJcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCBkb1Njcm9sbENoZWNrLCA1MCApOwoJCQkJCQkJfQoKCQkJCQkJCS8vIGRldGFjaCBhbGwgZG9tIHJlYWR5IGV2ZW50cwoJCQkJCQkJZGV0YWNoKCk7CgoJCQkJCQkJLy8gYW5kIGV4ZWN1dGUgYW55IHdhaXRpbmcgZnVuY3Rpb25zCgkJCQkJCQlqUXVlcnkucmVhZHkoKTsKCQkJCQkJfQoJCQkJCX0gKSgpOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiByZWFkeUxpc3QucHJvbWlzZSggb2JqICk7Cgl9OwoKCS8vIEtpY2sgb2ZmIHRoZSBET00gcmVhZHkgY2hlY2sgZXZlbiBpZiB0aGUgdXNlciBkb2VzIG5vdAoJalF1ZXJ5LnJlYWR5LnByb21pc2UoKTsKCgoKCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBJdGVyYXRpb24gb3ZlciBvYmplY3QncyBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgaXRzIG93bgoJdmFyIGk7Cglmb3IgKCBpIGluIGpRdWVyeSggc3VwcG9ydCApICkgewoJCWJyZWFrOwoJfQoJc3VwcG9ydC5vd25GaXJzdCA9IGkgPT09ICIwIjsKCgkvLyBOb3RlOiBtb3N0IHN1cHBvcnQgdGVzdHMgYXJlIGRlZmluZWQgaW4gdGhlaXIgcmVzcGVjdGl2ZSBtb2R1bGVzLgoJLy8gZmFsc2UgdW50aWwgdGhlIHRlc3QgaXMgcnVuCglzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgPSBmYWxzZTsKCgkvLyBFeGVjdXRlIEFTQVAgaW4gY2FzZSB3ZSBuZWVkIHRvIHNldCBib2R5LnN0eWxlLnpvb20KCWpRdWVyeSggZnVuY3Rpb24oKSB7CgoJCS8vIE1pbmlmaWVkOiB2YXIgYSxiLGMsZAoJCXZhciB2YWwsIGRpdiwgYm9keSwgY29udGFpbmVyOwoKCQlib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJib2R5IiApWyAwIF07CgkJaWYgKCAhYm9keSB8fCAhYm9keS5zdHlsZSApIHsKCgkJCS8vIFJldHVybiBmb3IgZnJhbWVzZXQgZG9jcyB0aGF0IGRvbid0IGhhdmUgYSBib2R5CgkJCXJldHVybjsKCQl9CgoJCS8vIFNldHVwCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjsKCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCWlmICggdHlwZW9mIGRpdi5zdHlsZS56b29tICE9PSAidW5kZWZpbmVkIiApIHsKCgkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJLy8gQ2hlY2sgaWYgbmF0aXZlbHkgYmxvY2stbGV2ZWwgZWxlbWVudHMgYWN0IGxpa2UgaW5saW5lLWJsb2NrCgkJCS8vIGVsZW1lbnRzIHdoZW4gc2V0dGluZyB0aGVpciBkaXNwbGF5IHRvICdpbmxpbmUnIGFuZCBnaXZpbmcKCQkJLy8gdGhlbSBsYXlvdXQKCQkJZGl2LnN0eWxlLmNzc1RleHQgPSAiZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSI7CgoJCQlzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgPSB2YWwgPSBkaXYub2Zmc2V0V2lkdGggPT09IDM7CgkJCWlmICggdmFsICkgewoKCQkJCS8vIFByZXZlbnQgSUUgNiBmcm9tIGFmZmVjdGluZyBsYXlvdXQgZm9yIHBvc2l0aW9uZWQgZWxlbWVudHMgIzExMDQ4CgkJCQkvLyBQcmV2ZW50IElFIGZyb20gc2hyaW5raW5nIHRoZSBib2R5IGluIElFIDcgbW9kZSAjMTI4NjkKCQkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJCWJvZHkuc3R5bGUuem9vbSA9IDE7CgkJCX0KCQl9CgoJCWJvZHkucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApOwoJfSApOwoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gdHJ1ZTsKCQl0cnkgewoJCQlkZWxldGUgZGl2LnRlc3Q7CgkJfSBjYXRjaCAoIGUgKSB7CgkJCXN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IGZhbHNlOwoJCX0KCgkJLy8gTnVsbCBlbGVtZW50cyB0byBhdm9pZCBsZWFrcyBpbiBJRS4KCQlkaXYgPSBudWxsOwoJfSApKCk7Cgl2YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXZhciBub0RhdGEgPSBqUXVlcnkubm9EYXRhWyAoIGVsZW0ubm9kZU5hbWUgKyAiICIgKS50b0xvd2VyQ2FzZSgpIF0sCgkJCW5vZGVUeXBlID0gK2VsZW0ubm9kZVR5cGUgfHwgMTsKCgkJLy8gRG8gbm90IHNldCBkYXRhIG9uIG5vbi1lbGVtZW50IERPTSBub2RlcyBiZWNhdXNlIGl0IHdpbGwgbm90IGJlIGNsZWFyZWQgKCM4MzM1KS4KCQlyZXR1cm4gbm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgPwoJCQlmYWxzZSA6CgoJCQkvLyBOb2RlcyBhY2NlcHQgZGF0YSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZDsgcmVqZWN0aW9uIGNhbiBiZSBjb25kaXRpb25hbAoJCQkhbm9EYXRhIHx8IG5vRGF0YSAhPT0gdHJ1ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggImNsYXNzaWQiICkgPT09IG5vRGF0YTsKCX07CgoKCgoJdmFyIHJicmFjZSA9IC9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sCgkJcm11bHRpRGFzaCA9IC8oW0EtWl0pL2c7CgoJZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHsKCgkJLy8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueQoJCS8vIGRhdGE=", "base64"));
  res.write(new Buffer("IGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGUKCQlpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgewoKCQkJdmFyIG5hbWUgPSAiZGF0YS0iICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsICItJDEiICkudG9Mb3dlckNhc2UoKTsKCgkJCWRhdGEgPSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApOwoKCQkJaWYgKCB0eXBlb2YgZGF0YSA9PT0gInN0cmluZyIgKSB7CgkJCQl0cnkgewoJCQkJCWRhdGEgPSBkYXRhID09PSAidHJ1ZSIgPyB0cnVlIDoKCQkJCQkJZGF0YSA9PT0gImZhbHNlIiA/IGZhbHNlIDoKCQkJCQkJZGF0YSA9PT0gIm51bGwiID8gbnVsbCA6CgoJCQkJCQkvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZwoJCQkJCQkrZGF0YSArICIiID09PSBkYXRhID8gK2RhdGEgOgoJCQkJCQlyYnJhY2UudGVzdCggZGF0YSApID8galF1ZXJ5LnBhcnNlSlNPTiggZGF0YSApIDoKCQkJCQkJZGF0YTsKCQkJCX0gY2F0Y2ggKCBlICkge30KCgkJCQkvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXIKCQkJCWpRdWVyeS5kYXRhKCBlbGVtLCBrZXksIGRhdGEgKTsKCgkJCX0gZWxzZSB7CgkJCQlkYXRhID0gdW5kZWZpbmVkOwoJCQl9CgkJfQoKCQlyZXR1cm4gZGF0YTsKCX0KCgkvLyBjaGVja3MgYSBjYWNoZSBvYmplY3QgZm9yIGVtcHRpbmVzcwoJZnVuY3Rpb24gaXNFbXB0eURhdGFPYmplY3QoIG9iaiApIHsKCQl2YXIgbmFtZTsKCQlmb3IgKCBuYW1lIGluIG9iaiApIHsKCgkJCS8vIGlmIHRoZSBwdWJsaWMgZGF0YSBvYmplY3QgaXMgZW1wdHksIHRoZSBwcml2YXRlIGlzIHN0aWxsIGVtcHR5CgkJCWlmICggbmFtZSA9PT0gImRhdGEiICYmIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvYmpbIG5hbWUgXSApICkgewoJCQkJY29udGludWU7CgkJCX0KCQkJaWYgKCBuYW1lICE9PSAidG9KU09OIiApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9CgoJZnVuY3Rpb24gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhLCBwdnQgLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7CgkJaWYgKCAhYWNjZXB0RGF0YSggZWxlbSApICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgcmV0LCB0aGlzQ2FjaGUsCgkJCWludGVybmFsS2V5ID0galF1ZXJ5LmV4cGFuZG8sCgoJCQkvLyBXZSBoYXZlIHRvIGhhbmRsZSBET00gbm9kZXMgYW5kIEpTIG9iamVjdHMgZGlmZmVyZW50bHkgYmVjYXVzZSBJRTYtNwoJCQkvLyBjYW4ndCBHQyBvYmplY3QgcmVmZXJlbmNlcyBwcm9wZXJseSBhY3Jvc3MgdGhlIERPTS1KUyBib3VuZGFyeQoJCQlpc05vZGUgPSBlbGVtLm5vZGVUeXBlLAoKCQkJLy8gT25seSBET00gbm9kZXMgbmVlZCB0aGUgZ2xvYmFsIGpRdWVyeSBjYWNoZTsgSlMgb2JqZWN0IGRhdGEgaXMKCQkJLy8gYXR0YWNoZWQgZGlyZWN0bHkgdG8gdGhlIG9iamVjdCBzbyBHQyBjYW4gb2NjdXIgYXV0b21hdGljYWxseQoJCQljYWNoZSA9IGlzTm9kZSA/IGpRdWVyeS5jYWNoZSA6IGVsZW0sCgoJCQkvLyBPbmx5IGRlZmluaW5nIGFuIElEIGZvciBKUyBvYmplY3RzIGlmIGl0cyBjYWNoZSBhbHJlYWR5IGV4aXN0cyBhbGxvd3MKCQkJLy8gdGhlIGNvZGUgdG8gc2hvcnRjdXQgb24gdGhlIHNhbWUgcGF0aCBhcyBhIERPTSBub2RlIHdpdGggbm8gY2FjaGUKCQkJaWQgPSBpc05vZGUgPyBlbGVtWyBpbnRlcm5hbEtleSBdIDogZWxlbVsgaW50ZXJuYWxLZXkgXSAmJiBpbnRlcm5hbEtleTsKCgkJLy8gQXZvaWQgZG9pbmcgYW55IG1vcmUgd29yayB0aGFuIHdlIG5lZWQgdG8gd2hlbiB0cnlpbmcgdG8gZ2V0IGRhdGEgb24gYW4KCQkvLyBvYmplY3QgdGhhdCBoYXMgbm8gZGF0YSBhdCBhbGwKCQlpZiAoICggIWlkIHx8ICFjYWNoZVsgaWQgXSB8fCAoICFwdnQgJiYgIWNhY2hlWyBpZCBdLmRhdGEgKSApICYmCgkJCWRhdGEgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbmFtZSA9PT0gInN0cmluZyIgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggIWlkICkgewoKCQkJLy8gT25seSBET00gbm9kZXMgbmVlZCBhIG5ldyB1bmlxdWUgSUQgZm9yIGVhY2ggZWxlbWVudCBzaW5jZSB0aGVpciBkYXRhCgkJCS8vIGVuZHMgdXAgaW4gdGhlIGdsb2JhbCBjYWNoZQoJCQlpZiAoIGlzTm9kZSApIHsKCQkJCWlkID0gZWxlbVsgaW50ZXJuYWxLZXkgXSA9IGRlbGV0ZWRJZHMucG9wKCkgfHwgalF1ZXJ5Lmd1aWQrKzsKCQkJfSBlbHNlIHsKCQkJCWlkID0gaW50ZXJuYWxLZXk7CgkJCX0KCQl9CgoJCWlmICggIWNhY2hlWyBpZCBdICkgewoKCQkJLy8gQXZvaWQgZXhwb3NpbmcgalF1ZXJ5IG1ldGFkYXRhIG9uIHBsYWluIEpTIG9iamVjdHMgd2hlbiB0aGUgb2JqZWN0CgkJCS8vIGlzIHNlcmlhbGl6ZWQgdXNpbmcgSlNPTi5zdHJpbmdpZnkKCQkJY2FjaGVbIGlkIF0gPSBpc05vZGUgPyB7fSA6IHsgdG9KU09OOiBqUXVlcnkubm9vcCB9OwoJCX0KCgkJLy8gQW4gb2JqZWN0IGNhbiBiZSBwYXNzZWQgdG8galF1ZXJ5LmRhdGEgaW5zdGVhZCBvZiBhIGtleS92YWx1ZSBwYWlyOyB0aGlzIGdldHMKCQkvLyBzaGFsbG93IGNvcGllZCBvdmVyIG9udG8gdGhlIGV4aXN0aW5nIGNhY2hlCgkJaWYgKCB0eXBlb2YgbmFtZSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIG5hbWUgPT09ICJmdW5jdGlvbiIgKSB7CgkJCWlmICggcHZ0ICkgewoJCQkJY2FjaGVbIGlkIF0gPSBqUXVlcnkuZXh0ZW5kKCBjYWNoZVsgaWQgXSwgbmFtZSApOwoJCQl9IGVsc2UgewoJCQkJY2FjaGVbIGlkIF0uZGF0YSA9IGpRdWVyeS5leHRlbmQoIGNhY2hlWyBpZCBdLmRhdGEsIG5hbWUgKTsKCQkJfQoJCX0KCgkJdGhpc0NhY2hlID0gY2FjaGVbIGlkIF07CgoJCS8vIGpRdWVyeSBkYQ==", "base64"));
  res.write(new Buffer("dGEoKSBpcyBzdG9yZWQgaW4gYSBzZXBhcmF0ZSBvYmplY3QgaW5zaWRlIHRoZSBvYmplY3QncyBpbnRlcm5hbCBkYXRhCgkJLy8gY2FjaGUgaW4gb3JkZXIgdG8gYXZvaWQga2V5IGNvbGxpc2lvbnMgYmV0d2VlbiBpbnRlcm5hbCBkYXRhIGFuZCB1c2VyLWRlZmluZWQKCQkvLyBkYXRhLgoJCWlmICggIXB2dCApIHsKCQkJaWYgKCAhdGhpc0NhY2hlLmRhdGEgKSB7CgkJCQl0aGlzQ2FjaGUuZGF0YSA9IHt9OwoJCQl9CgoJCQl0aGlzQ2FjaGUgPSB0aGlzQ2FjaGUuZGF0YTsKCQl9CgoJCWlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkgewoJCQl0aGlzQ2FjaGVbIGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSBdID0gZGF0YTsKCQl9CgoJCS8vIENoZWNrIGZvciBib3RoIGNvbnZlcnRlZC10by1jYW1lbCBhbmQgbm9uLWNvbnZlcnRlZCBkYXRhIHByb3BlcnR5IG5hbWVzCgkJLy8gSWYgYSBkYXRhIHByb3BlcnR5IHdhcyBzcGVjaWZpZWQKCQlpZiAoIHR5cGVvZiBuYW1lID09PSAic3RyaW5nIiApIHsKCgkJCS8vIEZpcnN0IFRyeSB0byBmaW5kIGFzLWlzIHByb3BlcnR5IGRhdGEKCQkJcmV0ID0gdGhpc0NhY2hlWyBuYW1lIF07CgoJCQkvLyBUZXN0IGZvciBudWxsfHVuZGVmaW5lZCBwcm9wZXJ0eSBkYXRhCgkJCWlmICggcmV0ID09IG51bGwgKSB7CgoJCQkJLy8gVHJ5IHRvIGZpbmQgdGhlIGNhbWVsQ2FzZWQgcHJvcGVydHkKCQkJCXJldCA9IHRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF07CgkJCX0KCQl9IGVsc2UgewoJCQlyZXQgPSB0aGlzQ2FjaGU7CgkJfQoKCQlyZXR1cm4gcmV0OwoJfQoKCWZ1bmN0aW9uIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgcHZ0ICkgewoJCWlmICggIWFjY2VwdERhdGEoIGVsZW0gKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIHRoaXNDYWNoZSwgaSwKCQkJaXNOb2RlID0gZWxlbS5ub2RlVHlwZSwKCgkJCS8vIFNlZSBqUXVlcnkuZGF0YSBmb3IgbW9yZSBpbmZvcm1hdGlvbgoJCQljYWNoZSA9IGlzTm9kZSA/IGpRdWVyeS5jYWNoZSA6IGVsZW0sCgkJCWlkID0gaXNOb2RlID8gZWxlbVsgalF1ZXJ5LmV4cGFuZG8gXSA6IGpRdWVyeS5leHBhbmRvOwoKCQkvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IG5vIGNhY2hlIGVudHJ5IGZvciB0aGlzIG9iamVjdCwgdGhlcmUgaXMgbm8KCQkvLyBwdXJwb3NlIGluIGNvbnRpbnVpbmcKCQlpZiAoICFjYWNoZVsgaWQgXSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBuYW1lICkgewoKCQkJdGhpc0NhY2hlID0gcHZ0ID8gY2FjaGVbIGlkIF0gOiBjYWNoZVsgaWQgXS5kYXRhOwoKCQkJaWYgKCB0aGlzQ2FjaGUgKSB7CgoJCQkJLy8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG5hbWVzIGZvciBkYXRhIGtleXMKCQkJCWlmICggIWpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7CgoJCQkJCS8vIHRyeSB0aGUgc3RyaW5nIGFzIGEga2V5IGJlZm9yZSBhbnkgbWFuaXB1bGF0aW9uCgkJCQkJaWYgKCBuYW1lIGluIHRoaXNDYWNoZSApIHsKCQkJCQkJbmFtZSA9IFsgbmFtZSBdOwoJCQkJCX0gZWxzZSB7CgoJCQkJCQkvLyBzcGxpdCB0aGUgY2FtZWwgY2FzZWQgdmVyc2lvbiBieSBzcGFjZXMgdW5sZXNzIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMKCQkJCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTsKCQkJCQkJaWYgKCBuYW1lIGluIHRoaXNDYWNoZSApIHsKCQkJCQkJCW5hbWUgPSBbIG5hbWUgXTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCW5hbWUgPSBuYW1lLnNwbGl0KCAiICIgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0gZWxzZSB7CgoJCQkJCS8vIElmICJuYW1lIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uCgkJCQkJLy8gV2hlbiBkYXRhIGlzIGluaXRpYWxseSBjcmVhdGVkLCB2aWEgKCJrZXkiLCAidmFsIikgc2lnbmF0dXJlLAoJCQkJCS8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLgoJCQkJCS8vIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byB0ZWxsIF9ob3dfIGEga2V5IHdhcyBhZGRlZCwgcmVtb3ZlCgkJCQkJLy8gYm90aCBwbGFpbiBrZXkgYW5kIGNhbWVsQ2FzZSBrZXkuICMxMjc4NgoJCQkJCS8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLgoJCQkJCW5hbWUgPSBuYW1lLmNvbmNhdCggalF1ZXJ5Lm1hcCggbmFtZSwgalF1ZXJ5LmNhbWVsQ2FzZSApICk7CgkJCQl9CgoJCQkJaSA9IG5hbWUubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJZGVsZXRlIHRoaXNDYWNoZVsgbmFtZVsgaSBdIF07CgkJCQl9CgoJCQkJLy8gSWYgdGhlcmUgaXMgbm8gZGF0YSBsZWZ0IGluIHRoZSBjYWNoZSwgd2Ugd2FudCB0byBjb250aW51ZQoJCQkJLy8gYW5kIGxldCB0aGUgY2FjaGUgb2JqZWN0IGl0c2VsZiBnZXQgZGVzdHJveWVkCgkJCQlpZiAoIHB2dCA/ICFpc0VtcHR5RGF0YU9iamVjdCggdGhpc0NhY2hlICkgOiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIHRoaXNDYWNoZSApICkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gU2VlIGpRdWVyeS5kYXRhIGZvciBtb3JlIGluZm9ybWF0aW9uCgkJaWYgKCAhcHZ0ICkgewoJCQlkZWxldGUgY2FjaGVbIGlkIF0uZGF0YTsKCgkJCS8vIERvbid0IGRlc3Ryb3kgdGhlIHBhcmVudCBjYWNoZSB1bmxlc3MgdGhlIGludGVybmFsIGRhdGEgb2JqZWN0CgkJCS8vIGhhZCBiZWVuIHRoZSBvbmx5IHRoaW5nIGxlZnQgaW4gaXQKCQkJaWYgKCAhaXNFbXB0eURhdGFPYmplY3QoIGNhY2hlWyBpZCBdICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCQl9CgoJCS8vIERlc3Ryb3kgdGhlIGNhY2hlCgkJaWYgKCBpc05vZGUgKSB7CgkJCWpRdWVyeS5jbGVhbkRhdGEoIFsgZWxlbSBdLCB0cnVlICk7CgoJCS8vIFVzZSBkZWxldGUgd2hlbiBzdXBwb3J0ZWQgZm9yIGV4cGFuZG9zIG9yIGBjYWNoZWAgaXMgbm90IGEgd2luZG93IHBlciBpc1dpbmRvdyAoIzEwMDgwKQoJCS8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovCgkJfSBlbHNlIGlmICggc3VwcG9ydC5kZWxldGVFeHBhbmRvIHx8IGNhY2hlICE9IGNhY2hlLndpbmRvdyApIHsKCQkJLyoganNoaW50IGVxZXFlcTogdHJ1ZSAqLwoJCQlkZWxldGUgY2FjaGVbIGlkIF07CgoJCS8vIFdoZW4gYWxsIGVsc2UgZmFpbHMsIHVuZGVmaW5lZAoJCX0gZWxzZSB7CgkJCWNhY2hlWyBpZCBdID0gdW5kZWZpbmVkOwoJCX0KCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgkJY2FjaGU6IHt9LAoKCQkvLyBUaGUgZm9sbG93aW5nIGVsZW1lbnRzIChzcGFjZS1zdWZmaXhlZCB0byBhdm9pZCBPYmplY3QucHJvdG90eXBlIGNvbGxpc2lvbnMpCgkJLy8gdGhyb3cgdW5jYXRjaGFibGUgZXhjZXB0aW9ucyBpZiB5b3UgYXR0ZW1wdCB0byBzZXQgZXhwYW5kbyBwcm9wZXJ0aWVzCgkJbm9EYXRhOiB7CgkJCSJhcHBsZXQgIjogdHJ1ZSwKCQkJImVtYmVkICI6IHRydWUsCgoJCQkvLyAuLi5idXQgRmxhc2ggb2JqZWN0cyAod2hpY2ggaGF2ZSB0aGlzIGNsYXNzaWQpICpjYW4qIGhhbmRsZSBleHBhbmRvcwoJCQkib2JqZWN0ICI6ICJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiCgkJfSwKCgkJaGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWVsZW0gPSBlbGVtLm5vZGVUeXBlID8galF1ZXJ5LmNhY2hlWyBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdIF0gOiBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdOwoJCQlyZXR1cm4gISFlbGVtICYmICFpc0VtcHR5RGF0YU9iamVjdCggZWxlbSApOwoJCX0sCgoJCWRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkgewoJCQlyZXR1cm4gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhICk7CgkJfSwKCgkJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJCXJldHVybiBpbnRlcm5hbFJlbW92ZURhdGEoIGVsZW0sIG5hbWUgKTsKCQl9LAoKCQkvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuCgkJX2RhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkgewoJCQlyZXR1cm4gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhLCB0cnVlICk7CgkJfSwKCgkJX3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQlyZXR1cm4gaW50ZXJuYWxSZW1vdmVEYXRhKCBlbGVtLCBuYW1lLCB0cnVlICk7CgkJfQoJfSApOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQkJdmFyIGksIG5hbWUsIGRhdGEsCgkJCQllbGVtID0gdGhpc1sgMCBdLAoJCQkJYXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlczsKCgkJCS8vIFNwZWNpYWwgZXhwZWN0aW9ucyBvZiAuZGF0YSBiYXNpY2FsbHkgdGh3YXJ0IGpRdWVyeS5hY2Nlc3MsCgkJCS8vIHNvIGltcGxlbWVudCB0aGUgcmVsZXZhbnQgYmVoYXZpb3Igb3Vyc2VsdmVzCgoJCQkvLyBHZXRzIGFsbCB2YWx1ZXMKCQkJaWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHsKCQkJCWlmICggdGhpcy5sZW5ndGggKSB7CgkJCQkJZGF0YSA9IGpRdWVyeS5kYXRhKCBlbGVtICk7CgoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhalF1ZXJ5Ll9kYXRhKCBlbGVtLCAicGFyc2VkQXR0cnMiICkgKSB7CgkJCQkJCWkgPSBhdHRycy5sZW5ndGg7CgkJCQkJCXdoaWxlICggaS0tICkgewoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFMTErCgkJCQkJCQkvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NCkKCQkJCQkJCWlmICggYXR0cnNbIGkgXSApIHsKCQkJCQkJCQluYW1lID0gYXR0cnNbIGkgXS5uYW1lOwoJCQkJCQkJCWlmICggbmFtZS5pbmRleE9mKCAiZGF0YS0iICkgPT09IDAgKSB7CgkJCQkJCQkJCW5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lLnNsaWNlKCA1ICkgKTsKCQkJCQkJCQkJZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlqUXVlcnkuX2RhdGEoIGVsZW0sICJwYXJzZWRBdHRycyIsIHRydWUgKTsKCQkJCQl9CgkJCQl9CgoJCQkJcmV0dXJuIGRhdGE7CgkJCX0KCgkJCS8vIFNldHMgbXVsdGlwbGUgdmFsdWVzCgkJCWlmICggdHlwZW9mIGtleSA9PT0gIm9iamVjdCIgKSB7CgkJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuZGF0YSggdGhpcywga2V5ICk7CgkJCQl9ICk7CgkJCX0KCgkJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSA/CgoJCQkJLy8gU2V0cyBvbmUgdmFsdWUKCQkJCXRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQkJalF1ZXJ5LmRhdGEoIHRoaXMsIGtleSwgdmFsdWUgKTsKCQkJCX0gKSA6CgoJCQkJLy8gR2V0cyBvbmUgdmFsdWUKCQkJCS8vIFRyeSB0byBmZXRjaCBhbnkgaW50ZXJuYWxseSBzdG9yZWQgZGF0YSBmaXJzdAoJCQkJZWxlbSA/IGRhdGFBdHRyKCBlbGVtLCBrZXksIGpRdWVyeS5kYXRhKCBlbGVtLCBrZXkgKSApIDogdW5kZWZpbmVkOwoJCX0sCgoJCXJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LnJlbW92ZURhdGEoIHRoaXMsIGtleSApOwoJCQl9ICk7CgkJfQoJfSApOwoKCglqUXVlcnkuZXh0ZW5kKCB7CgkJcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkgewoJCQl2YXIgcXVldWU7CgoJCQlpZiAoIGVsZW0gKSB7CgkJCQl0eXBlID0gKCB0eXBlIHx8ICJmeCIgKSArICJxdWV1ZSI7CgkJCQlxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSApOwoKCQkJCS8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXAKCQkJCWlmICggZGF0YSApIHsKCQkJCQlpZiAoICFxdWV1ZSB8fCBqUXVlcnkuaXNBcnJheSggZGF0YSApICkgewoJCQkJCQlxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcXVldWUucHVzaCggZGF0YSApOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBxdWV1ZSB8fCBbXTsKCQkJfQoJCX0sCgoJCWRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkgewoJCQl0eXBlID0gdHlwZSB8fCAiZngiOwoKCQkJdmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksCgkJCQlzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCwKCQkJCWZuID0gcXVldWUuc2hpZnQoKSwKCQkJCWhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksCgkJCQluZXh0ID0gZnVuY3Rpb24oKSB7CgkJCQkJalF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTsKCQkJCX07CgoJCQkvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsCgkJCWlmICggZm4gPT09ICJpbnByb2dyZXNzIiApIHsKCQkJCWZuID0gcXVldWUuc2hpZnQoKTsKCQkJCXN0YXJ0TGVuZ3RoLS07CgkJCX0KCgkJCWlmICggZm4gKSB7CgoJCQkJLy8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZwoJCQkJLy8gYXV0b21hdGljYWxseSBkZXF1ZXVlZAoJCQkJaWYgKCB0eXBlID09PSAiZngiICkgewoJCQkJCXF1ZXVlLnVuc2hpZnQoICJpbnByb2dyZXNzIiApOwoJCQkJfQoKCQkJCS8vIGNsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb24KCQkJCWRlbGV0ZSBob29rcy5zdG9wOwoJCQkJZm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTsKCQkJfQoKCQkJaWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7CgkJCQlob29rcy5lbXB0eS5maXJlKCk7CgkJCX0KCQl9LAoKCQkvLyBub3QgaW50ZW5kZWQgZm9yIHB1YmxpYyBjb25zdW1wdGlvbiAtIGdlbmVyYXRlcyBhIHF1ZXVlSG9va3Mgb2JqZWN0LAoJCS8vIG9yIHJldHVybnMgdGhlIGN1cnJlbnQgb25lCgkJX3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkgewoJCQl2YXIga2V5ID0gdHlwZSArICJxdWV1ZUhvb2tzIjsKCQkJcmV0dXJuIGpRdWVyeS5fZGF0YSggZWxlbSwga2V5ICkgfHwgalF1ZXJ5Ll9kYXRhKCBlbGVtLCBrZXksIHsKCQkJCWVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICkuYWRkKCBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sIHR5cGUgKyAicXVldWUiICk7CgkJCQkJalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCBrZXkgKTsKCQkJCQ==", "base64"));
  res.write(new Buffer("fSApCgkJCX0gKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCXF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQkJdmFyIHNldHRlciA9IDI7CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWRhdGEgPSB0eXBlOwoJCQkJdHlwZSA9ICJmeCI7CgkJCQlzZXR0ZXItLTsKCQkJfQoKCQkJaWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkgewoJCQkJcmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7CgkJCX0KCgkJCXJldHVybiBkYXRhID09PSB1bmRlZmluZWQgPwoJCQkJdGhpcyA6CgkJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApOwoKCQkJCQkvLyBlbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZQoJCQkJCWpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApOwoKCQkJCQlpZiAoIHR5cGUgPT09ICJmeCIgJiYgcXVldWVbIDAgXSAhPT0gImlucHJvZ3Jlc3MiICkgewoJCQkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQkJCX0KCQkJCX0gKTsKCQl9LAoJCWRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJCX0gKTsKCQl9LAoJCWNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCAiZngiLCBbXSApOwoJCX0sCgoJCS8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGUKCQkvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdCkKCQlwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkgewoJCQl2YXIgdG1wLAoJCQkJY291bnQgPSAxLAoJCQkJZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJCWVsZW1lbnRzID0gdGhpcywKCQkJCWkgPSB0aGlzLmxlbmd0aCwKCQkJCXJlc29sdmUgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoICEoIC0tY291bnQgKSApIHsKCQkJCQkJZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTsKCQkJCQl9CgkJCQl9OwoKCQkJaWYgKCB0eXBlb2YgdHlwZSAhPT0gInN0cmluZyIgKSB7CgkJCQlvYmogPSB0eXBlOwoJCQkJdHlwZSA9IHVuZGVmaW5lZDsKCQkJfQoJCQl0eXBlID0gdHlwZSB8fCAiZngiOwoKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQl0bXAgPSBqUXVlcnkuX2RhdGEoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyAicXVldWVIb29rcyIgKTsKCQkJCWlmICggdG1wICYmIHRtcC5lbXB0eSApIHsKCQkJCQljb3VudCsrOwoJCQkJCXRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTsKCQkJCX0KCQkJfQoJCQlyZXNvbHZlKCk7CgkJCXJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTsKCQl9Cgl9ICk7CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIHNocmlua1dyYXBCbG9ja3NWYWw7CgoJCXN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcyA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIHNocmlua1dyYXBCbG9ja3NWYWwgIT0gbnVsbCApIHsKCQkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCQl9CgoJCQkvLyBXaWxsIGJlIGNoYW5nZWQgbGF0ZXIgaWYgbmVlZGVkLgoJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZmFsc2U7CgoJCQkvLyBNaW5pZmllZDogdmFyIGIsYyxkCgkJCXZhciBkaXYsIGJvZHksIGNvbnRhaW5lcjsKCgkJCWJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggImJvZHkiIClbIDAgXTsKCQkJaWYgKCAhYm9keSB8fCAhYm9keS5zdHlsZSApIHsKCgkJCQkvLyBUZXN0IGZpcmVkIHRvbyBlYXJseSBvciBpbiBhbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudCwgZXhpdC4KCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gU2V0dXAKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiOwoJCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCQkvLyBTdXBwb3J0OiBJRTYKCQkJLy8gQ2hlY2sgaWYgZWxlbWVudHMgd2l0aCBsYXlvdXQgc2hyaW5rLXdyYXAgdGhlaXIgY2hpbGRyZW4KCQkJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkJCS8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXIKCQkJCWRpdi5zdHlsZS5jc3NUZXh0ID0KCgkJCQkJLy8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjMKCQkJCQkvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmcKCQkJCQkiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDsiICsKCQkJCQkiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowOyIgKwoJCQkJCSJwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjsKCQkJCWRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApLnN0eWxlLndpZHRoID0gIjVweCI7CgkJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZGl2Lm9mZnNldFdpZHRoICE9PSAzOwoJCQl9CgoJCQlib2R5LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTsKCgkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCX07CgoJfSApKCk7Cgl2YXIgcG51bSA9ICggL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLyApLnNvdXJjZTsKCgl2YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoICJeKD86KFsrLV0pPXwpKCIgKyBwbnVtICsgIikoW2EteiVdKikkIiwgImkiICk7CgoKCXZhciBjc3NFeHBhbmQgPSBbICJUb3AiLCAiUmlnaHQiLCAiQm90dG9tIiwgIkxlZnQiIF07CgoJdmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkgewoKCQkJLy8gaXNIaWRkZW4gbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjsKCQkJLy8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50CgkJCWVsZW0gPSBlbCB8fCBlbGVtOwoJCQlyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICkgPT09ICJub25lIiB8fAoJCQkJIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7CgkJfTsKCgoKCWZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7CgkJdmFyIGFkanVzdGVkLAoJCQlzY2FsZSA9IDEsCgkJCW1heEl0ZXJhdGlvbnMgPSAyMCwKCQkJY3VycmVudFZhbHVlID0gdHdlZW4gPwoJCQkJZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsICIiICk7IH0sCgkJCWluaXRpYWwgPSBjdXJyZW50VmFsdWUoKSwKCQkJdW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICksCgoJCQkvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlcwoJCQlpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gInB4IiAmJiAraW5pdGlhbCApICYmCgkJCQlyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApOwoKCQlpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkgewoKCQkJLy8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzcwoJCQl1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07CgoJCQkvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uCgkJCXZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdOwoKCQkJLy8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnQKCQkJaW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7CgoJCQlkbyB7CgoJCQkJLy8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouCgkJCQkvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvdwoJCQkJc2NhbGUgPSBzY2FsZSB8fCAiLjUiOwoKCQkJCS8vIEFkanVzdCBhbmQgYXBwbHkKCQkJCWluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7CgkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7CgoJCQkvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKQoJCQkvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLgoJCQl9IHdoaWxlICgKCQkJCXNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zCgkJCSk7CgkJfQoKCQlpZiAoIHZhbHVlUGFydHMgKSB7CgkJCWluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwOwoKCQkJLy8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkCgkJCWFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID8KCQkJCWluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6CgkJCQkrdmFsdWVQYXJ0c1sgMiBdOwoJCQlpZiAoIHR3ZWVuICkgewoJCQkJdHdlZW4udW5pdCA9IHVuaXQ7CgkJCQl0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7CgkJCQl0d2Vlbi5lbmQgPSBhZGp1c3RlZDsKCQkJfQoJCX0KCQlyZXR1cm4gYWRqdXN0ZWQ7Cgl9CgoKCS8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvbgoJLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uCgl2YXIgYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkgewoJCXZhciBpID0gMCwKCQkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCQlidWxrID0ga2V5ID09IG51bGw7CgoJCS8vIFNldHMgbWFueSB2YWx1ZXMKCQlpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gIm9iamVjdCIgKSB7CgkJCWNoYWluYWJsZSA9IHRydWU7CgkJCWZvciAoIGkgaW4ga2V5ICkgewoJCQkJYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7CgkJCX0KCgkJLy8gU2V0cyBvbmUgdmFsdWUKCQl9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQljaGFpbmFibGUgPSB0cnVlOwoKCQkJaWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCQlyYXcgPSB0cnVlOwoJCQl9CgoJCQlpZiAoIGJ1bGsgKSB7CgoJCQkJLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0CgkJCQlpZiAoIHJhdyApIHsKCQkJCQlmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTsKCQkJCQlmbiA9IG51bGw7CgoJCQkJLy8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlcwoJCQkJfSBlbHNlIHsKCQkJCQlidWxrID0gZm47CgkJCQkJZm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHsKCQkJCQkJcmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7CgkJCQkJfTsKCQkJCX0KCQkJfQoKCQkJaWYgKCBmbiApIHsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCWZuKAoJCQkJCQllbGVtc1sgaSBdLAoJCQkJCQlrZXksCgkJCQkJCXJhdyA/IHZhbHVlIDogdmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApICkKCQkJCQkpOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gY2hhaW5hYmxlID8KCQkJZWxlbXMgOgoKCQkJLy8gR2V0cwoJCQlidWxrID8KCQkJCWZuLmNhbGwoIGVsZW1zICkgOgoJCQkJbGVuZ3RoID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7Cgl9OwoJdmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApOwoKCXZhciBydGFnTmFtZSA9ICggLzwoW1x3Oi1dKykvICk7CgoJdmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTsKCgl2YXIgcmxlYWRpbmdXaGl0ZXNwYWNlID0gKCAvXlxzKy8gKTsKCgl2YXIgbm9kZU5hbWVzID0gImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8IiArCgkJCSJkZXRhaWxzfGRpYWxvZ3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYWlufCIgKwoJCQkibWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iOwoKCgoJZnVuY3Rpb24gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApIHsKCQl2YXIgbGlzdCA9IG5vZGVOYW1lcy5zcGxpdCggInwiICksCgkJCXNhZmVGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoKCQlpZiAoIHNhZmVGcmFnLmNyZWF0ZUVsZW1lbnQgKSB7CgkJCXdoaWxlICggbGlzdC5sZW5ndGggKSB7CgkJCQlzYWZlRnJhZy5jcmVhdGVFbGVtZW50KAoJCQkJCWxpc3QucG9wKCkKCQkJCSk7CgkJCX0KCQl9CgkJcmV0dXJuIHNhZmVGcmFnOwoJfQoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwKCQkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgoJCS8vIFNldHVwCgkJZGl2LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iOwoKCQkvLyBJRSBzdHJpcHMgbGVhZGluZyB3aGl0ZXNwYWNlIHdoZW4gLmlubmVySFRNTCBpcyB1c2VkCgkJc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSA9IGRpdi5maXJzdENoaWxkLm5vZGVUeXBlID09PSAzOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0Ym9keSBlbGVtZW50cyBhcmVuJ3QgYXV0b21hdGljYWxseSBpbnNlcnRlZAoJCS8vIElFIHdpbGwgaW5zZXJ0IHRoZW0gaW50byBlbXB0eSB0YWJsZXMKCQlzdXBwb3J0LnRib2R5ID0gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRib2R5IiApLmxlbmd0aDsKCgkJLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MCgkJLy8gVGhpcyByZXF1aXJlcyBhIHdyYXBwZXIgZWxlbWVudCBpbiBJRQoJCXN1cHBvcnQuaHRtbFNlcmlhbGl6ZSA9ICEhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAibGluayIgKS5sZW5ndGg7CgoJCS8vIE1ha2VzIHN1cmUgY2xvbmluZyBhbiBodG1sNSBlbGVtZW50IGRvZXMgbm90IGNhdXNlIHByb2JsZW1zCgkJLy8gV2hlcmUgb3V0ZXJIVE1MIGlzIHVuZGVmaW5lZCwgdGhpcyBzdGlsbCB3b3JrcwoJCXN1cHBvcnQuaHRtbDVDbG9uZSA9CgkJCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJuYXYiICkuY2xvbmVOb2RlKCB0cnVlICkub3V0ZXJIVE1MICE9PSAiPDpuYXY+PC86bmF2PiI7CgoJCS8vIENoZWNrIGlmIGEgZGlzY29ubmVjdGVkIGNoZWNrYm94IHdpbGwgcmV0YWluIGl0cyBjaGVja2VkCgkJLy8gdmFsdWUgb2YgdHJ1ZSBhZnRlciBhcHBlbmRlZCB0byB0aGUgRE9NIChJRTYvNykKCQlpbnB1dC50eXBlID0gImNoZWNrYm94IjsKCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQlmcmFnbWVudC5hcHBlbmRDaGlsZCggaW5wdXQgKTsKCQlzdXBwb3J0LmFwcGVuZENoZWNrZWQgPSBpbnB1dC5jaGVja2VkOwoKCQkvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZAoJCS8vIFN1cHBvcnQ6IElFNi1JRTExKwoJCWRpdi5pbm5lckhUTUwgPSAiPHRleHRhcmVhPng8L3RleHRhcmVhPiI7CgkJc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7CgoJCS8vICMxMTIxNyAtIFdlYktpdCBsb3NlcyBjaGVjayB3aGVuIHRoZSBuYW1lIGlzIGFmdGVyIHRoZSBjaGVja2VkIGF0dHJpYnV0ZQoJCWZyYWdtZW50LmFwcGVuZENoaWxkKCBkaXYgKTsKCgkJLy8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKQoJCS8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKQoJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggInR5cGUiLCAicmFkaW8iICk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCAiY2hlY2tlZCIsICJjaGVja2VkIiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggIm5hbWUiLCAidCIgKTsKCgkJZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApOwoKCQkvLyBTdXBwb3J0OiBTYWZhcmkgNS4xLCBpT1MgNS4xLCBBbmRyb2lkIDQueCwgQW5kcm9pZCAyLjMKCQkvLyBvbGQgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzCgkJc3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkOwoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJLy8gQ2xvbmVkIGVsZW1lbnRzIGtlZXAgYXR0YWNoRXZlbnQgaGFuZGxlcnMsIHdlIHVzZSBhZGRFdmVudExpc3RlbmVyIG9uIElFOSsKCQlzdXBwb3J0Lm5vQ2xvbmVFdmVudCA9ICEhZGl2LmFkZEV2ZW50TGlzdGVuZXI7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBTaW5jZSBhdHRyaWJ1dGVzIGFuZCBwcm9wZXJ0aWVzIGFyZSB0aGUgc2FtZSBpbiBJRSwKCQkvLyBjbGVhbkRhdGEgbXVzdCBzZXQgcHJvcGVydGllcyB0byB1bmRlZmluZWQgcmF0aGVyIHRoYW4gdXNlIHJlbW92ZUF0dHJpYnV0ZQoJCWRpdlsgalF1ZXJ5LmV4cGFuZG8gXSA9IDE7CgkJc3VwcG9ydC5hdHRyaWJ1dGVzID0gIWRpdi5nZXRBdHRyaWJ1dGUoIGpRdWVyeS5leHBhbmRvICk7Cgl9ICkoKTsKCgoJLy8gV2UgaGF2ZSB0byBjbG9zZSB0aGVzZSB0YWdzIHRvIHN1cHBvcnQgWEhUTUwgKCMxMzIwMCkKCXZhciB3cmFwTWFwID0gewoJCW9wdGlvbjogWyAxLCAiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCgkJbGVnZW5kOiBbIDEsICI8ZmllbGRzZXQ+IiwgIjwvZmllbGRzZXQ+IiBdLAoJCWFyZWE6IFsgMSwgIjxtYXA+IiwgIjwvbWFwPiIgXSwKCgkJLy8gU3VwcG9ydDogSUU4CgkJcGFyYW06IFsgMSwgIjxvYmplY3Q+IiwgIjwvb2JqZWN0PiIgXSwKCQl0aGVhZDogWyAxLCAiPHRhYmxlPiIsICI8L3RhYmxlPiIgXSwKCQl0cjogWyAyLCAiPHRhYmxlPjx0Ym9keT4iLCAiPC90Ym9keT48L3RhYmxlPiIgXSwKCQljb2w6IFsgMiwgIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iIF0sCgkJdGQ6IFsgMywgIjx0YWJsZT48dGJvZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCgoJCS8vIElFNi04IGNhbid0IHNlcmlhbGl6ZSBsaW5rLCBzY3JpcHQsIHN0eWxlLCBvciBhbnkgaHRtbDUgKE5vU2NvcGUpIHRhZ3MsCgkJLy8gdW5sZXNzIHdyYXBwZWQgaW4gYSBkaXYgd2l0aCBub24tYnJlYWtpbmcgY2hhcmFjdGVycyBpbiBmcm9udCBvZiBpdC4KCQlfZGVmYXVsdDogc3VwcG9ydC5odG1sU2VyaWFsaXplID8gWyAwLCAiIiwgIiIgXSA6IFsgMSwgIlg8ZGl2PiIsICI8L2Rpdj4iIF0KCX07CgoJLy8gU3VwcG9ydDogSUU4LUlFOQoJd3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uOwoKCXdyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7Cgl3cmFwTWFwLnRoID0gd3JhcE1hcC50ZDsKCgoJZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7CgkJdmFyIGVsZW1zLCBlbGVtLAoJCQlpID0gMCwKCQkJZm91bmQgPSB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgPwoJCQkJY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8ICIqIiApIDoKCQkJCXR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09ICJ1bmRlZmluZWQiID8KCQkJCQljb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCAiKiIgKSA6CgkJCQkJdW5kZWZpbmVkOwoKCQlpZiAoICFmb3VuZCApIHsKCQkJZm9yICggZm91bmQgPSBbXSwgZWxlbXMgPSBjb250ZXh0LmNoaWxkTm9kZXMgfHwgY29udGV4dDsKCQkJCSggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOwoJCQkJaSsrCgkJCSkgewoJCQkJaWYgKCAhdGFnIHx8IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgdGFnICkgKSB7CgkJCQkJZm91bmQucHVzaCggZWxlbSApOwoJCQkJfSBlbHNlIHsKCQkJCQlqUXVlcnkubWVyZ2UoIGZvdW5kLCBnZXRBbGwoIGVsZW0sIHRhZyApICk7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/CgkJCWpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIGZvdW5kICkgOgoJCQlmb3VuZDsKCX0KCgoJLy8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkCglmdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7CgkJdmFyIGVsZW0sCgkJCWkgPSAwOwoJCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJalF1ZXJ5Ll9kYXRhKAoJCQkJZWxlbSwKCQkJCSJnbG9iYWxFdmFsIiwKCQkJCSFyZWZFbGVtZW50cyB8fCBqUXVlcnkuX2RhdGEoIHJlZkVsZW1lbnRzWyBpIF0sICJnbG9iYWxFdmFsIiApCgkJCSk7CgkJfQoJfQoKCgl2YXIgcmh0bWwgPSAvPHwmIz9cdys7LywKCQlydGJvZHkgPSAvPHRib2R5L2k7CgoJZnVuY3Rpb24gZml4RGVmYXVsdENoZWNrZWQoIGVsZW0gKSB7CgkJaWYgKCByY2hlY2thYmxlVHlwZS50ZXN0KCBlbGVtLnR5cGUgKSApIHsKCQkJZWxlbS5kZWZhdWx0Q2hlY2tlZCA9IGVsZW0uY2hlY2tlZDsKCQl9Cgl9CgoJZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHsKCQl2YXIgaiwgZWxlbSwgY29udGFpbnMsCgkJCXRtcCwgdGFnLCB0Ym9keSwgd3JhcCwKCQkJbCA9IGVsZW1zLmxlbmd0aCwKCgkJCS8vIEVuc3VyZSBhIHNhZmUgZnJhZ21lbnQKCQkJc2FmZSA9IGNyZWF0ZVNhZmVGcmFnbWVudCggY29udGV4dCApLAoKCQkJbm9kZXMgPSBbXSwKCQkJaSA9IDA7CgoJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJZWxlbSA9IGVsZW1zWyBpIF07CgoJCQlpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHsKCgkJCQkvLyBBZGQgbm9kZXMgZGlyZWN0bHkKCQkJCWlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gIm9iamVjdCIgKSB7CgkJCQkJalF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApOwoKCQkJCS8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZQoJCQkJfSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHsKCQkJCQlub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTsKCgkJCQkvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXMKCQkJCX0gZWxzZSB7CgkJCQkJdG1wID0gdG1wIHx8IHNhZmUuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCQkJCQkvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uCgkJCQkJdGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyAiIiwgIiIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTsKCQkJCQl3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDsKCgkJCQkJdG1wLmlubmVySFRNTCA9IHdyYXBbIDEgXSArIGpRdWVyeS5odG1sUHJlZmlsdGVyKCBlbGVtICkgKyB3cmFwWyAyIF07CgoJCQkJCS8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudAoJCQkJCWogPSB3cmFwWyAwIF07CgkJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJCXRtcCA9IHRtcC5sYXN0Q2hpbGQ7CgkJCQkJfQoKCQkJCQkvLyBNYW51YWxseSBhZGQgbGVhZGluZyB3aGl0ZXNwYWNlIHJlbW92ZWQgYnkgSUUKCQkJCQlpZiAoICFzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlICYmIHJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCBlbGVtICkgKSB7CgkJCQkJCW5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIHJsZWFkaW5nV2hpdGVzcGFjZS5leGVjKCBlbGVtIClbIDAgXSApICk7CgkJCQkJfQoKCQkJCQkvLyBSZW1vdmUgSUUncyBhdXRvaW5zZXJ0ZWQgPHRib2R5PiBmcm9tIHRhYmxlIGZyYWdtZW50cwoJCQkJCWlmICggIXN1cHBvcnQudGJvZHkgKSB7CgoJCQkJCQkvLyBTdHJpbmcgd2FzIGEgPHRhYmxlPiwgKm1heSogaGF2ZSBzcHVyaW91cyA8dGJvZHk+CgkJCQkJCWVsZW0g", "base64"));
  res.write(new Buffer("PSB0YWcgPT09ICJ0YWJsZSIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQkJdG1wLmZpcnN0Q2hpbGQgOgoKCQkJCQkJCS8vIFN0cmluZyB3YXMgYSBiYXJlIDx0aGVhZD4gb3IgPHRmb290PgoJCQkJCQkJd3JhcFsgMSBdID09PSAiPHRhYmxlPiIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQkJCXRtcCA6CgkJCQkJCQkJMDsKCgkJCQkJCWogPSBlbGVtICYmIGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7CgkJCQkJCXdoaWxlICggai0tICkgewoJCQkJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoICggdGJvZHkgPSBlbGVtLmNoaWxkTm9kZXNbIGogXSApLCAidGJvZHkiICkgJiYKCQkJCQkJCQkhdGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggKSB7CgoJCQkJCQkJCWVsZW0ucmVtb3ZlQ2hpbGQoIHRib2R5ICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7CgoJCQkJCS8vIEZpeCAjMTIzOTIgZm9yIFdlYktpdCBhbmQgSUUgPiA5CgkJCQkJdG1wLnRleHRDb250ZW50ID0gIiI7CgoJCQkJCS8vIEZpeCAjMTIzOTIgZm9yIG9sZElFCgkJCQkJd2hpbGUgKCB0bXAuZmlyc3RDaGlsZCApIHsKCQkJCQkJdG1wLnJlbW92ZUNoaWxkKCB0bXAuZmlyc3RDaGlsZCApOwoJCQkJCX0KCgkJCQkJLy8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXIgZm9yIHByb3BlciBjbGVhbnVwCgkJCQkJdG1wID0gc2FmZS5sYXN0Q2hpbGQ7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEZpeCAjMTEzNTY6IENsZWFyIGVsZW1lbnRzIGZyb20gZnJhZ21lbnQKCQlpZiAoIHRtcCApIHsKCQkJc2FmZS5yZW1vdmVDaGlsZCggdG1wICk7CgkJfQoKCQkvLyBSZXNldCBkZWZhdWx0Q2hlY2tlZCBmb3IgYW55IHJhZGlvcyBhbmQgY2hlY2tib3hlcwoJCS8vIGFib3V0IHRvIGJlIGFwcGVuZGVkIHRvIHRoZSBET00gaW4gSUUgNi83ICgjODA2MCkKCQlpZiAoICFzdXBwb3J0LmFwcGVuZENoZWNrZWQgKSB7CgkJCWpRdWVyeS5ncmVwKCBnZXRBbGwoIG5vZGVzLCAiaW5wdXQiICksIGZpeERlZmF1bHRDaGVja2VkICk7CgkJfQoKCQlpID0gMDsKCQl3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkgewoKCQkJLy8gU2tpcCBlbGVtZW50cyBhbHJlYWR5IGluIHRoZSBjb250ZXh0IGNvbGxlY3Rpb24gKHRyYWMtNDA4NykKCQkJaWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7CgkJCQlpZiAoIGlnbm9yZWQgKSB7CgkJCQkJaWdub3JlZC5wdXNoKCBlbGVtICk7CgkJCQl9CgoJCQkJY29udGludWU7CgkJCX0KCgkJCWNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTsKCgkJCS8vIEFwcGVuZCB0byBmcmFnbWVudAoJCQl0bXAgPSBnZXRBbGwoIHNhZmUuYXBwZW5kQ2hpbGQoIGVsZW0=", "base64"));
  res.write(new Buffer("ICksICJzY3JpcHQiICk7CgoJCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJCWlmICggY29udGFpbnMgKSB7CgkJCQlzZXRHbG9iYWxFdmFsKCB0bXAgKTsKCQkJfQoKCQkJLy8gQ2FwdHVyZSBleGVjdXRhYmxlcwoJCQlpZiAoIHNjcmlwdHMgKSB7CgkJCQlqID0gMDsKCQkJCXdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkgewoJCQkJCWlmICggcnNjcmlwdFR5cGUudGVzdCggZWxlbS50eXBlIHx8ICIiICkgKSB7CgkJCQkJCXNjcmlwdHMucHVzaCggZWxlbSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJdG1wID0gbnVsbDsKCgkJcmV0dXJuIHNhZmU7Cgl9CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIGksIGV2ZW50TmFtZSwKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCgkJLy8gU3VwcG9ydDogSUU8OSAobGFjayBzdWJtaXQvY2hhbmdlIGJ1YmJsZSksIEZpcmVmb3ggKGxhY2sgZm9jdXMoaW4gfCBvdXQpIGV2ZW50cykKCQlmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCBjaGFuZ2U6IHRydWUsIGZvY3VzaW46IHRydWUgfSApIHsKCQkJZXZlbnROYW1lID0gIm9uIiArIGk7CgoJCQlpZiAoICEoIHN1cHBvcnRbIGkgXSA9IGV2ZW50TmFtZSBpbiB3aW5kb3cgKSApIHsKCgkJCQkvLyBCZXdhcmUgb2YgQ1NQIHJlc3RyaWN0aW9ucyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vU2VjdXJpdHkvQ1NQKQoJCQkJZGl2LnNldEF0dHJpYnV0ZSggZXZlbnROYW1lLCAidCIgKTsKCQkJCXN1cHBvcnRbIGkgXSA9IGRpdi5hdHRyaWJ1dGVzWyBldmVudE5hbWUgXS5leHBhbmRvID09PSBmYWxzZTsKCQkJfQoJCX0KCgkJLy8gTnVsbCBlbGVtZW50cyB0byBhdm9pZCBsZWFrcyBpbiBJRS4KCQlkaXYgPSBudWxsOwoJfSApKCk7CgoKCXZhciByZm9ybUVsZW1zID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLAoJCXJrZXlFdmVudCA9IC9ea2V5LywKCQlybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLywKCQlyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLywKCQlydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlwuKC4rKXwpLzsKCglmdW5jdGlvbiByZXR1cm5UcnVlKCkgewoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIHJldHVybkZhbHNlKCkgewoJCXJldHVybiBmYWxzZTsKCX0KCgkvLyBTdXBwb3J0OiBJRTkKCS8vIFNlZSAjMTMzOTMgZm9yIG1vcmUgaW5mbwoJZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7CgkJdHJ5IHsKCQkJcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CgkJfSBjYXRjaCAoIGVyciApIHsgfQoJfQoKCWZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7CgkJdmFyIG9yaWdGbiwgdHlwZTsKCgkJLy8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzCgkJaWYgKCB0eXBlb2YgdHlwZXMgPT09ICJvYmplY3QiICkgewoKCQkJLy8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhICkKCQkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09ICJzdHJpbmciICkgewoKCQkJCS8vICggdHlwZXMtT2JqZWN0LCBkYXRhICkKCQkJCWRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yOwoJCQkJc2VsZWN0b3IgPSB1bmRlZmluZWQ7CgkJCX0KCQkJZm9yICggdHlwZSBpbiB0eXBlcyApIHsKCQkJCW9uKCBlbGVtLCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7CgkJCX0KCQkJcmV0dXJuIGVsZW07CgkJfQoKCQlpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkgewoKCQkJLy8gKCB0eXBlcywgZm4gKQoJCQlmbiA9IHNlbGVjdG9yOwoJCQlkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7CgkJfSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHsKCQkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICkgewoKCQkJCS8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApCgkJCQlmbiA9IGRhdGE7CgkJCQlkYXRhID0gdW5kZWZpbmVkOwoJCQl9IGVsc2UgewoKCQkJCS8vICggdHlwZXMsIGRhdGEsIGZuICkKCQkJCWZuID0gZGF0YTsKCQkJCWRhdGEgPSBzZWxlY3RvcjsKCQkJCXNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCQl9CgkJfQoJCWlmICggZm4gPT09IGZhbHNlICkgewoJCQlmbiA9IHJldHVybkZhbHNlOwoJCX0gZWxzZSBpZiAoICFmbiApIHsKCQkJcmV0dXJuIGVsZW07CgkJfQoKCQlpZiAoIG9uZSA9PT0gMSApIHsKCQkJb3JpZ0ZuID0gZm47CgkJCWZuID0gZnVuY3Rpb24oIGV2ZW50ICkgewoKCQkJCS8vIENhbiB1c2UgYW4gZW1wdHkgc2V0LCBzaW5jZSBldmVudCBjb250YWlucyB0aGUgaW5mbwoJCQkJalF1ZXJ5KCkub2ZmKCBldmVudCApOwoJCQkJcmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCX07CgoJCQkvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGbgoJCQlmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTsKCQl9CgkJcmV0dXJuIGVsZW0uZWFjaCggZnVuY3Rpb24oKSB7CgkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTsKCQl9ICk7Cgl9CgoJLyoKCSAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS4KCSAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuCgkgKi8KCWpRdWVyeS5ldmVudCA9IHsKCgkJZ2xvYmFsOiB7fSwKCgkJYWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkgewoJCQl2YXIgdG1wLCBldmVudHMsIHQsIGhhbmRsZU9iakluLAoJCQkJc3BlY2lhbCwgZXZlbnRIYW5kbGUsIGhhbmRsZU9iaiwKCQkJCWhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSwKCQkJCWVsZW1EYXRhID0galF1ZXJ5Ll9kYXRhKCBlbGVtICk7CgoJCQkvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKQoJCQlpZiAoICFlbGVtRGF0YSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyCgkJCWlmICggaGFuZGxlci5oYW5kbGVyICkgewoJCQkJaGFuZGxlT2JqSW4gPSBoYW5kbGVyOwoJCQkJaGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7CgkJCQlzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yOwoJCQl9CgoJCQkvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXIKCQkJaWYgKCAhaGFuZGxlci5ndWlkICkgewoJCQkJaGFuZGxlci5ndWlkID0galF1ZXJ5Lmd1aWQrKzsKCQkJfQoKCQkJLy8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdAoJCQlpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkgewoJCQkJZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307CgkJCX0KCQkJaWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkgewoJCQkJZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHsKCgkJCQkJLy8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmQKCQkJCQkvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkCgkJCQkJcmV0dXJuIHR5cGVvZiBqUXVlcnkgIT09ICJ1bmRlZmluZWQiICYmCgkJCQkJCSggIWUgfHwgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCAhPT0gZS50eXBlICkgPwoJCQkJCQlqUXVlcnkuZXZlbnQuZGlzcGF0Y2guYXBwbHkoIGV2ZW50SGFuZGxlLmVsZW0sIGFyZ3VtZW50cyApIDoKCQkJCQkJdW5kZWZpbmVkOwoJCQkJfTsKCgkJCQkvLyBBZGQgZWxlbSBhcyBhIHByb3BlcnR5IG9mIHRoZSBoYW5kbGUgZm4gdG8gcHJldmVudCBhIG1lbW9yeSBsZWFrCgkJCQkvLyB3aXRoIElFIG5vbi1uYXRpdmUgZXZlbnRzCgkJCQlldmVudEhhbmRsZS5lbGVtID0gZWxlbTsKCQkJfQoKCQkJLy8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZQoJCQl0eXBlcyA9ICggdHlwZXMgfHwgIiIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyAiIiBdOwoJCQl0ID0gdHlwZXMubGVuZ3RoOwoJCQl3aGlsZSAoIHQtLSApIHsKCQkJCXRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTsKCQkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQkJbmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgIiIgKS5zcGxpdCggIi4iICkuc29ydCgpOwoKCQkJCS8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVycwoJCQkJaWYgKCAhdHlwZSApIHsKCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQkvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGUKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoKCQkJCS8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZQoJCQkJdHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlOwoKCQkJCS8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGUKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoKCQkJCS8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzCgkJCQloYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7CgkJCQkJdHlwZTogdHlwZSwKCQkJCQlvcmlnVHlwZTogb3JpZ1R5cGUsCgkJCQkJZGF0YTogZGF0YSwKCQkJCQloYW5kbGVyOiBoYW5kbGVyLAoJCQkJCWd1aWQ6IGhhbmRsZXIuZ3VpZCwKCQkJCQlzZWxlY3Rvcjogc2VsZWN0b3IsCgkJCQkJbmVlZHNDb250ZXh0OiBzZWxlY3RvciAmJiBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSwKCQkJCQluYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggIi4iICkKCQkJCX0sIGhhbmRsZU9iakluICk7CgoJCQkJLy8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3QKCQkJCWlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkgewoJCQkJCWhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTsKCQkJCQloYW5kbGVycy5kZWxlZ2F0ZUNvdW50ID0gMDsKCgkJCQkJLy8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lci9hdHRhY2hFdmVudCBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlCgkJCQkJaWYgKCAhc3BlY2lhbC5zZXR1cCB8fAoJCQkJCQlzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkgewoKCQkJCQkJLy8gQmluZCB0aGUgZ2xvYmFsIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGVsZW1lbnQKCQkJCQkJaWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCQkJCQllbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlLCBmYWxzZSApOwoKCQkJCQkJfSBlbHNlIGlmICggZWxlbS5hdHRhY2hFdmVudCApIHsKCQkJCQkJCWVsZW0uYXR0YWNoRXZlbnQoICJvbiIgKyB0eXBlLCBldmVudEhhbmRsZSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCWlmICggc3BlY2lhbC5hZGQgKSB7CgkJCQkJc3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7CgoJCQkJCWlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7CgkJCQkJCWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250CgkJCQlpZiAoIHNlbGVjdG9yICkgewoJCQkJCWhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTsKCQkJCX0gZWxzZSB7CgkJCQkJaGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7CgkJCQl9CgoJCQkJLy8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvbgoJCQkJalF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTsKCQkJfQoKCQkJLy8gTnVsbGlmeSBlbGVtIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzIGluIElFCgkJCWVsZW0gPSBudWxsOwoJCX0sCgoJCS8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudAoJCXJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7CgkJCXZhciBqLCBoYW5kbGVPYmosIHRtcCwKCQkJCW9yaWdDb3VudCwgdCwgZXZlbnRzLAoJCQkJc3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsCgkJCQluYW1lc3BhY2VzLCBvcmlnVHlwZSwKCQkJCWVsZW1EYXRhID0galF1ZXJ5Lmhhc0RhdGEoIGVsZW0gKSAmJiBqUXVlcnkuX2RhdGEoIGVsZW0gKTsKCgkJCWlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBPbmNlIGZvciBlYWNoIHR5cGUubmFtZXNwYWNlIGluIHR5cGVzOyB0eXBlIG1heSBiZSBvbWl0dGVkCgkJCXR5cGVzID0gKCB0eXBlcyB8fCAiIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbICIiIF07CgkJCXQgPSB0eXBlcy5sZW5ndGg7CgkJCXdoaWxlICggdC0tICkgewoJCQkJdG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdOwoJCQkJdHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07CgkJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkJLy8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50CgkJCQlpZiAoICF0eXBlICkgewoJCQkJCWZvciAoIHR5cGUgaW4gZXZlbnRzICkgewoJCQkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTsKCQkJCQl9CgkJCQkJY29udGludWU7CgkJCQl9CgoJCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgkJCQl0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7CgkJCQloYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdOwoJCQkJdG1wID0gdG1wWyAyIF0gJiYKCQkJCQluZXcgUmVnRXhwKCAiKF58XFwuKSIgKyBuYW1lc3BhY2VzLmpvaW4oICJcXC4oPzouKlxcLnwpIiApICsgIihcXC58JCkiICk7CgoJCQkJLy8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50cwoJCQkJb3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDsKCQkJCXdoaWxlICggai0tICkgewoJCQkJCWhhbmRsZU9iaiA9IGhhbmRsZXJzWyBqIF07CgoJCQkJCWlmICggKCBtYXBwZWRUeXBlcyB8fCBvcmlnVHlwZSA9PT0gaGFuZGxlT2JqLm9yaWdUeXBlICkgJiYKCQkJCQkJKCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiYKCQkJCQkJKCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJgoJCQkJCQkoICFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gaGFuZGxlT2JqLnNlbGVjdG9yIHx8CgkJCQkJCQlzZWxlY3RvciA9PT0gIioqIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHsKCQkJCQkJaGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7CgoJCQkJCQlpZiAoIGhhbmRsZU9iai5zZWxlY3RvciApIHsKCQkJCQkJCWhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTsKCQkJCQkJfQoJCQkJCQlpZiAoIHNwZWNpYWwucmVtb3ZlICkgewoJCQkJCQkJc3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJLy8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdAoJCQkJLy8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpCgkJCQlpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkgewoJCQkJCWlmICggIXNwZWNpYWwudGVhcmRvd24gfHwKCQkJCQkJc3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7CgoJCQkJCQlqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApOwoJCQkJCX0KCgkJCQkJZGVsZXRlIGV2ZW50c1sgdHlwZSBdOwoJCQkJfQoJCQl9CgoJCQkvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZAoJCQlpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHsKCQkJCWRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7CgoJCQkJLy8gcmVtb3ZlRGF0YSBhbHNvIGNoZWNrcyBmb3IgZW1wdGluZXNzIGFuZCBjbGVhcnMgdGhlIGV4cGFuZG8gaWYgZW1wdHkKCQkJCS8vIHNvIHVzZSBpdCBpbnN0ZWFkIG9mIGRlbGV0ZQoJCQkJalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCAiZXZlbnRzIiApOwoJCQl9CgkJfSwKCgkJdHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7CgkJCXZhciBoYW5kbGUsIG9udHlwZSwgY3VyLAoJCQkJYnViYmxlVHlwZSwgc3BlY2lhbCwgdG1wLCBpLAoJCQkJZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sCgkJCQl0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCAidHlwZSIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCwKCQkJCW5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsICJuYW1lc3BhY2UiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoICIuIiApIDogW107CgoJCQljdXIgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDsKCgkJCS8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzCgkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3cKCQkJaWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpZiAoIHR5cGUuaW5kZXhPZiggIi4iICkgPiAtMSApIHsKCgkJCQkvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpCgkJCQluYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggIi4iICk7CgkJCQl0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpOwoJCQkJbmFtZXNwYWNlcy5zb3J0KCk7CgkJCX0KCQkJb250eXBlID0gdHlwZS5pbmRleE9mKCAiOiIgKSA8IDAgJiYgIm9uIiArIHR5cGU7CgoJCQkvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmcKCQkJZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/CgkJCQlldmVudCA6CgkJCQluZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09ICJvYmplY3QiICYmIGV2ZW50ICk7CgoJCQkvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpCgkJCWV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzOwoJCQlldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oICIuIiApOwoJCQlldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID8KCQkJCW5ldyBSZWdFeHAoICIoXnxcXC4pIiArIG5hbWVzcGFjZXMuam9pbiggIlxcLig/Oi4qXFwufCkiICkgKyAiKFxcLnwkKSIgKSA6CgkJCQludWxsOwoKCQkJLy8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkCgkJCWV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDsKCQkJaWYgKCAhZXZlbnQudGFyZ2V0ICkgewoJCQkJZXZlbnQudGFyZ2V0ID0gZWxlbTsKCQkJfQoKCQkJLy8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdAoJCQlkYXRhID0gZGF0YSA9PSBudWxsID8KCQkJCVsgZXZlbnQgXSA6CgkJCQlqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTsKCgkJCS8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXMKCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgkJCWlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSkKCQkJLy8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNCkKCQkJaWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHsKCgkJCQlidWJibGVUeXBlID0gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgfHwgdHlwZTsKCQkJCWlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7CgkJCQkJY3VyID0gY3VyLnBhcmVudE5vZGU7CgkJCQl9CgkJCQlmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgkJCQkJZXZlbnRQYXRoLnB1c2goIGN1ciApOwoJCQkJCXRtcCA9IGN1cjsKCQkJCX0KCgkJCQkvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSkKCQkJCWlmICggdG1wID09PSAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApICkgewoJCQkJCWV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTsKCQkJCX0KCQkJfQoKCQkJLy8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aAoJCQlpID0gMDsKCQkJd2hpbGUgKCAoIGN1ciA9IGV2ZW50UGF0aFsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCgkJCQlldmVudC50eXBlID0gaSA+IDEgPwoJCQkJCWJ1YmJsZVR5cGUgOgoJCQkJCXNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTsKCgkJCQkvLyBqUXVlcnkgaGFuZGxlcgoJCQkJaGFuZGxlID0gKCBqUXVlcnkuX2RhdGEoIGN1ciwgImV2ZW50cyIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiYKCQkJCQlqUXVlcnkuX2RhdGEoIGN1ciwgImhhbmRsZSIgKTsKCgkJCQlpZiAoIGhhbmRsZSApIHsKCQkJCQloYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApOwoJCQkJfQoKCQkJCS8vIE5hdGl2ZSBoYW5kbGVyCgkJCQloYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTsKCQkJCWlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBhY2NlcHREYXRhKCBjdXIgKSApIHsKCQkJCQlldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApOwoJCQkJCWlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHsKCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJZXZlbnQudHlwZSA9IHR5cGU7CgoJCQkvLyBJZiBub2JvZHkgcHJldmVudGVkIHRoZSBkZWZhdWx0IGFjdGlvbiwgZG8gaXQgbm93CgkJCWlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7CgoJCQkJaWYgKAoJCQkJCSggIXNwZWNpYWwuX2RlZmF1bHQgfHwKCQkJCQkgc3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlCgkJCQkJKSAmJiBhY2NlcHREYXRhKCBlbGVtICkKCQkJCSkgewoKCQkJCQkvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuCgkJCQkJLy8gQ2FuJ3QgdXNlIGFuIC5pc0Z1bmN0aW9uKCkgY2hlY2sgaGVyZSBiZWNhdXNlIElFNi83IGZhaWxzIHRoYXQgdGVzdC4KCQkJCQkvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApCgkJCQkJaWYgKCBvbnR5cGUgJiYgZWxlbVsgdHlwZSBdICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHsKCgkJCQkJCS8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2QKCQkJCQkJdG1wID0gZWxlbVsgb250eXBlIF07CgoJCQkJCQlpZiAoIHRtcCApIHsKCQkJCQkJCWVsZW1bIG9udHlwZSBdID0gbnVsbDsKCQkJCQkJfQoKCQkJCQkJLy8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmUKCQkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7CgkJCQkJCXRyeSB7CgkJCQkJCQllbGVtWyB0eXBlIF0oKTsKCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJCQkJLy8gSUU8OSBkaWVzIG9uIGZvY3VzL2JsdXIgdG8gaGlkZGVuIGVsZW1lbnQgKCMxNDg2LCMxMjUxOCkKCQkJCQkJCS8vIG9ubHkgcmVwcm9kdWNpYmxlIG9uIHdpblhQIElFOCBuYXRpdmUsIG5vdCBJRTkgaW4gSUU4IG1vZGUKCQkJCQkJfQoJCQkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkOwoKCQkJCQkJaWYgKCB0bXAgKSB7CgkJCQkJCQllbGVtWyBvbnR5cGUgXSA9IHRtcDsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGV2ZW50LnJlc3VsdDsKCQl9LAoKCQlkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkgewoKCQkJLy8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0CgkJCWV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKTsKCgkJCXZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaiwKCQkJCWhhbmRsZXJRdWV1ZSA9IFtdLAoJCQkJYXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLAoJCQkJaGFuZGxlcnMgPSAoIGpRdWVyeS5fZGF0YSggdGhpcywgImV2ZW50cyIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gfHwgW10sCgkJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTsKCgkJCS8vIFVzZSB0aGUgZml4LWVkIGpRdWVyeS5FdmVudCByYXRoZXIgdGhhbiB0aGUgKHJlYWQtb25seSkgbmF0aXZlIGV2ZW50CgkJCWFyZ3NbIDAgXSA9IGV2ZW50OwoJCQlldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7CgoJCQkvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkCgkJCWlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBEZXRlcm1pbmUgaGFuZGxlcnMKCQkJaGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApOwoKCQkJLy8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXMKCQkJaSA9IDA7CgkJCXdoaWxlICggKCBtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkgewoJCQkJZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTsKCgkJCQlqID0gMDsKCQkJCXdoaWxlICggKCBoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSApICYmCgkJCQkJIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQkJCS8vIFRyaWdnZXJlZCBldmVudCBtdXN0IGVpdGhlciAxKSBoYXZlIG5vIG5hbWVzcGFjZSwgb3IgMikgaGF2ZSBuYW1lc3BhY2UocykKCQkJCQkvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS4KCQkJCQlpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgewoKCQkJCQkJZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqOwoJCQkJCQlldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7CgoJCQkJCQlyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8CgkJCQkJCQloYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTsKCgkJCQkJCWlmICggcmV0ICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJCQlpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkgewoJCQkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJCQkJZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIENhbGwgdGhlIHBvc3REaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUKCQkJaWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHsKCQkJCXNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7CgkJCX0KCgkJCXJldHVybiBldmVudC5yZXN1bHQ7CgkJfSwKCgkJaGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7CgkJCXZhciBpLCBtYXRjaGVzLCBzZWwsIGhhbmRsZU9iaiwKCQkJCWhhbmRsZXJRdWV1ZSA9IFtdLAoJCQkJZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsCgkJCQljdXIgPSBldmVudC50YXJnZXQ7CgoJCQkvLyBTdXBwb3J0IChhdCBsZWFzdCk6IENocm9tZSwgSUU5CgkJCS8vIEZpbmQgZGVsZWdhdGUgaGFuZGxlcnMKCQkJLy8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKCMxMzE4MCkKCQkJLy8KCQkJLy8gU3VwcG9ydDogRmlyZWZveDw9NDIrCgkJCS8vIEF2b2lkIG5vbi1sZWZ0LWNsaWNrIGluIEZGIGJ1dCBkb24ndCBibG9jayBJRSByYWRpbyBldmVudHMgKCMzODYxLCBnaC0yMzQzKQoJCQlpZiAoIGRlbGVnYXRlQ291bnQgJiYgY3VyLm5vZGVUeXBlICYmCgkJCQkoIGV2ZW50LnR5cGUgIT09ICJjbGljayIgfHwgaXNOYU4oIGV2ZW50LmJ1dHRvbiApIHx8IGV2ZW50LmJ1dHRvbiA8IDEgKSApIHsKCgkJCQkvKiBqc2hpbnQgZXFlcWVxOiBmYWxzZSAqLwoJCQkJZm9yICggOyBjdXIgIT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHsKCQkJCQkvKiBqc2hpbnQgZXFlcWVxOiB0cnVlICovCgoJCQkJCS8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KQoJCQkJCS8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KQoJCQkJCWlmICggY3VyLm5vZGVUeXBlID09PSAxICYmICggY3VyLmRpc2FibGVkICE9PSB0cnVlIHx8IGV2ZW50LnR5cGUgIT09ICJjbGljayIgKSApIHsKCQkJCQkJbWF0Y2hlcyA9IFtdOwoJCQkJCQlmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHsKCQkJCQkJCWhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07CgoJCQkJCQkJLy8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMykKCQkJCQkJCXNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArICIgIjsKCgkJCQkJCQlpZiAoIG1hdGNoZXNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7CgkJCQkJCQkJbWF0Y2hlc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID8KCQkJCQkJCQkJalF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPiAtMSA6CgkJCQkJCQkJCWpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7CgkJCQkJCQl9CgkJCQkJCQlpZiAoIG1hdGNoZXNbIHNlbCBdICkgewoJCQkJCQkJCW1hdGNoZXMucHVzaCggaGFuZGxlT2JqICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJaWYgKCBtYXRjaGVzLmxlbmd0aCApIHsKCQkJCQkJCWhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzCgkJCWlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHsKCQkJCWhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0gKTsKCQkJfQoKCQkJcmV0dXJuIGhhbmRsZXJRdWV1ZTsKCQl9LAoKCQlmaXg6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJaWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHsKCQkJCXJldHVybiBldmVudDsKCQkJfQoKCQkJLy8gQ3JlYXRlIGEgd3JpdGFibGUgY29weSBvZiB0aGUgZXZlbnQgb2JqZWN0IGFuZCBub3JtYWxpemUgc29tZSBwcm9wZXJ0aWVzCgkJCXZhciBpLCBwcm9wLCBjb3B5LAoJCQkJdHlwZSA9IGV2ZW50LnR5cGUsCgkJCQlvcmlnaW5hbEV2ZW50ID0gZXZlbnQsCgkJCQlmaXhIb29rID0gdGhpcy5maXhIb29rc1sgdHlwZSBdOwoKCQkJaWYgKCAhZml4SG9vayApIHsKCQkJCXRoaXMuZml4SG9va3NbIHR5cGUgXSA9IGZpeEhvb2sgPQoJCQkJCXJtb3VzZUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMubW91c2VIb29rcyA6CgkJCQkJcmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOgoJCQkJCXt9OwoJCQl9CgkJCWNvcHkgPSBmaXhIb29rLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQoIGZpeEhvb2sucHJvcHMgKSA6IHRoaXMucHJvcHM7CgoJCQlldmVudCA9IG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTsKCgkJCWkgPSBjb3B5Lmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQlwcm9wID0gY29weVsgaSBdOwoJCQkJZXZlbnRbIHByb3AgXSA9IG9yaWdpbmFsRXZlbnRbIHByb3AgXTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBGaXggdGFyZ2V0IHByb3BlcnR5ICgjMTkyNSkKCQkJaWYgKCAhZXZlbnQudGFyZ2V0ICkgewoJCQkJZXZlbnQudGFyZ2V0ID0gb3JpZ2luYWxFdmVudC5zcmNFbGVtZW50IHx8IGRvY3VtZW50OwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBTYWZhcmkgNi04KwoJCQkvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKQoJCQlpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHsKCQkJCWV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIEZvciBtb3VzZS9rZXkgZXZlbnRzLCBtZXRhS2V5PT1mYWxzZSBpZiBpdCdzIHVuZGVmaW5lZCAoIzMzNjgsICMxMTMyOCkKCQkJZXZlbnQubWV0YUtleSA9ICEhZXZlbnQubWV0YUtleTsKCgkJCXJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7CgkJfSwKCgkJLy8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQKCQlwcm9wczogKCAiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZGV0YWlsIGV2ZW50UGhhc2UgIiArCgkJCSJtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIiApLnNwbGl0KCAiICIgKSwKCgkJZml4SG9va3M6IHt9LAoKCQlrZXlIb29rczogewoJCQlwcm9wczogImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCAiICIgKSwKCQkJZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkgewoKCQkJCS8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50cwoJCQkJaWYgKCBldmVudC53aGljaCA9PSBudWxsICkgewoJCQkJCWV2ZW50LndoaWNoID0gb3JpZ2luYWwuY2hhckNvZGUgIT0gbnVsbCA/IG9yaWdpbmFsLmNoYXJDb2RlIDogb3JpZ2luYWwua2V5Q29kZTsKCQkJCX0KCgkJCQlyZXR1cm4gZXZlbnQ7CgkJCX0KCQl9LAoKCQltb3VzZUhvb2tzOiB7CgkJCXByb3BzOiAoICJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZICIgKwoJCQkJInBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiICkuc3BsaXQoICIgIiApLAoJCQlmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7CgkJCQl2YXIgYm9keSwgZXZlbnREb2MsIGRvYywKCQkJCQlidXR0b24gPSBvcmlnaW5hbC5idXR0b24sCgkJCQkJZnJvbUVsZW1lbnQgPSBvcmlnaW5hbC5mcm9tRWxlbWVudDsKCgkJCQkvLyBDYWxjdWxhdGUgcGFnZVgvWSBpZiBtaXNzaW5nIGFuZCBjbGllbnRYL1kgYXZhaWxhYmxlCgkJCQlpZiAoIGV2ZW50LnBhZ2VYID09IG51bGwgJiYgb3JpZ2luYWwuY2xpZW50WCAhPSBudWxsICkgewoJCQkJCWV2ZW50RG9jID0gZXZlbnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7CgkJCQkJZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50OwoJCQkJCWJvZHkgPSBldmVudERvYy5ib2R5OwoKCQkJCQlldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKwoJCQkJCQkoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLQoJCQkJCQkoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7CgkJCQkJZXZlbnQucGFnZVkgPSBvcmlnaW5hbC5jbGllbnRZICsKCQkJCQkJKCBkb2MgJiYgZG9jLnNjcm9sbFRvcCAgfHwgYm9keSAmJiBib2R5LnNjcm9sbFRvcCAgfHwgMCApIC0KCQkJCQkJKCBkb2MgJiYgZG9jLmNsaWVudFRvcCAgfHwgYm9keSAmJiBib2R5LmNsaWVudFRvcCAgfHwgMCApOwoJCQkJfQoKCQkJCS8vIEFkZCByZWxhdGVkVGFyZ2V0LCBpZiBuZWNlc3NhcnkKCQkJCWlmICggIWV2ZW50LnJlbGF0ZWRUYXJnZXQgJiYgZnJvbUVsZW1lbnQgKSB7CgkJCQkJZXZlbnQucmVsYXRlZFRhcmdldCA9IGZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgPwoJCQkJCQlvcmlnaW5hbC50b0VsZW1lbnQgOgoJCQkJCQlmcm9tRWxlbWVudDsKCQkJCX0KCgkJCQkvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0CgkJCQkvLyBOb3RlOiBidXR0b24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIGRvbid0IHVzZSBpdAoJCQkJaWYgKCAhZXZlbnQud2hpY2ggJiYgYnV0dG9uICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJZXZlbnQud2hpY2ggPSAoIGJ1dHRvbiAmIDEgPyAxIDogKCBidXR0b24gJiAyID8gMyA6ICggYnV0dG9uICYgNCA/IDIgOiAwICkgKSApOwoJCQkJfQoKCQkJCXJldHVybiBldmVudDsKCQkJfQoJCX0sCgoJCXNwZWNpYWw6IHsKCQkJbG9hZDogewoKCQkJCS8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWQKCQkJCW5vQnViYmxlOiB0cnVlCgkJCX0sCgkJCWZvY3VzOiB7CgoJCQkJLy8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0CgkJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIHRoaXMgIT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5mb2N1cyApIHsKCQkJCQkJdHJ5IHsKCQkJCQkJCXRoaXMuZm9jdXMoKTsKCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkJLy8gSWYgd2UgZXJyb3Igb24gZm9jdXMgdG8gaGlkZGVuIGVsZW1lbnQgKCMxNDg2LCAjMTI1MTgpLAoJCQkJCQkJLy8gbGV0IC50cmlnZ2VyKCkgcnVuIHRoZSBoYW5kbGVycwoJCQkJCQl9CgkJCQkJfQoJCQkJfSwKCQkJCWRlbGVnYXRlVHlwZTogImZvY3VzaW4iCgkJCX0sCgkJCWJsdXI6IHsKCQkJCXRyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggdGhpcyA9PT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmJsdXIgKSB7CgkJCQkJCXRoaXMuYmx1cigpOwoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfSwKCQkJCWRlbGVnYXRlVHlwZTogImZvY3Vzb3V0IgoJCQl9LAoJCQljbGljazogewoKCQkJCS8vIEZvciBjaGVja2JveCwgZmlyZSBuYXRpdmUgZXZlbnQgc28gY2hlY2tlZCBzdGF0ZSB3aWxsIGJlIHJpZ2h0CgkJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgImlucHV0IiApICYmIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiAmJiB0aGlzLmNsaWNrICkgewoJCQkJCQl0aGlzLmNsaWNrKCk7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9LAoKCQkJCS8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rcwoJCQkJX2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQlyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBldmVudC50YXJnZXQsICJhIiApOwoJCQkJfQoJCQl9LAoKCQkJYmVmb3JldW5sb2FkOiB7CgkJCQlwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHsKCgkJCQkJLy8gU3VwcG9ydDogRmlyZWZveCAyMCsKCQkJCQkvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuCgkJCQkJaWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkgewoJCQkJCQlldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgoJCS8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZQoJCXNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQgKSB7CgkJCXZhciBlID0galF1ZXJ5LmV4dGVuZCgKCQkJCW5ldyBqUXVlcnkuRXZlbnQoKSwKCQkJCWV2ZW50LAoJCQkJewoJCQkJCXR5cGU6IHR5cGUsCgkJCQkJaXNTaW11bGF0ZWQ6IHRydWUKCgkJCQkJLy8gUHJldmlvdXNseSwgYG9yaWdpbmFsRXZlbnQ6IHt9YCB3YXMgc2V0IGhlcmUsIHNvIHN0b3BQcm9wYWdhdGlvbiBjYWxsCgkJCQkJLy8gd291bGQgbm90IGJlIHRyaWdnZXJlZCBvbiBkb25vciBldmVudCwgc2luY2UgaW4gb3VyIG93bgoJCQkJCS8vIGpRdWVyeS5ldmVudC5zdG9wUHJvcGFnYXRpb24gZnVuY3Rpb24gd2UgaGFkIGEgY2hlY2sgZm9yIGV4aXN0ZW5jZSBvZgoJCQkJCS8vIG9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uIG1ldGhvZCwgc28sIGNvbnNlcXVlbnRseSBpdCB3b3VsZCBiZSBhIG5vb3AuCgkJCQkJLy8KCQkJCQkvLyBHdWFyZCBmb3Igc2ltdWxhdGVkIGV2ZW50cyB3YXMgbW92ZWQgdG8galF1ZXJ5LmV2ZW50LnN0b3BQcm9wYWdhdGlvbiBmdW5jdGlvbgoJCQkJCS8vIHNpbmNlIGBvcmlnaW5hbEV2ZW50YCBzaG91bGQgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIGV2ZW50IGZvciB0aGUKCQkJCQkvLyBjb25zdGFuY3kgd2l0aCBvdGhlciBldmVudHMgYW5kIGZvciBtb3JlIGZvY3VzZWQgbG9naWMKCQkJCX0KCQkJKTsKCgkJCWpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7CgoJCQlpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7CgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQl9CgkJfQoJfTsKCglqUXVlcnkucmVtb3ZlRXZlbnQgPSBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyID8KCQlmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkgewoKCQkJLy8gVGhpcyAiaWYiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0cwoJCQlpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHsKCQkJCWVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlICk7CgkJCX0KCQl9IDoKCQlmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkgewoJCQl2YXIgbmFtZSA9ICJvbiIgKyB0eXBlOwoKCQkJaWYgKCBlbGVtLmRldGFjaEV2ZW50ICkgewoKCQkJCS8vICM4NTQ1LCAjNzA1NCwgcHJldmVudGluZyBtZW1vcnkgbGVha3MgZm9yIGN1c3RvbSBldmVudHMgaW4gSUU2LTgKCQkJCS8vIGRldGFjaEV2ZW50IG5lZWRlZCBwcm9wZXJ0eSBvbiBlbGVtZW50LCBieSBuYW1lIG9mIHRoYXQgZXZlbnQsCgkJCQkvLyB0byBwcm9wZXJseSBleHBvc2UgaXQgdG8gR0MKCQkJCWlmICggdHlwZW9mIGVsZW1bIG5hbWUgXSA9PT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJZWxlbVsgbmFtZSBdID0gbnVsbDsKCQkJCX0KCgkJCQllbGVtLmRldGFjaEV2ZW50KCBuYW1lLCBoYW5kbGUgKTsKCQkJfQoJCX07CgoJalF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7CgoJCS8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZAoJCWlmICggISggdGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCApICkgewoJCQlyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApOwoJCX0KCgkJLy8gRXZlbnQgb2JqZWN0CgkJaWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7CgkJCXRoaXMub3JpZ2luYWxFdmVudCA9IHNyYzsKCQkJdGhpcy50eXBlID0gc3JjLnR5cGU7CgoJCQkvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZAoJCQkvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS4KCQkJdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fAoJCQkJCXNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiYKCgkJCQkJLy8gU3VwcG9ydDogSUUgPCA5LCBBbmRyb2lkIDwgNC4wCgkJCQkJc3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/CgkJCQlyZXR1cm5UcnVlIDoKCQkJCXJldHVybkZhbHNlOwoKCQkvLyBFdmVudCB0eXBlCgkJfSBlbHNlIHsKCQkJdGhpcy50eXBlID0gc3JjOwoJCX0KCgkJLy8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3QKCQlpZiAoIHByb3BzICkgewoJCQlqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApOwoJCX0KCgkJLy8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmUKCQl0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTsKCgkJLy8gTWFyayBpdCBhcyBmaXhlZAoJCXRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlOwoJfTsKCgkvLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmcKCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbAoJalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSA9IHsKCQljb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LAoJCWlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsCgkJaXNQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLAoJCWlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSwKCgkJcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgewoJCQl2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsKCgkJCXRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTsKCQkJaWYgKCAhZSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gSWYgcHJldmVudERlZmF1bHQgZXhpc3RzLCBydW4gaXQgb24gdGhlIG9yaWdpbmFsIGV2ZW50CgkJCWlmICggZS5wcmV2ZW50RGVmYXVsdCApIHsKCQkJCWUucHJldmVudERlZmF1bHQoKTsKCgkJCS8vIFN1cHBvcnQ6IElFCgkJCS8vIE90aGVyd2lzZSBzZXQgdGhlIHJldHVyblZhbHVlIHByb3BlcnR5IG9mIHRoZSBvcmlnaW5hbCBldmVudCB0byBmYWxzZQoJCQl9IGVsc2UgewoJCQkJZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoJCQl9CgkJfSwKCQlzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewoJCQl2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsKCgkJCXRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlOwoKCQkJaWYgKCAhZSB8fCB0aGlzLmlzU2ltdWxhdGVkICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBJZiBzdG9wUHJvcGFnYXRpb24gZXhpc3RzLCBydW4gaXQgb24gdGhlIG9yaWdpbmFsIGV2ZW50CgkJCWlmICggZS5zdG9wUHJvcGFnYXRpb24gKSB7CgkJCQllLnN0b3BQcm9wYWdhdGlvbigpOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRQoJCQkvLyBTZXQgdGhlIGNhbmNlbEJ1YmJsZSBwcm9wZXJ0eSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdG8gdHJ1ZQoJCQllLmNhbmNlbEJ1YmJsZSA9IHRydWU7CgkJfSwKCQlzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewoJCQl2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsKCgkJCXRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlOwoKCQkJaWYgKCBlICYmIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uICkgewoJCQkJZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKCQkJfQoKCQkJdGhpcy5zdG9wUHJvcGFnYXRpb24oKTsKCQl9Cgl9OwoKCS8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrcwoJLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS4KCS8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0CgkvLwoJLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seQoJLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6CgkvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4CgkvLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLgoJalF1ZXJ5LmVhY2goIHsKCQltb3VzZWVudGVyOiAibW91c2VvdmVyIiwKCQltb3VzZWxlYXZlOiAibW91c2VvdXQiLAoJCXBvaW50ZXJlbnRlcjogInBvaW50ZXJvdmVyIiwKCQlwb2ludGVybGVhdmU6ICJwb2ludGVyb3V0IgoJfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHsKCQlqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0gewoJCQlkZWxlZ2F0ZVR5cGU6IGZpeCwKCQkJYmluZFR5cGU6IGZpeCwKCgkJCWhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdmFyIHJldCwKCQkJCQl0YXJnZXQgPSB0aGlzLAoJCQkJCXJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LAoJCQkJCWhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajsKCgkJCQkvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LgoJCQkJLy8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3cKCQkJCWlmICggIXJlbGF0ZWQgfHwgKCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkgKSApIHsKCQkJCQlldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlOwoJCQkJCXJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQlldmVudC50eXBlID0gZml4OwoJCQkJfQoJCQkJcmV0dXJuIHJldDsKCQkJfQoJCX07Cgl9ICk7CgoJLy8gSUUgc3VibWl0IGRlbGVnYXRpb24KCWlmICggIXN1cHBvcnQuc3VibWl0ICkgewoKCQlqUXVlcnkuZXZlbnQuc3BlY2lhbC5zdWJtaXQgPSB7CgkJCXNldHVwOiBmdW5jdGlvbigpIHsKCgkJCQkvLyBPbmx5IG5lZWQgdGhpcyBmb3IgZGVsZWdhdGVkIGZvcm0gc3VibWl0IGV2ZW50cwoJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJmb3JtIiApICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCgkJCQkvLyBMYXp5LWFkZCBhIHN1Ym1pdCBoYW5kbGVyIHdoZW4gYSBkZXNjZW5kYW50IGZvcm0gbWF5IHBvdGVudGlhbGx5IGJlIHN1Ym1pdHRlZAoJCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdCIsIGZ1bmN0aW9uKCBlICkgewoKCQkJCQkvLyBOb2RlIG5hbWUgY2hlY2sgYXZvaWRzIGEgVk1MLXJlbGF0ZWQgY3Jhc2ggaW4gSUUgKCM5ODA3KQoJCQkJCXZhciBlbGVtID0gZS50YXJnZXQsCgkJCQkJCWZvcm0gPSBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJpbnB1dCIgKSB8fCBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJidXR0b24iICkgPwoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFIDw9OAoJCQkJCQkJLy8gV2UgdXNlIGpRdWVyeS5wcm9wIGluc3RlYWQgb2YgZWxlbS5mb3JtCgkJCQkJCQkvLyB0byBhbGxvdyBmaXhpbmcgdGhlIElFOCBkZWxlZ2F0ZWQgc3VibWl0IGlzc3VlIChnaC0yMzMyKQoJCQkJCQkJLy8gYnkgM3JkIHBhcnR5IHBvbHlmaWxscy93b3JrYXJvdW5kcy4KCQkJCQkJCWpRdWVyeS5wcm9wKCBlbGVtLCAiZm9ybSIgKSA6CgkJCQkJCQl1bmRlZmluZWQ7CgoJCQkJCWlmICggZm9ybSAmJiAhalF1ZXJ5Ll9kYXRhKCBmb3JtLCAic3VibWl0IiApICkgewoJCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCBmb3JtLCAic3VibWl0Ll9zdWJtaXQiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlldmVudC5fc3VibWl0QnViYmxlID0gdHJ1ZTsKCQkJCQkJfSApOwoJCQkJCQlqUXVlcnkuX2RhdGEoIGZvcm0sICJzdWJtaXQiLCB0cnVlICk7CgkJCQkJfQoJCQkJfSApOwoKCQkJCS8vIHJldHVybiB1bmRlZmluZWQgc2luY2Ugd2UgZG9uJ3QgbmVlZCBhbiBldmVudCBsaXN0ZW5lcgoJCQl9LAoKCQkJcG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkJLy8gSWYgZm9ybSB3YXMgc3VibWl0dGVkIGJ5IHRoZSB1c2VyLCBidWJibGUgdGhlIGV2ZW50IHVwIHRoZSB0cmVlCgkJCQlpZiAoIGV2ZW50Ll9zdWJtaXRCdWJibGUgKSB7CgkJCQkJZGVsZXRlIGV2ZW50Ll9zdWJtaXRCdWJibGU7CgkJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgJiYgIWV2ZW50LmlzVHJpZ2dlciApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAic3VibWl0IiwgdGhpcy5wYXJlbnROb2RlLCBldmVudCApOwoJCQkJCX0KCQkJCX0KCQkJfSwKCgkJCXRlYXJkb3duOiBmdW5jdGlvbigpIHsKCgkJCQkvLyBPbmx5IG5lZWQgdGhpcyBmb3IgZGVsZWdhdGVkIGZvcm0gc3VibWl0IGV2ZW50cwoJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJmb3JtIiApICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCgkJCQkvLyBSZW1vdmUgZGVsZWdhdGVkIGhhbmRsZXJzOyBjbGVhbkRhdGEgZXZlbnR1YWxseSByZWFwcyBzdWJtaXQgaGFuZGxlcnMgYXR0YWNoZWQgYWJvdmUKCQkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsICIuX3N1Ym1pdCIgKTsKCQkJfQoJCX07Cgl9CgoJLy8gSUUgY2hhbmdlIGRlbGVnYXRpb24gYW5kIGNoZWNrYm94L3JhZGlvIGZpeAoJaWYgKCAhc3VwcG9ydC5jaGFuZ2UgKSB7CgoJCWpRdWVyeS5ldmVudC5zcGVjaWFsLmNoYW5nZSA9IHsKCgkJCXNldHVwOiBmdW5jdGlvbigpIHsKCgkJCQlpZiAoIHJmb3JtRWxlbXMudGVzdCggdGhpcy5ub2RlTmFtZSApICkgewoKCQkJCQkvLyBJRSBkb2Vzbid0IGZpcmUgY2hhbmdlIG9uIGEgY2hlY2svcmFkaW8gdW50aWwgYmx1cjsgdHJpZ2dlciBpdCBvbiBjbGljawoJCQkJCS8vIGFmdGVyIGEgcHJvcGVydHljaGFuZ2UuIEVhdCB0aGUgYmx1ci1jaGFuZ2UgaW4gc3BlY2lhbC5jaGFuZ2UuaGFuZGxlLgoJCQkJCS8vIFRoaXMgc3RpbGwgZmlyZXMgb25jaGFuZ2UgYSBzZWNvbmQgdGltZSBmb3IgY2hlY2svcmFkaW8gYWZ0ZXIgYmx1ci4KCQkJCQlpZiAoIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiB8fCB0aGlzLg==", "base64"));
  res.write(new Buffer("dHlwZSA9PT0gInJhZGlvIiApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlpZiAoIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lID09PSAiY2hlY2tlZCIgKSB7CgkJCQkJCQkJdGhpcy5fanVzdENoYW5nZWQgPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9ICk7CgkJCQkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJjbGljay5fY2hhbmdlIiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJaWYgKCB0aGlzLl9qdXN0Q2hhbmdlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCQkJCXRoaXMuX2p1c3RDaGFuZ2VkID0gZmFsc2U7CgkJCQkJCQl9CgoJCQkJCQkJLy8gQWxsb3cgdHJpZ2dlcmVkLCBzaW11bGF0ZWQgY2hhbmdlIGV2ZW50cyAoIzExNTAwKQoJCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAiY2hhbmdlIiwgdGhpcywgZXZlbnQgKTsKCQkJCQkJfSApOwoJCQkJCX0KCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgoJCQkJLy8gRGVsZWdhdGVkIGV2ZW50OyBsYXp5LWFkZCBhIGNoYW5nZSBoYW5kbGVyIG9uIGRlc2NlbmRhbnQgaW5wdXRzCgkJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCAiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsIGZ1bmN0aW9uKCBlICkgewoJCQkJCXZhciBlbGVtID0gZS50YXJnZXQ7CgoJCQkJCWlmICggcmZvcm1FbGVtcy50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgIWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIgKSApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggZWxlbSwgImNoYW5nZS5fY2hhbmdlIiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgJiYgIWV2ZW50LmlzU2ltdWxhdGVkICYmICFldmVudC5pc1RyaWdnZXIgKSB7CgkJCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAiY2hhbmdlIiwgdGhpcy5wYXJlbnROb2RlLCBldmVudCApOwoJCQkJCQkJfQoJCQkJCQl9ICk7CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIsIHRydWUgKTsKCQkJCQl9CgkJCQl9ICk7CgkJCX0sCgoJCQloYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXZhciBlbGVtID0gZXZlbnQudGFyZ2V0OwoKCQkJCS8vIFN3YWxsb3cgbmF0aXZlIGNoYW5nZSBldmVudHMgZnJvbSBjaGVja2JveC9yYWRpbywgd2UgYWxyZWFkeSB0cmlnZ2VyZWQgdGhlbSBhYm92ZQoJCQkJaWYgKCB0aGlzICE9PSBlbGVtIHx8IGV2ZW50LmlzU2ltdWxhdGVkIHx8IGV2ZW50LmlzVHJpZ2dlciB8fAoJCQkJCSggZWxlbS50eXBlICE9PSAicmFkaW8iICYmIGVsZW0udHlwZSAhPT0gImNoZWNrYm94IiApICkgewoKCQkJCQlyZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJfQoJCQl9LAoKCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgIi5fY2hhbmdlIiApOwoKCQkJCXJldHVybiAhcmZvcm1FbGVtcy50ZXN0KCB0aGlzLm5vZGVOYW1lICk7CgkJCX0KCQl9OwoJfQoKCS8vIFN1cHBvcnQ6IEZpcmVmb3gKCS8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHMKCS8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3CgkvLwoJLy8gU3VwcG9ydDogQ2hyb21lLCBTYWZhcmkKCS8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLAoJLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyCgkvLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTcKCWlmICggIXN1cHBvcnQuZm9jdXNpbiApIHsKCQlqUXVlcnkuZWFjaCggeyBmb2N1czogImZvY3VzaW4iLCBibHVyOiAiZm9jdXNvdXQiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7CgoJCQkvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dAoJCQl2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTsKCQkJfTsKCgkJCWpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHsKCQkJCXNldHVwOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsCgkJCQkJCWF0dGFjaGVzID0galF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCApOwoKCQkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQkJZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTsKCQkJCQl9CgkJCQkJalF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7CgkJCQl9LAoJCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKCQkJCQkJYXR0YWNoZXMgPSBqUXVlcnkuX2RhdGEoIGRvYywgZml4ICkgLSAxOwoKCQkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQkJZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTsKCQkJCQkJalF1ZXJ5Ll9yZW1vdmVEYXRhKCBkb2MsIGZpeCApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWpRdWVyeS5fZGF0YSggZG9jLCBmaXgsIGF0dGFjaGVzICk7CgkJCQkJfQoJCQkJfQoJCQl9OwoJCX0gKTsKCX0KCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgoJCW9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7CgkJfSwKCQlvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTsKCQl9LAoJCW9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7CgkJCXZhciBoYW5kbGVPYmosIHR5cGU7CgkJCWlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkgewoKCQkJCS8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnQKCQkJCWhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajsKCQkJCWpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoCgkJCQkJaGFuZGxlT2JqLm5hbWVzcGFjZSA/CgkJCQkJCWhhbmRsZU9iai5vcmlnVHlwZSArICIuIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOgoJCQkJCQloYW5kbGVPYmoub3JpZ1R5cGUsCgkJCQkJaGFuZGxlT2JqLnNlbGVjdG9yLAoJCQkJCWhhbmRsZU9iai5oYW5kbGVyCgkJCQkpOwoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCQkJaWYgKCB0eXBlb2YgdHlwZXMgPT09ICJvYmplY3QiICkgewoKCQkJCS8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApCgkJCQlmb3IgKCB0eXBlIGluIHR5cGVzICkgewoJCQkJCXRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApOwoJCQkJfQoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCQkJaWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICkgewoKCQkJCS8vICggdHlwZXMgWywgZm5dICkKCQkJCWZuID0gc2VsZWN0b3I7CgkJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQkJfQoJCQlpZiAoIGZuID09PSBmYWxzZSApIHsKCQkJCWZuID0gcmV0dXJuRmFsc2U7CgkJCX0KCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7CgkJCX0gKTsKCQl9LAoKCQl0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApOwoJCQl9ICk7CgkJfSwKCQl0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7CgkJCXZhciBlbGVtID0gdGhpc1sgMCBdOwoJCQlpZiAoIGVsZW0gKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTsKCQkJfQoJCX0KCX0gKTsKCgoJdmFyIHJpbmxpbmVqUXVlcnkgPSAvIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9nLAoJCXJub3NoaW1jYWNoZSA9IG5ldyBSZWdFeHAoICI8KD86IiArIG5vZGVOYW1lcyArICIpW1xccy8+XSIsICJpIiApLAoJCXJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLAoKCQkvLyBTdXBwb3J0OiBJRSAxMC0xMSwgRWRnZSAxMDI0MCsKCQkvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLgoJCS8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvCgkJcm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksCgoJCS8vIGNoZWNrZWQ9ImNoZWNrZWQiIG9yIGNoZWNrZWQKCQlyY2hlY2tlZCA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAoJCXJzY3JpcHRUeXBlTWFza2VkID0gL150cnVlXC8oLiopLywKCQlyY2xlYW5TY3JpcHQgPSAvXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csCgkJc2FmZUZyYWdtZW50ID0gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApLAoJCWZyYWdtZW50RGl2ID0gc2FmZUZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApICk7CgoJLy8gU3VwcG9ydDogSUU8OAoJLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5CglmdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7CgkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgInRhYmxlIiApICYmCgkJCWpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCAidHIiICkgPwoKCQkJZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRib2R5IiApWyAwIF0gfHwKCQkJCWVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCAidGJvZHkiICkgKSA6CgkJCWVsZW07Cgl9CgoJLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvbgoJZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHsKCQllbGVtLnR5cGUgPSAoIGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sICJ0eXBlIiApICE9PSBudWxsICkgKyAiLyIgKyBlbGVtLnR5cGU7CgkJcmV0dXJuIGVsZW07Cgl9CglmdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkgewoJCXZhciBtYXRjaCA9IHJzY3JpcHRUeXBlTWFza2VkLmV4ZWMoIGVsZW0udHlwZSApOwoJCWlmICggbWF0Y2ggKSB7CgkJCWVsZW0udHlwZSA9IG1hdGNoWyAxIF07CgkJfSBlbHNlIHsKCQkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoICJ0eXBlIiApOwoJCX0KCQlyZXR1cm4gZWxlbTsKCX0KCglmdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkgewoJCWlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSB8fCAhalF1ZXJ5Lmhhc0RhdGEoIHNyYyApICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgdHlwZSwgaSwgbCwKCQkJb2xkRGF0YSA9IGpRdWVyeS5fZGF0YSggc3JjICksCgkJCWN1ckRhdGEgPSBqUXVlcnkuX2RhdGEoIGRlc3QsIG9sZERhdGEgKSwKCQkJZXZlbnRzID0gb2xkRGF0YS5ldmVudHM7CgoJCWlmICggZXZlbnRzICkgewoJCQlkZWxldGUgY3VyRGF0YS5oYW5kbGU7CgkJCWN1ckRhdGEuZXZlbnRzID0ge307CgoJCQlmb3IgKCB0eXBlIGluIGV2ZW50cyApIHsKCQkJCWZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkgewoJCQkJCWpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gbWFrZSB0aGUgY2xvbmVkIHB1YmxpYyBkYXRhIG9iamVjdCBhIGNvcHkgZnJvbSB0aGUgb3JpZ2luYWwKCQlpZiAoIGN1ckRhdGEuZGF0YSApIHsKCQkJY3VyRGF0YS5kYXRhID0galF1ZXJ5LmV4dGVuZCgge30sIGN1ckRhdGEuZGF0YSApOwoJCX0KCX0KCglmdW5jdGlvbiBmaXhDbG9uZU5vZGVJc3N1ZXMoIHNyYywgZGVzdCApIHsKCQl2YXIgbm9kZU5hbWUsIGUsIGRhdGE7CgoJCS8vIFdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGZvciBub24tRWxlbWVudHMKCQlpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7CgkJCXJldHVybjsKCQl9CgoJCW5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoKCQkvLyBJRTYtOCBjb3BpZXMgZXZlbnRzIGJvdW5kIHZpYSBhdHRhY2hFdmVudCB3aGVuIHVzaW5nIGNsb25lTm9kZS4KCQlpZiAoICFzdXBwb3J0Lm5vQ2xvbmVFdmVudCAmJiBkZXN0WyBqUXVlcnkuZXhwYW5kbyBdICkgewoJCQlkYXRhID0galF1ZXJ5Ll9kYXRhKCBkZXN0ICk7CgoJCQlmb3IgKCBlIGluIGRhdGEuZXZlbnRzICkgewoJCQkJalF1ZXJ5LnJlbW92ZUV2ZW50KCBkZXN0LCBlLCBkYXRhLmhhbmRsZSApOwoJCQl9CgoJCQkvLyBFdmVudCBkYXRhIGdldHMgcmVmZXJlbmNlZCBpbnN0ZWFkIG9mIGNvcGllZCBpZiB0aGUgZXhwYW5kbyBnZXRzIGNvcGllZCB0b28KCQkJZGVzdC5yZW1vdmVBdHRyaWJ1dGUoIGpRdWVyeS5leHBhbmRvICk7CgkJfQoKCQkvLyBJRSBibGFua3MgY29udGVudHMgd2hlbiBjbG9uaW5nIHNjcmlwdHMsIGFuZCB0cmllcyB0byBldmFsdWF0ZSBuZXdseS1zZXQgdGV4dAoJCWlmICggbm9kZU5hbWUgPT09ICJzY3JpcHQiICYmIGRlc3QudGV4dCAhPT0gc3JjLnRleHQgKSB7CgkJCWRpc2FibGVTY3JpcHQoIGRlc3QgKS50ZXh0ID0gc3JjLnRleHQ7CgkJCXJlc3RvcmVTY3JpcHQoIGRlc3QgKTsKCgkJLy8gSUU2LTEwIGltcHJvcGVybHkgY2xvbmVzIGNoaWxkcmVuIG9mIG9iamVjdCBlbGVtZW50cyB1c2luZyBjbGFzc2lkLgoJCS8vIElFMTAgdGhyb3dzIE5vTW9kaWZpY2F0aW9uQWxsb3dlZEVycm9yIGlmIHBhcmVudCBpcyBudWxsLCAjMTIxMzIuCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJvYmplY3QiICkgewoJCQlpZiAoIGRlc3QucGFyZW50Tm9kZSApIHsKCQkJCWRlc3Qub3V0ZXJIVE1MID0gc3JjLm91dGVySFRNTDsKCQkJfQoKCQkJLy8gVGhpcyBwYXRoIGFwcGVhcnMgdW5hdm9pZGFibGUgZm9yIElFOS4gV2hlbiBjbG9uaW5nIGFuIG9iamVjdAoJCQkvLyBlbGVtZW50IGluIElFOSwgdGhlIG91dGVySFRNTCBzdHJhdGVneSBhYm92ZSBpcyBub3Qgc3VmZmljaWVudC4KCQkJLy8gSWYgdGhlIHNyYyBoYXMgaW5uZXJIVE1MIGFuZCB0aGUgZGVzdGluYXRpb24gZG9lcyBub3QsCgkJCS8vIGNvcHkgdGhlIHNyYy5pbm5lckhUTUwgaW50byB0aGUgZGVzdC5pbm5lckhUTUwuICMxMDMyNAoJCQlpZiAoIHN1cHBvcnQuaHRtbDVDbG9uZSAmJiAoIHNyYy5pbm5lckhUTUwgJiYgIWpRdWVyeS50cmltKCBkZXN0LmlubmVySFRNTCApICkgKSB7CgkJCQlkZXN0LmlubmVySFRNTCA9IHNyYy5pbm5lckhUTUw7CgkJCX0KCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHsKCgkJCS8vIElFNi04IGZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3gKCQkJLy8gb3IgcmFkaW8gYnV0dG9uLiBXb3JzZSwgSUU2LTcgZmFpbCB0byBnaXZlIHRoZSBjbG9uZWQgZWxlbWVudAoJCQkvLyBhIGNoZWNrZWQgYXBwZWFyYW5jZSBpZiB0aGUgZGVmYXVsdENoZWNrZWQgdmFsdWUgaXNuJ3QgYWxzbyBzZXQKCgkJCWRlc3QuZGVmYXVsdENoZWNrZWQgPSBkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDsKCgkJCS8vIElFNi03IGdldCBjb25mdXNlZCBhbmQgZW5kIHVwIHNldHRpbmcgdGhlIHZhbHVlIG9mIGEgY2xvbmVkCgkJCS8vIGNoZWNrYm94L3JhZGlvIGJ1dHRvbiB0byBhbiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiAib24iCgkJCWlmICggZGVzdC52YWx1ZSAhPT0gc3JjLnZhbHVlICkgewoJCQkJZGVzdC52YWx1ZSA9IHNyYy52YWx1ZTsKCQkJfQoKCQkvLyBJRTYtOCBmYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZAoJCS8vIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJvcHRpb24iICkgewoJCQlkZXN0LmRlZmF1bHRTZWxlY3RlZCA9IGRlc3Quc2VsZWN0ZWQgPSBzcmMuZGVmYXVsdFNlbGVjdGVkOwoKCQkvLyBJRTYtOCBmYWlscyB0byBzZXQgdGhlIGRlZmF1bHRWYWx1ZSB0byB0aGUgY29ycmVjdCB2YWx1ZSB3aGVuCgkJLy8gY2xvbmluZyBvdGhlciB0eXBlcyBvZiBpbnB1dCBmaWVsZHMKCQl9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gImlucHV0IiB8fCBub2RlTmFtZSA9PT0gInRleHRhcmVhIiApIHsKCQkJZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlOwoJCX0KCX0KCglmdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7CgoJCS8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXMKCQlhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApOwoKCQl2YXIgZmlyc3QsIG5vZGUsIGhhc1NjcmlwdHMsCgkJCXNjcmlwdHMsIGRvYywgZnJhZ21lbnQsCgkJCWkgPSAwLAoJCQlsID0gY29sbGVjdGlvbi5sZW5ndGgsCgkJCWlOb0Nsb25lID0gbCAtIDEsCgkJCXZhbHVlID0gYXJnc1sgMCBdLAoJCQlpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7CgoJCS8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdAoJCWlmICggaXNGdW5jdGlvbiB8fAoJCQkJKCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmCgkJCQkJIXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7CgkJCXJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJCXZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTsKCQkJCWlmICggaXNGdW5jdGlvbiApIHsKCQkJCQlhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTsKCQkJCX0KCQkJCWRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApOwoJCQl9ICk7CgkJfQoKCQlpZiAoIGwgKSB7CgkJCWZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7CgkJCWZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDsKCgkJCWlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7CgkJCQlmcmFnbWVudCA9IGZpcnN0OwoJCQl9CgoJCQkvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2sKCQkJaWYgKCBmaXJzdCB8fCBpZ25vcmVkICkgewoJCQkJc2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsICJzY3JpcHQiICksIGRpc2FibGVTY3JpcHQgKTsKCQkJCWhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDsKCgkJCQkvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtCgkJCQkvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXAKCQkJCS8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuCgkJCQlmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJCQkJbm9kZSA9IGZyYWdtZW50OwoKCQkJCQlpZiAoIGkgIT09IGlOb0Nsb25lICkgewoJCQkJCQlub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7CgoJCQkJCQkvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uCgkJCQkJCWlmICggaGFzU2NyaXB0cyApIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgUGhhbnRvbUpTPDIKCQkJCQkJCS8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXQKCQkJCQkJCWpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApOwoJCQkJfQoKCQkJCWlmICggaGFzU2NyaXB0cyApIHsKCQkJCQlkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50OwoKCQkJCQkvLyBSZWVuYWJsZSBzY3JpcHRzCgkJCQkJalF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApOwoKCQkJCQkvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uCgkJCQkJZm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7CgkJCQkJCW5vZGUgPSBzY3JpcHRzWyBpIF07CgkJCQkJCWlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8ICIiICkgJiYKCQkJCQkJCSFqUXVlcnkuX2RhdGEoIG5vZGUsICJnbG9iYWxFdmFsIiApICYmCgkJCQkJCQlqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkgewoKCQkJCQkJCWlmICggbm9kZS5zcmMgKSB7CgoJCQkJCQkJCS8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50CgkJCQkJCQkJaWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7CgkJCQkJCQkJCWpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWpRdWVyeS5nbG9iYWxFdmFsKAoJCQkJCQkJCQkoIG5vZGUudGV4dCB8fCBub2RlLnRleHRDb250ZW50IHx8IG5vZGUuaW5uZXJIVE1MIHx8ICIiICkKCQkJCQkJCQkJCS5yZXBsYWNlKCByY2xlYW5TY3JpcHQsICIiICkKCQkJCQkJCQkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIEZpeCAjMTE4MDk6IEF2b2lkIGxlYWtpbmcgbWVtb3J5CgkJCQlmcmFnbWVudCA9IGZpcnN0ID0gbnVsbDsKCQkJfQoJCX0KCgkJcmV0dXJuIGNvbGxlY3Rpb247Cgl9CgoJZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7CgkJdmFyIG5vZGUsCgkJCWVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSwKCQkJaSA9IDA7CgoJCWZvciAoIDsgKCBub2RlID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCgkJCWlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApOwoJCQl9CgoJCQlpZiAoIG5vZGUucGFyZW50Tm9kZSApIHsKCQkJCWlmICgga2VlcERhdGEgJiYgalF1ZXJ5LmNvbnRhaW5zKCBub2RlLm93bmVyRG9jdW1lbnQsIG5vZGUgKSApIHsKCQkJCQlzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsICJzY3JpcHQiICkgKTsKCQkJCX0KCQkJCW5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbm9kZSApOwoJCQl9CgkJfQoKCQlyZXR1cm4gZWxlbTsKCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgkJaHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7CgkJCXJldHVybiBodG1sLnJlcGxhY2UoIHJ4aHRtbFRhZywgIjwkMT48LyQyPiIgKTsKCQl9LAoKCQljbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkgewoJCQl2YXIgZGVzdEVsZW1lbnRzLCBub2RlLCBjbG9uZSwgaSwgc3JjRWxlbWVudHMsCgkJCQlpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApOwoKCQkJaWYgKCBzdXBwb3J0Lmh0bWw1Q2xvbmUgfHwgalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgfHwKCQkJCSFybm9zaGltY2FjaGUudGVzdCggIjwiICsgZWxlbS5ub2RlTmFtZSArICI+IiApICkgewoKCQkJCWNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKTsKCgkJCS8vIElFPD04IGRvZXMgbm90IHByb3Blcmx5IGNsb25lIGRldGFjaGVkLCB1bmtub3duIGVsZW1lbnQgbm9kZXMKCQkJfSBlbHNlIHsKCQkJCWZyYWdtZW50RGl2LmlubmVySFRNTCA9IGVsZW0ub3V0ZXJIVE1MOwoJCQkJZnJhZ21lbnREaXYucmVtb3ZlQ2hpbGQoIGNsb25lID0gZnJhZ21lbnREaXYuZmlyc3RDaGlsZCApOwoJCQl9CgoJCQlpZiAoICggIXN1cHBvcnQubm9DbG9uZUV2ZW50IHx8ICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICkgJiYKCQkJCQkoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJiAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgoJCQkJLy8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzIKCQkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTsKCQkJCXNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7CgoJCQkJLy8gRml4IGFsbCBJRSBjbG9uaW5nIGlzc3VlcwoJCQkJZm9yICggaSA9IDA7ICggbm9kZSA9IHNyY0VsZW1lbnRzWyBpIF0gKSAhPSBudWxsOyArK2kgKSB7CgoJCQkJCS8vIEVuc3VyZSB0aGF0IHRoZSBkZXN0aW5hdGlvbiBub2RlIGlzIG5vdCBudWxsOyBGaXhlcyAjOTU4NwoJCQkJCWlmICggZGVzdEVsZW1lbnRzWyBpIF0gKSB7CgkJCQkJCWZpeENsb25lTm9kZUlzc3Vlcyggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIENvcHkgdGhlIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCB0byB0aGUgY2xvbmUKCQkJaWYgKCBkYXRhQW5kRXZlbnRzICkgewoJCQkJaWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJCQlzcmNFbGVtZW50cyA9IHNyY0VsZW1lbnRzIHx8IGdldEFsbCggZWxlbSApOwoJCQkJCWRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7CgoJCQkJCWZvciAoIGkgPSAwOyAoIG5vZGUgPSBzcmNFbGVtZW50c1sgaSBdICkgIT0gbnVsbDsgaSsrICkgewoJCQkJCQljbG9uZUNvcHlFdmVudCggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApOwoJCQkJfQoJCQl9CgoJCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsICJzY3JpcHQiICk7CgkJCWlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7CgkJCQlzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCAic2NyaXB0IiApICk7CgkJCX0KCgkJCWRlc3RFbGVtZW50cyA9IHNyY0VsZW1lbnRzID0gbm9kZSA9IG51bGw7CgoJCQkvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXQKCQkJcmV0dXJuIGNsb25lOwoJCX0sCgoJCWNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zLCAvKiBpbnRlcm5hbCAqLyBmb3JjZUFjY2VwdERhdGEgKSB7CgkJCXZhciBlbGVtLCB0eXBlLCBpZCwgZGF0YSwKCQkJCWkgPSAwLAoJCQkJaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbywKCQkJCWNhY2hlID0galF1ZXJ5LmNhY2hlLAoJCQkJYXR0cmlidXRlcyA9IHN1cHBvcnQuYXR0cmlidXRlcywKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbDsKCgkJCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJCWlmICggZm9yY2VBY2NlcHREYXRhIHx8IGFjY2VwdERhdGEoIGVsZW0gKSApIHsKCgkJCQkJaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdOwoJCQkJCWRhdGEgPSBpZCAmJiBjYWNoZVsgaWQgXTsKCgkJCQkJaWYgKCBkYXRhICkgewoJCQkJCQlpZiAoIGRhdGEuZXZlbnRzICkgewoJCQkJCQkJZm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHsKCQkJCQkJCQlpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHsKCQkJCQkJCQkJalF1ZXJ5LmU=", "base64"));
  res.write(new Buffer("dmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTsKCgkJCQkJCQkJLy8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZAoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIFJlbW92ZSBjYWNoZSBvbmx5IGlmIGl0IHdhcyBub3QgYWxyZWFkeSByZW1vdmVkIGJ5IGpRdWVyeS5ldmVudC5yZW1vdmUKCQkJCQkJaWYgKCBjYWNoZVsgaWQgXSApIHsKCgkJCQkJCQlkZWxldGUgY2FjaGVbIGlkIF07CgoJCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkJLy8gSUUgZG9lcyBub3QgYWxsb3cgdXMgdG8gZGVsZXRlIGV4cGFuZG8gcHJvcGVydGllcyBmcm9tIG5vZGVzCgkJCQkJCQkvLyBJRSBjcmVhdGVzIGV4cGFuZG8gYXR0cmlidXRlcyBhbG9uZyB3aXRoIHRoZSBwcm9wZXJ0eQoJCQkJCQkJLy8gSUUgZG9lcyBub3QgaGF2ZSBhIHJlbW92ZUF0dHJpYnV0ZSBmdW5jdGlvbiBvbiBEb2N1bWVudCBub2RlcwoJCQkJCQkJaWYgKCAhYXR0cmlidXRlcyAmJiB0eXBlb2YgZWxlbS5yZW1vdmVBdHRyaWJ1dGUgIT09ICJ1bmRlZmluZWQiICkgewoJCQkJCQkJCWVsZW0ucmVtb3ZlQXR0cmlidXRlKCBpbnRlcm5hbEtleSApOwoKCQkJCQkJCS8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzCgkJCQkJCQkvLyBmcm9tIERPTSBub2Rlcywgc28gc2V0IHRvIHVuZGVmaW5lZCBpbnN0ZWFkCgkJCQkJCQkvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWVsZW1bIGludGVybmFsS2V5IF0gPSB1bmRlZmluZWQ7CgkJCQkJCQl9CgoJCQkJCQkJZGVsZXRlZElkcy5wdXNoKCBpZCApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSApOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCgkJLy8gS2VlcCBkb21NYW5pcCBleHBvc2VkIHVudGlsIDMuMCAoZ2gtMjIyNSkKCQlkb21NYW5pcDogZG9tTWFuaXAsCgoJCWRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciwgdHJ1ZSApOwoJCX0sCgoJCXJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciApOwoJCX0sCgoJCXRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPwoJCQkJCWpRdWVyeS50ZXh0KCB0aGlzICkgOgoJCQkJCXRoaXMuZW1wdHkoKS5hcHBlbmQoCgkJCQkJCSggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkuY3JlYXRlVGV4dE5vZGUoIHZhbHVlICkKCQkJCQkpOwoJCQl9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApOwoJCX0sCgoJCWFwcGVuZDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCWlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkgewoJCQkJCXZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTsKCQkJCQl0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCXByZXBlbmQ6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHsKCQkJCQl2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7CgkJCQkJdGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCWJlZm9yZTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCWlmICggdGhpcy5wYXJlbnROb2RlICkgewoJCQkJCXRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCWFmdGVyOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7CgkJCQkJdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJZW1wdHk6IGZ1bmN0aW9uKCkgewoJCQl2YXIgZWxlbSwKCQkJCWkgPSAwOwoKCQkJZm9yICggOyAoIGVsZW0gPSB0aGlzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7CgoJCQkJLy8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzCgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7CgkJCQl9CgoJCQkJLy8gUmVtb3ZlIGFueSByZW1haW5pbmcgbm9kZXMKCQkJCXdoaWxlICggZWxlbS5maXJzdENoaWxkICkgewoJCQkJCWVsZW0ucmVtb3ZlQ2hpbGQoIGVsZW0uZmlyc3RDaGlsZCApOwoJCQkJfQoKCQkJCS8vIElmIHRoaXMgaXMgYSBzZWxlY3QsIGVuc3VyZSB0aGF0IGl0IGRpc3BsYXlzIGVtcHR5ICgjMTIzMzYpCgkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQlpZiAoIGVsZW0ub3B0aW9ucyAmJiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJzZWxlY3QiICkgKSB7CgkJCQkJZWxlbS5vcHRpb25zLmxlbmd0aCA9IDA7CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCWNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJCWRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7CgkJCWRlZXBEYXRhQW5kRXZlbnRzID0gZGVlcERhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGRhdGFBbmRFdmVudHMgOiBkZWVwRGF0YUFuZEV2ZW50czsKCgkJCXJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApOwoJCQl9ICk7CgkJfSwKCgkJaHRtbDogZnVuY3Rpb24oIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQl2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSwKCQkJCQlpID0gMCwKCQkJCQlsID0gdGhpcy5sZW5ndGg7CgoJCQkJaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkgewoJCQkJCXJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxID8KCQkJCQkJZWxlbS5pbm5lckhUTUwucmVwbGFjZSggcmlubGluZWpRdWVyeSwgIiIgKSA6CgkJCQkJCXVuZGVmaW5lZDsKCQkJCX0KCgkJCQkvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MCgkJCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmCgkJCQkJKCBzdXBwb3J0Lmh0bWxTZXJpYWxpemUgfHwgIXJub3NoaW1jYWNoZS50ZXN0KCB2YWx1ZSApICApICYmCgkJCQkJKCBzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlIHx8ICFybGVhZGluZ1doaXRlc3BhY2UudGVzdCggdmFsdWUgKSApICYmCgkJCQkJIXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbICIiLCAiIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpIF0gKSB7CgoJCQkJCXZhbHVlID0galF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIHZhbHVlICk7CgoJCQkJCXRyeSB7CgkJCQkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCgkJCQkJCQkvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3MKCQkJCQkJCWVsZW0gPSB0aGlzWyBpIF0gfHwge307CgkJCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCQkJalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7CgkJCQkJCQkJZWxlbS5pbm5lckhUTUwgPSB2YWx1ZTsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJZWxlbSA9IDA7CgoJCQkJCS8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZAoJCQkJCX0gY2F0Y2ggKCBlICkge30KCQkJCX0KCgkJCQlpZiAoIGVsZW0gKSB7CgkJCQkJdGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTsKCQkJCX0KCQkJfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTsKCQl9LAoKCQlyZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7CgkJCXZhciBpZ25vcmVkID0gW107CgoJCQkvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnQKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTsKCgkJCQlpZiAoIGpRdWVyeS5pbkFycmF5KCB0aGlzLCBpZ25vcmVkICkgPCAwICkgewoJCQkJCWpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7CgkJCQkJaWYgKCBwYXJlbnQgKSB7CgkJCQkJCXBhcmVudC5yZXBsYWNlQ2hpbGQoIGVsZW0sIHRoaXMgKTsKCQkJCQl9CgkJCQl9CgoJCQkvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uCgkJCX0sIGlnbm9yZWQgKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmVhY2goIHsKCQlhcHBlbmRUbzogImFwcGVuZCIsCgkJcHJlcGVuZFRvOiAicHJlcGVuZCIsCgkJaW5zZXJ0QmVmb3JlOiAiYmVmb3JlIiwKCQlpbnNlcnRBZnRlcjogImFmdGVyIiwKCQlyZXBsYWNlQWxsOiAicmVwbGFjZVdpdGgiCgl9LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7CgkJalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXZhciBlbGVtcywKCQkJCWkgPSAwLAoJCQkJcmV0ID0gW10sCgkJCQlpbnNlcnQgPSBqUXVlcnkoIHNlbGVjdG9yICksCgkJCQlsYXN0ID0gaW5zZXJ0Lmxlbmd0aCAtIDE7CgoJCQlmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkgewoJCQkJZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTsKCQkJCWpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTsKCgkJCQkvLyBNb2Rlcm4gYnJvd3NlcnMgY2FuIGFwcGx5IGpRdWVyeSBjb2xsZWN0aW9ucyBhcyBhcnJheXMsIGJ1dCBvbGRJRSBuZWVkcyBhIC5nZXQoKQoJCQkJcHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApOwoJCX07Cgl9ICk7CgoKCXZhciBpZnJhbWUsCgkJZWxlbWRpc3BsYXkgPSB7CgoJCQkvLyBTdXBwb3J0OiBGaXJlZm94CgkJCS8vIFdlIGhhdmUgdG8gcHJlLWRlZmluZSB0aGVzZSB2YWx1ZXMgZm9yIEZGICgjMTAyMjcpCgkJCUhUTUw6ICJibG9jayIsCgkJCUJPRFk6ICJibG9jayIKCQl9OwoKCS8qKgoJICogUmV0cmlldmUgdGhlIGFjdHVhbCBkaXNwbGF5IG9mIGEgZWxlbWVudAoJICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbm9kZU5hbWUgb2YgdGhlIGVsZW1lbnQKCSAqIEBwYXJhbSB7T2JqZWN0fSBkb2MgRG9jdW1lbnQgb2JqZWN0CgkgKi8KCgkvLyBDYWxsZWQgb25seSBmcm9tIHdpdGhpbiBkZWZhdWx0RGlzcGxheQoJZnVuY3Rpb24gYWN0dWFsRGlzcGxheSggbmFtZSwgZG9jICkgewoJCXZhciBlbGVtID0galF1ZXJ5KCBkb2MuY3JlYXRlRWxlbWVudCggbmFtZSApICkuYXBwZW5kVG8oIGRvYy5ib2R5ICksCgoJCQlkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbVsgMCBdLCAiZGlzcGxheSIgKTsKCgkJLy8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsCgkJLy8gc28gdXNlICJkZXRhY2giIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50CgkJZWxlbS5kZXRhY2goKTsKCgkJcmV0dXJuIGRpc3BsYXk7Cgl9CgoJLyoqCgkgKiBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IGRpc3BsYXkgdmFsdWUgb2YgYW4gZWxlbWVudAoJICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lCgkgKi8KCWZ1bmN0aW9uIGRlZmF1bHREaXNwbGF5KCBub2RlTmFtZSApIHsKCQl2YXIgZG9jID0gZG9jdW1lbnQsCgkJCWRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTsKCgkJaWYgKCAhZGlzcGxheSApIHsKCQkJZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTsKCgkJCS8vIElmIHRoZSBzaW1wbGUgd2F5IGZhaWxzLCByZWFkIGZyb20gaW5zaWRlIGFuIGlmcmFtZQoJCQlpZiAoIGRpc3BsYXkgPT09ICJub25lIiB8fCAhZGlzcGxheSApIHsKCgkJCQkvLyBVc2UgdGhlIGFscmVhZHktY3JlYXRlZCBpZnJhbWUgaWYgcG9zc2libGUKCQkJCWlmcmFtZSA9ICggaWZyYW1lIHx8IGpRdWVyeSggIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iICkgKQoJCQkJCS5hcHBlbmRUbyggZG9jLmRvY3VtZW50RWxlbWVudCApOwoKCQkJCS8vIEFsd2F5cyB3cml0ZSBhIG5ldyBIVE1MIHNrZWxldG9uIHNvIFdlYmtpdCBhbmQgRmlyZWZveCBkb24ndCBjaG9rZSBvbiByZXVzZQoJCQkJZG9jID0gKCBpZnJhbWVbIDAgXS5jb250ZW50V2luZG93IHx8IGlmcmFtZVsgMCBdLmNvbnRlbnREb2N1bWVudCApLmRvY3VtZW50OwoKCQkJCS8vIFN1cHBvcnQ6IElFCgkJCQlkb2Mud3JpdGUoKTsKCQkJCWRvYy5jbG9zZSgpOwoKCQkJCWRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7CgkJCQlpZnJhbWUuZGV0YWNoKCk7CgkJCX0KCgkJCS8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheQoJCQllbGVtZGlzcGxheVsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7CgkJfQoKCQlyZXR1cm4gZGlzcGxheTsKCX0KCXZhciBybWFyZ2luID0gKCAvXm1hcmdpbi8gKTsKCgl2YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggIl4oIiArIHBudW0gKyAiKSg/IXB4KVthLXolXSskIiwgImkiICk7CgoJdmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7CgkJdmFyIHJldCwgbmFtZSwKCQkJb2xkID0ge307CgoJCS8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lcwoJCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQkJb2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07CgkJCWVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTsKCQl9CgoJCXJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7CgoJCS8vIFJldmVydCB0aGUgb2xkIHZhbHVlcwoJCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQkJZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07CgkJfQoKCQlyZXR1cm4gcmV0OwoJfTsKCgoJdmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIHBpeGVsUG9zaXRpb25WYWwsIHBpeGVsTWFyZ2luUmlnaHRWYWwsIGJveFNpemluZ1JlbGlhYmxlVmFsLAoJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwsIHJlbGlhYmxlTWFyZ2luUmlnaHRWYWwsIHJlbGlhYmxlTWFyZ2luTGVmdFZhbCwKCQkJY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSwKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCgkJLy8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHMKCQlpZiAoICFkaXYuc3R5bGUgKSB7CgkJCXJldHVybjsKCQl9CgoJCWRpdi5zdHlsZS5jc3NUZXh0ID0gImZsb2F0OmxlZnQ7b3BhY2l0eTouNSI7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBNYWtlIHN1cmUgdGhhdCBlbGVtZW50IG9wYWNpdHkgZXhpc3RzIChhcyBvcHBvc2VkIHRvIGZpbHRlcikKCQlzdXBwb3J0Lm9wYWNpdHkgPSBkaXYuc3R5bGUub3BhY2l0eSA9PT0gIjAuNSI7CgoJCS8vIFZlcmlmeSBzdHlsZSBmbG9hdCBleGlzdGVuY2UKCQkvLyAoSUUgdXNlcyBzdHlsZUZsb2F0IGluc3RlYWQgb2YgY3NzRmxvYXQpCgkJc3VwcG9ydC5jc3NGbG9hdCA9ICEhZGl2LnN0eWxlLmNzc0Zsb2F0OwoKCQlkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiY29udGVudC1ib3giOwoJCWRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9ICIiOwoJCXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSAiY29udGVudC1ib3giOwoKCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7IiArCgkJCSJwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiOwoJCWRpdi5pbm5lckhUTUwgPSAiIjsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoIGRpdiApOwoKCQkvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuMwoJCS8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZwoJCXN1cHBvcnQuYm94U2l6aW5nID0gZGl2LnN0eWxlLmJveFNpemluZyA9PT0gIiIgfHwgZGl2LnN0eWxlLk1vekJveFNpemluZyA9PT0gIiIgfHwKCQkJZGl2LnN0eWxlLldlYmtpdEJveFNpemluZyA9PT0gIiI7CgoJCWpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHsKCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzOiBmdW5jdGlvbigpIHsKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsOwoJCQl9LAoKCQkJYm94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkgewoKCQkJCS8vIFdlJ3JlIGNoZWNraW5nIGZvciBwaXhlbFBvc2l0aW9uVmFsIGhlcmUgaW5zdGVhZCBvZiBib3hTaXppbmdSZWxpYWJsZVZhbAoJCQkJLy8gc2luY2UgdGhhdCBjb21wcmVzc2VzIGJldHRlciBhbmQgdGhleSdyZSBjb21wdXRlZCB0b2dldGhlciBhbnl3YXkuCgkJCQlpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHsKCQkJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQkJfQoJCQkJcmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsOwoJCQl9LAoKCQkJcGl4ZWxNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCA0LjAtNC4zCgkJCQlpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHsKCQkJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQkJfQoJCQkJcmV0dXJuIHBpeGVsTWFyZ2luUmlnaHRWYWw7CgkJCX0sCgoJCQlwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDsKCQkJfSwKCgkJCXJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkgewoKCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zCgkJCQlpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHsKCQkJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQkJfQoJCQkJcmV0dXJuIHJlbGlhYmxlTWFyZ2luUmlnaHRWYWw7CgkJCX0sCgoJCQlyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkgewoKCQkJCS8vIFN1cHBvcnQ6IElFIDw9OCBvbmx5LCBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBGaXJlZm94IDw9MyAtIDM3CgkJCQlpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHsKCQk=", "base64"));
  res.write(new Buffer("CQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJCX0KCQkJCXJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7CgkJCX0KCQl9ICk7CgoJCWZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkgewoJCQl2YXIgY29udGVudHMsIGRpdlN0eWxlLAoJCQkJZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCQkJLy8gU2V0dXAKCQkJZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBjb250YWluZXIgKTsKCgkJCWRpdi5zdHlsZS5jc3NUZXh0ID0KCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCgkJCQkiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94OyIgKwoJCQkJInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7IiArCgkJCQkibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDsiICsKCQkJCSJ0b3A6MSU7d2lkdGg6NTAlIjsKCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gQXNzdW1lIHJlYXNvbmFibGUgdmFsdWVzIGluIHRoZSBhYnNlbmNlIG9mIGdldENvbXB1dGVkU3R5bGUKCQkJcGl4ZWxQb3NpdGlvblZhbCA9IGJveFNpemluZ1JlbGlhYmxlVmFsID0gcmVsaWFibGVNYXJnaW5MZWZ0VmFsID0gZmFsc2U7CgkJCXBpeGVsTWFyZ2luUmlnaHRWYWwgPSByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID0gdHJ1ZTsKCgkJCS8vIENoZWNrIGZvciBnZXRDb21wdXRlZFN0eWxlIHNvIHRoYXQgdGhpcyBjb2RlIGlzIG5vdCBydW4gaW4gSUU8OS4KCQkJaWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHsKCQkJCWRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApOwoJCQkJcGl4ZWxQb3NpdGlvblZhbCA9ICggZGl2U3R5bGUgfHwge30gKS50b3AgIT09ICIxJSI7CgkJCQlyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSAoIGRpdlN0eWxlIHx8IHt9ICkubWFyZ2luTGVmdCA9PT0gIjJweCI7CgkJCQlib3hTaXppbmdSZWxpYWJsZVZhbCA9ICggZGl2U3R5bGUgfHwgeyB3aWR0aDogIjRweCIgfSApLndpZHRoID09PSAiNHB4IjsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5CgkJCQkvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3QKCQkJCWRpdi5zdHlsZS5tYXJnaW5SaWdodCA9ICI1MCUiOwoJCQkJcGl4ZWxNYXJnaW5SaWdodFZhbCA9ICggZGl2U3R5bGUgfHwgeyBtYXJnaW5SaWdodDogIjRweCIgfSApLm1hcmdpblJpZ2h0ID09PSAiNHB4IjsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMyBvbmx5CgkJCQkvLyBEaXYgd2l0aCBleHBsaWNpdCB3aWR0aCBhbmQgbm8gbWFyZ2luLXJpZ2h0IGluY29ycmVjdGx5CgkJCQkvLyBnZXRzIGNvbXB1dGVkIG1hcmdpbi1yaWdodCBiYXNlZCBvbiB3aWR0aCBvZiBjb250YWluZXIgKCMzMzMzKQoJCQkJLy8gV2ViS2l0IEJ1ZyAxMzM0MyAtIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyB3cm9uZyB2YWx1ZSBmb3IgbWFyZ2luLXJpZ2h0CgkJCQljb250ZW50cyA9IGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCQkJCS8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXI7IHBhZGRpbmcKCQkJCWNvbnRlbnRzLnN0eWxlLmNzc1RleHQgPSBkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zCgkJCQkJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCgkJCQkJIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IiArCgkJCQkJImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjAiOwoJCQkJY29udGVudHMuc3R5bGUubWFyZ2luUmlnaHQgPSBjb250ZW50cy5zdHlsZS53aWR0aCA9ICIwIjsKCQkJCWRpdi5zdHlsZS53aWR0aCA9ICIxcHgiOwoKCQkJCXJlbGlhYmxlTWFyZ2luUmlnaHRWYWwgPQoJCQkJCSFwYXJzZUZsb2F0KCAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBjb250ZW50cyApIHx8IHt9ICkubWFyZ2luUmlnaHQgKTsKCgkJCQlkaXYucmVtb3ZlQ2hpbGQoIGNvbnRlbnRzICk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFNi04CgkJCS8vIEZpcnN0IGNoZWNrIHRoYXQgZ2V0Q2xpZW50UmVjdHMgd29ya3MgYXMgZXhwZWN0ZWQKCQkJLy8gQ2hlY2sgaWYgdGFibGUgY2VsbHMgc3RpbGwgaGF2ZSBvZmZzZXRXaWR0aC9IZWlnaHQgd2hlbiB0aGV5IGFyZSBzZXQKCQkJLy8gdG8gZGlzcGxheTpub25lIGFuZCB0aGVyZSBhcmUgc3RpbGwgb3RoZXIgdmlzaWJsZSB0YWJsZSBjZWxscyBpbiBhCgkJCS8vIHRhYmxlIHJvdzsgaWYgc28sIG9mZnNldFdpZHRoL0hlaWdodCBhcmUgbm90IHJlbGlhYmxlIGZvciB1c2Ugd2hlbgoJCQkvLyBkZXRlcm1pbmluZyBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIGhpZGRlbiBkaXJlY3RseSB1c2luZwoJCQkvLyBkaXNwbGF5Om5vbmUgKGl0IGlzIHN0aWxsIHNhZmUgdG8gdXNlIG9mZnNldHMgaWYgYSBwYXJlbnQgZWxlbWVudCBpcwoJCQkvLyBoaWRkZW47IGRvbiBzYWZldHkgZ29nZ2xlcyBhbmQgc2VlIGJ1ZyAjNDUxMiBmb3IgbW9yZSBpbmZvcm1hdGlvbikuCgkJCWRpdi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwgPSBkaXYuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPT09IDA7CgkJCWlmICggcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsICkgewoJCQkJZGl2LnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJCWRpdi5pbm5lckhUTUwgPSAiPHRhYmxlPjx0cj48dGQ+PA==", "base64"));
  res.write(new Buffer("L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+IjsKCQkJCWRpdi5jaGlsZE5vZGVzWyAwIF0uc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAic2VwYXJhdGUiOwoJCQkJY29udGVudHMgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJ0ZCIgKTsKCQkJCWNvbnRlbnRzWyAwIF0uc3R5bGUuY3NzVGV4dCA9ICJtYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjA7ZGlzcGxheTpub25lIjsKCQkJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCA9IGNvbnRlbnRzWyAwIF0ub2Zmc2V0SGVpZ2h0ID09PSAwOwoJCQkJaWYgKCByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwgKSB7CgkJCQkJY29udGVudHNbIDAgXS5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCQkJY29udGVudHNbIDEgXS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQkJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCA9IGNvbnRlbnRzWyAwIF0ub2Zmc2V0SGVpZ2h0ID09PSAwOwoJCQkJfQoJCQl9CgoJCQkvLyBUZWFyZG93bgoJCQlkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApOwoJCX0KCgl9ICkoKTsKCgoJdmFyIGdldFN0eWxlcywgY3VyQ1NTLAoJCXJwb3NpdGlvbiA9IC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLzsKCglpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkgewoJCWdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJLy8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MCkKCQkJLy8gSUUgdGhyb3dzIG9uIGVsZW1lbnRzIGNyZWF0ZWQgaW4gcG9wdXBzCgkJCS8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCAiZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSIKCQkJdmFyIHZpZXcgPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7CgoJCQlpZiAoICF2aWV3IHx8ICF2aWV3Lm9wZW5lciApIHsKCQkJCXZpZXcgPSB3aW5kb3c7CgkJCX0KCgkJCXJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTsKCQl9OwoKCQljdXJDU1MgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7CgkJCXZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsCgkJCQlzdHlsZSA9IGVsZW0uc3R5bGU7CgoJCQljb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApOwoKCQkJLy8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBvbmx5IG5lZWRlZCBmb3IgLmNzcygnZmlsdGVyJykgaW4gSUU5LCBzZWUgIzEyNTM3CgkJCXJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7CgoJCQkvLyBTdXBwb3J0OiBPcGVyYSAxMi4xeCBvbmx5CgkJCS8vIEZhbGwgYmFjayB0byBzdHlsZSBldmVuIHdpdGhvdXQgY29tcHV0ZWQKCQkJLy8gY29tcHV0ZWQgaXMgdW5kZWZpbmVkIGZvciBlbGVtcyBvbiBkb2N1bWVudCBmcmFnbWVudHMKCQkJaWYgKCAoIHJldCA9PT0gIiIgfHwgcmV0ID09PSB1bmRlZmluZWQgKSAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHsKCQkJCXJldCA9IGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSApOwoJCQl9CgoJCQlpZiAoIGNvbXB1dGVkICkgewoKCQkJCS8vIEEgdHJpYnV0ZSB0byB0aGUgImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHMiCgkJCQkvLyBDaHJvbWUgPCAxNyBhbmQgU2FmYXJpIDUuMCB1c2VzICJjb21wdXRlZCB2YWx1ZSIKCQkJCS8vIGluc3RlYWQgb2YgInVzZWQgdmFsdWUiIGZvciBtYXJnaW4tcmlnaHQKCQkJCS8vIFNhZmFyaSA1LjEuNyAoYXQgbGVhc3QpIHJldHVybnMgcGVyY2VudGFnZSBmb3IgYSBsYXJnZXIgc2V0IG9mIHZhbHVlcywKCQkJCS8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMKCQkJCS8vIHRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzoKCQkJCS8vIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXMKCQkJCWlmICggIXN1cHBvcnQucGl4ZWxNYXJnaW5SaWdodCgpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHsKCgkJCQkJLy8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlcwoJCQkJCXdpZHRoID0gc3R5bGUud2lkdGg7CgkJCQkJbWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDsKCQkJCQltYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoOwoKCQkJCQkvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0CgkJCQkJc3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0OwoJCQkJCXJldCA9IGNvbXB1dGVkLndpZHRoOwoKCQkJCQkvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzCgkJCQkJc3R5bGUud2lkdGggPSB3aWR0aDsKCQkJCQlzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoOwoJCQkJCXN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7CgkJCQl9CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFCgkJCS8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuCgkJCXJldHVybiByZXQgPT09IHVuZGVmaW5lZCA/CgkJCQlyZXQgOgoJCQkJcmV0ICsgIiI7CgkJfTsKCX0gZWxzZSBpZiAoIGRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUgKSB7CgkJZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtLmN1cnJlbnRTdHlsZTsKCQl9OwoKCQljdXJDU1MgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7CgkJCXZhciBsZWZ0LCBycywgcnNMZWZ0LCByZXQsCgkJCQlzdHlsZSA9IGVsZW0uc3R5bGU7CgoJCQljb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApOwoJCQlyZXQgPSBjb21wdXRlZCA/IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7CgoJCQkvLyBBdm9pZCBzZXR0aW5nIHJldCB0byBlbXB0eSBzdHJpbmcgaGVyZQoJCQkvLyBzbyB3ZSBkb24ndCBkZWZhdWx0IHRvIGF1dG8KCQkJaWYgKCByZXQgPT0gbnVsbCAmJiBzdHlsZSAmJiBzdHlsZVsgbmFtZSBdICkgewoJCQkJcmV0ID0gc3R5bGVbIG5hbWUgXTsKCQkJfQoKCQkJLy8gRnJvbSB0aGUgYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkcwoJCQkvLyBodHRwOi8vZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDcvMDcvMjcvMTguNTQuMTUvI2NvbW1lbnQtMTAyMjkxCgoJCQkvLyBJZiB3ZSdyZSBub3QgZGVhbGluZyB3aXRoIGEgcmVndWxhciBwaXhlbCBudW1iZXIKCQkJLy8gYnV0IGEgbnVtYmVyIHRoYXQgaGFzIGEgd2VpcmQgZW5kaW5nLCB3ZSBuZWVkIHRvIGNvbnZlcnQgaXQgdG8gcGl4ZWxzCgkJCS8vIGJ1dCBub3QgcG9zaXRpb24gY3NzIGF0dHJpYnV0ZXMsIGFzIHRob3NlIGFyZQoJCQkvLyBwcm9wb3J0aW9uYWwgdG8gdGhlIHBhcmVudCBlbGVtZW50IGluc3RlYWQKCQkJLy8gYW5kIHdlIGNhbid0IG1lYXN1cmUgdGhlIHBhcmVudCBpbnN0ZWFkIGJlY2F1c2UgaXQKCQkJLy8gbWlnaHQgdHJpZ2dlciBhICJzdGFja2luZyBkb2xscyIgcHJvYmxlbQoJCQlpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiAhcnBvc2l0aW9uLnRlc3QoIG5hbWUgKSApIHsKCgkJCQkvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzCgkJCQlsZWZ0ID0gc3R5bGUubGVmdDsKCQkJCXJzID0gZWxlbS5ydW50aW1lU3R5bGU7CgkJCQlyc0xlZnQgPSBycyAmJiBycy5sZWZ0OwoKCQkJCS8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXQKCQkJCWlmICggcnNMZWZ0ICkgewoJCQkJCXJzLmxlZnQgPSBlbGVtLmN1cnJlbnRTdHlsZS5sZWZ0OwoJCQkJfQoJCQkJc3R5bGUubGVmdCA9IG5hbWUgPT09ICJmb250U2l6ZSIgPyAiMWVtIiA6IHJldDsKCQkJCXJldCA9IHN0eWxlLnBpeGVsTGVmdCArICJweCI7CgoJCQkJLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlcwoJCQkJc3R5bGUubGVmdCA9IGxlZnQ7CgkJCQlpZiAoIHJzTGVmdCApIHsKCQkJCQlycy5sZWZ0ID0gcnNMZWZ0OwoJCQkJfQoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRQoJCQkvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLgoJCQlyZXR1cm4gcmV0ID09PSB1bmRlZmluZWQgPwoJCQkJcmV0IDoKCQkJCXJldCArICIiIHx8ICJhdXRvIjsKCQl9OwoJfQoKCgoKCWZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHsKCgkJLy8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC4KCQlyZXR1cm4gewoJCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBjb25kaXRpb25GbigpICkgewoKCQkJCQkvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWUKCQkJCQkvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuCgkJCQkJZGVsZXRlIHRoaXMuZ2V0OwoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQkvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi4KCQkJCXJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQl9CgkJfTsKCX0KCgoJdmFyCgoJCQlyYWxwaGEgPSAvYWxwaGFcKFteKV0qXCkvaSwKCQlyb3BhY2l0eSA9IC9vcGFjaXR5XHMqPVxzKihbXildKikvaSwKCgkJLy8gc3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZSBleGNlcHQKCQkvLyAidGFibGUiLCAidGFibGUtY2VsbCIsIG9yICJ0YWJsZS1jYXB0aW9uIgoJCS8vIHNlZSBoZXJlIGZvciBkaXNwbGF5IHZhbHVlczoKCQkvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5CgkJcmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLAoJCXJudW1zcGxpdCA9IG5ldyBSZWdFeHAoICJeKCIgKyBwbnVtICsgIikoLiopJCIsICJpIiApLAoKCQljc3NTaG93ID0geyBwb3NpdGlvbjogImFic29sdXRlIiwgdmlzaWJpbGl0eTogImhpZGRlbiIsIGRpc3BsYXk6ICJibG9jayIgfSwKCQljc3NOb3JtYWxUcmFuc2Zvcm0gPSB7CgkJCWxldHRlclNwYWNpbmc6ICIwIiwKCQkJZm9udFdlaWdodDogIjQwMCIKCQl9LAoKCQljc3NQcmVmaXhlcyA9IFsgIldlYmtpdCIsICJPIiwgIk1veiIsICJtcyIgXSwKCQllbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKS5zdHlsZTsKCgoJLy8gcmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eQoJZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIG5hbWUgKSB7CgoJCS8vIHNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkCgkJaWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7CgkJCXJldHVybiBuYW1lOwoJCX0KCgkJLy8gY2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lcwoJCXZhciBjYXBOYW1lID0gbmFtZS5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSggMSApLAoJCQlpID0gY3NzUHJlZml4ZXMubGVuZ3RoOwoKCQl3aGlsZSAoIGktLSApIHsKCQkJbmFtZSA9IGNzc1ByZWZpeGVzWyBpIF0gKyBjYXBOYW1lOwoJCQlpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHsKCQkJCXJldHVybiBuYW1lOwoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHsKCQl2YXIgZGlzcGxheSwgZWxlbSwgaGlkZGVuLAoJCQl2YWx1ZXMgPSBbXSwKCQkJaW5kZXggPSAwLAoJCQlsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7CgoJCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCWVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTsKCQkJaWYgKCAhZWxlbS5zdHlsZSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQl2YWx1ZXNbIGluZGV4IF0gPSBqUXVlcnkuX2RhdGEoIGVsZW0sICJvbGRkaXNwbGF5IiApOwoJCQlkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5OwoJCQlpZiAoIHNob3cgKSB7CgoJCQkJLy8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHQ=", "base64"));
  res.write(new Buffer("aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXMKCQkJCS8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3QKCQkJCWlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSAibm9uZSIgKSB7CgkJCQkJZWxlbS5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCQl9CgoJCQkJLy8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZQoJCQkJLy8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXMKCQkJCS8vIGZvciBzdWNoIGFuIGVsZW1lbnQKCQkJCWlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSAiIiAmJiBpc0hpZGRlbiggZWxlbSApICkgewoJCQkJCXZhbHVlc1sgaW5kZXggXSA9CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgIm9sZGRpc3BsYXkiLCBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApICk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQloaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApOwoKCQkJCWlmICggZGlzcGxheSAmJiBkaXNwbGF5ICE9PSAibm9uZSIgfHwgIWhpZGRlbiApIHsKCQkJCQlqUXVlcnkuX2RhdGEoCgkJCQkJCWVsZW0sCgkJCQkJCSJvbGRkaXNwbGF5IiwKCQkJCQkJaGlkZGVuID8gZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApCgkJCQkJKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AKCQkvLyB0byBhdm9pZCB0aGUgY29uc3RhbnQgcmVmbG93CgkJZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdOwoJCQlpZiAoICFlbGVtLnN0eWxlICkgewoJCQkJY29udGludWU7CgkJCX0KCQkJaWYgKCAhc2hvdyB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09ICJub25lIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09ICIiICkgewoJCQkJZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCAiIiA6ICJub25lIjsKCQkJfQoJCX0KCgkJcmV0dXJuIGVsZW1lbnRzOwoJfQoKCWZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7CgkJdmFyIG1hdGNoZXMgPSBybnVtc3BsaXQuZXhlYyggdmFsdWUgKTsKCQlyZXR1cm4gbWF0Y2hlcyA/CgoJCQkvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCAic3VidHJhY3QiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3MKCQkJTWF0aC5tYXgoIDAsIG1hdGNoZXNbIDEgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDIgXSB8fCAicHgiICkgOgoJCQl2YWx1ZTsKCX0KCglmdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7CgkJdmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/ICJib3JkZXIiIDogImNvbnRlbnQiICkgPwoKCQkJLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uCgkJCTQgOgoKCQkJLy8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllcwoJCQluYW1lID09PSAid2lkdGgiID8gMSA6IDAsCgoJCQl2YWwgPSAwOwoKCQlmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7CgoJCQkvLyBib3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0CgkJCWlmICggZXh0cmEgPT09ICJtYXJnaW4iICkgewoJCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIGV4dHJhICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApOwoJCQl9CgoJCQlpZiAoIGlzQm9yZGVyQm94ICkgewoKCQkJCS8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudAoJCQkJaWYgKCBleHRyYSA9PT0gImNvbnRlbnQiICkgewoJCQkJCXZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCAicGFkZGluZyIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7CgkJCQl9CgoJCQkJLy8gYXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXIKCQkJCWlmICggZXh0cmEgIT09ICJtYXJnaW4iICkgewoJCQkJCXZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCAiYm9yZGVyIiArIGNzc0V4cGFuZFsgaSBdICsgIldpZHRoIiwgdHJ1ZSwgc3R5bGVzICk7CgkJCQl9CgkJCX0gZWxzZSB7CgoJCQkJLy8gYXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgY29udGVudCwgc28gYWRkIHBhZGRpbmcKCQkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCAicGFkZGluZyIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7CgoJCQkJLy8gYXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgY29udGVudCBub3IgcGFkZGluZywgc28gYWRkIGJvcmRlcgoJCQkJaWYgKCBleHRyYSAhPT0gInBhZGRpbmciICkgewoJCQkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCAiYm9yZGVyIiArIGNzc0V4cGFuZFsgaSBdICsgIldpZHRoIiwgdHJ1ZSwgc3R5bGVzICk7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB2YWw7Cgl9CgoJZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7CgoJCS8vIFN0YXJ0IHdpdGggb2Zmc2V0IHByb3BlcnR5LCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBib3JkZXItYm94IHZhbHVlCgkJdmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLAoJCQl2YWwgPSBuYW1lID09PSAid2lkdGgiID8gZWxlbS5vZmZzZXRXaWR0aCA6IGVsZW0ub2Zmc2V0SGVpZ2h0LAoJCQlzdA==", "base64"));
  res.write(new Buffer("eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLAoJCQlpc0JvcmRlckJveCA9IHN1cHBvcnQuYm94U2l6aW5nICYmCgkJCQlqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCI7CgoJCS8vIHNvbWUgbm9uLWh0bWwgZWxlbWVudHMgcmV0dXJuIHVuZGVmaW5lZCBmb3Igb2Zmc2V0V2lkdGgsIHNvIGNoZWNrIGZvciBudWxsL3VuZGVmaW5lZAoJCS8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NQoJCS8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OAoJCWlmICggdmFsIDw9IDAgfHwgdmFsID09IG51bGwgKSB7CgoJCQkvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3NhcnkKCQkJdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTsKCQkJaWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkgewoJCQkJdmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLgoJCQlpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHsKCQkJCXJldHVybiB2YWw7CgkJCX0KCgkJCS8vIHdlIG5lZWQgdGhlIGNoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzCgkJCS8vIGZvciBnZXRDb21wdXRlZFN0eWxlIHNpbGVudGx5IGZhbGxzIGJhY2sgdG8gdGhlIHJlbGlhYmxlIGVsZW0uc3R5bGUKCQkJdmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmCgkJCQkoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApOwoKCQkJLy8gTm9ybWFsaXplICIiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmEKCQkJdmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDsKCQl9CgoJCS8vIHVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzCgkJcmV0dXJuICggdmFsICsKCQkJYXVnbWVudFdpZHRoT3JIZWlnaHQoCgkJCQllbGVtLAoJCQkJbmFtZSwKCQkJCWV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyAiYm9yZGVyIiA6ICJjb250ZW50IiApLAoJCQkJdmFsdWVJc0JvcmRlckJveCwKCQkJCXN0eWxlcwoJCQkpCgkJKSArICJweCI7Cgl9CgoJalF1ZXJ5LmV4dGVuZCggewoKCQkvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQKCQkvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHkKCQljc3NIb29rczogewoJCQlvcGFjaXR5OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJCQlpZiAoIGNvbXB1dGVkICkgewoKCQkJCQkJLy8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHkKCQkJCQkJdmFyIHJldCA9IGN1ckNTUyggZWxlbSwgIm9wYWNpdHkiICk7CgkJCQkJCXJldHVybiByZXQgPT09ICIiID8gIjEiIDogcmV0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgoJCS8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkICJweCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllcwoJCWNzc051bWJlcjogewoJCQkiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOiB0cnVlLAoJCQkiY29sdW1uQ291bnQiOiB0cnVlLAoJCQkiZmlsbE9wYWNpdHkiOiB0cnVlLAoJCQkiZmxleEdyb3ciOiB0cnVlLAoJCQkiZmxleFNocmluayI6IHRydWUsCgkJCSJmb250V2VpZ2h0IjogdHJ1ZSwKCQkJImxpbmVIZWlnaHQiOiB0cnVlLAoJCQkib3BhY2l0eSI6IHRydWUsCgkJCSJvcmRlciI6IHRydWUsCgkJCSJvcnBoYW5zIjogdHJ1ZSwKCQkJIndpZG93cyI6IHRydWUsCgkJCSJ6SW5kZXgiOiB0cnVlLAoJCQkiem9vbSI6IHRydWUKCQl9LAoKCQkvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlCgkJLy8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZQoJCWNzc1Byb3BzOiB7CgoJCQkvLyBub3JtYWxpemUgZmxvYXQgY3NzIHByb3BlcnR5CgkJCSJmbG9hdCI6IHN1cHBvcnQuY3NzRmxvYXQgPyAiY3NzRmxvYXQiIDogInN0eWxlRmxvYXQiCgkJfSwKCgkJLy8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGUKCQlzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHsKCgkJCS8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2RlcwoJCQlpZiAoICFlbGVtIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCB8fCAhZWxlbS5zdHlsZSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lCgkJCXZhciByZXQsIHR5cGUsIGhvb2tzLAoJCQkJb3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksCgkJCQlzdHlsZSA9IGVsZW0uc3R5bGU7CgoJCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCQkvLyBnZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uCgkJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07CgoJCQkvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWUKCQkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQkJdHlwZSA9IHR5cGVvZiB2YWx1ZTsKCgkJCQkvLyBDb252ZXJ0ICIrPSIgb3IgIi09IiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSkKCQkJCWlmICggdHlwZSA9PT0gInN0cmluZyIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHsKCQkJCQl2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7CgoJCQkJCS8vIEZpeGVzIGJ1ZyAjOTIzNwoJCQkJCXR5cGUgPSAibnVtYmVyIjsKCQkJCX0KCgkJCQkvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQuIFNlZTogIzcxMTYKCQkJCWlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKQoJCQkJaWYgKCB0eXBlID09PSAibnVtYmVyIiApIHsKCQkJCQl2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gIiIgOiAicHgiICk7CgkJCQl9CgoJCQkJLy8gRml4ZXMgIzg5MDgsIGl0IGNhbiBiZSBkb25lIG1vcmUgY29ycmVjdGx5IGJ5IHNwZWNpZmluZyBzZXR0ZXJzIGluIGNzc0hvb2tzLAoJCQkJLy8gYnV0IGl0IHdvdWxkIG1lYW4gdG8gZGVmaW5lIGVpZ2h0CgkJCQkvLyAoZm9yIGV2ZXJ5IHByb2JsZW1hdGljIHByb3BlcnR5KSBpZGVudGljYWwgZnVuY3Rpb25zCgkJCQlpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gIiIgJiYgbmFtZS5pbmRleE9mKCAiYmFja2dyb3VuZCIgKSA9PT0gMCApIHsKCQkJCQlzdHlsZVsgbmFtZSBdID0gImluaGVyaXQiOwoJCQkJfQoKCQkJCS8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZQoJCQkJaWYgKCAhaG9va3MgfHwgISggInNldCIgaW4gaG9va3MgKSB8fAoJCQkJCSggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHsKCgkJCQkJLy8gU3VwcG9ydDogSUUKCQkJCQkvLyBTd2FsbG93IGVycm9ycyBmcm9tICdpbnZhbGlkJyBDU1MgdmFsdWVzICgjNTUwOSkKCQkJCQl0cnkgewoJCQkJCQlzdHlsZVsgbmFtZSBdID0gdmFsdWU7CgkJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQkJfQoKCQkJfSBlbHNlIHsKCgkJCQkvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmUKCQkJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkgewoKCQkJCQlyZXR1cm4gcmV0OwoJCQkJfQoKCQkJCS8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0CgkJCQlyZXR1cm4gc3R5bGVbIG5hbWUgXTsKCQkJfQoJCX0sCgoJCWNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7CgkJCXZhciBudW0sIHZhbCwgaG9va3MsCgkJCQlvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTsKCgkJCS8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZQoJCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCQkvLyBnZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uCgkJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07CgoJCQkvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZQoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICkgewoJCQkJdmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApOwoJCQl9CgoJCQkvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdAoJCQlpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkgewoJCQkJdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTsKCQkJfQoKCQkJLy9jb252ZXJ0ICJub3JtYWwiIHRvIGNvbXB1dGVkIHZhbHVlCgkJCWlmICggdmFsID09PSAibm9ybWFsIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHsKCQkJCXZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBSZXR1cm4sIGNvbnZlcnRpbmcgdG8gbnVtYmVyIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljCgkJCWlmICggZXh0cmEgPT09ICIiIHx8IGV4dHJhICkgewoJCQkJbnVtID0gcGFyc2VGbG9hdCggdmFsICk7CgkJCQlyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgaXNGaW5pdGUoIG51bSApID8gbnVtIHx8IDAgOiB2YWw7CgkJCX0KCQkJcmV0dXJuIHZhbDsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmVhY2goIFsgImhlaWdodCIsICJ3aWR0aCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gPSB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHsKCQkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJCS8vIGNlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbQoJCQkJCS8vIGhvd2V2ZXIsIGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXQgZnJvbSB0aGlzCgkJCQkJcmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKSApICYmCgkJCQkJCWVsZW0ub2Zmc2V0V2lkdGggPT09IDAgPwoJCQkJCQkJc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7CgkJCQkJCQl9ICkgOgoJCQkJCQkJZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJCX0KCQkJfSwKCgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHsKCQkJCXZhciBzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKTsKCQkJCXJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIGV4dHJhID8KCQkJCQlhdWdtZW50V2lkdGhPckhlaWdodCgKCQkJCQkJZWxlbSwKCQkJCQkJbmFtZSwKCQkJCQkJZXh0cmEsCgkJCQkJCXN1cHBvcnQuYm94U2l6aW5nICYmCgkJCQkJCQlqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCIsCgkJCQkJCXN0eWxlcwoJCQkJCSkgOiAwCgkJCQkpOwoJCQl9CgkJfTsKCX0gKTsKCglpZiAoICFzdXBwb3J0Lm9wYWNpdHkgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzLm9wYWNpdHkgPSB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoKCQkJCS8vIElFIHVzZXMgZmlsdGVycyBmb3Igb3BhY2l0eQoJCQkJcmV0dXJuIHJvcGFjaXR5LnRlc3QoICggY29tcHV0ZWQgJiYgZWxlbS5jdXJyZW50U3R5bGUgPwoJCQkJCWVsZW0uY3VycmVudFN0eWxlLmZpbHRlciA6CgkJCQkJZWxlbS5zdHlsZS5maWx0ZXIgKSB8fCAiIiApID8KCQkJCQkJKCAwLjAxICogcGFyc2VGbG9hdCggUmVnRXhwLiQxICkgKSArICIiIDoKCQkJCQkJY29tcHV0ZWQgPyAiMSIgOiAiIjsKCQkJfSwKCgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJdmFyIHN0eWxlID0gZWxlbS5zdHlsZSwKCQkJCQljdXJyZW50U3R5bGUgPSBlbGVtLmN1cnJlbnRTdHlsZSwKCQkJCQlvcGFjaXR5ID0galF1ZXJ5LmlzTnVtZXJpYyggdmFsdWUgKSA/ICJhbHBoYShvcGFjaXR5PSIgKyB2YWx1ZSAqIDEwMCArICIpIiA6ICIiLAoJCQkJCWZpbHRlciA9IGN1cnJlbnRTdHlsZSAmJiBjdXJyZW50U3R5bGUuZmlsdGVyIHx8IHN0eWxlLmZpbHRlciB8fCAiIjsKCgkJCQkvLyBJRSBoYXMgdHJvdWJsZSB3aXRoIG9wYWNpdHkgaWYgaXQgZG9lcyBub3QgaGF2ZSBsYXlvdXQKCQkJCS8vIEZvcmNlIGl0IGJ5IHNldHRpbmcgdGhlIHpvb20gbGV2ZWwKCQkJCXN0eWxlLnpvb20gPSAxOwoKCQkJCS8vIGlmIHNldHRpbmcgb3BhY2l0eSB0byAxLCBhbmQgbm8gb3RoZXIgZmlsdGVycyBleGlzdCAtCgkJCQkvLyBhdHRlbXB0IHRvIHJlbW92ZSBmaWx0ZXIgYXR0cmlidXRlICM2NjUyCgkJCQkvLyBpZiB2YWx1ZSA9PT0gIiIsIHRoZW4gcmVtb3ZlIGlubGluZSBvcGFjaXR5ICMxMjY4NQoJCQkJaWYgKCAoIHZhbHVlID49IDEgfHwgdmFsdWUgPT09ICIiICkgJiYKCQkJCQkJalF1ZXJ5LnRyaW0oIGZpbHRlci5yZXBsYWNlKCByYWxwaGEsICIiICkgKSA9PT0gIiIgJiYKCQkJCQkJc3R5bGUucmVtb3ZlQXR0cmlidXRlICkgewoKCQkJCQkvLyBTZXR0aW5nIHN0eWxlLmZpbHRlciB0byBudWxsLCAiIiAmICIgIiBzdGlsbCBsZWF2ZSAiZmlsdGVyOiIgaW4gdGhlIGNzc1RleHQKCQkJCQkvLyBpZiAiZmlsdGVyOiIgaXMgcHJlc2VudCBhdCBhbGwsIGNsZWFyVHlwZSBpcyBkaXNhYmxlZCwgd2Ugd2FudCB0byBhdm9pZCB0aGlzCgkJCQkJLy8gc3R5bGUucmVtb3ZlQXR0cmlidXRlIGlzIElFIE9ubHksIGJ1dCBzbyBhcHBhcmVudGx5IGlzIHRoaXMgY29kZSBwYXRoLi4uCgkJCQkJc3R5bGUucmVtb3ZlQXR0cmlidXRlKCAiZmlsdGVyIiApOwoKCQkJCQkvLyBpZiB0aGVyZSBpcyBubyBmaWx0ZXIgc3R5bGUgYXBwbGllZCBpbiBhIGNzcyBydWxlCgkJCQkJLy8gb3IgdW5zZXQgaW5saW5lIG9wYWNpdHksIHdlIGFyZSBkb25lCgkJCQkJaWYgKCB2YWx1ZSA9PT0gIiIgfHwgY3VycmVudFN0eWxlICYmICFjdXJyZW50U3R5bGUuZmlsdGVyICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoKCQkJCS8vIG90aGVyd2lzZSwgc2V0IG5ldyBmaWx0ZXIgdmFsdWVzCgkJCQlzdHlsZS5maWx0ZXIgPSByYWxwaGEudGVzdCggZmlsdGVyICkgPwoJCQkJCWZpbHRlci5yZXBsYWNlKCByYWxwaGEsIG9wYWNpdHkgKSA6CgkJCQkJZmlsdGVyICsgIiAiICsgb3BhY2l0eTsKCQkJfQoJCX07Cgl9CgoJalF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsCgkJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQlpZiAoIGNvbXB1dGVkICkgewoJCQkJcmV0dXJuIHN3YXAoIGVsZW0sIHsgImRpc3BsYXkiOiAiaW5saW5lLWJsb2NrIiB9LAoJCQkJCWN1ckNTUywgWyBlbGVtLCAibWFyZ2luUmlnaHQiIF0gKTsKCQkJfQoJCX0KCSk7CgoJalF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LAoJCWZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJaWYgKCBjb21wdXRlZCApIHsKCQkJCXJldHVybiAoCgkJCQkJcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCAibWFyZ2luTGVmdCIgKSApIHx8CgoJCQkJCS8vIFN1cHBvcnQ6IElFPD0xMSsKCQkJCQkvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvcgoJCQkJCS8vIFN1cHBvcnQ6IElFOCBvbmx5CgkJCQkJLy8gZ2V0Q2xpZW50UmVjdHMoKSBlcnJvcnMgb24gZGlzY29ubmVjdGVkIGVsZW1zCgkJCQkJKCBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApID8KCQkJCQkJZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0KCQkJCQkJCXN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0OwoJCQkJCQkJfSApIDoKCQkJCQkJMAoJCQkJCSkKCQkJCSkgKyAicHgiOwoJCQl9CgkJfQoJKTsKCgkvLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzCglqUXVlcnkuZWFjaCggewoJCW1hcmdpbjogIiIsCgkJcGFkZGluZzogIiIsCgkJYm9yZGVyOiAiV2lkdGgiCgl9LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHsKCQkJZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQl2YXIgaSA9IDAsCgkJCQkJZXhwYW5kZWQgPSB7fSwKCgkJCQkJLy8gYXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nCgkJCQkJcGFydHMgPSB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciID8gdmFsdWUuc3BsaXQoICIgIiApIDogWyB2YWx1ZSBdOwoKCQkJCWZvciAoIDsgaSA8IDQ7IGkrKyApIHsKCQkJCQlleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9CgkJCQkJCXBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTsKCQkJCX0KCgkJCQlyZXR1cm4gZXhwYW5kZWQ7CgkJCX0KCQl9OwoKCQlpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkgewoJCQlqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyOwoJCX0KCX0gKTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJY3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHsKCQkJCXZhciBzdHlsZXMsIGxlbiwKCQkJCQltYXAgPSB7fSwKCQkJCQlpID0gMDsKCgkJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7CgkJCQkJc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7CgkJCQkJbGVuID0gbmFtZS5sZW5ndGg7CgoJCQkJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQkJCQltYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbWFwOwoJCQkJfQoKCQkJCXJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8KCQkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOgoJCQkJCWpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTsKCQkJfSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7CgkJfSwKCQlzaG93OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7CgkJfSwKCQloaWRlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHNob3dIaWRlKCB0aGlzICk7CgkJfSwKCQl0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHsKCQkJaWYgKCB0eXBlb2Ygc3RhdGUgPT09ICJib29sZWFuIiApIHsKCQkJCXJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7CgkJCX0KCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBpc0hpZGRlbiggdGhpcyApICkgewoJCQkJCWpRdWVyeSggdGhpcyApLnNob3coKTsKCQkJCX0gZWxzZSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkuaGlkZSgpOwoJCQkJfQoJCQl9ICk7CgkJfQoJfSApOwoKCglmdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7CgkJcmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTsKCX0KCWpRdWVyeS5Ud2VlbiA9IFR3ZWVuOwoKCVR3ZWVuLnByb3RvdHlwZSA9IHsKCQljb25zdHJ1Y3RvcjogVHdlZW4sCgkJaW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkgewoJCQl0aGlzLmVsZW0gPSBlbGVtOwoJCQl0aGlzLnByb3AgPSBwcm9wOwoJCQl0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0OwoJCQl0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoJCQl0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpOwoJCQl0aGlzLmVuZCA9IGVuZDsKCQkJdGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/ICIiIDogInB4IiApOwoJCX0sCgkJY3VyOiBmdW5jdGlvbigpIHsKCQkJdmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTsKCgkJCXJldHVybiBob29rcyAmJiBob29rcy5nZXQgPwoJCQkJaG9va3MuZ2V0KCB0aGlzICkgOgoJCQkJVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApOwoJCX0sCgkJcnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHsKCQkJdmFyIGVhc2VkLAoJCQkJaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdOwoKCQkJaWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7CgkJCQl0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXSgKCQkJCQlwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZQ==", "base64"));
  res.write(new Buffer("cmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbgoJCQkJKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50OwoJCQl9CgkJCXRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDsKCgkJCWlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7CgkJCQl0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7CgkJCX0KCgkJCWlmICggaG9va3MgJiYgaG9va3Muc2V0ICkgewoJCQkJaG9va3Muc2V0KCB0aGlzICk7CgkJCX0gZWxzZSB7CgkJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7CgkJCX0KCQkJcmV0dXJuIHRoaXM7CgkJfQoJfTsKCglUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7CgoJVHdlZW4ucHJvcEhvb2tzID0gewoJCV9kZWZhdWx0OiB7CgkJCWdldDogZnVuY3Rpb24oIHR3ZWVuICkgewoJCQkJdmFyIHJlc3VsdDsKCgkJCQkvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LAoJCQkJLy8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy4KCQkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fAoJCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkgewoJCQkJCXJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07CgkJCQl9CgoJCQkJLy8gcGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5CgkJCQkvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzCgkJCQkvLyBzbywgc2ltcGxlIHZhbHVlcyBzdWNoIGFzICIxMHB4IiBhcmUgcGFyc2VkIHRvIEZsb2F0LgoJCQkJLy8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyAicm90YXRlKDFyYWQpIiBhcmUgcmV0dXJuZWQgYXMgaXMuCgkJCQlyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCAiIiApOwoKCQkJCS8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgImF1dG8iIGFyZSBjb252ZXJ0ZWQgdG8gMC4KCQkJCXJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gImF1dG8iID8gMCA6IHJlc3VsdDsKCQkJfSwKCQkJc2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgoJCQkJLy8gdXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQgLSB1c2UgY3NzSG9vayBpZiBpdHMgdGhlcmUgLSB1c2UgLnN0eWxlIGlmIGl0cwoJCQkJLy8gYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUKCQkJCWlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHsKCQkJCQlqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApOwoJCQkJfSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCSggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8CgkJCQkJCWpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7CgkJCQkJalF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7CgkJCQl9IGVsc2UgewoJCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQkJCX0KCQkJfQoJCX0KCX07CgoJLy8gU3VwcG9ydDogSUUgPD05CgkvLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKCglUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7CgkJc2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7CgkJCQl0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7CgkJCX0KCQl9Cgl9OwoKCWpRdWVyeS5lYXNpbmcgPSB7CgkJbGluZWFyOiBmdW5jdGlvbiggcCApIHsKCQkJcmV0dXJuIHA7CgkJfSwKCQlzd2luZzogZnVuY3Rpb24oIHAgKSB7CgkJCXJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7CgkJfSwKCQlfZGVmYXVsdDogInN3aW5nIgoJfTsKCglqUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDsKCgkvLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludAoJalF1ZXJ5LmZ4LnN0ZXAgPSB7fTsKCgoKCgl2YXIKCQlmeE5vdywgdGltZXJJZCwKCQlyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywKCQlycnVuID0gL3F1ZXVlSG9va3MkLzsKCgkvLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5CglmdW5jdGlvbiBjcmVhdGVGeE5vdygpIHsKCQl3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCWZ4Tm93ID0gdW5kZWZpbmVkOwoJCX0gKTsKCQlyZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApOwoJfQoKCS8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uCglmdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkgewoJCXZhciB3aGljaCwKCQkJYXR0cnMgPSB7IGhlaWdodDogdHlwZSB9LAoJCQlpID0gMDsKCgkJLy8gaWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLAoJCS8vIGlmIHdlIGRvbid0IGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHQKCQlpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDsKCQlmb3IgKCA7IGkgPCA0IDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkgewoJCQl3aGljaCA9IGNzc0V4cGFuZFsgaSBdOwoJCQlhdHRyc1sgIm1hcmdpbiIgKyB3aGljaCBdID0gYXR0cnNbICJwYWRkaW5nIiArIHdoaWNoIF0gPSB0eXBlOwoJCX0KCgkJaWYgKCBpbmNsdWRlV2lkdGggKSB7CgkJCWF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7CgkJfQoKCQlyZXR1cm4gYXR0cnM7Cgl9CgoJZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7CgkJdmFyIHR3ZWVuLAoJCQljb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyAiKiIgXSApLAoJCQlpbmRleCA9IDAsCgkJCWxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoOwoJCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCWlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7CgoJCQkJLy8gd2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHkKCQkJCXJldHVybiB0d2VlbjsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHsKCQkvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovCgkJdmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LAoJCQlhbmltID0gdGhpcywKCQkJb3JpZyA9IHt9LAoJCQlzdHlsZSA9IGVsZW0uc3R5bGUsCgkJCWhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW4oIGVsZW0gKSwKCQkJZGF0YVNob3cgPSBqUXVlcnkuX2RhdGEoIGVsZW0sICJmeHNob3ciICk7CgoJCS8vIGhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXMKCQlpZiAoICFvcHRzLnF1ZXVlICkgewoJCQlob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgImZ4IiApOwoJCQlpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7CgkJCQlob29rcy51bnF1ZXVlZCA9IDA7CgkJCQlvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTsKCQkJCWhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoICFob29rcy51bnF1ZXVlZCApIHsKCQkJCQkJb2xkZmlyZSgpOwoJCQkJCX0KCQkJCX07CgkJCX0KCQkJaG9va3MudW5xdWV1ZWQrKzsKCgkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCQkvLyBkb2luZyB0aGlzIG1ha2VzIHN1cmUgdGhhdCB0aGUgY29tcGxldGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZAoJCQkJLy8gYmVmb3JlIHRoaXMgY29tcGxldGVzCgkJCQlhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7CgkJCQkJaG9va3MudW5xdWV1ZWQtLTsKCQkJCQlpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sICJmeCIgKS5sZW5ndGggKSB7CgkJCQkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQkJCQl9CgkJCQl9ICk7CgkJCX0gKTsKCQl9CgoJCS8vIGhlaWdodC93aWR0aCBvdmVyZmxvdyBwYXNzCgkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggImhlaWdodCIgaW4gcHJvcHMgfHwgIndpZHRoIiBpbiBwcm9wcyApICkgewoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0CgkJCS8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUUgZG9lcyBub3QKCQkJLy8gY2hhbmdlIHRoZSBvdmVyZmxvdyBhdHRyaWJ1dGUgd2hlbiBvdmVyZmxvd1ggYW5kCgkJCS8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlCgkJCW9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdOwoKCQkJLy8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGgKCQkJLy8gYW5pbWF0aW9ucyBvbiBpbmxpbmUgZWxlbWVudHMgdGhhdCBhcmUgaGF2aW5nIHdpZHRoL2hlaWdodCBhbmltYXRlZAoJCQlkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICk7CgoJCQkvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSAibm9uZSIKCQkJY2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gIm5vbmUiID8KCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgIm9sZGRpc3BsYXkiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7CgoJCQlpZiAoIGNoZWNrRGlzcGxheSA9PT0gImlubGluZSIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgImZsb2F0IiApID09PSAibm9uZSIgKSB7CgoJCQkJLy8gaW5saW5lLWxldmVsIGVsZW1lbnRzIGFjY2VwdCBpbmxpbmUtYmxvY2s7CgkJCQkvLyBibG9jay1sZXZlbCBlbGVtZW50cyBuZWVkIHRvIGJlIGlubGluZSB3aXRoIGxheW91dAoJCQkJaWYgKCAhc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0IHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgPT09ICJpbmxpbmUiICkgewoJCQkJCXN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsKCQkJCX0gZWxzZSB7CgkJCQkJc3R5bGUuem9vbSA9IDE7CgkJCQl9CgkJCX0KCQl9CgoJCWlmICggb3B0cy5vdmVyZmxvdyApIHsKCQkJc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKCQkJaWYgKCAhc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzKCkgKSB7CgkJCQlhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7CgkJCQkJc3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07CgkJCQkJc3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdOwoJCQkJCXN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTsKCQkJCX0gKTsKCQkJfQoJCX0KCgkJLy8gc2hvdy9oaWRlIHBhc3MKCQlmb3IgKCBwcm9wIGluIHByb3BzICkgewoJCQl2YWx1ZSA9IHByb3BzWyBwcm9wIF07CgkJCWlmICggcmZ4dHlwZXMuZXhlYyggdmFsdWUgKSApIHsKCQkJCWRlbGV0ZSBwcm9wc1sgcHJvcCBdOwoJCQkJdG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSAidG9nZ2xlIjsKCQkJCWlmICggdmFsdWUgPT09ICggaGlkZGVuID8gImhpZGUiIDogInNob3ciICkgKSB7CgoJCQkJCS8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cKCQkJCQkvLyBhbmQgd2UgYXJlIGdvaW5nIHRvIHByb2NlZWQgd2l0aCBzaG93LCB3ZSBzaG91bGQgcHJldGVuZCB0byBiZSBoaWRkZW4KCQkJCQlpZiAoIHZhbHVlID09PSAic2hvdyIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQloaWRkZW4gPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCX0KCQkJCW9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7CgoJCQkvLyBBbnkgbm9uLWZ4IHZhbHVlIHN0b3BzIHVzIGZyb20gcmVzdG9yaW5nIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlCgkJCX0gZWxzZSB7CgkJCQlkaXNwbGF5ID0gdW5kZWZpbmVkOwoJCQl9CgkJfQoKCQlpZiAoICFqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkgewoJCQlpZiAoIGRhdGFTaG93ICkgewoJCQkJaWYgKCAiaGlkZGVuIiBpbiBkYXRhU2hvdyApIHsKCQkJCQloaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlkYXRhU2hvdyA9IGpRdWVyeS5fZGF0YSggZWxlbSwgImZ4c2hvdyIsIHt9ICk7CgkJCX0KCgkJCS8vIHN0b3JlIHN0YXRlIGlmIGl0cyB0b2dnbGUgLSBlbmFibGVzIC5zdG9wKCkudG9nZ2xlKCkgdG8gInJldmVyc2UiCgkJCWlmICggdG9nZ2xlICkgewoJCQkJZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjsKCQkJfQoJCQlpZiAoIGhpZGRlbiApIHsKCQkJCWpRdWVyeSggZWxlbSApLnNob3coKTsKCQkJfSBlbHNlIHsKCQkJCWFuaW0uZG9uZSggZnVuY3Rpb24oKSB7CgkJCQkJalF1ZXJ5KCBlbGVtICkuaGlkZSgpOwoJCQkJfSApOwoJCQl9CgkJCWFuaW0uZG9uZSggZnVuY3Rpb24oKSB7CgkJCQl2YXIgcHJvcDsKCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgImZ4c2hvdyIgKTsKCQkJCWZvciAoIHByb3AgaW4gb3JpZyApIHsKCQkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApOwoJCQkJfQoJCQl9ICk7CgkJCWZvciAoIHByb3AgaW4gb3JpZyApIHsKCQkJCXR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7CgoJCQkJaWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7CgkJCQkJZGF0YVNob3dbIHByb3AgXSA9IHR3ZWVuLnN0YXJ0OwoJCQkJCWlmICggaGlkZGVuICkgewoJCQkJCQl0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDsKCQkJCQkJdHdlZW4uc3RhcnQgPSBwcm9wID09PSAid2lkdGgiIHx8IHByb3AgPT09ICJoZWlnaHQiID8gMSA6IDA7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCS8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZQoJCX0gZWxzZSBpZiAoICggZGlzcGxheSA9PT0gIm5vbmUiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkgKSA9PT0gImlubGluZSIgKSB7CgkJCXN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5OwoJCX0KCX0KCglmdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHsKCQl2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzOwoKCQkvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3MKCQlmb3IgKCBpbmRleCBpbiBwcm9wcyApIHsKCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7CgkJCWVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTsKCQkJdmFsdWUgPSBwcm9wc1sgaW5kZXggXTsKCQkJaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHsKCQkJCWVhc2luZyA9IHZhbHVlWyAxIF07CgkJCQl2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTsKCQkJfQoKCQkJaWYgKCBpbmRleCAhPT0gbmFtZSApIHsKCQkJCXByb3BzWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCWRlbGV0ZSBwcm9wc1sgaW5kZXggXTsKCQkJfQoKCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTsKCQkJaWYgKCBob29rcyAmJiAiZXhwYW5kIiBpbiBob29rcyApIHsKCQkJCXZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApOwoJCQkJZGVsZXRlIHByb3BzWyBuYW1lIF07CgoJCQkJLy8gbm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbnQgb3ZlcndyaXRlIGtleXMgYWxyZWFkeSBwcmVzZW50LgoJCQkJLy8gYWxzbyAtIHJldXNpbmcgJ2luZGV4JyBmcm9tIGFib3ZlIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCAibmFtZSIKCQkJCWZvciAoIGluZGV4IGluIHZhbHVlICkgewoJCQkJCWlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHsKCQkJCQkJcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTsKCQkJCQkJc3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZzsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlzcGVjaWFsRWFzaW5n", "base64"));
  res.write(new Buffer("WyBuYW1lIF0gPSBlYXNpbmc7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkgewoJCXZhciByZXN1bHQsCgkJCXN0b3BwZWQsCgkJCWluZGV4ID0gMCwKCQkJbGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLAoJCQlkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7CgoJCQkJLy8gZG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yCgkJCQlkZWxldGUgdGljay5lbGVtOwoJCQl9ICksCgkJCXRpY2sgPSBmdW5jdGlvbigpIHsKCQkJCWlmICggc3RvcHBlZCApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQl2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLAoJCQkJCXJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSwKCgkJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCQkvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpCgkJCQkJdGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLAoJCQkJCXBlcmNlbnQgPSAxIC0gdGVtcCwKCQkJCQlpbmRleCA9IDAsCgkJCQkJbGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7CgoJCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTsKCQkJCX0KCgkJCQlkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTsKCgkJCQlpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHsKCQkJCQlyZXR1cm4gcmVtYWluaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSwKCQkJYW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSggewoJCQkJZWxlbTogZWxlbSwKCQkJCXByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLAoJCQkJb3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwgewoJCQkJCXNwZWNpYWxFYXNpbmc6IHt9LAoJCQkJCWVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdAoJCQkJfSwgb3B0aW9ucyApLAoJCQkJb3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLAoJCQkJb3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLAoJCQkJc3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLAoJCQkJZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sCgkJCQl0d2VlbnM6IFtdLAoJCQkJY3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7CgkJCQkJdmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLAoJCQkJCQkJYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApOwoJCQkJCWFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTsKCQkJCQlyZXR1cm4gdHdlZW47CgkJCQl9LAoJCQkJc3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7CgkJCQkJdmFyIGluZGV4ID0gMCwKCgkJCQkJCS8vIGlmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVucwoJCQkJCQkvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnQKCQkJCQkJbGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDsKCQkJCQlpZiAoIHN0b3BwZWQgKSB7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0KCQkJCQlzdG9wcGVkID0gdHJ1ZTsKCQkJCQlmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHsKCQkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTsKCQkJCQl9CgoJCQkJCS8vIHJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWUKCQkJCQkvLyBvdGhlcndpc2UsIHJlamVjdAoJCQkJCWlmICggZ290b0VuZCApIHsKCQkJCQkJZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApOwoJCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTsKCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCX0gKSwKCQkJcHJvcHMgPSBhbmltYXRpb24ucHJvcHM7CgoJCXByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7CgoJCWZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkgewoJCQlyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApOwoJCQlpZiAoIHJlc3VsdCApIHsKCQkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7CgkJCQkJalF1ZXJ5Ll9xdWV1ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID0KCQkJCQkJalF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7CgkJCQl9CgkJCQlyZXR1cm4gcmVzdWx0OwoJCQl9CgkJfQoKCQlqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApOwoKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkgewoJCQlhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTsKCQl9CgoJCWpRdWVyeS5meC50aW1lcigKCQkJalF1ZXJ5LmV4dGVuZCggdGljaywgewoJCQkJZWxlbTogZWxlbSwKCQkJCWFuaW06IGFuaW1hdGlvbiwKCQkJCXF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZQoJCQl9ICkKCQkpOwoKCQkvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9ucwoJCXJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzICkKCQkJLmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlICkKCQkJLmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKQoJCQkuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTsKCX0KCglqUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7CgoJCXR3ZWVuZXJzOiB7CgkJCSIqIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJCQl2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApOwoJCQkJYWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7CgkJCQlyZXR1cm4gdHdlZW47CgkJCX0gXQoJCX0sCgoJCXR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHByb3BzICkgKSB7CgkJCQljYWxsYmFjayA9IHByb3BzOwoJCQkJcHJvcHMgPSBbICIqIiBdOwoJCQl9IGVsc2UgewoJCQkJcHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdHdoaXRlICk7CgkJCX0KCgkJCXZhciBwcm9wLAoJCQkJaW5kZXggPSAwLAoJCQkJbGVuZ3RoID0gcHJvcHMubGVuZ3RoOwoKCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQlwcm9wID0gcHJvcHNbIGluZGV4IF07CgkJCQlBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdOwoJCQkJQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfQoJCX0sCgoJCXByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLAoKCQlwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHsKCQkJaWYgKCBwcmVwZW5kICkgewoJCQkJQW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfSBlbHNlIHsKCQkJCUFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7CgkJCX0KCQl9Cgl9ICk7CgoJalF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkgewoJCXZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09ICJvYmplY3QiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7CgkJCWNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8CgkJCQlqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCwKCQkJZHVyYXRpb246IHNwZWVkLAoJCQllYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmcKCQl9OwoKCQlvcHQuZHVyYXRpb24gPSBqUXVlcnkuZngub2ZmID8gMCA6IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09ICJudW1iZXIiID8gb3B0LmR1cmF0aW9uIDoKCQkJb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPwoJCQkJalF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0OwoKCQkvLyBub3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiAiZngiCgkJaWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7CgkJCW9wdC5xdWV1ZSA9ICJmeCI7CgkJfQoKCQkvLyBRdWV1ZWluZwoJCW9wdC5vbGQgPSBvcHQuY29tcGxldGU7CgoJCW9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7CgkJCQlvcHQub2xkLmNhbGwoIHRoaXMgKTsKCQkJfQoKCQkJaWYgKCBvcHQucXVldWUgKSB7CgkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7CgkJCX0KCQl9OwoKCQlyZXR1cm4gb3B0OwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkgewoKCQkJLy8gc2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwCgkJCXJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoICJvcGFjaXR5IiwgMCApLnNob3coKQoKCQkJCS8vIGFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZAoJCQkJLmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9LAoJCWFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJdmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSwKCQkJCW9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSwKCQkJCWRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7CgoJCQkJCS8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0CgkJCQkJdmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApOwoKCQkJCQkvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHkKCQkJCQlpZiAoIGVtcHR5IHx8IGpRdWVyeS5fZGF0YSggdGhpcywgImZpbmlzaCIgKSApIHsKCQkJCQkJYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJfQoJCQkJfTsKCQkJCWRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uOwoKCQkJcmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgPwoJCQkJdGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDoKCQkJCXRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTsKCQl9LAoJCXN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkgewoJCQl2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkgewoJCQkJdmFyIHN0b3AgPSBob29rcy5zdG9wOwoJCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCQlzdG9wKCBnb3RvRW5kICk7CgkJCX07CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWdvdG9FbmQgPSBjbGVhclF1ZXVlOwoJCQkJY2xlYXJRdWV1ZSA9IHR5cGU7CgkJCQl0eXBlID0gdW5kZWZpbmVkOwoJCQl9CgkJCWlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXRoaXMucXVldWUoIHR5cGUgfHwgImZ4IiwgW10gKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgZGVxdWV1ZSA9IHRydWUsCgkJCQkJaW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArICJxdWV1ZUhvb2tzIiwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKTsKCgkJCQlpZiAoIGluZGV4ICkgewoJCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7CgkJCQkJCXN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJZm9yICggaW5kZXggaW4gZGF0YSApIHsKCQkJCQkJaWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7CgkJCQkJCQlzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYKCQkJCQkJKCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7CgoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7CgkJCQkJCWRlcXVldWUgPSBmYWxzZTsKCQkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gc3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZAoJCQkJLy8gdGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaCB3aWxsIGRlcXVldWUKCQkJCS8vIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kCgkJCQlpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7CgkJCQkJalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgkJZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHsKCQkJaWYgKCB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgkJCX0KCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5kZXgsCgkJCQkJZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApLAoJCQkJCXF1ZXVlID0gZGF0YVsgdHlwZSArICJxdWV1ZSIgXSwKCQkJCQlob29rcyA9IGRhdGFbIHR5cGUgKyAicXVldWVIb29rcyIgXSwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDsKCgkJCQkvLyBlbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhCgkJCQlkYXRhLmZpbmlzaCA9IHRydWU7CgoJCQkJLy8gZW1wdHkgdGhlIHF1ZXVlIGZpcnN0CgkJCQlqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7CgoJCQkJaWYgKCBob29rcyAmJiBob29rcy5zdG9wICkgewoJCQkJCWhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApOwoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgewoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJCXRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCQkJCWlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkgewoJCQkJCQlxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyB0dXJuIG9mZiBmaW5pc2hpbmcgZmxhZwoJCQkJZGVsZXRlIGRhdGEuZmluaXNoOwoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5lYWNoKCBbICJ0b2dnbGUiLCAic2hvdyIsICJoaWRlIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQl2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSAiYm9vbGVhbiIgPwoJCQkJY3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDoKCQkJCXRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9OwoJfSApOwoKCS8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnMKCWpRdWVyeS5lYWNoKCB7CgkJc2xpZGVEb3duOiBnZW5GeCggInNob3ciICksCgkJc2xpZGVVcDogZ2VuRngoICJoaWRlIiApLAoJCXNsaWRlVG9nZ2xlOiBnZW5GeCggInRvZ2dsZSIgKSwKCQlmYWRlSW46IHsgb3BhY2l0eTogInNob3ciIH0sCgkJZmFkZU91dDogeyBvcGFjaXR5OiAiaGlkZSIgfSwKCQlmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6ICJ0b2dnbGUiIH0KCX0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7CgkJfTsKCX0gKTsKCglqUXVlcnkudGltZXJzID0gW107CglqUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkgewoJCXZhciB0aW1lciwKCQkJdGltZXJzID0galF1ZXJ5LnRpbWVycywKCQkJaSA9IDA7CgoJCWZ4Tm93ID0galF1ZXJ5Lm5vdygpOwoKCQlmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7CgkJCXRpbWVyID0gdGltZXJzWyBpIF07CgoJCQkvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWQKCQkJaWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7CgkJCQl0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTsKCQkJfQoJCX0KCgkJaWYgKCAhdGltZXJzLmxlbmd0aCApIHsKCQkJalF1ZXJ5LmZ4LnN0b3AoKTsKCQl9CgkJZnhOb3cgPSB1bmRlZmluZWQ7Cgl9OwoKCWpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHsKCQlqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7CgkJaWYgKCB0aW1lcigpICkgewoJCQlqUXVlcnkuZnguc3RhcnQoKTsKCQl9IGVsc2UgewoJCQlqUXVlcnkudGltZXJzLnBvcCgpOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LmludGVydmFsID0gMTM7CgoJalF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7CgkJaWYgKCAhdGltZXJJZCApIHsKCQkJdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHsKCQl3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApOwoJCXRpbWVySWQgPSBudWxsOwoJfTsKCglqUXVlcnkuZnguc3BlZWRzID0gewoJCXNsb3c6IDYwMCwKCQlmYXN0OiAyMDAsCgoJCS8vIERlZmF1bHQgc3BlZWQKCQlfZGVmYXVsdDogNDAwCgl9OwoKCgkvLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uCgkvLyBodHRwOi8=", "base64"));
  res.write(new Buffer("L3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5LwoJalF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7CgkJdGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTsKCQl0eXBlID0gdHlwZSB8fCAiZngiOwoKCQlyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkgewoJCQl2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7CgkJCWhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJCXdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXQgKTsKCQkJfTsKCQl9ICk7Cgl9OwoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBhLAoJCQlpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJpbnB1dCIgKSwKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSwKCQkJc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggInNlbGVjdCIgKSwKCQkJb3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAib3B0aW9uIiApICk7CgoJCS8vIFNldHVwCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQlkaXYuc2V0QXR0cmlidXRlKCAiY2xhc3NOYW1lIiwgInQiICk7CgkJZGl2LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iOwoJCWEgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJhIiApWyAwIF07CgoJCS8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSkKCQkvLyBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpCgkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJjaGVja2JveCIgKTsKCQlkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7CgoJCWEgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJhIiApWyAwIF07CgoJCS8vIEZpcnN0IGJhdGNoIG9mIHRlc3RzLgoJCWEuc3R5bGUuY3NzVGV4dCA9ICJ0b3A6MXB4IjsKCgkJLy8gVGVzdCBzZXRBdHRyaWJ1dGUgb24gY2FtZWxDYXNlIGNsYXNzLgoJCS8vIElmIGl0IHdvcmtzLCB3ZSBuZWVkIGF0dHJGaXhlcyB3aGVuIGRvaW5nIGdldC9zZXRBdHRyaWJ1dGUgKGllNi83KQoJCXN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlID0gZGl2LmNsYXNzTmFtZSAhPT0gInQiOwoKCQkvLyBHZXQgdGhlIHN0eWxlIGluZm9ybWF0aW9uIGZyb20gZ2V0QXR0cmlidXRlCgkJLy8gKElFIHVzZXMgLmNzc1RleHQgaW5zdGVhZCkKCQlzdXBwb3J0LnN0eWxlID0gL3RvcC8udGVzdCggYS5nZXRBdHRyaWJ1dGUoICJzdHlsZSIgKSApOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCBVUkxzIGFyZW4ndCBtYW5pcHVsYXRlZAoJCS8vIChJRSBub3JtYWxpemVzIGl0IGJ5IGRlZmF1bHQpCgkJc3VwcG9ydC5ocmVmTm9ybWFsaXplZCA9IGEuZ2V0QXR0cmlidXRlKCAiaHJlZiIgKSA9PT0gIi9hIjsKCgkJLy8gQ2hlY2sgdGhlIGRlZmF1bHQgY2hlY2tib3gvcmFkaW8gdmFsdWUgKCIiIG9uIFdlYktpdDsgIm9uIiBlbHNld2hlcmUpCgkJc3VwcG9ydC5jaGVja09uID0gISFpbnB1dC52YWx1ZTsKCgkJLy8gTWFrZSBzdXJlIHRoYXQgYSBzZWxlY3RlZC1ieS1kZWZhdWx0IG9wdGlvbiBoYXMgYSB3b3JraW5nIHNlbGVjdGVkIHByb3BlcnR5LgoJCS8vIChXZWJLaXQgZGVmYXVsdHMgdG8gZmFsc2UgaW5zdGVhZCBvZiB0cnVlLCBJRSB0b28sIGlmIGl0J3MgaW4gYW4gb3B0Z3JvdXApCgkJc3VwcG9ydC5vcHRTZWxlY3RlZCA9IG9wdC5zZWxlY3RlZDsKCgkJLy8gVGVzdHMgZm9yIGVuY3R5cGUgc3VwcG9ydCBvbiBhIGZvcm0gKCM2NzQzKQoJCXN1cHBvcnQuZW5jdHlwZSA9ICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImZvcm0iICkuZW5jdHlwZTsKCgkJLy8gTWFrZSBzdXJlIHRoYXQgdGhlIG9wdGlvbnMgaW5zaWRlIGRpc2FibGVkIHNlbGVjdHMgYXJlbid0IG1hcmtlZCBhcyBkaXNhYmxlZAoJCS8vIChXZWJLaXQgbWFya3MgdGhlbSBhcyBkaXNhYmxlZCkKCQlzZWxlY3QuZGlzYWJsZWQgPSB0cnVlOwoJCXN1cHBvcnQub3B0RGlzYWJsZWQgPSAhb3B0LmRpc2FibGVkOwoKCQkvLyBTdXBwb3J0OiBJRTggb25seQoJCS8vIENoZWNrIGlmIHdlIGNhbiB0cnVzdCBnZXRBdHRyaWJ1dGUoInZhbHVlIikKCQlpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJpbnB1dCIgKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ2YWx1ZSIsICIiICk7CgkJc3VwcG9ydC5pbnB1dCA9IGlucHV0LmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSAiIjsKCgkJLy8gQ2hlY2sgaWYgYW4gaW5wdXQgbWFpbnRhaW5zIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvCgkJaW5wdXQudmFsdWUgPSAidCI7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJyYWRpbyIgKTsKCQlzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gInQiOwoJfSApKCk7CgoKCXZhciBycmV0dXJuID0gL1xyL2csCgkJcnNwYWNlcyA9IC9bXHgyMFx0XHJcblxmXSsvZzsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJdmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLAoJCQkJZWxlbSA9IHRoaXNbIDAgXTsKCgkJCWlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCQlpZiAoIGVsZW0gKSB7CgkJCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8CgkJCQkJCWpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkJCWlmICgKCQkJCQkJaG9va3MgJiYKCQkJCQkJImdldCIgaW4gaG9va3MgJiYKCQkJCQkJKCByZXQgPSBob29rcy5nZXQoIGVsZW0sICJ2YWx1ZSIgKSApICE9PSB1bmRlZmluZWQKCQkJCQkpIHsKCQkJCQkJcmV0dXJuIHJldDsKCQkJCQl9CgoJCQkJCXJldCA9IGVsZW0udmFsdWU7CgoJCQkJCXJldHVybiB0eXBlb2YgcmV0ID09PSAic3RyaW5nIiA/CgoJCQkJCQkvLyBoYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzCgkJCQkJCXJldC5yZXBsYWNlKCBycmV0dXJuLCAiIiApIDoKCgkJCQkJCS8vIGhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlcgoJCQkJCQlyZXQgPT0gbnVsbCA/ICIiIDogcmV0OwoJCQkJfQoKCQkJCXJldHVybjsKCQkJfQoKCQkJaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApOwoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQl2YXIgdmFsOwoKCQkJCWlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJaWYgKCBpc0Z1bmN0aW9uICkgewoJCQkJCXZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7CgkJCQl9IGVsc2UgewoJCQkJCXZhbCA9IHZhbHVlOwoJCQkJfQoKCQkJCS8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzICIiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nCgkJCQlpZiAoIHZhbCA9PSBudWxsICkgewoJCQkJCXZhbCA9ICIiOwoJCQkJfSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gIm51bWJlciIgKSB7CgkJCQkJdmFsICs9ICIiOwoJCQkJfSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkgewoJCQkJCXZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJCQlyZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICIiIDogdmFsdWUgKyAiIjsKCQkJCQl9ICk7CgkJCQl9CgoJCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkJLy8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmcKCQkJCWlmICggIWhvb2tzIHx8ICEoICJzZXQiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsICJ2YWx1ZSIgKSA9PT0gdW5kZWZpbmVkICkgewoJCQkJCXRoaXMudmFsdWUgPSB2YWw7CgkJCQl9CgkJCX0gKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmV4dGVuZCggewoJCXZhbEhvb2tzOiB7CgkJCW9wdGlvbjogewoJCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInZhbHVlIiApOwoJCQkJCXJldHVybiB2YWwgIT0gbnVsbCA/CgkJCQkJCXZhbCA6CgoJCQkJCQkvLyBTdXBwb3J0OiBJRTEwLTExKwoJCQkJCQkvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpCgkJCQkJCS8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlCgkJCQkJCS8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlCgkJCQkJCWpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICkucmVwbGFjZSggcnNwYWNlcywgIiAiICk7CgkJCQl9CgkJCX0sCgkJCXNlbGVjdDogewoJCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgdmFsdWUsIG9wdGlvbiwKCQkJCQkJb3B0aW9ucyA9IGVsZW0ub3B0aW9ucywKCQkJCQkJaW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsCgkJCQkJCW9uZSA9IGVsZW0udHlwZSA9PT0gInNlbGVjdC1vbmUiIHx8IGluZGV4IDwgMCwKCQkJCQkJdmFsdWVzID0gb25lID8gbnVsbCA6IFtdLAoJCQkJCQltYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aCwKCQkJCQkJaSA9IGluZGV4IDwgMCA/CgkJCQkJCQltYXggOgoJCQkJCQkJb25lID8gaW5kZXggOiAwOwoKCQkJCQkvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zCgkJCQkJZm9yICggOyBpIDwgbWF4OyBpKysgKSB7CgkJCQkJCW9wdGlvbiA9IG9wdGlvbnNbIGkgXTsKCgkJCQkJCS8vIG9sZElFIGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKQoJCQkJCQlpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiYKCgkJCQkJCQkJLy8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cAoJCQkJCQkJCSggc3VwcG9ydC5vcHREaXNhYmxlZCA/CgkJCQkJCQkJCSFvcHRpb24uZGlzYWJsZWQgOgoJCQkJCQkJCQlvcHRpb24uZ2V0QXR0cmlidXRlKCAiZGlzYWJsZWQiICkgPT09IG51bGwgKSAmJgoJCQkJCQkJCSggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8CgkJCQkJCQkJCSFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCAib3B0Z3JvdXAiICkgKSApIHsKCgkJCQkJCQkvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uCgkJCQkJCQl2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7CgoJCQkJCQkJLy8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHMKCQkJCQkJCWlmICggb25lICkgewoJCQkJCQkJCXJldHVybiB2YWx1ZTsKCQkJCQkJCX0KCgkJCQkJCQkvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheQoJCQkJCQkJdmFsdWVzLnB1c2goIHZhbHVlICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCXJldHVybiB2YWx1ZXM7CgkJCQl9LAoKCQkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJCXZhciBvcHRpb25TZXQsIG9wdGlvbiw=", "base64"));
  res.write(new Buffer("CgkJCQkJCW9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsCgkJCQkJCXZhbHVlcyA9IGpRdWVyeS5tYWtlQXJyYXkoIHZhbHVlICksCgkJCQkJCWkgPSBvcHRpb25zLmxlbmd0aDsKCgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCW9wdGlvbiA9IG9wdGlvbnNbIGkgXTsKCgkJCQkJCWlmICggalF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMSApIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRTYKCQkJCQkJCS8vIFdoZW4gbmV3IG9wdGlvbiBlbGVtZW50IGlzIGFkZGVkIHRvIHNlbGVjdCBib3ggd2UgbmVlZCB0bwoJCQkJCQkJLy8gZm9yY2UgcmVmbG93IG9mIG5ld2x5IGFkZGVkIG5vZGUgaW4gb3JkZXIgdG8gd29ya2Fyb3VuZCBkZWxheQoJCQkJCQkJLy8gb2YgaW5pdGlhbGl6YXRpb24gcHJvcGVydGllcwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlvcHRpb24uc2VsZWN0ZWQgPSBvcHRpb25TZXQgPSB0cnVlOwoKCQkJCQkJCX0gY2F0Y2ggKCBfICkgewoKCQkJCQkJCQkvLyBXaWxsIGJlIGV4ZWN1dGVkIG9ubHkgaW4gSUU2CgkJCQkJCQkJb3B0aW9uLnNjcm9sbEhlaWdodDsKCQkJCQkJCX0KCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlvcHRpb24uc2VsZWN0ZWQgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLy8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXQKCQkJCQlpZiAoICFvcHRpb25TZXQgKSB7CgkJCQkJCWVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG9wdGlvbnM7CgkJCQl9CgkJCX0KCQl9Cgl9ICk7CgoJLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXIKCWpRdWVyeS5lYWNoKCBbICJyYWRpbyIsICJjaGVja2JveCIgXSwgZnVuY3Rpb24oKSB7CgkJalF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHsKCQkJCQlyZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KCBlbGVtICkudmFsKCksIHZhbHVlICkgPiAtMSApOwoJCQkJfQoJCQl9CgkJfTsKCQlpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7CgkJCWpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09IG51bGwgPyAib24iIDogZWxlbS52YWx1ZTsKCQkJfTsKCQl9Cgl9ICk7CgoKCgoJdmFyIG5vZGVIb29rLCBib29sSG9vaywKCQlhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZSwKCQlydXNlRGVmYXVsdCA9IC9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksCgkJZ2V0U2V0QXR0cmlidXRlID0gc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsCgkJZ2V0U2V0SW5wdXQgPSBzdXBwb3J0LmlucHV0OwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCQl9LAoKCQlyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApOwoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5leHRlbmQoIHsKCQlhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7CgkJCXZhciByZXQsIGhvb2tzLAoJCQkJblR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQkJLy8gRG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2RlcwoJCQlpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZAoJCQlpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gInVuZGVmaW5lZCIgKSB7CgkJCQlyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7CgkJCX0KCgkJCS8vIEFsbCBhdHRyaWJ1dGVzIGFyZSBsb3dlcmNhc2UKCQkJLy8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZAoJCQlpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHsKCQkJCW5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQlob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fAoJCQkJCSggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IG5vZGVIb29rICk7CgkJCX0KCgkJCWlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJCWlmICggdmFsdWUgPT09IG51bGwgKSB7CgkJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJaWYgKCBob29rcyAmJiAic2V0IiBpbiBob29rcyAmJgoJCQkJCSggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm4gcmV0OwoJCQkJfQoKCQkJCWVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArICIiICk7CgkJCQlyZXR1cm4gdmFsdWU7CgkJCX0KCgkJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoKCQkJcmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApOwoKCQkJLy8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWQKCQkJcmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0OwoJCX0sCgoJCWF0dHJIb29rczogewoJCQl0eXBlOiB7CgkJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCQlpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09ICJyYWRpbyIgJiYKCQkJCQkJalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaW5wdXQiICkgKSB7CgoJCQkJCQkvLyBTZXR0aW5nIHRoZSB0eXBlIG9uIGEgcmFkaW8gYnV0dG9uIGFmdGVyIHRoZSB2YWx1ZSByZXNldHMgdGhlIHZhbHVlIGluIElFOC05CgkJCQkJCS8vIFJlc2V0IHZhbHVlIHRvIGRlZmF1bHQgaW4gY2FzZSB0eXBlIGlzIHNldCBhZnRlciB2YWx1ZSBkdXJpbmcgY3JlYXRpb24KCQkJCQkJdmFyIHZhbCA9IGVsZW0udmFsdWU7CgkJCQkJCWVsZW0uc2V0QXR0cmlidXRlKCAidHlwZSIsIHZhbHVlICk7CgkJCQkJCWlmICggdmFsICkgewoJCQkJCQkJZWxlbS52YWx1ZSA9IHZhbDsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCgkJcmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQl2YXIgbmFtZSwgcHJvcE5hbWUsCgkJCQlpID0gMCwKCQkJCWF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKTsKCgkJCWlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQl3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHsKCQkJCQlwcm9wTmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCgkJCQkJLy8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKQoJCQkJCWlmICggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgKSB7CgoJCQkJCQkvLyBTZXQgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSB0byBmYWxzZQoJCQkJCQlpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkgewoJCQkJCQkJZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlOwoKCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkvLyBBbHNvIGNsZWFyIGRlZmF1bHRDaGVja2VkL2RlZmF1bHRTZWxlY3RlZCAoaWYgYXBwcm9wcmlhdGUpCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQllbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCAiZGVmYXVsdC0iICsgbmFtZSApIF0gPQoJCQkJCQkJCWVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTsKCQkJCQkJfQoKCQkJCQkvLyBTZWUgIzk2OTkgZm9yIGV4cGxhbmF0aW9uIG9mIHRoaXMgYXBwcm9hY2ggKHNldHRpbmcgZmlyc3QsIHRoZW4gcmVtb3ZhbCkKCQkJCQl9IGVsc2UgewoJCQkJCQlqUXVlcnkuYXR0ciggZWxlbSwgbmFtZSwgIiIgKTsKCQkJCQl9CgoJCQkJCWVsZW0ucmVtb3ZlQXR0cmlidXRlKCBnZXRTZXRBdHRyaWJ1dGUgPyBuYW1lIDogcHJvcE5hbWUgKTsKCQkJCX0KCQkJfQoJCX0KCX0gKTsKCgkvLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzCglib29sSG9vayA9IHsKCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHsKCQkJaWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7CgoJCQkJLy8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZQoJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTsKCQkJfSBlbHNlIGlmICggZ2V0U2V0SW5wdXQgJiYgZ2V0U2V0QXR0cmlidXRlIHx8ICFydXNlRGVmYXVsdC50ZXN0KCBuYW1lICkgKSB7CgoJCQkJLy8gSUU8OCBuZWVkcyB0aGUgKnByb3BlcnR5KiBuYW1lCgkJCQllbGVtLnNldEF0dHJpYnV0ZSggIWdldFNldEF0dHJpYnV0ZSAmJiBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUsIG5hbWUgKTsKCgkJCX0gZWxzZSB7CgoJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJLy8gVXNlIGRlZmF1bHRDaGVja2VkIGFuZCBkZWZhdWx0U2VsZWN0ZWQgZm9yIG9sZElFCgkJCQllbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCAiZGVmYXVsdC0iICsgbmFtZSApIF0gPSBlbGVtWyBuYW1lIF0gPSB0cnVlOwoJCQl9CgkJCXJldHVybiBuYW1lOwoJCX0KCX07CgoJalF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXHcrL2cgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJdmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyOwoKCQlpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkgewoJCQlhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCQl2YXIgcmV0LCBoYW5kbGU7CgkJCQlpZiAoICFpc1hNTCApIHsKCgkJCQkJLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlcgoJCQkJCWhhbmRsZSA9IGF0dHJIYW5kbGVbIG5hbWUgXTsKCQkJCQlhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7CgkJCQkJcmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgPwoJCQkJCQluYW1lLnRvTG93ZXJDYXNlKCkgOgoJCQkJCQludWxsOwoJCQkJCWF0dHJIYW5kbGVbIG5hbWUgXSA9IGhhbmRsZTsKCQkJCX0KCQkJCXJldHVybiByZXQ7CgkJCX07CgkJfSBlbHNlIHsKCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJaWYgKCAhaXNYTUwgKSB7CgkJCQkJcmV0dXJuIGVsZW1bIGpRdWVyeS5jYW1lbENhc2UoICJkZWZhdWx0LSIgKyBuYW1lICkgXSA/CgkJCQkJCW5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJCW51bGw7CgkJCQl9CgkJCX07CgkJfQoJfSApOwoKCS8vIGZpeCBvbGRJRSBhdHRyb3BlcnRpZXMKCWlmICggIWdldFNldElucHV0IHx8ICFnZXRTZXRBdHRyaWJ1dGUgKSB7CgkJalF1ZXJ5LmF0dHJIb29rcy52YWx1ZSA9IHsKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApICkgewoKCQkJCQkvLyBEb2VzIG5vdCByZXR1cm4gc28gdGhhdCBzZXRBdHRyaWJ1dGUgaXMgYWxzbyB1c2VkCgkJCQkJZWxlbS5kZWZhdWx0VmFsdWUgPSB2YWx1ZTsKCQkJCX0gZWxzZSB7CgoJCQkJCS8vIFVzZSBub2RlSG9vayBpZiBkZWZpbmVkICgjMTk1NCk7IG90aGVyd2lzZSBzZXRBdHRyaWJ1dGUgaXMgZmluZQoJCQkJCXJldHVybiBub2RlSG9vayAmJiBub2RlSG9vay5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICk7CgkJCQl9CgkJCX0KCQl9OwoJfQoKCS8vIElFNi83IGRvIG5vdCBzdXBwb3J0IGdldHRpbmcvc2V0dGluZyBzb21lIGF0dHJpYnV0ZXMgd2l0aCBnZXQvc2V0QXR0cmlidXRlCglpZiAoICFnZXRTZXRBdHRyaWJ1dGUgKSB7CgoJCS8vIFVzZSB0aGlzIGZvciBhbnkgYXR0cmlidXRlIGluIElFNi83CgkJLy8gVGhpcyBmaXhlcyBhbG1vc3QgZXZlcnkgSUU2LzcgaXNzdWUKCQlub2RlSG9vayA9IHsKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgoJCQkJLy8gU2V0IHRoZSBleGlzdGluZyBvciBjcmVhdGUgYSBuZXcgYXR0cmlidXRlIG5vZGUKCQkJCXZhciByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKTsKCQkJCWlmICggIXJldCApIHsKCQkJCQllbGVtLnNldEF0dHJpYnV0ZU5vZGUoCgkJCQkJCSggcmV0ID0gZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSggbmFtZSApICkKCQkJCQkpOwoJCQkJfQoKCQkJCXJldC52YWx1ZSA9IHZhbHVlICs9ICIiOwoKCQkJCS8vIEJyZWFrIGFzc29jaWF0aW9uIHdpdGggY2xvbmVkIGVsZW1lbnRzIGJ5IGFsc28gdXNpbmcgc2V0QXR0cmlidXRlICgjOTY0NikKCQkJCWlmICggbmFtZSA9PT0gInZhbHVlIiB8fCB2YWx1ZSA9PT0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSApIHsKCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQl9CgkJCX0KCQl9OwoKCQkvLyBTb21lIGF0dHJpYnV0ZXMgYXJlIGNvbnN0cnVjdGVkIHdpdGggZW1wdHktc3RyaW5nIHZhbHVlcyB3aGVuIG5vdCBkZWZpbmVkCgkJYXR0ckhhbmRsZS5pZCA9IGF0dHJIYW5kbGUubmFtZSA9IGF0dHJIYW5kbGUuY29vcmRzID0KCQkJZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJdmFyIHJldDsKCQkJCWlmICggIWlzWE1MICkgewoJCQkJCXJldHVybiAoIHJldCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApICkgJiYgcmV0LnZhbHVlICE9PSAiIiA/CgkJCQkJCXJldC52YWx1ZSA6CgkJCQkJCW51bGw7CgkJCQl9CgkJCX07CgoJCS8vIEZpeGluZyB2YWx1ZSByZXRyaWV2YWwgb24gYSBidXR0b24gcmVxdWlyZXMgdGhpcyBtb2R1bGUKCQlqUXVlcnkudmFsSG9va3MuYnV0dG9uID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQkJdmFyIHJldCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApOwoJCQkJaWYgKCByZXQgJiYgcmV0LnNwZWNpZmllZCApIHsKCQkJCQlyZXR1cm4gcmV0LnZhbHVlOwoJCQkJfQoJCQl9LAoJCQlzZXQ6IG5vZGVIb29rLnNldAoJCX07CgoJCS8vIFNldCBjb250ZW50ZWRpdGFibGUgdG8gZmFsc2Ugb24gcmVtb3ZhbHMoIzEwNDI5KQoJCS8vIFNldHRpbmcgdG8gZW1wdHkgc3RyaW5nIHRocm93cyBhbiBlcnJvciBhcyBhbiBpbnZhbGlkIHZhbHVlCgkJalF1ZXJ5LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGUgPSB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkgewoJCQkJbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSA9PT0gIiIgPyBmYWxzZSA6IHZhbHVlLCBuYW1lICk7CgkJCX0KCQl9OwoKCQkvLyBTZXQgd2lkdGggYW5kIGhlaWdodCB0byBhdXRvIGluc3RlYWQgb2YgMCBvbiBlbXB0eSBzdHJpbmcoIEJ1ZyAjODE1MCApCgkJLy8gVGhpcyBpcyBmb3IgcmVtb3ZhbHMKCQlqUXVlcnkuZWFjaCggWyAid2lkdGgiLCAiaGVpZ2h0IiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQkJalF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdID0gewoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJaWYgKCB2YWx1ZSA9PT0gIiIgKSB7CgkJCQkJCWVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCAiYXV0byIgKTsKCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfTsKCQl9ICk7Cgl9CgoJaWYgKCAhc3VwcG9ydC5zdHlsZSApIHsKCQlqUXVlcnkuYXR0ckhvb2tzLnN0eWxlID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJCS8vIFJldHVybiB1bmRlZmluZWQgaW4gdGhlIGNhc2Ugb2YgZW1wdHkgc3RyaW5nCgkJCQkvLyBOb3RlOiBJRSB1cHBlcmNhc2VzIGNzcyBwcm9wZXJ0eSBuYW1lcywgYnV0IGlmIHdlIHdlcmUgdG8gLnRvTG93ZXJDYXNlKCkKCQkJCS8vIC5jc3NUZXh0LCB0aGF0IHdvdWxkIGRlc3Ryb3kgY2FzZSBzZW5zaXRpdml0eSBpbiBVUkwncywgbGlrZSBpbiAiYmFja2dyb3VuZCIKCQkJCXJldHVybiBlbGVtLnN0eWxlLmNzc1RleHQgfHwgdW5kZWZpbmVkOwoJCQl9LAoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCXJldHVybiAoIGVsZW0uc3R5bGUuY3NzVGV4dCA9IHZhbHVlICsgIiIgKTsKCQkJfQoJCX07Cgl9CgoKCgoJdmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258", "base64"));
  res.write(new Buffer("b2JqZWN0KSQvaSwKCQlyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlwcm9wOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCQl9LAoKCQlyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHsKCQkJbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgoJCQkJLy8gdHJ5L2NhdGNoIGhhbmRsZXMgY2FzZXMgd2hlcmUgSUUgYmFsa3MgKHN1Y2ggYXMgcmVtb3ZpbmcgYSBwcm9wZXJ0eSBvbiB3aW5kb3cpCgkJCQl0cnkgewoJCQkJCXRoaXNbIG5hbWUgXSA9IHVuZGVmaW5lZDsKCQkJCQlkZWxldGUgdGhpc1sgbmFtZSBdOwoJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5leHRlbmQoIHsKCQlwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7CgkJCXZhciByZXQsIGhvb2tzLAoJCQkJblR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQkJLy8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2RlcwoJCQlpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHsKCgkJCQkvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzCgkJCQluYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lOwoJCQkJaG9va3MgPSBqUXVlcnkucHJvcEhvb2tzWyBuYW1lIF07CgkJCX0KCgkJCWlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJCWlmICggaG9va3MgJiYgInNldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQlyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApOwoJCQl9CgoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCXJldHVybiBlbGVtWyBuYW1lIF07CgkJfSwKCgkJcHJvcEhvb2tzOiB7CgkJCXRhYkluZGV4OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJCQkvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGUKCQkJCQkvLyBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXQKCQkJCQkvLyBodHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0LwoJCQkJCS8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpCgkJCQkJdmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInRhYmluZGV4IiApOwoKCQkJCQlyZXR1cm4gdGFiaW5kZXggPwoJCQkJCQlwYXJzZUludCggdGFiaW5kZXgsIDEwICkgOgoJCQkJCQlyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fAoJCQkJCQkJcmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgZWxlbS5ocmVmID8KCQkJCQkJCQkwIDoKCQkJCQkJCQktMTsKCQkJCX0KCQkJfQoJCX0sCgoJCXByb3BGaXg6IHsKCQkJImZvciI6ICJodG1sRm9yIiwKCQkJImNsYXNzIjogImNsYXNzTmFtZSIKCQl9Cgl9ICk7CgoJLy8gU29tZSBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBzcGVjaWFsIGNhbGwgb24gSUUKCS8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHgKCWlmICggIXN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQgKSB7CgoJCS8vIGhyZWYvc3JjIHByb3BlcnR5IHNob3VsZCBnZXQgdGhlIGZ1bGwgbm9ybWFsaXplZCBVUkwgKCMxMDI5OS8jMTI5MTUpCgkJalF1ZXJ5LmVhY2goIFsgImhyZWYiLCAic3JjIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQkJalF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdID0gewoJCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIDQgKTsKCQkJCX0KCQkJfTsKCQl9ICk7Cgl9CgoJLy8gU3VwcG9ydDogU2FmYXJpLCBJRTkrCgkvLyBBY2Nlc3NpbmcgdGhlIHNlbGVjdGVkSW5kZXggcHJvcGVydHkKCS8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWQKCS8vIG9uIHRoZSBvcHRpb24KCS8vIFRoZSBnZXR0ZXIgZW5zdXJlcyBhIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkCgkvLyB3aGVuIGluIGFuIG9wdGdyb3VwCglpZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkgewoJCWpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlOwoKCQkJCWlmICggcGFyZW50ICkgewoJCQkJCXBhcmVudC5zZWxlY3RlZEluZGV4OwoKCQkJCQkvLyBNYWtlIHN1cmUgdGhhdCBpdCBhbHNvIHdvcmtzIHdpdGggb3B0Z3JvdXBzLCBzZWUgIzU3MDEKCQkJCQlpZiAoIHBhcmVudC5wYXJlbnROb2RlICkgewoJCQkJCQlwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBudWxsOwoJCQl9LAoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsKCQkJCWlmICggcGFyZW50ICkgewoJCQkJCXBhcmVudC5zZWxlY3RlZEluZGV4OwoKCQkJCQlpZiAoIHBhcmVudC5wYXJlbnROb2RlICkgewoJCQkJCQlwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX07Cgl9CgoJalF1ZXJ5LmVhY2goIFsKCQkidGFiSW5kZXgiLAoJCSJyZWFkT25seSIsCgkJIm1heExlbmd0aCIsCgkJImNlbGxTcGFjaW5nIiwKCQkiY2VsbFBhZGRpbmciLAoJCSJyb3dTcGFuIiwKCQkiY29sU3BhbiIsCgkJInVzZU1hcCIsCgkJImZyYW1lQm9yZGVyIiwKCQkiY29udGVudEVkaXRhYmxlIgoJXSwgZnVuY3Rpb24oKSB7CgkJalF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpczsKCX0gKTsKCgkvLyBJRTYvNyBjYWxsIGVuY3R5cGUgZW5jb2RpbmcKCWlmICggIXN1cHBvcnQuZW5jdHlwZSApIHsKCQlqUXVlcnkucHJvcEZpeC5lbmN0eXBlID0gImVuY29kaW5nIjsKCX0KCgoKCgl2YXIgcmNsYXNzID0gL1tcdFxyXG5cZl0vZzsKCglmdW5jdGlvbiBnZXRDbGFzcyggZWxlbSApIHsKCQlyZXR1cm4galF1ZXJ5LmF0dHIoIGVsZW0sICJjbGFzcyIgKSB8fCAiIjsKCX0KCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJYWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQkJaSA9IDA7CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgdmFsdWUgKSB7CgkJCQljbGFzc2VzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdOwoKCQkJCXdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHsKCQkJCQljdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7CgkJCQkJY3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCQkoICIgIiArIGN1clZhbHVlICsgIiAiICkucmVwbGFjZSggcmNsYXNzLCAiICIgKTsKCgkJCQkJaWYgKCBjdXIgKSB7CgkJCQkJCWogPSAwOwoJCQkJCQl3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkgewoJCQkJCQkJaWYgKCBjdXIuaW5kZXhPZiggIiAiICsgY2xhenogKyAiICIgKSA8IDAgKSB7CgkJCQkJCQkJY3VyICs9IGNsYXp6ICsgIiAiOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLgoJCQkJCQlmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApOwoJCQkJCQlpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkgewoJCQkJCQkJalF1ZXJ5LmF0dHIoIGVsZW0sICJjbGFzcyIsIGZpbmFsVmFsdWUgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQkJaSA9IDA7CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlpZiAoICFhcmd1bWVudHMubGVuZ3RoICkgewoJCQkJcmV0dXJuIHRoaXMuYXR0ciggImNsYXNzIiwgIiIgKTsKCQkJfQoKCQkJaWYgKCB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmIHZhbHVlICkgewoJCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQkJY3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApOwoKCQkJCQkvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKQoJCQkJCWN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkJKCAiICIgKyBjdXJWYWx1ZSArICIgIiApLnJlcGxhY2UoIHJjbGFzcywgIiAiICk7CgoJCQkJCWlmICggY3VyICkgewoJCQkJCQlqID0gMDsKCQkJCQkJd2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHsKCgkJCQkJCQkvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzCgkJCQkJCQl3aGlsZSAoIGN1ci5pbmRleE9mKCAiICIgKyBjbGF6eiArICIgIiApID4gLTEgKSB7CgkJCQkJCQkJY3VyID0gY3VyLnJlcGxhY2UoICIgIiArIGNsYXp6ICsgIiAiLCAiICIgKTsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy4KCQkJCQkJZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTsKCQkJCQkJaWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHsKCQkJCQkJCWpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiLCBmaW5hbFZhbHVlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCXRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkgewoJCQl2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTsKCgkJCWlmICggdHlwZW9mIHN0YXRlVmFsID09PSAiYm9vbGVhbiIgJiYgdHlwZSA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTsKCQkJfQoKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCWpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKAoJCQkJCQl2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLAoJCQkJCQlzdGF0ZVZhbAoJCQkJCSk7CgkJCQl9ICk7CgkJCX0KCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJdmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lczsKCgkJCQlpZiAoIHR5cGUgPT09ICJzdHJpbmciICkgewoKCQkJCQkvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lcwoJCQkJCWkgPSAwOwoJCQkJCXNlbGYgPSBqUXVlcnkoIHRoaXMgKTsKCQkJCQljbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdOwoKCQkJCQl3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHsKCgkJCQkJCS8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdAoJCQkJCQlpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkgewoJCQkJCQkJc2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZQoJCQkJfSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSAiYm9vbGVhbiIgKSB7CgkJCQkJY2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTsKCQkJCQlpZiAoIGNsYXNzTmFtZSApIHsKCgkJCQkJCS8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXQKCQkJCQkJalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiX19jbGFzc05hbWVfXyIsIGNsYXNzTmFtZSApOwoJCQkJCX0KCgkJCQkJLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgImZhbHNlIiwKCQkJCQkvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLgoJCQkJCS8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksCgkJCQkJLy8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLgoJCQkJCWpRdWVyeS5hdHRyKCB0aGlzLCAiY2xhc3MiLAoJCQkJCQljbGFzc05hbWUgfHwgdmFsdWUgPT09IGZhbHNlID8KCQkJCQkJIiIgOgoJCQkJCQlqUXVlcnkuX2RhdGEoIHRoaXMsICJfX2NsYXNzTmFtZV9fIiApIHx8ICIiCgkJCQkJKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCWhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXZhciBjbGFzc05hbWUsIGVsZW0sCgkJCQlpID0gMDsKCgkJCWNsYXNzTmFtZSA9ICIgIiArIHNlbGVjdG9yICsgIiAiOwoJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkoICIgIiArIGdldENsYXNzKCBlbGVtICkgKyAiICIgKS5yZXBsYWNlKCByY2xhc3MsICIgIiApCgkJCQkJCS5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xCgkJCQkpIHsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0gKTsKCgoKCgkvLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uCgoKCWpRdWVyeS5lYWNoKCAoICJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayAiICsKCQkibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgIiArCgkJImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiICkuc3BsaXQoICIgIiApLAoJCWZ1bmN0aW9uKCBpLCBuYW1lICkgewoKCQkvLyBIYW5kbGUgZXZlbnQgYmluZGluZwoJCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgPwoJCQkJdGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6CgkJCQl0aGlzLnRyaWdnZXIoIG5hbWUgKTsKCQl9OwoJfSApOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7CgkJCXJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApOwoJCX0KCX0gKTsKCgoJdmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uOwoKCXZhciBub25jZSA9IGpRdWVyeS5ub3coKTsKCgl2YXIgcnF1ZXJ5ID0gKCAvXD8vICk7CgoKCgl2YXIgcnZhbGlkdG9rZW5zID0gLygsKXwoXFt8eyl8KH18XSl8Iig/OlteIlxcXHJcbl18XFxbIlxcXC9iZm5ydF18XFx1W1xkYS1mQS1GXXs0fSkqIlxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcZClcZCsoPzpcLlxkK3wpKD86W2VFXVsrLV0/XGQrfCkvZzsKCglqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oIGRhdGEgKSB7CgoJCS8vIEF0dGVtcHQgdG8gcGFyc2UgdXNpbmcgdGhlIG5hdGl2ZSBKU09OIHBhcnNlciBmaXJzdAoJCWlmICggd2luZG93LkpTT04gJiYgd2luZG93LkpTT04ucGFyc2UgKSB7CgoJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkvLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dAoJCQlyZXR1cm4gd2luZG93LkpTT04ucGFyc2UoIGRhdGEgKyAiIiApOwoJCX0KCgkJdmFyIHJlcXVpcmVOb25Db21tYSwKCQkJZGVwdGggPSBudWxsLAoJCQlzdHIgPSBqUXVlcnkudHJpbSggZGF0YSArICIiICk7CgoJCS8vIEd1YXJkIGFnYWluc3QgaW52YWxpZCAoYW5kIHBvc3NpYmx5IGRhbmdlcm91cykgaW5wdXQgYnkgZW5zdXJpbmcgdGhhdCBub3RoaW5nIHJlbWFpbnMKCQkvLyBhZnRlciByZW1vdmluZyB2YWxpZCB0b2tlbnMKCQlyZXR1cm4gc3RyICYmICFqUXVlcnkudHJpbSggc3RyLnJlcGxhY2UoIHJ2YWxpZHRva2VucywgZnVuY3Rpb24oIHRva2VuLCBjb21tYSwgb3BlbiwgY2xvc2UgKSB7CgoJCQkvLyBGb3JjZSB0ZXJtaW5hdGlvbiBpZiB3ZSBzZWUgYSBtaXNwbGFjZWQgY29tbWEKCQkJaWYgKCByZXF1aXJlTm9uQ29tbWEgJiYgY29tbWEgKSB7CgkJCQlkZXB0aCA9IDA7CgkJCX0KCgkJCS8vIFBlcmZvcm0gbm8gbW9yZSByZXBsYWNlbWVudHMgYWZ0ZXIgcmV0dXJuaW5nIHRvIG91dGVybW9zdCBkZXB0aAoJCQlpZiAoIGRlcHRoID09PSAwICkgewoJCQkJcmV0dXJuIHRva2VuOwoJCQl9CgoJCQkvLyBDb21tYXMgbXVzdCBub3QgZm9sbG93ICJbIiwgInsiLCBvciAiLCIKCQkJcmVxdWlyZU5vbkNvbW1hID0gb3BlbiB8fCBjb21tYTsKCgkJCS8vIERldGVybWluZSBuZXcgZGVwdGgKCQkJLy8gYXJyYXkvb2JqZWN0IG9wZW4gKCJbIiBvciAieyIpOiBkZXB0aCArPSB0cnVlIC0gZmFsc2UgKGluY3JlbWVudCkKCQkJLy8gYXJyYXkvb2JqZWN0IGNsb3NlICgiXSIgb3IgIn0iKTogZGVwdGggKz0gZmFsc2UgLSB0cnVlIChkZWNyZW1lbnQpCgkJCS8vIG90aGVyIGNhc2VzICgiLCIgb3IgcHJpbWl0aXZlKTogZGVwdGggKz0gdHJ1ZSAtIHRydWUgKG51bWVyaWMgY2FzdCkKCQkJZGVwdGggKz0gIWNsb3NlIC0gIW9wZW47CgoJCQkvLyBSZW1vdmUgdGhpcyB0b2tlbgoJCQlyZXR1cm4gIiI7CgkJfSApICkgPwoJCQkoIEZ1bmN0aW9uKCAicmV0dXJuICIgKyBzdHIgKSApKCkgOgoJCQlqUXVlcnkuZXJyb3IoICJJbnZhbGlkIEpTT046ICIgKyBkYXRhICk7Cgl9OwoKCgkvLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nCglqUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHsKCQl2YXIgeG1sLCB0bXA7CgkJaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQl0cnkgewoJCQlpZiAoIHdpbmRvdy5ET01QYXJzZXIgKSB7IC8vIFN0YW5kYXJkCgkJCQl0bXAgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpOwoJCQkJeG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgInRleHQveG1sIiApOwoJCQl9IGVsc2UgeyAvLyBJRQoJCQkJeG1sID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCAiTWljcm9zb2Z0LlhNTERPTSIgKTsKCQkJCXhtbC5hc3luYyA9ICJmYWxzZSI7CgkJCQl4bWwubG9hZFhNTCggZGF0YSApOwoJCQl9CgkJfSBjYXRjaCAoIGUgKSB7CgkJCXhtbCA9IHVuZGVmaW5lZDsKCQl9CgkJaWYgKCAheG1sIHx8ICF4bWwuZG9jdW1lbnRFbGVtZW50IHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggInBhcnNlcmVycm9yIiApLmxlbmd0aCApIHsKCQkJalF1ZXJ5LmVycm9yKCAiSW52YWxpZCBYTUw6ICIgKyBkYXRhICk7CgkJfQoJCXJldHVybiB4bWw7Cgl9OwoKCgl2YXIKCQlyaGFzaCA9IC8jLiokLywKCQlydHMgPSAvKFs/Jl0pXz1bXiZdKi8sCgoJCS8vIElFIGxlYXZlcyBhbiBcciBjaGFyYWN0ZXIgYXQgRU9MCgkJcmhlYWRlcnMgPSAvXiguKj8pOlsgXHRdKihbXlxyXG5dKilccj8kL21nLAoKCQkvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb24KCQlybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLAoJCXJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLAoJCXJwcm90b2NvbCA9IC9eXC9cLy8sCgkJcnVybCA9IC9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLAoKCQkvKiBQcmVmaWx0ZXJzCgkJICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSkKCQkgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOgoJCSAqICAgIC0gQkVGT1JFIGFza2luZyBmb3IgYSB0cmFuc3BvcnQKCQkgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpCgkJICogMykga2V5IGlzIHRoZSBkYXRhVHlwZQoJCSAqIDQpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkJICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byAiKiIgaWYgbmVlZGVkCgkJICovCgkJcHJlZmlsdGVycyA9IHt9LAoKCQkvKiBUcmFuc3BvcnRzIGJpbmRpbmdzCgkJICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZQoJCSAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkJICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gIioiIGlmIG5lZWRlZAoJCSAqLwoJCXRyYW5zcG9ydHMgPSB7fSwKCgkJLy8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uCgkJYWxsVHlwZXMgPSAiKi8iLmNvbmNhdCggIioiICksCgoJCS8vIERvY3VtZW50IGxvY2F0aW9uCgkJYWpheExvY2F0aW9uID0gbG9jYXRpb24uaHJlZiwKCgkJLy8gU2VnbWVudCBsb2NhdGlvbiBpbnRvIHBhcnRzCgkJYWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdOwoKCS8vIEJhc2UgImNvbnN0cnVjdG9yIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0CglmdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHsKCgkJLy8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAiKiIKCQlyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHsKCgkJCWlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gInN0cmluZyIgKSB7CgkJCQlmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uOwoJCQkJZGF0YVR5cGVFeHByZXNzaW9uID0gIioiOwoJCQl9CgoJCQl2YXIgZGF0YVR5cGUsCgkJCQlpID0gMCwKCQkJCWRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHsKCgkJCQkvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uCgkJCQl3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7CgoJCQkJCS8vIFByZXBlbmQgaWYgcmVxdWVzdGVkCgkJCQkJaWYgKCBkYXRhVHlwZS5jaGFyQXQoIDAgKSA9PT0gIisiICkgewoJCQkJCQlkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgIioiOwoJCQkJCQkoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnVuc2hpZnQoIGZ1bmMgKTsKCgkJCQkJLy8gT3RoZXJ3aXNlIGFwcGVuZAoJCQkJCX0gZWxzZSB7CgkJCQkJCSggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX07Cgl9CgoJLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzCglmdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkgewoKCQl2YXIgaW5zcGVjdGVkID0ge30sCgkJCXNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApOwoKCQlmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHsKCQkJdmFyIHNlbGVjdGVkOwoJCQlpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlOwoJCQlqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkgewoJCQkJdmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTsKCQkJCWlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09ICJzdHJpbmciICYmCgkJCQkJIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkgewoKCQkJCQlvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7CgkJCQkJaW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7CgkJCQkJcmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJfQoJCQl9ICk7CgkJCXJldHVybiBzZWxlY3RlZDsKCQl9CgoJCXJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgIioiIF0gJiYgaW5zcGVjdCggIioiICk7Cgl9CgoJLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zCgkvLyB0aGF0IHRha2VzICJmbGF0IiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZCkKCS8vIEZpeGVzICM5ODg3CglmdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHsKCQl2YXIgZGVlcCwga2V5LAoJCQlmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307CgoJCWZvciAoIGtleSBpbiBzcmMgKSB7CgkJCWlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkgewoJCQkJKCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKCBkZWVwID0ge30gKSApIClbIGtleSBdID0gc3JjWyBrZXkgXTsKCQkJfQoJCX0KCQlpZiAoIGRlZXAgKSB7CgkJCWpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApOwoJCX0KCgkJcmV0dXJuIHRhcmdldDsKCX0KCgkvKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6CgkgKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKQoJICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlCgkgKi8KCWZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7CgkJdmFyIGZpcnN0RGF0YVR5cGUsIGN0LCBmaW5hbERhdGFUeXBlLCB0eXBlLAoJCQljb250ZW50cyA9IHMuY29udGVudHMsCgkJCWRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzOwoKCQkvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2VzcwoJCXdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09ICIqIiApIHsKCQkJZGF0YVR5cGVzLnNoaWZ0KCk7CgkJCWlmICggY3QgPT09IHVuZGVmaW5lZCApIHsKCQkJCWN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggIkNvbnRlbnQtVHlwZSIgKTsKCQkJfQoJCX0KCgkJLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlCgkJaWYgKCBjdCApIHsKCQkJZm9yICggdHlwZSBpbiBjb250ZW50cyApIHsKCQkJCWlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7CgkJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlCgkJaWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7CgkJCWZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTsKCQl9IGVsc2UgewoKCQkJLy8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlcwoJCQlmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHsKCQkJCWlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArICIgIiArIGRhdGFUeXBlc1sgMCBdIF0gKSB7CgkJCQkJZmluYWxEYXRhVHlwZSA9IHR5cGU7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQlpZiAoICFmaXJzdERhdGFUeXBlICkgewoJCQkJCWZpcnN0RGF0YVR5cGUgPSB0eXBlOwoJCQkJfQoJCQl9CgoJCQkvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmUKCQkJZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTsKCQl9CgoJCS8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGUKCQkvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZAoJCS8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2UKCQlpZiAoIGZpbmFsRGF0YVR5cGUgKSB7CgkJCWlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7CgkJCQlkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApOwoJCQl9CgkJCXJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTsKCQl9Cgl9CgoJLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZQoJICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlCgkgKi8KCWZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHsKCQl2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldiwKCQkJY29udmVydGVycyA9IHt9LAoKCQkJLy8gV29yayB3aXRoIGEgY29weSBvZiBkYXRhVHlwZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vZGlmeSBpdCBmb3IgY29udmVyc2lvbgoJCQlkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpOwoKCQkvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXMKCQlpZiAoIGRhdGFUeXBlc1sgMSBdICkgewoJCQlmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHsKCQkJCWNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07CgkJCX0KCQl9CgoJCWN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTsKCgkJLy8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGUKCQl3aGlsZSAoIGN1cnJlbnQgKSB7CgoJCQlpZiAoIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSApIHsKCQkJCWpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlOwoJCQl9CgoJCQkvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZAoJCQlpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7CgkJCQlyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTsKCQkJfQoKCQkJcHJldiA9IGN1cnJlbnQ7CgkJCWN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTsKCgkJCWlmICggY3VycmVudCApIHsKCgkJCQkvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvCgkJCQlpZiAoIGN1cnJlbnQgPT09ICIqIiApIHsKCgkJCQkJY3VycmVudCA9IHByZXY7CgoJCQkJLy8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudAoJCQkJfSBlbHNlIGlmICggcHJldiAhPT0gIioiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7CgoJCQkJCS8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyCgkJCQkJY29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyAiICIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgIiogIiArIGN1cnJlbnQgXTsKCgkJCQkJLy8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXIKCQkJCQlpZiAoICFjb252ICkgewoJCQkJCQlmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkgewoKCQkJCQkJCS8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudAoJCQkJCQkJdG1wID0gY29udjIuc3BsaXQoICIgIiApOwoJCQkJCQkJaWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHsKCgkJCQkJCQkJLy8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0CgkJCQkJCQkJY29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyAiICIgKyB0bXBbIDAgXSBdIHx8CgkJCQkJCQkJCWNvbnZlcnRlcnNbICIqICIgKyB0bXBbIDAgXSBdOwoJCQkJCQkJCWlmICggY29udiApIHsKCgkJCQkJCQkJCS8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnMKCQkJCQkJCQkJaWYgKCBjb252ID09PSB0cnVlICkgewoJCQkJCQkJCQkJY29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07CgoJCQkJCQkJCQkvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlCgkJCQkJCQkJCX0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7CgkJCQkJCQkJCQljdXJyZW50ID0gdG1wWyAwIF07CgkJCQkJCQkJCQlkYXRhVHlwZXMudW5zaGlmdCggdG1wWyAxIF0gKTsKCQkJCQkJCQkJfQoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKQoJCQkJCWlmICggY29udiAhPT0gdHJ1ZSApIHsKCgkJCQkJCS8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW0KCQkJCQkJaWYgKCBjb252ICYmIHNbICJ0aHJvd3MiIF0gKSB7IC8vIGpzY3M6aWdub3JlIHJlcXVpcmVEb3ROb3RhdGlvbgoJCQkJCQkJcmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7CgkJCQkJCQl9IGNhdGNoICggZSApIHsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQlzdGF0ZTogInBhcnNlcmVycm9yIiwKCQkJCQkJCQkJZXJyb3I6IGNvbnYgPyBlIDogIk5vIGNvbnZlcnNpb24gZnJvbSAiICsgcHJldiArICIgdG8gIiArIGN1cnJlbnQKCQkJCQkJCQl9OwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4geyBzdGF0ZTogInN1Y2Nlc3MiLCBkYXRhOiByZXNwb25zZSB9OwoJfQoKCWpRdWVyeS5leHRlbmQoIHsKCgkJLy8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzCgkJYWN0aXZlOiAwLAoKCQkvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0CgkJbGFzdE1vZGlmaWVkOiB7fSwKCQlldGFnOiB7fSwKCgkJYWpheFNldHRpbmdzOiB7CgkJCXVybDogYWpheExvY2F0aW9uLAoJCQl0eXBlOiAiR0VUIiwKCQkJaXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggYWpheExvY1BhcnRzWyAxIF0gKSwKCQkJZ2xvYmFsOiB0cnVlLAoJCQlwcm9jZXNzRGF0YTogdHJ1ZSwKCQkJYXN5bmM6IHRydWUsCgkJCWNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKCQkJLyoKCQkJdGltZW91dDogMCwKCQkJZGF0YTogbnVsbCwKCQkJZGF0YVR5cGU6IG51bGwsCgkJCXVzZXJuYW1lOiBudWxsLAoJCQlwYXNzd29yZDogbnVsbCwKCQkJY2FjaGU6IG51bGwsCgkJCXRocm93czogZmFsc2UsCgkJCXRyYWRpdGlvbmFsOiBmYWxzZSwKCQkJaGVhZGVyczoge30sCgkJCSovCgoJCQlhY2NlcHRzOiB7CgkJCQkiKiI6IGFsbFR5cGVzLAoJCQkJdGV4dDogInRleHQvcGxhaW4iLAoJCQkJaHRtbDogInRleHQvaHRtbCIsCgkJCQl4bWw6ICJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIiwKCQkJCWpzb246ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiCgkJCX0sCgoJCQljb250ZW50czogewoJCQkJeG1sOiAvXGJ4bWxcYi8sCgkJCQlodG1sOiAvXGJodG1sLywKCQkJCWpzb246IC9cYmpzb25cYi8KCQkJfSwKCgkJCXJlc3BvbnNlRmllbGRzOiB7CgkJCQl4bWw6ICJyZXNwb25zZVhNTCIsCgkJCQl0ZXh0OiAicmVzcG9uc2VUZXh0IiwKCQkJCWpzb246ICJyZXNwb25zZUpTT04iCgkJCX0sCgoJCQkvLyBEYXRhIGNvbnZlcnRlcnMKCQkJLy8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsICIqIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2UKCQkJY29udmVydGVyczogewoKCQkJCS8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dAoJCQkJIiogdGV4dCI6IFN0cmluZywKCgkJCQkvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbikKCQkJCSJ0ZXh0IGh0bWwiOiB0cnVlLAoKCQkJCS8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb24KCQkJCSJ0ZXh0IGpzb24iOiBqUXVlcnkucGFyc2VKU09OLAoKCQkJCS8vIFBhcnNlIHRleHQgYXMgeG1sCgkJCQkidGV4dCB4bWwiOiBqUXVlcnkucGFyc2VYTUwKCQkJfSwKCgkJCS8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6CgkJCS8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWYKCQkJLy8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmUKCQkJLy8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpCgkJCWZsYXRPcHRpb25zOiB7CgkJCQl1cmw6IHRydWUsCgkJCQljb250ZXh0OiB0cnVlCgkJCX0KCQl9LAoKCQkvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldAoJCS8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy4KCQkvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLgoJCWFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7CgkJCXJldHVybiBzZXR0aW5ncyA/CgoJCQkJLy8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3QKCQkJCWFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDoKCgkJCQkvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzCgkJCQlhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTsKCQl9LAoKCQlhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSwKCQlhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSwKCgkJLy8gTWFpbiBtZXRob2QKCQlhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkgewoKCQkJLy8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmUKCQkJaWYgKCB0eXBlb2YgdXJsID09PSAib2JqZWN0IiApIHsKCQkJCW9wdGlvbnMgPSB1cmw7CgkJCQl1cmwgPSB1bmRlZmluZWQ7CgkJCX0KCgkJCS8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0CgkJCW9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKCQkJdmFyCgoJCQkJLy8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzCgkJCQlwYXJ0cywKCgkJCQkvLyBMb29wIHZhcmlhYmxlCgkJCQlpLAoKCQkJCS8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW0KCQkJCWNhY2hlVVJMLAoKCQkJCS8vIFJlc3BvbnNlIGhlYWRlcnMgYXMgc3RyaW5nCgkJCQlyZXNwb25zZUhlYWRlcnNTdHJpbmcsCgoJCQkJLy8gdGltZW91dCBoYW5kbGUKCQkJCXRpbWVvdXRUaW1lciwKCgkJCQkvLyBUbyBrbm93IGlmIGdsb2JhbCBldmVudHMgYXJlIHRvIGJlIGRpc3BhdGNoZWQKCQkJCWZpcmVHbG9iYWxzLAoKCQkJCXRyYW5zcG9ydCwKCgkJCQkvLyBSZXNwb25zZSBoZWFkZXJzCgkJCQlyZXNwb25zZUhlYWRlcnMsCgoJCQkJLy8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdAoJCQkJcyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksCgoJCQkJLy8gQ2FsbGJhY2tzIGNvbnRleHQKCQkJCWNhbGxiYWNrQ29udGV4dCA9IHMuY29udGV4dCB8fCBzLAoKCQkJCS8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb24KCQkJCWdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJgoJCQkJCSggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/CgkJCQkJCWpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOgoJCQkJCQlqUXVlcnkuZXZlbnQsCgoJCQkJLy8gRGVmZXJyZWRzCgkJCQlkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLAoJCQkJY29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKSwKCgkJCQkvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrcwoJCQkJc3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSwKCgkJCQkvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKQoJCQkJcmVxdWVzdEhlYWRlcnMgPSB7fSwKCQkJCXJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSwKCgkJCQkvLyBUaGUganFYSFIgc3RhdGUKCQkJCXN0YXRlID0gMCwKCgkJCQkvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2UKCQkJCXN0ckFib3J0ID0gImNhbmNlbGVkIiwKCgkJCQkvLyBGYWtlIHhocgoJCQkJanFYSFIgPSB7CgkJCQkJcmVhZHlTdGF0ZTogMCwKCgkJCQkJLy8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZAoJCQkJCWdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkgewoJCQkJCQl2YXIgbWF0Y2g7CgkJCQkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQkJCQlpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7CgkJCQkJCQkJcmVzcG9uc2VIZWFkZXJzID0ge307CgkJCQkJCQkJd2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHsKCQkJCQkJCQkJcmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJbWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07CgkJCQkJCX0KCQkJCQkJcmV0dXJuIG1hdGNoID09IG51bGwgPyBudWxsIDogbWF0Y2g7CgkJCQkJfSwKCgkJCQkJLy8gUmF3IHN0cmluZwoJCQkJCWdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiBzdGF0ZSA9PT0gMiA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7CgkJCQkJfSwKCgkJCQkJLy8gQ2FjaGVzIHRoZSBoZWFkZXIKCQkJCQlzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCQkJCXZhciBsbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKCQkJCQkJaWYgKCAhc3RhdGUgKSB7CgkJCQkJCQluYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gfHwgbmFtZTsKCQkJCQkJCXJlcXVlc3RIZWFkZXJzWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9LAoKCQkJCQkvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlcgoJCQkJCW92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQkJCQlpZiAoICFzdGF0ZSApIHsKCQkJCQkJCXMubWltZVR5cGUgPSB0eXBlOwoJCQkJCQl9CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0sCgoJCQkJCS8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzCgkJCQkJc3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHsKCQkJCQkJdmFyIGNvZGU7CgkJCQkJCWlmICggbWFwICkgewoJCQkJCQkJaWYgKCBzdGF0ZSA8IDIgKSB7CgkJCQkJCQkJZm9yICggY29kZSBpbiBtYXAgKSB7CgoJCQkJCQkJCQkvLyBMYXp5LWFkZCB0aGUgbmV3IGNhbGxiYWNrIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzCgkJCQkJCQkJCXN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdOwoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJCS8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrcwoJCQkJCQkJCWpxWEhSLmFsd2F5cyggbWFwWyBqcVhIUi5zdGF0dXMgXSApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0sCgoJCQkJCS8vIENhbmNlbCB0aGUgcmVxdWVzdAoJCQkJCWFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHsKCQkJCQkJdmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7CgkJCQkJCWlmICggdHJhbnNwb3J0ICkgewoJCQkJCQkJdHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTsKCQkJCQkJfQoJCQkJCQlkb25lKCAwLCBmaW5hbFRleHQgKTsKCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfQoJCQkJfTsKCgkJCS8vIEF0dGFjaCBkZWZlcnJlZHMKCQkJZGVmZXJyZWQucHJvbWlzZSgganFYSFIgKS5jb21wbGV0ZSA9IGNvbXBsZXRlRGVmZXJyZWQuYWRkOwoJCQlqcVhIUi5zdWNjZXNzID0ganFYSFIuZG9uZTsKCQkJanFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsOwoKCQkJLy8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pCgkJCS8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKCM1ODY2OiBJRTcgaXNzdWUgd2l0aCBwcm90b2NvbC1sZXNzIHVybHMpCgkJCS8vIEhhbmRsZSBmYWxzeSB1cmwgaW4gdGhlIHNldHRpbmdzIG9iamVjdCAoIzEwMDkzOiBjb25zaXN0ZW5jeSB3aXRoIG9sZCBzaWduYXR1cmUpCgkJCS8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZQoJCQlzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyAiIiApCgkJCQkucmVwbGFjZSggcmhhc2gsICIiICkKCQkJCS5yZXBsYWNlKCBycHJvdG9jb2wsIGFqYXhMb2NQYXJ0c1sgMSBdICsgIi8vIiApOwoKCQkJLy8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0CgkJCXMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7CgoJCQkvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0CgkJCXMuZGF0YVR5cGVzID0galF1ZXJ5LnRyaW0oIHMuZGF0YVR5cGUgfHwgIioiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyAiIiBdOwoKCQkJLy8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2gKCQkJaWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7CgkJCQlwYXJ0cyA9IHJ1cmwuZXhlYyggcy51cmwudG9Mb3dlckNhc2UoKSApOwoJCQkJcy5jcm9zc0RvbWFpbiA9ICEhKCBwYXJ0cyAmJgoJCQkJCSggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHwKCQkJCQkJKCBwYXJ0c1sgMyBdIHx8ICggcGFydHNbIDEgXSA9PT0gImh0dHA6IiA/ICI4MCIgOiAiNDQzIiApICkgIT09CgkJCQkJCQkoIGFqYXhMb2NQYXJ0c1sgMyBdIHx8ICggYWpheExvY1BhcnRzWyAxIF0gPT09ICJodHRwOiIgPyAiODAiIDogIjQ0MyIgKSApICkKCQkJCSk7CgkJCX0KCgkJCS8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZwoJCQlpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09ICJzdHJpbmciICkgewoJCQkJcy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTsKCQkJfQoKCQkJLy8gQXBwbHkgcHJlZmlsdGVycwoJCQlpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTsKCgkJCS8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlCgkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQlyZXR1cm4ganFYSFI7CgkJCX0KCgkJCS8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvCgkJCS8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpCgkJCWZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsOwoKCQkJLy8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0cwoJCQlpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHsKCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyKCAiYWpheFN0YXJ0IiApOwoJCQl9CgoJCQkvLyBVcHBlcmNhc2UgdGhlIHR5cGUKCQkJcy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7CgoJCQkvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudAoJCQlzLmhhc0NvbnRlbnQgPSAhcm5vQ29udGVudC50ZXN0KCBzLnR5cGUgKTsKCgkJCS8vIFNhdmUgdGhlIFVSTCBpbiBjYXNlIHdlJ3JlIHRveWluZyB3aXRoIHRoZSBJZi1Nb2RpZmllZC1TaW5jZQoJCQkvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb24KCQkJY2FjaGVVUkwgPSBzLnVybDsKCgkJCS8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50CgkJCWlmICggIXMuaGFzQ29udGVudCApIHsKCgkJCQkvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsCgkJCQlpZiAoIHMuZGF0YSApIHsKCQkJCQljYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/ICImIiA6ICI/IiApICsgcy5kYXRhICk7CgoJCQkJCS8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnkKCQkJCQlkZWxldGUgcy5kYXRhOwoJCQkJfQoKCQkJCS8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWQKCQkJCWlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7CgkJCQkJcy51cmwgPSBydHMudGVzdCggY2FjaGVVUkwgKSA/CgoJCQkJCQkvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgJ18nIHBhcmFtZXRlciwgc2V0IGl0cyB2YWx1ZQoJCQkJCQljYWNoZVVSTC5yZXBsYWNlKCBydHMsICIkMV89IiArIG5vbmNlKysgKSA6CgoJCQkJCQkvLyBPdGhlcndpc2UgYWRkIG9uZSB0byB0aGUgZW5kCgkJCQkJCWNhY2hlVVJMICsgKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/ICImIiA6ICI/IiApICsgIl89IiArIG5vbmNlKys7CgkJCQl9CgkJCX0KCgkJCS8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuCgkJCWlmICggcy5pZk1vZGlmaWVkICkgewoJCQkJaWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkgewoJCQkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoICJJZi1Nb2RpZmllZC1TaW5jZSIsIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKTsKCQkJCX0KCQkJCWlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7CgkJCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggIklmLU5vbmUtTWF0Y2giLCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApOwoJCQkJfQoJCQl9CgoJCQkvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnQKCQkJaWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7CgkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiQ29udGVudC1UeXBlIiwgcy5jb250ZW50VHlwZSApOwoJCQl9CgoJCQkvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlCgkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoCgkJCQkiQWNjZXB0IiwKCQkJCXMuZGF0YVR5cGVzWyAwIF0gJiYgcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gPwoJCQkJCXMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICsKCQkJCQkJKCBzLmRhdGFUeXBlc1sgMCBdICE9PSAiKiIgPyAiLCAiICsgYWxsVHlwZXMgKyAiOyBxPTAuMDEiIDogIiIgKSA6CgkJCQkJcy5hY2NlcHRzWyAiKiIgXQoJCQkpOwoKCQkJLy8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uCgkJCWZvciAoIGkgaW4gcy5oZWFkZXJzICkgewoJCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTsKCQkJfQoKCQkJLy8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydAoJCQlpZiAoIHMuYmVmb3JlU2VuZCAmJgoJCQkJKCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBzdGF0ZSA9PT0gMiApICkgewoKCQkJCS8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVybgoJCQkJcmV0dXJuIGpxWEhSLmFib3J0KCk7CgkJCX0KCgkJCS8vIGFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvbgoJCQlzdHJBYm9ydCA9ICJhYm9ydCI7CgoJCQkvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHMKCQkJZm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkgewoJCQkJanFYSFJbIGkgXSggc1sgaSBdICk7CgkJCX0KCgkJCS8vIEdldCB0cmFuc3BvcnQKCQkJdHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7CgoJCQkvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnQKCQkJaWYgKCAhdHJhbnNwb3J0ICkgewoJCQkJZG9uZSggLTEsICJObyBUcmFuc3BvcnQiICk7CgkJCX0gZWxzZSB7CgkJCQlqcVhIUi5yZWFkeVN0YXRlID0gMTsKCgkJCQkvLyBTZW5kIGdsb2JhbCBldmVudAoJCQkJaWYgKCBmaXJlR2xvYmFscyApIHsKCQkJCQlnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggImFqYXhTZW5kIiwgWyBqcVhIUiwgcyBdICk7CgkJCQl9CgoJCQkJLy8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmUKCQkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQkJcmV0dXJuIGpxWEhSOwoJCQkJfQoKCQkJCS8vIFRpbWVvdXQKCQkJCWlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkgewoJCQkJCXRpbWVvdXRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsKCQkJCQkJanFYSFIuYWJvcnQoICJ0aW1lb3V0IiApOwoJCQkJCX0sIHMudGltZW91dCApOwoJCQkJfQoKCQkJCXRyeSB7CgkJCQkJc3RhdGUgPSAxOwoJCQkJCXRyYW5zcG9ydC5zZW5kKCByZXF1ZXN0SGVhZGVycywgZG9uZSApOwoJCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJCS8vIFByb3BhZ2F0ZSBleGNlcHRpb24gYXMgZXJyb3IgaWYgbm90IGRvbmUKCQkJCQlpZiAoIHN0YXRlIDwgMiApIHsKCQkJCQkJZG9uZSggLTEsIGUgKTsKCgkJCQkJLy8gU2ltcGx5IHJldGhyb3cgb3RoZXJ3aXNlCgkJCQkJfSBlbHNlIHsKCQkJCQkJdGhyb3cgZTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZQoJCQlmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHsKCQkJCXZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsCgkJCQkJc3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7CgoJCQkJLy8gQ2FsbGVkIG9uY2UKCQkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIFN0YXRlIGlzICJkb25lIiBub3cKCQkJCXN0YXRlID0gMjsKCgkJCQkvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0cwoJCQkJaWYgKCB0aW1lb3V0VGltZXIgKSB7CgkJCQkJd2luZG93LmNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7CgkJCQl9CgoJCQkJLy8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb24KCQkJCS8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpCgkJCQl0cmFuc3BvcnQgPSB1bmRlZmluZWQ7CgoJCQkJLy8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVycwoJCQkJcmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCAiIjsKCgkJCQkvLyBTZXQgcmVhZHlTdGF0ZQoJCQkJanFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDsKCgkJCQkvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bAoJCQkJaXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7CgoJCQkJLy8gR2V0IHJlc3BvbnNlIGRhdGEKCQkJCWlmICggcmVzcG9uc2VzICkgewoJCQkJCXJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApOwoJCQkJfQoKCQkJCS8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldCkKCQkJCXJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7CgoJCQkJLy8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmcKCQkJCWlmICggaXNTdWNjZXNzICkgewoKCQkJCQkvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLgoJCQkJCWlmICggcy5pZk1vZGlmaWVkICkgewoJCQkJCQltb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCAiTGFzdC1Nb2RpZmllZCIgKTsKCQkJCQkJaWYgKCBtb2RpZmllZCApIHsKCQkJCQkJCWpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDsKCQkJCQkJfQoJCQkJCQltb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCAiZXRhZyIgKTsKCQkJCQkJaWYgKCBtb2RpZmllZCApIHsKCQkJCQkJCWpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIGlmIG5vIGNvbnRlbnQKCQkJCQlpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gIkhFQUQiICkgewoJCQkJCQlzdGF0dXNUZXh0ID0gIm5vY29udGVudCI7CgoJCQkJCS8vIGlmIG5vdCBtb2RpZmllZAoJCQkJCX0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkgewoJCQkJCQlzdGF0dXNUZXh0ID0gIm5vdG1vZGlmaWVkIjsKCgkJCQkJLy8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0CgkJCQkJfSBlbHNlIHsKCQkJCQkJc3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlOwoJCQkJCQlzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTsKCQkJCQkJZXJyb3IgPSByZXNwb25zZS5lcnJvcjsKCQkJCQkJaXNTdWNjZXNzID0gIWVycm9yOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgoJCQkJCS8vIFdlIGV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0CgkJCQkJLy8gdGhlbiBub3JtYWxpemUgc3RhdHVzVGV4dCBhbmQgc3RhdHVzIGZvciBub24tYWJvcnRzCgkJCQkJZXJyb3IgPSBzdGF0dXNUZXh0OwoJCQkJCWlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkgewoJCQkJCQlzdGF0dXNUZXh0ID0gImVycm9yIjsKCQkJCQkJaWYgKCBzdGF0dXMgPCAwICkgewoJCQkJCQkJc3RhdHVzID0gMDsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdAoJCQkJanFYSFIuc3RhdHVzID0gc3RhdHVzOwoJCQkJanFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyAiIjsKCgkJCQkvLyBTdWNjZXNzL0Vycm9yCgkJCQlpZiAoIGlzU3VjY2VzcyApIHsKCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTsKCQkJCX0gZWxzZSB7CgkJCQkJZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7CgkJCQl9CgoJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCWpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTsKCQkJCXN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7CgoJCQkJaWYgKCBmaXJlR2xvYmFscyApIHsKCQkJCQlnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gImFqYXhTdWNjZXNzIiA6ICJhamF4RXJyb3IiLAoJCQkJCQlbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApOwoJCQkJfQoKCQkJCS8vIENvbXBsZXRlCgkJCQljb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApOwoKCQkJCWlmICggZmlyZUdsb2JhbHMgKSB7CgkJCQkJZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoICJhamF4Q29tcGxldGUiLCBbIGpxWEhSLCBzIF0gKTsKCgkJCQkJLy8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyCgkJCQkJaWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoICJhamF4U3RvcCIgKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiBqcVhIUjsKCQl9LAoKCQlnZXRKU09OOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssICJqc29uIiApOwoJCX0sCgoJCWdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7CgkJCXJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssICJzY3JpcHQiICk7CgkJfQoJfSApOwoKCWpRdWVyeS5lYWNoKCBbICJnZXQiLCAicG9zdCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHsKCQlqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7CgoJCQkvLyBzaGlmdCBhcmd1bWVudHMgaWYgZGF0YSBhcmd1bWVudCB3YXMgb21pdHRlZAoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7CgkJCQl0eXBlID0gdHlwZSB8fCBjYWxsYmFjazsKCQkJCWNhbGxiYWNrID0gZGF0YTsKCQkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJCX0KCgkJCS8vIFRoZSB1cmwgY2FuIGJlIGFuIG9wdGlvbnMgb2JqZWN0ICh3aGljaCB0aGVuIG11c3QgaGF2ZSAudXJsKQoJCQlyZXR1cm4galF1ZXJ5LmFqYXgoIGpRdWVyeS5leHRlbmQoIHsKCQkJCXVybDogdXJsLAoJCQkJdHlwZTogbWV0aG9kLAoJCQkJZGF0YVR5cGU6IHR5cGUsCgkJCQlkYXRhOiBkYXRhLAoJCQkJc3VjY2VzczogY2FsbGJhY2sKCQkJfSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7CgkJfTsKCX0gKTsKCgoJalF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHsKCQlyZXR1cm4galF1ZXJ5LmFqYXgoIHsKCQkJdXJsOiB1cmwsCgoJCQkvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NCkKCQkJdHlwZTogIkdFVCIsCgkJCWRhdGFUeXBlOiAic2NyaXB0IiwKCQkJY2FjaGU6IHRydWUsCgkJCWFzeW5jOiBmYWxzZSwKCQkJZ2xvYmFsOiBmYWxzZSwKCQkJInRocm93cyI6IHRydWUKCQl9ICk7Cgl9OwoKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJd3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCWpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWwuY2FsbCggdGhpcywgaSApICk7CgkJCQl9ICk7CgkJCX0KCgkJCWlmICggdGhpc1sgMCBdICkgewoKCQkJCS8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kCgkJCQl2YXIgd3JhcCA9IGpRdWVyeSggaHRtbCwgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgKS5lcSggMCApLmNsb25lKCB0cnVlICk7CgoJCQkJaWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHsKCQkJCQl3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7CgkJCQl9CgoJCQkJd3JhcC5tYXAoIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlbGVtID0gdGhpczsKCgkJCQkJd2hpbGUgKCBlbGVtLmZpcnN0Q2hpbGQgJiYgZWxlbS5maXJzdENoaWxkLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQllbGVtID0gZWxlbS5maXJzdENoaWxkOwoJCQkJCX0KCgkJCQkJcmV0dXJuIGVsZW07CgkJCQl9ICkuYXBwZW5kKCB0aGlzICk7CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCXdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCWpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgc2VsZiA9IGpRdWVyeSggdGhpcyApLAoJCQkJCWNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpOwoKCQkJCWlmICggY29udGVudHMubGVuZ3RoICkgewoJCQkJCWNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTsKCgkJCQl9IGVsc2UgewoJCQkJCXNlbGYuYXBwZW5kKCBodG1sICk7CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQl3cmFwOiBmdW5jdGlvbiggaHRtbCApIHsKCQkJdmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApOwoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7CgkJCX0gKTsKCQl9LAoKCQl1bndyYXA6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWlmICggIWpRdWVyeS5ub2RlTmFtZSggdGhpcywgImJvZHkiICkgKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApOwoJCQkJfQoJCQl9ICkuZW5kKCk7CgkJfQoJfSApOwoKCglmdW5jdGlvbiBnZXREaXNwbGF5KCBlbGVtICkgewoJCXJldHVybiBlbGVtLnN0eWxlICYmIGVsZW0uc3R5bGUuZGlzcGxheSB8fCBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKTsKCX0KCglmdW5jdGlvbiBmaWx0ZXJIaWRkZW4oIGVsZW0gKSB7CgoJCS8vIERpc2Nvbm5lY3RlZCBlbGVtZW50cyBhcmUgY29uc2lkZXJlZCBoaWRkZW4KCQlpZiAoICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCwgZWxlbSApICkgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJd2hpbGUgKCBlbGVtICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCWlmICggZ2V0RGlzcGxheSggZWxlbSApID09PSAibm9uZSIgfHwgZWxlbS50eXBlID09PSAiaGlkZGVuIiApIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJCWVsZW0gPSBlbGVtLnBhcmVudE5vZGU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglqUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkvLyBTdXBwb3J0OiBPcGVyYSA8PSAxMi4xMgoJCS8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHMKCQlyZXR1cm4gc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSA/CgkJCSggZWxlbS5vZmZzZXRXaWR0aCA8PSAwICYmIGVsZW0ub2Zmc2V0SGVpZ2h0IDw9IDAgJiYKCQkJCSFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICkgOgoJCQkJZmlsdGVySGlkZGVuKCBlbGVtICk7Cgl9OwoKCWpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiAhalF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4oIGVsZW0gKTsKCX07CgoKCgoJdmFyIHIyMCA9IC8lMjAvZywKCQlyYnJhY2tldCA9IC9cW1xdJC8sCgkJckNSTEYgPSAvXHI/XG4vZywKCQlyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksCgkJcnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pOwoKCWZ1bmN0aW9uIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIG9iaiwgdHJhZGl0aW9uYWwsIGFkZCApIHsKCQl2YXIgbmFtZTsKCgkJaWYgKCBqUXVlcnkuaXNBcnJheSggb2JqICkgKSB7CgoJCQkvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS4KCQkJalF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7CgkJCQlpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkgewoKCQkJCQkvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuCgkJCQkJYWRkKCBwcmVmaXgsIHYgKTsKCgkJCQl9IGVsc2UgewoKCQkJCQkvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC4KCQkJCQlidWlsZFBhcmFtcygKCQkJCQkJcHJlZml4ICsgIlsiICsgKCB0eXBlb2YgdiA9PT0gIm9iamVjdCIgJiYgdiAhPSBudWxsID8gaSA6ICIiICkgKyAiXSIsCgkJCQkJCXYsCgkJCQkJCXRyYWRpdGlvbmFsLAoJCQkJCQlhZGQKCQkJCQkpOwoJCQkJfQoJCQl9ICk7CgoJCX0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJvYmplY3QiICkgewoKCQkJLy8gU2VyaWFsaXplIG9iamVjdCBpdGVtLgoJCQlmb3IgKCBuYW1lIGluIG9iaiApIHsKCQkJCWJ1aWxkUGFyYW1zKCBwcmVmaXggKyAiWyIgKyBuYW1lICsgIl0iLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApOwoJCQl9CgoJCX0gZWxzZSB7CgoJCQkvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uCgkJCWFkZCggcHJlZml4LCBvYmogKTsKCQl9Cgl9CgoJLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2YKCS8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZwoJalF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkgewoJCXZhciBwcmVmaXgsCgkJCXMgPSBbXSwKCQkJYWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgoJCQkJLy8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCByZXR1cm4gaXRzIHZhbHVlCgkJCQl2YWx1ZSA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApID8gdmFsdWUoKSA6ICggdmFsdWUgPT0gbnVsbCA/ICIiIDogdmFsdWUgKTsKCQkJCXNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApOwoJCQl9OwoKCQkvLyBTZXQgdHJhZGl0aW9uYWwgdG8gdHJ1ZSBmb3IgalF1ZXJ5IDw9IDEuMy4yIGJlaGF2aW9yLgoJCWlmICggdHJhZGl0aW9uYWwgPT09IHVuZGVmaW5lZCApIHsKCQkJdHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7CgkJfQoKCQkvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLgoJCWlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7CgoJCQkvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHMKCQkJalF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkgewoJCQkJYWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTsKCQkJfSApOwoKCQl9IGVsc2UgewoKCQkJLy8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgIm9sZCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyCgkJCS8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LgoJCQlmb3IgKCBwcmVmaXggaW4gYSApIHsKCQkJCWJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7CgkJCX0KCQl9CgoJCS8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb24KCQlyZXR1cm4gcy5qb2luKCAiJiIgKS5yZXBsYWNlKCByMjAsICIrIiApOwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJc2VyaWFsaXplOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7CgkJfSwKCQlzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7CgoJCQkJLy8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgImVsZW1lbnRzIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHMKCQkJCXZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCAiZWxlbWVudHMiICk7CgkJCQlyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpczsKCQkJfSApCgkJCS5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQkJdmFyIHR5cGUgPSB0aGlzLnR5cGU7CgoJCQkJLy8gVXNlIC5pcygiOmRpc2FibGVkIikgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3MKCQkJCXJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCAiOmRpc2FibGVkIiApICYmCgkJCQkJcnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJgoJCQkJCSggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTsKCQkJfSApCgkJCS5tYXAoIGZ1bmN0aW9uKCBpLCBlbGVtICkgewoJCQkJdmFyIHZhbCA9IGpRdWVyeSggdGhpcyApLnZhbCgpOwoKCQkJCXJldHVybiB2YWwgPT0gbnVsbCA/CgkJCQkJbnVsbCA6CgkJCQkJalF1ZXJ5LmlzQXJyYXkoIHZhbCApID8KCQkJCQkJalF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkgewoJCQkJCQkJcmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCAiXHJcbiIgKSB9OwoJCQkJCQl9ICkgOgoJCQkJCQl7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgIlxyXG4iICkgfTsKCQkJfSApLmdldCgpOwoJCX0KCX0gKTsKCgoJLy8gQ3JlYXRlIHRoZSByZXF1ZXN0IG9iamVjdAoJLy8gKFRoaXMgaXMgc3RpbGwgYXR0YWNoZWQgdG8gYWpheFNldHRpbmdzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KQoJalF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSB3aW5kb3cuQWN0aXZlWE9iamVjdCAhPT0gdW5kZWZpbmVkID8KCgkJLy8gU3VwcG9ydDogSUU2LUlFOAoJCWZ1bmN0aW9uKCkgewoKCQkJLy8gWEhSIGNhbm5vdCBhY2Nlc3MgbG9jYWwgZmlsZXMsIGFsd2F5cyB1c2UgQWN0aXZlWCBmb3IgdGhhdCBjYXNlCgkJCWlmICggdGhpcy5pc0xvY2FsICkgewoJCQkJcmV0dXJuIGNyZWF0ZUFjdGl2ZVhIUigpOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRSA5LTExCgkJCS8vIElFIHNlZW1zIHRvIGVycm9yIG9uIGNyb3NzLWRvbWFpbiBQQVRDSCByZXF1ZXN0cyB3aGVuIEFjdGl2ZVggWEhSCgkJCS8vIGlzIHVzZWQuIEluIElFIDkrIGFsd2F5cyB1c2UgdGhlIG5hdGl2ZSBYSFIuCgkJCS8vIE5vdGU6IHRoaXMgY29uZGl0aW9uIHdvbid0IGNhdGNoIEVkZ2UgYXMgaXQgZG9lc24ndCBkZWZpbmUKCQkJLy8gZG9jdW1lbnQuZG9jdW1lbnRNb2RlIGJ1dCBpdCBhbHNvIGRvZXNuJ3Qgc3VwcG9ydCBBY3RpdmVYIHNvIGl0IHdvbid0CgkJCS8vIHJlYWNoIHRoaXMgY29kZS4KCQkJaWYgKCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPiA4ICkgewoJCQkJcmV0dXJuIGNyZWF0ZVN0YW5kYXJkWEhSKCk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gb2xkSUUgWEhSIGRvZXMgbm90IHN1cHBvcnQgbm9uLVJGQzI2MTYgbWV0aG9kcyAoIzEzMjQwKQoJCQkvLyBTZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL21zNTM2NjQ4KHY9dnMuODUpLmFzcHgKCQkJLy8gYW5kIGh0dHA6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjOS5odG1sI3NlYzkKCQkJLy8gQWx0aG91Z2ggdGhpcyBjaGVjayBmb3Igc2l4IG1ldGhvZHMgaW5zdGVhZCBvZiBlaWdodAoJCQkvLyBzaW5jZSBJRSBhbHNvIGRvZXMgbm90IHN1cHBvcnQgInRyYWNlIiBhbmQgImNvbm5lY3QiCgkJCXJldHVybiAvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kudGVzdCggdGhpcy50eXBlICkgJiYKCQkJCWNyZWF0ZVN0YW5kYXJkWEhSKCkgfHwgY3JlYXRlQWN0aXZlWEhSKCk7CgkJfSA6CgoJCS8vIEZvciBhbGwgb3RoZXIgYnJvd3NlcnMsIHVzZSB0aGUgc3RhbmRhcmQgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0CgkJY3JlYXRlU3RhbmRhcmRYSFI7CgoJdmFyIHhocklkID0gMCwKCQl4aHJDYWxsYmFja3MgPSB7fSwKCQl4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpOwoKCS8vIFN1cHBvcnQ6IElFPDEwCgkvLyBPcGVuIHJlcXVlc3RzIG11c3QgYmUgbWFudWFsbHkgYWJvcnRlZCBvbiB1bmxvYWQgKCM1MjgwKQoJLy8gU2VlIGh0dHBzOi8vc3VwcG9ydC5taWNyb3NvZnQuY29tL2tiLzI4NTY3NDYgZm9yIG1vcmUgaW5mbwoJaWYgKCB3aW5kb3cuYXR0YWNoRXZlbnQgKSB7CgkJd2luZG93LmF0dGFjaEV2ZW50KCAib251bmxvYWQiLCBmdW5jdGlvbigpIHsKCQkJZm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7CgkJCQl4aHJDYWxsYmFja3NbIGtleSBdKCB1bmRlZmluZWQsIHRydWUgKTsKCQkJfQoJCX0gKTsKCX0KCgkvLyBEZXRlcm1pbmUgc3VwcG9ydCBwcm9wZXJ0aWVzCglzdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoICJ3aXRoQ3JlZGVudGlhbHMiIGluIHhoclN1cHBvcnRlZCApOwoJeGhyU3VwcG9ydGVkID0gc3VwcG9ydC5hamF4ID0gISF4aHJTdXBwb3J0ZWQ7CgoJLy8gQ3JlYXRlIHRyYW5zcG9ydCBpZiB0aGUgYnJvd3NlciBjYW4gcHJvdmlkZSBhbiB4aHIKCWlmICggeGhyU3VwcG9ydGVkICkgewoKCQlqUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgoJCQkvLyBDcm9zcyBkb21haW4gb25seSBhbGxvd2VkIGlmIHN1cHBvcnRlZCB0aHJvdWdoIFhNTEh0dHBSZXF1ZXN0CgkJCWlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gfHwgc3VwcG9ydC5jb3JzICkgewoKCQkJCXZhciBjYWxsYmFjazsKCgkJCQlyZXR1cm4gewoJCQkJCXNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHsKCQkJCQkJdmFyIGksCgkJCQkJCQl4aHIgPSBvcHRpb25zLnhocigpLAoJCQkJCQkJaWQgPSArK3hocklkOwoKCQkJCQkJLy8gT3BlbiB0aGUgc29ja2V0CgkJCQkJCXhoci5vcGVuKAoJCQkJCQkJb3B0aW9ucy50eXBlLAoJCQkJCQkJb3B0aW9ucy51cmwsCgkJCQkJCQlvcHRpb25zLmFzeW5jLAoJCQkJCQkJb3B0aW9ucy51c2VybmFtZSwKCQkJCQkJCW9wdGlvbnMucGFzc3dvcmQKCQkJCQkJKTsKCgkJCQkJCS8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWQKCQkJCQkJaWYgKCBvcHRpb25zLnhockZpZWxkcyApIHsKCQkJCQkJCWZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7CgkJCQkJCQkJeGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkCgkJCQkJCWlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHsKCQkJCQkJCXhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7CgkJCQkJCX0KCgkJCQkJCS8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyCgkJCQkJCS8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmUKCQkJCQkJLy8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS4KCQkJCQkJLy8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApCgkJCQkJCS8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLgoJCQkJCQlpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyAiWC1SZXF1ZXN0ZWQtV2l0aCIgXSApIHsKCQkJCQkJCWhlYWRlcnNbICJYLVJlcXVlc3RlZC1XaXRoIiBdID0gIlhNTEh0dHBSZXF1ZXN0IjsKCQkJCQkJfQoKCQkJCQkJLy8gU2V0IGhlYWRlcnMKCQkJCQkJZm9yICggaSBpbiBoZWFkZXJzICkgewoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCQkJCS8vIElFJ3MgQWN0aXZlWE9iamVjdCB0aHJvd3MgYSAnVHlwZSBNaXNtYXRjaCcgZXhjZXB0aW9uIHdoZW4gc2V0dGluZwoJCQkJCQkJLy8gcmVxdWVzdCBoZWFkZXIgdG8gYSBudWxsLXZhbHVlLgoJCQkJCQkJLy8KCQkJCQkJCS8vIFRvIGtlZXAgY29uc2lzdGVudCB3aXRoIG90aGVyIFhIUiBpbXBsZW1lbnRhdGlvbnMsIGNhc3QgdGhlIHZhbHVlCgkJCQkJCQkvLyB0byBzdHJpbmcgYW5kIGlnbm9yZSBgdW5kZWZpbmVkYC4KCQkJCQkJCWlmICggaGVhZGVyc1sgaSBdICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSArICIiICk7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIERvIHNlbmQgdGhlIHJlcXVlc3QKCQkJCQkJLy8gVGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uIHdoaWNoIGlzIGFjdHVhbGx5CgkJCQkJCS8vIGhhbmRsZWQgaW4galF1ZXJ5LmFqYXggKHNvIG5vIHRyeS9jYXRjaCBoZXJlKQoJCQkJCQl4aHIuc2VuZCggKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhICkgfHwgbnVsbCApOwoKCQkJCQkJLy8gTGlzdGVuZXIKCQkJCQkJY2FsbGJhY2sgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHsKCQkJCQkJCXZhciBzdGF0dXMsIHN0YXR1c1RleHQsIHJlc3BvbnNlczsKCgkJCQkJCQkvLyBXYXMgbmV2ZXIgY2FsbGVkIGFuZCBpcyBhYm9ydGVkIG9yIGNvbXBsZXRlCgkJCQkJCQlpZiAoIGNhbGxiYWNrICYmICggaXNBYm9ydCB8fCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApICkgewoKCQkJCQkJCQkvLyBDbGVhbiB1cAoJCQkJCQkJCWRlbGV0ZSB4aHJDYWxsYmFja3NbIGlkIF07CgkJCQkJCQkJY2FsbGJhY2sgPSB1bmRlZmluZWQ7CgkJCQkJCQkJeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGpRdWVyeS5ub29wOwoKCQkJCQkJCQkvLyBBYm9ydCBtYW51YWxseSBpZiBuZWVkZWQKCQkJCQkJCQlpZiAoIGlzQWJvcnQgKSB7CgkJCQkJCQkJCWlmICggeGhyLnJlYWR5U3RhdGUgIT09IDQgKSB7CgkJCQkJCQkJCQl4aHIuYWJvcnQoKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJlc3BvbnNlcyA9IHt9OwoJCQkJCQkJCQlzdGF0dXMgPSB4aHIuc3RhdHVzOwoKCQkJCQkJCQkJLy8gU3VwcG9ydDogSUU8MTAKCQkJCQkJCQkJLy8gQWNjZXNzaW5nIGJpbmFyeS1kYXRhIHJlc3BvbnNlVGV4dCB0aHJvd3MgYW4gZXhjZXB0aW9uCgkJCQkJCQkJCS8vICgjMTE0MjYpCgkJCQkJCQkJCWlmICggdHlwZW9mIHhoci5yZXNwb25zZVRleHQgPT09ICJzdHJpbmciICkgewoJCQkJCQkJCQkJcmVzcG9uc2VzLnRleHQgPSB4aHIucmVzcG9uc2VUZXh0OwoJCQkJCQkJCQl9CgoJCQkJCQkJCQkvLyBGaXJlZm94IHRocm93cyBhbiBleGNlcHRpb24gd2hlbiBhY2Nlc3NpbmcKCQkJCQkJCQkJLy8gc3RhdHVzVGV4dCBmb3IgZmF1bHR5IGNyb3NzLWRvbWFpbiByZXF1ZXN0cwoJCQkJCQkJCQl0cnkgewoJCQkJCQkJCQkJc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0OwoJCQkJCQkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJCQkJCQkvLyBXZSBub3JtYWxpemUgd2l0aCBXZWJraXQgZ2l2aW5nIGFuIGVtcHR5IHN0YXR1c1RleHQKCQkJCQkJCQkJCXN0YXR1c1RleHQgPSAiIjsKCQkJCQkJCQkJfQoKCQkJCQkJCQkJLy8gRmlsdGVyIHN0YXR1cyBmb3Igbm9uIHN0YW5kYXJkIGJlaGF2aW9ycwoKCQkJCQkJCQkJLy8gSWYgdGhlIHJlcXVlc3QgaXMgbG9jYWwgYW5kIHdlIGhhdmUgZGF0YTogYXNzdW1lIGEgc3VjY2VzcwoJCQkJCQkJCQkvLyAoc3VjY2VzcyB3aXRoIG5vIGRhdGEgd29uJ3QgZ2V0IG5vdGlmaWVkLCB0aGF0J3MgdGhlIGJlc3Qgd2UKCQkJCQkJCQkJLy8gY2FuIGRvIGdpdmVuIGN1cnJlbnQgaW1wbGVtZW50YXRpb25zKQoJCQkJCQkJCQlpZiAoICFzdGF0dXMgJiYgb3B0aW9ucy5pc0xvY2FsICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkgewoJCQkJCQkJCQkJc3RhdHVzID0gcmVzcG9uc2VzLnRleHQgPyAyMDAgOiA0MDQ7CgoJCQkJCQkJCQkvLyBJRSAtICMxNDUwOiBzb21ldGltZXMgcmV0dXJucyAxMjIzIHdoZW4gaXQgc2hvdWxkIGJlIDIwNAoJCQkJCQkJCQl9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDEyMjMgKSB7CgkJCQkJCQkJCQlzdGF0dXMgPSAyMDQ7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJLy8gQ2FsbCBjb21wbGV0ZSBpZiBuZWVkZWQKCQkJCQkJCWlmICggcmVzcG9uc2VzICkgewoJCQkJCQkJCWNvbXBsZXRlKCBzdGF0dXMsIHN0YXR1c1RleHQsIHJlc3BvbnNlcywgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpICk7CgkJCQkJCQl9CgkJCQkJCX07CgoJCQkJCQkvLyBEbyBzZW5kIHRoZSByZXF1ZXN0CgkJCQkJCS8vIGB4aHIuc2VuZGAgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbiwgYnV0IGl0IHdpbGwgYmUKCQkJCQkJLy8gaGFuZGxlZCBpbiBqUXVlcnkuYWpheCAoc28gbm8gdHJ5L2NhdGNoIGhlcmUpCgkJCQkJCWlmICggIW9wdGlvbnMuYXN5bmMgKSB7CgoJCQkJCQkJLy8gSWYgd2UncmUgaW4gc3luYyBtb2RlIHdlIGZpcmUgdGhlIGNhbGxiYWNrCgkJCQkJCQljYWxsYmFjaygpOwoJCQkJCQl9IGVsc2UgaWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHsKCgkJCQkJCQkvLyAoSUU2ICYgSUU3KSBpZiBpdCdzIGluIGNhY2hlIGFuZCBoYXMgYmVlbgoJCQkJCQkJLy8gcmV0cmlldmVkIGRpcmVjdGx5IHdlIG5lZWQgdG8gZmlyZSB0aGUgY2FsbGJhY2sKCQkJCQkJCXdpbmRvdy5zZXRUaW1lb3V0KCBjYWxsYmFjayApOwoJCQkJCQl9IGVsc2UgewoKCQkJCQkJCS8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjaywgYnV0IGRlbGF5IGl0IGluIGNhc2UgYHhoci5zZW5kYCB0aHJvd3MKCQkJCQkJCS8vIEFkZCB0byB0aGUgbGlzdCBvZiBhY3RpdmUgeGhyIGNhbGxiYWNrcwoJCQkJCQkJeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHhockNhbGxiYWNrc1sgaWQgXSA9IGNhbGxiYWNrOwoJCQkJCQl9CgkJCQkJfSwKCgkJCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJCQlpZiAoIGNhbGxiYWNrICkgewoJCQkJCQkJY2FsbGJhY2soIHVuZGVmaW5lZCwgdHJ1ZSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfTsKCQkJfQoJCX0gKTsKCX0KCgkvLyBGdW5jdGlvbnMgdG8gY3JlYXRlIHhocnMKCWZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJkWEhSKCkgewoJCXRyeSB7CgkJCXJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7CgkJfSBjYXRjaCAoIGUgKSB7fQoJfQoKCWZ1bmN0aW9uIGNyZWF0ZUFjdGl2ZVhIUigpIHsKCQl0cnkgewoJCQlyZXR1cm4gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCAiTWljcm9zb2Z0LlhNTEhUVFAiICk7CgkJfSBjYXRjaCAoIGUgKSB7fQoJfQoKCgoKCS8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlCglqUXVlcnkuYWpheFNldHVwKCB7CgkJYWNjZXB0czogewoJCQlzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIgKwoJCQkJImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCIKCQl9LAoJCWNvbnRlbnRzOiB7CgkJCXNjcmlwdDogL1xiKD86amF2YXxlY21hKXNjcmlwdFxiLwoJCX0sCgkJY29udmVydGVyczogewoJCQkidGV4dCBzY3JpcHQiOiBmdW5jdGlvbiggdGV4dCApIHsKCQkJCWpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7CgkJCQlyZXR1cm4gdGV4dDsKCQkJfQoJCX0KCX0gKTsKCgkvLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGdsb2JhbAoJalF1ZXJ5LmFqYXhQcmVmaWx0ZXIoICJzY3JpcHQiLCBmdW5jdGlvbiggcyApIHsKCQlpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHsKCQkJcy5jYWNoZSA9IGZhbHNlOwoJCX0KCQlpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgkJCXMudHlwZSA9ICJHRVQiOwoJCQlzLmdsb2JhbCA9IGZhbHNlOwoJCX0KCX0gKTsKCgkvLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnQKCWpRdWVyeS5hamF4VHJhbnNwb3J0KCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CgoJCS8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHMKCQlpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgoJCQl2YXIgc2NyaXB0LAoJCQkJaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgalF1ZXJ5KCAiaGVhZCIgKVsgMCBdIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJCXJldHVybiB7CgoJCQkJc2VuZDogZnVuY3Rpb24oIF8sIGNhbGxiYWNrICkgewoKCQkJCQlzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2NyaXB0IiApOwoKCQkJCQlzY3JpcHQuYXN5bmMgPSB0cnVlOwoKCQkJCQlpZiAoIHMuc2NyaXB0Q2hhcnNldCApIHsKCQkJCQkJc2NyaXB0LmNoYXJzZXQgPSBzLnNjcmlwdENoYXJzZXQ7CgkJCQkJfQoKCQkJCQlzY3JpcHQuc3JjID0gcy51cmw7CgoJCQkJCS8vIEF0dGFjaCBoYW5kbGVycyBmb3IgYWxsIGJyb3dzZXJzCgkJCQkJc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHsKCgkJCQkJCWlmICggaXNBYm9ydCB8fCAhc2NyaXB0LnJlYWR5U3RhdGUgfHwgL2xvYWRlZHxjb21wbGV0ZS8udGVzdCggc2NyaXB0LnJlYWR5U3RhdGUgKSApIHsKCgkJCQkJCQkvLyBIYW5kbGUgbWVtb3J5IGxlYWsgaW4gSUUKCQkJCQkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDsKCgkJCQkJCQkvLyBSZW1vdmUgdGhlIHNjcmlwdAoJCQkJCQkJaWYgKCBzY3JpcHQucGFyZW50Tm9kZSApIHsKCQkJCQkJCQlzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7CgkJCQkJCQl9CgoJCQkJCQkJLy8gRGVyZWZlcmVuY2UgdGhlIHNjcmlwdAoJCQkJCQkJc2NyaXB0ID0gbnVsbDsKCgkJCQkJCQkvLyBDYWxsYmFjayBpZiBub3QgYWJvcnQKCQkJCQkJCWlmICggIWlzQWJvcnQgKSB7CgkJCQkJCQkJY2FsbGJhY2soIDIwMCwgInN1Y2Nlc3MiICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9OwoKCQkJCQkvLyBDaXJjdW12ZW50IElFNiBidWdzIHdpdGggYmFzZSBlbGVtZW50cyAoIzI3MDkgYW5kICM0Mzc4KSBieSBwcmVwZW5kaW5nCgkJCQkJLy8gVXNlIG5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIHRvIGF2b2lkIG91ciBkb21NYW5pcCBBSkFYIHRyaWNrZXJ5CgkJCQkJaGVhZC5pbnNlcnRCZWZvcmUoIHNjcmlwdCwgaGVhZC5maXJzdENoaWxkICk7CgkJCQl9LAoKCQkJCWFib3J0OiBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIHNjcmlwdCApIHsKCQkJCQkJc2NyaXB0Lm9ubG9hZCggdW5kZWZpbmVkLCB0cnVlICk7CgkJCQkJfQoJCQkJfQoJCQl9OwoJCX0KCX0gKTsKCgoKCgl2YXIgb2xkQ2FsbGJhY2tzID0gW10sCgkJcmpzb25wID0gLyg9KVw/KD89JnwkKXxcP1w/LzsKCgkvLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzCglqUXVlcnkuYWpheFNldHVwKCB7CgkJanNvbnA6ICJjYWxsYmFjayIsCgkJanNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7CgkJCXZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgIl8iICsgKCBub25jZSsrICkgKTsKCQkJdGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7CgkJCXJldHVybiBjYWxsYmFjazsKCQl9Cgl9ICk7CgoJLy8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzCglqUXVlcnkuYWpheFByZWZpbHRlciggImpzb24ganNvbnAiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7CgoJCXZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lciwKCQkJanNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID8KCQkJCSJ1cmwiIDoKCQkJCXR5cGVvZiBzLmRhdGEgPT09ICJzdHJpbmciICYmCgkJCQkJKCBzLmNvbnRlbnRUeXBlIHx8ICIiICkKCQkJCQkJLmluZGV4T2YoICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiICkgPT09IDAgJiYKCQkJCQlyanNvbnAudGVzdCggcy5kYXRhICkgJiYgImRhdGEiCgkJCSk7CgoJCS8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyAianNvbnAiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0CgkJaWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSAianNvbnAiICkgewoKCQkJLy8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdAoJCQljYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBqUXVlcnkuaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgPwoJCQkJcy5qc29ucENhbGxiYWNrKCkgOgoJCQkJcy5qc29ucENhbGxiYWNrOwoKCQkJLy8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YQoJCQlpZiAoIGpzb25Qcm9wICkgewoJCQkJc1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCAiJDEiICsgY2FsbGJhY2tOYW1lICk7CgkJCX0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkgewoJCQkJcy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/ICImIiA6ICI/IiApICsgcy5qc29ucCArICI9IiArIGNhbGxiYWNrTmFtZTsKCQkJfQoKCQkJLy8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvbgoJCQlzLmNvbnZlcnRlcnNbICJzY3JpcHQganNvbiIgXSA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7CgkJCQkJalF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyAiIHdhcyBub3QgY2FsbGVkIiApOwoJCQkJfQoJCQkJcmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07CgkJCX07CgoJCQkvLyBmb3JjZSBqc29uIGRhdGFUeXBlCgkJCXMuZGF0YVR5cGVzWyAwIF0gPSAianNvbiI7CgoJCQkvLyBJbnN0YWxsIGNhbGxiYWNrCgkJCW92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTsKCQkJd2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkgewoJCQkJcmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7CgkJCX07CgoJCQkvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycykKCQkJanFYSFIuYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCQkvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXQKCQkJCWlmICggb3ZlcndyaXR0ZW4gPT09IHVuZGVmaW5lZCApIHsKCQkJCQlqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApOwoKCQkJCS8vIE90aGVyd2lzZSByZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlCgkJCQl9IGVsc2UgewoJCQkJCXdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjsKCQkJCX0KCgkJCQkvLyBTYXZlIGJhY2sgYXMgZnJlZQoJCQkJaWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHsKCgkJCQkJLy8gbWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kCgkJCQkJcy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrOwoKCQkJCQkvLyBzYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlCgkJCQkJb2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApOwoJCQkJfQoKCQkJCS8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZQoJCQkJaWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHsKCQkJCQlvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApOwoJCQkJfQoKCQkJCXJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7CgkJCX0gKTsKCgkJCS8vIERlbGVnYXRlIHRvIHNjcmlwdAoJCQlyZXR1cm4gInNjcmlwdCI7CgkJfQoJfSApOwoKCgoKCS8vIGRhdGE6IHN0cmluZyBvZiBodG1sCgkvLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsCgkvLyBkZWZhdWx0cyB0byBkb2N1bWVudAoJLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZwoJalF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHsKCQlpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAic3RyaW5nIiApIHsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCWlmICggdHlwZW9mIGNvbnRleHQgPT09ICJib29sZWFuIiApIHsKCQkJa2VlcFNjcmlwdHMgPSBjb250ZXh0OwoJCQljb250ZXh0ID0gZmFsc2U7CgkJfQoJCWNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50OwoKCQl2YXIgcGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICksCgkJCXNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107CgoJCS8vIFNpbmdsZSB0YWcKCQlpZiAoIHBhcnNlZCApIHsKCQkJcmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07CgkJfQoKCQlwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApOwoKCQlpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7CgkJCWpRdWVyeSggc2NyaXB0cyApLnJlbW92ZSgpOwoJCX0KCgkJcmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7Cgl9OwoKCgkvLyBLZWVwIGEgY29weSBvZiB0aGUgb2xkIGxvYWQgbWV0aG9kCgl2YXIgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZDsKCgkvKioKCSAqIExvYWQgYSB1cmwgaW50byBhIHBhZ2UKCSAqLwoJalF1ZXJ5LmZuLmxvYWQgPSBmdW5jdGlvbiggdXJsLCBwYXJhbXMsIGNhbGxiYWNrICkgewoJCWlmICggdHlwZW9mIHVybCAhPT0gInN0cmluZyIgJiYgX2xvYWQgKSB7CgkJCXJldHVybiBfbG9hZC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfQoKCQl2YXIgc2VsZWN0b3IsIHR5cGUsIHJlc3BvbnNlLAoJCQlzZWxmID0gdGhpcywKCQkJb2ZmID0gdXJsLmluZGV4T2YoICIgIiApOwoKCQlpZiAoIG9mZiA+IC0xICkgewoJCQlzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiwgdXJsLmxlbmd0aCApICk7CgkJCXVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7CgkJfQoKCQkvLyBJZiBpdCdzIGEgZnVuY3Rpb24KCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHsKCgkJCS8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrCgkJCWNhbGxiYWNrID0gcGFyYW1zOwoJCQlwYXJhbXMgPSB1bmRlZmluZWQ7CgoJCS8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmcKCQl9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gIm9iamVjdCIgKSB7CgkJCXR5cGUgPSAiUE9TVCI7CgkJfQoKCQkvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdAoJCWlmICggc2VsZi5sZW5ndGggPiAwICkgewoJCQlqUXVlcnkuYWpheCggewoJCQkJdXJsOiB1cmwsCgoJCQkJLy8gSWYgInR5cGUiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiAiR0VUIiBtZXRob2Qgd2lsbCBiZSB1c2VkLgoJCQkJLy8gTWFrZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGV4cGxpY2l0IHNpbmNlCgkJCQkvLyB1c2VyIGNhbiBvdmVycmlkZSBpdCB0aHJvdWdoIGFqYXhTZXR1cCBtZXRob2QKCQkJCXR5cGU6IHR5cGUgfHwgIkdFVCIsCgkJCQlkYXRhVHlwZTogImh0bWwiLAoJCQkJZGF0YTogcGFyYW1zCgkJCX0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkgewoKCQkJCS8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFjawoJCQkJcmVzcG9uc2UgPSBhcmd1bWVudHM7CgoJCQkJc2VsZi5odG1sKCBzZWxlY3RvciA/CgoJCQkJCS8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdgoJCQkJCS8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9ycwoJCQkJCWpRdWVyeSggIjxkaXY+IiApLmFwcGVuZCggalF1ZXJ5LnBhcnNlSFRNTCggcmVzcG9uc2VUZXh0ICkgKS5maW5kKCBzZWxlY3RvciApIDoKCgkJCQkJLy8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHQKCQkJCQlyZXNwb25zZVRleHQgKTsKCgkJCS8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgImRhdGEiLCAic3RhdHVzIiwgImpxWEhSIgoJCQkvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuCgkJCS8vIElmIGl0IGZhaWxzLCB0aGlzIGZ1bmN0aW9uIGdldHMgImpxWEhSIiwgInN0YXR1cyIsICJlcnJvciIKCQkJfSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7CgkJCQlzZWxmLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCWNhbGxiYWNrLmFwcGx5KCB0aGlzLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7CgkJCQl9ICk7CgkJCX0gKTsKCQl9CgoJCXJldHVybiB0aGlzOwoJfTsKCgoKCgkvLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50cwoJalF1ZXJ5LmVhY2goIFsKCQkiYWpheFN0YXJ0IiwKCQkiYWpheFN0b3AiLAoJCSJhamF4Q29tcGxldGUiLAoJCSJhamF4RXJyb3IiLAoJCSJhamF4U3VjY2VzcyIsCgkJImFqYXhTZW5kIgoJXSwgZnVuY3Rpb24oIGksIHR5cGUgKSB7CgkJalF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7CgkJCXJldHVybiB0aGlzLm9uKCB0eXBlLCBmbiApOwoJCX07Cgl9ICk7CgoKCgoJalF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkgewoJCQlyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTsKCQl9ICkubGVuZ3RoOwoJfTsKCgoKCgoJLyoqCgkgKiBHZXRzIGEgd2luZG93IGZyb20gYW4gZWxlbWVudAoJICovCglmdW5jdGlvbiBnZXRXaW5kb3coIGVsZW0gKSB7CgkJcmV0dXJuIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApID8KCQkJZWxlbSA6CgkJCWVsZW0ubm9kZVR5cGUgPT09IDkgPwoJCQkJZWxlbS5kZWZhdWx0VmlldyB8fCBlbGVtLnBhcmVudFdpbmRvdyA6CgkJCQlmYWxzZTsKCX0KCglqUXVlcnkub2Zmc2V0ID0gewoJCXNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7CgkJCXZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sCgkJCQlwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sICJwb3NpdGlvbiIgKSwKCQkJCWN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSwKCQkJCXByb3BzID0ge307CgoJCQkvLyBzZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtCgkJCWlmICggcG9zaXRpb24gPT09ICJzdGF0aWMiICkgewoJCQkJZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICJyZWxhdGl2ZSI7CgkJCX0KCgkJCWN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7CgkJCWN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sICJ0b3AiICk7CgkJCWN1ckNTU0xlZnQgPSBqUXVlcnkuY3NzKCBlbGVtLCAibGVmdCIgKTsKCQkJY2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgJiYKCQkJCWpRdWVyeS5pbkFycmF5KCAiYXV0byIsIFsgY3VyQ1NTVG9wLCBjdXJDU1NMZWZ0IF0gKSA+IC0xOwoKCQkJLy8gbmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXIgdG9wIG9yIGxlZnQKCQkJLy8gaXMgYXV0byBhbmQgcG9zaXRpb24gaXMgZWl0aGVyIGFic29sdXRlIG9yIGZpeGVkCgkJCWlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7CgkJCQljdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTsKCQkJCWN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDsKCQkJCWN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0OwoJCQl9IGVsc2UgewoJCQkJY3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDsKCQkJCWN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDsKCQkJfQoKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkgewoKCQkJCS8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KQoJCQkJb3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgalF1ZXJ5LmV4dGVuZCgge30sIGN1ck9mZnNldCApICk7CgkJCX0KCgkJCWlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHsKCQkJCXByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7CgkJCX0KCQkJaWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHsKCQkJCXByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0OwoJCQl9CgoJCQlpZiAoICJ1c2luZyIgaW4gb3B0aW9ucyApIHsKCQkJCW9wdGlvbnMudXNpbmcuY2FsbCggZWxlbSwgcHJvcHMgKTsKCQkJfSBlbHNlIHsKCQkJCWN1ckVsZW0uY3NzKCBwcm9wcyApOwoJCQl9CgkJfQoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJb2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHsKCQkJaWYgKCBhcmd1bWVudHMubGVuZ3RoICkgewoJCQkJcmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/CgkJCQkJdGhpcyA6CgkJCQkJdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCQkJalF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTsKCQkJCQl9ICk7CgkJCX0KCgkJCXZhciBkb2NFbGVtLCB3aW4sCgkJCQlib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LAoJCQkJZWxlbSA9IHRoaXNbIDAgXSwKCQkJCWRvYyA9IGVsZW0gJiYgZWxlbS5vd25lckRvY3VtZW50OwoKCQkJaWYgKCAhZG9jICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCgkJCS8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZQoJCQlpZiAoICFqUXVlcnkuY29udGFpbnMoIGRvY0VsZW0sIGVsZW0gKSApIHsKCQkJCXJldHVybiBib3g7CgkJCX0KCgkJCS8vIElmIHdlIGRvbid0IGhhdmUgZ0JDUiwganVzdCB1c2UgMCwwIHJhdGhlciB0aGFuIGVycm9yCgkJCS8vIEJsYWNrQmVycnkgNSwgaU9TIDMgKG9yaWdpbmFsIGlQaG9uZSkKCQkJaWYgKCB0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09ICJ1bmRlZmluZWQiICkgewoJCQkJYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCQkJfQoJCQl3aW4gPSBnZXRXaW5kb3coIGRvYyApOwoJCQlyZXR1cm4gewoJCQkJdG9wOiBib3gudG9wICArICggd2luLnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wICkgIC0gKCBkb2NFbGVtLmNsaWVudFRvcCAgfHwgMCApLAoJCQkJbGVmdDogYm94LmxlZnQgKyAoIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgKSAtICggZG9jRWxlbS5jbGllbnRMZWZ0IHx8IDAgKQoJCQl9OwoJCX0sCgoJCXBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQkJaWYgKCAhdGhpc1sgMCBdICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQl2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsCgkJCQlwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9LAoJCQkJZWxlbSA9IHRoaXNbIDAgXTsKCgkJCS8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sCgkJCS8vIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudAoJCQlpZiAoIGpRdWVyeS5jc3MoIGVsZW0sICJwb3NpdGlvbiIgKSA9PT0gImZpeGVkIiApIHsKCgkJCQkvLyB3ZSBhc3N1bWUgdGhhdCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgYXZhaWxhYmxlIHdoZW4gY29tcHV0ZWQgcG9zaXRpb24gaXMgZml4ZWQKCQkJCW9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgkJCX0gZWxzZSB7CgoJCQkJLy8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnQKCQkJCW9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7CgoJCQkJLy8gR2V0IGNvcnJlY3Qgb2Zmc2V0cwoJCQkJb2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTsKCQkJCWlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sICJodG1sIiApICkgewoJCQkJCXBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTsKCQkJCX0KCgkJCQkvLyBBZGQgb2Zmc2V0UGFyZW50IGJvcmRlcnMKCQkJCXBhcmVudE9mZnNldC50b3AgICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCAiYm9yZGVyVG9wV2lkdGgiLCB0cnVlICk7CgkJCQlwYXJlbnRPZmZzZXQubGVmdCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgImJvcmRlckxlZnRXaWR0aCIsIHRydWUgKTsKCQkJfQoKCQkJLy8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2lucwoJCQkvLyBub3RlOiB3aGVuIGFuIGVsZW1lbnQgaGFzIG1hcmdpbjogYXV0byB0aGUgb2Zmc2V0TGVmdCBhbmQgbWFyZ2luTGVmdAoJCQkvLyBhcmUgdGhlIHNhbWUgaW4gU2FmYXJpIGNhdXNpbmcgb2Zmc2V0LmxlZnQgdG8gaW5jb3JyZWN0bHkgYmUgMAoJCQlyZXR1cm4gewoJCQkJdG9wOiAgb2Zmc2V0LnRvcCAgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgIm1hcmdpblRvcCIsIHRydWUgKSwKCQkJCWxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCAibWFyZ2luTGVmdCIsIHRydWUgKQoJCQl9OwoJCX0sCgoJCW9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQ7CgoJCQkJd2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnQsICJodG1sIiApICYmCgkJCQkJalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCAicG9zaXRpb24iICkgPT09ICJzdGF0aWMiICkgKSB7CgkJCQkJb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDsKCQkJCX0KCQkJCXJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnRFbGVtZW50OwoJCQl9ICk7CgkJfQoJfSApOwoKCS8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kcwoJalF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogInBhZ2VYT2Zmc2V0Iiwgc2Nyb2xsVG9wOiAicGFnZVlPZmZzZXQiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7CgkJdmFyIHRvcCA9IC9ZLy50ZXN0KCBwcm9wICk7CgoJCWpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7CgkJCQl2YXIgd2luID0gZ2V0V2luZG93KCBlbGVtICk7CgoJCQkJaWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm4gd2luID8gKCBwcm9wIGluIHdpbiApID8gd2luWyBwcm9wIF0gOgoJCQkJCQl3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBtZXRob2QgXSA6CgkJCQkJCWVsZW1bIG1ldGhvZCBdOwoJCQkJfQoKCQkJCWlmICggd2luICkgewoJCQkJCXdpbi5zY3JvbGxUbygKCQkJCQkJIXRvcCA/IHZhbCA6IGpRdWVyeSggd2luICkuc2Nyb2xsTGVmdCgpLAoJCQkJCQl0b3AgPyB2YWwgOiBqUXVlcnkoIHdpbiApLnNjcm9sbFRvcCgpCgkJCQkJKTsKCgkJCQl9IGVsc2UgewoJCQkJCWVsZW1bIG1ldGhvZCBdID0gdmFsOwoJCQkJfQoJCQl9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApOwoJCX07Cgl9ICk7CgoJLy8gU3VwcG9ydDogU2FmYXJpPDctOCssIENocm9tZTwzNy00NCsKCS8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uCgkvLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODQKCS8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHQKCS8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCB3ZSBqdXN0IGNoZWNrIGZvciBpdCBoZXJlCglqUXVlcnkuZWFjaCggWyAidG9wIiwgImxlZnQiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkgewoJCWpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sCgkJCWZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJCWlmICggY29tcHV0ZWQgKSB7CgkJCQkJY29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTsKCgkJCQkJLy8gaWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0CgkJCQkJcmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID8KCQkJCQkJalF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgInB4IiA6CgkJCQkJCWNvbXB1dGVkOwoJCQkJfQoJCQl9CgkJKTsKCX0gKTsKCgoJLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzCglqUXVlcnkuZWFjaCggeyBIZWlnaHQ6ICJoZWlnaHQiLCBXaWR0aDogIndpZHRoIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHsKCQlqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiAiaW5uZXIiICsgbmFtZSwgY29udGVudDogdHlwZSwgIiI6ICJvdXRlciIgKyBuYW1lIH0sCgkJZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7CgoJCQkvLyBtYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGgKCQkJalF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7CgkJCQl2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSAiYm9vbGVhbiIgKSwKCQkJCQlleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/ICJtYXJnaW4iIDogImJvcmRlciIgKTsKCgkJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgdHlwZSwgdmFsdWUgKSB7CgkJCQkJdmFyIGRvYzsKCgkJCQkJaWYgKCBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHsKCgkJCQkJCS8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlCgkJCQkJCS8vIGlzbid0IGEgd2hvbGUgbG90IHdlIGNhbiBkby4gU2VlIHB1bGwgcmVxdWVzdCBhdCB0aGlzIFVSTCBmb3IgZGlzY3Vzc2lvbjoKCQkJCQkJLy8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC83NjQKCQkJCQkJcmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyAiY2xpZW50IiArIG5hbWUgXTsKCQkJCQl9CgoJCQkJCS8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHQKCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJCWRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50OwoKCQkJCQkJLy8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLAoJCQkJCQkvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3QKCQkJCQkJLy8gdW5mb3J0dW5hdGVseSwgdGhpcyBjYXVzZXMgYnVnICMzODM4IGluIElFNi84IG9ubHksCgkJCQkJCS8vIGJ1dCB0aGVyZSBpcyBjdXJyZW50bHkgbm8gZ29vZCwgc21hbGwgd2F5IHRvIGZpeCBpdC4KCQkJCQkJcmV0dXJuIE1hdGgubWF4KAoJCQkJCQkJZWxlbS5ib2R5WyAic2Nyb2xsIiArIG5hbWUgXSwgZG9jWyAic2Nyb2xsIiArIG5hbWUgXSwKCQkJCQkJCWVsZW0uYm9keVsgIm9mZnNldCIgKyBuYW1lIF0sIGRvY1sgIm9mZnNldCIgKyBuYW1lIF0sCgkJCQkJCQlkb2NbICJjbGllbnQiICsgbmFtZSBdCgkJCQkJCSk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/CgoJCQkJCQkvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0CgkJCQkJCWpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOgoKCQkJCQkJLy8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudAoJCQkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHR5cGUsIHZhbHVlLCBleHRyYSApOwoJCQkJfSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUsIG51bGwgKTsKCQkJfTsKCQl9ICk7Cgl9ICk7CgoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCgkJYmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApOwoJCX0sCgkJdW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkgewoJCQlyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApOwoJCX0sCgoJCWRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTsKCQl9LAoJCXVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkgewoKCQkJLy8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKQoJCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/CgkJCQl0aGlzLm9mZiggc2VsZWN0b3IsICIqKiIgKSA6CgkJCQl0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8ICIqKiIsIGZuICk7CgkJfQoJfSApOwoKCS8vIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0CglqUXVlcnkuZm4uc2l6ZSA9IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmxlbmd0aDsKCX07CgoJalF1ZXJ5LmZuLmFuZFNlbGYgPSBqUXVlcnkuZm4uYWRkQmFjazsKCgoKCgkvLyBSZWdpc3RlciBhcyBhIG5hbWVkIEFNRCBtb2R1bGUsIHNpbmNlIGpRdWVyeSBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXIKCS8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXQKCS8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdAoJLy8gd2F5IHRvIHJlZ2lzdGVyLiBMb3dlcmNhc2UganF1ZXJ5IGlzIHVzZWQgYmVjYXVzZSBBTUQgbW9kdWxlIG5hbWVzIGFyZQoJLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlCgkvLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHMKCS8vIHRvIGNhbGwgbm9Db25mbGljdCB0byBoaWRlIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnksIGl0IHdpbGwgd29yay4KCgkvLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZAoJLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhbgoJLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUKCS8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub24KCglpZiAoIHRydWUgKSB7CgkJIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBqUXVlcnk7CgkJfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwoJfQoKCgoJdmFyCgoJCS8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZQoJCV9qUXVlcnkgPSB3aW5kb3cualF1ZXJ5LAoKCQkvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZQoJCV8kID0gd2luZG93LiQ7CgoJalF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHsKCQlpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7CgkJCXdpbmRvdy4kID0gXyQ7CgkJfQoKCQlpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkgewoJCQl3aW5kb3cualF1ZXJ5ID0gX2pRdWVyeTsKCQl9CgoJCXJldHVybiBqUXVlcnk7Cgl9OwoKCS8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4KCS8vIEFNRCAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpCgkvLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpCglpZiAoICFub0dsb2JhbCApIHsKCQl3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7Cgl9CgoJcmV0dXJuIGpRdWVyeTsKCX0pKTsKCgovKioqLyB9KSwKLyogMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyd1c2Ugc3RyaWN0JzsKCgkvKiBlc2xpbnQgbWF4LXN0YXRlbWVudHM6IFsyLCAyM10gY29tcGxleGl0eTogWzIsIDddICovCgkhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg0KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSwgX193ZWJwYWNrX3JlcXVpcmVfXygxMCldLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uICgkLCBIYW5kbGViYXJzLCBDb29raWUsIGNhY2hlYnVzdE1hcCkgewoKCSAgdmFyIHRwbCA9IEhhbmRsZWJhcnMuY29tcGlsZTsKCSAgdmFyIGZvcm1UcGwgPSB0cGwoJzxmb3JtIG1ldGhvZD0iUE9TVCIgYWN0aW9uPSJ7e2FjdGlvbn19Ij48L2Zvcm0+Jyk7CgkgIHZhciBpbnB1dFRwbCA9IHRwbCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ie3tuYW1lfX0iIHZhbHVlPSJ7e3ZhbHVlfX0iIC8+Jyk7CgoJICB2YXIgVXRpbCA9IHt9OwoKCSAgdmFyIGphbW1lclRlbXBsYXRlID0gewoJICAgICdjaHJvbWUnOiAnPGlucHV0IHN0eWxlPSJvcGFjaXR5OiAwOyB3aWR0aDogMDsgaGVpZ2h0OiAwOyIgaWQ9Im9rdGFfaGlkZGVuX3VzZXJuYW1lX2Nocm9tZV9zZXF1ZW5jZV9ubyIgXAoJICAgICAgICAgICAgICAgIHR5cGU9InRleHQiIGF1dG9jb21wbGV0ZT0ib2ZmIiAvPlwKCSAgICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9Im9wYWNpdHk6IDA7IHdpZHRoOiAwOyBoZWlnaHQ6IDA7IiBpZD0ib2t0YV9oaWRkZW5fcGFzc19jaHJvbWVfc2VxdWVuY2Vfbm8iXAoJICAgICAgICAgICAgICAgIHR5cGU9InBhc3N3b3JkIiBhdXRvY29tcGxldGU9Im9mZiIgLz4nLAoKCSAgICAnc2FmYXJpJzogJzxpbnB1dCBzdHlsZT0ib3BhY2l0eTogMDsgd2lkdGg6IDA7IGhlaWdodDogMDsiIGlkPSJva3RhX2hpZGRlbl9wYXNzX3NhZmFyaV9zZXF1ZW5jZV9ubyIgXAoJICAgICAgICAgICAgICAgICAgdHlwZT0icGFzc3dvcmQiIGF1dG9jb21wbGV0ZT0ib2ZmIiAvPicsCgoJICAgICdtb3ppbGxhJzogJzxpbnB1dCBzdHlsZT0iZGlzcGxheTpub25lIiB0eXBlPSJwYXNzd29yZCIgaWQ9Im9rdGFfaGlkZGVuX3Bhc3NfZmlyZWZveF9zZXF1ZW5jZV9ubyIgXAoJICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPSJvZmYiIHZhbHVlPSJ0ZXN0IiAvPicsCgoJICAgICdtc2llJzogJzxpbnB1dCBpZD0ib2t0YV9oaWRkZW5fcGFzc19pZV9zZXF1ZW5jZV9ubyIgdHlwZT0icGFzc3dvcmQiIGF1dG9jb21wbGV0ZT0ib2ZmIlwKCSAgICAgICAgICAgICAgc3R5bGU9ImRpc3BsYXk6bm9uZSIgdmFsdWUgPSAidGVzdF9zZXF1ZW5jZV9ubyIvPicKCSAgfTsKCgkgIHZhciBjbGVhckJlZW5Ub0hvbWVQYWdlID0gZnVuY3Rpb24gY2xlYXJCZWVuVG9Ib21lUGFnZSgpIHsKCSAgICBDb29raWUucmVtb3ZlQ29va2llKCdhbycsIHsgcGF0aDogJy8nIH0pOwoJICB9OwoKCSAgdmFyIHJlc2V0QXV0b0xhdW5jaCA9IGZ1bmN0aW9uIHJlc2V0QXV0b0xhdW5jaCgpIHsKCSAgICBDb29raWUucmVtb3ZlQ29va2llKCdhdXRvbGF1bmNoX3RyaWdnZXJlZCcsIHsgcGF0aDogJy8nIH0pOwoJICB9OwoKCSAgdmFyIGlzUG9zdFNhbWxFbWJlZFVybCA9IGZ1bmN0aW9uIGlzUG9zdFNhbWxFbWJlZFVybCh1cmwpIHsKCSAgICAvLyBBUFBfU0FNTF9GT1JfSU5TVEFOQ0UgaXMgL2FwcC97YXBwfS97a2V5fS9zc28vc2FtbAoJICAgIHJldHVybiB1cmwuc2VhcmNoKC9cL2FwcFwvW14vXStcL1teL10rXC9zc29cL3NhbWwuKlw/L2kpICE9PSAtMTsKCSAgfTsKCgkgIC8vIFBvc3RzIHRvIGEgZ2l2ZW4gdXJsLCBjb252ZXJ0aW5nIGFueSBxdWVyeSBwYXJhbXMgdG8gcG9zdCBwYXJhbXMuIFRoaXMgaXMKCSAgLy8gZG9uZSBieSBjcmVhdGluZyBhIGZvcm0gb24gdGhlIHBhZ2UsIHBhcnNpbmcgdGhlIHBhcmFtcyBmcm9tIHRoZSB1cmwsIGFuZAoJICAvLyBzdWJtaXR0aW5nIGl0LgoJICAvLyAkZWwgaXMgYW4gZWxlbWVudCB0byBhcHBlbmQgdGhlIGZvcm0gdG8uCgkgIHZhciBwb3N0VG9VcmwgPSBmdW5jdGlvbiBwb3N0VG9VcmwodXJsLCAkZWwpIHsKCSAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJz8nKSwKCSAgICAgICAgYmFzZVVybCA9IHBhcnRzWzBdLAoJICAgICAgICBxdWVyeVN0cmluZyA9IHBhcnRzWzFdLAoJICAgICAgICBxdWVyeVBhcmFtcywKCSAgICAgICAgZm9ybTsKCSAgICBmb3JtID0gJChmb3JtVHBsKHsgYWN0aW9uOiBiYXNlVXJsIH0pKTsKCSAgICBpZiAocXVlcnlTdHJpbmcpIHsKCSAgICAgIHF1ZXJ5UGFyYW1zID0gcXVlcnlTdHJpbmcuc3BsaXQoJyYnKTsKCSAgICAgICQuZWFjaChxdWVyeVBhcmFtcywgZnVuY3Rpb24gKGksIHBhcmFtKSB7CgkgICAgICAgIHZhciB0b2tlbnMgPSBwYXJhbS5zcGxpdCgnPScpOwoJICAgICAgICBmb3JtLmFwcGVuZChpbnB1dFRwbCh7CgkgICAgICAgICAgbmFtZTogdG9rZW5zWzBdLAoJICAgICAgICAgIHZhbHVlOiBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKQoJICAgICAgICB9KSk7CgkgICAgICB9KTsKCSAgICB9CgkgICAgJGVsLmFwcGVuZChmb3JtKTsKCSAgICBmb3JtLnN1Ym1pdCgpOwoJICB9OwoKCSAgdmFyIGFkZFBhc3N3b3JkSg==", "base64"));
  res.write(new Buffer("YW1tZXJzID0gZnVuY3Rpb24gYWRkUGFzc3dvcmRKYW1tZXJzKCRlbCkgewoJICAgIHZhciBoaWRkZW5JbnB1dCwgYnJvd3NlciwgdG90YWxSZXBldGl0aW9uczsKCgkgICAgaWYgKCQuYnJvd3Nlci5jaHJvbWUpIHsKCSAgICAgIGhpZGRlbklucHV0ID0gcGFzc3dvcmRKYW1tZXJGYWN0b3J5KCdjaHJvbWUnLCAzKTsKCSAgICAgICRlbC5wcmVwZW5kKGhpZGRlbklucHV0KTsKCSAgICAgIHJldHVybjsKCSAgICB9CgkgICAgaWYgKCQuYnJvd3Nlci5zYWZhcmkpIHsKCSAgICAgIGJyb3dzZXIgPSAnc2FmYXJpJzsKCSAgICAgIHRvdGFsUmVwZXRpdGlvbnMgPSAyOwoJICAgIH0gZWxzZSBpZiAoJC5icm93c2VyLm1vemlsbGEpIHsKCSAgICAgIGJyb3dzZXIgPSAnbW96aWxsYSc7CgkgICAgICB0b3RhbFJlcGV0aXRpb25zID0gMzsKCSAgICB9IGVsc2UgewoJICAgICAgYnJvd3NlciA9ICdtc2llJzsKCSAgICAgIHRvdGFsUmVwZXRpdGlvbnMgPSAyOwoJICAgIH0KCSAgICBoaWRkZW5JbnB1dCA9IHBhc3N3b3JkSmFtbWVyRmFjdG9yeShicm93c2VyLCB0b3RhbFJlcGV0aXRpb25zKTsKCSAgICAkZWwuYXBwZW5kKGhpZGRlbklucHV0KTsKCSAgfTsKCgkgIGZ1bmN0aW9uIHBhc3N3b3JkSmFtbWVyRmFjdG9yeShicm93c2VyLCB0b3RhbFJlcGV0aXRpb25zKSB7CgoJICAgIHZhciBjdXJyZW50VGVtcGxhdGUgPSBqYW1tZXJUZW1wbGF0ZVticm93c2VyXSwKCSAgICAgICAgcmVzdWx0ID0gJycsCgkgICAgICAgIGk7CgoJICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbFJlcGV0aXRpb25zOyBpKyspIHsKCSAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoY3VycmVudFRlbXBsYXRlLnJlcGxhY2UoL3NlcXVlbmNlX25vL2csIGkgKyAxKSk7CgkgICAgfQoJICAgIHJldHVybiByZXN1bHQ7CgkgIH0KCgkgIC8vIFJld3JpdGVzIHRoZSBkZWZhdWx0IFNpZ24taW4gV2lkZ2V0IGFzc2V0IGJ1bmRsZSBwYXRocyB0byBoYW5kbGUgb3VyCgkgIC8vIGludGVybmFsIGkxOG4ganNvbnAgZmlsZXM6CgkgIC8vIDEuIEFkZCBjYWNoZWJ1c3Qgc2hhCgkgIC8vIDIuIFJlcGxhY2UgLmpzb25wIHdpdGggLmpzCgkgIHZhciBwYXRoUmUgPSBuZXcgUmVnRXhwKCcvKFteL10qKVwuanNvbnAkJyk7CgoJICBmdW5jdGlvbiBhc3NldFJld3JpdGUocGF0aCkgewoJICAgIHZhciBtYXRjaGVzID0gcGF0aFJlLmV4ZWMocGF0aCk7CgkgICAgaWYgKCFtYXRjaGVzIHx8ICFjYWNoZWJ1c3RNYXBbbWF0Y2hlc1sxXV0pIHsKCSAgICAgIHJldHVybiBwYXRoOwoJICAgIH0KCSAgICByZXR1cm4gJy8nICsgY2FjaGVidXN0TWFwW21hdGNoZXNbMV1dICsgJy5qcyc7CgkgIH0KCgkgIC8vIE9LVEEtMTAxNTA5OiBUaGVyZSBhcmUgZW1iZWRkZWQgYnJvd3NlcnMgdGhhdCBoYXZlIHB1c2hTdGF0ZSwgYnV0IHRocm93CgkgIC8vIGFuIGVycm9yIHdoZW4gaXQncyBjYWxsZWQuIFNvLCB3ZSBhY3R1YWxseSBjYWxsIHJlcGxhY2VTdGF0ZSBpbiBhIHRyeS9jYXRjaAoJICAvLyB0byBzZWUgaWYgaXQgaGl0cyB0aGlzIGNvbmRpdGlvbi4KCSAgZnVuY3Rpb24gc3VwcG9ydHNSb3V0ZXIoKSB7CgkgICAgdmFyIHN1cHBvcnRzUHVzaCA9ICEhKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSksCgkgICAgICAgIHN1cHBvcnRzUmVwbGFjZSA9IHN1cHBvcnRzUHVzaCAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGU7CgkgICAgaWYgKCFzdXBwb3J0c1B1c2ggfHwgIXN1cHBvcnRzUmVwbGFjZSkgewoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgICB0cnkgewoJICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgbG9jYXRpb24uaHJlZik7CgkgICAgICByZXR1cm4gdHJ1ZTsKCSAgICB9IGNhdGNoIChlKSB7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoJICB9CgoJICAvLyBIYWNrIGZvciBPS1RBLTEwMjIxNyA6IEdpdmVuIGEgYmFzZSB1cmwsIGNyZWF0ZSBhbm90aGVyIGJhc2UgdXJsCgkgIC8vIGJ5IHJlbW92aW5nL2FkZGluZyBwb3J0IG51bWJlciB0aGF0IGlzIGZ1bmN0aW9uYWxseSB0aGUgc2FtZSBidXQgYXZvaWRzIGEgTWljcm9zb2Z0IGRvdWJsZS1yZXF1ZXN0IGJ1Zy4KCSAgZnVuY3Rpb24gYmFzZVVybFdpdGhQb3J0QWRkZWRPclJlbW92ZWQoYmFzZVVybCkgewoKCSAgICB2YXIgYmFzZVVybEhvc3RuYW1lOwoJICAgIHZhciBob3N0bmFtZTsKCSAgICB2YXIgcHJvdG9jb2w7CgkgICAgdmFyIGhvc3RBbmRQYXRoOwoJICAgIHZhciBub1Byb3RvY29sRm91bmQgPSBmYWxzZTsKCgkgICAgLy8gU3BsaXQgb3V0IHByb3RvY29sIGFuZCBob3N0bmFtZQoJICAgIGlmIChiYXNlVXJsLmluZGV4T2YoJzovLycpID4gLTEpIHsKCSAgICAgIHByb3RvY29sID0gYmFzZVVybC5zcGxpdCgnOi8vJylbMF07CgkgICAgICAvLyBzZWNvbmQgaGFsZiBvZiBVUkwgaXMgaG9zdG5hbWUgKyBwYXRoIGNvbXBvbmVudHMKCSAgICAgIGhvc3RBbmRQYXRoID0gYmFzZVVybC5zcGxpdCgnOi8vJylbMV07CgkgICAgICAvLyBmaXJzdCBlbGVtZW50IGlzIGhvc3RuYW1lLCByZXN0IG9mIHRoZW0gYXJlIHBhdGggY29tcG9uZW50cwoJICAgICAgYmFzZVVybEhvc3RuYW1lID0gaG9zdEFuZFBhdGguc3BsaXQoJy8nKVswXTsKCSAgICB9IGVsc2UgewoJICAgICAgbm9Qcm90b2NvbEZvdW5kID0gdHJ1ZTsKCSAgICAgIHByb3RvY29sID0gJ2h0dHBzJzsKCSAgICAgIGJhc2VVcmxIb3N0bmFtZSA9IGJhc2VVcmwuc3BsaXQoJy8nKVswXTsKCSAgICB9CgoJICAgIC8vIElmIHRoZXJlIGlzIGEgcG9ydCBudW1iZXIsIHJlbW92ZSBpdAoJICAgIGlmIChiYXNlVXJsSG9zdG5hbWUuaW5kZXhPZignOicpID4gLTEpIHsKCSAgICAgIHZhciBwb3J0ID0gYmFzZVVybEhvc3RuYW1lLnNwbGl0KCc6JylbMV07CgkgICAgICAvLyBodHRwcyBwb3J0IHdpdGggbm8gcHJvdG9jb2wKCSAgICAgIGlmIChwb3J0ID09ICc0NDMnICYmIG5vUHJvdG9jb2xGb3VuZCkgewoJICAgICAgICBwcm90b2NvbCA9ICdodHRwcyc7CgkgICAgICAgIC8vIHN0YW5kYXJkIHBvcnQsIHNvIHJlbW92ZSBpdAoJICAgICAgfSBlbHNlIGlmIChwb3J0ID09PSAnODAnIHx8IHBvcnQgPT09ICc0NDMnKSB7CgkgICAgICAgIGhvc3RuYW1lID0gYmFzZVVybEhvc3RuYW1lLnNwbGl0KCc6JylbMF07CgkgICAgICAgIC8vIE5vbi1zdGFuZGFyZCBwb3J0IGVnIGZvciByYWluLCBzbyBsZWF2ZSBpdCBiZQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgcmV0dXJuIGJhc2VVcmw7CgkgICAgICB9CgkgICAgfSBlbHNlIHsKCSAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHBvcnQgbnVtYmVyLCBhZGQgb25lCgkgICAgICBpZiAocHJvdG9jb2wgPT09ICdodHRwcycpIHsKCSAgICAgICAgaG9zdG5hbWUgPSBiYXNlVXJsSG9zdG5hbWUgKyAnOjQ0Myc7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBob3N0bmFtZSA9IGJhc2VVcmxIb3N0bmFtZSArICc6ODAnOwoJICAgICAgfQoJICAgIH0KCgkgICAgcmV0dXJuIHByb3RvY29sICsgJzovLycgKyBob3N0bmFtZTsKCSAgfQoKCSAgZnVuY3Rpb24gdXNlckFnZW50SXNJb3MxMCh1c2VyQWdlbnQpIHsKCSAgICByZXR1cm4gdXNlckFnZW50LmluZGV4T2YoJ0FwcGxlV2ViS2l0JykgPiAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZignTW9iaWxlJykgPiAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZignMTBfJykgPiAtMTsKCSAgfQoKCSAgLy8gQm9ycm93ZWQgZnJvbSBva3RhLWF1dGgtanMKCSAgZnVuY3Rpb24gdG9RdWVyeVBhcmFtcyhvYmopIHsKCSAgICB2YXIgc3RyID0gW107CgoJICAgIGlmIChvYmogPT09IG51bGwpIHsKCSAgICAgIHJldHVybiAnJzsKCSAgICB9CgkgICAgZm9yICh2YXIga2V5IGluIG9iaikgewoJICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQgJiYgb2JqW2tleV0gIT09IG51bGwpIHsKCSAgICAgICAgc3RyLnB1c2goa2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtrZXldKSk7CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoc3RyLmxlbmd0aCkgewoJICAgICAgcmV0dXJuICc/JyArIHN0ci5qb2luKCcmJyk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiAnJzsKCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIGFkanVzdFVybFBhdGgocmVkaXJlY1VybCkgewoJICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSgnJywgZG9jdW1lbnQudGl0bGUsIHJlZGlyZWNVcmwpOwoJICB9CgoJICBmdW5jdGlvbiBpc0xvZ2luVXJsU3RhbGUobG9naW5QYWdlVXJsUmVkaXJlY3QsIGhyZWYpIHsKCSAgICByZXR1cm4gISEobG9naW5QYWdlVXJsUmVkaXJlY3QgJiYgbG9naW5QYWdlVXJsUmVkaXJlY3QgIT09IGhyZWYpOwoJICB9CgoJICBmdW5jdGlvbiBzZXRVc2VyTG9jYWxlQ29va2llKHVzZXJMb2NhbGUpIHsKCSAgICB2YXIgY29va2llTmFtZSA9ICdva3RhX3VzZXJfbGFuZycsCgkgICAgICAgIGNvb2tpZSA9IENvb2tpZS5nZXRDb29raWUoY29va2llTmFtZSk7CgkgICAgaWYgKCFjb29raWUgfHwgY29va2llICYmIGNvb2tpZSAhPT0gdXNlckxvY2FsZSkgewoJICAgICAgQ29va2llLnNldENvb2tpZShjb29raWVOYW1lLCB1c2VyTG9jYWxlLCB7IGV4cGlyZXM6IDM2NSB9KTsKCSAgICB9CgkgIH0KCgkgIFV0aWwgPSB7CgkgICAgY2xlYXJCZWVuVG9Ib21lUGFnZTogY2xlYXJCZWVuVG9Ib21lUGFnZSwKCSAgICByZXNldEF1dG9MYXVuY2g6IHJlc2V0QXV0b0xhdW5jaCwKCSAgICBpc1Bvc3RTYW1sRW1iZWRVcmw6IGlzUG9zdFNhbWxFbWJlZFVybCwKCSAgICBwb3N0VG9Vcmw6IHBvc3RUb1VybCwKCSAgICBhZGRQYXNzd29yZEphbW1lcnM6IGFkZFBhc3N3b3JkSmFtbWVycywKCSAgICBhc3NldFJld3JpdGU6IGFzc2V0UmV3cml0ZSwKCSAgICBzdXBwb3J0c1JvdXRlcjogc3VwcG9ydHNSb3V0ZXIsCgkgICAgYmFzZVVybFdpdGhQb3J0QWRkZWRPclJlbW92ZWQ6IGJhc2VVcmxXaXRoUG9ydEFkZGVkT3JSZW1vdmVkLAoJICAgIHVzZXJBZ2VudElzSW9zMTA6IHVzZXJBZ2VudElzSW9zMTAsCgkgICAgdG9RdWVyeVBhcmFtczogdG9RdWVyeVBhcmFtcywKCSAgICBhZGp1c3RVcmxQYXRoOiBhZGp1c3RVcmxQYXRoLAoJICAgIGlzTG9naW5VcmxTdGFsZTogaXNMb2dpblVybFN0YWxlLAoJICAgIHNldFVzZXJMb2NhbGVDb29raWU6IHNldFVzZXJMb2NhbGVDb29raWUKCSAgfTsKCgkgIHJldHVybiBVdGlsOwoJfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8qKiEKCgkgQGxpY2Vuc2UKCSBoYW5kbGViYXJzIHY0LjAuMTAKCglDb3B5cmlnaHQgKEMpIDIwMTEtMjAxNiBieSBZZWh1ZGEgS2F0egoKCVBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKCW9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCglpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCgl0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCgljb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKCWZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CgoJVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KCWFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoKCVRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCglJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKCUZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoJQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgoJTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKCU9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KCVRIRSBTT0ZUV0FSRS4KCgkqLwoJKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCQlpZih0cnVlKQoJCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCQllbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkKCQkJZGVmaW5lKFtdLCBmYWN0b3J5KTsKCQllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQkJZXhwb3J0c1siSGFuZGxlYmFycyJdID0gZmFjdG9yeSgpOwoJCWVsc2UKCQkJcm9vdFsiSGFuZGxlYmFycyJdID0gZmFjdG9yeSgpOwoJfSkodGhpcywgZnVuY3Rpb24oKSB7CglyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAoJLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKCS8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwoKCS8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgoJLyoqKioqKi8gCWZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsKCgkvKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQoJLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKCS8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwoKCS8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKCS8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewoJLyoqKioqKi8gCQkJZXhwb3J0czoge30sCgkvKioqKioqLyAJCQlpZDogbW9kdWxlSWQsCgkvKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCgkvKioqKioqLyAJCX07CgoJLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KCS8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgoJLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCgkvKioqKioqLyAJCW1vZHVsZS5sb2FkZWQgPSB0cnVlOwoKCS8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKCS8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwoJLyoqKioqKi8gCX0KCgoJLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCgkvKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKCgkvKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKCS8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKCS8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwoJLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwoKCS8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKCS8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCS8qKioqKiovIH0pCgkvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoJLyoqKioqKi8gKFsKCS8qIDAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF9oYW5kbGViYXJzUnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CgoJCXZhciBfaGFuZGxlYmFyc1J1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFuZGxlYmFyc1J1bnRpbWUpOwoKCQkvLyBDb21waWxlciBpbXBvcnRzCgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVyQXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7CgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVyQXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhbmRsZWJhcnNDb21waWxlckFzdCk7CgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVyQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwoKCQl2YXIgX2hhbmRsZWJhcnNDb21waWxlckNvbXBpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7CgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVySmF2YXNjcmlwdENvbXBpbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7CgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVySmF2YXNjcmlwdENvbXBpbGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhbmRsZWJhcnNDb21waWxlckphdmFzY3JpcHRDb21waWxlcik7CgoJCXZhciBfaGFuZGxlYmFyc0NvbXBpbGVyVmlzaXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwoKCQl2YXIgX2hhbmRsZWJhcnNDb21waWxlclZpc2l0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFuZGxlYmFyc0NvbXBpbGVyVmlzaXRvcik7CgoJCXZhciBfaGFuZGxlYmFyc05vQ29uZmxpY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCgkJdmFyIF9oYW5kbGViYXJzTm9Db25mbGljdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYW5kbGViYXJzTm9Db25mbGljdCk7CgoJCXZhciBfY3JlYXRlID0gX2hhbmRsZWJhcnNSdW50aW1lMlsnZGVmYXVsdCddLmNyZWF0ZTsKCQlmdW5jdGlvbiBjcmVhdGUoKSB7CgkJICB2YXIgaGIgPSBfY3JlYXRlKCk7CgoJCSAgaGIuY29tcGlsZSA9IGZ1bmN0aW9uIChpbnB1dCwgb3B0aW9ucykgewoJCSAgICByZXR1cm4gX2hhbmRsZWJhcnNDb21waWxlckNvbXBpbGVyLmNvbXBpbGUoaW5wdXQsIG9wdGlvbnMsIGhiKTsKCQkgIH07CgkJICBoYi5wcmVjb21waWxlID0gZnVuY3Rpb24gKGlucHV0LCBvcHRpb25zKSB7CgkJICAgIHJldHVybiBfaGFuZGxlYmFyc0NvbXBpbGVyQ29tcGlsZXIucHJlY29tcGlsZShpbnB1dCwgb3B0aW9ucywgaGIpOwoJCSAgfTsKCgkJICBoYi5BU1QgPSBfaGFuZGxlYmFyc0NvbXBpbGVyQXN0MlsnZGVmYXVsdCddOwoJCSAgaGIuQ29tcGlsZXIgPSBfaGFuZGxlYmFyc0NvbXBpbGVyQ29tcGlsZXIuQ29tcGlsZXI7CgkJICBoYi5KYXZhU2NyaXB0Q29tcGlsZXIgPSBfaGFuZGxlYmFyc0NvbXBpbGVySmF2YXNjcmlwdENvbXBpbGVyMlsnZGVmYXVsdCddOwoJCSAgaGIuUGFyc2VyID0gX2hhbmRsZWJhcnNDb21waWxlckJhc2UucGFyc2VyOwoJCSAgaGIucGFyc2UgPSBfaGFuZGxlYmFyc0NvbXBpbGVyQmFzZS5wYXJzZTsKCgkJICByZXR1cm4gaGI7CgkJfQoKCQl2YXIgaW5zdCA9IGNyZWF0ZSgpOwoJCWluc3QuY3JlYXRlID0gY3JlYXRlOwoKCQlfaGFuZGxlYmFyc05vQ29uZmxpY3QyWydkZWZhdWx0J10oaW5zdCk7CgoJCWluc3QuVmlzaXRvciA9IF9oYW5kbGViYXJzQ29tcGlsZXJWaXNpdG9yMlsnZGVmYXVsdCddOwoKCQlpbnN0WydkZWZhdWx0J10gPSBpbnN0OwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBpbnN0OwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCQkidXNlIHN0cmljdCI7CgoJCWV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChvYmopIHsKCQkgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CgkJICAgICJkZWZhdWx0Ijogb2JqCgkJICB9OwoJCX07CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJLyoqKi8gfSksCgkvKiAyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCSd1c2Ugc3RyaWN0JzsKCgkJdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKVsnZGVmYXVsdCddOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF9oYW5kbGViYXJzQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgoJCXZhciBiYXNlID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2hhbmRsZWJhcnNCYXNlKTsKCgkJLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLgoJCS8vIChUaGlzIGlzIGRvbmUgdG8gZWFzaWx5IHNoYXJlIGNvZGUgYmV0d2VlbiBjb21tb25qcyBhbmQgYnJvd3NlIGVudnMpCgoJCXZhciBfaGFuZGxlYmFyc1NhZmVTdHJpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCgkJdmFyIF9oYW5kbGViYXJzU2FmZVN0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYW5kbGViYXJzU2FmZVN0cmluZyk7CgoJCXZhciBfaGFuZGxlYmFyc0V4Y2VwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgoJCXZhciBfaGFuZGxlYmFyc0V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYW5kbGViYXJzRXhjZXB0aW9uKTsKCgkJdmFyIF9oYW5kbGViYXJzVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKCQl2YXIgVXRpbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfaGFuZGxlYmFyc1V0aWxzKTsKCgkJdmFyIF9oYW5kbGViYXJzUnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKCQl2YXIgcnVudGltZSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9oYW5kbGViYXJzUnVudGltZSk7CgoJCXZhciBfaGFuZGxlYmFyc05vQ29uZmxpY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCgkJdmFyIF9oYW5kbGViYXJzTm9Db25mbGljdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYW5kbGViYXJzTm9Db25mbGljdCk7CgoJCS8vIEZvciBjb21wYXRpYmlsaXR5IGFuZCB1c2FnZSBvdXRzaWRlIG9mIG1vZHVsZSBzeXN0ZW1zLCBtYWtlIHRoZSBIYW5kbGViYXJzIG9iamVjdCBhIG5hbWVzcGFjZQoJCWZ1bmN0aW9uIGNyZWF0ZSgpIHsKCQkgIHZhciBoYiA9IG5ldyBiYXNlLkhhbmRsZWJhcnNFbnZpcm9ubWVudCgpOwoKCQkgIFV0aWxzLmV4dGVuZChoYiwgYmFzZSk7CgkJICBoYi5TYWZlU3RyaW5nID0gX2hhbmRsZWJhcnNTYWZlU3RyaW5nMlsnZGVmYXVsdCddOwoJCSAgaGIuRXhjZXB0aW9uID0gX2hhbmRsZWJhcnNFeGNlcHRpb24yWydkZWZhdWx0J107CgkJICBoYi5VdGlscyA9IFV0aWxzOwoJCSAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247CgoJCSAgaGIuVk0gPSBydW50aW1lOwoJCSAgaGIudGVtcGxhdGUgPSBmdW5jdGlvbiAoc3BlYykgewoJCSAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7CgkJICB9OwoKCQkgIHJldHVybiBoYjsKCQl9CgoJCXZhciBpbnN0ID0gY3JlYXRlKCk7CgkJaW5zdC5jcmVhdGUgPSBjcmVhdGU7CgoJCV9oYW5kbGViYXJzTm9Db25mbGljdDJbJ2RlZmF1bHQnXShpbnN0KTsKCgkJaW5zdFsnZGVmYXVsdCddID0gaW5zdDsKCgkJZXhwb3J0c1snZGVmYXVsdCddID0gaW5zdDsKCQltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCgkvKioqLyB9KSwKCS8qIDMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJInVzZSBzdHJpY3QiOwoKCQlleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAob2JqKSB7CgkJICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CgkJICAgIHJldHVybiBvYmo7CgkJICB9IGVsc2UgewoJCSAgICB2YXIgbmV3T2JqID0ge307CgoJCSAgICBpZiAob2JqICE9IG51bGwpIHsKCQkgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CgkJICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKCQkgICAgICB9CgkJICAgIH0KCgkJICAgIG5ld09ialsiZGVmYXVsdCJdID0gb2JqOwoJCSAgICByZXR1cm4gbmV3T2JqOwoJCSAgfQoJCX07CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJLyoqKi8gfSksCgkvKiA0ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCSd1c2Ugc3RyaWN0JzsKCgkJdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpWydkZWZhdWx0J107CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgkJZXhwb3J0cy5IYW5kbGViYXJzRW52aXJvbm1lbnQgPSBIYW5kbGViYXJzRW52aXJvbm1lbnQ7CgoJCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKCQl2YXIgX2V4Y2VwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgoJCXZhciBfZXhjZXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4Y2VwdGlvbik7CgoJCXZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKCQl2YXIgX2RlY29yYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCgkJdmFyIF9sb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCgkJdmFyIF9sb2dnZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9nZ2VyKTsKCgkJdmFyIFZFUlNJT04gPSAnNC4wLjEwJzsKCQlleHBvcnRzLlZFUlNJT04gPSBWRVJTSU9OOwoJCXZhciBDT01QSUxFUl9SRVZJU0lPTiA9IDc7CgoJCWV4cG9ydHMuQ09NUElMRVJfUkVWSVNJT04gPSBDT01QSUxFUl9SRVZJU0lPTjsKCQl2YXIgUkVWSVNJT05fQ0hBTkdFUyA9IHsKCQkgIDE6ICc8PSAxLjAucmMuMicsIC8vIDEuMC5yYy4yIGlzIGFjdHVhbGx5IHJldjIgYnV0IGRvZXNuJ3QgcmVwb3J0IGl0CgkJICAyOiAnPT0gMS4wLjAtcmMuMycsCgkJICAzOiAnPT0gMS4wLjAtcmMuNCcsCgkJICA0OiAnPT0gMS54LngnLAoJCSAgNTogJz09IDIuMC4wLWFscGhhLngnLAoJCSAgNjogJz49IDIuMC4wLWJldGEuMScsCgkJICA3OiAnPj0gNC4wLjAnCgkJfTsKCgkJZXhwb3J0cy5SRVZJU0lPTl9DSEFOR0VTID0gUkVWSVNJT05fQ0hBTkdFUzsKCQl2YXIgb2JqZWN0VHlwZSA9ICdbb2JqZWN0IE9iamVjdF0nOwoKCQlmdW5jdGlvbiBIYW5kbGViYXJzRW52aXJvbm1lbnQoaGVscGVycywgcGFydGlhbHMsIGRlY29yYXRvcnMpIHsKCQkgIHRoaXMuaGVscGVycyA9IGhlbHBlcnMgfHwge307CgkJICB0aGlzLnBhcnRpYWxzID0gcGFydGlhbHMgfHwge307CgkJICB0aGlzLmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzIHx8IHt9OwoKCQkgIF9oZWxwZXJzLnJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyk7CgkJICBfZGVjb3JhdG9ycy5yZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKHRoaXMpOwoJCX0KCgkJSGFuZGxlYmFyc0Vudmlyb25tZW50LnByb3RvdHlwZSA9IHsKCQkgIGNvbnN0cnVjdG9yOiBIYW5kbGViYXJzRW52aXJvbm1lbnQsCgoJCSAgbG9nZ2VyOiBfbG9nZ2VyMlsnZGVmYXVsdCddLAoJCSAgbG9nOiBfbG9nZ2VyMlsnZGVmYXVsdCddLmxvZywKCgkJICByZWdpc3RlckhlbHBlcjogZnVuY3Rpb24gcmVnaXN0ZXJIZWxwZXIobmFtZSwgZm4pIHsKCQkgICAgaWYgKF91dGlscy50b1N0cmluZy5jYWxsKG5hbWUpID09PSBvYmplY3RUeXBlKSB7CgkJICAgICAgaWYgKGZuKSB7CgkJICAgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnQXJnIG5vdCBzdXBwb3J0ZWQgd2l0aCBtdWx0aXBsZSBoZWxwZXJzJyk7CgkJICAgICAgfQoJCSAgICAgIF91dGlscy5leHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aGlzLmhlbHBlcnNbbmFtZV0gPSBmbjsKCQkgICAgfQoJCSAgfSwKCQkgIHVucmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uIHVucmVnaXN0ZXJIZWxwZXIobmFtZSkgewoJCSAgICBkZWxldGUgdGhpcy5oZWxwZXJzW25hbWVdOwoJCSAgfSwKCgkJICByZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uIHJlZ2lzdGVyUGFydGlhbChuYW1lLCBwYXJ0aWFsKSB7CgkJICAgIGlmIChfdXRpbHMudG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkgewoJCSAgICAgIF91dGlscy5leHRlbmQodGhpcy5wYXJ0aWFscywgbmFtZSk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgaWYgKHR5cGVvZiBwYXJ0aWFsID09PSAndW5kZWZpbmVkJykgewoJCSAgICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ0F0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCAiJyArIG5hbWUgKyAnIiBhcyB1bmRlZmluZWQnKTsKCQkgICAgICB9CgkJICAgICAgdGhpcy5wYXJ0aWFsc1tuYW1lXSA9IHBhcnRpYWw7CgkJICAgIH0KCQkgIH0sCgkJICB1bnJlZ2lzdGVyUGFydGlhbDogZnVuY3Rpb24gdW5yZWdpc3RlclBhcnRpYWwobmFtZSkgewoJCSAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTsKCQkgIH0sCgoJCSAgcmVnaXN0ZXJEZWNvcmF0b3I6IGZ1bmN0aW9uIHJlZ2lzdGVyRGVjb3JhdG9yKG5hbWUsIGZuKSB7CgkJICAgIGlmIChfdXRpbHMudG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkgewoJCSAgICAgIGlmIChmbikgewoJCSAgICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpOwoJCSAgICAgIH0KCQkgICAgICBfdXRpbHMuZXh0ZW5kKHRoaXMuZGVjb3JhdG9ycywgbmFtZSk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgdGhpcy5kZWNvcmF0b3JzW25hbWVdID0gZm47CgkJICAgIH0KCQkgIH0sCgkJICB1bnJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbiB1bnJlZ2lzdGVyRGVjb3JhdG9yKG5hbWUpIHsKCQkgICAgZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1tuYW1lXTsKCQkgIH0KCQl9OwoKCQl2YXIgbG9nID0gX2xvZ2dlcjJbJ2RlZmF1bHQnXS5sb2c7CgoJCWV4cG9ydHMubG9nID0gbG9nOwoJCWV4cG9ydHMuY3JlYXRlRnJhbWUgPSBfdXRpbHMuY3JlYXRlRnJhbWU7CgkJZXhwb3J0cy5sb2dnZXIgPSBfbG9nZ2VyMlsnZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogNSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCQkndXNlIHN0cmljdCc7CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgkJZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7CgkJZXhwb3J0cy5pbmRleE9mID0gaW5kZXhPZjsKCQlleHBvcnRzLmVzY2FwZUV4cHJlc3Npb24gPSBlc2NhcGVFeHByZXNzaW9uOwoJCWV4cG9ydHMuaXNFbXB0eSA9IGlzRW1wdHk7CgkJZXhwb3J0cy5jcmVhdGVGcmFtZSA9IGNyZWF0ZUZyYW1lOwoJCWV4cG9ydHMuYmxvY2tQYXJhbXMgPSBibG9ja1BhcmFtczsKCQlleHBvcnRzLmFwcGVuZENvbnRleHRQYXRoID0gYXBwZW5kQ29udGV4dFBhdGg7CgkJdmFyIGVzY2FwZSA9IHsKCQkgICcmJzogJyZhbXA7JywKCQkgICc8JzogJyZsdDsnLAoJCSAgJz4nOiAnJmd0OycsCgkJICAnIic6ICcmcXVvdDsnLAoJCSAgIiciOiAnJiN4Mjc7JywKCQkgICdgJzogJyYjeDYwOycsCgkJICAnPSc6ICcmI3gzRDsnCgkJfTsKCgkJdmFyIGJhZENoYXJzID0gL1smPD4iJ2A9XS9nLAoJCSAgICBwb3NzaWJsZSA9IC9bJjw+IidgPV0vOwoKCQlmdW5jdGlvbiBlc2NhcGVDaGFyKGNocikgewoJCSAgcmV0dXJuIGVzY2FwZVtjaHJdOwoJCX0KCgkJZnVuY3Rpb24gZXh0ZW5kKG9iaiAvKiAsIC4uLnNvdXJjZSAqLykgewoJCSAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkgICAgZm9yICh2YXIga2V5IGluIGFyZ3VtZW50c1tpXSkgewoJCSAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW2ldLCBrZXkpKSB7CgkJICAgICAgICBvYmpba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldOwoJCSAgICAgIH0KCQkgICAgfQoJCSAgfQoKCQkgIHJldHVybiBvYmo7CgkJfQoKCQl2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKCQlleHBvcnRzLnRvU3RyaW5nID0gdG9TdHJpbmc7CgkJLy8gU291cmNlZCBmcm9tIGxvZGFzaAoJCS8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQKCQkvKiBlc2xpbnQtZGlzYWJsZSBmdW5jLXN0eWxlICovCgkJdmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7CgkJICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nOwoJCX07CgkJLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpCgkJLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCQlpZiAoaXNGdW5jdGlvbigveC8pKSB7CgkJICBleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbHVlKSB7CgkJICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7CgkJICB9OwoJCX0KCQlleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uOwoKCQkvKiBlc2xpbnQtZW5hYmxlIGZ1bmMtc3R5bGUgKi8KCgkJLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCQl2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHZhbHVlKSB7CgkJICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nIDogZmFsc2U7CgkJfTsKCgkJZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCQkvLyBPbGRlciBJRSB2ZXJzaW9ucyBkbyBub3QgZGlyZWN0bHkgc3VwcG9ydCBpbmRleE9mIHNvIHdlIG11c3QgaW1wbGVtZW50IG91ciBvd24sIHNhZGx5LgoKCQlmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSkgewoJCSAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CgkJICAgIGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHsKCQkgICAgICByZXR1cm4gaTsKCQkgICAgfQoJCSAgfQoJCSAgcmV0dXJuIC0xOwoJCX0KCgkJZnVuY3Rpb24gZXNjYXBlRXhwcmVzc2lvbg==", "base64"));
  res.write(new Buffer("KHN0cmluZykgewoJCSAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7CgkJICAgIC8vIGRvbid0IGVzY2FwZSBTYWZlU3RyaW5ncywgc2luY2UgdGhleSdyZSBhbHJlYWR5IHNhZmUKCQkgICAgaWYgKHN0cmluZyAmJiBzdHJpbmcudG9IVE1MKSB7CgkJICAgICAgcmV0dXJuIHN0cmluZy50b0hUTUwoKTsKCQkgICAgfSBlbHNlIGlmIChzdHJpbmcgPT0gbnVsbCkgewoJCSAgICAgIHJldHVybiAnJzsKCQkgICAgfSBlbHNlIGlmICghc3RyaW5nKSB7CgkJICAgICAgcmV0dXJuIHN0cmluZyArICcnOwoJCSAgICB9CgoJCSAgICAvLyBGb3JjZSBhIHN0cmluZyBjb252ZXJzaW9uIGFzIHRoaXMgd2lsbCBiZSBkb25lIGJ5IHRoZSBhcHBlbmQgcmVnYXJkbGVzcyBhbmQKCQkgICAgLy8gdGhlIHJlZ2V4IHRlc3Qgd2lsbCBkbyB0aGlzIHRyYW5zcGFyZW50bHkgYmVoaW5kIHRoZSBzY2VuZXMsIGNhdXNpbmcgaXNzdWVzIGlmCgkJICAgIC8vIGFuIG9iamVjdCdzIHRvIHN0cmluZyBoYXMgZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGl0LgoJCSAgICBzdHJpbmcgPSAnJyArIHN0cmluZzsKCQkgIH0KCgkJICBpZiAoIXBvc3NpYmxlLnRlc3Qoc3RyaW5nKSkgewoJCSAgICByZXR1cm4gc3RyaW5nOwoJCSAgfQoJCSAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGJhZENoYXJzLCBlc2NhcGVDaGFyKTsKCQl9CgoJCWZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHsKCQkgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHsKCQkgICAgcmV0dXJuIHRydWU7CgkJICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkgewoJCSAgICByZXR1cm4gdHJ1ZTsKCQkgIH0gZWxzZSB7CgkJICAgIHJldHVybiBmYWxzZTsKCQkgIH0KCQl9CgoJCWZ1bmN0aW9uIGNyZWF0ZUZyYW1lKG9iamVjdCkgewoJCSAgdmFyIGZyYW1lID0gZXh0ZW5kKHt9LCBvYmplY3QpOwoJCSAgZnJhbWUuX3BhcmVudCA9IG9iamVjdDsKCQkgIHJldHVybiBmcmFtZTsKCQl9CgoJCWZ1bmN0aW9uIGJsb2NrUGFyYW1zKHBhcmFtcywgaWRzKSB7CgkJICBwYXJhbXMucGF0aCA9IGlkczsKCQkgIHJldHVybiBwYXJhbXM7CgkJfQoKCQlmdW5jdGlvbiBhcHBlbmRDb250ZXh0UGF0aChjb250ZXh0UGF0aCwgaWQpIHsKCQkgIHJldHVybiAoY29udGV4dFBhdGggPyBjb250ZXh0UGF0aCArICcuJyA6ICcnKSArIGlkOwoJCX0KCgkvKioqLyB9KSwKCS8qIDYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNylbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFjayddOwoKCQlmdW5jdGlvbiBFeGNlcHRpb24obWVzc2FnZSwgbm9kZSkgewoJCSAgdmFyIGxvYyA9IG5vZGUgJiYgbm9kZS5sb2MsCgkJICAgICAgbGluZSA9IHVuZGVmaW5lZCwKCQkgICAgICBjb2x1bW4gPSB1bmRlZmluZWQ7CgkJICBpZiAobG9jKSB7CgkJICAgIGxpbmUgPSBsb2Muc3RhcnQubGluZTsKCQkgICAgY29sdW1uID0gbG9jLnN0YXJ0LmNvbHVtbjsKCgkJICAgIG1lc3NhZ2UgKz0gJyAtICcgKyBsaW5lICsgJzonICsgY29sdW1uOwoJCSAgfQoKCQkgIHZhciB0bXAgPSBFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBtZXNzYWdlKTsKCgkJICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJvcCBpbiB0bXBgIGRvZXNuJ3Qgd29yay4KCQkgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGVycm9yUHJvcHMubGVuZ3RoOyBpZHgrKykgewoJCSAgICB0aGlzW2Vycm9yUHJvcHNbaWR4XV0gPSB0bXBbZXJyb3JQcm9wc1tpZHhdXTsKCQkgIH0KCgkJICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwoJCSAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7CgkJICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEV4Y2VwdGlvbik7CgkJICB9CgoJCSAgdHJ5IHsKCQkgICAgaWYgKGxvYykgewoJCSAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmU7CgoJCSAgICAgIC8vIFdvcmsgYXJvdW5kIGlzc3VlIHVuZGVyIHNhZmFyaSB3aGVyZSB3ZSBjYW4ndCBkaXJlY3RseSBzZXQgdGhlIGNvbHVtbiB2YWx1ZQoJCSAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgkJICAgICAgaWYgKF9PYmplY3QkZGVmaW5lUHJvcGVydHkpIHsKCQkgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnY29sdW1uJywgewoJCSAgICAgICAgICB2YWx1ZTogY29sdW1uLAoJCSAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlCgkJICAgICAgICB9KTsKCQkgICAgICB9IGVsc2UgewoJCSAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47CgkJICAgICAgfQoJCSAgICB9CgkJICB9IGNhdGNoIChub3ApIHsKCQkgICAgLyogSWdub3JlIGlmIHRoZSBicm93c2VyIGlzIHZlcnkgcGFydGljdWxhciAqLwoJCSAgfQoJCX0KCgkJRXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpOwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBFeGNlcHRpb247CgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiA3ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCW1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oOCksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJdmFyICQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoJCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7CgkJICByZXR1cm4gJC5zZXREZXNjKGl0LCBrZXksIGRlc2MpOwoJCX07CgoJLyoqKi8gfSksCgkvKiA5ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJCXZhciAkT2JqZWN0ID0gT2JqZWN0OwoJCW1vZHVsZS5leHBvcnRzID0gewoJCSAgY3JlYXRlOiAgICAgJE9iamVjdC5jcmVhdGUsCgkJICBnZXRQcm90bzogICAkT2JqZWN0LmdldFByb3RvdHlwZU9mLAoJCSAgaXNFbnVtOiAgICAge30ucHJvcGVydHlJc0VudW1lcmFibGUsCgkJICBnZXREZXNjOiAgICAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciwKCQkgIHNldERlc2M6ICAgICRPYmplY3QuZGVmaW5lUHJvcGVydHksCgkJICBzZXREZXNjczogICAkT2JqZWN0LmRlZmluZVByb3BlcnRpZXMsCgkJICBnZXRLZXlzOiAgICAkT2JqZWN0LmtleXMsCgkJICBnZXROYW1lczogICAkT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsCgkJICBnZXRTeW1ib2xzOiAkT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scywKCQkgIGVhY2g6ICAgICAgIFtdLmZvckVhY2gKCQl9OwoKCS8qKiovIH0pLAoJLyogMTAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCQlleHBvcnRzLnJlZ2lzdGVyRGVmYXVsdEhlbHBlcnMgPSByZWdpc3RlckRlZmF1bHRIZWxwZXJzOwoKCQl2YXIgX2hlbHBlcnNCbG9ja0hlbHBlck1pc3NpbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCgkJdmFyIF9oZWxwZXJzQmxvY2tIZWxwZXJNaXNzaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnNCbG9ja0hlbHBlck1pc3NpbmcpOwoKCQl2YXIgX2hlbHBlcnNFYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgoJCXZhciBfaGVscGVyc0VhY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVyc0VhY2gpOwoKCQl2YXIgX2hlbHBlcnNIZWxwZXJNaXNzaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgoJCXZhciBfaGVscGVyc0hlbHBlck1pc3NpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVyc0hlbHBlck1pc3NpbmcpOwoKCQl2YXIgX2hlbHBlcnNJZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwoKCQl2YXIgX2hlbHBlcnNJZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxwZXJzSWYpOwoKCQl2YXIgX2hlbHBlcnNMb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCgkJdmFyIF9oZWxwZXJzTG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnNMb2cpOwoKCQl2YXIgX2hlbHBlcnNMb29rdXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCgkJdmFyIF9oZWxwZXJzTG9va3VwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbHBlcnNMb29rdXApOwoKCQl2YXIgX2hlbHBlcnNXaXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgoJCXZhciBfaGVscGVyc1dpdGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVscGVyc1dpdGgpOwoKCQlmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7CgkJICBfaGVscGVyc0Jsb2NrSGVscGVyTWlzc2luZzJbJ2RlZmF1bHQnXShpbnN0YW5jZSk7CgkJICBfaGVscGVyc0VhY2gyWydkZWZhdWx0J10oaW5zdGFuY2UpOwoJCSAgX2hlbHBlcnNIZWxwZXJNaXNzaW5nMlsnZGVmYXVsdCddKGluc3RhbmNlKTsKCQkgIF9oZWxwZXJzSWYyWydkZWZhdWx0J10oaW5zdGFuY2UpOwoJCSAgX2hlbHBlcnNMb2cyWydkZWZhdWx0J10oaW5zdGFuY2UpOwoJCSAgX2hlbHBlcnNMb29rdXAyWydkZWZhdWx0J10oaW5zdGFuY2UpOwoJCSAgX2hlbHBlcnNXaXRoMlsnZGVmYXVsdCddKGluc3RhbmNlKTsKCQl9CgoJLyoqKi8gfSksCgkvKiAxMSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCQkndXNlIHN0cmljdCc7CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHsKCQkgIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbiAoY29udGV4dCwgb3B0aW9ucykgewoJCSAgICB2YXIgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSwKCQkgICAgICAgIGZuID0gb3B0aW9ucy5mbjsKCgkJICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7CgkJICAgICAgcmV0dXJuIGZuKHRoaXMpOwoJCSAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IGZhbHNlIHx8IGNvbnRleHQgPT0gbnVsbCkgewoJCSAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpOwoJCSAgICB9IGVsc2UgaWYgKF91dGlscy5pc0FycmF5KGNvbnRleHQpKSB7CgkJICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkgewoJCSAgICAgICAgaWYgKG9wdGlvbnMuaWRzKSB7CgkJICAgICAgICAgIG9wdGlvbnMuaWRzID0gW29wdGlvbnMubmFtZV07CgkJICAgICAgICB9CgoJCSAgICAgICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnMuZWFjaChjb250ZXh0LCBvcHRpb25zKTsKCQkgICAgICB9IGVsc2UgewoJCSAgICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7CgkJICAgICAgfQoJCSAgICB9IGVsc2UgewoJCSAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHsKCQkgICAgICAgIHZhciBkYXRhID0gX3V0aWxzLmNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7CgkJICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gX3V0aWxzLmFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5uYW1lKTsKCQkgICAgICAgIG9wdGlvbnMgPSB7IGRhdGE6IGRhdGEgfTsKCQkgICAgICB9CgoJCSAgICAgIHJldHVybiBmbihjb250ZXh0LCBvcHRpb25zKTsKCQkgICAgfQoJCSAgfSk7CgkJfTsKCgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiAxMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCQkndXNlIHN0cmljdCc7CgoJCXZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKVsnZGVmYXVsdCddOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJdmFyIF9leGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCQl2YXIgX2V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGNlcHRpb24pOwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHsKCQkgIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdlYWNoJywgZnVuY3Rpb24gKGNvbnRleHQsIG9wdGlvbnMpIHsKCQkgICAgaWYgKCFvcHRpb25zKSB7CgkJICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpOwoJCSAgICB9CgoJCSAgICB2YXIgZm4gPSBvcHRpb25zLmZuLAoJCSAgICAgICAgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSwKCQkgICAgICAgIGkgPSAwLAoJCSAgICAgICAgcmV0ID0gJycsCgkJICAgICAgICBkYXRhID0gdW5kZWZpbmVkLAoJCSAgICAgICAgY29udGV4dFBhdGggPSB1bmRlZmluZWQ7CgoJCSAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7CgkJICAgICAgY29udGV4dFBhdGggPSBfdXRpbHMuYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLmlkc1swXSkgKyAnLic7CgkJICAgIH0KCgkJICAgIGlmIChfdXRpbHMuaXNGdW5jdGlvbihjb250ZXh0KSkgewoJCSAgICAgIGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7CgkJICAgIH0KCgkJICAgIGlmIChvcHRpb25zLmRhdGEpIHsKCQkgICAgICBkYXRhID0gX3V0aWxzLmNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7CgkJICAgIH0KCgkJICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7CgkJICAgICAgaWYgKGRhdGEpIHsKCQkgICAgICAgIGRhdGEua2V5ID0gZmllbGQ7CgkJICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7CgkJICAgICAgICBkYXRhLmZpcnN0ID0gaW5kZXggPT09IDA7CgkJICAgICAgICBkYXRhLmxhc3QgPSAhIWxhc3Q7CgoJCSAgICAgICAgaWYgKGNvbnRleHRQYXRoKSB7CgkJICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkOwoJCSAgICAgICAgfQoJCSAgICAgIH0KCgkJICAgICAgcmV0ID0gcmV0ICsgZm4oY29udGV4dFtmaWVsZF0sIHsKCQkgICAgICAgIGRhdGE6IGRhdGEsCgkJICAgICAgICBibG9ja1BhcmFtczogX3V0aWxzLmJsb2NrUGFyYW1zKFtjb250ZXh0W2ZpZWxkXSwgZmllbGRdLCBbY29udGV4dFBhdGggKyBmaWVsZCwgbnVsbF0pCgkJICAgICAgfSk7CgkJICAgIH0KCgkJICAgIGlmIChjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0JykgewoJCSAgICAgIGlmIChfdXRpbHMuaXNBcnJheShjb250ZXh0KSkgewoJCSAgICAgICAgZm9yICh2YXIgaiA9IGNvbnRleHQubGVuZ3RoOyBpIDwgajsgaSsrKSB7CgkJICAgICAgICAgIGlmIChpIGluIGNvbnRleHQpIHsKCQkgICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7CgkJICAgICAgICAgIH0KCQkgICAgICAgIH0KCQkgICAgICB9IGVsc2UgewoJCSAgICAgICAgdmFyIHByaW9yS2V5ID0gdW5kZWZpbmVkOwoKCQkgICAgICAgIGZvciAodmFyIGtleSBpbiBjb250ZXh0KSB7CgkJICAgICAgICAgIGlmIChjb250ZXh0Lmhhc093blByb3BlcnR5KGtleSkpIHsKCQkgICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIHRoZSBpdGVyYXRpb25zIG9uZSBzdGVwIG91dCBvZiBzeW5jIHNvIHdlIGNhbiBkZXRlY3QKCQkgICAgICAgICAgICAvLyB0aGUgbGFzdCBpdGVyYXRpb24gd2l0aG91dCBoYXZlIHRvIHNjYW4gdGhlIG9iamVjdCB0d2ljZSBhbmQgY3JlYXRlCgkJICAgICAgICAgICAgLy8gYW4gaXRlcm1lZGlhdGUga2V5cyBhcnJheS4KCQkgICAgICAgICAgICBpZiAocHJpb3JLZXkgIT09IHVuZGVmaW5lZCkgewoJCSAgICAgICAgICAgICAgZXhlY0l0ZXJhdGlvbihwcmlvcktleSwgaSAtIDEpOwoJCSAgICAgICAgICAgIH0KCQkgICAgICAgICAgICBwcmlvcktleSA9IGtleTsKCQkgICAgICAgICAgICBpKys7CgkJICAgICAgICAgIH0KCQkgICAgICAgIH0KCQkgICAgICAgIGlmIChwcmlvcktleSAhPT0gdW5kZWZpbmVkKSB7CgkJICAgICAgICAgIGV4ZWNJdGVyYXRpb24ocHJpb3JLZXksIGkgLSAxLCB0cnVlKTsKCQkgICAgICAgIH0KCQkgICAgICB9CgkJICAgIH0KCgkJICAgIGlmIChpID09PSAwKSB7CgkJICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuIHJldDsKCQkgIH0pOwoJCX07CgoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF9leGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCQl2YXIgX2V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGNlcHRpb24pOwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHsKCQkgIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdoZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24gKCkgLyogW2FyZ3MsIF1vcHRpb25zICovewoJCSAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewoJCSAgICAgIC8vIEEgbWlzc2luZyBmaWVsZCBpbiBhIHt7Zm9vfX0gY29uc3RydWN0LgoJCSAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgLy8gU29tZW9uZSBpcyBhY3R1YWxseSB0cnlpbmcgdG8gY2FsbCBzb21ldGhpbmcsIGJsb3cgdXAuCgkJICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ01pc3NpbmcgaGVscGVyOiAiJyArIGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0ubmFtZSArICciJyk7CgkJICAgIH0KCQkgIH0pOwoJCX07CgoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJZXhwb3J0c1snZGVmYXVsdCddID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7CgkJICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignaWYnLCBmdW5jdGlvbiAoY29uZGl0aW9uYWwsIG9wdGlvbnMpIHsKCQkgICAgaWYgKF91dGlscy5pc0Z1bmN0aW9uKGNvbmRpdGlvbmFsKSkgewoJCSAgICAgIGNvbmRpdGlvbmFsID0gY29uZGl0aW9uYWwuY2FsbCh0aGlzKTsKCQkgICAgfQoKCQkgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBpcyB0byByZW5kZXIgdGhlIHBvc2l0aXZlIHBhdGggaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgbm90IGVtcHR5LgoJCSAgICAvLyBUaGUgYGluY2x1ZGVaZXJvYCBvcHRpb24gbWF5IGJlIHNldCB0byB0cmVhdCB0aGUgY29uZHRpb25hbCBhcyBwdXJlbHkgbm90IGVtcHR5IGJhc2VkIG9uIHRoZQoJCSAgICAvLyBiZWhhdmlvciBvZiBpc0VtcHR5LiBFZmZlY3RpdmVseSB0aGlzIGRldGVybWluZXMgaWYgMCBpcyBoYW5kbGVkIGJ5IHRoZSBwb3NpdGl2ZSBwYXRoIG9yIG5lZ2F0aXZlLgoJCSAgICBpZiAoIW9wdGlvbnMuaGFzaC5pbmNsdWRlWmVybyAmJiAhY29uZGl0aW9uYWwgfHwgX3V0aWxzLmlzRW1wdHkoY29uZGl0aW9uYWwpKSB7CgkJICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTsKCQkgICAgfQoJCSAgfSk7CgoJCSAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3VubGVzcycsIGZ1bmN0aW9uIChjb25kaXRpb25hbCwgb3B0aW9ucykgewoJCSAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVyc1snaWYnXS5jYWxsKHRoaXMsIGNvbmRpdGlvbmFsLCB7IGZuOiBvcHRpb25zLmludmVyc2UsIGludmVyc2U6IG9wdGlvbnMuZm4sIGhhc2g6IG9wdGlvbnMuaGFzaCB9KTsKCQkgIH0pOwoJCX07CgoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHsKCQkgIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdsb2cnLCBmdW5jdGlvbiAoKSAvKiBtZXNzYWdlLCBvcHRpb25zICovewoJCSAgICB2YXIgYXJncyA9IFt1bmRlZmluZWRdLAoJCSAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07CgkJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkrKykgewoJCSAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOwoJCSAgICB9CgoJCSAgICB2YXIgbGV2ZWwgPSAxOwoJCSAgICBpZiAob3B0aW9ucy5oYXNoLmxldmVsICE9IG51bGwpIHsKCQkgICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDsKCQkgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5kYXRhLmxldmVsICE9IG51bGwpIHsKCQkgICAgICBsZXZlbCA9IG9wdGlvbnMuZGF0YS5sZXZlbDsKCQkgICAgfQoJCSAgICBhcmdzWzBdID0gbGV2ZWw7CgoJCSAgICBpbnN0YW5jZS5sb2cuYXBwbHkoaW5zdGFuY2UsIGFyZ3MpOwoJCSAgfSk7CgkJfTsKCgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiAxNiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCQkndXNlIHN0cmljdCc7CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJCWV4cG9ydHNbJ2RlZmF1bHQnXSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkgewoJCSAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvb2t1cCcsIGZ1bmN0aW9uIChvYmosIGZpZWxkKSB7CgkJICAgIHJldHVybiBvYmogJiYgb2JqW2ZpZWxkXTsKCQkgIH0pOwoJCX07CgoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTcgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJZXhwb3J0c1snZGVmYXVsdCddID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7CgkJICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignd2l0aCcsIGZ1bmN0aW9uIChjb250ZXh0LCBvcHRpb25zKSB7CgkJICAgIGlmIChfdXRpbHMuaXNGdW5jdGlvbihjb250ZXh0KSkgewoJCSAgICAgIGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7CgkJICAgIH0KCgkJICAgIHZhciBmbiA9IG9wdGlvbnMuZm47CgoJCSAgICBpZiAoIV91dGlscy5pc0VtcHR5KGNvbnRleHQpKSB7CgkJICAgICAgdmFyIGRhdGEgPSBvcHRpb25zLmRhdGE7CgkJICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykgewoJCSAgICAgICAgZGF0YSA9IF91dGlscy5jcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpOwoJCSAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IF91dGlscy5hcHBlbmRDb250ZXh0UGF0aChvcHRpb25zLmRhdGEuY29udGV4dFBhdGgsIG9wdGlvbnMuaWRzWzBdKTsKCQkgICAgICB9CgoJCSAgICAgIHJldHVybiBmbihjb250ZXh0LCB7CgkJICAgICAgICBkYXRhOiBkYXRhLAoJCSAgICAgICAgYmxvY2tQYXJhbXM6IF91dGlscy5ibG9ja1BhcmFtcyhbY29udGV4dF0sIFtkYXRhICYmIGRhdGEuY29udGV4dFBhdGhdKQoJCSAgICAgIH0pOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7CgkJICAgIH0KCQkgIH0pOwoJCX07CgoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCQlleHBvcnRzLnJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnMgPSByZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzOwoKCQl2YXIgX2RlY29yYXRvcnNJbmxpbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCgkJdmFyIF9kZWNvcmF0b3JzSW5saW5lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlY29yYXRvcnNJbmxpbmUpOwoKCQlmdW5jdGlvbiByZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKGluc3RhbmNlKSB7CgkJICBfZGVjb3JhdG9yc0lubGluZTJbJ2RlZmF1bHQnXShpbnN0YW5jZSk7CgkJfQoKCS8qKiovIH0pLAoJLyogMTkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJZXhwb3J0c1snZGVmYXVsdCddID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7CgkJICBpbnN0YW5jZS5yZWdpc3RlckRlY29yYXRvcignaW5saW5lJywgZnVuY3Rpb24gKGZuLCBwcm9wcywgY29udGFpbmVyLCBvcHRpb25zKSB7CgkJICAgIHZhciByZXQgPSBmbjsKCQkgICAgaWYgKCFwcm9wcy5wYXJ0aWFscykgewoJCSAgICAgIHByb3BzLnBhcnRpYWxzID0ge307CgkJICAgICAgcmV0ID0gZnVuY3Rpb24gKGNvbnRleHQsIG9wdGlvbnMpIHsKCQkgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYXJ0aWFscyBzdGFjayBmcmFtZSBwcmlvciB0byBleGVjLgoJCSAgICAgICAgdmFyIG9yaWdpbmFsID0gY29udGFpbmVyLnBhcnRpYWxzOwoJCSAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gX3V0aWxzLmV4dGVuZCh7fSwgb3JpZ2luYWwsIHByb3BzLnBhcnRpYWxzKTsKCQkgICAgICAgIHZhciByZXQgPSBmbihjb250ZXh0LCBvcHRpb25zKTsKCQkgICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IG9yaWdpbmFsOwoJCSAgICAgICAgcmV0dXJuIHJldDsKCQkgICAgICB9OwoJCSAgICB9CgoJCSAgICBwcm9wcy5wYXJ0aWFsc1tvcHRpb25zLmFyZ3NbMF1dID0gb3B0aW9ucy5mbjsKCgkJICAgIHJldHVybiByZXQ7CgkJICB9KTsKCQl9OwoKCQltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCgkvKioqLyB9KSwKCS8qIDIwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCSd1c2Ugc3RyaWN0JzsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgoJCXZhciBsb2dnZXIgPSB7CgkJICBtZXRob2RNYXA6IFsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10sCgkJICBsZXZlbDogJ2luZm8nLAoKCQkgIC8vIE1hcHMgYSBnaXZlbiBsZXZlbCB2YWx1ZSB0byB0aGUgYG1ldGhvZE1hcGAgaW5kZXhlcyBhYm92ZS4KCQkgIGxvb2t1cExldmVsOiBmdW5jdGlvbiBsb29rdXBMZXZlbChsZXZlbCkgewoJCSAgICBpZiAodHlwZW9mIGxldmVsID09PSAnc3RyaW5nJykgewoJCSAgICAgIHZhciBsZXZlbE1hcCA9IF91dGlscy5pbmRleE9mKGxvZ2dlci5tZXRob2RNYXAsIGxldmVsLnRvTG93ZXJDYXNlKCkpOwoJCSAgICAgIGlmIChsZXZlbE1hcCA+PSAwKSB7CgkJICAgICAgICBsZXZlbCA9IGxldmVsTWFwOwoJCSAgICAgIH0gZWxzZSB7CgkJICAgICAgICBsZXZlbCA9IHBhcnNlSW50KGxldmVsLCAxMCk7CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICByZXR1cm4gbGV2ZWw7CgkJICB9LAoKCQkgIC8vIENhbiBiZSBvdmVycmlkZGVuIGluIHRoZSBob3N0IGVudmlyb25tZW50CgkJICBsb2c6IGZ1bmN0aW9uIGxvZyhsZXZlbCkgewoJCSAgICBsZXZlbCA9IGxvZ2dlci5sb29rdXBMZXZlbChsZXZlbCk7CgoJCSAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGxvZ2dlci5sb29rdXBMZXZlbChsb2dnZXIubGV2ZWwpIDw9IGxldmVsKSB7CgkJICAgICAgdmFyIG1ldGhvZCA9IGxvZ2dlci5tZXRob2RNYXBbbGV2ZWxdOwoJCSAgICAgIGlmICghY29uc29sZVttZXRob2RdKSB7CgkJICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCQkgICAgICAgIG1ldGhvZCA9ICdsb2cnOwoJCSAgICAgIH0KCgkJICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lc3NhZ2UgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CgkJICAgICAgICBtZXNzYWdlW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKCQkgICAgICB9CgoJCSAgICAgIGNvbnNvbGVbbWV0aG9kXS5hcHBseShjb25zb2xlLCBtZXNzYWdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgkJICAgIH0KCQkgIH0KCQl9OwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBsb2dnZXI7CgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiAyMSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCQkvLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZQoJCSd1c2Ugc3RyaWN0JzsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCQlmdW5jdGlvbiBTYWZlU3RyaW5nKHN0cmluZykgewoJCSAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7CgkJfQoKCQlTYWZlU3RyaW5nLnByb3RvdHlwZS50b1N0cmluZyA9IFNhZmVTdHJpbmcucHJvdG90eXBlLnRvSFRNTCA9IGZ1bmN0aW9uICgpIHsKCQkgIHJldHVybiAnJyArIHRoaXMuc3RyaW5nOwoJCX07CgoJCWV4cG9ydHNbJ2RlZmF1bHQnXSA9IFNhZmVTdHJpbmc7CgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiAyMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCQkndXNlIHN0cmljdCc7CgoJCXZhciBfT2JqZWN0JHNlYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKVsnZGVmYXVsdCddOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpWydkZWZhdWx0J107CgoJCXZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKVsnZGVmYXVsdCddOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoJCWV4cG9ydHMuY2hlY2tSZXZpc2lvbiA9IGNoZWNrUmV2aXNpb247CgkJZXhwb3J0cy50ZW1wbGF0ZSA9IHRlbXBsYXRlOwoJCWV4cG9ydHMud3JhcFByb2dyYW0gPSB3cmFwUHJvZ3JhbTsKCQlleHBvcnRzLnJlc29sdmVQYXJ0aWFsID0gcmVzb2x2ZVBhcnRpYWw7CgkJZXhwb3J0cy5pbnZva2VQYXJ0aWFsID0gaW52b2tlUGFydGlhbDsKCQlleHBvcnRzLm5vb3AgPSBub29wOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJdmFyIFV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWxzKTsKCgkJdmFyIF9leGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCQl2YXIgX2V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGNlcHRpb24pOwoKCQl2YXIgX2Jhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKCQlmdW5jdGlvbiBjaGVja1JldmlzaW9uKGNvbXBpbGVySW5mbykgewoJCSAgdmFyIGNvbXBpbGVyUmV2aXNpb24gPSBjb21waWxlckluZm8gJiYgY29tcGlsZXJJbmZvWzBdIHx8IDEsCgkJICAgICAgY3VycmVudFJldmlzaW9uID0gX2Jhc2UuQ09NUElMRVJfUkVWSVNJT047CgoJCSAgaWYgKGNvbXBpbGVyUmV2aXNpb24gIT09IGN1cnJlbnRSZXZpc2lvbikgewoJCSAgICBpZiAoY29tcGlsZXJSZXZpc2lvbiA8IGN1cnJlbnRSZXZpc2lvbikgewoJCSAgICAgIHZhciBydW50aW1lVmVyc2lvbnMgPSBfYmFzZS5SRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sCgkJICAgICAgICAgIGNvbXBpbGVyVmVyc2lvbnMgPSBfYmFzZS5SRVZJU0lPTl9DSEFOR0VTW2NvbXBpbGVyUmV2aXNpb25dOwoJCSAgICAgIHRocm93IG5ldyBfZXhjZXB0aW9uMlsnZGVmYXVsdCddKCdUZW1wbGF0ZSB3YXMgcHJlY29tcGlsZWQgd2l0aCBhbiBvbGRlciB2ZXJzaW9uIG9mIEhhbmRsZWJhcnMgdGhhbiB0aGUgY3VycmVudCBydW50aW1lLiAnICsgJ1BsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBydW50aW1lVmVyc2lvbnMgKyAnKSBvciBkb3duZ3JhZGUgeW91ciBydW50aW1lIHRvIGFuIG9sZGVyIHZlcnNpb24gKCcgKyBjb21waWxlclZlcnNpb25zICsgJykuJyk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgLy8gVXNlIHRoZSBlbWJlZGRlZCB2ZXJzaW9uIGluZm8gc2luY2UgdGhlIHJ1bnRpbWUgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgcmV2aXNpb24geWV0CgkJICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ1RlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGEgbmV3ZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArICdQbGVhc2UgdXBkYXRlIHlvdXIgcnVudGltZSB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBjb21waWxlckluZm9bMV0gKyAnKS4nKTsKCQkgICAgfQoJCSAgfQoJCX0KCgkJZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHsKCQkgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgkJICBpZiAoIWVudikgewoJCSAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnTm8gZW52aXJvbm1lbnQgcGFzc2VkIHRvIHRlbXBsYXRlJyk7CgkJICB9CgkJICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHsKCQkgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ1Vua25vd24gdGVtcGxhdGUgb2JqZWN0OiAnICsgdHlwZW9mIHRlbXBsYXRlU3BlYyk7CgkJICB9CgoJCSAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDsKCgkJICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvdwoJCSAgLy8gZm9yIGV4dGVybmFsIHVzZXJzIHRvIG92ZXJyaWRlIHRoZXNlIGFzIHBzdWVkby1zdXBwb3J0ZWQgQVBJcy4KCQkgIGVudi5WTS5jaGVja1JldmlzaW9uKHRlbXBsYXRlU3BlYy5jb21waWxlcik7CgoJCSAgZnVuY3Rpb24gaW52b2tlUGFydGlhbFdyYXBwZXIocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykgewoJCSAgICBpZiAob3B0aW9ucy5oYXNoKSB7CgkJICAgICAgY29udGV4dCA9IFV0aWxzLmV4dGVuZCh7fSwgY29udGV4dCwgb3B0aW9ucy5oYXNoKTsKCQkgICAgICBpZiAob3B0aW9ucy5pZHMpIHsKCQkgICAgICAgIG9wdGlvbnMuaWRzWzBdID0gdHJ1ZTsKCQkgICAgICB9CgkJICAgIH0KCgkJICAgIHBhcnRpYWwgPSBlbnYuVk0ucmVzb2x2ZVBhcnRpYWwuY2FsbCh0aGlzLCBwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKTsKCQkgICAgdmFyIHJlc3VsdCA9IGVudi5WTS5pbnZva2VQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7CgoJCSAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgZW52LmNvbXBpbGUpIHsKCQkgICAgICBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0gPSBlbnYuY29tcGlsZShwYXJ0aWFsLCB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJPcHRpb25zLCBlbnYpOwoJCSAgICAgIHJlc3VsdCA9IG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXShjb250ZXh0LCBvcHRpb25zKTsKCQkgICAgfQoJCSAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsKCQkgICAgICBpZiAob3B0aW9ucy5pbmRlbnQpIHsKCQkgICAgICAgIHZhciBsaW5lcyA9IHJlc3VsdC5zcGxpdCgnXG4nKTsKCQkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJICAgICAgICAgIGlmICghbGluZXNbaV0gJiYgaSArIDEgPT09IGwpIHsKCQkgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgfQoKCQkgICAgICAgICAgbGluZXNbaV0gPSBvcHRpb25zLmluZGVudCArIGxpbmVzW2ldOwoJCSAgICAgICAgfQoJCSAgICAgICAgcmVzdWx0ID0gbGluZXMuam9pbignXG4nKTsKCQkgICAgICB9CgkJICAgICAgcmV0dXJuIHJlc3VsdDsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnVGhlIHBhcnRpYWwgJyArIG9wdGlvbnMubmFtZSArICcgY291bGQgbm90IGJlIGNvbXBpbGVkIHdoZW4gcnVubmluZyBpbiBydW50aW1lLW9ubHkgbW9kZScpOwoJCSAgICB9CgkJICB9CgoJCSAgLy8gSnVzdCBhZGQgd2F0ZXIKCQkgIHZhciBjb250YWluZXIgPSB7CgkJICAgIHN0cmljdDogZnVuY3Rpb24gc3RyaWN0KG9iaiwgbmFtZSkgewoJCSAgICAgIGlmICghKG5hbWUgaW4gb2JqKSkgewoJCSAgICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJyInICsgbmFtZSArICciIG5vdCBkZWZpbmVkIGluICcgKyBvYmopOwoJCSAgICAgIH0KCQkgICAgICByZXR1cm4gb2JqW25hbWVdOwoJCSAgICB9LAoJCSAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChkZXB0aHMsIG5hbWUpIHsKCQkgICAgICB2YXIgbGVuID0gZGVwdGhzLmxlbmd0aDsKCQkgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkJICAgICAgICBpZiAoZGVwdGhzW2ldICYmIGRlcHRoc1tpXVtuYW1lXSAhPSBudWxsKSB7CgkJICAgICAgICAgIHJldHVybiBkZXB0aHNbaV1bbmFtZV07CgkJICAgICAgICB9CgkJICAgICAgfQoJCSAgICB9LAoJCSAgICBsYW1iZGE6IGZ1bmN0aW9uIGxhbWJkYShjdXJyZW50LCBjb250ZXh0KSB7CgkJICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnZnVuY3Rpb24nID8gY3VycmVudC5jYWxsKGNvbnRleHQpIDogY3VycmVudDsKCQkgICAgfSwKCgkJICAgIGVzY2FwZUV4cHJlc3Npb246IFV0aWxzLmVzY2FwZUV4cHJlc3Npb24sCgkJICAgIGludm9rZVBhcnRpYWw6IGludm9rZVBhcnRpYWxXcmFwcGVyLAoKCQkgICAgZm46IGZ1bmN0aW9uIGZuKGkpIHsKCQkgICAgICB2YXIgcmV0ID0gdGVtcGxhdGVTcGVjW2ldOwoJCSAgICAgIHJldC5kZWNvcmF0b3IgPSB0ZW1wbGF0ZVNwZWNbaSArICdfZCddOwoJCSAgICAgIHJldHVybiByZXQ7CgkJICAgIH0sCgoJCSAgICBwcm9ncmFtczogW10sCgkJICAgIHByb2dyYW06IGZ1bmN0aW9uIHByb2dyYW0oaSwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykgewoJCSAgICAgIHZhciBwcm9ncmFtV3JhcHBlciA9IHRoaXMucHJvZ3JhbXNbaV0sCgkJICAgICAgICAgIGZuID0gdGhpcy5mbihpKTsKCQkgICAgICBpZiAoZGF0YSB8fCBkZXB0aHMgfHwgYmxvY2tQYXJhbXMgfHwgZGVjbGFyZWRCbG9ja1BhcmFtcykgewoJCSAgICAgICAgcHJvZ3JhbVdyYXBwZXIgPSB3cmFwUHJvZ3JhbSh0aGlzLCBpLCBmbiwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocyk7CgkJICAgICAgfSBlbHNlIGlmICghcHJvZ3JhbVdyYXBwZXIpIHsKCQkgICAgICAgIHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuKTsKCQkgICAgICB9CgkJICAgICAgcmV0dXJuIHByb2dyYW1XcmFwcGVyOwoJCSAgICB9LAoKCQkgICAgZGF0YTogZnVuY3Rpb24gZGF0YSh2YWx1ZSwgZGVwdGgpIHsKCQkgICAgICB3aGlsZSAodmFsdWUgJiYgZGVwdGgtLSkgewoJCSAgICAgICAgdmFsdWUgPSB2YWx1ZS5fcGFyZW50OwoJCSAgICAgIH0KCQkgICAgICByZXR1cm4gdmFsdWU7CgkJICAgIH0sCgkJICAgIG1lcmdlOiBmdW5jdGlvbiBtZXJnZShwYXJhbSwgY29tbW9uKSB7CgkJICAgICAgdmFyIG9iaiA9IHBhcmFtIHx8IGNvbW1vbjsKCgkJICAgICAgaWYgKHBhcmFtICYmIGNvbW1vbiAmJiBwYXJhbSAhPT0gY29tbW9uKSB7CgkJICAgICAgICBvYmogPSBVdGlscy5leHRlbmQoe30sIGNvbW1vbiwgcGFyYW0pOwoJCSAgICAgIH0KCgkJICAgICAgcmV0dXJuIG9iajsKCQkgICAgfSwKCQkgICAgLy8gQW4gZW1wdHkgb2JqZWN0IHRvIHVzZSBhcyByZXBsYWNlbWVudCBmb3IgbnVsbC1jb250ZXh0cwoJCSAgICBudWxsQ29udGV4dDogX09iamVjdCRzZWFsKHt9KSwKCgkJICAgIG5vb3A6IGVudi5WTS5ub29wLAoJCSAgICBjb21waWxlckluZm86IHRlbXBsYXRlU3BlYy5jb21waWxlcgoJCSAgfTsKCgkJICBmdW5jdGlvbiByZXQoY29udGV4dCkgewoJCSAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdOwoKCQkgICAgdmFyIGRhdGEgPSBvcHRpb25zLmRhdGE7CgoJCSAgICByZXQuX3NldHVwKG9wdGlvbnMpOwoJCSAgICBpZiAoIW9wdGlvbnMucGFydGlhbCAmJiB0ZW1wbGF0ZVNwZWMudXNlRGF0YSkgewoJCSAgICAgIGRhdGEgPSBpbml0RGF0YShjb250ZXh0LCBkYXRhKTsKCQkgICAgfQoJCSAgICB2YXIgZGVwdGhzID0gdW5kZWZpbmVkLAoJCSAgICAgICAgYmxvY2tQYXJhbXMgPSB0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgPyBbXSA6IHVuZGVmaW5lZDsKCQkgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VEZXB0aHMpIHsKCQkgICAgICBpZiAob3B0aW9ucy5kZXB0aHMpIHsKCQkgICAgICAgIGRlcHRocyA9IGNvbnRleHQgIT0gb3B0aW9ucy5kZXB0aHNbMF0gPyBbY29udGV4dF0uY29uY2F0KG9wdGlvbnMuZGVwdGhzKSA6IG9wdGlvbnMuZGVwdGhzOwoJCSAgICAgIH0gZWxzZSB7CgkJICAgICAgICBkZXB0aHMgPSBbY29udGV4dF07CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQgLyosIG9wdGlvbnMqLykgewoJCSAgICAgIHJldHVybiAnJyArIHRlbXBsYXRlU3BlYy5tYWluKGNvbnRhaW5lciwgY29udGV4dCwgY29udGFpbmVyLmhlbHBlcnMsIGNvbnRhaW5lci5wYXJ0aWFscywgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7CgkJICAgIH0KCQkgICAgbWFpbiA9IGV4ZWN1dGVEZWNvcmF0b3JzKHRlbXBsYXRlU3BlYy5tYWluLCBtYWluLCBjb250YWluZXIsIG9wdGlvbnMuZGVwdGhzIHx8IFtdLCBkYXRhLCBibG9ja1BhcmFtcyk7CgkJICAgIHJldHVybiBtYWluKGNvbnRleHQsIG9wdGlvbnMpOwoJCSAgfQoJCSAgcmV0LmlzVG9wID0gdHJ1ZTsKCgkJICByZXQuX3NldHVwID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKCQkgICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHsKCQkgICAgICBjb250YWluZXIuaGVscGVycyA9IGNvbnRhaW5lci5tZXJnZShvcHRpb25zLmhlbHBlcnMsIGVudi5oZWxwZXJzKTsKCgkJICAgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VQYXJ0aWFsKSB7CgkJICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBjb250YWluZXIubWVyZ2Uob3B0aW9ucy5wYXJ0aWFscywgZW52LnBhcnRpYWxzKTsKCQkgICAgICB9CgkJICAgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VQYXJ0aWFsIHx8IHRlbXBsYXRlU3BlYy51c2VEZWNvcmF0b3JzKSB7CgkJICAgICAgICBjb250YWluZXIuZGVjb3JhdG9ycyA9IGNvbnRhaW5lci5tZXJnZShvcHRpb25zLmRlY29yYXRvcnMsIGVudi5kZWNvcmF0b3JzKTsKCQkgICAgICB9CgkJICAgIH0gZWxzZSB7CgkJICAgICAgY29udGFpbmVyLmhlbHBlcnMgPSBvcHRpb25zLmhlbHBlcnM7CgkJICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3B0aW9ucy5wYXJ0aWFsczsKCQkgICAgICBjb250YWluZXIuZGVjb3JhdG9ycyA9IG9wdGlvbnMuZGVjb3JhdG9yczsKCQkgICAgfQoJCSAgfTsKCgkJICByZXQuX2NoaWxkID0gZnVuY3Rpb24gKGksIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHsKCQkgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VCbG9ja1BhcmFtcyAmJiAhYmxvY2tQYXJhbXMpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnbXVzdCBwYXNzIGJsb2NrIHBhcmFtcycpOwoJCSAgICB9CgkJICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzICYmICFkZXB0aHMpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnbXVzdCBwYXNzIHBhcmVudCBkZXB0aHMnKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgdGVtcGxhdGVTcGVjW2ldLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKTsKCQkgIH07CgkJICByZXR1cm4gcmV0OwoJCX0KCgkJZnVuY3Rpb24gd3JhcFByb2dyYW0oY29udGFpbmVyLCBpLCBmbiwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykgewoJCSAgZnVuY3Rpb24gcHJvZyhjb250ZXh0KSB7CgkJICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07CgoJCSAgICB2YXIgY3VycmVudERlcHRocyA9IGRlcHRoczsKCQkgICAgaWYgKGRlcHRocyAmJiBjb250ZXh0ICE9IGRlcHRoc1swXSAmJiAhKGNvbnRleHQgPT09IGNvbnRhaW5lci5udWxsQ29udGV4dCAmJiBkZXB0aHNbMF0gPT09IG51bGwpKSB7CgkJICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuIGZuKGNvbnRhaW5lciwgY29udGV4dCwgY29udGFpbmVyLmhlbHBlcnMsIGNvbnRhaW5lci5wYXJ0aWFscywgb3B0aW9ucy5kYXRhIHx8IGRhdGEsIGJsb2NrUGFyYW1zICYmIFtvcHRpb25zLmJsb2NrUGFyYW1zXS5jb25jYXQoYmxvY2tQYXJhbXMpLCBjdXJyZW50RGVwdGhzKTsKCQkgIH0KCgkJICBwcm9nID0gZXhlY3V0ZURlY29yYXRvcnMoZm4sIHByb2csIGNvbnRhaW5lciwgZGVwdGhzLCBkYXRhLCBibG9ja1BhcmFtcyk7CgoJCSAgcHJvZy5wcm9ncmFtID0gaTsKCQkgIHByb2cuZGVwdGggPSBkZXB0aHMgPyBkZXB0aHMubGVuZ3RoIDogMDsKCQkgIHByb2cuYmxvY2tQYXJhbXMgPSBkZWNsYXJlZEJsb2NrUGFyYW1zIHx8IDA7CgkJICByZXR1cm4gcHJvZzsKCQl9CgoJCWZ1bmN0aW9uIHJlc29sdmVQYXJ0aWFsKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHsKCQkgIGlmICghcGFydGlhbCkgewoJCSAgICBpZiAob3B0aW9ucy5uYW1lID09PSAnQHBhcnRpYWwtYmxvY2snKSB7CgkJICAgICAgcGFydGlhbCA9IG9wdGlvbnMuZGF0YVsncGFydGlhbC1ibG9jayddOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHBhcnRpYWwgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV07CgkJICAgIH0KCQkgIH0gZWxzZSBpZiAoIXBhcnRpYWwuY2FsbCAmJiAhb3B0aW9ucy5uYW1lKSB7CgkJICAgIC8vIFRoaXMgaXMgYSBkeW5hbWljIHBhcnRpYWwgdGhhdCByZXR1cm5lZCBhIHN0cmluZwoJCSAgICBvcHRpb25zLm5hbWUgPSBwYXJ0aWFsOwoJCSAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1twYXJ0aWFsXTsKCQkgIH0KCQkgIHJldHVybiBwYXJ0aWFsOwoJCX0KCgkJZnVuY3Rpb24gaW52b2tlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7CgkJICAvLyBVc2UgdGhlIGN1cnJlbnQgY2xvc3VyZSBjb250ZXh0IHRvIHNhdmUgdGhlIHBhcnRpYWwtYmxvY2sgaWYgdGhpcyBwYXJ0aWFsCgkJICB2YXIgY3VycmVudFBhcnRpYWxCbG9jayA9IG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTsKCQkgIG9wdGlvbnMucGFydGlhbCA9IHRydWU7CgkJICBpZiAob3B0aW9ucy5pZHMpIHsKCQkgICAgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoID0gb3B0aW9ucy5pZHNbMF0gfHwgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoOwoJCSAgfQoKCQkgIHZhciBwYXJ0aWFsQmxvY2sgPSB1bmRlZmluZWQ7CgkJICBpZiAob3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBub29wKSB7CgkJICAgIChmdW5jdGlvbiAoKSB7CgkJICAgICAgb3B0aW9ucy5kYXRhID0gX2Jhc2UuY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTsKCQkgICAgICAvLyBXcmFwcGVyIGZ1bmN0aW9uIHRvIGdldCBhY2Nlc3MgdG8gY3VycmVudFBhcnRpYWxCbG9jayBmcm9tIHRoZSBjbG9zdXJlCgkJICAgICAgdmFyIGZuID0gb3B0aW9ucy5mbjsKCQkgICAgICBwYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IGZ1bmN0aW9uIHBhcnRpYWxCbG9ja1dyYXBwZXIoY29udGV4dCkgewoJCSAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTsKCgkJICAgICAgICAvLyBSZXN0b3JlIHRoZSBwYXJ0aWFsLWJsb2NrIGZyb20gdGhlIGNsb3N1cmUgZm9yIHRoZSBleGVjdXRpb24gb2YgdGhlIGJsb2NrCgkJICAgICAgICAvLyBpLmUuIHRoZSBwYXJ0IGluc2lkZSB0aGUgYmxvY2sgb2YgdGhlIHBhcnRpYWwgY2FsbC4KCQkgICAgICAgIG9wdGlvbnMuZGF0YSA9IF9iYXNlLmNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7CgkJICAgICAgICBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IGN1cnJlbnRQYXJ0aWFsQmxvY2s7CgkJICAgICAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucyk7CgkJICAgICAgfTsKCQkgICAgICBpZiAoZm4ucGFydGlhbHMpIHsKCQkgICAgICAgIG9wdGlvbnMucGFydGlhbHMgPSBVdGlscy5leHRlbmQoe30sIG9wdGlvbnMucGFydGlhbHMsIGZuLnBhcnRpYWxzKTsKCQkgICAgICB9CgkJICAgIH0pKCk7CgkJICB9CgoJCSAgaWYgKHBhcnRpYWwgPT09IHVuZGVmaW5lZCAmJiBwYXJ0aWFsQmxvY2spIHsKCQkgICAgcGFydGlhbCA9IHBhcnRpYWxCbG9jazsKCQkgIH0KCgkJICBpZiAocGFydGlhbCA9PT0gdW5kZWZpbmVkKSB7CgkJICAgIHRocm93IG5ldyBfZXhjZXB0aW9uMlsnZGVmYXVsdCddKCdUaGUgcGFydGlhbCAnICsgb3B0aW9ucy5uYW1lICsgJyBjb3VsZCBub3QgYmUgZm91bmQnKTsKCQkgIH0gZWxzZSBpZiAocGFydGlhbCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CgkJICAgIHJldHVybiBwYXJ0aWFsKGNvbnRleHQsIG9wdGlvbnMpOwoJCSAgfQoJCX0KCgkJZnVuY3Rpb24gbm9vcCgpIHsKCQkgIHJldHVybiAnJzsKCQl9CgoJCWZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHsKCQkgIGlmICghZGF0YSB8fCAh", "base64"));
  res.write(new Buffer("KCdyb290JyBpbiBkYXRhKSkgewoJCSAgICBkYXRhID0gZGF0YSA/IF9iYXNlLmNyZWF0ZUZyYW1lKGRhdGEpIDoge307CgkJICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7CgkJICB9CgkJICByZXR1cm4gZGF0YTsKCQl9CgoJCWZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHsKCQkgIGlmIChmbi5kZWNvcmF0b3IpIHsKCQkgICAgdmFyIHByb3BzID0ge307CgkJICAgIHByb2cgPSBmbi5kZWNvcmF0b3IocHJvZywgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGhzICYmIGRlcHRoc1swXSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7CgkJICAgIFV0aWxzLmV4dGVuZChwcm9nLCBwcm9wcyk7CgkJICB9CgkJICByZXR1cm4gcHJvZzsKCQl9CgoJLyoqKi8gfSksCgkvKiAyMyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCQltb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKCS8qKiovIH0pLAoJLyogMjQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7CgkJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKS5PYmplY3Quc2VhbDsKCgkvKioqLyB9KSwKCS8qIDI1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCS8vIDE5LjEuMi4xNyBPYmplY3Quc2VhbChPKQoJCXZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwoKCQlfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSgnc2VhbCcsIGZ1bmN0aW9uKCRzZWFsKXsKCQkgIHJldHVybiBmdW5jdGlvbiBzZWFsKGl0KXsKCQkgICAgcmV0dXJuICRzZWFsICYmIGlzT2JqZWN0KGl0KSA/ICRzZWFsKGl0KSA6IGl0OwoJCSAgfTsKCQl9KTsKCgkvKioqLyB9KSwKCS8qIDI2ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJCSAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJzsKCQl9OwoKCS8qKiovIH0pLAoJLyogMjcgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCgkJdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQoJCSAgLCBjb3JlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkKCQkgICwgZmFpbHMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoJCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXsKCQkgIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV0KCQkgICAgLCBleHAgPSB7fTsKCQkgIGV4cFtLRVldID0gZXhlYyhmbik7CgkJICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7CgkJfTsKCgkvKioqLyB9KSwKCS8qIDI4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCXZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQoJCSAgLCBjb3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKQoJCSAgLCBjdHggICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKQoJCSAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCgkJdmFyICRleHBvcnQgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBzb3VyY2UpewoJCSAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkYKCQkgICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCgkJICAgICwgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuUwoJCSAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlAKCQkgICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCgkJICAgICwgSVNfV1JBUCAgID0gdHlwZSAmICRleHBvcnQuVwoJCSAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pCgkJICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXQoJCSAgICAsIGtleSwgb3duLCBvdXQ7CgkJICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKCQkgIGZvcihrZXkgaW4gc291cmNlKXsKCQkgICAgLy8gY29udGFpbnMgaW4gbmF0aXZlCgkJICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIGtleSBpbiB0YXJnZXQ7CgkJICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTsKCQkgICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKCQkgICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKCQkgICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzCgkJICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldCgkJICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CgkJICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpCgkJICAgIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5CgkJICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CgkJICAgICAgdmFyIEYgPSBmdW5jdGlvbihwYXJhbSl7CgkJICAgICAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIEMgPyBuZXcgQyhwYXJhbSkgOiBDKHBhcmFtKTsKCQkgICAgICB9OwoJCSAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTsKCQkgICAgICByZXR1cm4gRjsKCQkgICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCgkJICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDsKCQkgICAgaWYoSVNfUFJPVE8pKGV4cG9ydHNbUFJPVE9UWVBFXSB8fCAoZXhwb3J0c1tQUk9UT1RZUEVdID0ge30pKVtrZXldID0gb3V0OwoJCSAgfQoJCX07CgkJLy8gdHlwZSBiaXRtYXAKCQkkZXhwb3J0LkYgPSAxOyAgLy8gZm9yY2VkCgkJJGV4cG9ydC5HID0gMjsgIC8vIGdsb2JhbAoJCSRleHBvcnQuUyA9IDQ7ICAvLyBzdGF0aWMKCQkkZXhwb3J0LlAgPSA4OyAgLy8gcHJvdG8KCQkkZXhwb3J0LkIgPSAxNjsgLy8gYmluZAoJCSRleHBvcnQuVyA9IDMyOyAvLyB3cmFwCgkJbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OwoKCS8qKiovIH0pLAoJLyogMjkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKCQl2YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgKCQkgID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsKCQlpZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKCS8qKiovIH0pLAoJLyogMzAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJdmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMS4yLjYnfTsKCQlpZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCgkvKioqLyB9KSwKCS8qIDMxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCS8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwoJCXZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTsKCQltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpewoJCSAgYUZ1bmN0aW9uKGZuKTsKCQkgIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47CgkJICBzd2l0Y2gobGVuZ3RoKXsKCQkgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7CgkJICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7CgkJICAgIH07CgkJICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpewoJCSAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpOwoJCSAgICB9OwoJCSAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsKCQkgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTsKCQkgICAgfTsKCQkgIH0KCQkgIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXsKCQkgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CgkJICB9OwoJCX07CgoJLyoqKi8gfSksCgkvKiAzMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCQltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKCQkgIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CgkJICByZXR1cm4gaXQ7CgkJfTsKCgkvKioqLyB9KSwKCS8qIDMzICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7CgkJICB0cnkgewoJCSAgICByZXR1cm4gISFleGVjKCk7CgkJICB9IGNhdGNoKGUpewoJCSAgICByZXR1cm4gdHJ1ZTsKCQkgIH0KCQl9OwoKCS8qKiovIH0pLAoJLyogMzQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qIGdsb2JhbCB3aW5kb3cgKi8KCQkndXNlIHN0cmljdCc7CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJCWV4cG9ydHNbJ2RlZmF1bHQnXSA9IGZ1bmN0aW9uIChIYW5kbGViYXJzKSB7CgkJICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoJCSAgdmFyIHJvb3QgPSB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdywKCQkgICAgICAkSGFuZGxlYmFycyA9IHJvb3QuSGFuZGxlYmFyczsKCQkgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgkJICBIYW5kbGViYXJzLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CgkJICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHsKCQkgICAgICByb290LkhhbmRsZWJhcnMgPSAkSGFuZGxlYmFyczsKCQkgICAgfQoJCSAgICByZXR1cm4gSGFuZGxlYmFyczsKCQkgIH07CgkJfTsKCgkJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgkJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKQoKCS8qKiovIH0pLAoJLyogMzUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoJCXZhciBBU1QgPSB7CgkJICAvLyBQdWJsaWMgQVBJIHVzZWQgdG8gZXZhbHVhdGUgZGVyaXZlZCBhdHRyaWJ1dGVzIHJlZ2FyZGluZyBBU1Qgbm9kZXMKCQkgIGhlbHBlcnM6IHsKCQkgICAgLy8gYSBtdXN0YWNoZSBpcyBkZWZpbml0ZWx5IGEgaGVscGVyIGlmOgoJCSAgICAvLyAqIGl0IGlzIGFuIGVsaWdpYmxlIGhlbHBlciwgYW5kCgkJICAgIC8vICogaXQgaGFzIGF0IGxlYXN0IG9uZSBwYXJhbWV0ZXIgb3IgaGFzaCBzZWdtZW50CgkJICAgIGhlbHBlckV4cHJlc3Npb246IGZ1bmN0aW9uIGhlbHBlckV4cHJlc3Npb24obm9kZSkgewoJCSAgICAgIHJldHVybiBub2RlLnR5cGUgPT09ICdTdWJFeHByZXNzaW9uJyB8fCAobm9kZS50eXBlID09PSAnTXVzdGFjaGVTdGF0ZW1lbnQnIHx8IG5vZGUudHlwZSA9PT0gJ0Jsb2NrU3RhdGVtZW50JykgJiYgISEobm9kZS5wYXJhbXMgJiYgbm9kZS5wYXJhbXMubGVuZ3RoIHx8IG5vZGUuaGFzaCk7CgkJICAgIH0sCgoJCSAgICBzY29wZWRJZDogZnVuY3Rpb24gc2NvcGVkSWQocGF0aCkgewoJCSAgICAgIHJldHVybiAoL15cLnx0aGlzXGIvLnRlc3QocGF0aC5vcmlnaW5hbCkKCQkgICAgICApOwoJCSAgICB9LAoKCQkgICAgLy8gYW4gSUQgaXMgc2ltcGxlIGlmIGl0IG9ubHkgaGFzIG9uZSBwYXJ0LCBhbmQgdGhhdCBwYXJ0IGlzIG5vdAoJCSAgICAvLyBgLi5gIG9yIGB0aGlzYC4KCQkgICAgc2ltcGxlSWQ6IGZ1bmN0aW9uIHNpbXBsZUlkKHBhdGgpIHsKCQkgICAgICByZXR1cm4gcGF0aC5wYXJ0cy5sZW5ndGggPT09IDEgJiYgIUFTVC5oZWxwZXJzLnNjb3BlZElkKHBhdGgpICYmICFwYXRoLmRlcHRoOwoJCSAgICB9CgkJICB9CgkJfTsKCgkJLy8gTXVzdCBiZSBleHBvcnRlZCBhcyBhbiBvYmplY3QgcmF0aGVyIHRoYW4gdGhlIHJvb3Qgb2YgdGhlIG1vZHVsZSBhcyB0aGUgamlzb24gbGV4ZXIKCQkvLyBtdXN0IG1vZGlmeSB0aGUgb2JqZWN0IHRvIG9wZXJhdGUgcHJvcGVybHkuCgkJZXhwb3J0c1snZGVmYXVsdCddID0gQVNUOwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMzYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKVsnZGVmYXVsdCddOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoJCWV4cG9ydHMucGFyc2UgPSBwYXJzZTsKCgkJdmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKCgkJdmFyIF9wYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VyKTsKCgkJdmFyIF93aGl0ZXNwYWNlQ29udHJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpOwoKCQl2YXIgX3doaXRlc3BhY2VDb250cm9sMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3doaXRlc3BhY2VDb250cm9sKTsKCgkJdmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7CgoJCXZhciBIZWxwZXJzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2hlbHBlcnMpOwoKCQl2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCgkJZXhwb3J0cy5wYXJzZXIgPSBfcGFyc2VyMlsnZGVmYXVsdCddOwoKCQl2YXIgeXkgPSB7fTsKCQlfdXRpbHMuZXh0ZW5kKHl5LCBIZWxwZXJzKTsKCgkJZnVuY3Rpb24gcGFyc2UoaW5wdXQsIG9wdGlvbnMpIHsKCQkgIC8vIEp1c3QgcmV0dXJuIGlmIGFuIGFscmVhZHktY29tcGlsZWQgQVNUIHdhcyBwYXNzZWQgaW4uCgkJICBpZiAoaW5wdXQudHlwZSA9PT0gJ1Byb2dyYW0nKSB7CgkJICAgIHJldHVybiBpbnB1dDsKCQkgIH0KCgkJICBfcGFyc2VyMlsnZGVmYXVsdCddLnl5ID0geXk7CgoJCSAgLy8gQWx0ZXJpbmcgdGhlIHNoYXJlZCBvYmplY3QgaGVyZSwgYnV0IHRoaXMgaXMgb2sgYXMgcGFyc2VyIGlzIGEgc3luYyBvcGVyYXRpb24KCQkgIHl5LmxvY0luZm8gPSBmdW5jdGlvbiAobG9jSW5mbykgewoJCSAgICByZXR1cm4gbmV3IHl5LlNvdXJjZUxvY2F0aW9uKG9wdGlvbnMgJiYgb3B0aW9ucy5zcmNOYW1lLCBsb2NJbmZvKTsKCQkgIH07CgoJCSAgdmFyIHN0cmlwID0gbmV3IF93aGl0ZXNwYWNlQ29udHJvbDJbJ2RlZmF1bHQnXShvcHRpb25zKTsKCQkgIHJldHVybiBzdHJpcC5hY2NlcHQoX3BhcnNlcjJbJ2RlZmF1bHQnXS5wYXJzZShpbnB1dCkpOwoJCX0KCgkvKioqLyB9KSwKCS8qIDM3ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJCS8vIEZpbGUgaWdub3JlZCBpbiBjb3ZlcmFnZSB0ZXN0cyB2aWEgc2V0dGluZyBpbiAuaXN0YW5idWwueW1sCgkJLyogSmlzb24gZ2VuZXJhdGVkIHBhcnNlciAqLwoJCSJ1c2Ugc3RyaWN0IjsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCQl2YXIgaGFuZGxlYmFycyA9IChmdW5jdGlvbiAoKSB7CgkJICAgIHZhciBwYXJzZXIgPSB7IHRyYWNlOiBmdW5jdGlvbiB0cmFjZSgpIHt9LAoJCSAgICAgICAgeXk6IHt9LAoJCSAgICAgICAgc3ltYm9sc186IHsgImVycm9yIjogMiwgInJvb3QiOiAzLCAicHJvZ3JhbSI6IDQsICJFT0YiOiA1LCAicHJvZ3JhbV9yZXBldGl0aW9uMCI6IDYsICJzdGF0ZW1lbnQiOiA3LCAibXVzdGFjaGUiOiA4LCAiYmxvY2siOiA5LCAicmF3QmxvY2siOiAxMCwgInBhcnRpYWwiOiAxMSwgInBhcnRpYWxCbG9jayI6IDEyLCAiY29udGVudCI6IDEzLCAiQ09NTUVOVCI6IDE0LCAiQ09OVEVOVCI6IDE1LCAib3BlblJhd0Jsb2NrIjogMTYsICJyYXdCbG9ja19yZXBldGl0aW9uX3BsdXMwIjogMTcsICJFTkRfUkFXX0JMT0NLIjogMTgsICJPUEVOX1JBV19CTE9DSyI6IDE5LCAiaGVscGVyTmFtZSI6IDIwLCAib3BlblJhd0Jsb2NrX3JlcGV0aXRpb24wIjogMjEsICJvcGVuUmF3QmxvY2tfb3B0aW9uMCI6IDIyLCAiQ0xPU0VfUkFXX0JMT0NLIjogMjMsICJvcGVuQmxvY2siOiAyNCwgImJsb2NrX29wdGlvbjAiOiAyNSwgImNsb3NlQmxvY2siOiAyNiwgIm9wZW5JbnZlcnNlIjogMjcsICJibG9ja19vcHRpb24xIjogMjgsICJPUEVOX0JMT0NLIjogMjksICJvcGVuQmxvY2tfcmVwZXRpdGlvbjAiOiAzMCwgIm9wZW5CbG9ja19vcHRpb24wIjogMzEsICJvcGVuQmxvY2tfb3B0aW9uMSI6IDMyLCAiQ0xPU0UiOiAzMywgIk9QRU5fSU5WRVJTRSI6IDM0LCAib3BlbkludmVyc2VfcmVwZXRpdGlvbjAiOiAzNSwgIm9wZW5JbnZlcnNlX29wdGlvbjAiOiAzNiwgIm9wZW5JbnZlcnNlX29wdGlvbjEiOiAzNywgIm9wZW5JbnZlcnNlQ2hhaW4iOiAzOCwgIk9QRU5fSU5WRVJTRV9DSEFJTiI6IDM5LCAib3BlbkludmVyc2VDaGFpbl9yZXBldGl0aW9uMCI6IDQwLCAib3BlbkludmVyc2VDaGFpbl9vcHRpb24wIjogNDEsICJvcGVuSW52ZXJzZUNoYWluX29wdGlvbjEiOiA0MiwgImludmVyc2VBbmRQcm9ncmFtIjogNDMsICJJTlZFUlNFIjogNDQsICJpbnZlcnNlQ2hhaW4iOiA0NSwgImludmVyc2VDaGFpbl9vcHRpb24wIjogNDYsICJPUEVOX0VOREJMT0NLIjogNDcsICJPUEVOIjogNDgsICJtdXN0YWNoZV9yZXBldGl0aW9uMCI6IDQ5LCAibXVzdGFjaGVfb3B0aW9uMCI6IDUwLCAiT1BFTl9VTkVTQ0FQRUQiOiA1MSwgIm11c3RhY2hlX3JlcGV0aXRpb24xIjogNTIsICJtdXN0YWNoZV9vcHRpb24xIjogNTMsICJDTE9TRV9VTkVTQ0FQRUQiOiA1NCwgIk9QRU5fUEFSVElBTCI6IDU1LCAicGFydGlhbE5hbWUiOiA1NiwgInBhcnRpYWxfcmVwZXRpdGlvbjAiOiA1NywgInBhcnRpYWxfb3B0aW9uMCI6IDU4LCAib3BlblBhcnRpYWxCbG9jayI6IDU5LCAiT1BFTl9QQVJUSUFMX0JMT0NLIjogNjAsICJvcGVuUGFydGlhbEJsb2NrX3JlcGV0aXRpb24wIjogNjEsICJvcGVuUGFydGlhbEJsb2NrX29wdGlvbjAiOiA2MiwgInBhcmFtIjogNjMsICJzZXhwciI6IDY0LCAiT1BFTl9TRVhQUiI6IDY1LCAic2V4cHJfcmVwZXRpdGlvbjAiOiA2NiwgInNleHByX29wdGlvbjAiOiA2NywgIkNMT1NFX1NFWFBSIjogNjgsICJoYXNoIjogNjksICJoYXNoX3JlcGV0aXRpb25fcGx1czAiOiA3MCwgImhhc2hTZWdtZW50IjogNzEsICJJRCI6IDcyLCAiRVFVQUxTIjogNzMsICJibG9ja1BhcmFtcyI6IDc0LCAiT1BFTl9CTE9DS19QQVJBTVMiOiA3NSwgImJsb2NrUGFyYW1zX3JlcGV0aXRpb25fcGx1czAiOiA3NiwgIkNMT1NFX0JMT0NLX1BBUkFNUyI6IDc3LCAicGF0aCI6IDc4LCAiZGF0YU5hbWUiOiA3OSwgIlNUUklORyI6IDgwLCAiTlVNQkVSIjogODEsICJCT09MRUFOIjogODIsICJVTkRFRklORUQiOiA4MywgIk5VTEwiOiA4NCwgIkRBVEEiOiA4NSwgInBhdGhTZWdtZW50cyI6IDg2LCAiU0VQIjogODcsICIkYWNjZXB0IjogMCwgIiRlbmQiOiAxIH0sCgkJICAgICAgICB0ZXJtaW5hbHNfOiB7IDI6ICJlcnJvciIsIDU6ICJFT0YiLCAxNDogIkNPTU1FTlQiLCAxNTogIkNPTlRFTlQiLCAxODogIkVORF9SQVdfQkxPQ0siLCAxOTogIk9QRU5fUkFXX0JMT0NLIiwgMjM6ICJDTE9TRV9SQVdfQkxPQ0siLCAyOTogIk9QRU5fQkxPQ0siLCAzMzogIkNMT1NFIiwgMzQ6ICJPUEVOX0lOVkVSU0UiLCAzOTogIk9QRU5fSU5WRVJTRV9DSEFJTiIsIDQ0OiAiSU5WRVJTRSIsIDQ3OiAiT1BFTl9FTkRCTE9DSyIsIDQ4OiAiT1BFTiIsIDUxOiAiT1BFTl9VTkVTQ0FQRUQiLCA1NDogIkNMT1NFX1VORVNDQVBFRCIsIDU1OiAiT1BFTl9QQVJUSUFMIiwgNjA6ICJPUEVOX1BBUlRJQUxfQkxPQ0siLCA2NTogIk9QRU5fU0VYUFIiLCA2ODogIkNMT1NFX1NFWFBSIiwgNzI6ICJJRCIsIDczOiAiRVFVQUxTIiwgNzU6ICJPUEVOX0JMT0NLX1BBUkFNUyIsIDc3OiAiQ0xPU0VfQkxPQ0tfUEFSQU1TIiwgODA6ICJTVFJJTkciLCA4MTogIk5VTUJFUiIsIDgyOiAiQk9PTEVBTiIsIDgzOiAiVU5ERUZJTkVEIiwgODQ6ICJOVUxMIiwgODU6ICJEQVRBIiwgODc6ICJTRVAiIH0sCgkJICAgICAgICBwcm9kdWN0aW9uc186IFswLCBbMywgMl0sIFs0LCAxXSwgWzcsIDFdLCBbNywgMV0sIFs3LCAxXSwgWzcsIDFdLCBbNywgMV0sIFs3LCAxXSwgWzcsIDFdLCBbMTMsIDFdLCBbMTAsIDNdLCBbMTYsIDVdLCBbOSwgNF0sIFs5LCA0XSwgWzI0LCA2XSwgWzI3LCA2XSwgWzM4LCA2XSwgWzQzLCAyXSwgWzQ1LCAzXSwgWzQ1LCAxXSwgWzI2LCAzXSwgWzgsIDVdLCBbOCwgNV0sIFsxMSwgNV0sIFsxMiwgM10sIFs1OSwgNV0sIFs2MywgMV0sIFs2MywgMV0sIFs2NCwgNV0sIFs2OSwgMV0sIFs3MSwgM10sIFs3NCwgM10sIFsyMCwgMV0sIFsyMCwgMV0sIFsyMCwgMV0sIFsyMCwgMV0sIFsyMCwgMV0sIFsyMCwgMV0sIFsyMCwgMV0sIFs1NiwgMV0sIFs1NiwgMV0sIFs3OSwgMl0sIFs3OCwgMV0sIFs4NiwgM10sIFs4NiwgMV0sIFs2LCAwXSwgWzYsIDJdLCBbMTcsIDFdLCBbMTcsIDJdLCBbMjEsIDBdLCBbMjEsIDJdLCBbMjIsIDBdLCBbMjIsIDFdLCBbMjUsIDBdLCBbMjUsIDFdLCBbMjgsIDBdLCBbMjgsIDFdLCBbMzAsIDBdLCBbMzAsIDJdLCBbMzEsIDBdLCBbMzEsIDFdLCBbMzIsIDBdLCBbMzIsIDFdLCBbMzUsIDBdLCBbMzUsIDJdLCBbMzYsIDBdLCBbMzYsIDFdLCBbMzcsIDBdLCBbMzcsIDFdLCBbNDAsIDBdLCBbNDAsIDJdLCBbNDEsIDBdLCBbNDEsIDFdLCBbNDIsIDBdLCBbNDIsIDFdLCBbNDYsIDBdLCBbNDYsIDFdLCBbNDksIDBdLCBbNDksIDJdLCBbNTAsIDBdLCBbNTAsIDFdLCBbNTIsIDBdLCBbNTIsIDJdLCBbNTMsIDBdLCBbNTMsIDFdLCBbNTcsIDBdLCBbNTcsIDJdLCBbNTgsIDBdLCBbNTgsIDFdLCBbNjEsIDBdLCBbNjEsIDJdLCBbNjIsIDBdLCBbNjIsIDFdLCBbNjYsIDBdLCBbNjYsIDJdLCBbNjcsIDBdLCBbNjcsIDFdLCBbNzAsIDFdLCBbNzAsIDJdLCBbNzYsIDFdLCBbNzYsIDJdXSwKCQkgICAgICAgIHBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uIGFub255bW91cyh5eXRleHQsIHl5bGVuZywgeXlsaW5lbm8sIHl5LCB5eXN0YXRlLCAkJCwgXyQKCQkgICAgICAgIC8qKi8pIHsKCgkJICAgICAgICAgICAgdmFyICQwID0gJCQubGVuZ3RoIC0gMTsKCQkgICAgICAgICAgICBzd2l0Y2ggKHl5c3RhdGUpIHsKCQkgICAgICAgICAgICAgICAgY2FzZSAxOgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQkWyQwIC0gMV07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geXkucHJlcGFyZVByb2dyYW0oJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSAkJFskMF07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gJCRbJDBdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNToKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9ICQkWyQwXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDY6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSAkJFskMF07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA3OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gJCRbJDBdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgODoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9ICQkWyQwXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDk6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0NvbW1lbnRTdGF0ZW1lbnQnLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB5eS5zdHJpcENvbW1lbnQoJCRbJDBdKSwKCQkgICAgICAgICAgICAgICAgICAgICAgICBzdHJpcDogeXkuc3RyaXBGbGFncygkJFskMF0sICQkWyQwXSksCgkJICAgICAgICAgICAgICAgICAgICAgICAgbG9jOiB5eS5sb2NJbmZvKHRoaXMuXyQpCgkJICAgICAgICAgICAgICAgICAgICB9OwoKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDEwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gewoJCSAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdDb250ZW50U3RhdGVtZW50JywKCQkgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbDogJCRbJDBdLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAkJFskMF0sCgkJICAgICAgICAgICAgICAgICAgICAgICAgbG9jOiB5eS5sb2NJbmZvKHRoaXMuXyQpCgkJICAgICAgICAgICAgICAgICAgICB9OwoKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDExOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geXkucHJlcGFyZVJhd0Jsb2NrKCQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSwgdGhpcy5fJCk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxMjoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgcGF0aDogJCRbJDAgLSAzXSwgcGFyYW1zOiAkJFskMCAtIDJdLCBoYXNoOiAkJFskMCAtIDFdIH07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxMzoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHl5LnByZXBhcmVCbG9jaygkJFskMCAtIDNdLCAkJFskMCAtIDJdLCAkJFskMCAtIDFdLCAkJFskMF0sIGZhbHNlLCB0aGlzLl8kKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDE0OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geXkucHJlcGFyZUJsb2NrKCQkWyQwIC0gM10sICQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSwgdHJ1ZSwgdGhpcy5fJCk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxNToKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgb3BlbjogJCRbJDAgLSA1XSwgcGF0aDogJCRbJDAgLSA0XSwgcGFyYW1zOiAkJFskMCAtIDNdLCBoYXNoOiAkJFskMCAtIDJdLCBibG9ja1BhcmFtczogJCRbJDAgLSAxXSwgc3RyaXA6IHl5LnN0cmlwRmxhZ3MoJCRbJDAgLSA1XSwgJCRbJDBdKSB9OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTY6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB7IHBhdGg6ICQkWyQwIC0gNF0sIHBhcmFtczogJCRbJDAgLSAzXSwgaGFzaDogJCRbJDAgLSAyXSwgYmxvY2tQYXJhbXM6ICQkWyQwIC0gMV0sIHN0cmlwOiB5eS5zdHJpcEZsYWdzKCQkWyQwIC0gNV0sICQkWyQwXSkgfTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDE3OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyBwYXRoOiAkJFskMCAtIDRdLCBwYXJhbXM6ICQkWyQwIC0gM10sIGhhc2g6ICQkWyQwIC0gMl0sIGJsb2NrUGFyYW1zOiAkJFskMCAtIDFdLCBzdHJpcDogeXkuc3RyaXBGbGFncygkJFskMCAtIDVdLCAkJFskMF0pIH07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxODoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgc3RyaXA6IHl5LnN0cmlwRmxhZ3MoJCRbJDAgLSAxXSwgJCRbJDAgLSAxXSksIHByb2dyYW06ICQkWyQwXSB9OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTk6CgkJICAgICAgICAgICAgICAgICAgICB2YXIgaW52ZXJzZSA9IHl5LnByZXBhcmVCbG9jaygkJFskMCAtIDJdLCAkJFskMCAtIDFdLCAkJFskMF0sICQkWyQwXSwgZmFsc2UsIHRoaXMuXyQpLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0gPSB5eS5wcmVwYXJlUHJvZ3JhbShbaW52ZXJzZV0sICQkWyQwIC0gMV0ubG9jKTsKCQkgICAgICAgICAgICAgICAgICAgIHByb2dyYW0uY2hhaW5lZCA9IHRydWU7CgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyBzdHJpcDogJCRbJDAgLSAyXS5zdHJpcCwgcHJvZ3JhbTogcHJvZ3JhbSwgY2hhaW46IHRydWUgfTsKCgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyMDoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9ICQkWyQwXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDIxOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyBwYXRoOiAkJFskMCAtIDFdLCBzdHJpcDogeXkuc3RyaXBGbGFncygkJFskMCAtIDJdLCAkJFskMF0pIH07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyMjoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHl5LnByZXBhcmVNdXN0YWNoZSgkJFskMCAtIDNdLCAkJFskMCAtIDJdLCAkJFskMCAtIDFdLCAkJFskMCAtIDRdLCB5eS5zdHJpcEZsYWdzKCQkWyQwIC0gNF0sICQkWyQwXSksIHRoaXMuXyQpOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjM6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB5eS5wcmVwYXJlTXVzdGFjaGUoJCRbJDAgLSAzXSwgJCRbJDAgLSAyXSwgJCRbJDAgLSAxXSwgJCRbJDAgLSA0XSwgeXkuc3RyaXBGbGFncygkJFskMCAtIDRdLCAkJFskMF0pLCB0aGlzLl8kKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDI0OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gewoJCSAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQYXJ0aWFsU3RhdGVtZW50JywKCQkgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAkJFskMCAtIDNdLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogJCRbJDAgLSAyXSwKCQkgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiAkJFskMCAtIDFdLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIGluZGVudDogJycsCgkJICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXA6IHl5LnN0cmlwRmxhZ3MoJCRbJDAgLSA0XSwgJCRbJDBdKSwKCQkgICAgICAgICAgICAgICAgICAgICAgICBsb2M6IHl5LmxvY0luZm8odGhpcy5fJCkKCQkgICAgICAgICAgICAgICAgICAgIH07CgoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjU6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB5eS5wcmVwYXJlUGFydGlhbEJsb2NrKCQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSwgdGhpcy5fJCk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyNjoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgcGF0aDogJCRbJDAgLSAzXSwgcGFyYW1zOiAkJFskMCAtIDJdLCBoYXNoOiAkJFskMCAtIDFdLCBzdHJpcDogeXkuc3RyaXBGbGFncygkJFskMCAtIDRdLCAkJFskMF0pIH07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyNzoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9ICQkWyQwXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDI4OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gJCRbJDBdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjk6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1N1YkV4cHJlc3Npb24nLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ICQkWyQwIC0gM10sCgkJICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiAkJFskMCAtIDJdLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6ICQkWyQwIC0gMV0sCgkJICAgICAgICAgICAgICAgICAgICAgICAgbG9jOiB5eS5sb2NJbmZvKHRoaXMuXyQpCgkJICAgICAgICAgICAgICAgICAgICB9OwoKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyB0eXBlOiAnSGFzaCcsIHBhaXJzOiAkJFskMF0sIGxvYzogeXkubG9jSW5mbyh0aGlzLl8kKSB9OwoJCSAg", "base64"));
  res.write(new Buffer("ICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMzE6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB7IHR5cGU6ICdIYXNoUGFpcicsIGtleTogeXkuaWQoJCRbJDAgLSAyXSksIHZhbHVlOiAkJFskMF0sIGxvYzogeXkubG9jSW5mbyh0aGlzLl8kKSB9OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMzI6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSB5eS5pZCgkJFskMCAtIDFdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMzOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gJCRbJDBdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMzQ6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSAkJFskMF07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAzNToKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogJ1N0cmluZ0xpdGVyYWwnLCB2YWx1ZTogJCRbJDBdLCBvcmlnaW5hbDogJCRbJDBdLCBsb2M6IHl5LmxvY0luZm8odGhpcy5fJCkgfTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM2OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyB0eXBlOiAnTnVtYmVyTGl0ZXJhbCcsIHZhbHVlOiBOdW1iZXIoJCRbJDBdKSwgb3JpZ2luYWw6IE51bWJlcigkJFskMF0pLCBsb2M6IHl5LmxvY0luZm8odGhpcy5fJCkgfTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM3OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyB0eXBlOiAnQm9vbGVhbkxpdGVyYWwnLCB2YWx1ZTogJCRbJDBdID09PSAndHJ1ZScsIG9yaWdpbmFsOiAkJFskMF0gPT09ICd0cnVlJywgbG9jOiB5eS5sb2NJbmZvKHRoaXMuXyQpIH07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAzODoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogJ1VuZGVmaW5lZExpdGVyYWwnLCBvcmlnaW5hbDogdW5kZWZpbmVkLCB2YWx1ZTogdW5kZWZpbmVkLCBsb2M6IHl5LmxvY0luZm8odGhpcy5fJCkgfTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM5OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geyB0eXBlOiAnTnVsbExpdGVyYWwnLCBvcmlnaW5hbDogbnVsbCwgdmFsdWU6IG51bGwsIGxvYzogeXkubG9jSW5mbyh0aGlzLl8kKSB9OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDA6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSAkJFskMF07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0MToKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9ICQkWyQwXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDQyOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geXkucHJlcGFyZVBhdGgodHJ1ZSwgJCRbJDBdLCB0aGlzLl8kKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDQzOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0geXkucHJlcGFyZVBhdGgoZmFsc2UsICQkWyQwXSwgdGhpcy5fJCk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0NDoKCQkgICAgICAgICAgICAgICAgICAgICQkWyQwIC0gMl0ucHVzaCh7IHBhcnQ6IHl5LmlkKCQkWyQwXSksIG9yaWdpbmFsOiAkJFskMF0sIHNlcGFyYXRvcjogJCRbJDAgLSAxXSB9KTt0aGlzLiQgPSAkJFskMCAtIDJdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDU6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBbeyBwYXJ0OiB5eS5pZCgkJFskMF0pLCBvcmlnaW5hbDogJCRbJDBdIH1dOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDY6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBbXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDQ3OgoJCSAgICAgICAgICAgICAgICAgICAgJCRbJDAgLSAxXS5wdXNoKCQkWyQwXSk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0ODoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IFskJFskMF1dOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDk6CgkJICAgICAgICAgICAgICAgICAgICAkJFskMCAtIDFdLnB1c2goJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDUwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gW107CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA1MToKCQkgICAgICAgICAgICAgICAgICAgICQkWyQwIC0gMV0ucHVzaCgkJFskMF0pOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNTg6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBbXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDU5OgoJCSAgICAgICAgICAgICAgICAgICAgJCRbJDAgLSAxXS5wdXNoKCQkWyQwXSk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA2NDoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IFtdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNjU6CgkJICAgICAgICAgICAgICAgICAgICAkJFskMCAtIDFdLnB1c2goJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDcwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gW107CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA3MToKCQkgICAgICAgICAgICAgICAgICAgICQkWyQwIC0gMV0ucHVzaCgkJFskMF0pOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNzg6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBbXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDc5OgoJCSAgICAgICAgICAgICAgICAgICAgJCRbJDAgLSAxXS5wdXNoKCQkWyQwXSk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA4MjoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IFtdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgODM6CgkJICAgICAgICAgICAgICAgICAgICAkJFskMCAtIDFdLnB1c2goJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDg2OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gW107CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA4NzoKCQkgICAgICAgICAgICAgICAgICAgICQkWyQwIC0gMV0ucHVzaCgkJFskMF0pOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgOTA6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBbXTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDkxOgoJCSAgICAgICAgICAgICAgICAgICAgJCRbJDAgLSAxXS5wdXNoKCQkWyQwXSk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA5NDoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMuJCA9IFtdOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgOTU6CgkJICAgICAgICAgICAgICAgICAgICAkJFskMCAtIDFdLnB1c2goJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDk4OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gWyQkWyQwXV07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA5OToKCQkgICAgICAgICAgICAgICAgICAgICQkWyQwIC0gMV0ucHVzaCgkJFskMF0pOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTAwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy4kID0gWyQkWyQwXV07CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxMDE6CgkJICAgICAgICAgICAgICAgICAgICAkJFskMCAtIDFdLnB1c2goJCRbJDBdKTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgIH0KCQkgICAgICAgIH0sCgkJICAgICAgICB0YWJsZTogW3sgMzogMSwgNDogMiwgNTogWzIsIDQ2XSwgNjogMywgMTQ6IFsyLCA0Nl0sIDE1OiBbMiwgNDZdLCAxOTogWzIsIDQ2XSwgMjk6IFsyLCA0Nl0sIDM0OiBbMiwgNDZdLCA0ODogWzIsIDQ2XSwgNTE6IFsyLCA0Nl0sIDU1OiBbMiwgNDZdLCA2MDogWzIsIDQ2XSB9LCB7IDE6IFszXSB9LCB7IDU6IFsxLCA0XSB9LCB7IDU6IFsyLCAyXSwgNzogNSwgODogNiwgOTogNywgMTA6IDgsIDExOiA5LCAxMjogMTAsIDEzOiAxMSwgMTQ6IFsxLCAxMl0sIDE1OiBbMSwgMjBdLCAxNjogMTcsIDE5OiBbMSwgMjNdLCAyNDogMTUsIDI3OiAxNiwgMjk6IFsxLCAyMV0sIDM0OiBbMSwgMjJdLCAzOTogWzIsIDJdLCA0NDogWzIsIDJdLCA0NzogWzIsIDJdLCA0ODogWzEsIDEzXSwgNTE6IFsxLCAxNF0sIDU1OiBbMSwgMThdLCA1OTogMTksIDYwOiBbMSwgMjRdIH0sIHsgMTogWzIsIDFdIH0sIHsgNTogWzIsIDQ3XSwgMTQ6IFsyLCA0N10sIDE1OiBbMiwgNDddLCAxOTogWzIsIDQ3XSwgMjk6IFsyLCA0N10sIDM0OiBbMiwgNDddLCAzOTogWzIsIDQ3XSwgNDQ6IFsyLCA0N10sIDQ3OiBbMiwgNDddLCA0ODogWzIsIDQ3XSwgNTE6IFsyLCA0N10sIDU1OiBbMiwgNDddLCA2MDogWzIsIDQ3XSB9LCB7IDU6IFsyLCAzXSwgMTQ6IFsyLCAzXSwgMTU6IFsyLCAzXSwgMTk6IFsyLCAzXSwgMjk6IFsyLCAzXSwgMzQ6IFsyLCAzXSwgMzk6IFsyLCAzXSwgNDQ6IFsyLCAzXSwgNDc6IFsyLCAzXSwgNDg6IFsyLCAzXSwgNTE6IFsyLCAzXSwgNTU6IFsyLCAzXSwgNjA6IFsyLCAzXSB9LCB7IDU6IFsyLCA0XSwgMTQ6IFsyLCA0XSwgMTU6IFsyLCA0XSwgMTk6IFsyLCA0XSwgMjk6IFsyLCA0XSwgMzQ6IFsyLCA0XSwgMzk6IFsyLCA0XSwgNDQ6IFsyLCA0XSwgNDc6IFsyLCA0XSwgNDg6IFsyLCA0XSwgNTE6IFsyLCA0XSwgNTU6IFsyLCA0XSwgNjA6IFsyLCA0XSB9LCB7IDU6IFsyLCA1XSwgMTQ6IFsyLCA1XSwgMTU6IFsyLCA1XSwgMTk6IFsyLCA1XSwgMjk6IFsyLCA1XSwgMzQ6IFsyLCA1XSwgMzk6IFsyLCA1XSwgNDQ6IFsyLCA1XSwgNDc6IFsyLCA1XSwgNDg6IFsyLCA1XSwgNTE6IFsyLCA1XSwgNTU6IFsyLCA1XSwgNjA6IFsyLCA1XSB9LCB7IDU6IFsyLCA2XSwgMTQ6IFsyLCA2XSwgMTU6IFsyLCA2XSwgMTk6IFsyLCA2XSwgMjk6IFsyLCA2XSwgMzQ6IFsyLCA2XSwgMzk6IFsyLCA2XSwgNDQ6IFsyLCA2XSwgNDc6IFsyLCA2XSwgNDg6IFsyLCA2XSwgNTE6IFsyLCA2XSwgNTU6IFsyLCA2XSwgNjA6IFsyLCA2XSB9LCB7IDU6IFsyLCA3XSwgMTQ6IFsyLCA3XSwgMTU6IFsyLCA3XSwgMTk6IFsyLCA3XSwgMjk6IFsyLCA3XSwgMzQ6IFsyLCA3XSwgMzk6IFsyLCA3XSwgNDQ6IFsyLCA3XSwgNDc6IFsyLCA3XSwgNDg6IFsyLCA3XSwgNTE6IFsyLCA3XSwgNTU6IFsyLCA3XSwgNjA6IFsyLCA3XSB9LCB7IDU6IFsyLCA4XSwgMTQ6IFsyLCA4XSwgMTU6IFsyLCA4XSwgMTk6IFsyLCA4XSwgMjk6IFsyLCA4XSwgMzQ6IFsyLCA4XSwgMzk6IFsyLCA4XSwgNDQ6IFsyLCA4XSwgNDc6IFsyLCA4XSwgNDg6IFsyLCA4XSwgNTE6IFsyLCA4XSwgNTU6IFsyLCA4XSwgNjA6IFsyLCA4XSB9LCB7IDU6IFsyLCA5XSwgMTQ6IFsyLCA5XSwgMTU6IFsyLCA5XSwgMTk6IFsyLCA5XSwgMjk6IFsyLCA5XSwgMzQ6IFsyLCA5XSwgMzk6IFsyLCA5XSwgNDQ6IFsyLCA5XSwgNDc6IFsyLCA5XSwgNDg6IFsyLCA5XSwgNTE6IFsyLCA5XSwgNTU6IFsyLCA5XSwgNjA6IFsyLCA5XSB9LCB7IDIwOiAyNSwgNzI6IFsxLCAzNV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyAyMDogMzYsIDcyOiBbMSwgMzVdLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgNDogMzcsIDY6IDMsIDE0OiBbMiwgNDZdLCAxNTogWzIsIDQ2XSwgMTk6IFsyLCA0Nl0sIDI5OiBbMiwgNDZdLCAzNDogWzIsIDQ2XSwgMzk6IFsyLCA0Nl0sIDQ0OiBbMiwgNDZdLCA0NzogWzIsIDQ2XSwgNDg6IFsyLCA0Nl0sIDUxOiBbMiwgNDZdLCA1NTogWzIsIDQ2XSwgNjA6IFsyLCA0Nl0gfSwgeyA0OiAzOCwgNjogMywgMTQ6IFsyLCA0Nl0sIDE1OiBbMiwgNDZdLCAxOTogWzIsIDQ2XSwgMjk6IFsyLCA0Nl0sIDM0OiBbMiwgNDZdLCA0NDogWzIsIDQ2XSwgNDc6IFsyLCA0Nl0sIDQ4OiBbMiwgNDZdLCA1MTogWzIsIDQ2XSwgNTU6IFsyLCA0Nl0sIDYwOiBbMiwgNDZdIH0sIHsgMTM6IDQwLCAxNTogWzEsIDIwXSwgMTc6IDM5IH0sIHsgMjA6IDQyLCA1NjogNDEsIDY0OiA0MywgNjU6IFsxLCA0NF0sIDcyOiBbMSwgMzVdLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgOA==", "base64"));
  res.write(new Buffer("NjogMzMgfSwgeyA0OiA0NSwgNjogMywgMTQ6IFsyLCA0Nl0sIDE1OiBbMiwgNDZdLCAxOTogWzIsIDQ2XSwgMjk6IFsyLCA0Nl0sIDM0OiBbMiwgNDZdLCA0NzogWzIsIDQ2XSwgNDg6IFsyLCA0Nl0sIDUxOiBbMiwgNDZdLCA1NTogWzIsIDQ2XSwgNjA6IFsyLCA0Nl0gfSwgeyA1OiBbMiwgMTBdLCAxNDogWzIsIDEwXSwgMTU6IFsyLCAxMF0sIDE4OiBbMiwgMTBdLCAxOTogWzIsIDEwXSwgMjk6IFsyLCAxMF0sIDM0OiBbMiwgMTBdLCAzOTogWzIsIDEwXSwgNDQ6IFsyLCAxMF0sIDQ3OiBbMiwgMTBdLCA0ODogWzIsIDEwXSwgNTE6IFsyLCAxMF0sIDU1OiBbMiwgMTBdLCA2MDogWzIsIDEwXSB9LCB7IDIwOiA0NiwgNzI6IFsxLCAzNV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyAyMDogNDcsIDcyOiBbMSwgMzVdLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgMjA6IDQ4LCA3MjogWzEsIDM1XSwgNzg6IDI2LCA3OTogMjcsIDgwOiBbMSwgMjhdLCA4MTogWzEsIDI5XSwgODI6IFsxLCAzMF0sIDgzOiBbMSwgMzFdLCA4NDogWzEsIDMyXSwgODU6IFsxLCAzNF0sIDg2OiAzMyB9LCB7IDIwOiA0MiwgNTY6IDQ5LCA2NDogNDMsIDY1OiBbMSwgNDRdLCA3MjogWzEsIDM1XSwgNzg6IDI2LCA3OTogMjcsIDgwOiBbMSwgMjhdLCA4MTogWzEsIDI5XSwgODI6IFsxLCAzMF0sIDgzOiBbMSwgMzFdLCA4NDogWzEsIDMyXSwgODU6IFsxLCAzNF0sIDg2OiAzMyB9LCB7IDMzOiBbMiwgNzhdLCA0OTogNTAsIDY1OiBbMiwgNzhdLCA3MjogWzIsIDc4XSwgODA6IFsyLCA3OF0sIDgxOiBbMiwgNzhdLCA4MjogWzIsIDc4XSwgODM6IFsyLCA3OF0sIDg0OiBbMiwgNzhdLCA4NTogWzIsIDc4XSB9LCB7IDIzOiBbMiwgMzNdLCAzMzogWzIsIDMzXSwgNTQ6IFsyLCAzM10sIDY1OiBbMiwgMzNdLCA2ODogWzIsIDMzXSwgNzI6IFsyLCAzM10sIDc1OiBbMiwgMzNdLCA4MDogWzIsIDMzXSwgODE6IFsyLCAzM10sIDgyOiBbMiwgMzNdLCA4MzogWzIsIDMzXSwgODQ6IFsyLCAzM10sIDg1OiBbMiwgMzNdIH0sIHsgMjM6IFsyLCAzNF0sIDMzOiBbMiwgMzRdLCA1NDogWzIsIDM0XSwgNjU6IFsyLCAzNF0sIDY4OiBbMiwgMzRdLCA3MjogWzIsIDM0XSwgNzU6IFsyLCAzNF0sIDgwOiBbMiwgMzRdLCA4MTogWzIsIDM0XSwgODI6IFsyLCAzNF0sIDgzOiBbMiwgMzRdLCA4NDogWzIsIDM0XSwgODU6IFsyLCAzNF0gfSwgeyAyMzogWzIsIDM1XSwgMzM6IFsyLCAzNV0sIDU0OiBbMiwgMzVdLCA2NTogWzIsIDM1XSwgNjg6IFsyLCAzNV0sIDcyOiBbMiwgMzVdLCA3NTogWzIsIDM1XSwgODA6IFsyLCAzNV0sIDgxOiBbMiwgMzVdLCA4MjogWzIsIDM1XSwgODM6IFsyLCAzNV0sIDg0OiBbMiwgMzVdLCA4NTogWzIsIDM1XSB9LCB7IDIzOiBbMiwgMzZdLCAzMzogWzIsIDM2XSwgNTQ6IFsyLCAzNl0sIDY1OiBbMiwgMzZdLCA2ODogWzIsIDM2XSwgNzI6IFsyLCAzNl0sIDc1OiBbMiwgMzZdLCA4MDogWzIsIDM2XSwgODE6IFsyLCAzNl0sIDgyOiBbMiwgMzZdLCA4MzogWzIsIDM2XSwgODQ6IFsyLCAzNl0sIDg1OiBbMiwgMzZdIH0sIHsgMjM6IFsyLCAzN10sIDMzOiBbMiwgMzddLCA1NDogWzIsIDM3XSwgNjU6IFsyLCAzN10sIDY4OiBbMiwgMzddLCA3MjogWzIsIDM3XSwgNzU6IFsyLCAzN10sIDgwOiBbMiwgMzddLCA4MTogWzIsIDM3XSwgODI6IFsyLCAzN10sIDgzOiBbMiwgMzddLCA4NDogWzIsIDM3XSwgODU6IFsyLCAzN10gfSwgeyAyMzogWzIsIDM4XSwgMzM6IFsyLCAzOF0sIDU0OiBbMiwgMzhdLCA2NTogWzIsIDM4XSwgNjg6IFsyLCAzOF0sIDcyOiBbMiwgMzhdLCA3NTogWzIsIDM4XSwgODA6IFsyLCAzOF0sIDgxOiBbMiwgMzhdLCA4MjogWzIsIDM4XSwgODM6IFsyLCAzOF0sIDg0OiBbMiwgMzhdLCA4NTogWzIsIDM4XSB9LCB7IDIzOiBbMiwgMzldLCAzMzogWzIsIDM5XSwgNTQ6IFsyLCAzOV0sIDY1OiBbMiwgMzldLCA2ODogWzIsIDM5XSwgNzI6IFsyLCAzOV0sIDc1OiBbMiwgMzldLCA4MDogWzIsIDM5XSwgODE6IFsyLCAzOV0sIDgyOiBbMiwgMzldLCA4MzogWzIsIDM5XSwgODQ6IFsyLCAzOV0sIDg1OiBbMiwgMzldIH0sIHsgMjM6IFsyLCA0M10sIDMzOiBbMiwgNDNdLCA1NDogWzIsIDQzXSwgNjU6IFsyLCA0M10sIDY4OiBbMiwgNDNdLCA3MjogWzIsIDQzXSwgNzU6IFsyLCA0M10sIDgwOiBbMiwgNDNdLCA4MTogWzIsIDQzXSwgODI6IFsyLCA0M10sIDgzOiBbMiwgNDNdLCA4NDogWzIsIDQzXSwgODU6IFsyLCA0M10sIDg3OiBbMSwgNTFdIH0sIHsgNzI6IFsxLCAzNV0sIDg2OiA1MiB9LCB7IDIzOiBbMiwgNDVdLCAzMzogWzIsIDQ1XSwgNTQ6IFsyLCA0NV0sIDY1OiBbMiwgNDVdLCA2ODogWzIsIDQ1XSwgNzI6IFsyLCA0NV0sIDc1OiBbMiwgNDVdLCA4MDogWzIsIDQ1XSwgODE6IFsyLCA0NV0sIDgyOiBbMiwgNDVdLCA4MzogWzIsIDQ1XSwgODQ6IFsyLCA0NV0sIDg1OiBbMiwgNDVdLCA4NzogWzIsIDQ1XSB9LCB7IDUyOiA1MywgNTQ6IFsyLCA4Ml0sIDY1OiBbMiwgODJdLCA3MjogWzIsIDgyXSwgODA6IFsyLCA4Ml0sIDgxOiBbMiwgODJdLCA4MjogWzIsIDgyXSwgODM6IFsyLCA4Ml0sIDg0OiBbMiwgODJdLCA4NTogWzIsIDgyXSB9LCB7IDI1OiA1NCwgMzg6IDU2LCAzOTogWzEsIDU4XSwgNDM6IDU3LCA0NDogWzEsIDU5XSwgNDU6IDU1LCA0NzogWzIsIDU0XSB9LCB7IDI4OiA2MCwgNDM6IDYxLCA0NDogWzEsIDU5XSwgNDc6IFsyLCA1Nl0gfSwgeyAxMzogNjMsIDE1OiBbMSwgMjBdLCAxODogWzEsIA==", "base64"));
  res.write(new Buffer("NjJdIH0sIHsgMTU6IFsyLCA0OF0sIDE4OiBbMiwgNDhdIH0sIHsgMzM6IFsyLCA4Nl0sIDU3OiA2NCwgNjU6IFsyLCA4Nl0sIDcyOiBbMiwgODZdLCA4MDogWzIsIDg2XSwgODE6IFsyLCA4Nl0sIDgyOiBbMiwgODZdLCA4MzogWzIsIDg2XSwgODQ6IFsyLCA4Nl0sIDg1OiBbMiwgODZdIH0sIHsgMzM6IFsyLCA0MF0sIDY1OiBbMiwgNDBdLCA3MjogWzIsIDQwXSwgODA6IFsyLCA0MF0sIDgxOiBbMiwgNDBdLCA4MjogWzIsIDQwXSwgODM6IFsyLCA0MF0sIDg0OiBbMiwgNDBdLCA4NTogWzIsIDQwXSB9LCB7IDMzOiBbMiwgNDFdLCA2NTogWzIsIDQxXSwgNzI6IFsyLCA0MV0sIDgwOiBbMiwgNDFdLCA4MTogWzIsIDQxXSwgODI6IFsyLCA0MV0sIDgzOiBbMiwgNDFdLCA4NDogWzIsIDQxXSwgODU6IFsyLCA0MV0gfSwgeyAyMDogNjUsIDcyOiBbMSwgMzVdLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgMjY6IDY2LCA0NzogWzEsIDY3XSB9LCB7IDMwOiA2OCwgMzM6IFsyLCA1OF0sIDY1OiBbMiwgNThdLCA3MjogWzIsIDU4XSwgNzU6IFsyLCA1OF0sIDgwOiBbMiwgNThdLCA4MTogWzIsIDU4XSwgODI6IFsyLCA1OF0sIDgzOiBbMiwgNThdLCA4NDogWzIsIDU4XSwgODU6IFsyLCA1OF0gfSwgeyAzMzogWzIsIDY0XSwgMzU6IDY5LCA2NTogWzIsIDY0XSwgNzI6IFsyLCA2NF0sIDc1OiBbMiwgNjRdLCA4MDogWzIsIDY0XSwgODE6IFsyLCA2NF0sIDgyOiBbMiwgNjRdLCA4MzogWzIsIDY0XSwgODQ6IFsyLCA2NF0sIDg1OiBbMiwgNjRdIH0sIHsgMjE6IDcwLCAyMzogWzIsIDUwXSwgNjU6IFsyLCA1MF0sIDcyOiBbMiwgNTBdLCA4MDogWzIsIDUwXSwgODE6IFsyLCA1MF0sIDgyOiBbMiwgNTBdLCA4MzogWzIsIDUwXSwgODQ6IFsyLCA1MF0sIDg1OiBbMiwgNTBdIH0sIHsgMzM6IFsyLCA5MF0sIDYxOiA3MSwgNjU6IFsyLCA5MF0sIDcyOiBbMiwgOTBdLCA4MDogWzIsIDkwXSwgODE6IFsyLCA5MF0sIDgyOiBbMiwgOTBdLCA4MzogWzIsIDkwXSwgODQ6IFsyLCA5MF0sIDg1OiBbMiwgOTBdIH0sIHsgMjA6IDc1LCAzMzogWzIsIDgwXSwgNTA6IDcyLCA2MzogNzMsIDY0OiA3NiwgNjU6IFsxLCA0NF0sIDY5OiA3NCwgNzA6IDc3LCA3MTogNzgsIDcyOiBbMSwgNzldLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgNzI6IFsxLCA4MF0gfSwgeyAyMzogWzIsIDQyXSwgMzM6IFsyLCA0Ml0sIDU0OiBbMiwgNDJdLCA2NTogWzIsIDQyXSwgNjg6IFsyLCA0Ml0sIDcyOiBbMiwgNDJdLCA3NTogWzIsIDQyXSwgODA6IFsyLCA0Ml0sIDgxOiBbMiwgNDJdLCA4MjogWzIsIDQyXSwgODM6IFsyLCA0Ml0sIDg0OiBbMiwgNDJdLCA4NTogWzIsIDQyXSwgODc6IFsxLCA1MV0gfSwgeyAyMDogNzUsIDUzOiA4MSwgNTQ6IFsyLCA4NF0sIDYzOiA4MiwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNjk6IDgzLCA3MDogNzcsIDcxOiA3OCwgNzI6IFsxLCA3OV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyAyNjogODQsIDQ3OiBbMSwgNjddIH0sIHsgNDc6IFsyLCA1NV0gfSwgeyA0OiA4NSwgNjogMywgMTQ6IFsyLCA0Nl0sIDE1OiBbMiwgNDZdLCAxOTogWzIsIDQ2XSwgMjk6IFsyLCA0Nl0sIDM0OiBbMiwgNDZdLCAzOTogWzIsIDQ2XSwgNDQ6IFsyLCA0Nl0sIDQ3OiBbMiwgNDZdLCA0ODogWzIsIDQ2XSwgNTE6IFsyLCA0Nl0sIDU1OiBbMiwgNDZdLCA2MDogWzIsIDQ2XSB9LCB7IDQ3OiBbMiwgMjBdIH0sIHsgMjA6IDg2LCA3MjogWzEsIDM1XSwgNzg6IDI2LCA3OTogMjcsIDgwOiBbMSwgMjhdLCA4MTogWzEsIDI5XSwgODI6IFsxLCAzMF0sIDgzOiBbMSwgMzFdLCA4NDogWzEsIDMyXSwgODU6IFsxLCAzNF0sIDg2OiAzMyB9LCB7IDQ6IDg3LCA2OiAzLCAxNDogWzIsIDQ2XSwgMTU6IFsyLCA0Nl0sIDE5OiBbMiwgNDZdLCAyOTogWzIsIDQ2XSwgMzQ6IFsyLCA0Nl0sIDQ3OiBbMiwgNDZdLCA0ODogWzIsIDQ2XSwgNTE6IFsyLCA0Nl0sIDU1OiBbMiwgNDZdLCA2MDogWzIsIDQ2XSB9LCB7IDI2OiA4OCwgNDc6IFsxLCA2N10gfSwgeyA0NzogWzIsIDU3XSB9LCB7IDU6IFsyLCAxMV0sIDE0OiBbMiwgMTFdLCAxNTogWzIsIDExXSwgMTk6IFsyLCAxMV0sIDI5OiBbMiwgMTFdLCAzNDogWzIsIDExXSwgMzk6IFsyLCAxMV0sIDQ0OiBbMiwgMTFdLCA0NzogWzIsIDExXSwgNDg6IFsyLCAxMV0sIDUxOiBbMiwgMTFdLCA1NTogWzIsIDExXSwgNjA6IFsyLCAxMV0gfSwgeyAxNTogWzIsIDQ5XSwgMTg6IFsyLCA0OV0gfSwgeyAyMDogNzUsIDMzOiBbMiwgODhdLCA1ODogODksIDYzOiA5MCwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNjk6IDkxLCA3MDogNzcsIDcxOiA3OCwgNzI6IFsxLCA3OV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyA2NTogWzIsIDk0XSwgNjY6IDkyLCA2ODogWzIsIDk0XSwgNzI6IFsyLCA5NF0sIDgwOiBbMiwgOTRdLCA4MTogWzIsIDk0XSwgODI6IFsyLCA5NF0sIDgzOiBbMiwgOTRdLCA4NDogWzIsIDk0XSwgODU6IFsyLCA5NF0gfSwgeyA1OiBbMiwgMjVdLCAxNDogWzIsIDI1XSwgMTU6IFsyLCAyNV0sIDE5OiBbMiwgMjVdLCAyOTogWzIsIDI1XSwgMzQ6IFsyLCAyNV0sIDM5OiBbMiwgMjVdLCA0NDogWzIsIDI1XSwgNDc6IFsyLCAyNV0sIDQ4OiBbMiwgMjVdLCA1MTogWzIsIDI1XSwgNTU6IFsyLCAyNV0sIDYwOiBbMiwgMjVdIH0sIHsgMjA6IDkzLCA3MjogWzEsIDM1XSwgNzg6IDI2LCA3OTogMjcsIDgwOiBbMSwgMjhdLCA4MTogWzEsIDI5XSwgODI6IFsxLCAzMF0sIDgzOiBbMSwgMzFdLCA4NDogWzEsIDMyXSwgODU6IFsxLCAzNF0sIDg2OiAzMyB9LCB7IDIwOiA3NSwgMzE6IDk0LCAzMzogWzIsIDYwXSwgNjM6IDk1LCA2NDogNzYsIDY1OiBbMSwgNDRdLCA2OTogOTYsIDcwOiA3NywgNzE6IDc4LCA3MjogWzEsIDc5XSwgNzU6IFsyLCA2MF0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyAyMDogNzUsIDMzOiBbMiwgNjZdLCAzNjogOTcsIDYzOiA5OCwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNjk6IDk5LCA3MDogNzcsIDcxOiA3OCwgNzI6IFsxLCA3OV0sIDc1OiBbMiwgNjZdLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgMjA6IDc1LCAyMjogMTAwLCAyMzogWzIsIDUyXSwgNjM6IDEwMSwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNjk6IDEwMiwgNzA6IDc3LCA3MTogNzgsIDcyOiBbMSwgNzldLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgMjA6IDc1LCAzMzogWzIsIDkyXSwgNjI6IDEwMywgNjM6IDEwNCwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNjk6IDEwNSwgNzA6IDc3LCA3MTogNzgsIDcyOiBbMSwgNzldLCA3ODogMjYsIDc5OiAyNywgODA6IFsxLCAyOF0sIDgxOiBbMSwgMjldLCA4MjogWzEsIDMwXSwgODM6IFsxLCAzMV0sIDg0OiBbMSwgMzJdLCA4NTogWzEsIDM0XSwgODY6IDMzIH0sIHsgMzM6IFsxLCAxMDZdIH0sIHsgMzM6IFsyLCA3OV0sIDY1OiBbMiwgNzldLCA3MjogWzIsIDc5XSwgODA6IFsyLCA3OV0sIDgxOiBbMiwgNzldLCA4MjogWzIsIDc5XSwgODM6IFsyLCA3OV0sIDg0OiBbMiwgNzldLCA4NTogWzIsIDc5XSB9LCB7IDMzOiBbMiwgODFdIH0sIHsgMjM6IFsyLCAyN10sIDMzOiBbMiwgMjddLCA1NDogWzIsIDI3XSwgNjU6IFsyLCAyN10sIDY4OiBbMiwgMjddLCA3MjogWzIsIDI3XSwgNzU6IFsyLCAyN10sIDgwOiBbMiwgMjddLCA4MTogWzIsIDI3XSwgODI6IFsyLCAyN10sIDgzOiBbMiwgMjddLCA4NDogWzIsIDI3XSwgODU6IFsyLCAyN10gfSwgeyAyMzogWzIsIDI4XSwgMzM6IFsyLCAyOF0sIDU0OiBbMiwgMjhdLCA2NTogWzIsIDI4XSwgNjg6IFsyLCAyOF0sIDcyOiBbMiwgMjhdLCA3NTogWzIsIDI4XSwgODA6IFsyLCAyOF0sIDgxOiBbMiwgMjhdLCA4MjogWzIsIDI4XSwgODM6IFsyLCAyOF0sIDg0OiBbMiwgMjhdLCA4NTogWzIsIDI4XSB9LCB7IDIzOiBbMiwgMzBdLCAzMzogWzIsIDMwXSwgNTQ6IFsyLCAzMF0sIDY4OiBbMiwgMzBdLCA3MTogMTA3LCA3MjogWzEsIDEwOF0sIDc1OiBbMiwgMzBdIH0sIHsgMjM6IFsyLCA5OF0sIDMzOiBbMiwgOThdLCA1NDogWzIsIDk4XSwgNjg6IFsyLCA5OF0sIDcyOiBbMiwgOThdLCA3NTogWzIsIDk4XSB9LCB7IDIzOiBbMiwgNDVdLCAzMzogWzIsIDQ1XSwgNTQ6IFsyLCA0NV0sIDY1OiBbMiwgNDVdLCA2ODogWzIsIDQ1XSwgNzI6IFsyLCA0NV0sIDczOiBbMSwgMTA5XSwgNzU6IFsyLCA0NV0sIDgwOiBbMiwgNDVdLCA4MTogWzIsIDQ1XSwgODI6IFsyLCA0NV0sIDgzOiBbMiwgNDVdLCA4NDogWzIsIDQ1XSwgODU6IFsyLCA0NV0sIDg3OiBbMiwgNDVdIH0sIHsgMjM6IFsyLCA0NF0sIDMzOiBbMiwgNDRdLCA1NDogWzIsIDQ0XSwgNjU6IFsyLCA0NF0sIDY4OiBbMiwgNDRdLCA3MjogWzIsIDQ0XSwgNzU6IFsyLCA0NF0sIDgwOiBbMiwgNDRdLCA4MTogWzIsIDQ0XSwgODI6IFsyLCA0NF0sIDgzOiBbMiwgNDRdLCA4NDogWzIsIDQ0XSwgODU6IFsyLCA0NF0sIDg3OiBbMiwgNDRdIH0sIHsgNTQ6IFsxLCAxMTBdIH0sIHsgNTQ6IFsyLCA4M10sIDY1OiBbMiwgODNdLCA3MjogWzIsIDgzXSwgODA6IFsyLCA4M10sIDgxOiBbMiwgODNdLCA4MjogWzIsIDgzXSwgODM6IFsyLCA4M10sIDg0OiBbMiwgODNdLCA4NTogWzIsIDgzXSB9LCB7IDU0OiBbMiwgODVdIH0sIHsgNTogWzIsIDEzXSwgMTQ6IFsyLCAxM10sIDE1OiBbMiwgMTNdLCAxOTogWzIsIDEzXSwgMjk6IFsyLCAxM10sIDM0OiBbMiwgMTNdLCAzOTogWzIsIDEzXSwgNDQ6IFsyLCAxM10sIDQ3OiBbMiwgMTNdLCA0ODogWzIsIDEzXSwgNTE6IFsyLCAxM10sIDU1OiBbMiwgMTNdLCA2MDogWzIsIDEzXSB9LCB7IDM4OiA1NiwgMzk6IFsxLCA1OF0sIDQzOiA1NywgNDQ6IFsxLCA1OV0sIDQ1OiAxMTIsIDQ2OiAxMTEsIDQ3OiBbMiwgNzZdIH0sIHsgMzM6IFsyLCA3MF0sIDQwOiAxMTMsIDY1OiBbMiwgNzBdLCA3MjogWzIsIDcwXSwgNzU6IFsyLCA3MF0sIDgwOiBbMiwgNzBdLCA4MTogWzIsIDcwXSwgODI6IFsyLCA3MF0sIDgzOiBbMiwgNzBdLCA4NDogWzIsIDcwXSwgODU6IFsyLCA3MF0gfSwgeyA0NzogWzIsIDE4XSB9LCB7IDU6IFsyLCAxNF0sIDE0OiBbMiwgMTRdLCAxNTogWzIsIDE0XSwgMTk6IFsyLCAxNF0sIDI5OiBbMiwgMTRdLCAzNDogWzIsIDE0XSwgMzk6IFsyLCAxNF0sIDQ0OiBbMiwgMTRdLCA0NzogWzIsIDE0XSwgNDg6IFsyLCAxNF0sIDUxOiBbMiwgMTRdLCA1NTogWzIsIDE0XSwgNjA6IFsyLCAxNF0gfSwgeyAzMzogWzEsIDExNF0gfSwgeyAzMzogWzIsIDg3XSwgNjU6IFsyLCA4N10sIDcyOiBbMiwgODddLCA4MDogWzIsIDg3XSwgODE6IFsyLCA4N10sIDgyOiBbMiwgODddLCA4MzogWzIsIDg3XSwgODQ6IFsyLCA4N10sIDg1OiBbMiwgODddIH0sIHsgMzM6IFsyLCA4OV0gfSwgeyAyMDogNzUsIDYzOiAxMTYsIDY0OiA3NiwgNjU6IFsxLCA0NF0sIDY3OiAxMTUsIDY4OiBbMiwgOTZdLCA2OTogMTE3LCA3MDogNzcsIDcxOiA3OCwgNzI6IFsxLCA3OV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyAzMzogWzEsIDExOF0gfSwgeyAzMjogMTE5LCAzMzogWzIsIDYyXSwgNzQ6IDEyMCwgNzU6IFsxLCAxMjFdIH0sIHsgMzM6IFsyLCA1OV0sIDY1OiBbMiwgNTldLCA3MjogWzIsIDU5XSwgNzU6IFsyLCA1OV0sIDgwOiBbMiwgNTldLCA4MTogWzIsIDU5XSwgODI6IFsyLCA1OV0sIDgzOiBbMiwgNTldLCA4NDogWzIsIDU5XSwgODU6IFsyLCA1OV0gfSwgeyAzMzogWzIsIDYxXSwgNzU6IFsyLCA2MV0gfSwgeyAzMzogWzIsIDY4XSwgMzc6IDEyMiwgNzQ6IDEyMywgNzU6IFsxLCAxMjFdIH0sIHsgMzM6IFsyLCA2NV0sIDY1OiBbMiwgNjVdLCA3MjogWzIsIDY1XSwgNzU6IFsyLCA2NV0sIDgwOiBbMiwgNjVdLCA4MTogWzIsIDY1XSwgODI6IFsyLCA2NV0sIDgzOiBbMiwgNjVdLCA4NDogWzIsIDY1XSwgODU6IFsyLCA2NV0gfSwgeyAzMzogWzIsIDY3XSwgNzU6IFsyLCA2N10gfSwgeyAyMzogWzEsIDEyNF0gfSwgeyAyMzogWzIsIDUxXSwgNjU6IFsyLCA1MV0sIDcyOiBbMiwgNTFdLCA4MDogWzIsIDUxXSwgODE6IFsyLCA1MV0sIDgyOiBbMiwgNTFdLCA4MzogWzIsIDUxXSwgODQ6IFsyLCA1MV0sIDg1OiBbMiwgNTFdIH0sIHsgMjM6IFsyLCA1M10gfSwgeyAzMzogWzEsIDEyNV0gfSwgeyAzMzogWzIsIDkxXSwgNjU6IFsyLCA5MV0sIDcyOiBbMiwgOTFdLCA4MDogWzIsIDkxXSwgODE6IFsyLCA5MV0sIDgyOiBbMiwgOTFdLCA4MzogWzIsIDkxXSwgODQ6IFsyLCA5MV0sIDg1OiBbMiwgOTFdIH0sIHsgMzM6IFsyLCA5M10gfSwgeyA1OiBbMiwgMjJdLCAxNDogWzIsIDIyXSwgMTU6IFsyLCAyMl0sIDE5OiBbMiwgMjJdLCAyOTogWzIsIDIyXSwgMzQ6IFsyLCAyMl0sIDM5OiBbMiwgMjJdLCA0NDogWzIsIDIyXSwgNDc6IFsyLCAyMl0sIDQ4OiBbMiwgMjJdLCA1MTogWzIsIDIyXSwgNTU6IFsyLCAyMl0sIDYwOiBbMiwgMjJdIH0sIHsgMjM6IFsyLCA5OV0sIDMzOiBbMiwgOTldLCA1NDogWzIsIDk5XSwgNjg6IFsyLCA5OV0sIDcyOiBbMiwgOTldLCA3NTogWzIsIDk5XSB9LCB7IDczOiBbMSwgMTA5XSB9LCB7IDIwOiA3NSwgNjM6IDEyNiwgNjQ6IDc2LCA2NTogWzEsIDQ0XSwgNzI6IFsxLCAzNV0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyA1OiBbMiwgMjNdLCAxNDogWzIsIDIzXSwgMTU6IFsyLCAyM10sIDE5OiBbMiwgMjNdLCAyOTogWzIsIDIzXSwgMzQ6IFsyLCAyM10sIDM5OiBbMiwgMjNdLCA0NDogWzIsIDIzXSwgNDc6IFsyLCAyM10sIDQ4OiBbMiwgMjNdLCA1MTogWzIsIDIzXSwgNTU6IFsyLCAyM10sIDYwOiBbMiwgMjNdIH0sIHsgNDc6IFsyLCAxOV0gfSwgeyA0NzogWzIsIDc3XSB9LCB7IDIwOiA3NSwgMzM6IFsyLCA3Ml0sIDQxOiAxMjcsIDYzOiAxMjgsIDY0OiA3NiwgNjU6IFsxLCA0NF0sIDY5OiAxMjksIDcwOiA3NywgNzE6IDc4LCA3MjogWzEsIDc5XSwgNzU6IFsyLCA3Ml0sIDc4OiAyNiwgNzk6IDI3LCA4MDogWzEsIDI4XSwgODE6IFsxLCAyOV0sIDgyOiBbMSwgMzBdLCA4MzogWzEsIDMxXSwgODQ6IFsxLCAzMl0sIDg1OiBbMSwgMzRdLCA4NjogMzMgfSwgeyA1OiBbMiwgMjRdLCAxNDogWzIsIDI0XSwgMTU6IFsyLCAyNF0sIDE5OiBbMiwgMjRdLCAyOTogWzIsIDI0XSwgMzQ6IFsyLCAyNF0sIDM5OiBbMiwgMjRdLCA0NDogWzIsIDI0XSwgNDc6IFsyLCAyNF0sIDQ4OiBbMiwgMjRdLCA1MTogWzIsIDI0XSwgNTU6IFsyLCAyNF0sIDYwOiBbMiwgMjRdIH0sIHsgNjg6IFsxLCAxMzBdIH0sIHsgNjU6IFsyLCA5NV0sIDY4OiBbMiwgOTVdLCA3MjogWzIsIDk1XSwgODA6IFsyLCA5NV0sIDgxOiBbMiwgOTVdLCA4MjogWzIsIDk1XSwgODM6IFsyLCA5NV0sIDg0OiBbMiwgOTVdLCA4NTogWzIsIDk1XSB9LCB7IDY4OiBbMiwgOTddIH0sIHsgNTogWzIsIDIxXSwgMTQ6IFsyLCAyMV0sIDE1OiBbMiwgMjFdLCAxOTogWzIsIDIxXSwgMjk6IFsyLCAyMV0sIDM0OiBbMiwgMjFdLCAzOTogWzIsIDIxXSwgNDQ6IFsyLCAyMV0sIDQ3OiBbMiwgMjFdLCA0ODogWzIsIDIxXSwgNTE6IFsyLCAyMV0sIDU1OiBbMiwgMjFdLCA2MDogWzIsIDIxXSB9LCB7IDMzOiBbMSwgMTMxXSB9LCB7IDMzOiBbMiwgNjNdIH0sIHsgNzI6IFsxLCAxMzNdLCA3NjogMTMyIH0sIHsgMzM6IFsxLCAxMzRdIH0sIHsgMzM6IFsyLCA2OV0gfSwgeyAxNTogWzIsIDEyXSB9LCB7IDE0OiBbMiwgMjZdLCAxNTogWzIsIDI2XSwgMTk6IFsyLCAyNl0sIDI5OiBbMiwgMjZdLCAzNDogWzIsIDI2XSwgNDc6IFsyLCAyNl0sIDQ4OiBbMiwgMjZdLCA1MTogWzIsIDI2XSwgNTU6IFsyLCAyNl0sIDYwOiBbMiwgMjZdIH0sIHsgMjM6IFsyLCAzMV0sIDMzOiBbMiwgMzFdLCA1NDogWzIsIDMxXSwgNjg6IFsyLCAzMV0sIDcyOiBbMiwgMzFdLCA3NTogWzIsIDMxXSB9LCB7IDMzOiBbMiwgNzRdLCA0MjogMTM1LCA3NDogMTM2LCA3NTogWzEsIDEyMV0gfSwgeyAzMzogWzIsIDcxXSwgNjU6IFsyLCA3MV0sIDcyOiBbMiwgNzFdLCA3NTogWzIsIDcxXSwgODA6IFsyLCA3MV0sIDgxOiBbMiwgNzFdLCA4MjogWzIsIDcxXSwgODM6IFsyLCA3MV0sIDg0OiBbMiwgNzFdLCA4", "base64"));
  res.write(new Buffer("NTogWzIsIDcxXSB9LCB7IDMzOiBbMiwgNzNdLCA3NTogWzIsIDczXSB9LCB7IDIzOiBbMiwgMjldLCAzMzogWzIsIDI5XSwgNTQ6IFsyLCAyOV0sIDY1OiBbMiwgMjldLCA2ODogWzIsIDI5XSwgNzI6IFsyLCAyOV0sIDc1OiBbMiwgMjldLCA4MDogWzIsIDI5XSwgODE6IFsyLCAyOV0sIDgyOiBbMiwgMjldLCA4MzogWzIsIDI5XSwgODQ6IFsyLCAyOV0sIDg1OiBbMiwgMjldIH0sIHsgMTQ6IFsyLCAxNV0sIDE1OiBbMiwgMTVdLCAxOTogWzIsIDE1XSwgMjk6IFsyLCAxNV0sIDM0OiBbMiwgMTVdLCAzOTogWzIsIDE1XSwgNDQ6IFsyLCAxNV0sIDQ3OiBbMiwgMTVdLCA0ODogWzIsIDE1XSwgNTE6IFsyLCAxNV0sIDU1OiBbMiwgMTVdLCA2MDogWzIsIDE1XSB9LCB7IDcyOiBbMSwgMTM4XSwgNzc6IFsxLCAxMzddIH0sIHsgNzI6IFsyLCAxMDBdLCA3NzogWzIsIDEwMF0gfSwgeyAxNDogWzIsIDE2XSwgMTU6IFsyLCAxNl0sIDE5OiBbMiwgMTZdLCAyOTogWzIsIDE2XSwgMzQ6IFsyLCAxNl0sIDQ0OiBbMiwgMTZdLCA0NzogWzIsIDE2XSwgNDg6IFsyLCAxNl0sIDUxOiBbMiwgMTZdLCA1NTogWzIsIDE2XSwgNjA6IFsyLCAxNl0gfSwgeyAzMzogWzEsIDEzOV0gfSwgeyAzMzogWzIsIDc1XSB9LCB7IDMzOiBbMiwgMzJdIH0sIHsgNzI6IFsyLCAxMDFdLCA3NzogWzIsIDEwMV0gfSwgeyAxNDogWzIsIDE3XSwgMTU6IFsyLCAxN10sIDE5OiBbMiwgMTddLCAyOTogWzIsIDE3XSwgMzQ6IFsyLCAxN10sIDM5OiBbMiwgMTddLCA0NDogWzIsIDE3XSwgNDc6IFsyLCAxN10sIDQ4OiBbMiwgMTddLCA1MTogWzIsIDE3XSwgNTU6IFsyLCAxN10sIDYwOiBbMiwgMTddIH1dLAoJCSAgICAgICAgZGVmYXVsdEFjdGlvbnM6IHsgNDogWzIsIDFdLCA1NTogWzIsIDU1XSwgNTc6IFsyLCAyMF0sIDYxOiBbMiwgNTddLCA3NDogWzIsIDgxXSwgODM6IFsyLCA4NV0sIDg3OiBbMiwgMThdLCA5MTogWzIsIDg5XSwgMTAyOiBbMiwgNTNdLCAxMDU6IFsyLCA5M10sIDExMTogWzIsIDE5XSwgMTEyOiBbMiwgNzddLCAxMTc6IFsyLCA5N10sIDEyMDogWzIsIDYzXSwgMTIzOiBbMiwgNjldLCAxMjQ6IFsyLCAxMl0sIDEzNjogWzIsIDc1XSwgMTM3OiBbMiwgMzJdIH0sCgkJICAgICAgICBwYXJzZUVycm9yOiBmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkgewoJCSAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpOwoJCSAgICAgICAgfSwKCQkgICAgICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShpbnB1dCkgewoJCSAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcywKCQkgICAgICAgICAgICAgICAgc3RhY2sgPSBbMF0sCgkJICAgICAgICAgICAgICAgIHZzdGFjayA9IFtudWxsXSwKCQkgICAgICAgICAgICAgICAgbHN0YWNrID0gW10sCgkJICAgICAgICAgICAgICAgIHRhYmxlID0gdGhpcy50YWJsZSwKCQkgICAgICAgICAgICAgICAgeXl0ZXh0ID0gIiIsCgkJICAgICAgICAgICAgICAgIHl5bGluZW5vID0gMCwKCQkgICAgICAgICAgICAgICAgeXlsZW5nID0gMCwKCQkgICAgICAgICAgICAgICAgcmVjb3ZlcmluZyA9IDAsCgkJICAgICAgICAgICAgICAgIFRFUlJPUiA9IDIsCgkJICAgICAgICAgICAgICAgIEVPRiA9IDE7CgkJICAgICAgICAgICAgdGhpcy5sZXhlci5zZXRJbnB1dChpbnB1dCk7CgkJICAgICAgICAgICAgdGhpcy5sZXhlci55eSA9IHRoaXMueXk7CgkJICAgICAgICAgICAgdGhpcy55eS5sZXhlciA9IHRoaXMubGV4ZXI7CgkJICAgICAgICAgICAgdGhpcy55eS5wYXJzZXIgPSB0aGlzOwoJCSAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5sZXhlci55eWxsb2MgPT0gInVuZGVmaW5lZCIpIHRoaXMubGV4ZXIueXlsbG9jID0ge307CgkJICAgICAgICAgICAgdmFyIHl5bG9jID0gdGhpcy5sZXhlci55eWxsb2M7CgkJICAgICAgICAgICAgbHN0YWNrLnB1c2goeXlsb2MpOwoJCSAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLmxleGVyLm9wdGlvbnMgJiYgdGhpcy5sZXhlci5vcHRpb25zLnJhbmdlczsKCQkgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMueXkucGFyc2VFcnJvciA9PT0gImZ1bmN0aW9uIikgdGhpcy5wYXJzZUVycm9yID0gdGhpcy55eS5wYXJzZUVycm9yOwoJCSAgICAgICAgICAgIGZ1bmN0aW9uIHBvcFN0YWNrKG4pIHsKCQkgICAgICAgICAgICAgICAgc3RhY2subGVuZ3RoID0gc3RhY2subGVuZ3RoIC0gMiAqIG47CgkJICAgICAgICAgICAgICAgIHZzdGFjay5sZW5ndGggPSB2c3RhY2subGVuZ3RoIC0gbjsKCQkgICAgICAgICAgICAgICAgbHN0YWNrLmxlbmd0aCA9IGxzdGFjay5sZW5ndGggLSBuOwoJCSAgICAgICAgICAgIH0KCQkgICAgICAgICAgICBmdW5jdGlvbiBsZXgoKSB7CgkJICAgICAgICAgICAgICAgIHZhciB0b2tlbjsKCQkgICAgICAgICAgICAgICAgdG9rZW4gPSBzZWxmLmxleGVyLmxleCgpIHx8IDE7CgkJICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICJudW1iZXIiKSB7CgkJICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHNlbGYuc3ltYm9sc19bdG9rZW5dIHx8IHRva2VuOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjsKCQkgICAgICAgICAgICB9CgkJICAgICAgICAgICAgdmFyIHN5bWJvbCwKCQkgICAgICAgICAgICAgICAgcHJlRXJyb3JTeW1ib2wsCgkJICAgICAgICAgICAgICAgIHN0YXRlLAoJCSAgICAgICAgICAgICAgICBhY3Rpb24sCgkJICAgICAgICAgICAgICAgIGEsCgkJICAgICAgICAgICAgICAgIHIsCgkJICAgICAgICAgICAgICAgIHl5dmFsID0ge30sCgkJICAgICAgICAgICAgICAgIHAsCgkJICAgICAgICAgICAgICAgIGxlbiwKCQkgICAgICAgICAgICAgICAgbmV3U3RhdGUsCgkJICAgICAgICAgICAgICAgIGV4cGVjdGVkOwoJCSAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CgkJICAgICAgICAgICAgICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CgkJICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHRBY3Rpb25zW3N0YXRlXSkgewoJCSAgICAgICAgICAgICAgICAgICAgYWN0aW9uID0gdGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV07CgkJICAgICAgICAgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgICAgICAgICAgICBpZiAoc3ltYm9sID09PSBudWxsIHx8IHR5cGVvZiBzeW1ib2wgPT0gInVuZGVmaW5lZCIpIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wgPSBsZXgoKTsKCQkgICAgICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA=", "base64"));
  res.write(new Buffer("PSB0YWJsZVtzdGF0ZV0gJiYgdGFibGVbc3RhdGVdW3N5bWJvbF07CgkJICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICJ1bmRlZmluZWQiIHx8ICFhY3Rpb24ubGVuZ3RoIHx8ICFhY3Rpb25bMF0pIHsKCQkgICAgICAgICAgICAgICAgICAgIHZhciBlcnJTdHIgPSAiIjsKCQkgICAgICAgICAgICAgICAgICAgIGlmICghcmVjb3ZlcmluZykgewoJCSAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkID0gW107CgkJICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwIGluIHRhYmxlW3N0YXRlXSkgaWYgKHRoaXMudGVybWluYWxzX1twXSAmJiBwID4gMikgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZC5wdXNoKCInIiArIHRoaXMudGVybWluYWxzX1twXSArICInIik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxleGVyLnNob3dQb3NpdGlvbikgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAiUGFyc2UgZXJyb3Igb24gbGluZSAiICsgKHl5bGluZW5vICsgMSkgKyAiOlxuIiArIHRoaXMubGV4ZXIuc2hvd1Bvc2l0aW9uKCkgKyAiXG5FeHBlY3RpbmcgIiArIGV4cGVjdGVkLmpvaW4oIiwgIikgKyAiLCBnb3QgJyIgKyAodGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sKSArICInIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAiUGFyc2UgZXJyb3Igb24gbGluZSAiICsgKHl5bGluZW5vICsgMSkgKyAiOiBVbmV4cGVjdGVkICIgKyAoc3ltYm9sID09IDEgPyAiZW5kIG9mIGlucHV0IiA6ICInIiArICh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpICsgIiciKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUVycm9yKGVyclN0ciwgeyB0ZXh0OiB0aGlzLmxleGVyLm1hdGNoLCB0b2tlbjogdGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sLCBsaW5lOiB0aGlzLmxleGVyLnl5bGluZW5vLCBsb2M6IHl5bG9jLCBleHBlY3RlZDogZXhwZWN0ZWQgfSk7CgkJICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgaWYgKGFjdGlvblswXSBpbnN0YW5jZW9mIEFycmF5ICYmIGFjdGlvbi5sZW5ndGggPiAxKSB7CgkJICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlBhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiAiICsgc3RhdGUgKyAiLCB0b2tlbjogIiArIHN5bWJvbCk7CgkJICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb25bMF0pIHsKCQkgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKCQkgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHN5bWJvbCk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgdnN0YWNrLnB1c2godGhpcy5sZXhlci55eXRleHQpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIGxzdGFjay5wdXNoKHRoaXMubGV4ZXIueXlsbG9jKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGFjdGlvblsxXSk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sID0gbnVsbDsKCQkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByZUVycm9yU3ltYm9sKSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl5bGVuZyA9IHRoaXMubGV4ZXIueXlsZW5nOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB5eXRleHQgPSB0aGlzLmxleGVyLnl5dGV4dDsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgeXlsaW5lbm8gPSB0aGlzLmxleGVyLnl5bGluZW5vOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB5eWxvYyA9IHRoaXMubGV4ZXIueXlsbG9jOwoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjb3ZlcmluZyA+IDApIHJlY292ZXJpbmctLTsKCQkgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wgPSBwcmVFcnJvclN5bWJvbDsKCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlRXJyb3JTeW1ib2wgPSBudWxsOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKCQkgICAgICAgICAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLnByb2R1Y3Rpb25zX1thY3Rpb25bMV1dWzFdOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIHl5dmFsLiQgPSB2c3RhY2tbdnN0YWNrLmxlbmd0aCAtIGxlbl07CgkJICAgICAgICAgICAgICAgICAgICAgICAgeXl2YWwuXyQgPSB7IGZpcnN0X2xpbmU6IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0uZmlyc3RfbGluZSwgbGFzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfbGluZSwgZmlyc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2NvbHVtbiwgbGFzdF9jb2x1bW46IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ubGFzdF9jb2x1bW4gfTsKCQkgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzKSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl5dmFsLl8kLnJhbmdlID0gW2xzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0ucmFuZ2VbMF0sIGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ucmFuZ2VbMV1dOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5wZXJmb3JtQWN0aW9uLmNhbGwoeXl2YWwsIHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgdGhpcy55eSwgYWN0aW9uWzFdLCB2c3RhY2ssIGxzdGFjayk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByICE9PSAidW5kZWZpbmVkIikgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsKCQkgICAgICAgICAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbikgewoJCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKDAsIC0xICogbGVuICogMik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZzdGFjayA9IHZzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxzdGFjayA9IGxzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7CgkJICAgICAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVswXSk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgdnN0YWNrLnB1c2goeXl2YWwuJCk7CgkJICAgICAgICAgICAgICAgICAgICAgICAgbHN0YWNrLnB1c2goeXl2YWwuXyQpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlID0gdGFibGVbc3RhY2tbc3RhY2subGVuZ3RoIC0gMl1dW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdXTsKCQkgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG5ld1N0YXRlKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKCQkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgIH0KCQkgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCQkgICAgICAgIH0KCQkgICAgfTsKCQkgICAgLyogSmlzb24gZ2VuZXJhdGVkIGxleGVyICovCgkJICAgIHZhciBsZXhlciA9IChmdW5jdGlvbiAoKSB7CgkJICAgICAgICB2YXIgbGV4ZXIgPSB7IEVPRjogMSwKCQkgICAgICAgICAgICBwYXJzZUVycm9yOiBmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkgewoJCSAgICAgICAgICAgICAgICBpZiAodGhpcy55eS5wYXJzZXIpIHsKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMueXkucGFyc2VyLnBhcnNlRXJyb3Ioc3RyLCBoYXNoKTsKCQkgICAgICAgICAgICAgICAgfSBlbHNlIHsKCQkgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBzZXRJbnB1dDogZnVuY3Rpb24gc2V0SW5wdXQoaW5wdXQpIHsKCQkgICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDsKCQkgICAgICAgICAgICAgICAgdGhpcy5fbW9yZSA9IHRoaXMuX2xlc3MgPSB0aGlzLmRvbmUgPSBmYWxzZTsKCQkgICAgICAgICAgICAgICAgdGhpcy55eWxpbmVubyA9IHRoaXMueXlsZW5nID0gMDsKCQkgICAgICAgICAgICAgICAgdGhpcy55eXRleHQgPSB0aGlzLm1hdGNoZWQgPSB0aGlzLm1hdGNoID0gJyc7CgkJICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uU3RhY2sgPSBbJ0lOSVRJQUwnXTsKCQkgICAgICAgICAgICAgICAgdGhpcy55eWxsb2MgPSB7IGZpcnN0X2xpbmU6IDEsIGZpcnN0X2NvbHVtbjogMCwgbGFzdF9saW5lOiAxLCBsYXN0X2NvbHVtbjogMCB9OwoJCSAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykgdGhpcy55eWxsb2MucmFuZ2UgPSBbMCwgMF07CgkJICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ID0gMDsKCQkgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gaW5wdXQoKSB7CgkJICAgICAgICAgICAgICAgIHZhciBjaCA9IHRoaXMuX2lucHV0WzBdOwoJCSAgICAgICAgICAgICAgICB0aGlzLnl5dGV4dCArPSBjaDsKCQkgICAgICAgICAgICAgICAgdGhpcy55eWxlbmcrKzsKCQkgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQrKzsKCQkgICAgICAgICAgICAgICAgdGhpcy5tYXRjaCArPSBjaDsKCQkgICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVkICs9IGNoOwoJCSAgICAgICAgICAgICAgICB2YXIgbGluZXMgPSBjaC5tYXRjaCgvKD86XHJcbj98XG4pLiovZyk7CgkJICAgICAgICAgICAgICAgIGlmIChsaW5lcykgewoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy55eWxpbmVubysrOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy55eWxsb2MubGFzdF9saW5lKys7CgkJICAgICAgICAgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbisrOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB0aGlzLnl5bGxvYy5yYW5nZVsxXSsrOwoKCQkgICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSB0aGlzLl9pbnB1dC5zbGljZSgxKTsKCQkgICAgICAgICAgICAgICAgcmV0dXJuIGNoOwoJCSAgICAgICAgICAgIH0sCgkJICAgICAgICAgICAgdW5wdXQ6IGZ1bmN0aW9uIHVucHV0KGNoKSB7CgkJICAgICAgICAgICAgICAgIHZhciBsZW4gPSBjaC5sZW5ndGg7CgkJICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IGNoLnNwbGl0KC8oPzpcclxuP3xcbikvZyk7CgoJCSAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGNoICsgdGhpcy5faW5wdXQ7CgkJICAgICAgICAgICAgICAgIHRoaXMueXl0ZXh0ID0gdGhpcy55eXRleHQuc3Vic3RyKDAsIHRoaXMueXl0ZXh0Lmxlbmd0aCAtIGxlbiAtIDEpOwoJCSAgICAgICAgICAgICAgICAvL3RoaXMueXlsZW5nIC09IGxlbjsKCQkgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgLT0gbGVuOwoJCSAgICAgICAgICAgICAgICB2YXIgb2xkTGluZXMgPSB0aGlzLm1hdGNoLnNwbGl0KC8oPzpcclxuP3xcbikvZyk7CgkJICAgICAgICAgICAgICAgIHRoaXMubWF0Y2ggPSB0aGlzLm1hdGNoLnN1YnN0cigwLCB0aGlzLm1hdGNoLmxlbmd0aCAtIDEpOwoJCSAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZWQgPSB0aGlzLm1hdGNoZWQuc3Vic3RyKDAsIHRoaXMubWF0Y2hlZC5sZW5ndGggLSAxKTsKCgkJICAgICAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggLSAxKSB0aGlzLnl5bGluZW5vIC09IGxpbmVzLmxlbmd0aCAtIDE7CgkJICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy55eWxsb2MucmFuZ2U7CgoJCSAgICAgICAgICAgICAgICB0aGlzLnl5bGxvYyA9IHsgZmlyc3RfbGluZTogdGhpcy55eWxsb2MuZmlyc3RfbGluZSwKCQkgICAgICAgICAgICAgICAgICAgIGxhc3RfbGluZTogdGhpcy55eWxpbmVubyArIDEsCgkJICAgICAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbiwKCQkgICAgICAgICAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsaW5lcyA/IChsaW5lcy5sZW5ndGggPT09IG9sZExpbmVzLmxlbmd0aCA/IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbiA6IDApICsgb2xkTGluZXNbb2xkTGluZXMubGVuZ3RoIC0gbGluZXMubGVuZ3RoXS5sZW5ndGggLSBsaW5lc1swXS5sZW5ndGggOiB0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4gLSBsZW4KCQkgICAgICAgICAgICAgICAgfTsKCgkJICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZSA9IFtyWzBdLCByWzBdICsgdGhpcy55eWxlbmcgLSBsZW5dOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwoJCSAgICAgICAgICAgIH0sCgkJICAgICAgICAgICAgbW9yZTogZnVuY3Rpb24gbW9yZSgpIHsKCQkgICAgICAgICAgICAgICAgdGhpcy5fbW9yZSA9IHRydWU7CgkJICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwoJCSAgICAgICAgICAgIH0sCgkJICAgICAgICAgICAgbGVzczogZnVuY3Rpb24gbGVzcyhuKSB7CgkJICAgICAgICAgICAgICAgIHRoaXMudW5wdXQodGhpcy5tYXRjaC5zbGljZShuKSk7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBwYXN0SW5wdXQ6IGZ1bmN0aW9uIHBhc3RJbnB1dCgpIHsKCQkgICAgICAgICAgICAgICAgdmFyIHBhc3QgPSB0aGlzLm1hdGNoZWQuc3Vic3RyKDAsIHRoaXMubWF0Y2hlZC5sZW5ndGggLSB0aGlzLm1hdGNoLmxlbmd0aCk7CgkJICAgICAgICAgICAgICAgIHJldHVybiAocGFzdC5sZW5ndGggPiAyMCA/ICcuLi4nIDogJycpICsgcGFzdC5zdWJzdHIoLTIwKS5yZXBsYWNlKC9cbi9nLCAiIik7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICB1cGNvbWluZ0lucHV0OiBmdW5jdGlvbiB1cGNvbWluZ0lucHV0KCkgewoJCSAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMubWF0Y2g7CgkJICAgICAgICAgICAgICAgIGlmIChuZXh0Lmxlbmd0aCA8IDIwKSB7CgkJICAgICAgICAgICAgICAgICAgICBuZXh0ICs9IHRoaXMuX2lucHV0LnN1YnN0cigwLCAyMCAtIG5leHQubGVuZ3RoKTsKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICByZXR1cm4gKG5leHQuc3Vic3RyKDAsIDIwKSArIChuZXh0Lmxlbmd0aCA+IDIwID8gJy4uLicgOiAnJykpLnJlcGxhY2UoL1xuL2csICIiKTsKCQkgICAgICAgICAgICB9LAoJCSAgICAgICAgICAgIHNob3dQb3NpdGlvbjogZnVuY3Rpb24gc2hvd1Bvc2l0aW9uKCkgewoJCSAgICAgICAgICAgICAgICB2YXIgcHJlID0gdGhpcy5wYXN0SW5wdXQoKTsKCQkgICAgICAgICAgICAgICAgdmFyIGMgPSBuZXcgQXJyYXkocHJlLmxlbmd0aCArIDEpLmpvaW4oIi0iKTsKCQkgICAgICAgICAgICAgICAgcmV0dXJuIHByZSArIHRoaXMudXBjb21pbmdJbnB1dCgpICsgIlxuIiArIGMgKyAiXiI7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewoJCSAgICAgICAgICAgICAgICBpZiAodGhpcy5kb25lKSB7CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5FT0Y7CgkJICAgICAgICAgICAgICAgIH0KCQkgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnB1dCkgdGhpcy5kb25lID0gdHJ1ZTsKCgkJICAgICAgICAgICAgICAgIHZhciB0b2tlbiwgbWF0Y2gsIHRlbXBNYXRjaCwgaW5kZXgsIGNvbCwgbGluZXM7CgkJICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbW9yZSkgewoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy55eXRleHQgPSAnJzsKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0Y2ggPSAnJzsKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLl9jdXJyZW50UnVsZXMoKTsKCQkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgewoJCSAgICAgICAgICAgICAgICAgICAgdGVtcE1hdGNoID0gdGhpcy5faW5wdXQubWF0Y2godGhpcy5ydWxlc1tydWxlc1tpXV0pOwoJCSAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBNYXRjaCAmJiAoIW1hdGNoIHx8IHRlbXBNYXRjaFswXS5sZW5ndGggPiBtYXRjaFswXS5sZW5ndGgpKSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0ZW1wTWF0Y2g7CgkJICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBp", "base64"));
  res.write(new Buffer("OwoJCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZsZXgpIGJyZWFrOwoJCSAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgewoJCSAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBtYXRjaFswXS5tYXRjaCgvKD86XHJcbj98XG4pLiovZyk7CgkJICAgICAgICAgICAgICAgICAgICBpZiAobGluZXMpIHRoaXMueXlsaW5lbm8gKz0gbGluZXMubGVuZ3RoOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy55eWxsb2MgPSB7IGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmxhc3RfbGluZSwKCQkgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMueXlsaW5lbm8gKyAxLAoJCSAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X2NvbHVtbjogdGhpcy55eWxsb2MubGFzdF9jb2x1bW4sCgkJICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9jb2x1bW46IGxpbmVzID8gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubGVuZ3RoIC0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubWF0Y2goL1xyP1xuPy8pWzBdLmxlbmd0aCA6IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uICsgbWF0Y2hbMF0ubGVuZ3RoIH07CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnl5dGV4dCArPSBtYXRjaFswXTsKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0Y2ggKz0gbWF0Y2hbMF07CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZXMgPSBtYXRjaDsKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMueXlsZW5nID0gdGhpcy55eXRleHQubGVuZ3RoOwoJCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZSA9IFt0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKz0gdGhpcy55eWxlbmddOwoJCSAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9yZSA9IGZhbHNlOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSB0aGlzLl9pbnB1dC5zbGljZShtYXRjaFswXS5sZW5ndGgpOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVkICs9IG1hdGNoWzBdOwoJCSAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh0aGlzLCB0aGlzLnl5LCB0aGlzLCBydWxlc1tpbmRleF0sIHRoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxXSk7CgkJICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kb25lICYmIHRoaXMuX2lucHV0KSB0aGlzLmRvbmUgPSBmYWxzZTsKCQkgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbikgcmV0dXJuIHRva2VuO2Vsc2UgcmV0dXJuOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dCA9PT0gIiIpIHsKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkVPRjsKCQkgICAgICAgICAgICAgICAgfSBlbHNlIHsKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRXJyb3IoJ0xleGljYWwgZXJyb3Igb24gbGluZSAnICsgKHRoaXMueXlsaW5lbm8gKyAxKSArICcuIFVucmVjb2duaXplZCB0ZXh0LlxuJyArIHRoaXMuc2hvd1Bvc2l0aW9uKCksIHsgdGV4dDogIiIsIHRva2VuOiBudWxsLCBsaW5lOiB0aGlzLnl5bGluZW5vIH0pOwoJCSAgICAgICAgICAgICAgICB9CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBsZXg6IGZ1bmN0aW9uIGxleCgpIHsKCQkgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLm5leHQoKTsKCQkgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByICE9PSAndW5kZWZpbmVkJykgewoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7CgkJICAgICAgICAgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZXgoKTsKCQkgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgIH0sCgkJICAgICAgICAgICAgYmVnaW46IGZ1bmN0aW9uIGJlZ2luKGNvbmRpdGlvbikgewoJCSAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvblN0YWNrLnB1c2goY29uZGl0aW9uKTsKCQkgICAgICAgICAgICB9LAoJCSAgICAgICAgICAgIHBvcFN0YXRlOiBmdW5jdGlvbiBwb3BTdGF0ZSgpIHsKCQkgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2sucG9wKCk7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBfY3VycmVudFJ1bGVzOiBmdW5jdGlvbiBfY3VycmVudFJ1bGVzKCkgewoJCSAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxXV0ucnVsZXM7CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICB0b3BTdGF0ZTogZnVuY3Rpb24gdG9wU3RhdGUoKSB7CgkJICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMl07CgkJICAgICAgICAgICAgfSwKCQkgICAgICAgICAgICBwdXNoU3RhdGU6IGZ1bmN0aW9uIGJlZ2luKGNvbmRpdGlvbikgewoJCSAgICAgICAgICAgICAgICB0aGlzLmJlZ2luKGNvbmRpdGlvbik7CgkJICAgICAgICAgICAgfSB9OwoJCSAgICAgICAgbGV4ZXIub3B0aW9ucyA9IHt9OwoJCSAgICAgICAgbGV4ZXIucGVyZm9ybUFjdGlvbiA9IGZ1bmN0aW9uIGFub255bW91cyh5eSwgeXlfLCAkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zLCBZWV9TVEFSVAoJCSAgICAgICAgLyoqLykgewoKCQkgICAgICAgICAgICBmdW5jdGlvbiBzdHJpcChzdGFydCwgZW5kKSB7CgkJICAgICAgICAgICAgICAgIHJldHVybiB5eV8ueXl0ZXh0ID0geXlfLnl5dGV4dC5zdWJzdHIoc3RhcnQsIHl5Xy55eWxlbmcgLSBlbmQpOwoJCSAgICAgICAgICAgIH0KCgkJICAgICAgICAgICAgdmFyIFlZU1RBVEUgPSBZWV9TVEFSVDsKCQkgICAgICAgICAgICBzd2l0Y2ggKCRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMpIHsKCQkgICAgICAgICAgICAgICAgY2FzZSAwOgoJCSAgICAgICAgICAgICAgICAgICAgaWYgKHl5Xy55eXRleHQuc2xpY2UoLTIpID09PSAiXFxcXCIpIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICBzdHJpcCgwLCAxKTsKCQkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luKCJtdSIpOwoJCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh5eV8ueXl0ZXh0LnNsaWNlKC0xKSA9PT0gIlxcIikgewoJCSAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwKDAsIDEpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW4oImVtdSIpOwoJCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luKCJtdSIpOwoJCSAgICAgICAgICAgICAgICAgICAgfQoJCSAgICAgICAgICAgICAgICAgICAgaWYgKHl5Xy55eXRleHQpIHJldHVybiAxNTsKCgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxOgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE1OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTsKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiAxNTsKCgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAzOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpbigncmF3Jyk7cmV0dXJuIDE1OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDoKCQkgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTsKCQkgICAgICAgICAgICAgICAgICAgIC8vIFNob3VsZCBiZSB1c2luZyBgdGhpcy50b3BTdGF0ZSgpYCBiZWxvdywgYnV0IGl0IGN1cnJlbnRseQoJCSAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJucyB0aGUgc2Vjb25kIHRvcCBpbnN0ZWFkIG9mIHRoZSBmaXJzdCB0b3AuIE9wZW5lZCBhbgoJCSAgICAgICAgICAgICAgICAgICAgLy8gaXNzdWUgYWJvdXQgaXQgYXQgaHR0cHM6Ly9naXRodWIuY29tL3phYWNoL2ppc29uL2lzc3Vlcy8yOTEKCQkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMV0gPT09ICdyYXcnKSB7CgkJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE1OwoJCSAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCQkgICAgICAgICAgICAgICAgICAgICAgICB5eV8ueXl0ZXh0ID0geXlfLnl5dGV4dC5zdWJzdHIoNSwgeXlfLnl5bGVuZyAtIDkpOwoJCSAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRU5EX1JBV19CTE9DSyc7CgkJICAgICAgICAgICAgICAgICAgICB9CgoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNToKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiAxNTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDY6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTQ7CgoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNzoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA2NTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDg6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gNjg7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA5OgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE5OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTA6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luKCdyYXcnKTsKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiAyMzsKCgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxMToKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA1NTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDEyOgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDYwOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTM6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxNDoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA0NzsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDE1OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO3JldHVybiA0NDsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDE2OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO3JldHVybiA0NDsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDE3OgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM0OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMTg6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzk7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAxOToKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA1MTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDIwOgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ4OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjE6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnVucHV0KHl5Xy55eXRleHQpOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpOwoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpbignY29tJyk7CgoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjI6CgkJICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTQ7CgoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjM6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDg7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyNDoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA3MzsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDI1OgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDcyOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMjY6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gNzI7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAyNzoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA4NzsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDI4OgoJCSAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIHdoaXRlc3BhY2UKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDI5OgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO3JldHVybiA1NDsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMwOgoJCSAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO3JldHVybiAzMzsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMxOgoJCSAgICAgICAgICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHN0cmlwKDEsIDIpLnJlcGxhY2UoL1xcIi9nLCAnIicpO3JldHVybiA4MDsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMyOgoJCSAgICAgICAgICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHN0cmlwKDEsIDIpLnJlcGxhY2UoL1xcJy9nLCAiJyIpO3JldHVybiA4MDsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDMzOgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDg1OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMzQ6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gODI7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAzNToKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA4MjsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM2OgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDgzOwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgMzc6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gODQ7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSAzODoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA4MTsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDM5OgoJCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDc1OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgICAgIGNhc2UgNDA6CgkJICAgICAgICAgICAgICAgICAgICByZXR1cm4gNzc7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0MToKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA3MjsKCQkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgICAgICAgICBjYXNlIDQyOgoJCSAgICAgICAgICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQucmVwbGFjZSgvXFwoW1xcXF1dKS9nLCAnJDEnKTtyZXR1cm4gNzI7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0MzoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiAnSU5WQUxJRCc7CgkJICAgICAgICAgICAgICAgICAgICBicmVhazsKCQkgICAgICAgICAgICAgICAgY2FzZSA0NDoKCQkgICAgICAgICAgICAgICAgICAgIHJldHVybiA1OwoJCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgfQoJCSAgICAgICAgfTsKCQkgICAgICAgIGxleGVyLnJ1bGVzID0gWy9eKD86W15ceDAwXSo/KD89KFx7XHspKSkvLCAvXig/OlteXHgwMF0rKS8sIC9eKD86W15ceDAwXXsyLH0/KD89KFx7XHt8XFxce1x7fFxcXFxce1x7fCQpKSkvLCAvXig/Olx7XHtce1x7KD89W15cL10pKS8sIC9eKD86XHtce1x7XHtcL1teXHMhIiMlLSxcLlwvOy0+QFxbLVxeYFx7LX5dKyg/PVs9fVxzXC8uXSlcfVx9XH1cfSkvLCAvXig/OlteXHgwMF0qPyg/PShce1x7XHtceykpKS8sIC9eKD86W1xzXFNdKj8tLSh+KT9cfVx9KS8sIC9eKD86XCgpLywgL14oPzpcKSkvLCAvXig/Olx7XHtce1x7KS8sIC9eKD86XH1cfVx9XH0pLywgL14oPzpce1x7KH4pPz4pLywgL14oPzpce1x7KH4pPyM+KS8sIC9eKD86XHtceyh+KT8jXCo/KS8sIC9eKD86XHtceyh+KT9cLykvLCAvXig/Olx7XHsofik/XF5ccyoofik/XH1cfSkvLCAvXig/Olx7XHsofik/XHMqZWxzZVxzKih+KT9cfVx9KS8sIC9eKD86XHtceyh+KT9cXikvLCAvXig/Olx7XHsofik/XHMqZWxzZVxiKS8sIC9eKD86XHtceyh+KT9ceykvLCAvXig/Olx7XHsofik/JikvLCAvXig/Olx7XHsofik/IS0tKS8sIC9eKD86XHtceyh+KT8hW1xzXFNdKj9cfVx9KS8sIC9eKD86XHtceyh+KT9cKj8pLywgL14oPzo9KS8sIC9eKD86XC5cLikvLCAvXig/OlwuKD89KFs9fn1cc1wvLil8XSkpKS8sIC9eKD86W1wvLl0pLywgL14oPzpccyspLywgL14oPzpcfSh+KT9cfVx9KS8sIC9eKD86KH4pP1x9XH0pLywgL14oPzoiKFxcWyJdfFteIl0pKiIpLywgL14oPzonKFxcWyddfFteJ10pKicpLywgL14oPzpAKS8sIC9eKD86dHJ1ZSg/PShbfn1ccyldKSkpLywgL14oPzpmYWxzZSg/PShbfn1ccyldKSkpLywgL14oPzp1bmRlZmluZWQoPz0oW359XHMpXSkpKS8sIC9eKD86bnVsbCg/PShbfn1ccyldKSkpLywgL14oPzotP1swLTldKyg/OlwuWzAtOV0rKT8oPz0oW359XHMpXSkpKS8sIC9eKD86YXNccytcfCkvLCAvXig/Olx8KS8sIC9eKD86KFteXHMhIiMlLSxcLlwvOy0+QFxbLVxeYFx7LX5dKyg/PShbPX59XHNcLy4pfF0pKSkpLywgL14oPzpcWyhcXFxdfFteXF1dKSpcXSkvLCAvXig/Oi4pLywgL14oPzokKS9dOwoJCSAgICAgICAgbGV4ZXIuY29uZGl0aW9ucyA9IHsgIm11IjogeyAicnVsZXMiOiBbNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNCwgMjUsIDI2LCAyNywgMjgsIDI5LCAzMCwgMzEsIDMyLCAzMywgMzQsIDM1LCAzNiwgMzcsIDM4LCAzOSwgNDAsIDQxLCA0MiwgNDMsIDQ0XSwgImluY2x1c2l2ZSI6IGZhbHNlIH0sICJlbXUiOiB7ICJydWxlcyI6IFsyXSwgImluY2x1c2l2ZSI6IGZhbHNlIH0sICJjb20iOiB7ICJydWxlcyI6IFs2XSwgImluY2x1c2l2ZSI6IGZhbHNlIH0sICJyYXciOiB7ICJydWxlcyI6IFszLCA0LCA1XSwgImluY2x1c2l2ZSI6IGZhbHNlIH0sICJJTklUSUFMIjogeyAicnVsZXMiOiBbMCwgMSwgNDRdLCAiaW5jbHVzaXZlIjogdHJ1ZSB9IH07CgkJICAgICAgICByZXR1cm4gbGV4ZXI7CgkJICAgIH0pKCk7CgkJICAgIHBhcnNlci5sZXhlciA9IGxleGVyOwoJCSAgICBmdW5jdGlvbiBQYXJzZXIoKSB7CgkJICAgICAgICB0aGlzLnl5ID0ge307CgkJICAgIH1QYXJzZXIucHJvdG90eXBlID0gcGFyc2VyO3BhcnNlci5QYXJzZXIgPSBQYXJzZXI7CgkJICAgIHJldHVybiBuZXcgUGFyc2VyKCk7CgkJfSkoKTtleHBvcnRzWyJkZWZhdWx0Il0gPSBoYW5kbGViYXJzOwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1siZGVmYXVsdCJdOwoKCS8qKiovIH0pLAoJLyogMzggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF92aXNpdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7CgoJCXZhciBfdmlzaXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92aXNpdG9yKTsKCgkJZnVuY3Rpb24gV2hpdGVzcGFjZUNvbnRyb2woKSB7CgkJICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdOwoKCQkgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkJfQoJCVdoaXRlc3BhY2VDb250cm9sLnByb3RvdHlwZSA9IG5ldyBfdmlzaXRvcjJbJ2RlZmF1bHQnXSgpOwoKCQlXaGl0ZXNwYWNlQ29udHJvbC5wcm90b3R5cGUuUHJvZ3JhbSA9IGZ1bmN0aW9uIChwcm9ncmFtKSB7CgkJICB2YXIgZG9TdGFuZGFsb25lID0gIXRoaXMub3B0aW9ucy5pZ25vcmVTdGFuZGFsb25lOwoKCQkgIHZhciBpc1Jvb3QgPSAhdGhpcy5pc1Jvb3RTZWVuOwoJCSAgdGhpcy5pc1Jvb3RTZWVuID0gdHJ1ZTsKCgkJICB2YXIgYm9keSA9IHByb2dyYW0uYm9keTsKCQkgIGZvciAodmFyIGkgPSAwLCBsID0gYm9keS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCQkgICAgdmFyIGN1cnJlbnQgPSBib2R5W2ldLAoJCSAgICAgICAgc3RyaXAgPSB0aGlzLmFjY2VwdChjdXJyZW50KTsKCgkJICAgIGlmICghc3RyaXApIHsKCQkgICAgICBjb250aW51ZTsKCQkgICAgfQoKCQkgICAgdmFyIF9pc1ByZXZXaGl0ZXNwYWNlID0gaXNQcmV2V2hpdGVzcGFjZShib2R5LCBpLCBpc1Jvb3QpLAoJCSAgICAgICAgX2lzTmV4dFdoaXRlc3BhY2UgPSBpc05leHRXaGl0ZXNwYWNlKGJvZHksIGksIGlzUm9vdCksCgkJICAgICAgICBvcGVuU3RhbmRhbG9uZSA9IHN0cmlwLm9wZW5TdGFuZGFsb25lICYmIF9pc1ByZXZXaGl0ZXNwYWNlLAoJCSAgICAgICAgY2xvc2VTdGFuZGFsb25lID0gc3RyaXAuY2xvc2VTdGFuZGFsb25lICYmIF9pc05leHRXaGl0ZXNwYWNlLAoJCSAgICAgICAgaW5saW5lU3RhbmRhbA==", "base64"));
  res.write(new Buffer("b25lID0gc3RyaXAuaW5saW5lU3RhbmRhbG9uZSAmJiBfaXNQcmV2V2hpdGVzcGFjZSAmJiBfaXNOZXh0V2hpdGVzcGFjZTsKCgkJICAgIGlmIChzdHJpcC5jbG9zZSkgewoJCSAgICAgIG9taXRSaWdodChib2R5LCBpLCB0cnVlKTsKCQkgICAgfQoJCSAgICBpZiAoc3RyaXAub3BlbikgewoJCSAgICAgIG9taXRMZWZ0KGJvZHksIGksIHRydWUpOwoJCSAgICB9CgoJCSAgICBpZiAoZG9TdGFuZGFsb25lICYmIGlubGluZVN0YW5kYWxvbmUpIHsKCQkgICAgICBvbWl0UmlnaHQoYm9keSwgaSk7CgoJCSAgICAgIGlmIChvbWl0TGVmdChib2R5LCBpKSkgewoJCSAgICAgICAgLy8gSWYgd2UgYXJlIG9uIGEgc3RhbmRhbG9uZSBub2RlLCBzYXZlIHRoZSBpbmRlbnQgaW5mbyBmb3IgcGFydGlhbHMKCQkgICAgICAgIGlmIChjdXJyZW50LnR5cGUgPT09ICdQYXJ0aWFsU3RhdGVtZW50JykgewoJCSAgICAgICAgICAvLyBQdWxsIG91dCB0aGUgd2hpdGVzcGFjZSBmcm9tIHRoZSBmaW5hbCBsaW5lCgkJICAgICAgICAgIGN1cnJlbnQuaW5kZW50ID0gLyhbIFx0XSskKS8uZXhlYyhib2R5W2kgLSAxXS5vcmlnaW5hbClbMV07CgkJICAgICAgICB9CgkJICAgICAgfQoJCSAgICB9CgkJICAgIGlmIChkb1N0YW5kYWxvbmUgJiYgb3BlblN0YW5kYWxvbmUpIHsKCQkgICAgICBvbWl0UmlnaHQoKGN1cnJlbnQucHJvZ3JhbSB8fCBjdXJyZW50LmludmVyc2UpLmJvZHkpOwoKCQkgICAgICAvLyBTdHJpcCBvdXQgdGhlIHByZXZpb3VzIGNvbnRlbnQgbm9kZSBpZiBpdCdzIHdoaXRlc3BhY2Ugb25seQoJCSAgICAgIG9taXRMZWZ0KGJvZHksIGkpOwoJCSAgICB9CgkJICAgIGlmIChkb1N0YW5kYWxvbmUgJiYgY2xvc2VTdGFuZGFsb25lKSB7CgkJICAgICAgLy8gQWx3YXlzIHN0cmlwIHRoZSBuZXh0IG5vZGUKCQkgICAgICBvbWl0UmlnaHQoYm9keSwgaSk7CgoJCSAgICAgIG9taXRMZWZ0KChjdXJyZW50LmludmVyc2UgfHwgY3VycmVudC5wcm9ncmFtKS5ib2R5KTsKCQkgICAgfQoJCSAgfQoKCQkgIHJldHVybiBwcm9ncmFtOwoJCX07CgoJCVdoaXRlc3BhY2VDb250cm9sLnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudCA9IFdoaXRlc3BhY2VDb250cm9sLnByb3RvdHlwZS5EZWNvcmF0b3JCbG9jayA9IFdoaXRlc3BhY2VDb250cm9sLnByb3RvdHlwZS5QYXJ0aWFsQmxvY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoYmxvY2spIHsKCQkgIHRoaXMuYWNjZXB0KGJsb2NrLnByb2dyYW0pOwoJCSAgdGhpcy5hY2NlcHQoYmxvY2suaW52ZXJzZSk7CgoJCSAgLy8gRmluZCB0aGUgaW52ZXJzZSBwcm9ncmFtIHRoYXQgaXMgaW52b2xlZCB3aXRoIHdoaXRlc3BhY2Ugc3RyaXBwaW5nLgoJCSAgdmFyIHByb2dyYW0gPSBibG9jay5wcm9ncmFtIHx8IGJsb2NrLmludmVyc2UsCgkJICAgICAgaW52ZXJzZSA9IGJsb2NrLnByb2dyYW0gJiYgYmxvY2suaW52ZXJzZSwKCQkgICAgICBmaXJzdEludmVyc2UgPSBpbnZlcnNlLAoJCSAgICAgIGxhc3RJbnZlcnNlID0gaW52ZXJzZTsKCgkJICBpZiAoaW52ZXJzZSAmJiBpbnZlcnNlLmNoYWluZWQpIHsKCQkgICAgZmlyc3RJbnZlcnNlID0gaW52ZXJzZS5ib2R5WzBdLnByb2dyYW07CgoJCSAgICAvLyBXYWxrIHRoZSBpbnZlcnNlIGNoYWluIHRvIGZpbmQgdGhlIGxhc3QgaW52ZXJzZSB0aGF0IGlzIGFjdHVhbGx5IGluIHRoZSBjaGFpbi4KCQkgICAgd2hpbGUgKGxhc3RJbnZlcnNlLmNoYWluZWQpIHsKCQkgICAgICBsYXN0SW52ZXJzZSA9IGxhc3RJbnZlcnNlLmJvZHlbbGFzdEludmVyc2UuYm9keS5sZW5ndGggLSAxXS5wcm9ncmFtOwoJCSAgICB9CgkJICB9CgoJCSAgdmFyIHN0cmlwID0gewoJCSAgICBvcGVuOiBibG9jay5vcGVuU3RyaXAub3BlbiwKCQkgICAgY2xvc2U6IGJsb2NrLmNsb3NlU3RyaXAuY2xvc2UsCgoJCSAgICAvLyBEZXRlcm1pbmUgdGhlIHN0YW5kYWxvbmUgY2FuZGlhY3kuIEJhc2ljYWxseSBmbGFnIG91ciBjb250ZW50IGFzIGJlaW5nIHBvc3NpYmx5IHN0YW5kYWxvbmUKCQkgICAgLy8gc28gb3VyIHBhcmVudCBjYW4gZGV0ZXJtaW5lIGlmIHdlIGFjdHVhbGx5IGFyZSBzdGFuZGFsb25lCgkJICAgIG9wZW5TdGFuZGFsb25lOiBpc05leHRXaGl0ZXNwYWNlKHByb2dyYW0uYm9keSksCgkJICAgIGNsb3NlU3RhbmRhbG9uZTogaXNQcmV2V2hpdGVzcGFjZSgoZmlyc3RJbnZlcnNlIHx8IHByb2dyYW0pLmJvZHkpCgkJICB9OwoKCQkgIGlmIChibG9jay5vcGVuU3RyaXAuY2xvc2UpIHsKCQkgICAgb21pdFJpZ2h0KHByb2dyYW0uYm9keSwgbnVsbCwgdHJ1ZSk7CgkJICB9CgoJCSAgaWYgKGludmVyc2UpIHsKCQkgICAgdmFyIGludmVyc2VTdHJpcCA9IGJsb2NrLmludmVyc2VTdHJpcDsKCgkJICAgIGlmIChpbnZlcnNlU3RyaXAub3BlbikgewoJCSAgICAgIG9taXRMZWZ0KHByb2dyYW0uYm9keSwgbnVsbCwgdHJ1ZSk7CgkJICAgIH0KCgkJICAgIGlmIChpbnZlcnNlU3RyaXAuY2xvc2UpIHsKCQkgICAgICBvbWl0UmlnaHQoZmlyc3RJbnZlcnNlLmJvZHksIG51bGwsIHRydWUpOwoJCSAgICB9CgkJICAgIGlmIChibG9jay5jbG9zZVN0cmlwLm9wZW4pIHsKCQkgICAgICBvbWl0TGVmdChsYXN0SW52ZXJzZS5ib2R5LCBudWxsLCB0cnVlKTsKCQkgICAgfQoKCQkgICAgLy8gRmluZCBzdGFuZGFsb25lIGVsc2Ugc3RhdG1lbnRzCgkJICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZVN0YW5kYWxvbmUgJiYgaXNQcmV2V2hpdGVzcGFjZShwcm9ncmFtLmJvZHkpICYmIGlzTmV4dFdoaXRlc3BhY2UoZmlyc3RJbnZlcnNlLmJvZHkpKSB7CgkJICAgICAgb21pdExlZnQocHJvZ3JhbS5ib2R5KTsKCQkgICAgICBvbWl0UmlnaHQoZmlyc3RJbnZlcnNlLmJvZHkpOwoJCSAgICB9CgkJICB9IGVsc2UgaWYgKGJsb2NrLmNsb3NlU3RyaXAub3BlbikgewoJCSAgICBvbWl0TGVmdChwcm9ncmFtLmJvZHksIG51bGwsIHRydWUpOwoJCSAgfQoKCQkgIHJldHVybiBzdHJpcDsKCQl9OwoKCQlXaGl0ZXNwYWNlQ29udHJvbC5wcm90b3R5cGUuRGVjb3JhdG9yID0gV2hpdGVzcGFjZUNvbnRyb2wucHJvdG90eXBlLk11c3RhY2hlU3RhdGVtZW50ID0gZnVuY3Rpb24gKG11c3RhY2hlKSB7CgkJICByZXR1cm4gbXVzdGFjaGUuc3RyaXA7CgkJfTsKCgkJV2hpdGVzcGFjZUNvbnRyb2wucHJvdG90eXBlLlBhcnRpYWxTdGF0ZW1lbnQgPSBXaGl0ZXNwYWNlQ29udHJvbC5wcm90b3R5cGUuQ29tbWVudFN0YXRlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7CgkJICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoJCSAgdmFyIHN0cmlwID0gbm9kZS5zdHJpcCB8fCB7fTsKCQkgIHJldHVybiB7CgkJICAgIGlubGluZVN0YW5kYWxvbmU6IHRydWUsCgkJICAgIG9wZW46IHN0cmlwLm9wZW4sCgkJICAgIGNsb3NlOiBzdHJpcC5jbG9zZQoJCSAgfTsKCQl9OwoKCQlmdW5jdGlvbiBpc1ByZXZXaGl0ZXNwYWNlKGJvZHksIGksIGlzUm9vdCkgewoJCSAgaWYgKGkgPT09IHVuZGVmaW5lZCkgewoJCSAgICBpID0gYm9keS5sZW5ndGg7CgkJICB9CgoJCSAgLy8gTm9kZXMgdGhhdCBlbmQgd2l0aCBuZXdsaW5lcyBhcmUgY29uc2lkZXJlZCB3aGl0ZXNwYWNlIChidXQgYXJlIHNwZWNpYWwKCQkgIC8vIGNhc2VkIGZvciBzdHJpcCBvcGVyYXRpb25zKQoJCSAgdmFyIHByZXYgPSBib2R5W2kgLSAxXSwKCQkgICAgICBzaWJsaW5nID0gYm9keVtpIC0gMl07CgkJICBpZiAoIXByZXYpIHsKCQkgICAgcmV0dXJuIGlzUm9vdDsKCQkgIH0KCgkJICBpZiAocHJldi50eXBlID09PSAnQ29udGVudFN0YXRlbWVudCcpIHsKCQkgICAgcmV0dXJuIChzaWJsaW5nIHx8ICFpc1Jvb3QgPyAvXHI/XG5ccyo/JC8gOiAvKF58XHI/XG4pXHMqPyQvKS50ZXN0KHByZXYub3JpZ2luYWwpOwoJCSAgfQoJCX0KCQlmdW5jdGlvbiBpc05leHRXaGl0ZXNwYWNlKGJvZHksIGksIGlzUm9vdCkgewoJCSAgaWYgKGkgPT09IHVuZGVmaW5lZCkgewoJCSAgICBpID0gLTE7CgkJICB9CgoJCSAgdmFyIG5leHQgPSBib2R5W2kgKyAxXSwKCQkgICAgICBzaWJsaW5nID0gYm9keVtpICsgMl07CgkJICBpZiAoIW5leHQpIHsKCQkgICAgcmV0dXJuIGlzUm9vdDsKCQkgIH0KCgkJICBpZiAobmV4dC50eXBlID09PSAnQ29udGVudFN0YXRlbWVudCcpIHsKCQkgICAgcmV0dXJuIChzaWJsaW5nIHx8ICFpc1Jvb3QgPyAvXlxzKj9ccj9cbi8gOiAvXlxzKj8oXHI/XG58JCkvKS50ZXN0KG5leHQub3JpZ2luYWwpOwoJCSAgfQoJCX0KCgkJLy8gTWFya3MgdGhlIG5vZGUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBwb3NpdGlvbiBhcyBvbWl0dGVkLgoJCS8vIEkuZS4ge3tmb299fScgJyB3aWxsIG1hcmsgdGhlICcgJyBub2RlIGFzIG9taXR0ZWQuCgkJLy8KCQkvLyBJZiBpIGlzIHVuZGVmaW5lZCwgdGhlbiB0aGUgZmlyc3QgY2hpbGQgd2lsbCBiZSBtYXJrZWQgYXMgc3VjaC4KCQkvLwoJCS8vIElmIG11bGl0cGxlIGlzIHRydXRoeSB0aGVuIGFsbCB3aGl0ZXNwYWNlIHdpbGwgYmUgc3RyaXBwZWQgb3V0IHVudGlsIG5vbi13aGl0ZXNwYWNlCgkJLy8gY29udGVudCBpcyBtZXQuCgkJZnVuY3Rpb24gb21pdFJpZ2h0KGJvZHksIGksIG11bHRpcGxlKSB7CgkJICB2YXIgY3VycmVudCA9IGJvZHlbaSA9PSBudWxsID8gMCA6IGkgKyAxXTsKCQkgIGlmICghY3VycmVudCB8fCBjdXJyZW50LnR5cGUgIT09ICdDb250ZW50U3RhdGVtZW50JyB8fCAhbXVsdGlwbGUgJiYgY3VycmVudC5yaWdodFN0cmlwcGVkKSB7CgkJICAgIHJldHVybjsKCQkgIH0KCgkJICB2YXIgb3JpZ2luYWwgPSBjdXJyZW50LnZhbHVlOwoJCSAgY3VycmVudC52YWx1ZSA9IGN1cnJlbnQudmFsdWUucmVwbGFjZShtdWx0aXBsZSA/IC9eXHMrLyA6IC9eWyBcdF0qXHI/XG4/LywgJycpOwoJCSAgY3VycmVudC5yaWdodFN0cmlwcGVkID0gY3VycmVudC52YWx1ZSAhPT0gb3JpZ2luYWw7CgkJfQoKCQkvLyBNYXJrcyB0aGUgbm9kZSB0byB0aGUgbGVmdCBvZiB0aGUgcG9zaXRpb24gYXMgb21pdHRlZC4KCQkvLyBJLmUuICcgJ3t7Zm9vfX0gd2lsbCBtYXJrIHRoZSAnICcgbm9kZSBhcyBvbWl0dGVkLgoJCS8vCgkJLy8gSWYgaSBpcyB1bmRlZmluZWQgdGhlbiB0aGUgbGFzdCBjaGlsZCB3aWxsIGJlIG1hcmtlZCBhcyBzdWNoLgoJCS8vCgkJLy8gSWYgbXVsaXRwbGUgaXMgdHJ1dGh5IHRoZW4gYWxsIHdoaXRlc3BhY2Ugd2lsbCBiZSBzdHJpcHBlZCBvdXQgdW50aWwgbm9uLXdoaXRlc3BhY2UKCQkvLyBjb250ZW50IGlzIG1ldC4KCQlmdW5jdGlvbiBvbWl0TGVmdChib2R5LCBpLCBtdWx0aXBsZSkgewoJCSAgdmFyIGN1cnJlbnQgPSBib2R5W2kgPT0gbnVsbCA/IGJvZHkubGVuZ3RoIC0gMSA6IGkgLSAxXTsKCQkgIGlmICghY3VycmVudCB8fCBjdXJyZW50LnR5cGUgIT09ICdDb250ZW50U3RhdGVtZW50JyB8fCAhbXVsdGlwbGUgJiYgY3VycmVudC5sZWZ0U3RyaXBwZWQpIHsKCQkgICAgcmV0dXJuOwoJCSAgfQoKCQkgIC8vIFdlIG9taXQgdGhlIGxhc3Qgbm9kZSBpZiBpdCdzIHdoaXRlc3BhY2Ugb25seSBhbmQgbm90IHByZWNlZWRlZCBieSBhIG5vbi1jb250ZW50IG5vZGUuCgkJICB2YXIgb3JpZ2luYWwgPSBjdXJyZW50LnZhbHVlOwoJCSAgY3VycmVudC52YWx1ZSA9IGN1cnJlbnQudmFsdWUucmVwbGFjZShtdWx0aXBsZSA/IC9ccyskLyA6IC9bIFx0XSskLywgJycpOwoJCSAgY3VycmVudC5sZWZ0U3RyaXBwZWQgPSBjdXJyZW50LnZhbHVlICE9PSBvcmlnaW5hbDsKCQkgIHJldHVybiBjdXJyZW50LmxlZnRTdHJpcHBlZDsKCQl9CgoJCWV4cG9ydHNbJ2RlZmF1bHQnXSA9IFdoaXRlc3BhY2VDb250cm9sOwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMzkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF9leGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCQl2YXIgX2V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGNlcHRpb24pOwoKCQlmdW5jdGlvbiBWaXNpdG9yKCkgewoJCSAgdGhpcy5wYXJlbnRzID0gW107CgkJfQoKCQlWaXNpdG9yLnByb3RvdHlwZSA9IHsKCQkgIGNvbnN0cnVjdG9yOiBWaXNpdG9yLAoJCSAgbXV0YXRpbmc6IGZhbHNlLAoKCQkgIC8vIFZpc2l0cyBhIGdpdmVuIHZhbHVlLiBJZiBtdXRhdGluZywgd2lsbCByZXBsYWNlIHRoZSB2YWx1ZSBpZiBuZWNlc3NhcnkuCgkJICBhY2NlcHRLZXk6IGZ1bmN0aW9uIGFjY2VwdEtleShub2RlLCBuYW1lKSB7CgkJICAgIHZhciB2YWx1ZSA9IHRoaXMuYWNjZXB0KG5vZGVbbmFtZV0pOwoJCSAgICBpZiAodGhpcy5tdXRhdGluZykgewoJCSAgICAgIC8vIEhhY2t5IHNhbml0eSBjaGVjazogVGhpcyBtYXkgaGF2ZSBhIGZldyBmYWxzZSBwb3NpdGl2ZXMgZm9yIHR5cGUgZm9yIHRoZSBoZWxwZXIKCQkgICAgICAvLyBtZXRob2RzIGJ1dCB3aWxsIGdlbmVyYWxseSBkbyB0aGUgcmlnaHQgdGhpbmcgd2l0aG91dCBhIGxvdCBvZiBvdmVyaGVhZC4KCQkgICAgICBpZiAodmFsdWUgJiYgIVZpc2l0b3IucHJvdG90eXBlW3ZhbHVlLnR5cGVdKSB7CgkJICAgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnVW5leHBlY3RlZCBub2RlIHR5cGUgIicgKyB2YWx1ZS50eXBlICsgJyIgZm91bmQgd2hlbiBhY2NlcHRpbmcgJyArIG5hbWUgKyAnIG9uICcgKyBub2RlLnR5cGUpOwoJCSAgICAgIH0KCQkgICAgICBub2RlW25hbWVdID0gdmFsdWU7CgkJICAgIH0KCQkgIH0sCgoJCSAgLy8gUGVyZm9ybXMgYW4gYWNjZXB0IG9wZXJhdGlvbiB3aXRoIGFkZGVkIHNhbml0eSBjaGVjayB0byBlbnN1cmUKCQkgIC8vIHJlcXVpcmVkIGtleXMgYXJlIG5vdCByZW1vdmVkLgoJCSAgYWNjZXB0UmVxdWlyZWQ6IGZ1bmN0aW9uIGFjY2VwdFJlcXVpcmVkKG5vZGUsIG5hbWUpIHsKCQkgICAgdGhpcy5hY2NlcHRLZXkobm9kZSwgbmFtZSk7CgoJCSAgICBpZiAoIW5vZGVbbmFtZV0pIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXShub2RlLnR5cGUgKyAnIHJlcXVpcmVzICcgKyBuYW1lKTsKCQkgICAgfQoJCSAgfSwKCgkJICAvLyBUcmF2ZXJzZXMgYSBnaXZlbiBhcnJheS4gSWYgbXV0YXRpbmcsIGVtcHR5IHJlc3Buc2VzIHdpbGwgYmUgcmVtb3ZlZAoJCSAgLy8gZm9yIGNoaWxkIGVsZW1lbnRzLgoJCSAgYWNjZXB0QXJyYXk6IGZ1bmN0aW9uIGFjY2VwdEFycmF5KGFycmF5KSB7CgkJICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJICAgICAgdGhpcy5hY2NlcHRLZXkoYXJyYXksIGkpOwoKCQkgICAgICBpZiAoIWFycmF5W2ldKSB7CgkJICAgICAgICBhcnJheS5zcGxpY2UoaSwgMSk7CgkJICAgICAgICBpLS07CgkJICAgICAgICBsLS07CgkJICAgICAgfQoJCSAgICB9CgkJICB9LAoKCQkgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KG9iamVjdCkgewoJCSAgICBpZiAoIW9iamVjdCkgewoJCSAgICAgIHJldHVybjsKCQkgICAgfQoKCQkgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IFNhbml0eSBjb2RlICovCgkJICAgIGlmICghdGhpc1tvYmplY3QudHlwZV0pIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnVW5rbm93biB0eXBlOiAnICsgb2JqZWN0LnR5cGUsIG9iamVjdCk7CgkJICAgIH0KCgkJICAgIGlmICh0aGlzLmN1cnJlbnQpIHsKCQkgICAgICB0aGlzLnBhcmVudHMudW5zaGlmdCh0aGlzLmN1cnJlbnQpOwoJCSAgICB9CgkJICAgIHRoaXMuY3VycmVudCA9IG9iamVjdDsKCgkJICAgIHZhciByZXQgPSB0aGlzW29iamVjdC50eXBlXShvYmplY3QpOwoKCQkgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wYXJlbnRzLnNoaWZ0KCk7CgoJCSAgICBpZiAoIXRoaXMubXV0YXRpbmcgfHwgcmV0KSB7CgkJICAgICAgcmV0dXJuIHJldDsKCQkgICAgfSBlbHNlIGlmIChyZXQgIT09IGZhbHNlKSB7CgkJICAgICAgcmV0dXJuIG9iamVjdDsKCQkgICAgfQoJCSAgfSwKCgkJICBQcm9ncmFtOiBmdW5jdGlvbiBQcm9ncmFtKHByb2dyYW0pIHsKCQkgICAgdGhpcy5hY2NlcHRBcnJheShwcm9ncmFtLmJvZHkpOwoJCSAgfSwKCgkJICBNdXN0YWNoZVN0YXRlbWVudDogdmlzaXRTdWJFeHByZXNzaW9uLAoJCSAgRGVjb3JhdG9yOiB2aXNpdFN1YkV4cHJlc3Npb24sCgoJCSAgQmxvY2tTdGF0ZW1lbnQ6IHZpc2l0QmxvY2ssCgkJICBEZWNvcmF0b3JCbG9jazogdmlzaXRCbG9jaywKCgkJICBQYXJ0aWFsU3RhdGVtZW50OiB2aXNpdFBhcnRpYWwsCgkJICBQYXJ0aWFsQmxvY2tTdGF0ZW1lbnQ6IGZ1bmN0aW9uIFBhcnRpYWxCbG9ja1N0YXRlbWVudChwYXJ0aWFsKSB7CgkJICAgIHZpc2l0UGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwpOwoKCQkgICAgdGhpcy5hY2NlcHRLZXkocGFydGlhbCwgJ3Byb2dyYW0nKTsKCQkgIH0sCgoJCSAgQ29udGVudFN0YXRlbWVudDogZnVuY3Rpb24gQ29udGVudFN0YXRlbWVudCgpIC8qIGNvbnRlbnQgKi97fSwKCQkgIENvbW1lbnRTdGF0ZW1lbnQ6IGZ1bmN0aW9uIENvbW1lbnRTdGF0ZW1lbnQoKSAvKiBjb21tZW50ICove30sCgoJCSAgU3ViRXhwcmVzc2lvbjogdmlzaXRTdWJFeHByZXNzaW9uLAoKCQkgIFBhdGhFeHByZXNzaW9uOiBmdW5jdGlvbiBQYXRoRXhwcmVzc2lvbigpIC8qIHBhdGggKi97fSwKCgkJICBTdHJpbmdMaXRlcmFsOiBmdW5jdGlvbiBTdHJpbmdMaXRlcmFsKCkgLyogc3RyaW5nICove30sCgkJICBOdW1iZXJMaXRlcmFsOiBmdW5jdGlvbiBOdW1iZXJMaXRlcmFsKCkgLyogbnVtYmVyICove30sCgkJICBCb29sZWFuTGl0ZXJhbDogZnVuY3Rpb24gQm9vbGVhbkxpdGVyYWwoKSAvKiBib29sICove30sCgkJICBVbmRlZmluZWRMaXRlcmFsOiBmdW5jdGlvbiBVbmRlZmluZWRMaXRlcmFsKCkgLyogbGl0ZXJhbCAqL3t9LAoJCSAgTnVsbExpdGVyYWw6IGZ1bmN0aW9uIE51bGxMaXRlcmFsKCkgLyogbGl0ZXJhbCAqL3t9LAoKCQkgIEhhc2g6IGZ1bmN0aW9uIEhhc2goaGFzaCkgewoJCSAgICB0aGlzLmFjY2VwdEFycmF5KGhhc2gucGFpcnMpOwoJCSAgfSwKCQkgIEhhc2hQYWlyOiBmdW5jdGlvbiBIYXNoUGFpcihwYWlyKSB7CgkJICAgIHRoaXMuYWNjZXB0UmVxdWlyZWQocGFpciwgJ3ZhbHVlJyk7CgkJICB9CgkJfTsKCgkJZnVuY3Rpb24gdmlzaXRTdWJFeHByZXNzaW9uKG11c3RhY2hlKSB7CgkJICB0aGlzLmFjY2VwdFJlcXVpcmVkKG11c3RhY2hlLCAncGF0aCcpOwoJCSAgdGhpcy5hY2NlcHRBcnJheShtdXN0YWNoZS5wYXJhbXMpOwoJCSAgdGhpcy5hY2NlcHRLZXkobXVzdGFjaGUsICdoYXNoJyk7CgkJfQoJCWZ1bmN0aW9uIHZpc2l0QmxvY2soYmxvY2spIHsKCQkgIHZpc2l0U3ViRXhwcmVzc2lvbi5jYWxsKHRoaXMsIGJsb2NrKTsKCgkJICB0aGlzLmFjY2VwdEtleShibG9jaywgJ3Byb2dyYW0nKTsKCQkgIHRoaXMuYWNjZXB0S2V5KGJsb2NrLCAnaW52ZXJzZScpOwoJCX0KCQlmdW5jdGlvbiB2aXNpdFBhcnRpYWwocGFydGlhbCkgewoJCSAgdGhpcy5hY2NlcHRSZXF1aXJlZChwYXJ0aWFsLCAnbmFtZScpOwoJCSAgdGhpcy5hY2NlcHRBcnJheShwYXJ0aWFsLnBhcmFtcyk7CgkJICB0aGlzLmFjY2VwdEtleShwYXJ0aWFsLCAnaGFzaCcpOwoJCX0KCgkJZXhwb3J0c1snZGVmYXVsdCddID0gVmlzaXRvcjsKCQltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCgkvKioqLyB9KSwKCS8qIDQwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCSd1c2Ugc3RyaWN0JzsKCgkJdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpWydkZWZhdWx0J107CgoJCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgkJZXhwb3J0cy5Tb3VyY2VMb2NhdGlvbiA9IFNvdXJjZUxvY2F0aW9uOwoJCWV4cG9ydHMuaWQgPSBpZDsKCQlleHBvcnRzLnN0cmlwRmxhZ3MgPSBzdHJpcEZsYWdzOwoJCWV4cG9ydHMuc3RyaXBDb21tZW50ID0gc3RyaXBDb21tZW50OwoJCWV4cG9ydHMucHJlcGFyZVBhdGggPSBwcmVwYXJlUGF0aDsKCQlleHBvcnRzLnByZXBhcmVNdXN0YWNoZSA9IHByZXBhcmVNdXN0YWNoZTsKCQlleHBvcnRzLnByZXBhcmVSYXdCbG9jayA9IHByZXBhcmVSYXdCbG9jazsKCQlleHBvcnRzLnByZXBhcmVCbG9jayA9IHByZXBhcmVCbG9jazsKCQlleHBvcnRzLnByZXBhcmVQcm9ncmFtID0gcHJlcGFyZVByb2dyYW07CgkJZXhwb3J0cy5wcmVwYXJlUGFydGlhbEJsb2NrID0gcHJlcGFyZVBhcnRpYWxCbG9jazsKCgkJdmFyIF9leGNlcHRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCQl2YXIgX2V4Y2VwdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGNlcHRpb24pOwoKCQlmdW5jdGlvbiB2YWxpZGF0ZUNsb3NlKG9wZW4sIGNsb3NlKSB7CgkJICBjbG9zZSA9IGNsb3NlLnBhdGggPyBjbG9zZS5wYXRoLm9yaWdpbmFsIDogY2xvc2U7CgoJCSAgaWYgKG9wZW4ucGF0aC5vcmlnaW5hbCAhPT0gY2xvc2UpIHsKCQkgICAgdmFyIGVycm9yTm9kZSA9IHsgbG9jOiBvcGVuLnBhdGgubG9jIH07CgoJCSAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXShvcGVuLnBhdGgub3JpZ2luYWwgKyAiIGRvZXNuJ3QgbWF0Y2ggIiArIGNsb3NlLCBlcnJvck5vZGUpOwoJCSAgfQoJCX0KCgkJZnVuY3Rpb24gU291cmNlTG9jYXRpb24oc291cmNlLCBsb2NJbmZvKSB7CgkJICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKCQkgIHRoaXMuc3RhcnQgPSB7CgkJICAgIGxpbmU6IGxvY0luZm8uZmlyc3RfbGluZSwKCQkgICAgY29sdW1uOiBsb2NJbmZvLmZpcnN0X2NvbHVtbgoJCSAgfTsKCQkgIHRoaXMuZW5kID0gewoJCSAgICBsaW5lOiBsb2NJbmZvLmxhc3RfbGluZSwKCQkgICAgY29sdW1uOiBsb2NJbmZvLmxhc3RfY29sdW1uCgkJICB9OwoJCX0KCgkJZnVuY3Rpb24gaWQodG9rZW4pIHsKCQkgIGlmICgvXlxbLipcXSQvLnRlc3QodG9rZW4pKSB7CgkJICAgIHJldHVybiB0b2tlbi5zdWJzdHIoMSwgdG9rZW4ubGVuZ3RoIC0gMik7CgkJICB9IGVsc2UgewoJCSAgICByZXR1cm4gdG9rZW47CgkJICB9CgkJfQoKCQlmdW5jdGlvbiBzdHJpcEZsYWdzKG9wZW4sIGNsb3NlKSB7CgkJICByZXR1cm4gewoJCSAgICBvcGVuOiBvcGVuLmNoYXJBdCgyKSA9PT0gJ34nLAoJCSAgICBjbG9zZTogY2xvc2UuY2hhckF0KGNsb3NlLmxlbmd0aCAtIDMpID09PSAnficKCQkgIH07CgkJfQoKCQlmdW5jdGlvbiBzdHJpcENvbW1lbnQoY29tbWVudCkgewoJCSAgcmV0dXJuIGNvbW1lbnQucmVwbGFjZSgvXlx7XHt+P1whLT8tPy8sICcnKS5yZXBsYWNlKC8tPy0/fj9cfVx9JC8sICcnKTsKCQl9CgoJCWZ1bmN0aW9uIHByZXBhcmVQYXRoKGRhdGEsIHBhcnRzLCBsb2MpIHsKCQkgIGxvYyA9IHRoaXMubG9jSW5mbyhsb2MpOwoKCQkgIHZhciBvcmlnaW5hbCA9IGRhdGEgPyAnQCcgOiAnJywKCQkgICAgICBkaWcgPSBbXSwKCQkgICAgICBkZXB0aCA9IDAsCgkJICAgICAgZGVwdGhTdHJpbmcgPSAnJzsKCg==", "base64"));
  res.write(new Buffer("CQkgIGZvciAodmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJICAgIHZhciBwYXJ0ID0gcGFydHNbaV0ucGFydCwKCgkJICAgIC8vIElmIHdlIGhhdmUgW10gc3ludGF4IHRoZW4gd2UgZG8gbm90IHRyZWF0IHBhdGggcmVmZXJlbmNlcyBhcyBvcGVyYXRvcnMsCgkJICAgIC8vIGkuZS4gZm9vLlt0aGlzXSByZXNvbHZlcyB0byBhcHByb3hpbWF0ZWx5IGNvbnRleHQuZm9vWyd0aGlzJ10KCQkgICAgaXNMaXRlcmFsID0gcGFydHNbaV0ub3JpZ2luYWwgIT09IHBhcnQ7CgkJICAgIG9yaWdpbmFsICs9IChwYXJ0c1tpXS5zZXBhcmF0b3IgfHwgJycpICsgcGFydDsKCgkJICAgIGlmICghaXNMaXRlcmFsICYmIChwYXJ0ID09PSAnLi4nIHx8IHBhcnQgPT09ICcuJyB8fCBwYXJ0ID09PSAndGhpcycpKSB7CgkJICAgICAgaWYgKGRpZy5sZW5ndGggPiAwKSB7CgkJICAgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnSW52YWxpZCBwYXRoOiAnICsgb3JpZ2luYWwsIHsgbG9jOiBsb2MgfSk7CgkJICAgICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7CgkJICAgICAgICBkZXB0aCsrOwoJCSAgICAgICAgZGVwdGhTdHJpbmcgKz0gJy4uLyc7CgkJICAgICAgfQoJCSAgICB9IGVsc2UgewoJCSAgICAgIGRpZy5wdXNoKHBhcnQpOwoJCSAgICB9CgkJICB9CgoJCSAgcmV0dXJuIHsKCQkgICAgdHlwZTogJ1BhdGhFeHByZXNzaW9uJywKCQkgICAgZGF0YTogZGF0YSwKCQkgICAgZGVwdGg6IGRlcHRoLAoJCSAgICBwYXJ0czogZGlnLAoJCSAgICBvcmlnaW5hbDogb3JpZ2luYWwsCgkJICAgIGxvYzogbG9jCgkJICB9OwoJCX0KCgkJZnVuY3Rpb24gcHJlcGFyZU11c3RhY2hlKHBhdGgsIHBhcmFtcywgaGFzaCwgb3Blbiwgc3RyaXAsIGxvY0luZm8pIHsKCQkgIC8vIE11c3QgdXNlIGNoYXJBdCB0byBzdXBwb3J0IElFIHByZS0xMAoJCSAgdmFyIGVzY2FwZUZsYWcgPSBvcGVuLmNoYXJBdCgzKSB8fCBvcGVuLmNoYXJBdCgyKSwKCQkgICAgICBlc2NhcGVkID0gZXNjYXBlRmxhZyAhPT0gJ3snICYmIGVzY2FwZUZsYWcgIT09ICcmJzsKCgkJICB2YXIgZGVjb3JhdG9yID0gL1wqLy50ZXN0KG9wZW4pOwoJCSAgcmV0dXJuIHsKCQkgICAgdHlwZTogZGVjb3JhdG9yID8gJ0RlY29yYXRvcicgOiAnTXVzdGFjaGVTdGF0ZW1lbnQnLAoJCSAgICBwYXRoOiBwYXRoLAoJCSAgICBwYXJhbXM6IHBhcmFtcywKCQkgICAgaGFzaDogaGFzaCwKCQkgICAgZXNjYXBlZDogZXNjYXBlZCwKCQkgICAgc3RyaXA6IHN0cmlwLAoJCSAgICBsb2M6IHRoaXMubG9jSW5mbyhsb2NJbmZvKQoJCSAgfTsKCQl9CgoJCWZ1bmN0aW9uIHByZXBhcmVSYXdCbG9jayhvcGVuUmF3QmxvY2ssIGNvbnRlbnRzLCBjbG9zZSwgbG9jSW5mbykgewoJCSAgdmFsaWRhdGVDbG9zZShvcGVuUmF3QmxvY2ssIGNsb3NlKTsKCgkJICBsb2NJbmZvID0gdGg=", "base64"));
  res.write(new Buffer("aXMubG9jSW5mbyhsb2NJbmZvKTsKCQkgIHZhciBwcm9ncmFtID0gewoJCSAgICB0eXBlOiAnUHJvZ3JhbScsCgkJICAgIGJvZHk6IGNvbnRlbnRzLAoJCSAgICBzdHJpcDoge30sCgkJICAgIGxvYzogbG9jSW5mbwoJCSAgfTsKCgkJICByZXR1cm4gewoJCSAgICB0eXBlOiAnQmxvY2tTdGF0ZW1lbnQnLAoJCSAgICBwYXRoOiBvcGVuUmF3QmxvY2sucGF0aCwKCQkgICAgcGFyYW1zOiBvcGVuUmF3QmxvY2sucGFyYW1zLAoJCSAgICBoYXNoOiBvcGVuUmF3QmxvY2suaGFzaCwKCQkgICAgcHJvZ3JhbTogcHJvZ3JhbSwKCQkgICAgb3BlblN0cmlwOiB7fSwKCQkgICAgaW52ZXJzZVN0cmlwOiB7fSwKCQkgICAgY2xvc2VTdHJpcDoge30sCgkJICAgIGxvYzogbG9jSW5mbwoJCSAgfTsKCQl9CgoJCWZ1bmN0aW9uIHByZXBhcmVCbG9jayhvcGVuQmxvY2ssIHByb2dyYW0sIGludmVyc2VBbmRQcm9ncmFtLCBjbG9zZSwgaW52ZXJ0ZWQsIGxvY0luZm8pIHsKCQkgIGlmIChjbG9zZSAmJiBjbG9zZS5wYXRoKSB7CgkJICAgIHZhbGlkYXRlQ2xvc2Uob3BlbkJsb2NrLCBjbG9zZSk7CgkJICB9CgoJCSAgdmFyIGRlY29yYXRvciA9IC9cKi8udGVzdChvcGVuQmxvY2sub3Blbik7CgoJCSAgcHJvZ3JhbS5ibG9ja1BhcmFtcyA9IG9wZW5CbG9jay5ibG9ja1BhcmFtczsKCgkJICB2YXIgaW52ZXJzZSA9IHVuZGVmaW5lZCwKCQkgICAgICBpbnZlcnNlU3RyaXAgPSB1bmRlZmluZWQ7CgoJCSAgaWYgKGludmVyc2VBbmRQcm9ncmFtKSB7CgkJICAgIGlmIChkZWNvcmF0b3IpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnVW5leHBlY3RlZCBpbnZlcnNlIGJsb2NrIG9uIGRlY29yYXRvcicsIGludmVyc2VBbmRQcm9ncmFtKTsKCQkgICAgfQoKCQkgICAgaWYgKGludmVyc2VBbmRQcm9ncmFtLmNoYWluKSB7CgkJICAgICAgaW52ZXJzZUFuZFByb2dyYW0ucHJvZ3JhbS5ib2R5WzBdLmNsb3NlU3RyaXAgPSBjbG9zZS5zdHJpcDsKCQkgICAgfQoKCQkgICAgaW52ZXJzZVN0cmlwID0gaW52ZXJzZUFuZFByb2dyYW0uc3RyaXA7CgkJICAgIGludmVyc2UgPSBpbnZlcnNlQW5kUHJvZ3JhbS5wcm9ncmFtOwoJCSAgfQoKCQkgIGlmIChpbnZlcnRlZCkgewoJCSAgICBpbnZlcnRlZCA9IGludmVyc2U7CgkJICAgIGludmVyc2UgPSBwcm9ncmFtOwoJCSAgICBwcm9ncmFtID0gaW52ZXJ0ZWQ7CgkJICB9CgoJCSAgcmV0dXJuIHsKCQkgICAgdHlwZTogZGVjb3JhdG9yID8gJ0RlY29yYXRvckJsb2NrJyA6ICdCbG9ja1N0YXRlbWVudCcsCgkJICAgIHBhdGg6IG9wZW5CbG9jay5wYXRoLAoJCSAgICBwYXJhbXM6IG9wZW5CbG9jay5wYXJhbXMsCgkJICAgIGhhc2g6IG9wZW5CbG9jay5oYXNoLAoJCSAgICBwcm9ncmFtOiBwcm9ncmFtLAoJCSAgICBpbnZlcnNlOiBpbnZlcnNlLAoJCSAgICBvcGVuU3RyaXA6IG9wZW5CbG9jay5zdHJpcCwKCQkgICAgaW52ZXJzZVN0cmlwOiBpbnZlcnNlU3RyaXAsCgkJICAgIGNsb3NlU3RyaXA6IGNsb3NlICYmIGNsb3NlLnN0cmlwLAoJCSAgICBsb2M6IHRoaXMubG9jSW5mbyhsb2NJbmZvKQoJCSAgfTsKCQl9CgoJCWZ1bmN0aW9uIHByZXBhcmVQcm9ncmFtKHN0YXRlbWVudHMsIGxvYykgewoJCSAgaWYgKCFsb2MgJiYgc3RhdGVtZW50cy5sZW5ndGgpIHsKCQkgICAgdmFyIGZpcnN0TG9jID0gc3RhdGVtZW50c1swXS5sb2MsCgkJICAgICAgICBsYXN0TG9jID0gc3RhdGVtZW50c1tzdGF0ZW1lbnRzLmxlbmd0aCAtIDFdLmxvYzsKCgkJICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCgkJICAgIGlmIChmaXJzdExvYyAmJiBsYXN0TG9jKSB7CgkJICAgICAgbG9jID0gewoJCSAgICAgICAgc291cmNlOiBmaXJzdExvYy5zb3VyY2UsCgkJICAgICAgICBzdGFydDogewoJCSAgICAgICAgICBsaW5lOiBmaXJzdExvYy5zdGFydC5saW5lLAoJCSAgICAgICAgICBjb2x1bW46IGZpcnN0TG9jLnN0YXJ0LmNvbHVtbgoJCSAgICAgICAgfSwKCQkgICAgICAgIGVuZDogewoJCSAgICAgICAgICBsaW5lOiBsYXN0TG9jLmVuZC5saW5lLAoJCSAgICAgICAgICBjb2x1bW46IGxhc3RMb2MuZW5kLmNvbHVtbgoJCSAgICAgICAgfQoJCSAgICAgIH07CgkJICAgIH0KCQkgIH0KCgkJICByZXR1cm4gewoJCSAgICB0eXBlOiAnUHJvZ3JhbScsCgkJICAgIGJvZHk6IHN0YXRlbWVudHMsCgkJICAgIHN0cmlwOiB7fSwKCQkgICAgbG9jOiBsb2MKCQkgIH07CgkJfQoKCQlmdW5jdGlvbiBwcmVwYXJlUGFydGlhbEJsb2NrKG9wZW4sIHByb2dyYW0sIGNsb3NlLCBsb2NJbmZvKSB7CgkJICB2YWxpZGF0ZUNsb3NlKG9wZW4sIGNsb3NlKTsKCgkJICByZXR1cm4gewoJCSAgICB0eXBlOiAnUGFydGlhbEJsb2NrU3RhdGVtZW50JywKCQkgICAgbmFtZTogb3Blbi5wYXRoLAoJCSAgICBwYXJhbXM6IG9wZW4ucGFyYW1zLAoJCSAgICBoYXNoOiBvcGVuLmhhc2gsCgkJICAgIHByb2dyYW06IHByb2dyYW0sCgkJICAgIG9wZW5TdHJpcDogb3Blbi5zdHJpcCwKCQkgICAgY2xvc2VTdHJpcDogY2xvc2UgJiYgY2xvc2Uuc3RyaXAsCgkJICAgIGxvYzogdGhpcy5sb2NJbmZvKGxvY0luZm8pCgkJICB9OwoJCX0KCgkvKioqLyB9KSwKCS8qIDQxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJCS8qIGVzbGludC1kaXNhYmxlIG5ldy1jYXAgKi8KCgkJJ3VzZSBzdHJpY3QnOwoKCQl2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlbJ2RlZmF1bHQnXTsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCQlleHBvcnRzLkNvbXBpbGVyID0gQ29tcGlsZXI7CgkJZXhwb3J0cy5wcmVjb21waWxlID0gcHJlY29tcGlsZTsKCQlleHBvcnRzLmNvbXBpbGUgPSBjb21waWxlOwoKCQl2YXIgX2V4Y2VwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgoJCXZhciBfZXhjZXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4Y2VwdGlvbik7CgoJCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKCQl2YXIgX2FzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKCQl2YXIgX2FzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hc3QpOwoKCQl2YXIgc2xpY2UgPSBbXS5zbGljZTsKCgkJZnVuY3Rpb24gQ29tcGlsZXIoKSB7fQoKCQkvLyB0aGUgZm91bmRIZWxwZXIgcmVnaXN0ZXIgd2lsbCBkaXNhbWJpZ3VhdGUgaGVscGVyIGxvb2t1cCBmcm9tIGZpbmRpbmcgYQoJCS8vIGZ1bmN0aW9uIGluIGEgY29udGV4dC4gVGhpcyBpcyBuZWNlc3NhcnkgZm9yIG11c3RhY2hlIGNvbXBhdGliaWxpdHksIHdoaWNoCgkJLy8gcmVxdWlyZXMgdGhhdCBjb250ZXh0IGZ1bmN0aW9ucyBpbiBibG9ja3MgYXJlIGV2YWx1YXRlZCBieSBibG9ja0hlbHBlck1pc3NpbmcsCgkJLy8gYW5kIHRoZW4gcHJvY2VlZCBhcyBpZiB0aGUgcmVzdWx0aW5nIHZhbHVlIHdhcyBwcm92aWRlZCB0byBibG9ja0hlbHBlck1pc3NpbmcuCgoJCUNvbXBpbGVyLnByb3RvdHlwZSA9IHsKCQkgIGNvbXBpbGVyOiBDb21waWxlciwKCgkJICBlcXVhbHM6IGZ1bmN0aW9uIGVxdWFscyhvdGhlcikgewoJCSAgICB2YXIgbGVuID0gdGhpcy5vcGNvZGVzLmxlbmd0aDsKCQkgICAgaWYgKG90aGVyLm9wY29kZXMubGVuZ3RoICE9PSBsZW4pIHsKCQkgICAgICByZXR1cm4gZmFsc2U7CgkJICAgIH0KCgkJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCQkgICAgICB2YXIgb3Bjb2RlID0gdGhpcy5vcGNvZGVzW2ldLAoJCSAgICAgICAgICBvdGhlck9wY29kZSA9IG90aGVyLm9wY29kZXNbaV07CgkJICAgICAgaWYgKG9wY29kZS5vcGNvZGUgIT09IG90aGVyT3Bjb2RlLm9wY29kZSB8fCAhYXJnRXF1YWxzKG9wY29kZS5hcmdzLCBvdGhlck9wY29kZS5hcmdzKSkgewoJCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJCSAgICAgIH0KCQkgICAgfQoKCQkgICAgLy8gV2Uga25vdyB0aGF0IGxlbmd0aCBpcyB0aGUgc2FtZSBiZXR3ZWVuIHRoZSB0d28gYXJyYXlzIGJlY2F1c2UgdGhleSBhcmUgZGlyZWN0bHkgdGllZAoJCSAgICAvLyB0byB0aGUgb3Bjb2RlIGJlaGF2aW9yIGFib3ZlLgoJCSAgICBsZW4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsKCQkgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewoJCSAgICAgIGlmICghdGhpcy5jaGlsZHJlbltpXS5lcXVhbHMob3RoZXIuY2hpbGRyZW5baV0pKSB7CgkJICAgICAgICByZXR1cm4gZmFsc2U7CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICByZXR1cm4gdHJ1ZTsKCQkgIH0sCgoJCSAgZ3VpZDogMCwKCgkJICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKHByb2dyYW0sIG9wdGlvbnMpIHsKCQkgICAgdGhpcy5zb3VyY2VOb2RlID0gW107CgkJICAgIHRoaXMub3Bjb2RlcyA9IFtdOwoJCSAgICB0aGlzLmNoaWxkcmVuID0gW107CgkJICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkJICAgIHRoaXMuc3RyaW5nUGFyYW1zID0gb3B0aW9ucy5zdHJpbmdQYXJhbXM7CgkJICAgIHRoaXMudHJhY2tJZHMgPSBvcHRpb25zLnRyYWNrSWRzOwoKCQkgICAgb3B0aW9ucy5ibG9ja1BhcmFtcyA9IG9wdGlvbnMuYmxvY2tQYXJhbXMgfHwgW107CgoJCSAgICAvLyBUaGVzZSBjaGFuZ2VzIHdpbGwgcHJvcGFnYXRlIHRvIHRoZSBvdGhlciBjb21waWxlciBjb21wb25lbnRzCgkJICAgIHZhciBrbm93bkhlbHBlcnMgPSBvcHRpb25zLmtub3duSGVscGVyczsKCQkgICAgb3B0aW9ucy5rbm93bkhlbHBlcnMgPSB7CgkJICAgICAgJ2hlbHBlck1pc3NpbmcnOiB0cnVlLAoJCSAgICAgICdibG9ja0hlbHBlck1pc3NpbmcnOiB0cnVlLAoJCSAgICAgICdlYWNoJzogdHJ1ZSwKCQkgICAgICAnaWYnOiB0cnVlLAoJCSAgICAgICd1bmxlc3MnOiB0cnVlLAoJCSAgICAgICd3aXRoJzogdHJ1ZSwKCQkgICAgICAnbG9nJzogdHJ1ZSwKCQkgICAgICAnbG9va3VwJzogdHJ1ZQoJCSAgICB9OwoJCSAgICBpZiAoa25vd25IZWxwZXJzKSB7CgkJICAgICAgZm9yICh2YXIgX25hbWUgaW4ga25vd25IZWxwZXJzKSB7CgkJICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwoJCSAgICAgICAgaWYgKF9uYW1lIGluIGtub3duSGVscGVycykgewoJCSAgICAgICAgICB0aGlzLm9wdGlvbnMua25vd25IZWxwZXJzW19uYW1lXSA9IGtub3duSGVscGVyc1tfbmFtZV07CgkJICAgICAgICB9CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICByZXR1cm4gdGhpcy5hY2NlcHQocHJvZ3JhbSk7CgkJICB9LAoKCQkgIGNvbXBpbGVQcm9ncmFtOiBmdW5jdGlvbiBjb21waWxlUHJvZ3JhbShwcm9ncmFtKSB7CgkJICAgIHZhciBjaGlsZENvbXBpbGVyID0gbmV3IHRoaXMuY29tcGlsZXIoKSwKCQkgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbmV3LWNhcAoJCSAgICByZXN1bHQgPSBjaGlsZENvbXBpbGVyLmNvbXBpbGUocHJvZ3JhbSwgdGhpcy5vcHRpb25zKSwKCQkgICAgICAgIGd1aWQgPSB0aGlzLmd1aWQrKzsKCgkJICAgIHRoaXMudXNlUGFydGlhbCA9IHRoaXMudXNlUGFydGlhbCB8fCByZXN1bHQudXNlUGFydGlhbDsKCgkJICAgIHRoaXMuY2hpbGRyZW5bZ3VpZF0gPSByZXN1bHQ7CgkJICAgIHRoaXMudXNlRGVwdGhzID0gdGhpcy51c2VEZXB0aHMgfHwgcmVzdWx0LnVzZURlcHRoczsKCgkJICAgIHJldHVybiBndWlkOwoJCSAgfSwKCgkJICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdChub2RlKSB7CgkJICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBTYW5pdHkgY29kZSAqLwoJCSAgICBpZiAoIXRoaXNbbm9kZS50eXBlXSkgewoJCSAgICAgIHRocm93IG5ldyBfZXhjZXB0aW9uMlsnZGVmYXVsdCddKCdVbmtub3duIHR5cGU6ICcgKyBub2RlLnR5cGUsIG5vZGUpOwoJCSAgICB9CgoJCSAgICB0aGlzLnNvdXJjZU5vZGUudW5zaGlmdChub2RlKTsKCQkgICAgdmFyIHJldCA9IHRoaXNbbm9kZS50eXBlXShub2RlKTsKCQkgICAgdGhpcy5zb3VyY2VOb2RlLnNoaWZ0KCk7CgkJICAgIHJldHVybiByZXQ7CgkJICB9LAoKCQkgIFByb2dyYW06IGZ1bmN0aW9uIFByb2dyYW0ocHJvZ3JhbSkgewoJCSAgICB0aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMudW5zaGlmdChwcm9ncmFtLmJsb2NrUGFyYW1zKTsKCgkJICAgIHZhciBib2R5ID0gcHJvZ3JhbS5ib2R5LAoJCSAgICAgICAgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoOwoJCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvZHlMZW5ndGg7IGkrKykgewoJCSAgICAgIHRoaXMuYWNjZXB0KGJvZHlbaV0pOwoJCSAgICB9CgoJCSAgICB0aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMuc2hpZnQoKTsKCgkJICAgIHRoaXMuaXNTaW1wbGUgPSBib2R5TGVuZ3RoID09PSAxOwoJCSAgICB0aGlzLmJsb2NrUGFyYW1zID0gcHJvZ3JhbS5ibG9ja1BhcmFtcyA/IHByb2dyYW0uYmxvY2tQYXJhbXMubGVuZ3RoIDogMDsKCgkJICAgIHJldHVybiB0aGlzOwoJCSAgfSwKCgkJICBCbG9ja1N0YXRlbWVudDogZnVuY3Rpb24gQmxvY2tTdGF0ZW1lbnQoYmxvY2spIHsKCQkgICAgdHJhbnNmb3JtTGl0ZXJhbFRvUGF0aChibG9jayk7CgoJCSAgICB2YXIgcHJvZ3JhbSA9IGJsb2NrLnByb2dyYW0sCgkJICAgICAgICBpbnZlcnNlID0gYmxvY2suaW52ZXJzZTsKCgkJICAgIHByb2dyYW0gPSBwcm9ncmFtICYmIHRoaXMuY29tcGlsZVByb2dyYW0ocHJvZ3JhbSk7CgkJICAgIGludmVyc2UgPSBpbnZlcnNlICYmIHRoaXMuY29tcGlsZVByb2dyYW0oaW52ZXJzZSk7CgoJCSAgICB2YXIgdHlwZSA9IHRoaXMuY2xhc3NpZnlTZXhwcihibG9jayk7CgoJCSAgICBpZiAodHlwZSA9PT0gJ2hlbHBlcicpIHsKCQkgICAgICB0aGlzLmhlbHBlclNleHByKGJsb2NrLCBwcm9ncmFtLCBpbnZlcnNlKTsKCQkgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc2ltcGxlJykgewoJCSAgICAgIHRoaXMuc2ltcGxlU2V4cHIoYmxvY2spOwoKCQkgICAgICAvLyBub3cgdGhhdCB0aGUgc2ltcGxlIG11c3RhY2hlIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvCgkJICAgICAgLy8gZXZhbHVhdGUgaXQgYnkgZXhlY3V0aW5nIGBibG9ja0hlbHBlck1pc3NpbmdgCgkJICAgICAgdGhpcy5vcGNvZGUoJ3B1c2hQcm9ncmFtJywgcHJvZ3JhbSk7CgkJICAgICAgdGhpcy5vcGNvZGUoJ3B1c2hQcm9ncmFtJywgaW52ZXJzZSk7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2VtcHR5SGFzaCcpOwoJCSAgICAgIHRoaXMub3Bjb2RlKCdibG9ja1ZhbHVlJywgYmxvY2sucGF0aC5vcmlnaW5hbCk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgdGhpcy5hbWJpZ3VvdXNTZXhwcihibG9jaywgcHJvZ3JhbSwgaW52ZXJzZSk7CgoJCSAgICAgIC8vIG5vdyB0aGF0IHRoZSBzaW1wbGUgbXVzdGFjaGUgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8KCQkgICAgICAvLyBldmFsdWF0ZSBpdCBieSBleGVjdXRpbmcgYGJsb2NrSGVscGVyTWlzc2luZ2AKCQkgICAgICB0aGlzLm9wY29kZSgncHVzaFByb2dyYW0nLCBwcm9ncmFtKTsKCQkgICAgICB0aGlzLm9wY29kZSgncHVzaFByb2dyYW0nLCBpbnZlcnNlKTsKCQkgICAgICB0aGlzLm9wY29kZSgnZW1wdHlIYXNoJyk7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2FtYmlndW91c0Jsb2NrVmFsdWUnKTsKCQkgICAgfQoKCQkgICAgdGhpcy5vcGNvZGUoJ2FwcGVuZCcpOwoJCSAgfSwKCgkJICBEZWNvcmF0b3JCbG9jazogZnVuY3Rpb24gRGVjb3JhdG9yQmxvY2soZGVjb3JhdG9yKSB7CgkJICAgIHZhciBwcm9ncmFtID0gZGVjb3JhdG9yLnByb2dyYW0gJiYgdGhpcy5jb21waWxlUHJvZ3JhbShkZWNvcmF0b3IucHJvZ3JhbSk7CgkJICAgIHZhciBwYXJhbXMgPSB0aGlzLnNldHVwRnVsbE11c3RhY2hlUGFyYW1zKGRlY29yYXRvciwgcHJvZ3JhbSwgdW5kZWZpbmVkKSwKCQkgICAgICAgIHBhdGggPSBkZWNvcmF0b3IucGF0aDsKCgkJICAgIHRoaXMudXNlRGVjb3JhdG9ycyA9IHRydWU7CgkJICAgIHRoaXMub3Bjb2RlKCdyZWdpc3RlckRlY29yYXRvcicsIHBhcmFtcy5sZW5ndGgsIHBhdGgub3JpZ2luYWwpOwoJCSAgfSwKCgkJICBQYXJ0aWFsU3RhdGVtZW50OiBmdW5jdGlvbiBQYXJ0aWFsU3RhdGVtZW50KHBhcnRpYWwpIHsKCQkgICAgdGhpcy51c2VQYXJ0aWFsID0gdHJ1ZTsKCgkJICAgIHZhciBwcm9ncmFtID0gcGFydGlhbC5wcm9ncmFtOwoJCSAgICBpZiAocHJvZ3JhbSkgewoJCSAgICAgIHByb2dyYW0gPSB0aGlzLmNvbXBpbGVQcm9ncmFtKHBhcnRpYWwucHJvZ3JhbSk7CgkJICAgIH0KCgkJICAgIHZhciBwYXJhbXMgPSBwYXJ0aWFsLnBhcmFtczsKCQkgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAxKSB7CgkJICAgICAgdGhyb3cgbmV3IF9leGNlcHRpb24yWydkZWZhdWx0J10oJ1Vuc3VwcG9ydGVkIG51bWJlciBvZiBwYXJ0aWFsIGFyZ3VtZW50czogJyArIHBhcmFtcy5sZW5ndGgsIHBhcnRpYWwpOwoJCSAgICB9IGVsc2UgaWYgKCFwYXJhbXMubGVuZ3RoKSB7CgkJICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHBsaWNpdFBhcnRpYWxDb250ZXh0KSB7CgkJICAgICAgICB0aGlzLm9wY29kZSgncHVzaExpdGVyYWwnLCAndW5kZWZpbmVkJyk7CgkJICAgICAgfSBlbHNlIHsKCQkgICAgICAgIHBhcmFtcy5wdXNoKHsgdHlwZTogJ1BhdGhFeHByZXNzaW9uJywgcGFydHM6IFtdLCBkZXB0aDogMCB9KTsKCQkgICAgICB9CgkJICAgIH0KCgkJICAgIHZhciBwYXJ0aWFsTmFtZSA9IHBhcnRpYWwubmFtZS5vcmlnaW5hbCwKCQkgICAgICAgIGlzRHluYW1pYyA9IHBhcnRpYWwubmFtZS50eXBlID09PSAnU3ViRXhwcmVzc2lvbic7CgkJICAgIGlmIChpc0R5bmFtaWMpIHsKCQkgICAgICB0aGlzLmFjY2VwdChwYXJ0aWFsLm5hbWUpOwoJCSAgICB9CgoJCSAgICB0aGlzLnNldHVwRnVsbE11c3RhY2hlUGFyYW1zKHBhcnRpYWwsIHByb2dyYW0sIHVuZGVmaW5lZCwgdHJ1ZSk7CgoJCSAgICB2YXIgaW5kZW50ID0gcGFydGlhbC5pbmRlbnQgfHwgJyc7CgkJICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudEluZGVudCAmJiBpbmRlbnQpIHsKCQkgICAgICB0aGlzLm9wY29kZSgnYXBwZW5kQ29udGVudCcsIGluZGVudCk7CgkJICAgICAgaW5kZW50ID0gJyc7CgkJICAgIH0KCgkJICAgIHRoaXMub3Bjb2RlKCdpbnZva2VQYXJ0aWFsJywgaXNEeW5hbWljLCBwYXJ0aWFsTmFtZSwgaW5kZW50KTsKCQkgICAgdGhpcy5vcGNvZGUoJ2FwcGVuZCcpOwoJCSAgfSwKCQkgIFBhcnRpYWxCbG9ja1N0YXRlbWVudDogZnVuY3Rpb24gUGFydGlhbEJsb2NrU3RhdGVtZW50KHBhcnRpYWxCbG9jaykgewoJCSAgICB0aGlzLlBhcnRpYWxTdGF0ZW1lbnQocGFydGlhbEJsb2NrKTsKCQkgIH0sCgoJCSAgTXVzdGFjaGVTdGF0ZW1lbnQ6IGZ1bmN0aW9uIE11c3RhY2hlU3RhdGVtZW50KG11c3RhY2hlKSB7CgkJICAgIHRoaXMuU3ViRXhwcmVzc2lvbihtdXN0YWNoZSk7CgoJCSAgICBpZiAobXVzdGFjaGUuZXNjYXBlZCAmJiAhdGhpcy5vcHRpb25zLm5vRXNjYXBlKSB7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2FwcGVuZEVzY2FwZWQnKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aGlzLm9wY29kZSgnYXBwZW5kJyk7CgkJICAgIH0KCQkgIH0sCgkJICBEZWNvcmF0b3I6IGZ1bmN0aW9uIERlY29yYXRvcihkZWNvcmF0b3IpIHsKCQkgICAgdGhpcy5EZWNvcmF0b3JCbG9jayhkZWNvcmF0b3IpOwoJCSAgfSwKCgkJICBDb250ZW50U3RhdGVtZW50OiBmdW5jdGlvbiBDb250ZW50U3RhdGVtZW50KGNvbnRlbnQpIHsKCQkgICAgaWYgKGNvbnRlbnQudmFsdWUpIHsKCQkgICAgICB0aGlzLm9wY29kZSgnYXBwZW5kQ29udGVudCcsIGNvbnRlbnQudmFsdWUpOwoJCSAgICB9CgkJICB9LAoKCQkgIENvbW1lbnRTdGF0ZW1lbnQ6IGZ1bmN0aW9uIENvbW1lbnRTdGF0ZW1lbnQoKSB7fSwKCgkJICBTdWJFeHByZXNzaW9uOiBmdW5jdGlvbiBTdWJFeHByZXNzaW9uKHNleHByKSB7CgkJICAgIHRyYW5zZm9ybUxpdGVyYWxUb1BhdGgoc2V4cHIpOwoJCSAgICB2YXIgdHlwZSA9IHRoaXMuY2xhc3NpZnlTZXhwcihzZXhwcik7CgoJCSAgICBpZiAodHlwZSA9PT0gJ3NpbXBsZScpIHsKCQkgICAgICB0aGlzLnNpbXBsZVNleHByKHNleHByKTsKCQkgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaGVscGVyJykgewoJCSAgICAgIHRoaXMuaGVscGVyU2V4cHIoc2V4cHIpOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHRoaXMuYW1iaWd1b3VzU2V4cHIoc2V4cHIpOwoJCSAgICB9CgkJICB9LAoJCSAgYW1iaWd1b3VzU2V4cHI6IGZ1bmN0aW9uIGFtYmlndW91c1NleHByKHNleHByLCBwcm9ncmFtLCBpbnZlcnNlKSB7CgkJICAgIHZhciBwYXRoID0gc2V4cHIucGF0aCwKCQkgICAgICAgIG5hbWUgPSBwYXRoLnBhcnRzWzBdLAoJCSAgICAgICAgaXNCbG9jayA9IHByb2dyYW0gIT0gbnVsbCB8fCBpbnZlcnNlICE9IG51bGw7CgoJCSAgICB0aGlzLm9wY29kZSgnZ2V0Q29udGV4dCcsIHBhdGguZGVwdGgpOwoKCQkgICAgdGhpcy5vcGNvZGUoJ3B1c2hQcm9ncmFtJywgcHJvZ3JhbSk7CgkJICAgIHRoaXMub3Bjb2RlKCdwdXNoUHJvZ3JhbScsIGludmVyc2UpOwoKCQkgICAgcGF0aC5zdHJpY3QgPSB0cnVlOwoJCSAgICB0aGlzLmFjY2VwdChwYXRoKTsKCgkJICAgIHRoaXMub3Bjb2RlKCdpbnZva2VBbWJpZ3VvdXMnLCBuYW1lLCBpc0Jsb2NrKTsKCQkgIH0sCgoJCSAgc2ltcGxlU2V4cHI6IGZ1bmN0aW9uIHNpbXBsZVNleHByKHNleHByKSB7CgkJICAgIHZhciBwYXRoID0gc2V4cHIucGF0aDsKCQkgICAgcGF0aC5zdHJpY3QgPSB0cnVlOwoJCSAgICB0aGlzLmFjY2VwdChwYXRoKTsKCQkgICAgdGhpcy5vcGNvZGUoJ3Jlc29sdmVQb3NzaWJsZUxhbWJkYScpOwoJCSAgfSwKCgkJICBoZWxwZXJTZXhwcjogZnVuY3Rpb24gaGVscGVyU2V4cHIoc2V4cHIsIHByb2dyYW0sIGludmVyc2UpIHsKCQkgICAgdmFyIHBhcmFtcyA9IHRoaXMuc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXMoc2V4cHIsIHByb2dyYW0sIGludmVyc2UpLAoJCSAgICAgICAgcGF0aCA9IHNleHByLnBhdGgsCgkJICAgICAgICBuYW1lID0gcGF0aC5wYXJ0c1swXTsKCgkJICAgIGlmICh0aGlzLm9wdGlvbnMua25vd25IZWxwZXJzW25hbWVdKSB7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2ludm9rZUtub3duSGVscGVyJywgcGFyYW1zLmxlbmd0aCwgbmFtZSk7CgkJICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmtub3duSGVscGVyc09ubHkpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnWW91IHNwZWNpZmllZCBrbm93bkhlbHBlcnNPbmx5LCBidXQgdXNlZCB0aGUgdW5rbm93biBoZWxwZXIgJyArIG5hbWUsIHNleHByKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICBwYXRoLnN0cmljdCA9IHRydWU7CgkJICAgICAgcGF0aC5mYWxzeSA9IHRydWU7CgoJCSAgICAgIHRoaXMuYWNjZXB0KHBhdGgpOwoJCSAgICAgIHRoaXMub3Bjb2RlKCdpbnZva2VIZWxwZXInLCBwYXJhbXMubGVuZ3RoLCBwYXRoLm9yaWdpbmFsLCBfYXN0MlsnZGVmYXVsdCddLmhlbHBlcnMuc2ltcGxlSWQocGF0aCkpOwoJCSAgICB9CgkJICB9LAoKCQkgIFBhdGhFeHByZXNzaW9uOiBmdW5jdGlvbiBQYXRoRXhwcmVzc2lvbihwYXRoKSB7CgkJICAgIHRoaXMuYWRkRGVwdGgocGF0aC5kZXB0aCk7CgkJICAgIHRoaXMub3Bjb2RlKCdnZXRDb250ZXh0JywgcA==", "base64"));
  res.write(new Buffer("YXRoLmRlcHRoKTsKCgkJICAgIHZhciBuYW1lID0gcGF0aC5wYXJ0c1swXSwKCQkgICAgICAgIHNjb3BlZCA9IF9hc3QyWydkZWZhdWx0J10uaGVscGVycy5zY29wZWRJZChwYXRoKSwKCQkgICAgICAgIGJsb2NrUGFyYW1JZCA9ICFwYXRoLmRlcHRoICYmICFzY29wZWQgJiYgdGhpcy5ibG9ja1BhcmFtSW5kZXgobmFtZSk7CgoJCSAgICBpZiAoYmxvY2tQYXJhbUlkKSB7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2xvb2t1cEJsb2NrUGFyYW0nLCBibG9ja1BhcmFtSWQsIHBhdGgucGFydHMpOwoJCSAgICB9IGVsc2UgaWYgKCFuYW1lKSB7CgkJICAgICAgLy8gQ29udGV4dCByZWZlcmVuY2UsIGkuZS4gYHt7Zm9vIC59fWAgb3IgYHt7Zm9vIC4ufX1gCgkJICAgICAgdGhpcy5vcGNvZGUoJ3B1c2hDb250ZXh0Jyk7CgkJICAgIH0gZWxzZSBpZiAocGF0aC5kYXRhKSB7CgkJICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSB0cnVlOwoJCSAgICAgIHRoaXMub3Bjb2RlKCdsb29rdXBEYXRhJywgcGF0aC5kZXB0aCwgcGF0aC5wYXJ0cywgcGF0aC5zdHJpY3QpOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHRoaXMub3Bjb2RlKCdsb29rdXBPbkNvbnRleHQnLCBwYXRoLnBhcnRzLCBwYXRoLmZhbHN5LCBwYXRoLnN0cmljdCwgc2NvcGVkKTsKCQkgICAgfQoJCSAgfSwKCgkJICBTdHJpbmdMaXRlcmFsOiBmdW5jdGlvbiBTdHJpbmdMaXRlcmFsKHN0cmluZykgewoJCSAgICB0aGlzLm9wY29kZSgncHVzaFN0cmluZycsIHN0cmluZy52YWx1ZSk7CgkJICB9LAoKCQkgIE51bWJlckxpdGVyYWw6IGZ1bmN0aW9uIE51bWJlckxpdGVyYWwobnVtYmVyKSB7CgkJICAgIHRoaXMub3Bjb2RlKCdwdXNoTGl0ZXJhbCcsIG51bWJlci52YWx1ZSk7CgkJICB9LAoKCQkgIEJvb2xlYW5MaXRlcmFsOiBmdW5jdGlvbiBCb29sZWFuTGl0ZXJhbChib29sKSB7CgkJICAgIHRoaXMub3Bjb2RlKCdwdXNoTGl0ZXJhbCcsIGJvb2wudmFsdWUpOwoJCSAgfSwKCgkJICBVbmRlZmluZWRMaXRlcmFsOiBmdW5jdGlvbiBVbmRlZmluZWRMaXRlcmFsKCkgewoJCSAgICB0aGlzLm9wY29kZSgncHVzaExpdGVyYWwnLCAndW5kZWZpbmVkJyk7CgkJICB9LAoKCQkgIE51bGxMaXRlcmFsOiBmdW5jdGlvbiBOdWxsTGl0ZXJhbCgpIHsKCQkgICAgdGhpcy5vcGNvZGUoJ3B1c2hMaXRlcmFsJywgJ251bGwnKTsKCQkgIH0sCgoJCSAgSGFzaDogZnVuY3Rpb24gSGFzaChoYXNoKSB7CgkJICAgIHZhciBwYWlycyA9IGhhc2gucGFpcnMsCgkJICAgICAgICBpID0gMCwKCQkgICAgICAgIGwgPSBwYWlycy5sZW5ndGg7CgoJCSAgICB0aGlzLm9wY29kZSgncHVzaEhhc2gnKTsKCgkJICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7CgkJICAgICAgdGhpcy5wdXNoUGFyYW0ocGFpcnNbaV0udmFsdWUpOwoJCSAgICB9CgkJICAgIHdoaWxlIChpLS0pIHsKCQkgICAgICB0aGlzLm9wY29kZSgnYXNzaWduVG9IYXNoJywgcGFpcnNbaV0ua2V5KTsKCQkgICAgfQoJCSAgICB0aGlzLm9wY29kZSgncG9wSGFzaCcpOwoJCSAgfSwKCgkJICAvLyBIRUxQRVJTCgkJICBvcGNvZGU6IGZ1bmN0aW9uIG9wY29kZShuYW1lKSB7CgkJICAgIHRoaXMub3Bjb2Rlcy5wdXNoKHsgb3Bjb2RlOiBuYW1lLCBhcmdzOiBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGxvYzogdGhpcy5zb3VyY2VOb2RlWzBdLmxvYyB9KTsKCQkgIH0sCgoJCSAgYWRkRGVwdGg6IGZ1bmN0aW9uIGFkZERlcHRoKGRlcHRoKSB7CgkJICAgIGlmICghZGVwdGgpIHsKCQkgICAgICByZXR1cm47CgkJICAgIH0KCgkJICAgIHRoaXMudXNlRGVwdGhzID0gdHJ1ZTsKCQkgIH0sCgoJCSAgY2xhc3NpZnlTZXhwcjogZnVuY3Rpb24gY2xhc3NpZnlTZXhwcihzZXhwcikgewoJCSAgICB2YXIgaXNTaW1wbGUgPSBfYXN0MlsnZGVmYXVsdCddLmhlbHBlcnMuc2ltcGxlSWQoc2V4cHIucGF0aCk7CgoJCSAgICB2YXIgaXNCbG9ja1BhcmFtID0gaXNTaW1wbGUgJiYgISF0aGlzLmJsb2NrUGFyYW1JbmRleChzZXhwci5wYXRoLnBhcnRzWzBdKTsKCgkJICAgIC8vIGEgbXVzdGFjaGUgaXMgYW4gZWxpZ2libGUgaGVscGVyIGlmOgoJCSAgICAvLyAqIGl0cyBpZCBpcyBzaW1wbGUgKGEgc2luZ2xlIHBhcnQsIG5vdCBgdGhpc2Agb3IgYC4uYCkKCQkgICAgdmFyIGlzSGVscGVyID0gIWlzQmxvY2tQYXJhbSAmJiBfYXN0MlsnZGVmYXVsdCddLmhlbHBlcnMuaGVscGVyRXhwcmVzc2lvbihzZXhwcik7CgoJCSAgICAvLyBpZiBhIG11c3RhY2hlIGlzIGFuIGVsaWdpYmxlIGhlbHBlciBidXQgbm90IGEgZGVmaW5pdGUKCQkgICAgLy8gaGVscGVyLCBpdCBpcyBhbWJpZ3VvdXMsIGFuZCB3aWxsIGJlIHJlc29sdmVkIGluIGEgbGF0ZXIKCQkgICAgLy8gcGFzcyBvciBhdCBydW50aW1lLgoJCSAgICB2YXIgaXNFbGlnaWJsZSA9ICFpc0Jsb2NrUGFyYW0gJiYgKGlzSGVscGVyIHx8IGlzU2ltcGxlKTsKCgkJICAgIC8vIGlmIGFtYmlndW91cywgd2UgY2FuIHBvc3NpYmx5IHJlc29sdmUgdGhlIGFtYmlndWl0eSBub3cKCQkgICAgLy8gQW4gZWxpZ2libGUgaGVscGVyIGlzIG9uZSB0aGF0IGRvZXMgbm90IGhhdmUgYSBjb21wbGV4IHBhdGgsIGkuZS4gYHRoaXMuZm9vYCwgYC4uL2Zvb2AgZXRjLgoJCSAgICBpZiAoaXNFbGlnaWJsZSAmJiAhaXNIZWxwZXIpIHsKCQkgICAgICB2YXIgX25hbWUyID0gc2V4cHIucGF0aC5wYXJ0c1swXSwKCQkgICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCgkJICAgICAgaWYgKG9wdGlvbnMua25vd25IZWxwZXJzW19uYW1lMl0pIHsKCQkgICAgICAgIGlzSGVscGVyID0gdHJ1ZTsKCQkgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMua25vd25IZWxwZXJzT25seSkgewoJCSAgICAgICAgaXNFbGlnaWJsZSA9IGZhbHNlOwoJCSAgICAgIH0KCQkgICAgfQoKCQkgICAgaWYgKGlzSGVscGVyKSB7CgkJICAgICAgcmV0dXJuICdoZWxwZXInOwoJCSAgICB9IGVsc2UgaWYgKGlzRWxpZ2libGUpIHsKCQkgICAgICByZXR1cm4gJ2FtYmlndW91cyc7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgcmV0dXJuICdzaW1wbGUnOwoJCSAgICB9CgkJICB9LAoKCQkgIHB1c2hQYXJhbXM6IGZ1bmN0aW9uIHB1c2hQYXJhbXMocGFyYW1zKSB7CgkJICAgIGZvciAodmFyIGkgPSAwLCBsID0gcGFyYW1zLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJCSAgICAgIHRoaXMucHVzaFBhcmFtKHBhcmFtc1tpXSk7CgkJICAgIH0KCQkgIH0sCgoJCSAgcHVzaFBhcmFtOiBmdW5jdGlvbiBwdXNoUGFyYW0odmFsKSB7CgkJICAgIHZhciB2YWx1ZSA9IHZhbC52YWx1ZSAhPSBudWxsID8gdmFsLnZhbHVlIDogdmFsLm9yaWdpbmFsIHx8ICcnOwoKCQkgICAgaWYgKHRoaXMuc3RyaW5nUGFyYW1zKSB7CgkJICAgICAgaWYgKHZhbHVlLnJlcGxhY2UpIHsKCQkgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihcLj9cLlwvKSovZywgJycpLnJlcGxhY2UoL1wvL2csICcuJyk7CgkJICAgICAgfQoKCQkgICAgICBpZiAodmFsLmRlcHRoKSB7CgkJICAgICAgICB0aGlzLmFkZERlcHRoKHZhbC5kZXB0aCk7CgkJICAgICAgfQoJCSAgICAgIHRoaXMub3Bjb2RlKCdnZXRDb250ZXh0JywgdmFsLmRlcHRoIHx8IDApOwoJCSAgICAgIHRoaXMub3Bjb2RlKCdwdXNoU3RyaW5nUGFyYW0nLCB2YWx1ZSwgdmFsLnR5cGUpOwoKCQkgICAgICBpZiAodmFsLnR5cGUgPT09ICdTdWJFeHByZXNzaW9uJykgewoJCSAgICAgICAgLy8gU3ViRXhwcmVzc2lvbnMgZ2V0IGV2YWx1YXRlZCBhbmQgcGFzc2VkIGluCgkJICAgICAgICAvLyBpbiBzdHJpbmcgcGFyYW1zIG1vZGUuCgkJICAgICAgICB0aGlzLmFjY2VwdCh2YWwpOwoJCSAgICAgIH0KCQkgICAgfSBlbHNlIHsKCQkgICAgICBpZiAodGhpcy50cmFja0lkcykgewoJCSAgICAgICAgdmFyIGJsb2NrUGFyYW1JbmRleCA9IHVuZGVmaW5lZDsKCQkgICAgICAgIGlmICh2YWwucGFydHMgJiYgIV9hc3QyWydkZWZhdWx0J10uaGVscGVycy5zY29wZWRJZCh2YWwpICYmICF2YWwuZGVwdGgpIHsKCQkgICAgICAgICAgYmxvY2tQYXJhbUluZGV4ID0gdGhpcy5ibG9ja1BhcmFtSW5kZXgodmFsLnBhcnRzWzBdKTsKCQkgICAgICAgIH0KCQkgICAgICAgIGlmIChibG9ja1BhcmFtSW5kZXgpIHsKCQkgICAgICAgICAgdmFyIGJsb2NrUGFyYW1DaGlsZCA9IHZhbC5wYXJ0cy5zbGljZSgxKS5qb2luKCcuJyk7CgkJICAgICAgICAgIHRoaXMub3Bjb2RlKCdwdXNoSWQnLCAnQmxvY2tQYXJhbScsIGJsb2NrUGFyYW1JbmRleCwgYmxvY2tQYXJhbUNoaWxkKTsKCQkgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgIHZhbHVlID0gdmFsLm9yaWdpbmFsIHx8IHZhbHVlOwoJCSAgICAgICAgICBpZiAodmFsdWUucmVwbGFjZSkgewoJCSAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXnRoaXMoPzpcLnwkKS8sICcnKS5yZXBsYWNlKC9eXC5cLy8sICcnKS5yZXBsYWNlKC9eXC4kLywgJycpOwoJCSAgICAgICAgICB9CgoJCSAgICAgICAgICB0aGlzLm9wY29kZSgncHVzaElkJywgdmFsLnR5cGUsIHZhbHVlKTsKCQkgICAgICAgIH0KCQkgICAgICB9CgkJICAgICAgdGhpcy5hY2NlcHQodmFsKTsKCQkgICAgfQoJCSAgfSwKCgkJICBzZXR1cEZ1bGxNdXN0YWNoZVBhcmFtczogZnVuY3Rpb24gc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXMoc2V4cHIsIHByb2dyYW0sIGludmVyc2UsIG9taXRFbXB0eSkgewoJCSAgICB2YXIgcGFyYW1zID0gc2V4cHIucGFyYW1zOwoJCSAgICB0aGlzLnB1c2hQYXJhbXMocGFyYW1zKTsKCgkJICAgIHRoaXMub3Bjb2RlKCdwdXNoUHJvZ3JhbScsIHByb2dyYW0pOwoJCSAgICB0aGlzLm9wY29kZSgncHVzaFByb2dyYW0nLCBpbnZlcnNlKTsKCgkJICAgIGlmIChzZXhwci5oYXNoKSB7CgkJICAgICAgdGhpcy5hY2NlcHQoc2V4cHIuaGFzaCk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgdGhpcy5vcGNvZGUoJ2VtcHR5SGFzaCcsIG9taXRFbXB0eSk7CgkJICAgIH0KCgkJICAgIHJldHVybiBwYXJhbXM7CgkJICB9LAoKCQkgIGJsb2NrUGFyYW1JbmRleDogZnVuY3Rpb24gYmxvY2tQYXJhbUluZGV4KG5hbWUpIHsKCQkgICAgZm9yICh2YXIgZGVwdGggPSAwLCBsZW4gPSB0aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMubGVuZ3RoOyBkZXB0aCA8IGxlbjsgZGVwdGgrKykgewoJCSAgICAgIHZhciBibG9ja1BhcmFtcyA9IHRoaXMub3B0aW9ucy5ibG9ja1BhcmFtc1tkZXB0aF0sCgkJICAgICAgICAgIHBhcmFtID0gYmxvY2tQYXJhbXMgJiYgX3V0aWxzLmluZGV4T2YoYmxvY2tQYXJhbXMsIG5hbWUpOwoJCSAgICAgIGlmIChibG9ja1BhcmFtcyAmJiBwYXJhbSA+PSAwKSB7CgkJICAgICAgICByZXR1cm4gW2RlcHRoLCBwYXJhbV07CgkJICAgICAgfQoJCSAgICB9CgkJICB9CgkJfTsKCgkJZnVuY3Rpb24gcHJlY29tcGlsZShpbnB1dCwgb3B0aW9ucywgZW52KSB7CgkJICBpZiAoaW5wdXQgPT0gbnVsbCB8fCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnICYmIGlucHV0LnR5cGUgIT09ICdQcm9ncmFtJykgewoJCSAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnWW91IG11c3QgcGFzcyBhIHN0cmluZyBvciBIYW5kbGViYXJzIEFTVCB0byBIYW5kbGViYXJzLnByZWNvbXBpbGUuIFlvdSBwYXNzZWQgJyArIGlucHV0KTsKCQkgIH0KCgkJICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCQkgIGlmICghKCdkYXRhJyBpbiBvcHRpb25zKSkgewoJCSAgICBvcHRpb25zLmRhdGEgPSB0cnVlOwoJCSAgfQoJCSAgaWYgKG9wdGlvbnMuY29tcGF0KSB7CgkJICAgIG9wdGlvbnMudXNlRGVwdGhzID0gdHJ1ZTsKCQkgIH0KCgkJICB2YXIgYXN0ID0gZW52LnBhcnNlKGlucHV0LCBvcHRpb25zKSwKCQkgICAgICBlbnZpcm9ubWVudCA9IG5ldyBlbnYuQ29tcGlsZXIoKS5jb21waWxlKGFzdCwgb3B0aW9ucyk7CgkJICByZXR1cm4gbmV3IGVudi5KYXZhU2NyaXB0Q29tcGlsZXIoKS5jb21waWxlKGVudmlyb25tZW50LCBvcHRpb25zKTsKCQl9CgoJCWZ1bmN0aW9uIGNvbXBpbGUoaW5wdXQsIG9wdGlvbnMsIGVudikgewoJCSAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkgb3B0aW9ucyA9IHt9OwoKCQkgIGlmIChpbnB1dCA9PSBudWxsIHx8IHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycgJiYgaW5wdXQudHlwZSAhPT0gJ1Byb2dyYW0nKSB7CgkJICAgIHRocm93IG5ldyBfZXhjZXB0aW9uMlsnZGVmYXVsdCddKCdZb3UgbXVzdCBwYXNzIGEgc3RyaW5nIG9yIEhhbmRsZWJhcnMgQVNUIHRvIEhhbmRsZWJhcnMuY29tcGlsZS4gWW91IHBhc3NlZCAnICsgaW5wdXQpOwoJCSAgfQoKCQkgIG9wdGlvbnMgPSBfdXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zKTsKCQkgIGlmICghKCdkYXRhJyBpbiBvcHRpb25zKSkgewoJCSAgICBvcHRpb25zLmRhdGEgPSB0cnVlOwoJCSAgfQoJCSAgaWYgKG9wdGlvbnMuY29tcGF0KSB7CgkJICAgIG9wdGlvbnMudXNlRGVwdGhzID0gdHJ1ZTsKCQkgIH0KCgkJICB2YXIgY29tcGlsZWQgPSB1bmRlZmluZWQ7CgoJCSAgZnVuY3Rpb24gY29tcGlsZUlucHV0KCkgewoJCSAgICB2YXIgYXN0ID0gZW52LnBhcnNlKGlucHV0LCBvcHRpb25zKSwKCQkgICAgICAgIGVudmlyb25tZW50ID0gbmV3IGVudi5Db21waWxlcigpLmNvbXBpbGUoYXN0LCBvcHRpb25zKSwKCQkgICAgICAgIHRlbXBsYXRlU3BlYyA9IG5ldyBlbnYuSmF2YVNjcmlwdENvbXBpbGVyKCkuY29tcGlsZShlbnZpcm9ubWVudCwgb3B0aW9ucywgdW5kZWZpbmVkLCB0cnVlKTsKCQkgICAgcmV0dXJuIGVudi50ZW1wbGF0ZSh0ZW1wbGF0ZVNwZWMpOwoJCSAgfQoKCQkgIC8vIFRlbXBsYXRlIGlzIG9ubHkgY29tcGlsZWQgb24gZmlyc3QgdXNlIGFuZCBjYWNoZWQgYWZ0ZXIgdGhhdCBwb2ludC4KCQkgIGZ1bmN0aW9uIHJldChjb250ZXh0LCBleGVjT3B0aW9ucykgewoJCSAgICBpZiAoIWNvbXBpbGVkKSB7CgkJICAgICAgY29tcGlsZWQgPSBjb21waWxlSW5wdXQoKTsKCQkgICAgfQoJCSAgICByZXR1cm4gY29tcGlsZWQuY2FsbCh0aGlzLCBjb250ZXh0LCBleGVjT3B0aW9ucyk7CgkJICB9CgkJICByZXQuX3NldHVwID0gZnVuY3Rpb24gKHNldHVwT3B0aW9ucykgewoJCSAgICBpZiAoIWNvbXBpbGVkKSB7CgkJICAgICAgY29tcGlsZWQgPSBjb21waWxlSW5wdXQoKTsKCQkgICAgfQoJCSAgICByZXR1cm4gY29tcGlsZWQuX3NldHVwKHNldHVwT3B0aW9ucyk7CgkJICB9OwoJCSAgcmV0Ll9jaGlsZCA9IGZ1bmN0aW9uIChpLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7CgkJICAgIGlmICghY29tcGlsZWQpIHsKCQkgICAgICBjb21waWxlZCA9IGNvbXBpbGVJbnB1dCgpOwoJCSAgICB9CgkJICAgIHJldHVybiBjb21waWxlZC5fY2hpbGQoaSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7CgkJICB9OwoJCSAgcmV0dXJuIHJldDsKCQl9CgoJCWZ1bmN0aW9uIGFyZ0VxdWFscyhhLCBiKSB7CgkJICBpZiAoYSA9PT0gYikgewoJCSAgICByZXR1cm4gdHJ1ZTsKCQkgIH0KCgkJICBpZiAoX3V0aWxzLmlzQXJyYXkoYSkgJiYgX3V0aWxzLmlzQXJyYXkoYikgJiYgYS5sZW5ndGggPT09IGIubGVuZ3RoKSB7CgkJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewoJCSAgICAgIGlmICghYXJnRXF1YWxzKGFbaV0sIGJbaV0pKSB7CgkJICAgICAgICByZXR1cm4gZmFsc2U7CgkJICAgICAgfQoJCSAgICB9CgkJICAgIHJldHVybiB0cnVlOwoJCSAgfQoJCX0KCgkJZnVuY3Rpb24gdHJhbnNmb3JtTGl0ZXJhbFRvUGF0aChzZXhwcikgewoJCSAgaWYgKCFzZXhwci5wYXRoLnBhcnRzKSB7CgkJICAgIHZhciBsaXRlcmFsID0gc2V4cHIucGF0aDsKCQkgICAgLy8gQ2FzdGluZyB0byBzdHJpbmcgaGVyZSB0byBtYWtlIGZhbHNlIGFuZCAwIGxpdGVyYWwgdmFsdWVzIHBsYXkgbmljZWx5IHdpdGggdGhlIHJlc3QKCQkgICAgLy8gb2YgdGhlIHN5c3RlbS4KCQkgICAgc2V4cHIucGF0aCA9IHsKCQkgICAgICB0eXBlOiAnUGF0aEV4cHJlc3Npb24nLAoJCSAgICAgIGRhdGE6IGZhbHNlLAoJCSAgICAgIGRlcHRoOiAwLAoJCSAgICAgIHBhcnRzOiBbbGl0ZXJhbC5vcmlnaW5hbCArICcnXSwKCQkgICAgICBvcmlnaW5hbDogbGl0ZXJhbC5vcmlnaW5hbCArICcnLAoJCSAgICAgIGxvYzogbGl0ZXJhbC5sb2MKCQkgICAgfTsKCQkgIH0KCQl9CgoJLyoqKi8gfSksCgkvKiA0MiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCQkndXNlIHN0cmljdCc7CgoJCXZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKVsnZGVmYXVsdCddOwoKCQlleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCQl2YXIgX2Jhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKCQl2YXIgX2V4Y2VwdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgoJCXZhciBfZXhjZXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4Y2VwdGlvbik7CgoJCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKCQl2YXIgX2NvZGVHZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCgkJdmFyIF9jb2RlR2VuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvZGVHZW4pOwoKCQlmdW5jdGlvbiBMaXRlcmFsKHZhbHVlKSB7CgkJICB0aGlzLnZhbHVlID0gdmFsdWU7CgkJfQoKCQlmdW5jdGlvbiBKYXZhU2NyaXB0Q29tcGlsZXIoKSB7fQoKCQlKYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlID0gewoJCSAgLy8gUFVCTElDIEFQSTogWW91IGNhbiBvdmVycmlkZSB0aGVzZSBtZXRob2RzIGluIGEgc3ViY2xhc3MgdG8gcHJvdmlkZQoJCSAgLy8gYWx0ZXJuYXRpdmUgY29tcGlsZWQgZm9ybXMgZm9yIG5hbWUgbG9va3VwIGFuZCBidWZmZXJpbmcgc2VtYW50aWNzCgkJICBuYW1lTG9va3VwOiBmdW5jdGlvbiBuYW1lTG9va3VwKHBhcmVudCwgbmFtZSAvKiAsIHR5cGUqLykgewoJCSAgICBpZiAoSmF2YVNjcmlwdENvbXBpbGVyLmlzVmFsaWRKYXZhU2NyaXB0VmFyaWFibGVOYW1lKG5hbWUpKSB7CgkJICAgICAgcmV0dXJuIFtwYXJlbnQsICcuJywgbmFtZV07CgkJICAgIH0gZWxzZSB7CgkJICAgICAgcmV0dXJuIFtwYXJlbnQsICdbJywgSlNPTi5zdHJpbmdpZnkobmFtZSksICddJ107CgkJICAgIH0KCQkgIH0sCgkJICBkZXB0aGVkTG9va3VwOiBmdW5jdGlvbiBkZXB0aGVkTG9va3VwKG5hbWUpIHsKCQkgICAgcmV0dXJuIFt0aGlzLmFsaWFzYWJsZSgnY29udGFpbmVyLmxvb2t1cCcpLCAnKGRlcHRocywgIicsIG5hbWUsICciKSddOwoJCSAgfSwKCgkJICBjb21waWxlckluZm86IGZ1bmN0aW9uIGNvbXBpbGVySW5mbygpIHsKCQkgICAgdmFyIHJldmlzaW9uID0gX2Jhc2UuQ09NUElMRVJfUkVWSVNJT04sCgkJICAgICAgICB2ZXJzaW9ucyA9IF9iYXNlLlJFVklTSU9OX0NIQU5HRVNbcmV2aXNpb25dOwoJCSAgICByZXR1cm4gW3JldmlzaW9uLCB2ZXJzaW9uc107CgkJICB9LAoKCQkgIGFwcGVuZFRvQnVmZmVyOiBmdW5jdGlvbiBhcHBlbmRUb0J1ZmZlcihzb3VyY2UsIGxvY2F0aW9uLCBleHBsaWNpdCkgewoJCSAgICAvLyBGb3JjZSBhIHNvdXJjZSBhcyB0aGlzIHNpbXBsaWZpZXMgdGhlIG1lcmdlIGxvZ2ljLgoJCSAgICBpZiAoIV91dGlscy5pc0FycmF5KHNvdXJjZSkpIHsKCQkgICAgICBzb3VyY2UgPSBbc291cmNlXTsKCQkgICAgfQoJCSAgICBzb3VyY2UgPSB0aGlzLnNvdXJjZS53cmFwKHNvdXJjZSwgbG9jYXRpb24pOwoKCQkgICAgaWYgKHRoaXMuZW52aXJvbm1lbnQuaXNTaW1wbGUpIHsKCQkgICAgICByZXR1cm4gWydyZXR1cm4gJywgc291cmNlLCAnOyddOwoJCSAgICB9IGVsc2UgaWYgKGV4cGxpY2l0KSB7CgkJICAgICAgLy8gVGhpcyBpcyBhIGNhc2Ugd2hlcmUgdGhlIGJ1ZmZlciBvcGVyYXRpb24gb2NjdXJzIGFzIGEgY2hpbGQgb2YgYW5vdGhlcgoJCSAgICAgIC8vIGNvbnN0cnVjdCwgZ2VuZXJhbGx5IGJyYWNlcy4gV2UgaGF2ZSB0byBleHBsaWNpdGx5IG91dHB1dCB0aGVzZSBidWZmZXIKCQkgICAgICAvLyBvcGVyYXRpb25zIHRvIGVuc3VyZSB0aGF0IHRoZSBlbWl0dGVkIGNvZGUgZ29lcyBpbiB0aGUgY29ycmVjdCBsb2NhdGlvbi4KCQkgICAgICByZXR1cm4gWydidWZmZXIgKz0gJywgc291cmNlLCAnOyddOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHNvdXJjZS5hcHBlbmRUb0J1ZmZlciA9IHRydWU7CgkJICAgICAgcmV0dXJuIHNvdXJjZTsKCQkgICAgfQoJCSAgfSwKCgkJICBpbml0aWFsaXplQnVmZmVyOiBmdW5jdGlvbiBpbml0aWFsaXplQnVmZmVyKCkgewoJCSAgICByZXR1cm4gdGhpcy5xdW90ZWRTdHJpbmcoJycpOwoJCSAgfSwKCQkgIC8vIEVORCBQVUJMSUMgQVBJCgoJCSAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShlbnZpcm9ubWVudCwgb3B0aW9ucywgY29udGV4dCwgYXNPYmplY3QpIHsKCQkgICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50OwoJCSAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoJCSAgICB0aGlzLnN0cmluZ1BhcmFtcyA9IHRoaXMub3B0aW9ucy5zdHJpbmdQYXJhbXM7CgkJICAgIHRoaXMudHJhY2tJZHMgPSB0aGlzLm9wdGlvbnMudHJhY2tJZHM7CgkJICAgIHRoaXMucHJlY29tcGlsZSA9ICFhc09iamVjdDsKCgkJICAgIHRoaXMubmFtZSA9IHRoaXMuZW52aXJvbm1lbnQubmFtZTsKCQkgICAgdGhpcy5pc0NoaWxkID0gISFjb250ZXh0OwoJCSAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0IHx8IHsKCQkgICAgICBkZWNvcmF0b3JzOiBbXSwKCQkgICAgICBwcm9ncmFtczogW10sCgkJICAgICAgZW52aXJvbm1lbnRzOiBbXQoJCSAgICB9OwoKCQkgICAgdGhpcy5wcmVhbWJsZSgpOwoKCQkgICAgdGhpcy5zdGFja1Nsb3QgPSAwOwoJCSAgICB0aGlzLnN0YWNrVmFycyA9IFtdOwoJCSAgICB0aGlzLmFsaWFzZXMgPSB7fTsKCQkgICAgdGhpcy5yZWdpc3RlcnMgPSB7IGxpc3Q6IFtdIH07CgkJICAgIHRoaXMuaGFzaGVzID0gW107CgkJICAgIHRoaXMuY29tcGlsZVN0YWNrID0gW107CgkJICAgIHRoaXMuaW5saW5lU3RhY2sgPSBbXTsKCQkgICAgdGhpcy5ibG9ja1BhcmFtcyA9IFtdOwoKCQkgICAgdGhpcy5jb21waWxlQ2hpbGRyZW4oZW52aXJvbm1lbnQsIG9wdGlvbnMpOwoKCQkgICAgdGhpcy51c2VEZXB0aHMgPSB0aGlzLnVzZURlcHRocyB8fCBlbnZpcm9ubWVudC51c2VEZXB0aHMgfHwgZW52aXJvbm1lbnQudXNlRGVjb3JhdG9ycyB8fCB0aGlzLm9wdGlvbnMuY29tcGF0OwoJCSAgICB0aGlzLnVzZUJsb2NrUGFyYW1zID0gdGhpcy51c2VCbG9ja1BhcmFtcyB8fCBlbnZpcm9ubWVudC51c2VCbG9ja1BhcmFtczsKCgkJICAgIHZhciBvcGNvZGVzID0gZW52aXJvbm1lbnQub3Bjb2RlcywKCQkgICAgICAgIG9wY29kZSA9IHVuZGVmaW5lZCwKCQkgICAgICAgIGZpcnN0TG9jID0gdW5kZWZpbmVkLAoJCSAgICAgICAgaSA9IHVuZGVmaW5lZCwKCQkgICAgICAgIGwgPSB1bmRlZmluZWQ7CgoJCSAgICBmb3IgKGkgPSAwLCBsID0gb3Bjb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCQkgICAgICBvcGNvZGUgPSBvcGNvZGVzW2ldOwoKCQkgICAgICB0aGlzLnNvdXJjZS5jdXJyZW50TG9jYXRpb24gPSBvcGNvZGUubG9jOwoJCSAgICAgIGZpcnN0TG9jID0gZmlyc3RMb2MgfHwgb3Bjb2RlLmxvYzsKCQkgICAgICB0aGlzW29wY29kZS5vcGNvZGVdLmFwcGx5KHRoaXMsIG9wY29kZS5hcmdzKTsKCQkgICAgfQoKCQkgICAgLy8gRmx1c2ggYW55IHRyYWlsaW5nIGNvbnRlbnQgdGhhdCBtaWdodCBiZSBwZW5kaW5nLgoJCSAgICB0aGlzLnNvdXJjZS5jdXJyZW50TG9jYXRpb24gPSBmaXJzdExvYzsKCQkgICAgdGhpcy5wdXNoU291cmNlKCcnKTsKCgkJICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgkJICAgIGlmICh0aGlzLnN0YWNrU2xvdCB8fCB0aGlzLmlubGluZVN0YWNrLmxlbmd0aCB8fCB0aGlzLmNvbXBpbGVTdGFjay5sZW5ndGgpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgnQ29tcGlsZSBjb21wbGV0ZWQgd2l0aCBjb250ZW50IGxlZnQgb24gc3RhY2snKTsKCQkgICAgfQoKCQkgICAgaWYgKCF0aGlzLmRlY29yYXRvcnMuaXNFbXB0eSgpKSB7CgkJICAgICAgdGhpcy51c2VEZWNvcmF0b3JzID0gdHJ1ZTsKCgkJICAgICAgdGhpcy5kZWNvcmF0b3JzLnByZXBlbmQoJ3ZhciBkZWNvcmF0b3JzID0gY29udGFpbmVyLmRlY29yYXRvcnM7XG4nKTsKCQkgICAgICB0aGlzLmRlY29yYXRvcnMucHVzaCgncmV0dXJuIGZuOycpOwoKCQkgICAgICBpZiAoYXNPYmplY3QpIHsKCQkgICAgICAgIHRoaXMuZGVjb3JhdG9ycyA9IEZ1bmN0aW9uLmFwcGx5KHRoaXMsIFsnZm4nLCAncHJvcHMnLCAnY29udGFpbmVyJywgJ2RlcHRoMCcsICdkYXRhJywgJ2Jsb2NrUGFyYW1zJywgJ2RlcHRocycsIHRoaXMuZGVjb3JhdG9ycy5tZXJnZSgpXSk7CgkJICAgICAgfSBlbHNlIHsKCQkgICAgICAgIHRoaXMuZGVjb3JhdG9ycy5wcmVwZW5kKCdmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGgwLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4nKTsKCQkgICAgICAgIHRoaXMuZGVjb3JhdG9ycy5wdXNoKCd9XG4nKTsKCQkgICAgICAgIHRoaXMuZGVjb3JhdG9ycyA9IHRoaXMuZGVjb3JhdG9ycy5tZXJnZSgpOwoJCSAgICAgIH0KCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aGlzLmRlY29yYXRvcnMgPSB1bmRlZmluZWQ7CgkJICAgIH0KCgkJICAgIHZhciBmbiA9IHRoaXMuY3JlYXRlRnVuY3Rpb25Db250ZXh0KGFzT2JqZWN0KTsKCQkgICAgaWYgKCF0aGlzLmlzQ2hpbGQpIHsKCQkgICAgICB2YXIgcmV0ID0gewoJCSAgICAgICAgY29tcGlsZXI6IHRoaXMuY29tcGlsZXJJbmZvKCksCgkJICAgICAgICBtYWluOiBmbgoJCSAgICAgIH07CgoJCSAgICAgIGlmICh0aGlzLmRlY29yYXRvcnMpIHsKCQkgICAgICAgIHJldC5tYWluX2QgPSB0aGlzLmRlY29yYXRvcnM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY2FtZWxjYXNlCgkJICAgICAgICByZXQudXNlRGVjb3JhdG9ycyA9IHRydWU7CgkJICAgICAgfQoKCQkgICAgICB2YXIgX2NvbnRleHQgPSB0aGlzLmNvbnRleHQ7CgkJICAgICAgdmFyIHByb2dyYW1zID0gX2NvbnRleHQucHJvZ3JhbXM7CgkJICAgICAgdmFyIGRlY29yYXRvcnMgPSBfY29udGV4dC5kZWNvcmF0b3JzOwoKCQkgICAgICBmb3IgKGkgPSAwLCBsID0gcHJvZ3JhbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJICAgICAgICBpZiAocHJvZ3JhbXNbaV0pIHsKCQkgICAgICAgICAgcmV0W2ldID0gcHJvZ3JhbXNbaV07CgkJICAgICAgICAgIGlmIChkZWNvcmF0b3JzW2ldKSB7CgkJICAgICAgICAgICAgcmV0W2kgKyAnX2QnXSA9IGRlY29yYXRvcnNbaV07CgkJICAgICAgICAgICAgcmV0LnVzZURlY29yYXRvcnMgPSB0cnVlOwoJCSAgICAgICAgICB9CgkJICAgICAgICB9CgkJICAgICAgfQoKCQkgICAgICBpZiAodGhpcy5lbnZpcm9ubWVudC51c2VQYXJ0aWFsKSB7CgkJICAgICAgICByZXQudXNlUGFydGlhbCA9IHRydWU7CgkJICAgICAgfQoJCSAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGF0YSkgewoJCSAgICAgICAgcmV0LnVzZURhdGEgPSB0cnVlOwoJCSAgICAgIH0KCQkgICAgICBpZiAodGhpcy51c2VEZXB0aHMpIHsKCQkgICAgICAgIHJldC51c2VEZXB0aHMgPSB0cnVlOwoJCSAgICAgIH0KCQkgICAgICBpZiAodGhpcy51c2VCbG9ja1BhcmFtcykgewoJCSAgICAgICAgcmV0LnVzZUJsb2NrUGFyYW1zID0gdHJ1ZTsKCQkgICAgICB9CgkJICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXQpIHsKCQkgICAgICAgIHJldC5jb21wYXQgPSB0cnVlOwoJCSAgICAgIH0KCgkJICAgICAgaWYgKCFhc09iamVjdCkgewoJCSAgICAgICAgcmV0LmNvbXBpbGVyID0gSlNPTi5zdHJpbmdpZnkocmV0LmNvbXBpbGVyKTsKCgkJICAgICAgICB0aGlzLnNvdXJjZS5jdXJyZW50TG9jYXRpb24gPSB7IHN0YXJ0OiB7IGxpbmU6IDEsIGNvbHVtbjogMCB9IH07CgkJICAgICAgICByZXQgPSB0aGlzLm9iamVjdExpdGVyYWwocmV0KTsKCgkJICAgICAgICBpZiAob3B0aW9ucy5zcmNOYW1lKSB7CgkJICAgICAgICAgIHJldCA9IHJldC50b1N0cmluZ1dpdGhTb3VyY2VNYXAoeyBmaWxlOiBvcHRpb25zLmRlc3ROYW1lIH0pOwoJCSAgICAgICAgICByZXQubWFwID0gcmV0Lm1hcCAmJiByZXQubWFwLnRvU3RyaW5nKCk7CgkJICAgICAgICB9IGVsc2UgewoJCSAgICAgICAgICByZXQgPSByZXQudG9TdHJpbmcoKTsKCQkgICAgICAgIH0KCQkgICAgICB9IGVsc2UgewoJCSAgICAgICAgcmV0LmNvbXBpbGVyT3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCQkgICAgICB9CgoJCSAgICAgIHJldHVybiByZXQ7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgcmV0dXJuIGZuOwoJCSAgICB9CgkJICB9LAoKCQkgIHByZWFtYmxlOiBmdW5jdGlvbiBwcmVhbWJsZSgpIHsKCQkgICAgLy8gdHJhY2sgdGhlIGxhc3QgY29udGV4dCBwdXNoZWQgaW50byBwbGFjZSB0byBhbGxvdyBza2lwcGluZyB0aGUKCQkgICAgLy8gZ2V0Q29udGV4dCBvcGNvZGUgd2hlbiBpdCB3b3VsZCBiZSBhIG5vb3AKCQkgICAgdGhpcy5sYXN0Q29udGV4dCA9IDA7CgkJICAgIHRoaXMuc291cmNlID0gbmV3IF9jb2RlR2VuMlsnZGVmYXVsdCddKHRoaXMub3B0aW9ucy5zcmNOYW1lKTsKCQkgICAgdGhpcy5kZWNvcmF0b3JzID0gbmV3IF9jb2RlR2VuMlsnZGVmYXVsdCddKHRoaXMub3B0aW9ucy5zcmNOYW1lKTsKCQkgIH0sCgoJCSAgY3JlYXRlRnVuY3Rpb25Db250ZXh0OiBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbkNvbnRleHQoYXNPYmplY3QpIHsKCQkgICAgdmFyIHZhckRlY2xhcmF0aW9ucyA9ICcnOwoKCQkgICAgdmFyIGxvY2FscyA9IHRoaXMuc3RhY2tWYXJzLmNvbmNhdCh0aGlzLnJlZ2lzdGVycy5saXN0KTsKCQkgICAgaWYgKGxvY2Fscy5sZW5ndGggPiAwKSB7CgkJICAgICAgdmFyRGVjbGFyYXRpb25zICs9ICcsICcgKyBsb2NhbHMuam9pbignLCAnKTsKCQkgICAgfQoKCQkgICAgLy8gR2VuZXJhdGUgbWluaW1pemVyIGFsaWFzIG1hcHBpbmdzCgkJICAgIC8vCgkJICAgIC8vIFdoZW4gdXNpbmcgdHJ1ZSBTb3VyY2VOb2RlcywgdGhpcyB3aWxsIHVwZGF0ZSBhbGwgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gYWxpYXMKCQkgICAgLy8gYXMgdGhlIHNvdXJjZSBub2RlcyBhcmUgcmV1c2VkIGluIHNpdHUuIEZvciB0aGUgbm9uLXNvdXJjZSBub2RlIGNvbXBpbGF0aW9uIG1vZGUsCgkJICAgIC8vIGFsaWFzZXMgd2lsbCBub3QgYmUgdXNlZCwgYnV0IHRoaXMgY2FzZSBpcyBhbHJlYWR5IGJlaW5nIHJ1biBvbiB0aGUgY2xpZW50IGFuZAoJCSAgICAvLyB3ZSBhcmVuJ3QgY29uY2VybiBhYm91dCBtaW5pbWl6aW5nIHRoZSB0ZW1wbGF0ZSBzaXplLgoJCSAgICB2YXIgYWxpYXNDb3VudCA9IDA7CgkJICAgIGZvciAodmFyIGFsaWFzIGluIHRoaXMuYWxpYXNlcykgewoJCSAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZ3VhcmQtZm9yLWluCgkJICAgICAgdmFyIG5vZGUgPSB0aGlzLmFsaWFzZXNbYWxpYXNdOwoKCQkgICAgICBpZiAodGhpcy5hbGlhc2VzLmhhc093blByb3BlcnR5KGFsaWFzKSAmJiBub2RlLmNoaWxkcmVuICYmIG5vZGUucmVmZXJlbmNlQ291bnQgPiAxKSB7CgkJICAgICAgICB2YXJEZWNsYXJhdGlvbnMgKz0gJywgYWxpYXMnICsgKythbGlhc0NvdW50ICsgJz0nICsgYWxpYXM7CgkJICAgICAgICBub2RlLmNoaWxkcmVuWzBdID0gJ2FsaWFzJyArIGFsaWFzQ291bnQ7CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICB2YXIgcGFyYW1zID0gWydjb250YWluZXInLCAnZGVwdGgwJywgJ2hlbHBlcnMnLCAncGFydGlhbHMnLCAnZGF0YSddOwoKCQkgICAgaWYgKHRoaXMudXNlQmxvY2tQYXJhbXMgfHwgdGhpcy51c2VEZXB0aHMpIHsKCQkgICAgICBwYXJhbXMucHVzaCgnYmxvY2tQYXJhbXMnKTsKCQkgICAgfQoJCSAgICBpZiAodGhpcy51c2VEZXB0aHMpIHsKCQkgICAgICBwYXJhbXMucHVzaCgnZGVwdGhzJyk7CgkJICAgIH0KCgkJICAgIC8vIFBlcmZvcm0gYSBzZWNvbmQgcGFzcyBvdmVyIHRoZSBvdXRwdXQgdG8gbWVyZ2UgY29udGVudCB3aGVuIHBvc3NpYmxlCgkJICAgIHZhciBzb3VyY2UgPSB0aGlzLm1lcmdlU291cmNlKHZhckRlY2xhcmF0aW9ucyk7CgoJCSAgICBpZiAoYXNPYmplY3QpIHsKCQkgICAgICBwYXJhbXMucHVzaChzb3VyY2UpOwoKCQkgICAgICByZXR1cm4gRnVuY3Rpb24uYXBwbHkodGhpcywgcGFyYW1zKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uud3JhcChbJ2Z1bmN0aW9uKCcsIHBhcmFtcy5qb2luKCcsJyksICcpIHtcbiAgJywgc291cmNlLCAnfSddKTsKCQkgICAgfQoJCSAgfSwKCQkgIG1lcmdlU291cmNlOiBmdW5jdGlvbiBtZXJnZVNvdXJjZSh2YXJEZWNsYXJhdGlvbnMpIHsKCQkgICAgdmFyIGlzU2ltcGxlID0gdGhpcy5lbnZpcm9ubWVudC5pc1NpbXBsZSwKCQkgICAgICAgIGFwcGVuZE9ubHkgPSAhdGhpcy5mb3JjZUJ1ZmZlciwKCQkgICAgICAgIGFwcGVuZEZpcnN0ID0gdW5kZWZpbmVkLAoJCSAgICAgICAgc291cmNlU2VlbiA9IHVuZGVmaW5lZCwKCQkgICAgICAgIGJ1ZmZlclN0YXJ0ID0gdW5kZWZpbmVkLAoJCSAgICAgICAgYnVmZmVyRW5kID0gdW5kZWZpbmVkOwoJCSAgICB0aGlzLnNvdXJjZS5lYWNoKGZ1bmN0aW9uIChsaW5lKSB7CgkJICAgICAgaWYgKGxpbmUuYXBwZW5kVG9CdWZmZXIpIHsKCQkgICAgICAgIGlmIChidWZmZXJTdGFydCkgewoJCSAgICAgICAgICBsaW5lLnByZXBlbmQoJyAgKyAnKTsKCQkgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgIGJ1ZmZlclN0YXJ0ID0gbGluZTsKCQkgICAgICAgIH0KCQkgICAgICAgIGJ1ZmZlckVuZCA9IGxpbmU7CgkJICAgICAgfSBlbHNlIHsKCQkgICAgICAgIGlmIChidWZmZXJTdGFydCkgewoJCSAgICAgICAgICBpZiAoIXNvdXJjZVNlZW4pIHsKCQkgICAgICAgICAgICBhcHBlbmRGaXJzdCA9IHRydWU7CgkJICAgICAgICAgIH0gZWxzZSB7CgkJICAgICAgICAgICAgYnVmZmVyU3RhcnQucHJlcGVuZCgnYnVmZmVyICs9ICcpOwoJCSAgICAgICAgICB9CgkJICAgICAgICAgIGJ1ZmZlckVuZC5hZGQoJzsnKTsKCQkgICAgICAgICAgYnVmZmVyU3RhcnQgPSBidWZmZXJFbmQgPSB1bmRlZmluZWQ7CgkJICAgICAgICB9CgoJCSAgICAgICAgc291cmNlU2VlbiA9IHRydWU7CgkJICAgICAgICBpZiAoIWlzU2ltcGxlKSB7CgkJICAgICAgICAgIGFwcGVuZE9ubHkgPSBmYWxzZTsKCQkgICAgICAgIH0KCQkgICAgICB9CgkJICAgIH0pOwoKCQkgICAgaWYgKGFwcGVuZE9ubHkpIHsKCQkgICAgICBpZiAoYnVmZmVyU3RhcnQpIHsKCQkgICAgICAgIGJ1ZmZlclN0YXJ0LnByZXBlbmQoJ3JldHVybiAnKTsKCQkgICAgICAgIGJ1ZmZlckVuZC5hZGQoJzsnKTsKCQkgICAgICB9IGVsc2UgaWYgKCFzb3VyY2VTZWVuKSB7CgkJICAgICAgICB0aGlzLnNvdXJjZS5wdXNoKCdyZXR1cm4gIiI7Jyk7CgkJICAgICAgfQoJCSAgICB9IGVsc2UgewoJCSAgICAgIHZhckRlY2xhcmF0aW9ucyArPSAnLCBidWZmZXIgPSAnICsgKGFwcGVuZEZpcnN0ID8gJycgOiB0aGlzLmluaXRpYWxpemVCdWZmZXIoKSk7CgoJCSAgICAgIGlmIChidWZmZXJTdGFydCkgewoJCSAgICAgICAgYnVmZmVyU3RhcnQucHJlcGVuZCgncmV0dXJuIGJ1ZmZlciArICcpOwoJCSAgICAgICAgYnVmZmVyRW5kLmFkZCgnOycpOwoJCSAgICAgIH0gZWxzZSB7CgkJICAgICAgICB0aGlzLnNvdXJjZS5wdXNoKCdyZXR1cm4gYnVmZmVyOycpOwoJCSAgICAgIH0KCQkgICAgfQoKCQkgICAgaWYgKHZhckRlY2xhcmF0aW9ucykgewoJCSAgICAgIHRoaXMuc291cmNlLnByZXBlbmQoJ3ZhciAnICsgdmFyRGVjbGFyYXRpb25zLnN1YnN0cmluZygyKSArIChhcHBlbmRGaXJzdCA/ICcnIDogJztcbicpKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuIHRoaXMuc291cmNlLm1lcmdlKCk7CgkJICB9LAoKCQkgIC8vIFtibG9ja1ZhbHVlXQoJCSAgLy8KCQkgIC8vIE9uIHN0YWNrLCBiZWZvcmU6IGhhc2gsIGludmVyc2UsIHByb2dyYW0sIHZhbHVlCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXI6IHJldHVybiB2YWx1ZSBvZiBibG9ja0hlbHBlck1pc3NpbmcKCQkgIC8vCgkJICAvLyBUaGUgcHVycG9zZSBvZiB0aGlzIG9wY29kZSBpcyB0byB0YWtlIGEgYmxvY2sgb2YgdGhlIGZvcm0KCQkgIC8vIGB7eyN0aGlzLmZvb319Li4ue3svdGhpcy5mb299fWAsIHJlc29sdmUgdGhlIHZhbHVlIG9mIGBmb29gLCBhbmQKCQkgIC8vIHJlcGxhY2UgaXQgb24gdGhlIHN0YWNrIHdpdGggdGhlIHJlc3VsdCBvZiBwcm9wZXJseQoJCSAgLy8gaW52b2tpbmcgYmxvY2tIZWxwZXJNaXNzaW5nLgoJCSAgYmxvY2tWYWx1ZTogZnVuY3Rpb24gYmxvY2tWYWx1ZShuYW1lKSB7CgkJICAgIHZhciBibG9ja0hlbHBlck1pc3NpbmcgPSB0aGlzLmFsaWFzYWJsZSgnaGVscGVycy5ibG9ja0hlbHBlck1pc3NpbmcnKSwKCQkgICAgICAgIHBhcmFtcyA9IFt0aGlzLmNvbnRleHROYW1lKDApXTsKCQkgICAgdGhpcy5zZXR1cEhlbHBlckFyZ3MobmFtZSwgMCwgcGFyYW1zKTsKCgkJICAgIHZhciBibG9ja05hbWUgPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgIHBhcmFtcy5zcGxpY2UoMSwgMCwgYmxvY2tOYW1lKTsKCgkJICAgIHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoYmxvY2tIZWxwZXJNaXNzaW5nLCAnY2FsbCcsIHBhcmFtcykpOwoJCSAgfSwKCgkJICAvLyBbYW1iaWd1b3VzQmxvY2tWYWx1ZV0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiBoYXNoLCBpbnZlcnNlLCBwcm9ncmFtLCB2YWx1ZQoJCSAgLy8gQ29tcGlsZXIgdmFsdWUsIGJlZm9yZTogbGFzdEhlbHBlcj12YWx1ZSBvZiBsYXN0IGZvdW5kIGhlbHBlciwgaWYgYW55CgkJICAvLyBPbiBzdGFjaywgYWZ0ZXIsIGlmIG5vIGxhc3RIZWxwZXI6IHNhbWUgYXMgW2Jsb2NrVmFsdWVdCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXIsIGlmIGxhc3RIZWxwZXI6IHZhbHVlCgkJICBhbWJpZ3VvdXNCbG9ja1ZhbHVlOiBmdW5jdGlvbiBhbWJpZ3VvdXNCbG9ja1ZhbHVlKCkgewoJCSAgICAvLyBXZSdyZSBiZWluZyBhIGJpdCBjaGVla3kgYW5kIHJldXNpbmcgdGhlIG9wdGlvbnMgdmFsdWUgZnJvbSB0aGUgcHJpb3IgZXhlYwoJCSAgICB2YXIgYmxvY2tIZWxwZXJNaXNzaW5nID0gdGhpcy5hbGlhc2FibGUoJ2hlbHBlcnMuYmxvY2tIZWxwZXJNaXNzaW5nJyksCgkJICAgICAgICBwYXJhbXMgPSBbdGhpcy5jb250ZXh0TmFtZSgwKV07CgkJICAgIHRoaXMuc2V0dXBIZWxwZXJBcmdzKCcnLCAwLCBwYXJhbXMsIHRydWUpOwoKCQkgICAgdGhpcy5mbHVzaElubGluZSgpOwoKCQkgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnRvcFN0YWNrKCk7CgkJICAgIHBhcmFtcy5zcGxpY2UoMSwgMCwgY3VycmVudCk7CgoJCSAgICB0aGlzLnB1c2hTb3VyY2UoWydpZiAoIScsIHRoaXMubGFzdEhlbHBlciwgJykgeyAnLCBjdXJyZW50LCAnID0gJywgdGhpcy5zb3VyY2UuZnVuY3Rpb25DYWxsKGJsb2NrSGVscGVyTWlzc2luZywgJ2NhbGwnLCBwYXJhbXMpLCAnfSddKTsKCQkgIH0sCgoJCSAgLy8gW2FwcGVuZENvbnRlbnRdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogLi4uCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXI6IC4uLgoJCSAgLy8KCQkgIC8vIEFwcGVuZHMgdGhlIHN0cmluZyB2YWx1ZSBvZiBgY29udGVudGAgdG8gdGhlIGN1cnJlbnQgYnVmZmVyCgkJICBhcHBlbmRDb250ZW50OiBmdW5jdGlvbiBhcHBlbmRDb250ZW50KGNvbnRlbnQpIHsKCQkgICAgaWYgKHRoaXMucGVuZGluZ0NvbnRlbnQpIHsKCQkgICAgICBjb250ZW50ID0gdGhpcy5wZW5kaW5nQ29udGVudCArIGNvbnRlbnQ7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgdGhpcy5wZW5kaW5nTG9jYXRpb24gPSB0aGlzLnNvdXJjZS5jdXJyZW50TG9jYXRpb247CgkJICAgIH0KCgkJICAgIHRoaXMucGVuZGluZ0NvbnRlbnQgPSBjb250ZW50OwoJCSAgfSwKCgkJICAvLyBbYXBwZW5kXQoJCSAgLy8KCQkgIC8vIE9uIHN0YWNrLCBiZWZvcmU6IHZhbHVlLCAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogLi4uCgkJICAvLwoJCSAgLy8gQ29lcmNlcyBgdmFsdWVgIHRvIGEgU3RyaW5nIGFuZCBhcHBlbmRzIGl0IHRvIHRoZSBjdXJyZW50IGJ1ZmZlci4KCQkgIC8vCgkJICAvLyBJZiBgdmFsdWVgIGlzIHRydXRoeSwgb3IgMCwgaXQgaXMgY29lcmNlZCBpbnRvIGEgc3RyaW5nIGFuZCBhcHBlbmRlZAoJCSAgLy8gT3RoZXJ3aXNlLCB0aGUgZW1wdHkgc3RyaW5nIGlzIGFwcGVuZGVkCgkJICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHsKCQkgICAgaWYgKHRoaXMuaXNJbmxpbmUoKSkgewoJCSAgICAgIHRoaXMucmVwbGFjZVN0YWNrKGZ1bmN0aW9uIChjdXJyZW50KSB7CgkJICAgICAgICByZXR1cm4gWycgIT0gbnVsbCA/ICcsIGN1cnJlbnQsICcgOiAiIiddOwoJCSAgICAgIH0pOwoKCQkgICAgICB0aGlzLnB1c2hTb3VyY2UodGhpcy5hcHBlbmRUb0J1ZmZlcih0aGlzLnBvcFN0YWNrKCkpKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB2YXIgbG9jYWwgPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgICAgdGhpcy5wdXNoU291cmNlKFsnaWYgKCcsIGxvY2FsLCAnICE9IG51bGwpIHsgJywgdGhpcy5hcHBlbmRUb0J1ZmZlcihsb2NhbCwgdW5kZWZpbmVkLCB0cnVlKSwgJyB9J10pOwoJCSAgICAgIGlmICh0aGlzLmVudmlyb25tZW50LmlzU2ltcGxlKSB7CgkJICAgICAgICB0aGlzLnB1c2hTb3VyY2UoWydlbHNlIHsgJywgdGhpcy5hcHBlbmRUb0J1ZmZlcigiJyciLCB1bmRlZmluZWQsIHRydWUpLCAnIH0nXSk7CgkJICAgICAgfQoJCSAgICB9CgkJICB9LAoKCQkgIC8vIFthcHBlbmRFc2NhcGVkXQoJCSAgLy8KCQkgIC8vIE9uIHN0YWNrLCBiZWZvcmU6IHZhbHVlLCAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogLi4uCgkJICAvLwoJCSAgLy8gRXNjYXBlIGB2YWx1ZWAgYW5kIGFwcGVuZCBpdCB0byB0aGUgYnVmZmVyCgkJICBhcHBlbmRFc2NhcGVkOiBmdW5jdGlvbiBhcHBlbmRFc2NhcGVkKCkgewoJCSAgICB0aGlzLnB1c2hTb3VyY2UodGhpcy5hcHBlbmRUb0J1ZmZlcihbdGhpcy5hbGlhc2FibGUoJ2NvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uJyksICcoJywgdGhpcy5wb3BTdGFjaygpLCAnKSddKSk7CgkJICB9LAoKCQkgIC8vIFtnZXRDb250ZXh0XQoJCSAgLy8KCQkgIC8vIE9uIHN0YWNrLCBiZWZvcmU6IC4uLgoJCSAgLy8gT24gc3RhY2ssIGFmdGVyOiAuLi4KCQkgIC8vIENvbXBpbGVyIHZhbHVlLCBhZnRlcjogbGFzdENvbnRleHQ9ZGVwdGgKCQkgIC8vCgkJICAvLyBTZXQgdGhlIHZhbHVlIG9mIHRoZSBgbGFzdENvbnRleHRgIGNvbXBpbGVyIHZhbHVlIHRvIHRoZSBkZXB0aAoJCSAgZ2V0Q29udGV4dDogZnVuY3Rpb24gZ2V0Q29udGV4dChkZXB0aCkgewoJCSAgICB0aGlzLmxhc3RDb250ZXh0ID0gZGVwdGg7CgkJICB9LAoKCQkgIC8vIFtwdXNoQ29udGV4dF0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogY3VycmVudENvbnRleHQsIC4uLgoJCSAgLy8KCQkgIC8vIFB1c2hlcyB0aGUgdmFsdWUgb2YgdGhlIGN1cnJlbnQgY29udGV4dCBvbnRvIHRoZSBzdGFjay4KCQkgIHB1c2hDb250ZXh0OiBmdW5jdGlvbiBwdXNoQ29udGV4dCgpIHsKCQkgICAgdGhpcy5wdXNoU3RhY2tMaXRlcmFsKHRoaXMuY29udGV4dE5hbWUodGhpcy5sYXN0Q29udGV4dCkpOwoJCSAgfSwKCgkJICAvLyBbbG9va3VwT25Db250ZXh0XQoJCSAgLy8KCQkgIC8vIE9uIHN0YWNrLCBiZWZvcmU6IC4uLgoJCSAgLy8gT24gc3RhY2ssIGFmdGVyOiBjdXJyZW50Q29udGV4dFtuYW1lXSwgLi4uCgkJICAvLwoJCSAgLy8gTG9va3MgdXAgdGhlIHZhbHVlIG9mIGBuYW1lYCBvbiB0aGUgY3VycmVudCBjb250ZXh0IGFuZCBwdXNoZXMKCQkgIC8vIGl0IG9udG8gdGhlIHN0YWNrLgoJCSAgbG9va3VwT25Db250ZXh0OiBmdW5jdGlvbiBsb29rdXBPbkNvbnRleHQocGFydHMsIGZhbHN5LCBzdHJpY3QsIHNjb3BlZCkgewoJCSAgICB2YXIgaSA9IDA7CgoJCSAgICBpZiAoIXNjb3BlZCAmJiB0aGlzLm9wdGlvbnMuY29tcGF0ICYmICF0aGlzLmxhc3RDb250ZXh0KSB7CgkJICAgICAgLy8gVGhlIGRlcHRoZWQgcXVlcnkgaXMgZXhwZWN0ZWQgdG8gaGFuZGxlIHRoZSB1bmRlZmluZWQgbG9naWMgZm9yIHRoZSByb290IGxldmVsIHRoYXQKCQkgICAgICAvLyBpcyBpbXBsZW1lbnRlZCBiZWxvdywgc28gd2UgZXZhbHVhdGUgdGhhdCBkaXJlY3RseSBpbiBjb21wYXQgbW9kZQoJCSAgICAgIHRoaXMucHVzaCh0aGlzLmRlcHRoZWRMb29rdXAocGFydHNbaSsrXSkpOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHRoaXMucHVzaENvbnRleHQoKTsKCQkgICAgfQoKCQkgICAgdGhpcy5yZXNvbHZlUGF0aCgnY29udGV4dCcsIHBhcnRzLCBpLCBmYWxzeSwgc3RyaWN0KTsKCQkgIH0sCgoJCSAgLy8gW2xvb2t1cEJsb2NrUGFyYW1dCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogLi4uCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXI6IGJsb2NrUGFyYW1bbmFtZV0sIC4uLgoJCSAgLy8KCQkgIC8vIExvb2tzIHVwIHRoZSB2YWx1ZSBvZiBgcGFydHNgIG9uIHRoZSBnaXZlbiBibG9jayBwYXJhbSBhbmQgcHVzaGVzCgkJICAvLyBpdCBvbnRvIHRoZSBzdGFjay4KCQkgIGxvb2t1cEJsb2NrUGFyYW06IGZ1bmN0aW9uIGxvb2t1cEJsb2NrUGFyYW0oYmxvY2tQYXJhbUlkLCBwYXJ0cykgewoJCSAgICB0aGlzLnVzZUJsb2NrUGFyYW1zID0gdHJ1ZTsKCgkJICAgIHRoaXMucHVzaChbJ2Jsb2NrUGFyYW1zWycsIGJsb2NrUGFyYW1JZFswXSwgJ11bJywgYmxvY2tQYXJhbUlkWzFdLCAnXSddKTsKCQkgICAgdGhpcy5yZXNvbHZlUGF0aCgnY29udGV4dCcsIHBhcnRzLCAxKTsKCQkgIH0sCgoJCSAgLy8gW2xvb2t1cERhdGFdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogLi4uCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXI6IGRhdGEsIC4uLgoJCSAgLy8KCQkgIC8vIFB1c2ggdGhlIGRhdGEgbG9va3VwIG9wZXJhdG9yCgkJICBsb29rdXBEYXRhOiBmdW5jdGlvbiBsb29rdXBEYXRhKGRlcHRoLCBwYXJ0cywgc3RyaWN0KSB7CgkJICAgIGlmICghZGVwdGgpIHsKCQkgICAgICB0aGlzLnB1c2hTdGFja0xpdGVyYWwoJ2RhdGEnKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aGlzLnB1c2hTdGFja0xpdGVyYWwoJ2NvbnRhaW5lci5kYXRhKGRhdGEsICcgKyBkZXB0aCArICcpJyk7CgkJICAgIH0KCgkJICAgIHRoaXMucmVzb2x2ZVBhdGgoJ2RhdGEnLCBwYXJ0cywgMCwgdHJ1ZSwgc3RyaWN0KTsKCQkgIH0sCgoJCSAgcmVzb2x2ZVBhdGg6IGZ1bmN0aW9uIHJlc29sdmVQYXRoKHR5cGUsIHBhcnRzLCBpLCBmYWxzeSwgc3RyaWN0KSB7CgkJICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0CgoJCSAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCQkgICAgaWYgKHRoaXMub3B0aW9ucy5zdHJpY3QgfHwgdGhpcy5vcHRpb25zLmFzc3VtZU9iamVjdHMpIHsKCQkgICAgICB0aGlzLnB1c2goc3RyaWN0TG9va3VwKHRoaXMub3B0aW9ucy5zdHJpY3QgJiYgc3RyaWN0LCB0aGlzLCBwYXJ0cywgdHlwZSkpOwoJCSAgICAgIHJldHVybjsKCQkgICAgfQoKCQkgICAgdmFyIGxlbiA9IHBhcnRzLmxlbmd0aDsKCQkgICAgZm9yICg7IGkgPCBsZW47IGkrKykgewoJCSAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWxvb3AtZnVuYyAqLwoJCSAgICAgIHRoaXMucmVwbGFjZVN0YWNrKGZ1bmN0aW9uIChjdXJyZW50KSB7CgkJICAgICAgICB2YXIgbG9va3VwID0gX3RoaXMubmFtZUxvb2t1cChjdXJyZW50LCBwYXJ0c1tpXSwgdHlwZSk7CgkJICAgICAgICAvLyBXZSB3YW50IHRvIGVuc3VyZSB0aGF0IHplcm8gYW5kIGZhbHNlIGFyZSBoYW5kbGVkIHByb3Blcmx5IGlmIHRoZSBjb250ZXh0IChmYWxzeSBmbGFnKQoJCSAgICAgICAgLy8gbmVlZHMgdG8gaGF2ZSB0aGUgc3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlc2UgdmFsdWVzLgoJCSAgICAgICAgaWYgKCFmYWxzeSkgewoJCSAgICAgICAgICByZXR1cm4gWycgIT0gbnVsbCA/ICcsIGxvb2t1cCwgJyA6ICcsIGN1cnJlbnRdOwoJCSAgICAgICAgfSBlbHNlIHsKCQkgICAgICAgICAgLy8gT3RoZXJ3aXNlIHdlIGNhbiB1c2UgZ2VuZXJpYyBmYWxzeSBoYW5kbGluZwoJCSAgICAgICAgICByZXR1cm4gWycgJiYgJywgbG9va3VwXTsKCQkgICAgICAgIH0KCQkgICAgICB9KTsKCQkgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWxvb3AtZnVuYyAqLwoJCSAgICB9CgkJICB9LAoKCQkgIC8vIFtyZXNvbHZlUG9zc2libGVMYW1iZGFdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogdmFsdWUsIC4uLgoJCSAgLy8gT24gc3RhY2ssIGFmdGVyOiByZXNvbHZlZCB2YWx1ZSwgLi4uCgkJICAvLwoJCSAgLy8gSWYgdGhlIGB2YWx1ZWAgaXMgYSBsYW1iZGEsIHJlcGxhY2UgaXQgb24gdGhlIHN0YWNrIGJ5CgkJICAvLyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBsYW1iZGEKCQkgIHJlc29sdmVQb3NzaWJsZUxhbWJkYTogZnVuY3Rpb24gcmVzb2x2ZVBvc3NpYmxlTGFtYmRhKCkgewoJCSAgICB0aGlzLnB1c2goW3RoaXMuYWxpYXNhYmxlKCdjb250YWluZXIubGFtYmRhJyksICcoJywgdGhpcy5wb3BTdGFjaygpLCAnLCAnLCB0aGlzLmNvbnRleHROYW1lKDApLCAnKSddKTsKCQkgIH0sCgoJCSAgLy8gW3B1c2hTdHJpbmdQYXJhbV0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogc3RyaW5nLCBjdXJyZW50Q29udGV4dCwgLi4uCgkJICAvLwoJCSAgLy8gVGhpcyBvcGNvZGUgaXMgZGVzaWduZWQgZm9yIHVzZSBpbiBzdHJpbmcgbW9kZSwgd2hpY2gKCQkgIC8vIHByb3ZpZGVzIHRoZSBzdHJpbmcgdmFsdWUgb2YgYSBwYXJhbWV0ZXIgYWxvbmcgd2l0aCBpdHMKCQkgIC8vIGRlcHRoIHJhdGhlciB0aGFuIHJlc29sdmluZyBpdCBpbW1lZGlhdGVseS4KCQkgIHB1c2hTdHJpbmdQYXJhbTogZnVuY3Rpb24gcHVzaFN0cmluZ1BhcmFtKHN0cmluZywgdHlwZSkgewoJCSAgICB0aGlzLnB1c2hDb250ZXh0KCk7CgkJICAgIHRoaXMucHVzaFN0cmluZyh0eXBlKTsKCgkJICAgIC8vIElmIGl0J3MgYSBzdWJleHByZXNzaW9uLCB0aGUgc3RyaW5nIHJlc3VsdAoJCSAgICAvLyB3aWxsIGJlIHB1c2hlZCBhZnRlciB0aGlzIG9wY29kZS4KCQkgICAgaWYgKHR5cGUgIT09ICdTdWJFeHByZXNzaW9uJykgewoJCSAgICAgIGlmICh0eXBlb2Ygc3RyaW5nID09PSAnc3RyaW5nJykgewoJCSAgICAgICAgdGhpcy5wdXNoU3RyaW5nKHN0cmluZyk7CgkJICAgICAgfSBlbHNlIHsKCQkgICAgICAgIHRoaXMucHVzaFN0YWNrTGl0ZXJhbChzdHJpbmcpOwoJCSAgICAgIH0KCQkgICAgfQoJCSAgfSwKCgkJICBlbXB0eUhhc2g6IGZ1bmN0aW9uIGVtcHR5SGFzaChvbWl0RW1wdHkpIHsKCQkgICAgaWYgKHRoaXMudHJhY2tJZHMpIHsKCQkgICAgICB0aGlzLnB1c2goJ3t9Jyk7IC8vIGhhc2hJZHMKCQkgICAgfQoJCSAgICBpZiAodGhpcy5zdHJpbmdQYXJhbXMpIHsKCQkgICAgICB0aGlzLnB1c2goJ3t9Jyk7IC8vIGhhc2hDb250ZXh0cwoJCSAgICAgIHRoaXMucHVzaCgne30nKTsgLy8gaGFzaFR5cGVzCgkJICAgIH0KCQkgICAgdGhpcy5wdXNoU3RhY2tMaXRlcmFsKG9taXRFbXB0eSA/ICd1bmRlZmluZWQnIDogJ3t9Jyk7CgkJICB9LAoJCSAgcHVzaEhhc2g6IGZ1bmN0aW9uIHB1c2hIYXNoKCkgewoJCSAgICBpZiAodGhpcy5oYXNoKSB7CgkJICAgICAgdGhpcy5oYXNoZXMucHVzaCh0aGlzLmhhc2gpOwoJCSAgICB9CgkJICAgIHRoaXMuaGFzaCA9IHsgdmFsdWVzOiBbXSwgdHlwZXM6IFtdLCBjb250ZXh0czogW10sIGlkczogW10gfTsKCQkgIH0sCgkJICBwb3BIYXNoOiBmdW5jdGlvbiBwb3BIYXNoKCkgewoJCSAgICB2YXIgaGFzaCA9IHRoaXMuaGFzaDsKCQkgICAgdGhpcy5oYXNoID0gdGhpcy5oYXNoZXMucG9wKCk7CgoJCSAgICBpZiAodGhpcy50cmFja0lkcykgewoJCSAgICAgIHRoaXMucHVzaCh0aGlzLm9iamVjdExpdGVyYWwoaGFzaC5pZHMpKTsKCQkgICAgfQoJCSAgICBpZiAodGhpcy5zdHJpbmdQYXJhbXMpIHsKCQkgICAgICB0aGlzLnB1c2godGhpcy5vYmplY3RMaXRlcmFsKGhhc2guY29udGV4dHMpKTsKCQkgICAgICB0aGlzLnB1c2godGhpcy5vYmplY3RMaXRlcmFsKGhhc2gudHlwZXMpKTsKCQkgICAgfQoKCQkgICAgdGhpcy5wdXNoKHRoaXMub2JqZWN0TGl0ZXJhbChoYXNoLnZhbHVlcykpOwoJCSAgfSwKCgkJICAvLyBbcHVzaFN0cmluZ10KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogcXVvdGVkU3RyaW5nKHN0cmluZyksIC4uLgoJCSAgLy8KCQkgIC8vIFB1c2ggYSBxdW90ZWQgdmVyc2lvbiBvZiBgc3RyaW5nYCBvbnRvIHRoZSBzdGFjawoJCSAgcHVzaFN0cmluZzogZnVuY3Rpb24gcHVzaFN0cmluZyhzdHJpbmcpIHsKCQkgICAgdGhpcy5wdXNoU3RhY2tMaXRlcmFsKHRoaXMucXVvdGVkU3RyaW5nKHN0cmluZykpOwoJCSAgfSwKCgkJICAvLyBbcHVzaExpdGVyYWxdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogLi4uCgkJICAvLyBPbiBzdGFjaywgYWZ0ZXI6IHZhbHVlLCAuLi4KCQkgIC8vCgkJICAvLyBQdXNoZXMgYSB2YWx1ZSBvbnRvIHRoZSBzdGFjay4gVGhpcyBvcGVyYXRpb24gcHJldmVudHMKCQkgIC8vIHRoZSBjb21waWxlciBmcm9tIGNyZWF0aW5nIGEgdGVtcG9yYXJ5IHZhcmlhYmxlIHRvIGhvbGQKCQkgIC8vIGl0LgoJCSAgcHVzaExpdGVyYWw6IGZ1bmN0aW9uIHB1c2hMaXRlcmFsKHZhbHVlKSB7CgkJICAgIHRoaXMucHVzaFN0YWNrTGl0ZXJhbCh2YWx1ZSk7CgkJICB9LAoKCQkgIC8vIFtwdXNoUHJvZ3JhbV0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogcHJvZ3JhbShndWlkKSwgLi4uCgkJICAvLwoJCSAgLy8gUHVzaCBhIHByb2dyYW0gZXhwcmVzc2lvbiBvbnRvIHRoZSBzdGFjay4gVGhpcyB0YWtlcwoJCSAgLy8gYSBjb21waWxlLXRpbWUgZ3VpZCBhbmQgY29udmVydHMgaXQgaW50byBhIHJ1bnRpbWUtYWNjZXNzaWJsZQoJCSAgLy8gZXhwcmVzc2lvbi4KCQkgIHB1c2hQcm9ncmFtOiBmdW5jdGlvbiBwdXNoUHJvZ3JhbShndWlkKSB7CgkJICAgIGlmIChndWlkICE9IG51bGwpIHsKCQkgICAgICB0aGlzLnB1c2hTdGFja0xpdGVyYWwodGhpcy5wcm9ncmFtRXhwcmVzc2lvbihndWlkKSk7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgdGhpcy5wdXNoU3RhY2tMaXRlcmFsKG51bGwpOwoJCSAgICB9CgkJICB9LAoKCQkgIC8vIFtyZWdpc3RlckRlY29yYXRvcl0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiBoYXNoLCBwcm9ncmFtLCBwYXJhbXMuLi4sIC4uLgoJCSAgLy8gT24gc3RhY2ssIGFmdGVyOiAuLi4KCQkgIC8vCgkJICAvLyBQb3BzIG9mZiB0aGUgZGVjb3JhdG9yJ3MgcGFyYW1ldGVycywgaW52b2tlcyB0aGUgZGVjb3JhdG9yLAoJCSAgLy8gYW5kIGluc2VydHMgdGhlIGRlY29yYXRvciBpbnRvIHRoZSBkZWNvcmF0b3JzIGxpc3QuCgkJICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24gcmVnaXN0ZXJEZWNvcmF0b3IocGFyYW1TaXplLCBuYW1lKSB7CgkJICAgIHZhciBmb3VuZERlY29yYXRvciA9IHRoaXMubmFtZUxvb2t1cCgnZGVjb3JhdG9ycycsIG5hbWUsICdkZWNvcmF0b3InKSwKCQkgICAgICAgIG9wdGlvbnMgPSB0aGlzLnNldHVwSGVscGVyQXJncyhuYW1lLCBwYXJhbVNpemUpOwoKCQkgICAgdGhpcy5kZWNvcmF0b3JzLnB1c2goWydmbiA9ICcsIHRoaXMuZGVjb3JhdG9ycy5mdW5jdGlvbkNhbGwoZm91bmREZWNvcmF0b3IsICcnLCBbJ2ZuJywgJ3Byb3BzJywgJ2NvbnRhaW5lcicsIG9wdGlvbnNdKSwgJyB8fCBmbjsnXSk7CgkJICB9LAoKCQkgIC8vIFtpbnZva2VIZWxwZXJdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogaGFzaCwgaW52ZXJzZSwgcHJvZ3JhbSwgcGFyYW1zLi4uLCAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogcmVzdWx0IG9mIGhlbHBlciBpbnZvY2F0aW9uCgkJICAvLwoJCSAgLy8gUG9wcyBvZmYgdGhlIGhlbHBlcidzIHBhcmFtZXRlcnMsIGludm9rZXMgdGhlIGhlbHBlciwKCQkgIC8vIGFuZCBwdXNoZXMgdGhlIGhlbHBlcidzIHJldHVybiB2YWx1ZSBvbnRvIHRoZSBzdGFjay4KCQkgIC8vCgkJICAvLyBJZiB0aGUgaGVscGVyIGlzIG5vdCBmb3VuZCwgYGhlbHBlck1pc3NpbmdgIGlzIGNhbGxlZC4KCQkgIGludm9rZUhlbHBlcjogZnVuY3Rpb24gaW52b2tlSGVscGVyKHBhcmFtU2l6ZSwgbmFtZSwgaXNTaW1wbGUpIHsKCQkgICAgdmFyIG5vbkhlbHBlciA9IHRoaXMucG9wU3RhY2soKSwKCQkgICAgICAgIGhlbHBlciA9IHRoaXMuc2V0dXBIZWxwZXIocGFyYW1TaXplLCBuYW1lKSwKCQkgICAgICAgIHNpbXBsZSA9IGlzU2ltcGxlID8gW2hlbHBlci5uYW1lLCAnIHx8ICddIDogJyc7CgoJCSAgICB2YXIgbG9va3VwID0gWycoJ10uY29uY2F0KHNpbXBsZSwgbm9uSGVscGVyKTsKCQkgICAgaWYgKCF0aGlzLm9wdGlvbnMuc3RyaWN0KSB7CgkJICAgICAgbG9va3VwLnB1c2goJyB8fCAnLCB0aGlzLmFsaWFzYWJsZSgnaGVscGVycy5oZWxwZXJNaXNzaW5nJykpOwoJCSAgICB9CgkJICAgIGxvb2t1cC5wdXNoKCcpJyk7CgoJCSAgICB0aGlzLnB1c2godGhpcy5zb3VyY2UuZnVuY3Rpb25DYWxsKGxvb2t1cCwgJ2NhbGwnLCBoZWxwZXIuY2FsbFBhcmFtcykpOwoJCSAgfSwKCgkJICAvLyBbaW52b2tlS25vd25IZWxwZXJdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogaGFzaCwgaW52ZXJzZSwgcHJvZ3JhbSwgcGFyYW1zLi4uLCAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogcmVzdWx0IG9mIGhlbHBlciBpbnZvY2F0aW9uCgkJICAvLwoJCSAgLy8gVGhpcyBvcGVyYXRpb24gaXMgdXNlZCB3aGVuIHRoZSBoZWxwZXIgaXMga25vd24gdG8gZXhpc3QsCgkJICAvLyBzbyBhIGBoZWxwZXJNaXNzaW5nYCBmYWxsYmFjayBpcyBub3QgcmVxdWlyZWQuCgkJICBpbnZva2VLbm93bkhlbHBlcjogZnVuY3Rpb24gaW52b2tlS25vd25IZWxwZXIocGFyYW1TaXplLCBuYW1lKSB7CgkJICAgIHZhciBoZWxwZXIgPSB0aGlzLnNldHVwSGVscGVyKHBhcmFtU2l6ZSwgbmFtZSk7CgkJICAgIHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoaGVscGVyLm5hbWUsICdjYWxsJywgaGVscGVyLmNhbGxQYXJhbXMpKTsKCQkgIH0sCgoJCSAgLy8gW2ludm9rZUFtYmlndW91c10KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiBoYXNoLCBpbnZlcnNlLCBwcm9ncmFtLCBwYXJhbXMuLi4sIC4uLgoJCSAgLy8gT24gc3RhY2ssIGFmdGVyOiByZXN1bHQgb2YgZGlzYW1iaWd1YXRpb24KCQkgIC8vCgkJICAvLyBUaGlzIG9wZXJhdGlvbiBpcyB1c2VkIHdoZW4gYW4gZXhwcmVzc2lvbiBsaWtlIGB7e2Zvb319YAoJCSAgLy8gaXMgcHJvdmlkZWQsIGJ1dCB3ZSBkb24ndCBrbm93IGF0IGNvbXBpbGUtdGltZSB3aGV0aGVyIGl0CgkJICAvLyBpcyBhIGhlbHBlciBvciBhIHBhdGguCgkJICAvLwoJCSAgLy8gVGhpcyBvcGVyYXRpb24gZW1pdHMgbW9yZSBjb2RlIHRoYW4gdGhlIG90aGVyIG9wdGlvbnMsCgkJICAvLyBhbmQgY2FuIGJlIGF2b2lkZWQgYnkgcGFzc2luZyB0aGUgYGtub3duSGVscGVyc2AgYW5kCgkJICAvLyBga25vd25IZWxwZXJzT25seWAgZmxhZ3MgYXQgY29tcGlsZS10aW1lLgoJCSAgaW52b2tlQW1iaWd1b3VzOiBmdW5jdGlvbiBpbnZva2VBbWJpZ3VvdXMobmFtZSwgaGVscGVyQ2FsbCkgewoJCSAgICB0aGlzLnVzZVJlZ2lzdGVyKCdoZWxwZXInKTsKCgkJICAgIHZhciBub25IZWxwZXIgPSB0aGlzLnBvcFN0YWNrKCk7CgoJCSAgICB0aGlzLmVtcHR5SGFzaCgpOwoJCSAgICB2YXIgaGVscGVyID0gdGhpcy5zZXR1cEhlbHBlcigwLCBuYW1lLCBoZWxwZXJDYWxsKTsKCgkJICAgIHZhciBoZWxwZXJOYW1lID0gdGhpcy5sYXN0SGVscGVyID0gdGhpcy5uYW1lTG9va3VwKCdoZWxwZXJzJywgbmFtZSwgJ2hlbHBlcicpOwoKCQkgICAgdmFyIGxvb2t1cCA9IFsnKCcsICcoaGVscGVyID0gJywgaGVscGVyTmFtZSwgJyB8fCAnLCBub25IZWxwZXIsICcpJ107CgkJICAgIGlmICghdGhpcy5vcHRpb25zLnN0cmljdCkgewoJCSAgICAgIGxvb2t1cFswXSA9ICcoaGVscGVyID0gJzsKCQkgICAgICBsb29rdXAucHVzaCgnICE9IG51bGwgPyBoZWxwZXIgOiAnLCB0aGlzLmFsaWFzYWJsZSgnaGVscGVycy5oZWxwZXJNaXNzaW5nJykpOwoJCSAgICB9CgoJCSAgICB0aGlzLnB1c2goWycoJywgbG9va3VwLCBoZWxwZXIucGFyYW1zSW5pdCA/IFsnKSwoJywgaGVscGVyLnBhcmFtc0luaXRdIDogW10sICcpLCcsICcodHlwZW9mIGhlbHBlciA9PT0gJywgdGhpcy5hbGlhc2FibGUoJyJmdW5jdGlvbiInKSwgJyA/ICcsIHRoaXMuc291cmNlLmZ1bmN0aW9uQ2FsbCgnaGVscGVyJywgJ2NhbGwnLCBoZWxwZXIuY2FsbFBhcmFtcyksICcgOiBoZWxwZXIpKSddKTsKCQkgIH0sCgoJCSAgLy8gW2ludm9rZVBhcnRpYWxdCgkJICAvLwoJCSAgLy8gT24gc3RhY2ssIGJlZm9yZTogY29udGV4dCwgLi4uCgkJICAvLyBPbiBzdGFjayBhZnRlcjogcmVzdWx0IG9mIHBhcnRpYWwgaW52b2NhdGlvbgoJCSAgLy8KCQkgIC8vIFRoaXMgb3BlcmF0aW9uIHBvcHMgb2ZmIGEgY29udGV4dCwgaW52b2tlcyBhIHBhcnRpYWwgd2l0aCB0aGF0IGNvbnRleHQsCgkJICAvLyBhbmQgcHVzaGVzIHRoZSByZXN1bHQgb2YgdGhlIGludm9jYXRpb24gYmFjay4KCQkgIGludm9rZVBhcnRpYWw6IGZ1bmN0aW9uIGludm9rZVBhcnRpYWwoaXNEeW5hbWljLCBuYW1lLCBpbmRlbnQpIHsKCQkgICAgdmFyIHBhcmFtcyA9IFtdLAoJCSAgICAgICAgb3B0aW9ucyA9IHRoaXMuc2V0dXBQYXJhbXMobmFtZSwgMSwgcGFyYW1zKTsKCgkJICAgIGlmIChpc0R5bmFtaWMpIHsKCQkgICAgICBuYW1lID0gdGhpcy5wb3BTdGFjaygpOwoJCSAgICAgIGRlbGV0ZSBvcHRpb25zLm5hbWU7CgkJICAgIH0KCgkJICAgIGlmIChpbmRlbnQpIHsKCQkgICAgICBvcHRpb25zLmluZGVudCA9IEpTT04uc3RyaW5naWZ5KGluZGVudCk7CgkJICAgIH0KCQkgICAgb3B0aW9ucy5oZWxwZXJzID0gJ2hlbHBlcnMnOwoJCSAgICBvcHRpb25zLnBhcnRpYWxzID0gJ3BhcnRpYWxzJzsKCQkgICAgb3B0aW9ucy5kZWNvcmF0b3JzID0gJ2NvbnRhaW5lci5kZWNvcmF0b3JzJzsKCgkJICAgIGlmICghaXNEeW5hbWljKSB7CgkJICAgICAgcGFyYW1zLnVuc2hpZnQodGhpcy5uYW1lTG9va3VwKCdwYXJ0aWFscycsIG5hbWUsICdwYXJ0aWFsJykpOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHBhcmFtcy51bnNoaWZ0KG5hbWUpOwoJCSAgICB9CgoJCSAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdCkgewoJCSAgICAgIG9wdGlvbnMuZGVwdGhzID0gJ2RlcHRocyc7CgkJICAgIH0KCQkgICAgb3B0aW9ucyA9IHRoaXMub2JqZWN0TGl0ZXJhbChvcHRpb25zKTsKCQkgICAgcGFyYW1zLnB1c2gob3B0aW9ucyk7CgoJCSAgICB0aGlzLnB1c2godGhpcy5zb3VyY2UuZnVuY3Rpb25DYWxsKCdjb250YWluZXIuaW52b2tlUGFydGlhbCcsICcnLCBwYXJhbXMpKTsKCQkgIH0sCgoJCSAgLy8gW2Fzc2lnblRvSGFzaF0KCQkgIC8vCgkJICAvLyBPbiBzdGFjaywgYmVmb3JlOiB2YWx1ZSwgLi4uLCBoYXNoLCAuLi4KCQkgIC8vIE9uIHN0YWNrLCBhZnRlcjogLi4uLCBoYXNoLCAuLi4KCQkgIC8vCgkJICAvLyBQb3BzIGEgdmFsdWUgb2ZmIHRoZSBzdGFjayBhbmQgYXNzaWducyBpdCB0byB0aGUgY3VycmVudCBoYXNoCgkJICBhc3NpZ25Ub0hhc2g6IGZ1bmN0aW9uIGFzc2lnblRvSGFzaChrZXkpIHsKCQkgICAgdmFyIHZhbHVlID0gdGhpcy5wb3BTdGFjaygpLAoJCSAgICAgICAgY29udGV4dCA9IHVuZGVmaW5lZCwKCQkgICAgICAgIHR5cGUgPSB1bmRlZmluZWQsCgkJICAgICAgICBpZCA9IHVuZGVmaW5lZDsKCgkJICAgIGlmICh0aGlzLnRyYWNrSWRzKSB7CgkJICAgICAgaWQgPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgIH0KCQkgICAgaWYgKHRoaXMuc3RyaW5nUGFyYW1zKSB7CgkJICAgICAgdHlwZSA9IHRoaXMucG9wU3RhY2soKTsKCQkgICAgICBjb250ZXh0ID0gdGhpcy5wb3BTdGFjaygpOwoJCSAgICB9CgoJCSAgICB2YXIgaGFzaCA9IHRoaXMuaGFzaDsKCQkgICAgaWYgKGNvbnRleHQpIHsKCQkgICAgICBoYXNoLmNvbnRleHRzW2tleV0gPSBjb250ZXh0OwoJCSAgICB9CgkJICAgIGlmICh0eXBlKSB7CgkJICAgICAgaGFzaC50eXBlc1trZXldID0gdHlwZTsKCQkgICAgfQoJCSAgICBpZiAoaWQpIHsKCQkgICAgICBoYXNoLmlkc1trZXldID0gaWQ7CgkJICAgIH0KCQkgICAgaGFzaC52YWx1ZXNba2V5XSA9IHZhbHVlOwoJCSAgfSwKCgkJICBwdXNoSWQ6IGZ1bmN0aW9uIHB1c2hJZCh0eXBlLCBuYW1lLCBjaGlsZCkgewoJCSAgICBpZiAodHlwZSA9PT0gJ0Jsb2NrUGFyYW0nKSB7CgkJICAgICAgdGhpcy5wdXNoU3RhY2tMaXRlcmFsKCdibG9ja1BhcmFtc1snICsgbmFtZVswXSArICddLnBhdGhbJyArIG5hbWVbMV0gKyAnXScgKyAoY2hpbGQgPyAnICsgJyArIEpTT04uc3RyaW5naWZ5KCcuJyArIGNoaWxkKSA6ICcnKSk7CgkJICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1BhdGhFeHByZXNzaW9uJykgewoJCSAgICAgIHRoaXMucHVzaFN0cmluZyhuYW1lKTsKCQkgICAgfSBlbHNlIGlmICh0eXBlID09PSAnU3ViRXhwcmVzc2lvbicpIHsKCQkgICAgICB0aGlzLnB1c2hTdGFja0xpdGVyYWwoJ3RydWUnKTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICB0aGlzLnB1c2hTdGFja0xpdGVyYWwoJ251bGwnKTsKCQkgICAgfQoJCSAgfSwKCgkJICAvLyBIRUxQRVJTCgoJCSAgY29tcGlsZXI6IEphdmFTY3JpcHRDb21waWxlciwKCgkJICBjb21waWxlQ2hpbGRyZW46IGZ1bmN0aW9uIGNvbXBpbGVDaGlsZHJlbihlbnZpcm9ubWVudCwgb3B0aW9ucykgewoJCSAgICB2YXIgY2hpbGRyZW4gPSBlbnZpcm9ubWVudC5jaGlsZHJlbiwKCQkgICAgICAgIGNoaWxkID0gdW5kZWZpbmVkLAoJCSAgICAgICAgY29tcGlsZXIgPSB1bmRlZmluZWQ7CgoJCSAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJCSAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07CgkJICAgICAgY29tcGlsZXIgPSBuZXcgdGhpcy5jb21waWxlcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5ldy1jYXAKCgkJICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5tYXRjaEV4aXN0aW5nUHJvZ3JhbShjaGlsZCk7CgoJCSAgICAgIGlmIChleGlzdGluZyA9PSBudWxsKSB7CgkJICAgICAgICB0aGlzLmNvbnRleHQucHJvZ3JhbXMucHVzaCgnJyk7IC8vIFBsYWNlaG9sZGVyIHRvIHByZXZlbnQgbmFtZSBjb25mbGljdHMgZm9yIG5lc3RlZCBjaGlsZHJlbgoJCSAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jb250ZXh0LnByb2dyYW1zLmxlbmd0aDsKCQkgICAgICAgIGNoaWxkLmluZGV4ID0gaW5kZXg7CgkJICAgICAgICBjaGlsZC5uYW1lID0gJ3Byb2dyYW0nICsgaW5kZXg7CgkJICAgICAgICB0aGlzLmNvbnRleHQucHJvZ3JhbXNbaW5kZXhdID0gY29tcGlsZXIuY29tcGlsZShjaGlsZCwgb3B0aW9ucywgdGhpcy5jb250ZXh0LCAhdGhpcy5wcmVjb21waWxlKTsKCQkgICAgICAgIHRoaXMuY29udGV4dC5kZWNvcmF0b3JzW2luZGV4XSA9IGNvbXBpbGVyLmRlY29yYXRvcnM7CgkJICAgICAgICB0aGlzLmNvbnRleHQuZW52aXJvbm1lbnRzW2luZGV4XSA9IGNoaWxkOwoKCQkgICAgICAgIHRoaXMudXNlRGVwdGhzID0gdGhpcy51c2VEZXB0aHMgfHwgY29tcGlsZXIudXNlRGVwdGhzOwoJCSAgICAgICAgdGhpcy51c2VCbG9ja1BhcmFtcyA9IHRoaXMudXNlQmxvY2tQYXJhbXMgfHwgY29tcGlsZXIudXNlQmxvY2tQYXJhbXM7CgkJICAgICAgICBjaGlsZC51c2VEZXB0aHMgPSB0aGlzLnVzZURlcHRoczsKCQkgICAgICAgIGNoaWxkLnVzZUJsb2NrUGFyYW1zID0gdGhpcy51c2VCbG9ja1BhcmFtczsKCQkgICAgICB9IGVsc2UgewoJCSAgICAgICAgY2hpbGQuaW5kZXggPSBleGlzdGluZy5pbmRleDsKCQkgICAgICAgIGNoaWxkLm5hbWUgPSAncHJvZ3JhbScgKyBleGlzdGluZy5pbmRleDsKCgkJICAgICAgICB0aGlzLnVzZURlcHRocyA9IHRoaXMudXNlRGVwdGhzIHx8IGV4aXN0aW5nLnVzZURlcHRoczsKCQkgICAgICAgIHRoaXMudXNlQmxvY2tQYXJhbXMgPSB0aGlzLnVzZUJsb2NrUGFyYW1zIHx8IGV4aXN0aW5nLnVzZUJsb2NrUGFyYW1zOwoJCSAgICAgIH0KCQkgICAgfQoJCSAgfSwKCQkgIG1hdGNoRXhpc3RpbmdQcm9ncmFtOiBmdW5jdGlvbiBtYXRjaEV4aXN0aW5nUHJvZ3JhbShjaGlsZCkgewoJCSAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb250ZXh0LmVudmlyb25tZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewoJCSAgICAgIHZhciBlbnZpcm9ubWVudCA9IHRoaXMuY29udGV4dC5lbnZpcm9ubWVudHNbaV07CgkJICAgICAgaWYgKGVudmlyb25tZW50ICYmIGVudmlyb25tZW50LmVxdWFscyhjaGlsZCkpIHsKCQkgICAgICAgIHJldHVybiBlbnZpcm9ubWVudDsKCQkgICAgICB9CgkJICAgIH0KCQkgIH0sCgoJCSAgcHJvZ3JhbUV4cHJlc3Npb246IGZ1bmN0aW9uIHByb2dyYW1FeHByZXNzaW9uKGd1aWQpIHsKCQkgICAgdmFyIGNoaWxkID0gdGhpcy5lbnZpcm9ubWVudC5jaGlsZHJlbltndWlkXSwKCQkgICAgICAgIHByb2dyYW1QYXJhbXMgPSBbY2hpbGQuaW5kZXgsICdkYXRhJywgY2hpbGQuYmxvY2tQYXJhbXNdOwoKCQkgICAgaWYgKHRoaXMudXNlQmxvY2tQYXJhbXMgfHwgdGhpcy51c2VEZXB0aHMpIHsKCQkgICAgICBwcm9ncmFtUGFyYW1zLnB1c2goJ2Jsb2NrUGFyYW1zJyk7CgkJICAgIH0KCQkgICAgaWYgKHRoaXMudXNlRGVwdGhzKSB7CgkJICAgICAgcHJvZ3JhbVBhcmFtcy5wdXNoKCdkZXB0aHMnKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuICdjb250YWluZXIucHJvZ3JhbSgnICsgcHJvZ3JhbVBhcmFtcy5qb2luKCcsICcpICsgJyknOwoJCSAgfSwKCgkJICB1c2VSZWdpc3RlcjogZnVuY3Rpb24gdXNlUmVnaXN0ZXIobmFtZSkgewoJCSAgICBpZiAoIXRoaXMucmVnaXN0ZXJzW25hbWVdKSB7CgkJICAgICAgdGhpcy5yZWdpc3RlcnNbbmFtZV0gPSB0cnVlOwoJCSAgICAgIHRoaXMucmVnaXN0ZXJzLmxpc3QucHVzaChuYW1lKTsKCQkgICAgfQoJCSAgfSwKCgkJICBwdXNoOiBmdW5jdGlvbiBwdXNoKGV4cHIpIHsKCQkgICAgaWYgKCEoZXhwciBpbnN0YW5jZW9mIExpdGVyYWwpKSB7CgkJICAgICAgZXhwciA9IHRoaXMuc291cmNlLndyYXAoZXhwcik7CgkJICAgIH0KCgkJICAgIHRoaXMuaW5saW5lU3RhY2sucHVzaChleHByKTsKCQkgICAgcmV0dXJuIGV4cHI7CgkJICB9LAoKCQkgIHB1c2hTdGFja0xpdGVyYWw6IGZ1bmN0aW9uIHB1c2hTdGFja0xpdGVyYWwoaXRlbSkgewoJCSAgICB0aGlzLnB1c2gobmV3IExpdGVyYWwoaXRlbSkpOwoJCSAgfSwKCgkJICBwdXNoU291cmNlOiBmdW5jdGlvbiBwdXNoU291cmNlKHNvdXJjZSkgewoJCSAgICBpZiAodGhpcy5wZW5kaW5nQ29udGVudCkgewoJCSAgICAgIHRoaXMuc291cmNlLnB1c2godGhpcy5hcHBlbmRUb0J1ZmZlcih0aGlzLnNvdXJjZS5xdW90ZWRTdHJpbmcodGhpcy5wZW5kaW5nQ29udGVudCksIHRoaXMucGVuZGluZ0xvY2F0aW9uKSk7CgkJICAgICAgdGhpcy5wZW5kaW5nQ29udGVudCA9IHVuZGVmaW5lZDsKCQkgICAgfQoKCQkgICAgaWYgKHNvdXJjZSkgewoJCSAgICAgIHRoaXMuc291cmNlLnB1c2goc291cmNlKTsKCQkgICAgfQoJCSAgfSwKCgkJICByZXBsYWNlU3RhY2s6IGZ1bmN0aW9uIHJlcGxhY2VTdGFjayhjYWxsYmFjaykgewoJCSAgICB2YXIgcHJlZml4ID0gWycoJ10sCgkJICAgICAgICBzdGFjayA9IHVuZGVmaW5lZCwKCQkgICAgICAgIGNyZWF0ZWRTdGFjayA9IHVuZGVmaW5lZCwKCQkgICAgICAgIHVzZWRMaXRlcmFsID0gdW5kZWZpbmVkOwoKCQkgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCQkgICAgaWYgKCF0aGlzLmlzSW5saW5lKCkpIHsKCQkgICAgICB0aHJvdyBuZXcgX2V4Y2VwdGlvbjJbJ2RlZmF1bHQnXSgncmVwbGFjZVN0YWNrIG9uIG5vbi1pbmxpbmUnKTsKCQkgICAgfQoKCQkgICAgLy8gV2Ugd2FudCB0byBtZXJnZSB0aGUgaW5saW5lIHN0YXRlbWVudCBpbnRvIHRoZSByZXBsYWNlbWVudCBzdGF0ZW1lbnQgdmlhICcsJwoJCSAgICB2YXIgdG9wID0gdGhpcy5wb3BTdGFjayh0cnVlKTsKCgkJICAgIGlmICh0b3AgaW5zdGFuY2VvZiBMaXRlcmFsKSB7CgkJICAgICAgLy8gTGl0ZXJhbHMgZG8gbm90IG5lZWQgdG8gYmUgaW5saW5lZAoJCSAgICAgIHN0YWNrID0gW3RvcC52YWx1ZV07CgkJICAgICAgcHJlZml4ID0gWycoJywgc3RhY2tdOwoJCSAgICAgIHVzZWRMaXRlcmFsID0gdHJ1ZTsKCQkgICAgfSBlbHNlIHsKCQkgICAgICAvLyBHZXQgb3IgY3JlYXRlIHRoZSBjdXJyZW50IHN0YWNrIG5hbWUgZm9yIHVzZSBieSB0aGUgaW5saW5lCgkJICAgICAgY3JlYXRlZFN0YWNrID0gdHJ1ZTsKCQkgICAgICB2YXIgX25hbWUgPSB0aGlzLmluY3JTdGFjaygpOwoKCQkgICAgICBwcmVmaXggPSBbJygoJywgdGhpcy5wdXNoKF9uYW1lKSwgJyA9ICcsIHRvcCwgJyknXTsKCQkgICAgICBzdGFjayA9IHRoaXMudG9wU3RhY2soKTsKCQkgICAgfQoKCQkgICAgdmFyIGl0ZW0gPSBjYWxsYmFjay5jYWxsKHRoaXMsIHN0YWNrKTsKCgkJICAgIGlmICghdXNlZExpdGVyYWwpIHsKCQkgICAgICB0aGlzLnBvcFN0YWNrKCk7CgkJICAgIH0KCQkgICAgaWYgKGNyZWF0ZWRTdGFjaykgewoJCSAgICAgIHRoaXMuc3RhY2tTbG90LS07CgkJICAgIH0KCQkgICAgdGhpcy5wdXNoKHByZWZpeC5jb25jYXQoaXRlbSwgJyknKSk7CgkJICB9LAoKCQkgIGluY3JTdGFjazogZnVuY3Rpb24gaW5jclN0YWNrKCkgewoJCSAgICB0aGlzLnN0YWNrU2xvdCsrOwoJCSAgICBpZiAodGhpcy5zdGFja1Nsb3QgPiB0aGlzLnN0YWNrVmFycy5sZW5ndGgpIHsKCQkgICAgICB0aGlzLnN0YWNrVmFycy5wdXNoKCdzdGFjaycgKyB0aGlzLnN0YWNrU2xvdCk7CgkJICAgIH0KCQkgICAgcmV0dXJuIHRoaXMudG9wU3RhY2tOYW1lKCk7CgkJICB9LAoJCSAgdG9wU3RhY2tOYW1lOiBmdW5jdGlvbiB0b3BTdGFja05hbWUoKSB7CgkJICAgIHJldHVybiAnc3RhY2snICsgdGhpcy5zdGFja1Nsb3Q7CgkJICB9LAoJCSAgZmx1c2hJbmxpbmU6IGZ1bmN0aW9uIGZsdXNoSW5saW5lKCkgewoJCSAgICB2YXIgaW5saW5lU3RhY2sgPSB0aGlzLmlubGluZVN0YWNrOwoJCSAgICB0aGlzLmlubGluZVN0YWNrID0gW107CgkJICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpbmxpbmVTdGFjay5sZW5ndGg7IGkgPCBsZW47IGkrKykgewoJCSAgICAgIHZhciBlbnRyeSA9IGlubGluZVN0YWNrW2ldOwoJCSAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoJCSAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIExpdGVyYWwpIHsKCQkgICAgICAgIHRoaXMuY29tcGlsZVN0YWNrLnB1c2goZW50cnkpOwoJCSAgICAgIH0gZWxzZSB7CgkJICAgICAgICB2YXIgc3RhY2sgPSB0aGlzLmluY3JTdGFjaygpOwoJCSAgICAgICAgdGhpcy5wdXNoU291cmNlKFtzdGFjaywgJyA9ICcsIGVudHJ5LCAnOyddKTsKCQkgICAgICAgIHRoaXMuY29tcGlsZVN0YWNrLnB1c2goc3RhY2spOwoJCSAgICAgIH0KCQkgICAgfQoJCSAgfSwKCQkgIGlzSW5saW5lOiBmdW5jdGlvbiBpc0lubGluZSgpIHsKCQkgICAgcmV0dXJuIHRoaXMuaW5saW5lU3RhY2subGVuZ3RoOwoJCSAgfSwKCgkJICBwb3BTdGFjazogZnVuY3Rpb24gcG9wU3RhY2sod3JhcHBlZCkgewoJCSAgICB2YXIgaW5saW5lID0gdGhpcy5pc0lubGluZSgpLAoJCSAgICAgICAgaXRlbSA9IChpbmxpbmUgPyB0aGlzLmlubGluZVN0YWNrIDogdGhpcy5jb21waWxlU3RhY2spLnBvcCgpOwoKCQkgICAgaWYgKCF3cmFwcGVkICYmIGl0ZW0gaW5zdGFuY2VvZiBMaXRlcmFsKSB7CgkJICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgaWYgKCFpbmxpbmUpIHsKCQkgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgkJICAgICAgICBpZiAoIXRoaXMuc3RhY2tTbG90KSB7CgkJICAgICAgICAgIHRocm93IG5ldyBfZXhjZXB0aW9uMlsnZGVmYXVsdCddKCdJbnZhbGlkIHN0YWNrIHBvcCcpOwoJCSAgICAgICAgfQoJCSAgICAgICAgdGhpcy5zdGFja1Nsb3QtLTsKCQkgICAgICB9CgkJICAgICAgcmV0dXJuIGl0ZW07CgkJICAgIH0KCQkgIH0sCgoJCSAgdG9wU3RhY2s6IGZ1bmN0aW9uIHRvcFN0YWNrKCkgewoJCSAgICB2YXIgc3RhY2sgPSB0aGlzLmlzSW5saW5lKCkgPyB0aGlzLmlubGluZVN0YWNrIDogdGhpcy5jb21waWxlU3RhY2ssCgkJICAgICAgICBpdGVtID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CgoJCSAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCQkgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBMaXRlcmFsKSB7CgkJICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7CgkJICAgIH0gZWxzZSB7CgkJICAgICAgcmV0dXJuIGl0ZW07CgkJICAgIH0KCQkgIH0sCgoJCSAgY29udGV4dE5hbWU6IGZ1bmN0aW9uIGNvbnRleHROYW1lKGNvbnRleHQpIHsKCQkgICAgaWYgKHRoaXMudXNlRGVwdGhzICYmIGNvbnRleHQpIHsKCQkgICAgICByZXR1cm4gJ2RlcHRoc1snICsgY29udGV4dCArICddJzsKCQkgICAgfSBlbHNlIHsKCQkgICAgICByZXR1cm4gJ2RlcHRoJyArIGNvbnRleHQ7CgkJICAgIH0KCQkgIH0sCgoJCSAgcXVvdGVkU3RyaW5nOiBmdW5jdGlvbiBxdW90ZWRTdHJpbmcoc3RyKSB7CgkJICAgIHJldHVybiB0aGlzLnNvdXJjZS5xdW90ZWRTdHJpbmcoc3RyKTsKCQkgIH0sCgoJCSAgb2JqZWN0TGl0ZXJhbDogZnVuY3Rpb24gb2JqZWN0TGl0ZXJhbChvYmopIHsKCQkgICAgcmV0dXJuIHRoaXMuc291cmNlLm9iamVjdExpdGVyYWwob2JqKTsKCQkgIH0sCgoJCSAgYWxpYXNhYmxlOiBmdW5jdGlvbiBhbGlhc2FibGUobmFtZSkgewoJCSAgICB2YXIgcmV0ID0gdGhpcy5hbGlhc2VzW25hbWVdOwoJCSAgICBpZiAocmV0KSB7CgkJICAgICAgcmV0LnJlZmVyZW5jZUNvdW50Kys7CgkJICAgICAgcmV0dXJuIHJldDsKCQkgICAgfQoKCQkgICAgcmV0ID0gdGhpcy5hbGlhc2VzW25hbWVdID0gdGhpcy5zb3VyY2Uud3JhcChuYW1lKTsKCQkgICAgcmV0LmFsaWFzYWJsZSA9IHRydWU7CgkJICAgIHJldC5yZWZlcmVuY2VDb3VudCA9IDE7CgoJCSAgICByZXR1cm4gcmV0OwoJCSAgfSwKCgkJICBzZXR1cEhlbHBlcjogZnVuY3Rpb24gc2V0dXBIZWxwZXIocGFyYW1TaXplLCBuYW1lLCBibG9ja0hlbHBlcikgewoJCSAgICB2YXIgcGFyYW1zID0gW10sCgkJICAgICAgICBwYXJhbXNJbml0ID0gdGhpcy5zZXR1cEhlbHBlckFyZ3MobmFtZSwgcGFyYW1TaXplLCBwYXJhbXMsIGJsb2NrSGVscGVyKTsKCQkgICAgdmFyIGZvdW5kSGVscGVyID0gdGhpcy5uYW1lTG9va3VwKCdoZWxwZXJzJywgbmFtZSwgJ2hlbHBlcicpLAoJCSAgICAgICAgY2FsbENvbnRleHQgPSB0aGlzLmFsaWFzYWJsZSh0aGlzLmNvbnRleHROYW1lKDApICsgJyAhPSBudWxsID8gJyArIHRoaXMuY29udGV4dE5hbWUoMCkgKyAnIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSknKTsKCgkJICAgIHJldHVybiB7CgkJICAgICAgcGFyYW1zOiBwYXJhbXMsCgkJICAgICAgcGFyYW1zSW5pdDogcGFyYW1zSW5pdCwKCQkgICAgICBuYW1lOiBmb3VuZEhlbHBlciwKCQkgICAgICBjYWxsUGFyYW1zOiBbY2FsbENvbnRleHRdLmNvbmNhdChwYXJhbXMpCgkJICAgIH07CgkJICB9LAoKCQkgIHNldHVwUGFyYW1zOiBmdW5jdGlvbiBzZXR1cFBhcmFtcyhoZWxwZXIsIHBhcmFtU2l6ZSwgcGFyYW1zKSB7CgkJICAgIHZhciBvcHRpb25zID0ge30sCgkJICAgICAgICBjb250ZXh0cyA9IFtdLAoJCSAgICAgICAgdHlwZXMgPSBbXSwKCQkgICAgICAgIGlkcyA9IFtdLAoJCSAgICAgICAgb2JqZWN0QXJncyA9ICFwYXJhbXMsCgkJICAgICAgICBwYXJhbSA9IHVuZGVmaW5lZDsKCgkJICAgIGlmIChvYmplY3RBcmdzKSB7CgkJICAgICAgcGFyYW1zID0gW107CgkJICAgIH0KCgkJICAgIG9wdGlvbnMubmFtZSA9IHRoaXMucXVvdGVkU3RyaW5nKGhlbHBlcik7CgkJICAgIG9wdGlvbnMuaGFzaCA9IHRoaXMucG9wU3RhY2soKTsKCgkJICAgIGlmICh0aGlzLnRyYWNrSWRzKSB7CgkJICAgICAgb3B0aW9ucy5oYXNoSWRzID0gdGhpcy5wb3BTdGFjaygpOwoJCSAgICB9CgkJICAgIGlmICh0aGlzLnN0cmluZ1BhcmFtcykgewoJCSAgICAgIG9wdGlvbnMuaGFzaFR5cGVzID0gdGhpcy5wb3BTdGFjaygpOwoJCSAgICAgIG9wdGlvbnMuaGFzaENvbnRleHRzID0gdGhpcy5wb3BTdGFjaygpOwoJCSAgICB9CgoJCSAgICB2YXIgaW52ZXJzZSA9IHRoaXMucG9wU3RhY2soKSwKCQkgICAgICAgIHByb2dyYW0gPSB0aGlzLnBvcFN0YWNrKCk7CgoJCSAgICAvLyBBdm9pZCBzZXR0aW5nIGZuIGFuZCBpbnZlcnNlIGlmIG5laXRoZXIgYXJlIHNldC4gVGhpcyBhbGxvd3MKCQkgICAgLy8gaGVscGVycyB0byBkbyBhIGNoZWNrIGZvciBgaWYgKG9wdGlvbnMuZm4pYAoJCSAgICBpZiAocHJvZ3JhbSB8fCBpbnZlcnNlKSB7CgkJICAgICAgb3B0aW9ucy5mbiA9IHByb2dyYW0gfHwgJ2NvbnRhaW5lci5ub29wJzsKCQkgICAgICBvcHRpb25zLmludmVyc2UgPSBpbnZlcnNlIHx8ICdjb250YWluZXIubm9vcCc7CgkJICAgIH0KCgkJICAgIC8vIFRoZSBwYXJhbWV0ZXJzIGdvIG9uIHRvIHRoZSBzdGFjayBpbiBvcmRlciAobWFraW5nIHN1cmUgdGhhdCB0aGV5IGFyZSBldmFsdWF0ZWQgaW4gb3JkZXIpCgkJICAgIC8vIHNvIHdlIG5lZWQgdG8gcG9wIHRoZW0gb2ZmIHRoZSBzdGFjayBpbiByZXZlcnNlIG9yZGVyCgkJICAgIHZhciBpID0gcGFyYW1TaXplOwoJCSAgICB3aGlsZSAoaS0tKSB7CgkJICAgICAgcGFyYW0gPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgICAgcGFyYW1zW2ldID0gcGFyYW07CgoJCSAgICAgIGlmICh0aGlzLnRyYWNrSWRzKSB7CgkJICAgICAgICBpZHNbaV0gPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgICAgfQoJCSAgICAgIGlmICh0aGlzLnN0cmluZ1BhcmFtcykgewoJCSAgICAgICAgdHlwZXNbaV0gPSB0aGlzLnBvcFN0YWNrKCk7CgkJICAgICAgICBjb250ZXh0c1tpXSA9IHRoaXMucG9wU3RhY2soKTsKCQkgICAgICB9CgkJICAgIH0KCgkJICAgIGlmIChvYmplY3RBcmdzKSB7CgkJICAgICAgb3B0aW9ucy5hcmdzID0gdGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShwYXJhbXMpOwoJCSAgICB9CgoJCSAgICBpZiAodGhpcy50cmFja0lkcykgewoJCSAgICAgIG9wdGlvbnMuaWRzID0gdGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShpZHMpOwoJCSAgICB9CgkJICAgIGlmICh0aGlzLnN0cmluZ1BhcmFtcykgewoJCSAgICAgIG9wdGlvbnMudHlwZXMgPSB0aGlzLnNvdXJjZS5nZW5lcmF0ZUFycmF5KHR5cGVzKTsKCQkgICAgICBvcHRpb25zLmNvbnRleHRzID0gdGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShjb250ZXh0cyk7CgkJICAgIH0KCgkJICAgIGlmICh0aGlzLm9wdGlvbnMuZGF0YSkgewoJCSAgICAgIG9wdGlvbnMuZGF0YSA9ICdkYXRhJzsKCQkgICAgfQoJCSAgICBpZiAodGhpcy51c2VCbG9ja1BhcmFtcykgewoJCSAgICAgIG9wdGlvbnMuYmxvY2tQYXJhbXMgPSAnYmxvY2tQYXJhbXMnOwoJCSAgICB9CgkJICAgIHJldHVybiBvcHRpb25zOwoJCSAgfSwKCgkJICBzZXR1cEhlbHBlckFyZ3M6IGZ1bmN0aW9uIHNldHVwSGVscGVyQXJncyhoZWxwZXIsIHBhcmFtU2l6ZSwgcGFyYW1zLCB1c2VSZWdpc3RlcikgewoJCSAgICB2YXIgb3B0aW9ucyA9IHRoaXMuc2V0dXBQYXJhbXMoaGVscGVyLCBwYXJhbVNpemUsIHBhcmFtcyk7CgkJICAgIG9wdGlvbnMgPSB0aGlzLm9iamVjdExpdGVyYWwob3B0aW9ucyk7CgkJICAgIGlmICh1c2VSZWdpc3RlcikgewoJCSAgICAgIHRoaXMudXNlUmVnaXN0ZXIoJ29wdGlvbnMnKTsKCQkgICAgICBwYXJhbXMucHVzaCgnb3B0aW9ucycpOwoJCSAgICAgIHJldHVybiBbJ29wdGlvbnM9Jywgb3B0aW9uc107CgkJICAgIH0gZWxzZSBpZiAocGFyYW1zKSB7CgkJICAgICAgcGFyYW1zLnB1c2gob3B0aW9ucyk7CgkJICAgICAgcmV0dXJuICcnOwoJCSAgICB9IGVsc2UgewoJCSAgICAgIHJldHVybiBvcHRpb25zOwoJCSAgICB9CgkJICB9CgkJfTsKCgkJKGZ1bmN0aW9uICgpIHsKCQkgIHZhciByZXNlcnZlZFdvcmRzID0gKCdicmVhayBlbHNlIG5ldyB2YXInICsgJyBjYXNlIGZpbmFsbHkgcmV0dXJuIHZvaWQnICsgJyBjYXRjaCBmb3Igc3dpdGNoIHdoaWxlJyArICcgY29udGludWUgZnVuY3Rpb24gdGhpcyB3aXRoJyArICcgZGVmYXVsdCBpZiB0aHJvdycgKyAnIGRlbGV0ZSBpbiB0cnknICsgJyBkbyBpbnN0YW5jZW9mIHR5cGVvZicgKyAnIGFic3RyYWN0IGVudW0gaW50IHNob3J0JyArICcgYm9vbGVhbiBleHBvcnQgaW50ZXJmYWNlIHN0YXRpYycgKyAnIGJ5dGUgZXh0ZW5kcyBsb25nIHN1cGVyJyArICcgY2hhciBmaW5hbCBuYXRpdmUgc3luY2hyb25pemVkJyArICcgY2xhc3MgZmxvYXQgcGFja2FnZSB0aHJvd3MnICsgJyBjb25zdCBnb3RvIHByaXZhdGUgdHJhbnNpZW50JyArICcgZGVidWdnZXIgaW1wbGVtZW50cyBwcm90ZWN0ZWQgdm9sYXRpbGUnICsgJyBkb3VibGUgaW1wb3J0IHB1YmxpYyBsZXQgeWllbGQgYXdhaXQnICsgJyBudWxsIHRydWUgZmFsc2UnKS5zcGxpdCgnICcpOwoKCQkgIHZhciBjb21waWxlcldvcmRzID0gSmF2YVNjcmlwdENvbXBpbGVyLlJFU0VSVkVEX1dPUkRTID0ge307CgoJCSAgZm9yICh2YXIgaSA9IDAsIGwgPSByZXNlcnZlZFdvcmRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJCSAgICBjb21waWxlcldvcmRzW3Jlc2VydmVkV29yZHNbaV1dID0gdHJ1ZTsKCQkgIH0KCQl9KSgpOwoKCQlKYXZhU2NyaXB0Q29tcGlsZXIuaXNWYWxpZEphdmFTY3JpcHRWYXJpYWJsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJCSAgcmV0dXJuICFKYXZhU2NyaXB0Q29tcGlsZXIuUkVTRVJWRURfV09SRFNbbmFtZV0gJiYgL15bYS16QS1aXyRdWzAtOWEtekEtWl8kXSokLy50ZXN0KG5hbWUpOwoJCX07CgoJCWZ1bmN0aW9uIHN0cmljdExvb2t1cChyZXF1aXJlVGVybWluYWwsIGNvbXBpbGVyLCBwYXJ0cywgdHlwZSkgewoJCSAgdmFyIHN0YWNrID0gY29tcGlsZXIucG9wU3RhY2soKSwKCQkgICAgICBpID0gMCwKCQkgICAgICBsZW4gPSBwYXJ0cy5sZW5ndGg7CgkJICBpZiAocmVxdWlyZVRlcm1pbmFsKSB7CgkJICAgIGxlbi0tOwoJCSAgfQoKCQkgIGZvciAoOyBpIDwgbGVuOyBpKyspIHsKCQkgICAgc3RhY2sgPSBjb21waWxlci5uYW1lTG9va3VwKHN0YWNrLCBwYXJ0c1tpXSwgdHlwZSk7CgkJICB9CgoJCSAgaWYgKHJlcXVpcmVUZXJtaW5hbCkgewoJCSAgICByZXR1cm4gW2NvbXBpbGVyLmFsaWFzYWJsZSgnY29udGFpbmVyLnN0cmljdCcpLCAnKCcsIHN0YWNrLCAnLCAnLCBjb21waWxlci5xdW90ZWRTdHJpbmcocGFydHNbaV0pLCAnKSddOwoJCSAgfSBlbHNlIHsKCQkgICAgcmV0dXJuIHN0YWNrOwoJCSAgfQoJCX0KCgkJZXhwb3J0c1snZGVmYXVsdCddID0gSmF2YVNjcmlwdENvbXBpbGVyOwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogNDMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkJLyogZ2xvYmFsIGRlZmluZSAqLwoJCSd1c2Ugc3RyaWN0JzsKCgkJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgkJdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgoJCXZhciBTb3VyY2VOb2RlID0gdW5kZWZpbmVkOwoKCQl0cnkgewoJCSAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCQkgIGlmIChmYWxzZSkgewoJCSAgICAvLyBXZSBkb24ndCBzdXBwb3J0IHRoaXMgaW4gQU1EIGVudmlyb25tZW50cy4gRm9yIHRoZXNlIGVudmlyb25tZW50cywgd2UgYXN1c21lIHRoYXQKCQkgICAgLy8gdGhleSBhcmUgcnVubmluZyBvbiB0aGUgYnJvd3NlciBhbmQgdGh1cyBoYXZlIG5vIG5lZWQgZm9yIHRoZSBzb3VyY2UtbWFwIGxpYnJhcnkuCgkJICAgIHZhciBTb3VyY2VNYXAgPSByZXF1aXJlKCdzb3VyY2UtbWFwJyk7CgkJICAgIFNvdXJjZU5vZGUgPSBTb3VyY2VNYXAuU291cmNlTm9kZTsKCQkgIH0KCQl9IGNhdGNoIChlcnIpIHt9CgkJLyogTk9QICovCgoJCS8qIGlzdGFuYnVsIGlnbm9yZSBpZjogdGVzdGVkIGJ1dCBub3QgY292ZXJlZCBpbiBpc3RhbmJ1bCBkdWUgdG8gZGlzdCBidWlsZCAgKi8KCQlpZiAoIVNvdXJjZU5vZGUpIHsKCQkgIFNvdXJjZU5vZGUgPSBmdW5jdGlvbiAobGluZSwgY29sdW1uLCBzcmNGaWxlLCBjaHVua3MpIHsKCQkgICAgdGhpcy5zcmMgPSAnJzsKCQkgICAgaWYgKGNodW5rcykgewoJCSAgICAgIHRoaXMuYWRkKGNodW5rcyk7CgkJICAgIH0KCQkgIH07CgkJICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoJCSAgU291cmNlTm9kZS5wcm90b3R5cGUgPSB7CgkJICAgIGFkZDogZnVuY3Rpb24gYWRkKGNodW5rcykgewoJCSAgICAgIGlmIChfdXRpbHMuaXNBcnJheShjaHVua3MpKSB7CgkJICAgICAgICBjaHVua3MgPSBjaHVua3Muam9pbignJyk7CgkJICAgICAgfQoJCSAgICAgIHRoaXMuc3JjICs9IGNodW5rczsKCQkgICAgfSwKCQkgICAgcHJlcGVuZDogZnVuY3Rpb24gcHJlcGVuZChjaHVua3MpIHsKCQkgICAgICBpZiAoX3V0aWxzLmlzQXJyYXkoY2h1bmtzKSkgewoJCSAgICAgICAgY2h1bmtzID0gY2h1bmtzLmpvaW4oJycpOwoJCSAgICAgIH0KCQkgICAgICB0aGlzLnNyYyA9IGNodW5rcyArIHRoaXMuc3JjOwoJCSAgICB9LAoJCSAgICB0b1N0cmluZ1dpdGhTb3VyY2VNYXA6IGZ1bmN0aW9uIHRvU3RyaW5nV2l0aFNvdXJjZU1hcCgpIHsKCQkgICAgICByZXR1cm4geyBjb2RlOiB0aGlzLnRvU3RyaW5nKCkgfTsKCQkgICAgfSwKCQkgICAgdG9TdHJpbmc6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewoJCSAgICAgIHJldHVybiB0aGlzLnNyYzsKCQkgICAgfQoJCSAgfTsKCQl9CgoJCWZ1bmN0aW9uIGNhc3RDaHVuayhjaHVuaywgY29kZUdlbiwgbG9jKSB7CgkJICBpZiAoX3V0aWxzLmlzQXJyYXkoY2h1bmspKSB7CgkJICAgIHZhciByZXQgPSBbXTsKCgkJICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaHVuay5sZW5ndGg7IGkgPCBsZW47IGkrKykgewoJCSAgICAgIHJldC5wdXNoKGNvZGVHZW4ud3JhcChjaHVua1tpXSwgbG9jKSk7CgkJICAgIH0KCQkgICAgcmV0dXJuIHJldDsKCQkgIH0gZWxzZSBpZiAodHlwZW9mIGNodW5rID09PSAnYm9vbGVhbicgfHwgdHlwZW9mIGNodW5rID09PSAnbnVtYmVyJykgewoJCSAgICAvLyBIYW5kbGUgcHJpbWl0aXZlcyB0aGF0IHRoZSBTb3VyY2VOb2RlIHdpbGwgdGhyb3cgdXAgb24KCQkgICAgcmV0dXJuIGNodW5rICsgJyc7CgkJICB9CgkJICByZXR1cm4gY2h1bms7CgkJfQoKCQlmdW5jdGlvbiBDb2RlR2VuKHNyY0ZpbGUpIHsKCQkgIHRoaXMuc3JjRmlsZSA9IHNyY0ZpbGU7CgkJICB0aGlzLnNvdXJjZSA9IFtdOwoJCX0KCgkJQ29kZUdlbi5wcm90b3R5cGUgPSB7CgkJICBpc0VtcHR5OiBmdW5jdGlvbiBpc0VtcHR5KCkgewoJCSAgICByZXR1cm4gIXRoaXMuc291cmNlLmxlbmd0aDsKCQkgIH0sCgkJICBwcmVwZW5kOiBmdW5jdGlvbiBwcmVwZW5kKHNvdXJjZSwgbG9jKSB7CgkJICAgIHRoaXMuc291cmNlLnVuc2hpZnQodGhpcy53cmFwKHNvdXJjZSwgbG9jKSk7CgkJICB9LAoJCSAgcHVzaDogZnVuY3Rpb24gcHVzaChzb3VyY2UsIGxvYykgewoJCSAgICB0aGlzLnNvdXJjZS5wdXNoKHRoaXMud3JhcChzb3VyY2UsIGxvYykpOwoJCSAgfSwKCgkJICBtZXJnZTogZnVuY3Rpb24gbWVyZ2UoKSB7CgkJICAgIHZhciBzb3VyY2UgPSB0aGlzLmVtcHR5KCk7CgkJICAgIHRoaXMuZWFjaChmdW5jdGlvbiAobGluZSkgewoJCSAgICAgIHNvdXJjZS5hZGQoWycgICcsIGxpbmUsICdcbiddKTsKCQkgICAgfSk7CgkJICAgIHJldHVybiBzb3VyY2U7CgkJICB9LAoKCQkgIGVhY2g6IGZ1bmN0aW9uIGVhY2goaXRlcikgewoJCSAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3VyY2UubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKCQkgICAgICBpdGVyKHRoaXMuc291cmNlW2ldKTsKCQkgICAgfQoJCSAgfSwKCgkJICBlbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7CgkJICAgIHZhciBsb2MgPSB0aGlzLmN1cnJlbnRMb2NhdGlvbiB8fCB7IHN0YXJ0OiB7fSB9OwoJCSAgICByZXR1cm4gbmV3IFNvdXJjZU5vZGUobG9jLnN0YXJ0LmxpbmUsIGxvYy5zdGFydC5jb2x1bW4sIHRoaXMuc3JjRmlsZSk7CgkJICB9LAoJCSAgd3JhcDogZnVuY3Rpb24gd3JhcChjaHVuaykgewoJCSAgICB2YXIgbG9jID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdGhpcy5jdXJyZW50TG9jYXRpb24gfHwgeyBzdGFydDoge30gfSA6IGFyZ3VtZW50c1sxXTsKCgkJICAgIGlmIChjaHVuayBpbnN0YW5jZW9mIFNvdXJjZU5vZGUpIHsKCQkgICAgICByZXR1cm4gY2h1bms7CgkJICAgIH0KCgkJICAgIGNodW5rID0gY2FzdENodW5rKGNodW5rLCB0aGlzLCBsb2MpOwoKCQkgICAgcmV0dXJuIG5ldyBTb3VyY2VOb2RlKGxvYy5zdGFydC5saW5lLCBsb2Muc3RhcnQuY29sdW1uLCB0aGlzLnNyY0ZpbGUsIGNodW5rKTsKCQkgIH0sCgoJCSAgZnVuY3Rpb25DYWxsOiBmdW5jdGlvbiBmdW5jdGlvbkNhbGwoZm4sIHR5cGUsIHBhcmFtcykgewoJCSAgICBwYXJhbXMgPSB0aGlzLmdlbmVyYXRlTGlzdChwYXJhbXMpOwoJCSAgICByZXR1cm4gdGhpcy53cmFwKFtmbiwgdHlwZSA/ICcuJyArIHR5cGUgKyAnKCcgOiAnKCcsIHBhcmFtcywgJyknXSk7CgkJICB9LAoKCQkgIHF1b3RlZFN0cmluZzogZnVuY3Rpb24gcXVvdGVkU3RyaW5nKHN0cikgewoJCSAgICByZXR1cm4gJyInICsgKHN0ciArICcnKS5yZXBsYWNlKC9cXC9nLCAnXFxcXCcpLnJlcGxhY2UoLyIvZywgJ1xcIicpLnJlcGxhY2UoL1xuL2csICdcXG4nKS5yZXBsYWNlKC9cci9nLCAnXFxyJykucmVwbGFjZSgvXHUyMDI4L2csICdcXHUyMDI4JykgLy8gUGVyIEVjbWEtMjYyIDcuMyArIDcuOC40CgkJICAgIC5yZXBsYWNlKC9cdTIwMjkvZywgJ1xcdTIwMjknKSArICciJzsKCQkgIH0sCgoJCSAgb2JqZWN0TGl0ZXJhbDogZnVuY3Rpb24gb2JqZWN0TGl0ZXJhbChvYmopIHsKCQkgICAgdmFyIHBhaXJzID0gW107CgoJCSAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CgkJICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CgkJICAgICAgICB2YXIgdmFsdWUgPSBjYXN0Q2h1bmsob2JqW2tleV0sIHRoaXMpOwoJCSAgICAgICAgaWYgKHZhbHVlICE9PSAndW5kZWZpbmVkJykgewoJCSAgICAgICAgICBwYWlycy5wdXNoKFt0aGlzLnF1b3RlZFN0cmluZyhrZXkpLCAnOicsIHZhbHVlXSk7CgkJICAgICAgICB9CgkJICAgICAgfQoJCSAgICB9CgoJCSAgICB2YXIgcmV0ID0gdGhpcy5nZW5lcmF0ZUxpc3QocGFpcnMpOwoJCSAgICByZXQucHJlcGVuZCgneycpOwoJCSAgICByZXQuYWRkKCd9Jyk7CgkJICAgIHJldHVybiByZXQ7CgkJICB9LAoKCQkgIGdlbmVyYXRlTGlzdDogZnVuY3Rpb24gZ2VuZXJhdGVMaXN0KGVudHJpZXMpIHsKCQkgICAgdmFyIHJldCA9IHRoaXMuZW1wdHkoKTsKCgkJICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbnRyaWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CgkJICAgICAgaWYgKGkpIHsKCQkgICAgICAgIHJldC5hZGQoJywnKTsKCQkgICAgICB9CgoJCSAgICAgIHJldC5hZGQoY2FzdENodW5rKGVudHJpZXNbaV0sIHRoaXMpKTsKCQkgICAgfQoKCQkgICAgcmV0dXJuIHJldDsKCQkgIH0sCgoJCSAgZ2VuZXJhdGVBcnJheTogZnVuY3Rpb24gZ2VuZXJhdGVBcnJheShlbnRyaWVzKSB7CgkJICAgIHZhciByZXQgPSB0aGlzLmdlbmVyYXRlTGlzdChlbnRyaWVzKTsKCQkgICAgcmV0LnByZXBlbmQoJ1snKTsKCQkgICAgcmV0LmFkZCgnXScpOwoKCQkgICAgcmV0dXJuIHJldDsKCQkgIH0KCQl9OwoKCQlleHBvcnRzWydkZWZhdWx0J10gPSBDb2RlR2VuOwoJCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pCgkvKioqKioqLyBdKQoJfSk7Cgk7CgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyd1c2Ugc3RyaWN0JzsKCgkhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXyg2KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg4KV0sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKF8sIENvb2tpZSkgewoKCSAgdmFyIFNFQ1VSRURfQ09PS0lFID0gL15odHRwcy8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZik7CgoJICByZXR1cm4gewoJICAgIHNldENvb2tpZTogZnVuY3Rpb24gc2V0Q29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7CgkgICAgICBDb29raWUuc2V0KG5hbWUsIHZhbHVlLCBfLmRlZmF1bHRzKG9wdGlvbnMgfHwge30sIHsKCSAgICAgICAgc2VjdXJlOiBTRUNVUkVEX0NPT0tJRSwKCSAgICAgICAgcGF0aDogJy8nCgkgICAgICB9KSk7CgkgICAgfSwKCgkgICAgZ2V0Q29va2llOiBmdW5jdGlvbiBnZXRDb29raWUoKSB7CgkgICAgICByZXR1cm4gQ29va2llLmdldC5hcHBseShDb29raWUsIGFyZ3VtZW50cyk7CgkgICAgfSwKCgkgICAgcmVtb3ZlQ29va2llOiBmdW5jdGlvbiByZW1vdmVDb29raWUoKSB7CgkgICAgICByZXR1cm4gQ29va2llLnJlbW92ZS5hcHBseShDb29raWUsIGFyZ3VtZW50cyk7CgkgICAgfQoJICB9OwoJfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwoKLyoqKi8gfSksCi8qIDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsndXNlIHN0cmljdCc7CgoJLyogZXNsaW50IG9rdGEvZW5mb3JjZS1yZXF1aXJlanMtbmFtZXM6IDAsIG9rdGEvbm8tc3BlY2lmaWMtbWV0aG9kczogMCwgb2t0YS9uby1zcGVjaWZpYy1tb2R1bGVzOiAwICovCgkhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXyg3KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg0KV0sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKHVuZGVyc2NvcmUsIEhhbmRsZWJhcnMpIHsKCgkgIHZhciBfID0gdW5kZXJzY29yZS5ub0NvbmZsaWN0KCk7CgoJICBfLm1peGluKHsKCgkgICAgcmVzdWx0Q3R4OiBmdW5jdGlvbiByZXN1bHRDdHgob2JqZWN0LCBwcm9wZXJ0eSwgY29udGV4dCwgZGVmYXVsdFZhbHVlKSB7CgkgICAgICB2YXIgdmFsdWUgPSBfLmlzT2JqZWN0KG9iamVjdCkgPyBvYmplY3RbcHJvcGVydHldIDogdm9pZCAwOwoJICAgICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHsKCSAgICAgICAgdmFsdWUgPSB2YWx1ZS5jYWxsKGNvbnRleHQgfHwgb2JqZWN0KTsKCSAgICAgIH0KCSAgICAgIGlmICh2YWx1ZSkgewoJICAgICAgICByZXR1cm4gdmFsdWU7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gIV8uaXNVbmRlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IHZhbHVlOwoJICAgICAgfQoJICAgIH0sCgoJICAgIGlzSW50ZWdlcjogZnVuY3Rpb24gaXNJbnRlZ2VyKHgpIHsKCSAgICAgIHJldHVybiBfLmlzTnVtYmVyKHgpICYmIHggJSAxID09PSAwOwoJICAgIH0sCgoJICAgIHRlbXBsYXRlOiBmdW5jdGlvbiB0ZW1wbGF0ZShzb3VyY2UsIGRhdGEpIHsKCSAgICAgIHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2UpOwoJICAgICAgcmV0dXJuIGRhdGEgPyB0ZW1wbGF0ZShkYXRhKSA6IGZ1bmN0aW9uIChkYXRhKSB7CgkgICAgICAgIHJldHVybiB0ZW1wbGF0ZShkYXRhKTsKCSAgICAgIH07CgkgICAgfQoKCSAgfSk7CgoJICByZXR1cm4gXzsKCX0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCi8qKiovIH0pLAovKiA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187Ly8gICAgIFVuZGVyc2NvcmUuanMgMS44LjMKCS8vICAgICBodHRwOi8vdW5kZXJzY29yZWpzLm9yZwoJLy8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnMKCS8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoKCShmdW5jdGlvbigpIHsKCgkgIC8vIEJhc2VsaW5lIHNldHVwCgkgIC8vIC0tLS0tLS0tLS0tLS0tCgoJICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCBpbiB0aGUgYnJvd3Nlciwgb3IgYGV4cG9ydHNgIG9uIHRoZSBzZXJ2ZXIuCgkgIHZhciByb290ID0gdGhpczsKCgkgIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuCgkgIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87CgoJICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOgoJICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7CgoJICAvLyBDcmVhdGUgcXVpY2sgcmVmZXJlbmNlIHZhcmlhYmxlcyBmb3Igc3BlZWQgYWNjZXNzIHRvIGNvcmUgcHJvdG90eXBlcy4KCSAgdmFyCgkgICAgcHVzaCAgICAgICAgICAgICA9IEFycmF5UHJvdG8ucHVzaCwKCSAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSwKCSAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsCgkgICAgaGFzT3duUHJvcGVydHkgICA9IE9ialByb3RvLmhhc093blByb3BlcnR5OwoKCSAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlCgkgIC8vIGFyZSBkZWNsYXJlZCBoZXJlLgoJICB2YXIKCSAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LAoJICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLAoJICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLAoJICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7CgoJICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuCgkgIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9OwoKCSAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuCgkgIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7CgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTsKCSAgICB0aGlzLl93cmFwcGVkID0gb2JqOwoJICB9OwoKCSAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGgKCSAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpbgoJICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuCgkgIGlmICh0cnVlKSB7CgkgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7CgkgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfOwoJICAgIH0KCSAgICBleHBvcnRzLl8gPSBfOwoJICB9IGVsc2UgewoJICAgIHJvb3QuXyA9IF87CgkgIH0KCgkgIC8vIEN1cnJlbnQgdmVyc2lvbi4KCSAgXy5WRVJTSU9OID0gJzEuOC4zJzsKCgkgIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb24KCSAgLy8gb2YgdGhlIHBhc3NlZC1pbiBjYWxsYmFjaywgdG8gYmUgcmVwZWF0ZWRseSBhcHBsaWVkIGluIG90aGVyIFVuZGVyc2NvcmUKCSAgLy8gZnVuY3Rpb25zLgoJICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7CgkgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgcmV0dXJuIGZ1bmM7CgkgICAgc3dpdGNoIChhcmdDb3VudCA9PSBudWxsID8gMyA6IGFyZ0NvdW50KSB7CgkgICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewoJICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlKTsKCSAgICAgIH07CgkgICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHsKCSAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgb3RoZXIpOwoJICAgICAgfTsKCSAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikgewoJICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7CgkgICAgICB9OwoJICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikgewoJICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pOwoJICAgICAgfTsKCSAgICB9CgkgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTsKCSAgICB9OwoJICB9OwoKCSAgLy8gQSBtb3N0bHktaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWQKCSAgLy8gdG8gZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyCgkgIC8vIGlkZW50aXR5LCBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci4KCSAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7CgkgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5OwoJICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpOwoJICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSkgcmV0dXJuIF8ubWF0Y2hlcih2YWx1ZSk7CgkgICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpOwoJICB9OwoJICBfLml0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHsKCSAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTsKCSAgfTsKCgkgIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuCgkgIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7CgkgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikgewoJICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CgkgICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajsKCSAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKCSAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sCgkgICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSwKCSAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHsKCSAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTsKCSAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgcmV0dXJuIG9iajsKCSAgICB9OwoJICB9OwoKCSAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci4KCSAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHsKCSAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9OwoJICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTsKCSAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTsKCSAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7CgkgICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsOwoJICAgIHJldHVybiByZXN1bHQ7CgkgIH07CgoJICB2YXIgcHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHsKCSAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7CgkgICAgICByZXR1cm4gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpba2V5XTsKCSAgICB9OwoJICB9OwoKCSAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uCgkgIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3QKCSAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgKCSAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTQKCSAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7CgkgIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7CgkgIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHsKCSAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pOwoJICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7CgkgIH07CgoJICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9ucwoJICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKCSAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuCgkgIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGwKCSAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS4KCSAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewoJICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7CgkgICAgdmFyIGksIGxlbmd0aDsKCSAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgewoJICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CgkgICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTsKCSAgICAgIH0KCSAgICB9IGVsc2UgewoJICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTsKCSAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopOwoJICAgICAgfQoJICAgIH0KCSAgICByZXR1cm4gb2JqOwoJICB9OwoKCSAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuCgkgIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewoJICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpOwoJICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksCgkgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLAoJICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTsKCSAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CgkgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4OwoJICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7CgkgICAgfQoJICAgIHJldHVybiByZXN1bHRzOwoJICB9OwoKCSAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuCgkgIGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpIHsKCSAgICAvLyBPcHRpbWl6ZWQgaXRlcmF0b3IgZnVuY3Rpb24gYXMgdXNpbmcgYXJndW1lbnRzLmxlbmd0aAoJICAgIC8vIGluIHRoZSBtYWluIGZ1bmN0aW9uIHdpbGwgZGVvcHRpbWl6ZSB0aGUsIHNlZSAjMTk5MS4KCSAgICBmdW5jdGlvbiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKSB7CgkgICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7CgkgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7CgkgICAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7CgkgICAgICB9CgkgICAgICByZXR1cm4gbWVtbzsKCSAgICB9CgoJICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7CgkgICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDQpOwoJICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSwKCSAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCwKCSAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTsKCSAgICAgIC8vIERldGVybWluZSB0aGUgaW5pdGlhbCB2YWx1ZSBpZiBub25lIGlzIHByb3ZpZGVkLgoJICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7CgkgICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdOwoJICAgICAgICBpbmRleCArPSBkaXI7CgkgICAgICB9CgkgICAgICByZXR1cm4gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCk7CgkgICAgfTsKCSAgfQoKCSAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLAoJICAvLyBvciBgZm9sZGxgLgoJICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTsKCgkgIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLgoJICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7CgoJICAvLyBSZXR1cm4gdGhlIGZpcnN0IHZhbHVlIHdoaWNoIHBhc3NlcyBhIHRydXRoIHRlc3QuIEFsaWFzZWQgYXMgYGRldGVjdGAuCgkgIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKCSAgICB2YXIga2V5OwoJICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7CgkgICAgICBrZXkgPSBfLmZpbmRJbmRleChvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7CgkgICAgfSBlbHNlIHsKCSAgICAgIGtleSA9IF8uZmluZEtleShvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7CgkgICAgfQoJICAgIGlmIChrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IC0xKSByZXR1cm4gb2JqW2tleV07CgkgIH07CgoJICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LgoJICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLgoJICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKCSAgICB2YXIgcmVzdWx0cyA9IFtdOwoJICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7CgkgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CgkgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7CgkgICAgfSk7CgkgICAgcmV0dXJuIHJlc3VsdHM7CgkgIH07CgoJICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLgoJICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CgkgICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5uZWdhdGUoY2IocHJlZGljYXRlKSksIGNvbnRleHQpOwoJICB9OwoKCSAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuCgkgIC8vIEFsaWFzZWQgYXMgYGFsbGAuCgkgIF8uZXZlcnkgPSBfLmFsbCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CgkgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTsKCSAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLAoJICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDsKCSAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CgkgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4OwoJICAgICAgaWYgKCFwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gZmFsc2U7CgkgICAgfQoJICAgIHJldHVybiB0cnVlOwoJICB9OwoKCSAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuCgkgIC8vIEFsaWFzZWQgYXMgYGFueWAuCgkgIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKCSAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpOwoJICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksCgkgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoOwoJICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKCSAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7CgkgICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7CgkgICAgfQoJICAgIHJldHVybiBmYWxzZTsKCSAgfTsKCgkgIC8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLgoJICAvLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC4KCSAgXy5jb250YWlucyA9IF8uaW5jbHVkZXMgPSBfLmluY2x1ZGUgPSBmdW5jdGlvbihvYmosIGl0ZW0sIGZyb21JbmRleCwgZ3VhcmQpIHsKCSAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7CgkgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgZ3VhcmQpIGZyb21JbmRleCA9IDA7CgkgICAgcmV0dXJuIF8uaW5kZXhPZihvYmosIGl0ZW0sIGZyb21JbmRleCkgPj0gMDsKCSAgfTsKCgkgIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLgoJICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7CgkgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7CgkgICAgdmFyIGlzRnVuYyA9IF8uaXNGdW5jdGlvbihtZXRob2QpOwoJICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7CgkgICAgICB2YXIgZnVuYyA9IGlzRnVuYyA/IG1ldGhvZCA6IHZhbHVlW21ldGhvZF07CgkgICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gZnVuYyA6IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpOwoJICAgIH0pOwoJICB9OwoKCSAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS4KCSAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7CgkgICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTsKCSAgfTsKCgkgIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbHRlcmA6IHNlbGVjdGluZyBvbmx5IG9iamVjdHMKCSAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy4KCSAgXy53aGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHsKCSAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTsKCSAgfTsKCgkgIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbmRgOiBnZXR0aW5nIHRoZSBmaXJzdCBvYmplY3QKCSAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy4KCSAgXy5maW5kV2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7CgkgICAgcmV0dXJuIF8uZmluZChvYmosIF8ubWF0Y2hlcihhdHRycykpOwoJICB9OwoKCSAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgoJICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksCgkgICAgICAgIHZhbHVlLCBjb21wdXRlZDsKCSAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkgewoJICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7CgkgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CgkgICAgICAgIHZhbHVlID0gb2JqW2ldOwoJICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHsKCSAgICAgICAgICByZXN1bHQgPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0gZWxzZSB7CgkgICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTsKCSAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewoJICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7CgkgICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7CgkgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7CgkgICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCSAgICByZXR1cm4gcmVzdWx0OwoJICB9OwoKCSAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgoJICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LAoJICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7CgkgICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHsKCSAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopOwoJICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICB2YWx1ZSA9IG9ialtpXTsKCSAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7CgkgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9IGVsc2UgewoJICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7CgkgICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHsKCSAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpOwoJICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHsKCSAgICAgICAgICByZXN1bHQgPSB2YWx1ZTsKCSAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDsKCSAgICAgICAgfQoJICAgICAgfSk7CgkgICAgfQoJICAgIHJldHVybiByZXN1bHQ7CgkgIH07CgoJICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbiwgdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZQoJICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuCgkgIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHZhciBzZXQgPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTsKCSAgICB2YXIgbGVuZ3RoID0gc2V0Lmxlbmd0aDsKCSAgICB2YXIgc2h1ZmZsZWQgPSBBcnJheShsZW5ndGgpOwoJICAgIGZvciAodmFyIGluZGV4ID0gMCwgcmFuZDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKCSAgICAgIHJhbmQgPSBfLnJhbmRvbSgwLCBpbmRleCk7CgkgICAgICBpZiAocmFuZCAhPT0gaW5kZXgpIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdOwoJICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBzZXRbaW5kZXhdOwoJICAgIH0KCSAgICByZXR1cm4gc2h1ZmZsZWQ7CgkgIH07CgoJICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi4KCSAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC4KCSAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC4KCSAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7CgkgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgewoJICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopOwoJICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldOwoJICAgIH0KCSAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpOwoJICB9OwoKCSAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLgoJICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTsKCSAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkgewoJICAgICAgcmV0dXJuIHsKCSAgICAgICAgdmFsdWU6IHZhbHVlLAoJICAgICAgICBpbmRleDogaW5kZXgsCgkgICAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpCgkgICAgICB9OwoJICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHsKCSAgICAgIHZhciBhID0gbGVmdC5jcml0ZXJpYTsKCSAgICAgIHZhciBiID0gcmlnaHQuY3JpdGVyaWE7CgkgICAgICBpZiAoYSAhPT0gYikgewoJICAgICAgICBpZiAoYSA+IGIgfHwgYSA9PT0gdm9pZCAwKSByZXR1cm4gMTsKCSAgICAgICAgaWYgKGEgPCBiIHx8IGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xOwoJICAgICAgfQoJICAgICAgcmV0dXJuIGxlZnQuaW5kZXggLSByaWdodC5pbmRleDsKCSAgICB9KSwgJ3ZhbHVlJyk7CgkgIH07CgoJICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgImdyb3VwIGJ5IiBvcGVyYXRpb25zLgoJICB2YXIgZ3JvdXAgPSBmdW5jdGlvbihiZWhhdmlvcikgewoJICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7CgkgICAgICB2YXIgcmVzdWx0ID0ge307CgkgICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTsKCSAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewoJICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopOwoJICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpOwoJICAgICAgfSk7CgkgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgIH07CgoJICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlCgkgIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLgoJICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHsKCSAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07CgkgIH0pOwoKCSAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvcgoJICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuCgkgIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkgewoJICAgIHJlc3VsdFtrZXldID0gdmFsdWU7CgkgIH0pOwoKCSAgLy8gQ291bnRzIGluc3RhbmNlcyBvZiBhbiBvYmplY3QgdGhhdCBncm91cCBieSBhIGNlcnRhaW4gY3JpdGVyaW9uLiBQYXNzCgkgIC8vIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUgdG8gY291bnQgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZQoJICAvLyBjcml0ZXJpb24uCgkgIF8uY291bnRCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkgewoJICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldKys7IGVsc2UgcmVzdWx0W2tleV0gPSAxOwoJICB9KTsKCgkgIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuCgkgIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikgewoJICAgIGlmICghb2JqKSByZXR1cm4gW107CgkgIA==", "base64"));
  res.write(new Buffer("ICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7CgkgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpOwoJICAgIHJldHVybiBfLnZhbHVlcyhvYmopOwoJICB9OwoKCSAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LgoJICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHsKCSAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwOwoJICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDsKCSAgfTsKCgkgIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW4KCSAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLgoJICBfLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CgkgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTsKCSAgICB2YXIgcGFzcyA9IFtdLCBmYWlsID0gW107CgkgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7CgkgICAgICAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iaikgPyBwYXNzIDogZmFpbCkucHVzaCh2YWx1ZSk7CgkgICAgfSk7CgkgICAgcmV0dXJuIFtwYXNzLCBmYWlsXTsKCSAgfTsKCgkgIC8vIEFycmF5IEZ1bmN0aW9ucwoJICAvLyAtLS0tLS0tLS0tLS0tLS0KCgkgIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTgoJICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrCgkgIC8vIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC4KCSAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkgewoJICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwOwoJICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVswXTsKCSAgICByZXR1cm4gXy5pbml0aWFsKGFycmF5LCBhcnJheS5sZW5ndGggLSBuKTsKCSAgfTsKCgkgIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvbgoJICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpbgoJICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLgoJICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKCSAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpOwoJICB9OwoKCSAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTgoJICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LgoJICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKCSAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDsKCSAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07CgkgICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpOwoJICB9OwoKCSAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLgoJICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVybgoJICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuCgkgIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkgewoJICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7CgkgIH07CgoJICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuCgkgIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7CgkgICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBfLmlkZW50aXR5KTsKCSAgfTsKCgkgIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi4KCSAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7CgkgICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwOwoJICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07CgkgICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkgewoJICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0CgkgICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpOwoJICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDsKCSAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47CgkgICAgICAgIHdoaWxlIChqIDwgbGVuKSB7CgkgICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkgewoJICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7CgkgICAgICB9CgkgICAgfQoJICAgIHJldHVybiBvdXRwdXQ7CgkgIH07CgoJICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuCgkgIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7CgkgICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTsKCSAgfTsKCgkgIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLgoJICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkgewoJICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CgkgIH07CgoJICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeQoJICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uCgkgIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuCgkgIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkgewoJICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7CgkgICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7CgkgICAgICBpdGVyYXRlZSA9IGlzU29ydGVkOwoJICAgICAgaXNTb3J0ZWQgPSBmYWxzZTsKCSAgICB9CgkgICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpOwoJICAgIHZhciByZXN1bHQgPSBbXTsKCSAgICB2YXIgc2VlbiA9IFtdOwoJICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLAoJICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7CgkgICAgICBpZiAoaXNTb3J0ZWQpIHsKCSAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7CgkgICAgICAgIHNlZW4gPSBjb21wdXRlZDsKCSAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHsKCSAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkgewoJICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7CgkgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7CgkgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsKCSAgICAgIH0KCSAgICB9CgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfTsKCgkgIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZgoJICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy4KCSAgXy51bmlvbiA9IGZ1bmN0aW9uKCkgewoJICAgIHJldHVybiBfLnVuaXEoZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTsKCSAgfTsKCgkgIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGUKCSAgLy8gcGFzc2VkLWluIGFycmF5cy4KCSAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkgewoJICAgIHZhciByZXN1bHQgPSBbXTsKCSAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CgkgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgdmFyIGl0ZW0gPSBhcnJheVtpXTsKCSAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlOwoJICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgaWYgKCFfLmNvbnRhaW5zKGFyZ3VtZW50c1tqXSwgaXRlbSkpIGJyZWFrOwoJICAgICAgfQoJICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pOwoJICAgIH0KCSAgICByZXR1cm4gcmVzdWx0OwoJICB9OwoKCSAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLgoJICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLgoJICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkgewoJICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpOwoJICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpewoJICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTsKCSAgICB9KTsKCSAgfTsKCgkgIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmUKCSAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuCgkgIF8uemlwID0gZnVuY3Rpb24oKSB7CgkgICAgcmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTsKCSAgfTsKCgkgIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHMKCSAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzCgkgIF8udW56aXAgPSBmdW5jdGlvbihhcnJheSkgewoJICAgIHZhciBsZW5ndGggPSBhcnJheSAmJiBfLm1heChhcnJheSwgZ2V0TGVuZ3RoKS5sZW5ndGggfHwgMDsKCSAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTsKCgkgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykgewoJICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTsKCSAgICB9CgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfTsKCgkgIC8vIENvbnZlcnRzIGxpc3RzIGludG8gb2JqZWN0cy4gUGFzcyBlaXRoZXIgYSBzaW5nbGUgYXJyYXkgb2YgYFtrZXksIHZhbHVlXWAKCSAgLy8gcGFpcnMsIG9yIHR3byBwYXJhbGxlbCBhcnJheXMgb2YgdGhlIHNhbWUgbGVuZ3RoIC0tIG9uZSBvZiBrZXlzLCBhbmQgb25lIG9mCgkgIC8vIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcy4KCSAgXy5vYmplY3QgPSBmdW5jdGlvbihsaXN0LCB2YWx1ZXMpIHsKCSAgICB2YXIgcmVzdWx0ID0ge307CgkgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7CgkgICAgICBpZiAodmFsdWVzKSB7CgkgICAgICAgIHJlc3VsdFtsaXN0W2ldXSA9IHZhbHVlc1tpXTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJlc3VsdFtsaXN0W2ldWzBdXSA9IGxpc3RbaV1bMV07CgkgICAgICB9CgkgICAgfQoJICAgIHJldHVybiByZXN1bHQ7CgkgIH07CgoJICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zCgkgIGZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcikgewoJICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7CgkgICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpOwoJICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7CgkgICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7CgkgICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7CgkgICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7CgkgICAgICB9CgkgICAgICByZXR1cm4gLTE7CgkgICAgfTsKCSAgfQoKCSAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0CgkgIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7CgkgIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTsKCgkgIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2gKCSAgLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLgoJICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTsKCSAgICB2YXIgdmFsdWUgPSBpdGVyYXRlZShvYmopOwoJICAgIHZhciBsb3cgPSAwLCBoaWdoID0gZ2V0TGVuZ3RoKGFycmF5KTsKCSAgICB3aGlsZSAobG93IDwgaGlnaCkgewoJICAgICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMik7CgkgICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbWlkXSkgPCB2YWx1ZSkgbG93ID0gbWlkICsgMTsgZWxzZSBoaWdoID0gbWlkOwoJICAgIH0KCSAgICByZXR1cm4gbG93OwoJICB9OwoKCSAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zCgkgIGZ1bmN0aW9uIGNyZWF0ZUluZGV4RmluZGVyKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHsKCSAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkgewoJICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOwoJICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHsKCSAgICAgICAgaWYgKGRpciA+IDApIHsKCSAgICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBsZW5ndGggPSBpZHggPj0gMCA/IE1hdGgubWluKGlkeCArIDEsIGxlbmd0aCkgOiBpZHggKyBsZW5ndGggKyAxOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHNvcnRlZEluZGV4ICYmIGlkeCAmJiBsZW5ndGgpIHsKCSAgICAgICAgaWR4ID0gc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pOwoJICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xOwoJICAgICAgfQoJICAgICAgaWYgKGl0ZW0gIT09IGl0ZW0pIHsKCSAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTsKCSAgICAgICAgcmV0dXJuIGlkeCA+PSAwID8gaWR4ICsgaSA6IC0xOwoJICAgICAgfQoJICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikgewoJICAgICAgICBpZiAoYXJyYXlbaWR4XSA9PT0gaXRlbSkgcmV0dXJuIGlkeDsKCSAgICAgIH0KCSAgICAgIHJldHVybiAtMTsKCSAgICB9OwoJICB9CgoJICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksCgkgIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuCgkgIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYAoJICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLgoJICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7CgkgIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTsKCgkgIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2YKCSAgLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWUKCSAgLy8gW3RoZSBQeXRob24gZG9jdW1lbnRhdGlvbl0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L2Z1bmN0aW9ucy5odG1sI3JhbmdlKS4KCSAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7CgkgICAgaWYgKHN0b3AgPT0gbnVsbCkgewoJICAgICAgc3RvcCA9IHN0YXJ0IHx8IDA7CgkgICAgICBzdGFydCA9IDA7CgkgICAgfQoJICAgIHN0ZXAgPSBzdGVwIHx8IDE7CgoJICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7CgkgICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTsKCgkgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkgewoJICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0OwoJICAgIH0KCgkgICAgcmV0dXJuIHJhbmdlOwoJICB9OwoKCSAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9ucwoJICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0KCgkgIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvcgoJICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHMKCSAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHsKCSAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwoJICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7CgkgICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7CgkgICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDsKCSAgICByZXR1cm4gc2VsZjsKCSAgfTsKCgkgIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLAoJICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmCgkgIC8vIGF2YWlsYWJsZS4KCSAgXy5iaW5kID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCkgewoJICAgIGlmIChuYXRpdmVCaW5kICYmIGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCkgcmV0dXJuIG5hdGl2ZUJpbmQuYXBwbHkoZnVuYywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKCSAgICBpZiAoIV8uaXNGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7CgkgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7CgkgICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7CgkgICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCBjb250ZXh0LCB0aGlzLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKCSAgICB9OwoJICAgIHJldHVybiBib3VuZDsKCSAgfTsKCgkgIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHMKCSAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0cwoJICAvLyBhcyBhIHBsYWNlaG9sZGVyLCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlIHByZS1maWxsZWQuCgkgIF8ucGFydGlhbCA9IGZ1bmN0aW9uKGZ1bmMpIHsKCSAgICB2YXIgYm91bmRBcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoJICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkgewoJICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDsKCSAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gXyA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTsKCSAgICAgIH0KCSAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGFyZ3VtZW50cy5sZW5ndGgpIGFyZ3MucHVzaChhcmd1bWVudHNbcG9zaXRpb24rK10pOwoJICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7CgkgICAgfTsKCSAgICByZXR1cm4gYm91bmQ7CgkgIH07CgoJICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHMKCSAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzCgkgIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC4KCSAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTsKCSAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpOwoJICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAga2V5ID0gYXJndW1lbnRzW2ldOwoJICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7CgkgICAgfQoJICAgIHJldHVybiBvYmo7CgkgIH07CgoJICAvLyBNZW1vaXplIGFuIGV4cGVuc2l2ZSBmdW5jdGlvbiBieSBzdG9yaW5nIGl0cyByZXN1bHRzLgoJICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHsKCSAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkgewoJICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZS5jYWNoZTsKCSAgICAgIHZhciBhZGRyZXNzID0gJycgKyAoaGFzaGVyID8gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXkpOwoJICAgICAgaWYgKCFfLmhhcyhjYWNoZSwgYWRkcmVzcykpIGNhY2hlW2FkZHJlc3NdID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJICAgICAgcmV0dXJuIGNhY2hlW2FkZHJlc3NdOwoJICAgIH07CgkgICAgbWVtb2l6ZS5jYWNoZSA9IHt9OwoJICAgIHJldHVybiBtZW1vaXplOwoJICB9OwoKCSAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxscwoJICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuCgkgIF8uZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7CgkgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7CgkgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKCSAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpOwoJICAgIH0sIHdhaXQpOwoJICB9OwoKCSAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzCgkgIC8vIGNsZWFyZWQuCgkgIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7CgoJICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2UKCSAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuCgkgIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjsKCSAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3MKCSAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uCgkgIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7CgkgICAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDsKCSAgICB2YXIgdGltZW91dCA9IG51bGw7CgkgICAgdmFyIHByZXZpb3VzID0gMDsKCSAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTsKCSAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHsKCSAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpOwoJICAgICAgdGltZW91dCA9IG51bGw7CgkgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwoJICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24oKSB7CgkgICAgICB2YXIgbm93ID0gXy5ub3coKTsKCSAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7CgkgICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7CgkgICAgICBjb250ZXh0ID0gdGhpczsKCSAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CgkgICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkgewoJICAgICAgICBpZiAodGltZW91dCkgewoJICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKCSAgICAgICAgICB0aW1lb3V0ID0gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICBwcmV2aW91cyA9IG5vdzsKCSAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsKCSAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7CgkgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7CgkgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpOwoJICAgICAgfQoJICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICB9OwoKCSAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdAoJICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yCgkgIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZQoJICAvLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLgoJICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7CgkgICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0OwoKCSAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHsKCSAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDsKCgkgICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7CgkgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aW1lb3V0ID0gbnVsbDsKCSAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHsKCSAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwoJICAgICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfTsKCgkgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgICAgY29udGV4dCA9IHRoaXM7CgkgICAgICBhcmdzID0gYXJndW1lbnRzOwoJICAgICAgdGltZXN0YW1wID0gXy5ub3coKTsKCSAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0OwoJICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7CgkgICAgICBpZiAoY2FsbE5vdykgewoJICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwoJICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICB9OwoKCSAgLy8gUmV0dXJucyB0aGUgZmlyc3QgZnVuY3Rpb24gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBzZWNvbmQsCgkgIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmQKCSAgLy8gY29uZGl0aW9uYWxseSBleGVjdXRlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi4KCSAgXy53cmFwID0gZnVuY3Rpb24oZnVuYywgd3JhcHBlcikgewoJICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7CgkgIH07CgoJICAvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLgoJICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkgewoJICAgIHJldHVybiBmdW5jdGlvbigpIHsKCSAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkgICAgfTsKCSAgfTsKCgkgIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoCgkgIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuCgkgIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkgewoJICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwoJICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTsKCSAgICByZXR1cm4gZnVuY3Rpb24oKSB7CgkgICAgICB2YXIgaSA9IHN0YXJ0OwoJICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkgICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTsKCSAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgfTsKCgkgIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCBvbiBhbmQgYWZ0ZXIgdGhlIE50aCBjYWxsLgoJICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHsKCSAgICByZXR1cm4gZnVuY3Rpb24oKSB7CgkgICAgICBpZiAoLS10aW1lcyA8IDEpIHsKCSAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCSAgICAgIH0KCSAgICB9OwoJICB9OwoKCSAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIHVwIHRvIChidXQgbm90IGluY2x1ZGluZykgdGhlIE50aCBjYWxsLgoJICBfLmJlZm9yZSA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7CgkgICAgdmFyIG1lbW87CgkgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgICAgaWYgKC0tdGltZXMgPiAwKSB7CgkgICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkgICAgICB9CgkgICAgICBpZiAodGltZXMgPD0gMSkgZnVuYyA9IG51bGw7CgkgICAgICByZXR1cm4gbWVtbzsKCSAgICB9OwoJICB9OwoKCSAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93CgkgIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uCgkgIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7CgoJICAvLyBPYmplY3QgRnVuY3Rpb25zCgkgIC8vIC0tLS0tLS0tLS0tLS0tLS0KCgkgIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuCgkgIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7CgkgIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbJ3ZhbHVlT2YnLCAnaXNQcm90b3R5cGVPZicsICd0b1N0cmluZycsCgkgICAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107CgoJICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykgewoJICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDsKCSAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7CgkgICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bzsKCgkgICAgLy8gQ29uc3RydWN0b3IgaXMgYSBzcGVjaWFsIGNhc2UuCgkgICAgdmFyIHByb3AgPSAnY29uc3RydWN0b3InOwoJICAgIGlmIChfLmhhcyhvYmosIHByb3ApICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSBrZXlzLnB1c2gocHJvcCk7CgoJICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHsKCSAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07CgkgICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkgewoJICAgICAgICBrZXlzLnB1c2gocHJvcCk7CgkgICAgICB9CgkgICAgfQoJICB9CgoJICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuCgkgIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2AKCSAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTsKCSAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTsKCSAgICB2YXIga2V5cyA9IFtdOwoJICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpOwoJICAgIC8vIEFoZW0sIElFIDwgOS4KCSAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpOwoJICAgIHJldHVybiBrZXlzOwoJICB9OwoKCSAgLy8gUmV0cmlldmUgYWxsIHRoZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuCgkgIF8uYWxsS2V5cyA9IGZ1bmN0aW9uKG9iaikgewoJICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107CgkgICAgdmFyIGtleXMgPSBbXTsKCSAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTsKCSAgICAvLyBBaGVtLCBJRSA8IDkuCgkgICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTsKCSAgICByZXR1cm4ga2V5czsKCSAgfTsKCgkgIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy4KCSAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHsKCSAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopOwoJICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDsKCSAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CgkgICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07CgkgICAgfQoJICAgIHJldHVybiB2YWx1ZXM7CgkgIH07CgoJICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdAoJICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdAoJICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTsKCSAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSwKCSAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCwKCSAgICAgICAgICByZXN1bHRzID0ge30sCgkgICAgICAgICAgY3VycmVudEtleTsKCSAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKCSAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdOwoJICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopOwoJICAgICAgfQoJICAgICAgcmV0dXJuIHJlc3VsdHM7CgkgIH07CgoJICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy4KCSAgXy5wYWlycyA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7CgkgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoOwoJICAgIHZhciBwYWlycyA9IEFycmF5KGxlbmd0aCk7CgkgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgcGFpcnNbaV0gPSBba2V5c1tpXSwgb2JqW2tleXNbaV1dXTsKCSAgICB9CgkgICAgcmV0dXJuIHBhaXJzOwoJICB9OwoKCSAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLgoJICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHZhciByZXN1bHQgPSB7fTsKCSAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopOwoJICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CgkgICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07CgkgICAgfQoJICAgIHJldHVybiByZXN1bHQ7CgkgIH07CgoJICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuCgkgIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgCgkgIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgdmFyIG5hbWVzID0gW107CgkgICAgZm9yICh2YXIga2V5IGluIG9iaikgewoJICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTsKCSAgICB9CgkgICAgcmV0dXJuIG5hbWVzLnNvcnQoKTsKCSAgfTsKCgkgIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLgoJICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7CgoJICAvLyBBc3NpZ25zIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBvd24gcHJvcGVydGllcyBpbiB0aGUgcGFzc2VkLWluIG9iamVjdChzKQoJICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbikKCSAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7CgoJICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QKCSAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKCSAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpOwoJICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTsKCSAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAga2V5ID0ga2V5c1tpXTsKCSAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTsKCSAgICB9CgkgIH07CgoJICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLgoJICBfLnBpY2sgPSBmdW5jdGlvbihvYmplY3QsIG9pdGVyYXRlZSwgY29udGV4dCkgewoJICAgIHZhciByZXN1bHQgPSB7fSwgb2JqID0gb2JqZWN0LCBpdGVyYXRlZSwga2V5czsKCSAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7CgkgICAgaWYgKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKSB7CgkgICAgICBrZXlzID0gXy5hbGxLZXlzKG9iaik7CgkgICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2Iob2l0ZXJhdGVlLCBjb250ZXh0KTsKCSAgICB9IGVsc2UgewoJICAgICAga2V5cyA9IGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpOwoJICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHsgcmV0dXJuIGtleSBpbiBvYmo7IH07CgkgICAgICBvYmogPSBPYmplY3Qob2JqKTsKCSAgICB9CgkgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwoJICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07CgkgICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTsKCSAgICB9CgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfTsKCgkgICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy4KCSAgXy5vbWl0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewoJICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7CgkgICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTsKCSAgICB9IGVsc2UgewoJICAgICAgdmFyIGtleXMgPSBfLm1hcChmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKSwgU3RyaW5nKTsKCSAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkgewoJICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTsKCSAgICAgIH07CgkgICAgfQoJICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7CgkgIH07CgoJICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLgoJICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTsKCgkgIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC4KCSAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUKCSAgLy8gY3JlYXRlZCBvYmplY3QuCgkgIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykgewoJICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7CgkgICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTsKCSAgICByZXR1cm4gcmVzdWx0OwoJICB9OwoKCSAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LgoJICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7CgkgICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTsKCSAgfTsKCgkgIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai4KCSAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byAidGFwIGludG8iIGEgbWV0aG9kIGNoYWluLCBpbgoJICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi4KCSAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7CgkgICAgaW50ZXJjZXB0b3Iob2JqKTsKCSAgICByZXR1cm4gb2JqOwoJICB9OwoKCSAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuCgkgIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHsKCSAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoOwoJICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7CgkgICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpOwoJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKCSAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwoJICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTsKCSAgICB9CgkgICAgcmV0dXJuIHRydWU7CgkgIH07CgoKCSAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC4KCSAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHsKCSAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuCgkgICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuCgkgICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjsKCSAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuCgkgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiOwoJICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLgoJICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7CgkgICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDsKCSAgICAvLyBDb21wYXJlIGBbW0NsYXNzXV1gIG5hbWVzLgoJICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpOwoJICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTsKCSAgICBzd2l0Y2ggKGNsYXNzTmFtZSkgewoJICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuCgkgICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOgoJICAgICAgLy8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJykKCSAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6CgkgICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgIjUiYCBpcwoJICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKCI1IilgLgoJICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7CgkgICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOgoJICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLgoJICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTgoJICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiOwoJICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLgoJICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiOwoJICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6CgkgICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzoKCSAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpcgoJICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zCgkgICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC4KCSAgICAgICAgcmV0dXJuICthID09PSArYjsKCSAgICB9CgoJICAgIHZhciBhcmVBcnJheXMgPSBjbGFzc05hbWUgPT09ICdbb2JqZWN0IEFycmF5XSc7CgkgICAgaWYgKCFhcmVBcnJheXMpIHsKCSAgICAgIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlOwoKCSAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudCwgYnV0IGBPYmplY3RgcyBvciBgQXJyYXlgcwoJICAgICAgLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS4KCSAgICAgIHZhciBhQ3RvciA9IGEuY29uc3RydWN0b3IsIGJDdG9yID0gYi5jb25zdHJ1Y3RvcjsKCSAgICAgIGlmIChhQ3RvciAhPT0gYkN0b3IgJiYgIShfLmlzRnVuY3Rpb24oYUN0b3IpICYmIGFDdG9yIGluc3RhbmNlb2YgYUN0b3IgJiYKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oYkN0b3IpICYmIGJDdG9yIGluc3RhbmNlb2YgYkN0b3IpCgkgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKSkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICB9CgkgICAgfQoJICAgIC8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWMKCSAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC4KCgkgICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLgoJICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi4KCSAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107CgkgICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdOwoJICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoOwoJICAgIHdoaWxlIChsZW5ndGgtLSkgewoJICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mCgkgICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuCgkgICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjsKCSAgICB9CgoJICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy4KCSAgICBhU3RhY2sucHVzaChhKTsKCSAgICBiU3RhY2sucHVzaChiKTsKCgkgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuCgkgICAgaWYgKGFyZUFycmF5cykgewoJICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuCgkgICAgICBsZW5ndGggPSBhLmxlbmd0aDsKCSAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7CgkgICAgICAvLyBEZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzLgoJICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7CgkgICAgICAgIGlmICghZXEoYVtsZW5ndGhdLCBiW2xlbmd0aF0sIGFTdGFjaywgYlN0YWNrKSkgcmV0dXJuIGZhbHNlOwoJICAgICAgfQoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBEZWVwIGNvbXBhcmUgb2JqZWN0cy4KCSAgICAgIHZhciBrZXlzID0gXy5rZXlzKGEpLCBrZXk7CgkgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDsKCSAgICAgIC8vIEVuc3VyZSB0aGF0IGJvdGggb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzIGJlZm9yZSBjb21wYXJpbmcgZGVlcCBlcXVhbGl0eS4KCSAgICAgIGlmIChfLmtleXMoYikubGVuZ3RoICE9PSBsZW5ndGgpIHJldHVybiBmYWxzZTsKCSAgICAgIHdoaWxlIChsZW5ndGgtLSkgewoJICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXIKCSAgICAgICAga2V5ID0ga2V5c1tsZW5ndGhdOwoJICAgICAgICBpZiAoIShfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7CgkgICAgICB9CgkgICAgfQoJICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLgoJICAgIGFTdGFjay5wb3AoKTsKCSAgICBiU3RhY2sucG9wKCk7CgkgICAgcmV0dXJuIHRydWU7CgkgIH07CgoJICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC4KCSAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikgewoJICAgIHJldHVybiBlcShhLCBiKTsKCSAgfTsKCgkgIC8vIElzIGEgZ2l2ZW4gYXJyYXksIHN0cmluZywgb3Igb2JqZWN0IGVtcHR5PwoJICAvLyBBbiAiZW1wdHkiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy4KCSAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTsKCSAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwOwoJICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7CgkgIH07CgoJICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/CgkgIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpOwoJICB9OwoKCSAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT8KCSAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXkKCSAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHsKCSAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nOwoJICB9OwoKCSAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/CgkgIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHsKCSAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7CgkgICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7CgkgIH07CgoJICAvLyBBZGQgc29tZSBpc1R5cGUgbWV0aG9kczogaXNBcmd1bWVudHMsIGlzRnVuY3Rpb24sIGlzU3RyaW5nLCBpc051bWJlciwgaXNEYXRlLCBpc1JlZ0V4cCwgaXNFcnJvci4KCSAgXy5lYWNoKFsnQXJndW1lbnRzJywgJ0Z1bmN0aW9uJywgJ1N0cmluZycsICdOdW1iZXInLCAnRGF0ZScsICdSZWdFeHAnLCAnRXJyb3InXSwgZnVuY3Rpb24obmFtZSkgewoJICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJzsKCSAgICB9OwoJICB9KTsKCgkgIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmUKCSAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlICJBcmd1bWVudHMiIHR5cGUuCgkgIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7CgkgICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikgewoJICAgICAgcmV0dXJuIF8uaGFzKG9iaiwgJ2NhbGxlZScpOwoJICAgIH07CgkgIH0KCgkgIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsCgkgIC8vIElFIDExICgjMTYyMSksIGFuZCBpbiBTYWZhcmkgOCAoIzE5MjkpLgoJICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcpIHsKCSAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHsKCSAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicgfHwgZmFsc2U7CgkgICAgfTsKCSAgfQoKCSAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyPwoJICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7CgkgICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7CgkgIH07CgoJICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/IChOYU4gaXMgdGhlIG9ubHkgbnVtYmVyIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZikuCgkgIF8uaXNOYU4gPSBmdW5jdGlvbihvYmopIHsKCSAgICByZXR1cm4gXy5pc051bWJlcihvYmopICYmIG9iaiAhPT0gK29iajsKCSAgfTsKCgkgIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuPwoJICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJzsKCSAgfTsKCgkgIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD8KCSAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHsKCSAgICByZXR1cm4gb2JqID09PSBudWxsOwoJICB9OwoKCSAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/CgkgIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHsKCSAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7CgkgIH07CgoJICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5CgkgIC8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuCgkgIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBrZXkpIHsKCSAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7CgkgIH07CgoJICAvLyBVdGlsaXR5IEZ1bmN0aW9ucwoJICAvLyAtLS0tLS0tLS0tLS0tLS0tLQoKCSAgLy8gUnVuIFVuZGVyc2NvcmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0cwoJICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuCgkgIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkgewoJICAgIHJvb3QuXyA9IHByZXZpb3VzVW5kZXJzY29yZTsKCSAgICByZXR1cm4gdGhpczsKCSAgfTsKCgkgIC8vIEtlZXAgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIGFyb3VuZCBmb3IgZGVmYXVsdCBpdGVyYXRlZXMuCgkgIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkgewoJICAgIHJldHVybiB2YWx1ZTsKCSAgfTsKCgkgIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS4KCSAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7CgkgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgICAgcmV0dXJuIHZhbHVlOwoJICAgIH07CgkgIH07CgoJICBfLm5vb3AgPSBmdW5jdGlvbigpe307CgoJICBfLnByb3BlcnR5ID0gcHJvcGVydHk7CgoJICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuCgkgIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkgewoJICAgICAgcmV0dXJuIG9ialtrZXldOwoJICAgIH07CgkgIH07CgoJICAvLyBSZXR1cm5zIGEgcHJlZGljYXRlIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YKCSAgLy8gYGtleTp2YWx1ZWAgcGFpcnMuCgkgIF8ubWF0Y2hlciA9IF8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGF0dHJzKSB7CgkgICAgYXR0cnMgPSBfLmV4dGVuZE93bih7fSwgYXR0cnMpOwoJICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsKCSAgICAgIHJldHVybiBfLmlzTWF0Y2gob2JqLCBhdHRycyk7CgkgICAgfTsKCSAgfTsKCgkgIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLgoJICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKCSAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7CgkgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTsKCSAgICByZXR1cm4gYWNjdW07CgkgIH07CgoJICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLgoJICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7CgkgICAgaWYgKG1heCA9PSBudWxsKSB7CgkgICAgICBtYXggPSBtaW47CgkgICAgICBtaW4gPSAwOwoJICAgIH0KCSAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTsKCSAgfTsKCgkgIC8vIEEgKHBvc3NpYmx5IGZhc3Rlcikgd2F5IHRvIGdldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYXMgYW4gaW50ZWdlci4KCSAgXy5ub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbigpIHsKCSAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgkgIH07CgoJICAgLy8gTGlzdCBvZiBIVE1MIGVudGl0aWVzIGZvciBlc2NhcGluZy4KCSAgdmFyIGVzY2FwZU1hcCA9IHsKCSAgICAnJic6ICcmYW1wOycsCgkgICAgJzwnOiAnJmx0OycsCgkgICAgJz4nOiAnJmd0OycsCgkgICAgJyInOiAnJnF1b3Q7JywKCSAgICAiJyI6ICcmI3gyNzsnLAoJICAgICdgJzogJyYjeDYwOycKCSAgfTsKCSAgdmFyIHVuZXNjYXBlTWFwID0gXy5pbnZlcnQoZXNjYXBlTWFwKTsKCgkgIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi4KCSAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHsKCSAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7CgkgICAgICByZXR1cm4gbWFwW21hdGNoXTsKCSAgICB9OwoJICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZAoJICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJzsKCSAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpOwoJICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTsKCSAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7CgkgICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7CgkgICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZzsKCSAgICB9OwoJICB9OwoJICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTsKCSAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApOwoKCSAgLy8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBgcHJvcGVydHlgIGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQgd2l0aCB0aGUKCSAgLy8gYG9iamVjdGAgYXMgY29udGV4dDsgb3RoZXJ3aXNlLCByZXR1cm4gaXQuCgkgIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgZmFsbGJhY2spIHsKCSAgICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHZvaWQgMCA6IG9iamVjdFtwcm9wZXJ0eV07CgkgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsKCSAgICAgIHZhbHVlID0gZmFsbGJhY2s7CgkgICAgfQoJICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7CgkgIH07CgoJICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLgoJICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLgoJICB2YXIgaWRDb3VudGVyID0gMDsKCSAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkgewoJICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7CgkgICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7CgkgIH07CgoJICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGUKCSAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLgoJICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7CgkgICAgZXZhbHVhdGUgICAgOiAvPCUoW1xzXFNdKz8pJT4vZywKCSAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xzXFNdKz8pJT4vZywKCSAgICBlc2NhcGUgICAgICA6IC88JS0oW1xzXFNdKz8pJT4vZwoJICB9OwoKCSAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhbgoJICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzCgkgIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLgoJICB2YXIgbm9NYXRjaCA9IC8oLileLzsKCgkgIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhCgkgIC8vIHN0cmluZyBsaXRlcmFsLgoJICB2YXIgZXNjYXBlcyA9IHsKCSAgICAiJyI6ICAgICAgIiciLAoJICAgICdcXCc6ICAgICAnXFwnLAoJICAgICdccic6ICAgICAncicsCgkgICAgJ1xuJzogICAgICduJywKCSAgICAnXHUyMDI4JzogJ3UyMDI4JywKCSAgICAnXHUyMDI5JzogJ3UyMDI5JwoJICB9OwoKCSAgdmFyIGVzY2FwZXIgPSAvXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2c7CgoJICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uKG1hdGNoKSB7CgkgICAgcmV0dXJuICdcXCcgKyBlc2NhcGVzW21hdGNoXTsKCSAgfTsKCgkgIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uCgkgIC8vIFVuZGVyc2NvcmUgdGVtcGxhdGluZyBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXMgd2hpdGVzcGFjZSwKCSAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuCgkgIC8vIE5COiBgb2xkU2V0dGluZ3NgIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KCSAgXy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHRleHQsIHNldHRpbmdzLCBvbGRTZXR0aW5ncykgewoJICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7CgkgICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHt9LCBzZXR0aW5ncywgXy50ZW1wbGF0ZVNldHRpbmdzKTsKCgkgICAgLy8gQ29tYmluZSBkZWxpbWl0ZXJzIGludG8gb25lIHJlZ3VsYXIgZXhwcmVzc2lvbiB2aWEgYWx0ZXJuYXRpb24uCgkgICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoWwoJICAgICAgKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoKS5zb3VyY2UsCgkgICAgICAoc2V0dGluZ3MuaW50ZXJwb2xhdGUgfHwgbm9NYXRjaCkuc291cmNlLAoJICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZQoJICAgIF0uam9pbignfCcpICsgJ3wkJywgJ2cnKTsKCgkgICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS4KCSAgICB2YXIgaW5kZXggPSAwOwoJICAgIHZhciBzb3VyY2UgPSAiX19wKz0nIjsKCSAgICB0ZXh0LnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZSwgaW50ZXJwb2xhdGUsIGV2YWx1YXRlLCBvZmZzZXQpIHsKCSAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlciwgZXNjYXBlQ2hhcik7CgkgICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDsKCgkgICAgICBpZiAoZXNjYXBlKSB7CgkgICAgICAgIHNvdXJjZSArPSAiJytcbigoX190PSgiICsgZXNjYXBlICsgIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyI7CgkgICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7CgkgICAgICAgIHNvdXJjZSArPSAiJytcbigoX190PSgiICsgaW50ZXJwb2xhdGUgKyAiKSk9PW51bGw/Jyc6X190KStcbiciOwoJICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkgewoJICAgICAgICBzb3VyY2UgKz0gIic7XG4iICsgZXZhbHVhdGUgKyAiXG5fX3ArPSciOwoJICAgICAgfQoKCSAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZmVzdC4KCSAgICAgIHJldHVybiBtYXRjaDsKCSAgICB9KTsKCSAgICBzb3VyY2UgKz0gIic7XG4iOwoKCSAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLgoJICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xuJyArIHNvdXJjZSArICd9XG4nOwoKCSAgICBzb3VyY2UgPSAidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIgKwoJICAgICAgInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iICsKCSAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xuJzsKCgkgICAgdHJ5IHsKCSAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTsKCSAgICB9IGNhdGNoIChlKSB7CgkgICAgICBlLnNvdXJjZSA9IHNvdXJjZTsKCSAgICAgIHRocm93IGU7CgkgICAgfQoKCSAgICB2YXIgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7CgkgICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7CgkgICAgfTsKCgkgICAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgc291cmNlIGFzIGEgY29udmVuaWVuY2UgZm9yIHByZWNvbXBpbGF0aW9uLgoJICAgIHZhciBhcmd1bWVudCA9IHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonOwoJICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcbicgKyBzb3VyY2UgKyAnfSc7CgoJICAgIHJldHVybiB0ZW1wbGF0ZTsKCSAgfTsKCgkgIC8vIEFkZCBhICJjaGFpbiIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC4KCSAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikgewoJICAgIHZhciBpbnN0YW5jZSA9IF8ob2JqKTsKCSAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlOwoJICAgIHJldHVybiBpbnN0YW5jZTsKCSAgfTsKCgkgIC8vIE9PUAoJICAvLyAtLS0tLS0tLS0tLS0tLS0KCSAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXQKCSAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGUKCSAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC4KCgkgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy4KCSAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHsKCSAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7CgkgIH07CgoJICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuCgkgIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHsKCSAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkgewoJICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdOwoJICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHsKCSAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07CgkgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTsKCSAgICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBmdW5jLmFwcGx5KF8sIGFyZ3MpKTsKCSAgICAgIH07CgkgICAgfSk7CgkgIH07CgoJICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuCgkgIF8ubWl4aW4oXyk7CgoJICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLgoJICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkgewoJICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdOwoJICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CgkgICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDsKCSAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7CgkgICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07CgkgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7CgkgICAgfTsKCSAgfSk7CgoJICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KCSAgXy5lYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkgewoJICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdOwoJICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CgkgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTsKCSAgICB9OwoJICB9KTsKCgkgIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LgoJICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkgewoJICAgIHJldHVybiB0aGlzLl93cmFwcGVkOwoJICB9OwoKCSAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9ucwoJICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLgoJICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7CgoJICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewoJICAgIHJldHVybiAnJyArIHRoaXMuX3dyYXBwZWQ7CgkgIH07CgoJICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzCgkgIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbAoJICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzCgkgIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzCgkgIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZgoJICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuCgkgIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LgoJICBpZiAodHJ1ZSkgewoJICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgewoJICAgICAgcmV0dXJuIF87CgkgICAgfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwoJICB9Cgl9LmNhbGwodGhpcykpOwoKCi8qKiovIH0pLAovKiA4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiEKCSAqIEphdmFTY3JpcHQgQ29va2llIHYyLjEuMAoJICogaHR0cHM6Ly9naXRodWIuY29tL2pzLWNvb2tpZS9qcy1jb29raWUKCSAqCgkgKiBDb3B5cmlnaHQgMjAwNiwgMjAxNSBLbGF1cyBIYXJ0bCAmIEZhZ25lciBCcmFjawoJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCgkgKi8KCShmdW5jdGlvbiAoZmFjdG9yeSkgewoJCWlmICh0cnVlKSB7CgkJCSEoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSkpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwoJCX0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CgkJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJCX0gZWxzZSB7CgkJCXZhciBfT2xkQ29va2llcyA9IHdpbmRvdy5Db29raWVzOwoJCQl2YXIgYXBpID0gd2luZG93LkNvb2tpZXMgPSBmYWN0b3J5KCk7CgkJCWFwaS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewoJCQkJd2luZG93LkNvb2tpZXMgPSBfT2xkQ29va2llczsKCQkJCXJldHVybiBhcGk7CgkJCX07CgkJfQoJfShmdW5jdGlvbiAoKSB7CgkJZnVuY3Rpb24gZXh0ZW5kICgpIHsKCQkJdmFyIGkgPSAwOwoJCQl2YXIgcmVzdWx0ID0ge307CgkJCWZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50c1sgaSBdOwoJCQkJZm9yICh2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHsKCQkJCQlyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gcmVzdWx0OwoJCX0KCgkJZnVuY3Rpb24gaW5pdCAoY29udmVydGVyKSB7CgkJCWZ1bmN0aW9uIGFwaSAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykgewoJCQkJdmFyIHJlc3VsdDsKCgkJCQkvLyBXcml0ZQoKCQkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewoJCQkJCWF0dHJpYnV0ZXMgPSBleHRlbmQoewoJCQkJCQlwYXRoOiAnLycKCQkJCQl9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpOwoKCQkJCQlpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHsKCQkJCQkJdmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpOwoJCQkJCQlleHBpcmVzLnNldE1pbGxpc2Vjb25kcyhleHBpcmVzLmdldE1pbGxpc2Vjb25kcygpICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTsKCQkJCQkJYXR0cmlidXRlcy5leHBpcmVzID0gZXhwaXJlczsKCQkJCQl9CgoJCQkJCXRyeSB7CgkJCQkJCXJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTsKCQkJCQkJaWYgKC9eW1x7XFtdLy50ZXN0KHJlc3VsdCkpIHsKCQkJCQkJCXZhbHVlID0gcmVzdWx0OwoJCQkJCQl9CgkJCQkJfSBjYXRjaCAoZSkge30KCgkJCQkJaWYgKCFjb252ZXJ0ZXIud3JpdGUpIHsKCQkJCQkJdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSkKCQkJCQkJCS5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhbHVlID0gY29udmVydGVyLndyaXRlKHZhbHVlLCBrZXkpOwoJCQkJCX0KCgkJCQkJa2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhrZXkpKTsKCQkJCQlrZXkgPSBrZXkucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTsKCQkJCQlrZXkgPSBrZXkucmVwbGFjZSgvW1woXCldL2csIGVzY2FwZSk7CgoJCQkJCXJldHVybiAoZG9jdW1lbnQuY29va2llID0gWwoJCQkJCQlrZXksICc9JywgdmFsdWUsCgkJCQkJCWF0dHJpYnV0ZXMuZXhwaXJlcyAmJiAnOyBleHBpcmVzPScgKyBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKSwgLy8gdXNlIGV4cGlyZXMgYXR0cmlidXRlLCBtYXgtYWdlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSUUKCQkJCQkJYXR0cmlidXRlcy5wYXRoICAgICYmICc7IHBhdGg9JyArIGF0dHJpYnV0ZXMucGF0aCwKCQkJCQkJYXR0cmlidXRlcy5kb21haW4gICYmICc7IGRvbWFpbj0nICsgYXR0cmlidXRlcy5kb21haW4sCgkJCQkJCWF0dHJpYnV0ZXMuc2VjdXJlID8gJzsgc2VjdXJlJyA6ICcnCgkJCQkJXS5qb2luKCcnKSk7CgkJCQl9CgoJCQkJLy8gUmVhZAoKCQkJCWlmICgha2V5KSB7CgkJCQkJcmVzdWx0ID0ge307CgkJCQl9CgoJCQkJLy8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheQoJCQkJLy8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuIEFsc28gcHJldmVudHMgb2RkIHJlc3VsdCB3aGVuCgkJCQkvLyBjYWxsaW5nICJnZXQoKSIKCQkJCXZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107CgkJCQl2YXIgcmRlY29kZSA9IC8oJVswLTlBLVpdezJ9KSsvZzsKCQkJCXZhciBpID0gMDsKCgkJCQlmb3IgKDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHsKCQkJCQl2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KCc9Jyk7CgkJCQkJdmFyIG5hbWUgPSBwYXJ0c1swXS5yZXBsYWNlKHJkZWNvZGUsIGRlY29kZVVSSUNvbXBvbmVudCk7CgkJCQkJdmFyIGNvb2tpZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTsKCgkJCQkJaWYgKGNvb2tpZS5jaGFyQXQoMCkgPT09ICciJykgewoJCQkJCQljb29raWUgPSBjb29raWUuc2xpY2UoMSwgLTEpOwoJCQkJCX0KCgkJCQkJdHJ5IHsKCQkJCQkJY29va2llID0gY29udmVydGVyLnJlYWQgPwoJCQkJCQkJY29udmVydGVyLnJlYWQoY29va2llLCBuYW1lKSA6IGNvbnZlcnRlcihjb29raWUsIG5hbWUpIHx8CgkJCQkJCQljb29raWUucmVwbGFjZShyZGVjb2RlLCBkZWNvZGVVUklDb21wb25lbnQpOwoKCQkJCQkJaWYgKHRoaXMuanNvbikgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQljb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7CgkJCQkJCQl9IGNhdGNoIChlKSB7fQoJCQkJCQl9CgoJCQkJCQlpZiAoa2V5ID09PSBuYW1lKSB7CgkJCQkJCQlyZXN1bHQgPSBjb29raWU7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoKCQkJCQkJaWYgKCFrZXkpIHsKCQkJCQkJCXJlc3VsdFtuYW1lXSA9IGNvb2tpZTsKCQkJCQkJfQoJCQkJCX0gY2F0Y2ggKGUpIHt9CgkJCQl9CgoJCQkJcmV0dXJuIHJlc3VsdDsKCQkJfQoKCQkJYXBpLmdldCA9IGFwaS5zZXQgPSBhcGk7CgkJCWFwaS5nZXRKU09OID0gZnVuY3Rpb24gKCkgewoJCQkJcmV0dXJuIGFwaS5hcHBseSh7CgkJCQkJanNvbjogdHJ1ZQoJCQkJfSwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKCQkJfTsKCQkJYXBpLmRlZmF1bHRzID0ge307CgoJCQlhcGkucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykgewoJCQkJYXBpKGtleSwgJycsIGV4dGVuZChhdHRyaWJ1dGVzLCB7CgkJCQkJZXhwaXJlczogLTEKCQkJCX0pKTsKCQkJfTsKCgkJCWFwaS53aXRoQ29udmVydGVyID0gaW5pdDsKCgkJCXJldHVybiBhcGk7CgkJfQoKCQlyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7Cgl9KSk7CgoKLyoqKi8gfSksCi8qIDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSEobW9kdWxlLmV4cG9ydHMgPSB7CgkgICJjYWNoZWJ1c3QtbWFwIjogImNhY2hlYnVzdC1tYXAuZmVlMWM0MGNmYWU5ZjE3NWZkMzZiYzc0NzE3YmUxMWYiLAoJICAiY291bnRyeSI6ICJjb3VudHJ5LmQ1NTNlNGRhZWQ5ZDBjNGMzNzhhMzBkNzdkOWY3ZTNjIiwKCSAgImNvdW50cnlfY3MiOiAiY291bnRyeV9jcy44NmE2ZTc5NDgxNDk3ODU1MGZlM2QwMGIyZTAyYTFjYiIsCgkgICJjb3VudHJ5X2RhIjogImNvdW50cnlfZGEuMTM5OGU5YTlhMzZhODg4MWM5MmY0NGJiZDI3NDYyNWYiLAoJICAiY291bnRyeV9kZSI6ICJjb3VudHJ5X2RlLjM2MjNlYTg2MGJiOTgyZjM1YmU4OGQ3MzNmODUwMzRhIiwKCSAgImNvdW50cnlfZXMiOiAiY291bnRyeV9lcy4zMjA3MTY5YjBjNTMwN2M0MTRmZjlhMGUwNzYxM2QzMiIsCgkgICJjb3VudHJ5X2ZpIjogImNvdW50cnlfZmkuMzhiM2JjZjA1YTQyYTZjNDQwODVhYTU1YzczNTcyOTkiLAoJICAiY291bnRyeV9mciI6ICJjb3VudHJ5X2ZyLjk2MDZlODI2MGViMDk0NDc1ZjVkM2VjY2E4ZGVmMTRiIiwKCSAgImNvdW50cnlfaHUiOiAiY291bnRyeV9odS43NWY0MjE0ZGY1MTQxY2VkMzAwZDY0ZmVlMGM5MTExZSIsCgkgICJjb3VudHJ5X2lkIjogImNvdW50cnlfaWQuMDE5MzkxMzIxMmYxZmI3MGI5ZDIzNGEyOTc5NDIzOGMiLAoJICAiY291bnRyeV9pbiI6ICJjb3VudHJ5X2luLjAxOTM5MTMyMTJmMWZiNzBiOWQyMzRhMjk3OTQyMzhjIiwKCSAgImNvdW50cnlfaXQiOiAiY291bnRyeV9pdC4yN2E3NTdmMTNmZTBmY2RiODRiZmJiYmNiNGE0YzQ2NSIsCgkgICJjb3VudHJ5X2phIjogImNvdW50cnlfamEuZWE5ZTExNGRjYzcwYjIyOGNiZGFlZjVmNGU2YzA4NWQiLAoJICAiY291bnRyeV9rbyI6ICJjb3VudHJ5X2tvLmVjOGYzOTAyMGFjOTQ3N2UyZjgwMGI4NjU3ZmY2OGU2IiwKCSAgImNvdW50cnlfbXMiOiAiY291bnRyeV9tcy40ZDQ5MmEzOWRkYmU2MTBhODIyMmRmMzJjMzQxZDUxNCIsCgkgICJjb3VudHJ5X25sX05MIjogImNvdW50cnlfbmxfTkwuM2VmMTViOWFiYzFkMzcwZjc3NThiZGZkMGQ2YTczNmEiLAoJICAiY291bnRyeV9wbCI6ICJjb3VudHJ5X3BsLjM4ZjA3MWNhOTcyNDY4OTAzNGZhMDE0YjE1M2I2Mzg3IiwKCSAgImNvdW50cnlfcHRfQlIiOiAiY291bnRyeV9wdF9CUi40NmQxYzVhMmZkMGNhODg0ZWE1OTkzNjk1YmQ1MmQ3MiIsCgkgICJjb3VudHJ5X3JvIjogImNvdW50cnlfcm8uYTMzZDdhNDc2MDUwNmE1ZDAyZmYwODQ4MTliYjYxMTAiLAoJICAiY291bnRyeV9ydSI6ICJjb3VudHJ5X3J1LmNhYjcwYjEzYTg3ZjlkMjc0YmJlZThjNWFkNzk0MTFjIiwKCSAgImNvdW50cnlfc3YiOiAiY291bnRyeV9zdi5iMjg2OWE5OTJjZjQ2NjBkMDAwMGYzMTgwZjFiN2UyMSIsCgkgICJjb3VudHJ5X3RoIjogImNvdW50cnlfdGguYzY3YWVlZTk4ZGEwNTE5YjRlMDUxZWEwMzA5MDMzMjIiLAoJICAiY291bnRyeV90ciI6ICJjb3VudHJ5X3RyLmVjYTM5Nzc4MjYyODVjYmJlM2U0MjMxMmQwMGFjZThkIiwKCSAgImNvdW50cnlfdWsiOiAiY291bnRyeV91ay44OWVlYTU2ZDE5N2VlMzY5M2I0ZjY1ZGQwZDhkM2E2YSIsCgkgICJjb3VudHJ5X3poX0NOIjogImNvdW50cnlfemhfQ04uMDZmYzVhZTEzYTQ5ZTI0Y2UwYzZiZjc2M2E5NjcwMTYiLAoJICAiY291bnRyeV96aF9UVyI6ICJjb3VudHJ5X3poX1RXLmJmNjNmZDc2MmMxZmUxZTI1ZjVhOGY0YzQ5MzUyOWU1IiwKCSAgImxvZ2luIjogImxvZ2luLmJiMjM0NDJkZDA0MDU1ZjkxYWU5MDFhYjE0M2FiOTViIiwKCSAgImxvZ2luX2NzIjogImxvZ2luX2NzLjE1NTI1ZmUxMTFmYzFmNTY2Njk1MDA4MzQzZDI3ZDJlIiwKCSAgImxvZ2luX2RhIjogImxvZ2luX2RhLjhiMTFhM2E2NTVhODJlMjI4ODk0NjI0ZTliZDk3YjAxIiwKCSAgImxvZ2luX2RlIjogImxvZ2luX2RlLjFkNzcwMWYxYmRiMzFhNjUyNTQxOWM2NzM5ZjQwYjM3IiwKCSAgImxvZ2luX2VzIjogImxvZ2luX2VzLmNkZWU3MzZlZjZhNjIyZDM2MjAzNDdmYmU2MjYzNDk5IiwKCSAgImxvZ2luX2ZpIjogImxvZ2luX2ZpLjA4MmRjZTMyNDZlZDlhNmI0ODcwNWIwOTVmODUzZjA0IiwKCSAgImxvZ2luX2ZyIjogImxvZ2luX2ZyLjFiNDE5YzNkZTRlZTkyYzgyNmQ4MjhjYThlMGYyN2RiIiwKCSAgImxvZ2luX2h1IjogImxvZ2luX2h1LjI2M2EwNWEwYTVkMTE0MGZjODY5NmE1OGUyZWJkOGE0IiwKCSAgImxvZ2luX2lkIjogImxvZ2luX2lkLjcxMWY5OWE2Nzc1YmUwMTcxYTZiYzIzYWJmYTJmNjkwIiwKCSAgImxvZ2luX2luIjogImxvZ2luX2luLjcxMWY5OWE2Nzc1YmUwMTcxYTZiYzIzYWJmYTJmNjkwIiwKCSAgImxvZ2luX2l0IjogImxvZ2luX2l0LjIxNzJhZWU2ZjkzNDA1MjM0ZGZlN2IwODY4YjQ4OWE2IiwKCSAgImxvZ2luX2phIjogImxvZ2luX2phLmFiYmIzN2Y5MDRhNzRhODI1NWU4M2U2M2MzYjRlYWRjIiwKCSAgImxvZ2luX2tvIjogImxvZ2luX2tvLjY0MjM4NWQ1ZTQ0YzgxZDQ1NDI3NWI2YTkwODQzMGM4IiwKCSAgImxvZ2luX21zIjogImxvZ2luX21zLjNjMmQxMjVkYmVhMjhkM2QwYTRiNGEyODg3OTAwZjAxIiwKCSAgImxvZ2luX25sX05MIjogImxvZ2luX25sX05MLjYxOWM5ODJjYzI0MjRkOTM1YjI4YzM3ODU3MTZkNzI0IiwKCSAgImxvZ2luX3BsIjogImxvZ2luX3BsLmE4OGRlM2FiYjEwM2MyNTFiOTg4OTEyYWEyOWNiNTZlIiwKCSAgImxvZ2luX3B0X0JSIjogImxvZ2luX3B0X0JSLjdjNGIwNzlmZjk2MjljNDViYzI3ZDE1YzU1NTFmODJiIiwKCSAgImxvZ2luX3JvIjogImxvZ2luX3JvLjEzNGU0M2Y1N2VkNDhlZjA5MjhiNDdhMDRiMGQyMzkyIiwKCSAgImxvZ2luX3J1IjogImxvZ2luX3J1LjlhNDAyNjkxODEyOTFmZDFjNmVhNWQ4NmU1MjA4YTNjIiwKCSAgImxvZ2luX3N2IjogImxvZ2luX3N2LjIwMTViNzljMTk3OGVhZDhlYTRhNTg4MzBjMjc5MGI5IiwKCSAgImxvZ2luX3RoIjogImxvZ2luX3RoLjAyNmYwNzU3NmIxYTI4MGQ2MGNkNWEzNTlkMTZiYjg0IiwKCSAgImxvZ2luX3RyIjogImxvZ2luX3RyLjc1MjYzMzI4MjU4NWMyYjA3NzUxOTIwMjVmNTk0NThiIiwKCSAgImxvZ2luX3VrIjogImxvZ2luX3VrLmM2YzM3MTYyMTY2YjEwN2M5YjVjZGExNzA5MjVhZjRjIiwKCSAgImxvZ2luX3poX0NOIjogImxvZ2luX3poX0NOLjgwYTAyYWE3ZGIxZmMwZTFjN2MwM2FhMjBlZTU3ODFmIiwKCSAgImxvZ2luX3poX1RXIjogImxvZ2luX3poX1RXLjBiNGY2NDBkMDI2MjY5YjdjOGI1MTliMGU5NjZlNWM0IgoJfSk7CgovKioqLyB9KSwKLyogMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiEKCSAqIGpRdWVyeSBCcm93c2VyIFBsdWdpbiAwLjEuMAoJICogaHR0cHM6Ly9naXRodWIuY29tL2dhYmNlYi9qcXVlcnktYnJvd3Nlci1wbHVnaW4KCSAqCgkgKiBPcmlnaW5hbCBqcXVlcnktYnJvd3NlciBjb2RlIENvcHlyaWdodCAyMDA1LCAyMDE1IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMKCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCSAqCgkgKiBNb2RpZmljYXRpb25zIENvcHlyaWdodCAyMDE1IEdhYnJpZWwgQ2VicmlhbgoJICogaHR0cHM6Ly9naXRodWIuY29tL2dhYmNlYgoJICoKCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQoJICoKCSAqIERhdGU6IDA1LTA3LTIwMTUKCSAqLwoJLypnbG9iYWwgd2luZG93OiBmYWxzZSAqLwoKCShmdW5jdGlvbiAoZmFjdG9yeSkgewoJICBpZiAodHJ1ZSkgewoJICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS4KCSAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXygyKV0sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCQpIHsKCSAgICAgIHJldHVybiBmYWN0b3J5KCQpOwoJICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCSAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKSB7CgkgICAgLy8gTm9kZS1saWtlIGVudmlyb25tZW50CgkgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsKCSAgfSBlbHNlIHsKCSAgICAvLyBCcm93c2VyIGdsb2JhbHMKCSAgICBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpOwoJICB9Cgl9KGZ1bmN0aW9uKGpRdWVyeSkgewoJICAidXNlIHN0cmljdCI7CgoJICBmdW5jdGlvbiB1YU1hdGNoKCB1YSApIHsKCSAgICAvLyBJZiBhbiBVQSBpcyBub3QgcHJvdmlkZWQsIGRlZmF1bHQgdG8gdGhlIGN1cnJlbnQgYnJvd3NlciBVQS4KCSAgICBpZiAoIHVhID09PSB1bmRlZmluZWQgKSB7CgkgICAgICB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwoJICAgIH0KCSAgICB1YSA9IHVhLnRvTG93ZXJDYXNlKCk7CgoJICAgIHZhciBtYXRjaCA9IC8oZWRnZSlcLyhbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8ob3ByKVtcL10oW1x3Ll0rKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKGNocm9tZSlbIFwvXShbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8oaWVtb2JpbGUpW1wvXShbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8odmVyc2lvbikoYXBwbGV3ZWJraXQpWyBcL10oW1x3Ll0rKS4qKHNhZmFyaSlbIFwvXShbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8od2Via2l0KVsgXC9dKFtcdy5dKykuKih2ZXJzaW9uKVsgXC9dKFtcdy5dKykuKihzYWZhcmkpWyBcL10oW1x3Ll0rKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKHdlYmtpdClbIFwvXShbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFwvXShbXHcuXSspLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8obXNpZSkgKFtcdy5dKykvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgdWEuaW5kZXhPZigidHJpZGVudCIpID49IDAgJiYgLyhydikoPzo6fCApKFtcdy5dKykvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgdWEuaW5kZXhPZigiY29tcGF0aWJsZSIpIDwgMCAmJiAvKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspfCkvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgW107CgoJICAgIHZhciBwbGF0Zm9ybV9tYXRjaCA9IC8oaXBhZCkvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgLyhpcG9kKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKHdpbmRvd3MgcGhvbmUpLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8oaXBob25lKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKGtpbmRsZSkvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgLyhzaWxrKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKGFuZHJvaWQpLy5leGVjKCB1YSApIHx8CgkgICAgICAgIC8od2luKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKG1hYykvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgLyhsaW51eCkvLmV4ZWMoIHVhICkgfHwKCSAgICAgICAgLyhjcm9zKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKHBsYXlib29rKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKGJiKS8uZXhlYyggdWEgKSB8fAoJICAgICAgICAvKGJsYWNrYmVycnkpLy5leGVjKCB1YSApIHx8CgkgICAgICAgIFtdOwoKCSAgICB2YXIgYnJvd3NlciA9IHt9LAoJICAgICAgICBtYXRjaGVkID0gewoJICAgICAgICAgIGJyb3dzZXI6IG1hdGNoWyA1IF0gfHwgbWF0Y2hbIDMgXSB8fCBtYXRjaFsgMSBdIHx8ICIiLAoJICAgICAgICAgIHZlcnNpb246IG1hdGNoWyAyIF0gfHwgbWF0Y2hbIDQgXSB8fCAiMCIsCgkgICAgICAgICAgdmVyc2lvbk51bWJlcjogbWF0Y2hbIDQgXSB8fCBtYXRjaFsgMiBdIHx8ICIwIiwKCSAgICAgICAgICBwbGF0Zm9ybTogcGxhdGZvcm1fbWF0Y2hbIDAgXSB8fCAiIgoJICAgICAgICB9OwoKCSAgICBpZiAoIG1hdGNoZWQuYnJvd3NlciApIHsKCSAgICAgIGJyb3dzZXJbIG1hdGNoZWQuYnJvd3NlciBdID0gdHJ1ZTsKCSAgICAgIGJyb3dzZXIudmVyc2lvbiA9IG1hdGNoZWQudmVyc2lvbjsKCSAgICAgIGJyb3dzZXIudmVyc2lvbk51bWJlciA9IHBhcnNlSW50KG1hdGNoZWQudmVyc2lvbk51bWJlciwgMTApOwoJICAgIH0KCgkgICAgaWYgKCBtYXRjaGVkLnBsYXRmb3JtICkgewoJICAgICAgYnJvd3NlclsgbWF0Y2hlZC5wbGF0Zm9ybSBdID0gdHJ1ZTsKCSAgICB9CgoJICAgIC8vIFRoZXNlIGFyZSBhbGwgY29uc2lkZXJlZCBtb2JpbGUgcGxhdGZvcm1zLCBtZWFuaW5nIHRoZXkgcnVuIGEgbW9iaWxlIGJyb3dzZXIKCSAgICBpZiAoIGJyb3dzZXIuYW5kcm9pZCB8fCBicm93c2VyLmJiIHx8IGJyb3dzZXIuYmxhY2tiZXJyeSB8fCBicm93c2VyLmlwYWQgfHwgYnJvd3Nlci5pcGhvbmUgfHwKCSAgICAgIGJyb3dzZXIuaXBvZCB8fCBicm93c2VyLmtpbmRsZSB8fCBicm93c2VyLnBsYXlib29rIHx8IGJyb3dzZXIuc2lsayB8fCBicm93c2VyWyAid2luZG93cyBwaG9uZSIgXSkgewoJICAgICAgYnJvd3Nlci5tb2JpbGUgPSB0cnVlOwoJICAgIH0KCgkgICAgLy8gVGhlc2UgYXJlIGFsbCBjb25zaWRlcmVkIGRlc2t0b3AgcGxhdGZvcm1zLCBtZWFuaW5nIHRoZXkgcnVuIGEgZGVza3RvcCBicm93c2VyCgkgICAgaWYgKCBicm93c2VyLmNyb3MgfHwgYnJvd3Nlci5tYWMgfHwgYnJvd3Nlci5saW51eCB8fCBicm93c2VyLndpbiApIHsKCSAgICAgIGJyb3dzZXIuZGVza3RvcCA9IHRydWU7CgkgICAgfQoKCSAgICAvLyBDaHJvbWUsIE9wZXJhIDE1KyBhbmQgU2FmYXJpIGFyZSB3ZWJraXQgYmFzZWQgYnJvd3NlcnMKCSAgICBpZiAoIGJyb3dzZXIuY2hyb21lIHx8IGJyb3dzZXIub3ByIHx8IGJyb3dzZXIuc2FmYXJpICkgewoJICAgICAgYnJvd3Nlci53ZWJraXQgPSB0cnVlOwoJICAgIH0KCgkgICAgLy8gSUUxMSBoYXMgYSBuZXcgdG9rZW4gc28gd2Ugd2lsbCBhc3NpZ24gaXQgbXNpZSB0byBhdm9pZCBicmVha2luZyBjaGFuZ2VzCgkgICAgaWYgKCBicm93c2VyLnJ2IHx8IGJyb3dzZXIuaWVtb2JpbGUpIHsKCSAgICAgIHZhciBpZSA9ICJtc2llIjsKCgkgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBpZTsKCSAgICAgIGJyb3dzZXJbaWVdID0gdHJ1ZTsKCSAgICB9CgoJICAgIC8vIEVkZ2UgaXMgb2ZmaWNpYWxseSBrbm93biBhcyBNaWNyb3NvZnQgRWRnZSwgc28gcmV3cml0ZSB0aGUga2V5IHRvIG1hdGNoCgkgICAgaWYgKCBicm93c2VyLmVkZ2UgKSB7CgkgICAgICBkZWxldGUgYnJvd3Nlci5lZGdlOwoJICAgICAgdmFyIG1zZWRnZSA9ICJtc2VkZ2UiOwoKCSAgICAgIG1hdGNoZWQuYnJvd3NlciA9IG1zZWRnZTsKCSAgICAgIGJyb3dzZXJbbXNlZGdlXSA9IHRydWU7CgkgICAgfQoKCSAgICAvLyBCbGFja2JlcnJ5IGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEJsYWNrQmVycnkKCSAgICBpZiAoIGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIuYmxhY2tiZXJyeSApIHsKCSAgICAgIHZhciBibGFja2JlcnJ5ID0gImJsYWNrYmVycnkiOwoKCSAgICAgIG1hdGNoZWQuYnJvd3NlciA9IGJsYWNrYmVycnk7CgkgICAgICBicm93c2VyW2JsYWNrYmVycnldID0gdHJ1ZTsKCSAgICB9CgoJICAgIC8vIFBsYXlib29rIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIFBsYXlib29rCgkgICAgaWYgKCBicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLnBsYXlib29rICkgewoJICAgICAgdmFyIHBsYXlib29rID0gInBsYXlib29rIjsKCgkgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBwbGF5Ym9vazsKCSAgICAgIGJyb3dzZXJbcGxheWJvb2tdID0gdHJ1ZTsKCSAgICB9CgoJICAgIC8vIEJCMTAgaXMgYSBuZXdlciBPUyB2ZXJzaW9uIG9mIEJsYWNrQmVycnkKCSAgICBpZiAoIGJyb3dzZXIuYmIgKSB7CgkgICAgICB2YXIgYmIgPSAiYmxhY2tiZXJyeSI7CgoJICAgICAgbWF0Y2hlZC5icm93c2VyID0gYmI7CgkgICAgICBicm93c2VyW2JiXSA9IHRydWU7CgkgICAgfQoKCSAgICAvLyBPcGVyYSAxNSsgYXJlIGlkZW50aWZpZWQgYXMgb3ByCgkgICAgaWYgKCBicm93c2VyLm9wciApIHsKCSAgICAgIHZhciBvcGVyYSA9ICJvcGVyYSI7CgoJICAgICAgbWF0Y2hlZC5icm93c2VyID0gb3BlcmE7CgkgICAgICBicm93c2VyW29wZXJhXSA9IHRydWU7CgkgICAgfQoKCSAgICAvLyBTdG9jayBBbmRyb2lkIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEFuZHJvaWQuCgkgICAgaWYgKCBicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLmFuZHJvaWQgKSB7CgkgICAgICB2YXIgYW5kcm9pZCA9ICJhbmRyb2lkIjsKCgkgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBhbmRyb2lkOwoJICAgICAgYnJvd3NlclthbmRyb2lkXSA9IHRydWU7CgkgICAgfQoKCSAgICAvLyBLaW5kbGUgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmkgb24gS2luZGxlCgkgICAgaWYgKCBicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLmtpbmRsZSApIHsKCSAgICAgIHZhciBraW5kbGUgPSAia2luZGxlIjsKCgkgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBraW5kbGU7CgkgICAgICBicm93c2VyW2tpbmRsZV0gPSB0cnVlOwoJICAgIH0KCgkgICAgIC8vIEtpbmRsZSBTaWxrIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEtpbmRsZQoJICAgIGlmICggYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5zaWxrICkgewoJICAgICAgdmFyIHNpbGsgPSAic2lsayI7CgoJICAgICAgbWF0Y2hlZC5icm93c2VyID0gc2lsazsKCSAgICAgIGJyb3dzZXJbc2lsa10gPSB0cnVlOwoJICAgIH0KCgkgICAgLy8gQXNzaWduIHRoZSBuYW1lIGFuZCBwbGF0Zm9ybSB2YXJpYWJsZQoJICAgIGJyb3dzZXIubmFtZSA9IG1hdGNoZWQuYnJvd3NlcjsKCSAgICBicm93c2VyLnBsYXRmb3JtID0gbWF0Y2hlZC5wbGF0Zm9ybTsKCSAgICByZXR1cm4gYnJvd3NlcjsKCSAgfQoKCSAgLy8gUnVuIHRoZSBtYXRjaGluZyBwcm9jZXNzLCBhbHNvIGFzc2lnbiB0aGUgZnVuY3Rpb24gdG8gdGhlIHJldHVybmVkIG9iamVjdAoJICAvLyBmb3IgbWFudWFsLCBqUXVlcnktZnJlZSB1c2UgaWYgZGVzaXJlZAoJICB3aW5kb3cualFCcm93c2VyID0gdWFNYXRjaCggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQgKTsKCSAgd2luZG93LmpRQnJvd3Nlci51YU1hdGNoID0gdWFNYXRjaDsKCgkgIC8vIE9ubHkgYXNzaWduIHRvIGpRdWVyeS5icm93c2VyIGlmIGpRdWVyeSBpcyBsb2FkZWQKCSAgaWYgKCBqUXVlcnkgKSB7CgkgICAgalF1ZXJ5LmJyb3dzZXIgPSB3aW5kb3cualFCcm93c2VyOwoJICB9CgoJICByZXR1cm4gd2luZG93LmpRQnJvd3NlcjsKCX0pKTsKCgovKioqLyB9KSwKLyogMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8qIQoJICogQ29weXJpZ2h0IChjKSAyMDE1LTIwMTYsIE9rdGEsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoJICogVGhlIE9rdGEgc29mdHdhcmUgYWNjb21wYW5pZWQgYnkgdGhpcyBub3RpY2UgaXMgcHJvdmlkZWQgcHVyc3VhbnQgdG8gdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlLiIpCgkgKiAKCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAuCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUCgkgKiBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiAKCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKiAKCSAqLwoJIWZ1bmN0aW9uKHQsZSl7IHRydWU/bW9kdWxlLmV4cG9ydHM9ZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoWyJqcXVlcnkiXSxlKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5Pa3RhU2lnbkluPWUocmVxdWlyZSgianF1ZXJ5IikpOnQuT2t0YVNpZ25Jbj1lKHQualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzMzMl9fKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIHI9bltpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsZSksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9IiIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxuKXtuKDEpLHQuZXhwb3J0cz1uKDMyNil9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4pe3RbZV18fE9iamVjdFtpXSh0LGUse3dyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx2YWx1ZTpufSl9aWYobigyKSxuKDMyMiksbigzMjMpLHQuX2JhYmVsUG9seWZpbGwpdGhyb3cgbmV3IEVycm9yKCJvbmx5IG9uZSBpbnN0YW5jZSBvZiBiYWJlbC1wb2x5ZmlsbCBpcyBhbGxvd2VkIik7dC5fYmFiZWxQb2x5ZmlsbD0hMDt2YXIgaT0iZGVmaW5lUHJvcGVydHkiO2UoU3RyaW5nLnByb3RvdHlwZSwicGFkTGVmdCIsIiIucGFkU3RhcnQpLGUoU3RyaW5nLnByb3RvdHlwZSwicGFkUmlnaHQiLCIiLnBhZEVuZCksInBvcCxyZXZlcnNlLHNoaWZ0LGtleXMsdmFsdWVzLGVudHJpZXMsaW5kZXhPZixldmVyeSxzb21lLGZvckVhY2gsbWFwLGZpbHRlcixmaW5kLGZpbmRJbmRleCxpbmNsdWRlcyxqb2luLHNsaWNlLGNvbmNhdCxwdXNoLHNwbGljZSx1bnNoaWZ0LHNvcnQsbGFzdEluZGV4T2YscmVkdWNlLHJlZHVjZVJpZ2h0LGNvcHlXaXRoaW4sZmlsbCIuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe1tdW3RdJiZlKEFycmF5LHQsRnVuY3Rpb24uY2FsbC5iaW5kKFtdW3RdKSl9KX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4pe24oMyksbig1MSksbig1Miksbig1Myksbig1NCksbig1Niksbig1OSksbig2MCksbig2MSksbig2Miksbig2Myksbig2NCksbig2NSksbig2Niksbig2Nyksbig2OSksbig3MSksbig3Myksbig3NSksbig3OCksbig3OSksbig4MCksbig4NCksbig4Niksbig4OCksbig5MSksbig5Miksbig5Myksbig5NCksbig5Niksbig5Nyksbig5OCksbig5OSksbigxMDApLG4oMTAxKSxuKDEwMiksbigxMDQpLG4oMTA1KSxuKDEwNiksbigxMDgpLG4oMTA5KSxuKDExMCksbigxMTIpLG4oMTE0KSxuKDExNSksbigxMTYpLG4oMTE3KSxuKDExOCksbigxMTkpLG4oMTIwKSxuKDEyMSksbigxMjIpLG4oMTIzKSxuKDEyNCksbigxMjUpLG4oMTI2KSxuKDEzMSksbigxMzIpLG4oMTM2KSxuKDEzNyksbigxMzgpLG4oMTM5KSxuKDE0MSksbigxNDIpLG4oMTQzKSxuKDE0NCksbigxNDUpLG4oMTQ2KSxuKDE0NyksbigxNDgpLG4oMTQ5KSxuKDE1MCksbigxNTEpLG4oMTUyKSxuKDE1MyksbigxNTQpLG4oMTU1KSxuKDE1NyksbigxNTgpLG4oMTYwKSxuKDE2MSksbigxNjcpLG4oMTY4KSxuKDE3MCksbigxNzEpLG4oMTcyKSxuKDE3NiksbigxNzcpLG4oMTc4KSxuKDE3OSksbigxODApLG4oMTgyKSxuKDE4MyksbigxODQpLG4oMTg1KSxuKDE4OCksbigxOTApLG4oMTkxKSxuKDE5MiksbigxOTQpLG4oMTk2KSxuKDE5OCksbigxOTkpLG4oMjAwKSxuKDIwMiksbigyMDMpLG4oMjA0KSxuKDIwNSksbigyMTUpLG4oMjE5KSxuKDIyMCksbigyMjIpLG4oMjIzKSxuKDIyNyksbigyMjgpLG4oMjMwKSxuKDIzMSksbigyMzIpLG4oMjMzKSxuKDIzNCksbigyMzUpLG4oMjM2KSxuKDIzNyksbigyMzgpLG4oMjM5KSxuKDI0MCksbigyNDEpLG4oMjQyKSxuKDI0MyksbigyNDQpLG4oMjQ1KSxuKDI0NiksbigyNDcpLG4oMjQ4KSxuKDI1MCksbigyNTEpLG4oMjUyKSxuKDI1MyksbigyNTQpLG4oMjU2KSxuKDI1NyksbigyNTgpLG4oMjYwKSxuKDI2MSksbigyNjIpLG4oMjYzKSxuKDI2NCksbigyNjUpLG4oMjY2KSxuKDI2NyksbigyNjkpLG4oMjcwKSxuKDI3MiksbigyNzMpLG4oMjc0KSxuKDI3NSksbigyNzgpLG4oMjc5KSxuKDI4MSksbigyODIpLG4oMjgzKSxuKDI4NCksbigyODYpLG4oMjg3KSxuKDI4OCksbigyODkpLG4oMjkwKSxuKDI5MSksbigyOTIpLG4oMjkzKSxuKDI5NCksbigyOTUpLG4oMjk3KSxuKDI5OCksbigyOTkpLG4oMzAwKSxuKDMwMSksbigzMDIpLG4oMzAzKSxuKDMwNCksbigzMDUpLG4oMzA2KSxuKDMwNyksbigzMDkpLG4oMzEwKSxuKDMxMSksbigzMTIpLG4oMzEzKSxuKDMxNCksbigzMTUpLG4oMzE2KSxuKDMxNyksbigzMTgpLG4oMzE5KSxuKDMyMCksbigzMjEpLHQuZXhwb3J0cz1uKDkpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oNCkscj1uKDUpLG89big2KSxzPW4oOCksYT1uKDE4KSxsPW4oMjIpLktFWSxjPW4oNyksdT1uKDIzKSxkPW4oMjQpLGg9bigxOSkscD1uKDI1KSxmPW4oMjYpLG09bigyNyksXz1uKDI5KSxnPW4oNDQpLHY9bigxMikseT1uKDMyKSxiPW4oMTYpLHc9bigxNyksTT1uKDQ1KSxTPW4oNDgpLFQ9big1MCksaz1uKDExKSxMPW4oMzApLHg9VC5mLEE9ay5mLEU9Uy5mLEQ9aS5TeW1ib2wsQz1pLkpTT04sWT1DJiZDLnN0cmluZ2lmeSxPPSJwcm90b3R5cGUiLFA9cCgiX2hpZGRlbiIpLE49cCgidG9QcmltaXRpdmUiKSxJPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFI9dSgic3ltYm9sLXJlZ2lzdHJ5Iiksaj11KCJzeW1ib2xzIiksSD11KCJvcC1zeW1ib2xzIiksRj1PYmplY3RbT10sej0iZnVuY3Rpb24iPT10eXBlb2YgRCxVPWkuUU9iamVjdCxXPSFVfHwhVVtPXXx8IVVbT10uZmluZENoaWxkLEI9byYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1NKEEoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbih0LGUsbil7dmFyIGk9eChGLGUpO2kmJmRlbGV0ZSBGW2VdLEEodCxlLG4pLGkmJnQhPT1GJiZBKEYsZSxpKX06QSxWPWZ1bmN0aW9uKHQpe3ZhciBlPWpbdF09TShEW09dKTtyZXR1cm4gZS5faz10LGV9LHE9eiYmInN5bWJvbCI9PXR5cGVvZiBELml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiJzeW1ib2wiPT10eQ==", "base64"));
  res.write(new Buffer("cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIER9LCQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PT09RiYmJChILGUsbiksdih0KSxlPWIoZSwhMCksdihuKSxyKGosZSk/KG4uZW51bWVyYWJsZT8ocih0LFApJiZ0W1BdW2VdJiYodFtQXVtlXT0hMSksbj1NKG4se2VudW1lcmFibGU6dygwLCExKX0pKToocih0LFApfHxBKHQsUCx3KDEse30pKSx0W1BdW2VdPSEwKSxCKHQsZSxuKSk6QSh0LGUsbil9LEc9ZnVuY3Rpb24odCxlKXt2KHQpO2Zvcih2YXIgbixpPV8oZT15KGUpKSxyPTAsbz1pLmxlbmd0aDtvPnI7KSQodCxuPWlbcisrXSxlW25dKTtyZXR1cm4gdH0sSz1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lP00odCk6RyhNKHQpLGUpfSxKPWZ1bmN0aW9uKHQpe3ZhciBlPUkuY2FsbCh0aGlzLHQ9Yih0LCEwKSk7cmV0dXJuISh0aGlzPT09RiYmcihqLHQpJiYhcihILHQpKSYmKCEoZXx8IXIodGhpcyx0KXx8IXIoaix0KXx8cih0aGlzLFApJiZ0aGlzW1BdW3RdKXx8ZSl9LFg9ZnVuY3Rpb24odCxlKXtpZih0PXkodCksZT1iKGUsITApLHQhPT1GfHwhcihqLGUpfHxyKEgsZSkpe3ZhciBuPXgodCxlKTtyZXR1cm4hbnx8IXIoaixlKXx8cih0LFApJiZ0W1BdW2VdfHwobi5lbnVtZXJhYmxlPSEwKSxufX0sUT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj1FKHkodCkpLGk9W10sbz0wO24ubGVuZ3RoPm87KXIoaixlPW5bbysrXSl8fGU9PVB8fGU9PWx8fGkucHVzaChlKTtyZXR1cm4gaX0sWj1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10PT09RixpPUUobj9IOnkodCkpLG89W10scz0wO2kubGVuZ3RoPnM7KSFyKGosZT1pW3MrK10pfHxuJiYhcihGLGUpfHxvLnB1c2goaltlXSk7cmV0dXJuIG99O3p8fChEPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEQpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhIik7dmFyIHQ9aChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksZT1mdW5jdGlvbihuKXt0aGlzPT09RiYmZS5jYWxsKEgsbikscih0aGlzLFApJiZyKHRoaXNbUF0sdCkmJih0aGlzW1BdW3RdPSExKSxCKHRoaXMsdCx3KDEsbikpfTtyZXR1cm4gbyYmVyYmQihGLHQse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZX0pLFYodCl9LGEoRFtPXSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxULmY9WCxrLmY9JCxuKDQ5KS5mPVMuZj1RLG4oNDMpLmY9SixuKDQyKS5mPVosbyYmIW4oMjgpJiZhKEYsInByb3BlcnR5SXNFbnVtZXJhYmxlIixKLCEwKSxmLmY9ZnVuY3Rpb24odCl7cmV0dXJuIFYocCh0KSl9KSxzKHMuRytzLlcrcy5GKiF6LHtTeW1ib2w6RH0pO2Zvcih2YXIgdHQ9Imhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGV0PTA7dHQubGVuZ3RoPmV0OylwKHR0W2V0KytdKTtmb3IodmFyIG50PUwocC5zdG9yZSksaXQ9MDtudC5sZW5ndGg+aXQ7KW0obnRbaXQrK10pO3Mocy5TK3MuRioheiwiU3ltYm9sIix7ImZvciI6ZnVuY3Rpb24odCl7cmV0dXJuIHIoUix0Kz0iIik/Ult0XTpSW3RdPUQodCl9LGtleUZvcjpmdW5jdGlvbih0KXtpZighcSh0KSl0aHJvdyBUeXBlRXJyb3IodCsiIGlzIG5vdCBhIHN5bWJvbCEiKTtmb3IodmFyIGUgaW4gUilpZihSW2VdPT09dClyZXR1cm4gZX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Vz0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Vz0hMX19KSxzKHMuUytzLkYqIXosIk9iamVjdCIse2NyZWF0ZTpLLGRlZmluZVByb3BlcnR5OiQsZGVmaW5lUHJvcGVydGllczpHLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLGdldE93blByb3BlcnR5TmFtZXM6USxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Wn0pLEMmJnMocy5TK3MuRiooIXp8fGMoZnVuY3Rpb24oKXt2YXIgdD1EKCk7cmV0dXJuIltudWxsXSIhPVkoW3RdKXx8Int9IiE9WSh7YTp0fSl8fCJ7fSIhPVkoT2JqZWN0KHQpKX0pKSwiSlNPTiIse3N0cmluZ2lmeTpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiYhcSh0KSl7Zm9yKHZhciBlLG4saT1bdF0scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspaS5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZT1pWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYobj1lKSwhbiYmZyhlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZihuJiYoZT1uLmNhbGwodGhpcyx0LGUpKSwhcShlKSlyZXR1cm4gZX0pLGlbMV09ZSxZLmFwcGx5KEMsaSl9fX0pLERbT11bTl18fG4oMTApKERbT10sTixEW09dLnZhbHVlT2YpLGQoRCwiU3ltYm9sIiksZChNYXRoLCJNYXRoIiwhMCksZChpLkpTT04sIkpTT04iLCEwKX0sZnVuY3Rpb24odCxlKXt2YXIgbj10LmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9bil9LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0LGUpfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz0hbig3KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaChlKXtyZXR1cm4hMH19fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0KSxyPW4oOSksbz1uKDEwKSxzPW4oMTgpLA==", "base64"));
  res.write(new Buffer("YT1uKDIwKSxsPSJwcm90b3R5cGUiLGM9ZnVuY3Rpb24odCxlLG4pe3ZhciB1LGQsaCxwLGY9dCZjLkYsbT10JmMuRyxfPXQmYy5TLGc9dCZjLlAsdj10JmMuQix5PW0/aTpfP2lbZV18fChpW2VdPXt9KTooaVtlXXx8e30pW2xdLGI9bT9yOnJbZV18fChyW2VdPXt9KSx3PWJbbF18fChiW2xdPXt9KTttJiYobj1lKTtmb3IodSBpbiBuKWQ9IWYmJnkmJnZvaWQgMCE9PXlbdV0saD0oZD95Om4pW3VdLHA9diYmZD9hKGgsaSk6ZyYmImZ1bmN0aW9uIj09dHlwZW9mIGg/YShGdW5jdGlvbi5jYWxsLGgpOmgseSYmcyh5LHUsaCx0JmMuVSksYlt1XSE9aCYmbyhiLHUscCksZyYmd1t1XSE9aCYmKHdbdV09aCl9O2kuY29yZT1yLGMuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsYy5VPTY0LGMuUj0xMjgsdC5leHBvcnRzPWN9LGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuMSJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMSkscj1uKDE3KTt0LmV4cG9ydHM9big2KT9mdW5jdGlvbih0LGUsbil7cmV0dXJuIGkuZih0LGUscigxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEyKSxyPW4oMTQpLG89bigxNikscz1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPW4oNik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihpKHQpLGU9byhlLCEwKSxpKG4pLHIpdHJ5e3JldHVybiBzKHQsZSxuKX1jYXRjaChhKXt9aWYoImdldCJpbiBufHwic2V0ImluIG4pdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEiKTtyZXR1cm4idmFsdWUiaW4gbiYmKHRbZV09bi52YWx1ZSksdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIWkodCkpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiB0P251bGwhPT10OiJmdW5jdGlvbiI9PXR5cGVvZiB0fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz0hbig2KSYmIW4oNykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4oMTUpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpLHI9big0KS5kb2N1bWVudCxvPWkocikmJmkoci5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG8/ci5jcmVhdGVFbGVtZW50KHQpOnt9fX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFpKHQpKXJldHVybiB0O3ZhciBuLHI7aWYoZSYmImZ1bmN0aW9uIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFpKHI9bi5jYWxsKHQpKSlyZXR1cm4gcjtpZigiZnVuY3Rpb24iPT10eXBlb2Yobj10LnZhbHVlT2YpJiYhaShyPW4uY2FsbCh0KSkpcmV0dXJuIHI7aWYoIWUmJiJmdW5jdGlvbiI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhaShyPW4uY2FsbCh0KSkpcmV0dXJuIHI7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2VudW1lcmFibGU6ISgxJnQpLGNvbmZpZ3VyYWJsZTohKDImdCksd3JpdGFibGU6ISg0JnQpLHZhbHVlOmV9fX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNCkscj1uKDEwKSxvPW4oNSkscz1uKDE5KSgic3JjIiksYT0idG9TdHJpbmciLGw9RnVuY3Rpb25bYV0sYz0oIiIrbCkuc3BsaXQoYSk7big5KS5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiBsLmNhbGwodCl9LCh0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sYSl7dmFyIGw9ImZ1bmN0aW9uIj09dHlwZW9mIG47bCYmKG8obiwibmFtZSIpfHxyKG4sIm5hbWUiLGUpKSx0W2VdIT09biYmKGwmJihvKG4scyl8fHIobixzLHRbZV0/IiIrdFtlXTpjLmpvaW4oU3RyaW5nKGUpKSkpLHQ9PT1pP3RbZV09bjphP3RbZV0/dFtlXT1uOnIodCxlLG4pOihkZWxldGUgdFtlXSxyKHQsZSxuKSkpfSkoRnVuY3Rpb24ucHJvdG90eXBlLGEsZnVuY3Rpb24oKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdGhpcyYmdGhpc1tzXXx8bC5jYWxsKHRoaXMpfSl9LGZ1bmN0aW9uKHQsZSl7dmFyIG49MCxpPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09dD8iIjp0LCIpXyIsKCsrbitpKS50b1N0cmluZygzNikpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMjEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYoaSh0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiB0LmNhbGwoZSxuLGkpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4saSxyKXtyZXR1cm4gdC5jYWxsKGUsbixpLHIpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDE5KSgibWV0YSIpLHI9bigxMyksbz1uKDUpLHM9bigxMSkuZixhPTAsbD1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFuKDcpKGZ1bmN0aW9uKCl7cmV0dXJuIGwoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSx1PWZ1bmN0aW9uKHQpe3ModCxpLHt2YWx1ZTp7aToiTyIrICsrYSx3Ont9fX0pfSxkPWZ1bmN0aW9uKHQsZSl7aWYoIXIodCkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiB0P3Q6KCJzdHJpbmciPT10eXBlb2YgdD8iUyI6IlAiKSt0O2lmKCFvKHQsaSkpe2lmKCFsKHQpKXJldHVybiJGIjtpZighZSlyZXR1cm4iRSI7dSh0KX1yZXR1cm4gdFtpXS5pfSxoPWZ1bmN0aW9uKHQsZSl7aWYoIW8odCxpKSl7aWYoIWwodCkpcmV0dXJuITA7aWYoIWUpcmV0dXJuITE7dSh0KX1yZXR1cm4gdFtpXS53fSxwPWZ1bmN0aW9uKHQpe3JldHVybiBjJiZmLk5FRUQmJmwodCkmJiFvKHQsaSkmJnUodCksdH0sZj10LmV4cG9ydHM9e0tFWTppLE5FRUQ6ITEsZmFzdEtleTpkLGdldFdlYWs6aCxvbkZyZWV6ZTpwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNCkscj0iX19jb3JlLWpzX3NoYXJlZF9fIixvPWlbcl18fChpW3JdPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdF18fChvW3RdPXt9KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDExKS5mLHI9big1KSxvPW4oMjUpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIXIodD1uP3Q6dC5wcm90b3R5cGUsbykmJmkodCxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMjMpKCJ3a3MiKSxyPW4oMTkpLG89big0KS5TeW1ib2wscz0iZnVuY3Rpb24iPT10eXBlb2YgbyxhPXQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaVt0XXx8KGlbdF09cyYmb1t0XXx8KHM/bzpyKSgiU3ltYm9sLiIrdCkpfTthLnN0b3JlPWl9LGZ1bmN0aW9uKHQsZSxuKXtlLmY9bigyNSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDQpLHI9big5KSxvPW4oMjgpLHM9bigyNiksYT1uKDExKS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1yLlN5bWJvbHx8KHIuU3ltYm9sPW8/e306aS5TeW1ib2x8fHt9KTsiXyI9PXQuY2hhckF0KDApfHx0IGluIGV8fGEoZSx0LHt2YWx1ZTpzLmYodCl9KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSExfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzMCkscj1uKDQyKSxvPW4oNDMpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1pKHQpLG49ci5mO2lmKG4pZm9yKHZhciBzLGE9bih0KSxsPW8uZixjPTA7YS5sZW5ndGg+YzspbC5jYWxsKHQscz1hW2MrK10pJiZlLnB1c2gocyk7cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzMSkscj1uKDQxKTt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3JldHVybiBpKHQscil9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big1KSxyPW4oMzIpLG89bigzNikoITEpLHM9big0MCkoIklFX1BST1RPIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG4sYT1yKHQpLGw9MCxjPVtdO2ZvcihuIGluIGEpbiE9cyYmaShhLG4pJiZjLnB1c2gobik7Zm9yKDtlLmxlbmd0aD5sOylpKGEsbj1lW2wrK10pJiYofm8oYyxuKXx8Yy5wdXNoKG4pKTtyZXR1cm4gY319LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDMzKSxyPW4oMzUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaShyKHQpKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDM0KTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiJTdHJpbmciPT1pKHQpP3Quc3BsaXQoIiIpOk9iamVjdCh0KX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIit0KTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDMyKSxyPW4oMzcpLG89bigzOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4scyl7dmFyIGEsbD1pKGUpLGM9cihsLmxlbmd0aCksdT1vKHMsYyk7aWYodCYmbiE9bil7Zm9yKDtjPnU7KWlmKGE9bFt1KytdLGEhPWEpcmV0dXJuITB9ZWxzZSBmb3IoO2M+dTt1KyspaWYoKHR8fHUgaW4gbCkmJmxbdV09PT1uKXJldHVybiB0fHx1fHwwO3JldHVybiF0JiYtMX19fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzOCkscj1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9yKGkodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LGZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5jZWlsLGk9TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGlzTmFOKHQ9K3QpPzA6KHQ+MD9pOm4pKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzgpLHI9TWF0aC5tYXgsbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1pKHQpLHQ8MD9yKHQrZSwwKTpvKHQsZSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMykoImtleXMiKSxyPW4oMTkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaVt0XXx8KGlbdF09cih0KSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0iY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mIi5zcGxpdCgiLCIpfSxmdW5jdGlvbih0LGUpe2UuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxmdW5jdGlvbih0LGUpe2UuZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzQpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm4iQXJyYXkiPT1pKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTIpLHI9big0Niksbz1uKDQxKSxzPW4oNDApKCJJRV9QUk9UTyIpLGE9ZnVuY3Rpb24oKXt9LGw9InByb3RvdHlwZSIsYz1mdW5jdGlvbigpe3ZhciB0LGU9bigxNSkoImlmcmFtZSIpLGk9by5sZW5ndGgscj0iPCIscz0iPiI7Zm9yKGUuc3R5bGUuZGlzcGxheT0ibm9uZSIsbig0NykuYXBwZW5kQ2hpbGQoZSksZS5zcmM9ImphdmFzY3JpcHQ6Iix0PWUuY29udGVudFdpbmRvdy5kb2N1bWVudCx0Lm9wZW4oKSx0LndyaXRlKHIrInNjcmlwdCIrcysiZG9jdW1lbnQuRj1PYmplY3QiK3IrIi9zY3JpcHQiK3MpLHQuY2xvc2UoKSxjPXQuRjtpLS07KWRlbGV0ZSBjW2xdW29baV1dO3JldHVybiBjKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8oYVtsXT1pKHQpLG49bmV3IGEsYVtsXT1udWxsLG5bc109dCk6bj1jKCksdm9pZCAwPT09ZT9uOnIobixlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDExKSxyPW4oMTIpLG89bigzMCk7dC5leHBvcnRzPW4oNik/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtyKHQpO2Zvcih2YXIgbixzPW8oZSksYT1zLmxlbmd0aCxsPTA7YT5sOylpLmYodCxuPXNbbCsrXSxlW25dKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDQpLmRvY3VtZW50O3QuZXhwb3J0cz1pJiZpLmRvY3VtZW50RWxlbWVudH0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzIpLHI9big0OSkuZixvPXt9LnRvU3RyaW5nLHM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gcih0KX1jYXRjaChlKXtyZXR1cm4gcy5zbGljZSgpfX07dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIHMmJiJbb2JqZWN0IFdpbmRvd10iPT1vLmNhbGwodCk/YSh0KTpyKGkodCkpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzEpLHI9big0MSkuY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiBpKHQscil9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0Mykscj1uKDE3KSxvPW4oMzIpLHM9bigxNiksYT1uKDUpLGw9bigxNCksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2UuZj1uKDYpP2M6ZnVuY3Rpb24odCxlKXtpZih0PW8odCksZT1zKGUsITApLGwpdHJ5e3JldHVybiBjKHQsZSl9Y2F0Y2gobil7fWlmKGEodCxlKSlyZXR1cm4gcighaS5mLmNhbGwodCxlKSx0W2VdKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJPYmplY3QiLHtjcmVhdGU6big0NSl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMraS5GKiFuKDYpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTpuKDExKS5mfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TK2kuRiohbig2KSwiT2JqZWN0Iix7ZGVmaW5lUHJvcGVydGllczpuKDQ2KX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzMikscj1uKDUwKS5mO24oNTUpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIoaSh0KSxlKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDkpLG89big3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj0oci5PYmplY3R8fHt9KVt0XXx8T2JqZWN0W3RdLHM9e307c1t0XT1lKG4pLGkoaS5TK2kuRipvKGZ1bmN0aW9uKCl7bigxKX0pLCJPYmplY3QiLHMpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNTcpLHI9big1OCk7big1NSkoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gcihpKHQpKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KGkodCkpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNSkscj1uKDU3KSxvPW4oNDApKCJJRV9QUk9UTyIpLHM9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1yKHQpLGkodCxvKT90W29dOiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P3M6bnVsbH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDU3KSxyPW4oMzApO24oNTUpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gcihpKHQpKX19KX0sZnVuY3Rpb24odCxlLG4pe24oNTUpKCJnZXRPd25Qcm9wZXJ0eU5hbWVzIixmdW5jdGlvbigpe3JldHVybiBuKDQ4KS5mfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKSxyPW4oMjIpLm9uRnJlZXplO24oNTUpKCJmcmVlemUiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdCYmaShlKT90KHIoZSkpOmV9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKSxyPW4oMjIpLm9uRnJlZXplO24oNTUpKCJzZWFsIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQmJmkoZSk/dChyKGUpKTplfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMykscj1uKDIyKS5vbkZyZWV6ZTtuKDU1KSgicHJldmVudEV4dGVuc2lvbnMiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdCYmaShlKT90KHIoZSkpOmV9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKTtuKDU1KSgiaXNGcm96ZW4iLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4haShlKXx8ISF0JiZ0KGUpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMyk7big1NSkoImlzU2VhbGVkIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIWkoZSl8fCEhdCYmdChlKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpO24oNTUpKCJpc0V4dGVuc2libGUiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hIWkoZSkmJighdHx8dChlKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TK2kuRiwiT2JqZWN0Iix7YXNzaWduOm4oNjgpfSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9bigzMCkscj1uKDQyKSxvPW4oNDMpLHM9big1NyksYT1uKDMzKSxsPU9iamVjdC5hc3NpZ247dC5leHBvcnRzPSFsfHxuKDcpKGZ1bmN0aW9uKCl7dmFyIHQ9e30sZT17fSxuPVN5bWJvbCgpLGk9ImFiY2RlZmdoaWprbG1ub3BxcnN0IjtyZXR1cm4gdFtuXT03LGkuc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10fSksNyE9bCh7fSx0KVtuXXx8T2JqZWN0LmtleXMobCh7fSxlKSkuam9pbigiIikhPWl9KT9mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1zKHQpLGw9YXJndW1lbnRzLmxlbmd0aCxjPTEsdT1yLmYsZD1vLmY7bD5jOylmb3IodmFyIGgscD1hKGFyZ3VtZW50c1tjKytdKSxmPXU/aShwKS5jb25jYXQodShwKSk6aShwKSxtPWYubGVuZ3RoLF89MDttPl87KWQuY2FsbChwLGg9ZltfKytdKSYmKG5baF09cFtoXSk7cmV0dXJuIG59Omx9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJPYmplY3QiLHtpczpuKDcwKX0pfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lPzAhPT10fHwxL3Q9PT0xL2U6dCE9dCYmZSE9ZX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjpuKDcyKS5zZXR9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpLHI9bigxMiksbz1mdW5jdGlvbih0LGUpe2lmKHIodCksIWkoZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihlKyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT9mdW5jdGlvbih0LGUsaSl7dHJ5e2k9bigyMCkoRnVuY3Rpb24uY2FsbCxuKDUwKS5mKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxpKHQsW10pLGU9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKHIpe2U9ITB9cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIG8odCxuKSxlP3QuX19wcm90b19fPW46aSh0LG4pLHR9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpvfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDc0KSxyPXt9O3JbbigyNSkoInRvU3RyaW5nVGFnIildPSJ6IixyKyIiIT0iW29iamVjdCB6XSImJm4oMTgpKE9iamVjdC5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0ICIraSh0aGlzKSsiXSJ9LCEwKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzQpLHI9bigyNSkoInRvU3RyaW5nVGFnIiksbz0iQXJndW1lbnRzIj09aShmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLHM9ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIHRbZV19Y2F0Y2gobil7fX07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLG4sYTtyZXR1cm4gdm9pZCAwPT09dD8iVW5kZWZpbmVkIjpudWxsPT09dD8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihuPXMoZT1PYmplY3QodCkscikpP246bz9pKGUpOiJPYmplY3QiPT0oYT1pKGUpKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2FsbGVlPyJBcmd1bWVudHMiOmF9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUCwiRnVuY3Rpb24iLHtiaW5kOm4oNzYpfSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9bigyMSkscj1uKDEzKSxvPW4oNzcpLHM9W10uc2xpY2UsYT17fSxsPWZ1bmN0aW9uKHQsZSxuKXtpZighKGUgaW4gYSkpe2Zvcih2YXIgaT1bXSxyPTA7cjxlO3IrKylpW3JdPSJhWyIrcisiXSI7YVtlXT1GdW5jdGlvbigiRixhIiwicmV0dXJuIG5ldyBGKCIraS5qb2luKCIsIikrIikiKX1yZXR1cm4gYVtlXSh0LG4pfTt0LmV4cG9ydHM9RnVuY3Rpb24uYmluZHx8ZnVuY3Rpb24odCl7dmFyIGU9aSh0aGlzKSxuPXMuY2FsbChhcmd1bWVudHMsMSksYT1mdW5jdGlvbigpe3ZhciBpPW4uY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGE/bChlLGkubGVuZ3RoLGkpOm8oZSxpLHQpfTtyZXR1cm4gcihlLnByb3RvdHlwZSkmJihhLnByb3RvdHlwZT1lLnByb3RvdHlwZSksYX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT12b2lkIDA9PT1uO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBpP3QoKTp0LmNhbGwobik7Y2FzZSAxOnJldHVybiBpP3QoZVswXSk6dC5jYWxsKG4sZVswXSk7Y2FzZSAyOnJldHVybiBpP3QoZVswXSxlWzFdKTp0LmNhbGwobixlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gaT90KGVbMF0sZVsxXSxlWzJdKTp0LmNhbGwobixlWzBdLGVbMV0sZVsyXSk7Y2FzZSA0OnJldHVybiBpP3QoZVswXSxlWzFdLGVbMl0sZVszXSk6dC5jYWxsKG4sZVswXSxlWzFdLGVbMl0sZVszXSl9cmV0dXJuIHQuYXBwbHkobixlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDExKS5mLHI9RnVuY3Rpb24ucHJvdG90eXBlLG89L15ccypmdW5jdGlvbiAoW14gKF0qKS8scz0ibmFtZSI7cyBpbiByfHxuKDYpJiZpKHIscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4oIiIrdGhpcykubWF0Y2gobylbMV19Y2F0Y2godCl7cmV0dXJuIiJ9fX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTMpLHI9big1OCksbz1uKDI1KSgiaGFzSW5zdGFuY2UiKSxzPUZ1bmN0aW9uLnByb3RvdHlwZTtvIGluIHN8fG4oMTEpLmYocyxvLHt2YWx1ZTpmdW5jdGlvbih0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdGhpc3x8IWkodCkpcmV0dXJuITE7aWYoIWkodGhpcy5wcm90b3R5cGUpKXJldHVybiB0IGluc3RhbmNlb2YgdGhpcztmb3IoO3Q9cih0KTspaWYodGhpcy5wcm90b3R5cGU9PT10KXJldHVybiEwO3JldHVybiExfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oODEpO2koaS5HK2kuRioocGFyc2VJbnQhPXIpLHtwYXJzZUludDpyfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDQpLnBhcnNlSW50LHI9big4MikudHJpbSxvPW4oODMpLHM9L15bLStdPzBbeFhdLzt0LmV4cG9ydHM9OCE9PWkobysiMDgiKXx8MjIhPT1pKG8rIjB4MTYiKT9mdW5jdGlvbih0LGUpe3ZhciBuPXIoU3RyaW5nKHQpLDMpO3JldHVybiBpKG4sZT4+PjB8fChzLnRlc3Qobik/MTY6MTApKX06aX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDM1KSxvPW4oNykscz1uKDgzKSxhPSJbIitzKyJdIixsPSLigIvChSIsYz1SZWdFeHAoIl4iK2ErYSsiKiIpLHU9UmVnRXhwKGErYSsiKiQiKSxkPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj17fSxhPW8oZnVuY3Rpb24oKXtyZXR1cm4hIXNbdF0oKXx8bFt0XSgpIT1sfSksYz1yW3RdPWE/ZShoKTpzW3RdO24mJihyW25dPWMpLGkoaS5QK2kuRiphLCJTdHJpbmciLHIpfSxoPWQudHJpbT1mdW5jdGlvbih0LGUpe3JldHVybiB0PVN0cmluZyhyKHQpKSwxJmUmJih0PXQucmVwbGFjZShjLCIiKSksMiZlJiYodD10LnJlcGxhY2UodSwiIikpLHR9O3QuZXhwb3J0cz1kfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0iXHRcblx4MEJcZlxyIMKg4ZqA4aCO4oCA4oCB4oCC4oCD4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CAXHUyMDI4XHUyMDI5XHVmZWZmIn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDg1KTtpKGkuRytpLkYqKHBhcnNlRmxvYXQhPXIpLHtwYXJzZUZsb2F0OnJ9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNCkucGFyc2VGbG9hdCxyPW4oODIpLnRyaW07dC5leHBvcnRzPTEvaShuKDgzKSsiLTAiKSE9PS0oMS8wKT9mdW5jdGlvbih0KXt2YXIgZT1yKFN0cmluZyh0KSwzKSxuPWkoZSk7cmV0dXJuIDA9PT1uJiYiLSI9PWUuY2hhckF0KDApPy0wOm59Oml9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big0KSxyPW4oNSksbz1uKDM0KSxzPW4oODcpLGE9bigxNiksbD1uKDcpLGM9big0OSkuZix1PW4oNTApLmYsZD1uKDExKS5mLGg9big4MikudHJpbSxwPSJOdW1iZXIiLGY9aVtwXSxtPWYsXz1mLnByb3RvdHlwZSxnPW8obig0NSkoXykpPT1wLHY9InRyaW0iaW4gU3RyaW5nLnByb3RvdHlwZSx5PWZ1bmN0aW9uKHQpe3ZhciBlPWEodCwhMSk7aWYoInN0cmluZyI9PXR5cGVvZiBlJiZlLmxlbmd0aD4yKXtlPXY/ZS50cmltKCk6aChlLDMpO3ZhciBuLGkscixvPWUuY2hhckNvZGVBdCgwKTtpZig0Mz09PW98fDQ1PT09byl7aWYobj1lLmNoYXJDb2RlQXQoMiksODg9PT1ufHwxMjA9PT1uKXJldHVybiBOYU59ZWxzZSBpZig0OD09PW8pe3N3aXRjaChlLmNoYXJDb2RlQXQoMSkpe2Nhc2UgNjY6Y2FzZSA5ODppPTIscj00OTticmVhaztjYXNlIDc5OmNhc2UgMTExOmk9OCxyPTU1O2JyZWFrO2RlZmF1bHQ6cmV0dXJuK2V9Zm9yKHZhciBzLGw9ZS5zbGljZSgyKSxjPTAsdT1sLmxlbmd0aDtjPHU7YysrKWlmKHM9bC5jaGFyQ29kZUF0KGMpLHM8NDh8fHM+cilyZXR1cm4gTmFOO3JldHVybiBwYXJzZUludChsLGkpfX1yZXR1cm4rZX07aWYoIWYoIiAwbzEiKXx8IWYoIjBiMSIpfHxmKCIrMHgxIikpe2Y9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDwxPzA6dCxuPXRoaXM7cmV0dXJuIG4gaW5zdGFuY2VvZiBmJiYoZz9sKGZ1bmN0aW9uKCl7Xy52YWx1ZU9mLmNhbGwobil9KTpvKG4pIT1wKT9zKG5ldyBtKHkoZSkpLG4sZik6eShlKX07Zm9yKHZhciBiLHc9big2KT9jKG0pOiJNQVhfVkFMVUUsTUlOX1ZBTFVFLE5hTixORUdBVElWRV9JTkZJTklUWSxQT1NJVElWRV9JTkZJTklUWSxFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlciIuc3BsaXQoIiwiKSxNPTA7dy5sZW5ndGg+TTtNKyspcihtLGI9d1tNXSkmJiFyKGYsYikmJmQoZixiLHUobSxiKSk7Zi5wcm90b3R5cGU9XyxfLmNvbnN0cnVjdG9yPWYsbigxOCkoaSxwLGYpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpLHI9big3Mikuc2V0O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dmFyIG8scz1lLmNvbnN0cnVjdG9yO3JldHVybiBzIT09biYmImZ1bmN0aW9uIj09dHlwZW9mIHMmJihvPXMucHJvdG90eXBlKSE9PW4ucHJvdG90eXBlJiZpKG8pJiZyJiZyKHQsbyksdH19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzgpLG89big4OSkscz1uKDkwKSxhPTEuLnRvRml4ZWQsbD1NYXRoLmZsb29yLGM9WzAsMCwwLDAsMCwwXSx1PSJOdW1iZXIudG9GaXhlZDogaW5jb3JyZWN0IGludm9jYXRpb24hIixkPSIwIixoPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPS0xLGk9ZTsrK248NjspaSs9dCpjW25dLGNbbl09aSUxZTcsaT1sKGkvMWU3KX0scD1mdW5jdGlvbih0KXtmb3IodmFyIGU9NixuPTA7LS1lPj0wOyluKz1jW2VdLGNbZV09bChuL3QpLG49biV0KjFlN30sZj1mdW5jdGlvbigpe2Zvcih2YXIgdD02LGU9IiI7LS10Pj0wOylpZigiIiE9PWV8fDA9PT10fHwwIT09Y1t0XSl7dmFyIG49U3RyaW5nKGNbdF0pO2U9IiI9PT1lP246ZStzLmNhbGwoZCw3LW4ubGVuZ3RoKStufXJldHVybiBlfSxtPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PWU/bjplJTI9PT0xP20odCxlLTEsbip0KTptKHQqdCxlLzIsbil9LF89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10O24+PTQwOTY7KWUrPTEyLG4vPTQwOTY7Zm9yKDtuPj0yOyllKz0xLG4vPTI7cmV0dXJuIGV9O2koaS5QK2kuRiooISFhJiYoIjAuMDAwIiE9PThlLTUudG9GaXhlZCgzKXx8IjEiIT09LjkudG9GaXhlZCgwKXx8IjEuMjUiIT09MS4yNTUudG9GaXhlZCgyKXx8IjEwMDAwMDAwMDAwMDAwMDAxMjgiIT09KDB4ZGUwYjZiM2E3NjQwMDgwKS50b0ZpeGVkKDApKXx8IW4oNykoZnVuY3Rpb24oKXthLmNhbGwoe30pfSkpLCJOdW1iZXIiLHt0b0ZpeGVkOmZ1bmN0aW9uKHQpe3ZhciBlLG4saSxhLGw9byh0aGlzLHUpLGM9cih0KSxnPSIiLHY9ZDtpZihjPDB8fGM+MjApdGhyb3cgUmFuZ2VFcnJvcih1KTtpZihsIT1sKXJldHVybiJOYU4iO2lmKGw8PS0xZTIxfHxsPj0xZTIxKXJldHVybiBTdHJpbmcobCk7aWYobDwwJiYoZz0iLSIsbD0tbCksbD4xZS0yMSlpZihlPV8obCptKDIsNjksMSkpLTY5LG49ZTwwP2wqbSgyLC1lLDEpOmwvbSgyLGUsMSksbio9NDUwMzU5OTYyNzM3MDQ5NixlPTUyLWUsZT4wKXtmb3IoaCgwLG4pLGk9YztpPj03OyloKDFlNywwKSxpLT03O2ZvcihoKG0oMTAsaSwxKSwwKSxpPWUtMTtpPj0yMzspcCgxPDwyMyksaS09MjM7cCgxPDxpKSxoKDEsMSkscCgyKSx2PWYoKX1lbHNlIGgoMCxuKSxoKDE8PC1lLDApLHY9ZigpK3MuY2FsbChkLGMpO3JldHVybiBjPjA/KGE9di5sZW5ndGgsdj1nKyhhPD1jPyIwLiIrcy5jYWxsKGQsYy1hKSt2OnYuc2xpY2UoMCxhLWMpKyIuIit2LnNsaWNlKGEtYykpKTp2PWcrdix2fX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoIm51bWJlciIhPXR5cGVvZiB0JiYiTnVtYmVyIiE9aSh0KSl0aHJvdyBUeXBlRXJyb3IoZSk7cmV0dXJuK3R9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMzgpLHI9bigzNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVN0cmluZyhyKHRoaXMpKSxuPSIiLG89aSh0KTtpZihvPDB8fG89PTEvMCl0aHJvdyBSYW5nZUVycm9yKCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZSIpO2Zvcig7bz4wOyhvPj4+PTEpJiYoZSs9ZSkpMSZvJiYobis9ZSk7cmV0dXJuIG59fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDcpLG89big4OSkscz0xLi50b1ByZWNpc2lvbjtpKGkuUCtpLkYqKHIoZnVuY3Rpb24oKXtyZXR1cm4iMSIhPT1zLmNhbGwoMSx2b2lkIDApfSl8fCFyKGZ1bmN0aW9uKCl7cy5jYWxsKHt9KX0pKSwiTnVtYmVyIix7dG9QcmVjaXNpb246ZnVuY3Rpb24odCl7dmFyIGU9byh0aGlzLCJOdW1iZXIjdG9QcmVjaXNpb246IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiB2b2lkIDA9PT10P3MuY2FsbChlKTpzLmNhbGwoZSx0KX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk51bWJlciIse0VQU0lMT046TWF0aC5wb3coMiwtNTIpfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9big0KS5pc0Zpbml0ZTtpKGkuUywiTnVtYmVyIix7aXNGaW5pdGU6ZnVuY3Rpb24odCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0JiZyKHQpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTnVtYmVyIix7aXNJbnRlZ2VyOm4oOTUpfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKSxyPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiFpKHQpJiZpc0Zpbml0ZSh0KSYmcih0KT09PXR9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTnVtYmVyIix7aXNOYU46ZnVuY3Rpb24odCl7cmV0dXJuIHQhPXR9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9big5NSksbz1NYXRoLmFicztpKGkuUywiTnVtYmVyIix7aXNTYWZlSW50ZWdlcjpmdW5jdGlvbih0KXtyZXR1cm4gcih0KSYmbyh0KTw9OTAwNzE5OTI1NDc0MDk5MX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk51bWJlciIse01BWF9TQUZFX0lOVEVHRVI6OTAwNzE5OTI1NDc0MDk5MX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTnVtYmVyIix7TUlOX1NBRkVfSU5URUdFUjotOTAwNzE5OTI1NDc0MDk5MX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oODUpO2koaS5TK2kuRiooTnVtYmVyLnBhcnNlRmxvYXQhPXIpLCJOdW1iZXIiLHtwYXJzZUZsb2F0OnJ9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDgxKTtpKGkuUytpLkYqKE51bWJlci5wYXJzZUludCE9ciksIk51bWJlciIse3BhcnNlSW50OnJ9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDEwMyksbz1NYXRoLnNxcnQscz1NYXRoLmFjb3NoO2koaS5TK2kuRiohKHMmJjcxMD09TWF0aC5mbG9vcihzKE51bWJlci5NQVhfVkFMVUUpKSYmcygxLzApPT0xLzApLCJNYXRoIix7YWNvc2g6ZnVuY3Rpb24odCl7cmV0dXJuKHQ9K3QpPDE/TmFOOnQ+OTQ5MDYyNjUuNjI0MjUxNTY/TWF0aC5sb2codCkrTWF0aC5MTjI6cih0LTErbyh0LTEpKm8odCsxKSl9fSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPU1hdGgubG9nMXB8fGZ1bmN0aW9uKHQpe3JldHVybih0PSt0KT4tMWUtOCYmdDwxZS04P3QtdCp0LzI6TWF0aC5sb2coMSt0KX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiBpc0Zpbml0ZSh0PSt0KSYmMCE9dD90PDA/LWkoLXQpOk1hdGgubG9nKHQrTWF0aC5zcXJ0KHQqdCsxKSk6dH12YXIgcj1uKDgpLG89TWF0aC5hc2luaDtyKHIuUytyLkYqIShvJiYxL28oMCk+MCksIk1hdGgiLHthc2luaDppfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9TWF0aC5hdGFuaDtpKGkuUytpLkYqIShyJiYxL3IoLTApPDApLCJNYXRoIix7YXRhbmg6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PSh0PSt0KT90Ok1hdGgubG9nKCgxK3QpLygxLXQpKS8yfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMTA3KTtpKGkuUywiTWF0aCIse2NicnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHIodD0rdCkqTWF0aC5wb3coTWF0aC5hYnModCksMS8zKX19KX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9TWF0aC5zaWdufHxmdW5jdGlvbih0KXtyZXR1cm4gMD09KHQ9K3QpfHx0IT10P3Q6dDwwPy0xOjF9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse2NsejMyOmZ1bmN0aW9uKHQpe3JldHVybih0Pj4+PTApPzMxLU1hdGguZmxvb3IoTWF0aC5sb2codCsuNSkqTWF0aC5MT0cyRSk6MzJ9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9TWF0aC5leHA7aShpLlMsIk1hdGgiLHtjb3NoOmZ1bmN0aW9uKHQpe3JldHVybihyKHQ9K3QpK3IoLXQpKS8yfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMTExKTtpKGkuUytpLkYqKHIhPU1hdGguZXhwbTEpLCJNYXRoIix7ZXhwbTE6cn0pfSxmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGguZXhwbTE7dC5leHBvcnRzPSFufHxuKDEwKT4yMjAyNS40NjU3OTQ4MDY3MTh8fG4oMTApPDIyMDI1LjQ2NTc5NDgwNjcxOHx8bigtMmUtMTcpIT0tMmUtMTc/ZnVuY3Rpb24odCl7cmV0dXJuIDA9PSh0PSt0KT90OnQ+LTFlLTYmJnQ8MWUtNj90K3QqdC8yOk1hdGguZXhwKHQpLTF9Om59LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJNYXRoIix7ZnJvdW5kOm4oMTEzKX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMDcpLHI9TWF0aC5wb3csbz1yKDIsLTUyKSxzPXIoMiwtMjMpLGE9cigyLDEyNykqKDItcyksbD1yKDIsLTEyNiksYz1mdW5jdGlvbih0KXtyZXR1cm4gdCsxL28tMS9vfTt0LmV4cG9ydHM9TWF0aC5mcm91bmR8fGZ1bmN0aW9uKHQpe3ZhciBlLG4scj1NYXRoLmFicyh0KSx1PWkodCk7cmV0dXJuIHI8bD91KmMoci9sL3MpKmwqczooZT0oMStzL28pKnIsbj1lLShlLXIpLG4+YXx8biE9bj91KigxLzApOnUqbil9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPU1hdGguYWJzO2koaS5TLCJNYXRoIix7aHlwb3Q6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4saSxvPTAscz0wLGE9YXJndW1lbnRzLmxlbmd0aCxsPTA7czxhOyluPXIoYXJndW1lbnRzW3MrK10pLGw8bj8oaT1sL24sbz1vKmkqaSsxLGw9bik6bj4wPyhpPW4vbCxvKz1pKmkpOm8rPW47cmV0dXJuIGw9PT0xLzA/MS8wOmwqTWF0aC5zcXJ0KG8pfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPU1hdGguaW11bDtpKGkuUytpLkYqbig3KShmdW5jdGlvbigpe3JldHVybiByKDQyOTQ5NjcyOTUsNSkhPS01fHwyIT1yLmxlbmd0aH0pLCJNYXRoIix7aW11bDpmdW5jdGlvbih0LGUpe3ZhciBuPTY1NTM1LGk9K3Qscj0rZSxvPW4maSxzPW4mcjtyZXR1cm4gMHxvKnMrKChuJmk+Pj4xNikqcytvKihuJnI+Pj4xNik8PDE2Pj4+MCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJNYXRoIix7bG9nMTA6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpKk1hdGguTE9HMTBFfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse2xvZzFwOm4oMTAzKX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse2xvZzI6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpL01hdGguTE4yfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse3NpZ246bigxMDcpfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9bigxMTEpLG89TWF0aC5leHA7aShpLlMraS5GKm4oNykoZnVuY3Rpb24oKXtyZXR1cm4hTWF0aC5zaW5oKC0yZS0xNykhPS0yZS0xN30pLCJNYXRoIix7c2luaDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5hYnModD0rdCk8MT8ocih0KS1yKC10KSkvMjoobyh0LTEpLW8oLXQtMSkpKihNYXRoLkUvMil9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9bigxMTEpLG89TWF0aC5leHA7aShpLlMsIk1hdGgiLHt0YW5oOmZ1bmN0aW9uKHQpe3ZhciBlPXIodD0rdCksbj1yKC10KTtyZXR1cm4gZT09MS8wPzE6bj09MS8wPy0xOihlLW4pLyhvKHQpK28oLXQpKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk1hdGgiLHt0cnVuYzpmdW5jdGlvbih0KXtyZXR1cm4odD4wP01hdGguZmxvb3I6TWF0aC5jZWlsKSh0KX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDM5KSxvPVN0cmluZy5mcm9tQ2hhckNvZGUscz1TdHJpbmcuZnJvbUNvZGVQb2ludDtpKGkuUytpLkYqKCEhcyYmMSE9cy5sZW5ndGgpLCJTdHJpbmciLHtmcm9tQ29kZVBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPVtdLGk9YXJndW1lbnRzLmxlbmd0aCxzPTA7aT5zOyl7aWYoZT0rYXJndW1lbnRzW3MrK10scihlLDExMTQxMTEpIT09ZSl0aHJvdyBSYW5nZUVycm9yKGUrIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50Iik7bi5wdXNoKGU8NjU1MzY/byhlKTpvKCgoZS09NjU1MzYpPj4xMCkrNTUyOTYsZSUxMDI0KzU2MzIwKSl9cmV0dXJuIG4uam9pbigiIil9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9bigzMiksbz1uKDM3KTtpKGkuUywiU3RyaW5nIix7cmF3OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1yKHQucmF3KSxuPW8oZS5sZW5ndGgpLGk9YXJndW1lbnRzLmxlbmd0aCxzPVtdLGE9MDtuPmE7KXMucHVzaChTdHJpbmcoZVthKytdKSksYTxpJiZzLnB1c2goU3RyaW5nKGFyZ3VtZW50c1thXSkpO3JldHVybiBzLmpvaW4oIiIpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24oODIpKCJ0cmltIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLDMpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTI3KSghMCk7bigxMjgpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbih0KXt0aGlzLl90PVN0cmluZyh0KSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl90LG49dGhpcy5faTtyZXR1cm4gbj49ZS5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfToodD1pKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDM4KSxyPW4oMzUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgbyxzLGE9U3RyaW5nKHIoZSkpLGw9aShuKSxjPWEubGVuZ3RoO3JldHVybiBsPDB8fGw+PWM/dD8iIjp2b2lkIDA6KG89YS5jaGFyQ29kZUF0KGwpLG88NTUyOTZ8fG8+NTYzMTl8fGwrMT09PWN8fChzPWEuY2hhckNvZGVBdChsKzEpKTw1NjMyMHx8cz41NzM0Mz90P2EuY2hhckF0KGwpOm86dD9hLnNsaWNlKGwsbCsyKTooby01NTI5Njw8MTApKyhzLTU2MzIwKSs2NTUzNil9fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDI4KSxyPW4oOCksbz1uKDE4KSxzPW4oMTApLGE9big1KSxsPW4oMTI5KSxjPW4oMTMwKSx1PW4oMjQpLGQ9big1OCksaD1uKDI1KSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGY9IkBAaXRlcmF0b3IiLG09ImtleXMiLF89InZhbHVlcyIsZz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sdix5LGIsdyl7YyhuLGUsdik7dmFyIE0sUyxULGs9ZnVuY3Rpb24odCl7aWYoIXAmJnQgaW4gRSlyZXR1cm4gRVt0XTtzd2l0Y2godCl7Y2FzZSBtOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfTtjYXNlIF86cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX0sTD1lKyIgSXRlcmF0b3IiLHg9eT09XyxBPSExLEU9dC5wcm90b3R5cGUsRD1FW2hdfHxFW2ZdfHx5JiZFW3ldLEM9RHx8ayh5KSxZPXk/eD9rKCJlbnRyaWVzIik6Qzp2b2lkIDAsTz0iQXJyYXkiPT1lP0UuZW50cmllc3x8RDpEO2lmKE8mJihUPWQoTy5jYWxsKG5ldyB0KSksVCE9PU9iamVjdC5wcm90b3R5cGUmJlQubmV4dCYmKHUoVCxMLCEwKSxpfHxhKFQsaCl8fHMoVCxoLGcpKSkseCYmRCYmRC5uYW1lIT09XyYmKEE9ITAsQz1mdW5jdGlvbigpe3JldHVybiBELmNhbGwodGhpcyl9KSxpJiYhd3x8IXAmJiFBJiZFW2hdfHxzKEUsaCxDKSxsW2VdPUMsbFtMXT1nLHkpaWYoTT17dmFsdWVzOng/QzprKF8pLGtleXM6Yj9DOmsobSksZW50cmllczpZfSx3KWZvcihTIGluIE0pUyBpbiBFfHxvKEUsUyxNW1NdKTtlbHNlIHIoci5QK3IuRioocHx8QSksZSxNKTtyZXR1cm4gTX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXt9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oNDUpLHI9bigxNyksbz1uKDI0KSxzPXt9O24oMTApKHMsbigyNSkoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9aShzLHtuZXh0OnIoMSxuKX0pLG8odCxlKyIgSXRlcmF0b3IiKX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTI3KSghMSk7aShpLlAsIlN0cmluZyIse2NvZGVQb2ludEF0OmZ1bmN0aW9uKHQpe3JldHVybiByKHRoaXMsdCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzcpLG89bigxMzMpLHM9ImVuZHNXaXRoIixhPSIiW3NdO2koaS5QK2kuRipuKDEzNSkocyksIlN0cmluZyIse2VuZHNXaXRoOmZ1bmN0aW9uKHQpe3ZhciBlPW8odGhpcyx0LHMpLG49YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsaT1yKGUubGVuZ3RoKSxsPXZvaWQgMD09PW4/aTpNYXRoLm1pbihyKG4pLGkpLGM9U3RyaW5nKHQpO3JldHVybiBhP2EuY2FsbChlLGMsbCk6ZS5zbGljZShsLWMubGVuZ3RoLGwpPT09Y319KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTM0KSxyPW4oMzUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYoaShlKSl0aHJvdyBUeXBlRXJyb3IoIlN0cmluZyMiK24rIiBkb2Vzbid0IGFjY2VwdCByZWdleCEiKTtyZXR1cm4gU3RyaW5nKHIodCkpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTMpLHI9bigzNCksbz1uKDI1KSgibWF0Y2giKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGkodCkmJih2b2lkIDAhPT0oZT10W29dKT8hIWU6IlJlZ0V4cCI9PXIodCkpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMjUpKCJtYXRjaCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT0vLi87dHJ5eyIvLi8iW3RdKGUpfWNhdGNoKG4pe3RyeXtyZXR1cm4gZVtpXT0hMSwhIi8uLyJbdF0oZSl9Y2F0Y2gocil7fX1yZXR1cm4hMH19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTMzKSxvPSJpbmNsdWRlcyI7aShpLlAraS5GKm4oMTM1KShvKSwiU3RyaW5nIix7aW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuISF+cih0aGlzLHQsbykuaW5kZXhPZih0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlAsIlN0cmluZyIse3JlcGVhdDpuKDkwKX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDM3KSxvPW4oMTMzKSxzPSJzdGFydHNXaXRoIixhPSIiW3NdO2koaS5QK2kuRipuKDEzNSkocyksIlN0cmluZyIse3N0YXJ0c1dpdGg6ZnVuY3Rpb24odCl7dmFyIGU9byh0aGlzLHQscyksbj1yKE1hdGgubWluKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLGUubGVuZ3RoKSksaT1TdHJpbmcodCk7cmV0dXJuIGE/YS5jYWxsKGUsaSxuKTplLnNsaWNlKG4sbitpLmxlbmd0aCk9PT1pfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24oMTQwKSgiYW5jaG9yIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQodGhpcywiYSIsIm5hbWUiLGUpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oNyksbz1uKDM1KSxzPS8iL2csYT1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1TdHJpbmcobyh0KSksYT0iPCIrZTtyZXR1cm4iIiE9PW4mJihhKz0iICIrbisnPSInK1N0cmluZyhpKS5yZXBsYWNlKHMsIiZxdW90OyIpKyciJyksYSsiPiIrcisiPC8iK2UrIj4ifTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtuW3RdPWUoYSksaShpLlAraS5GKnIoZnVuY3Rpb24oKXt2YXIgZT0iIlt0XSgnIicpO3JldHVybiBlIT09ZS50b0xvd2VyQ2FzZSgpfHxlLnNwbGl0KCciJykubGVuZ3RoPjN9KSwiU3RyaW5nIixuKX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJiaWciLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsImJpZyIsIiIsIiIpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24oMTQwKSgiYmxpbmsiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsImJsaW5rIiwiIiwiIil9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJib2xkIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLCJiIiwiIiwiIil9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJmaXhlZCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcywidHQiLCIiLCIiKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDE0MCkoImZvbnRjb2xvciIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KHRoaXMsImZvbnQiLCJjb2xvciIsZSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJmb250c2l6ZSIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KHRoaXMsImZvbnQiLCJzaXplIixlKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDE0MCkoIml0YWxpY3MiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsImkiLCIiLCIiKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDE0MCkoImxpbmsiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdCh0aGlzLCJhIiwiaHJlZiIsZSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJzbWFsbCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcywic21hbGwiLCIiLCIiKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDE0MCkoInN0cmlrZSIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcywic3RyaWtlIiwiIiwiIil9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bigxNDApKCJzdWIiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsInN1YiIsIiIsIiIpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24oMTQwKSgic3VwIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLCJzdXAiLCIiLCIiKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIkRhdGUiLHtub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9big1Nyksbz1uKDE2KTtpKGkuUCtpLkYqbig3KShmdW5jdGlvbigpe3JldHVybiBudWxsIT09bmV3IERhdGUoTmFOKS50b0pTT04oKXx8MSE9PURhdGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHt0b0lTT1N0cmluZzpmdW5jdGlvbigpe3JldHVybiAxfX0pfSksIkRhdGUiLHt0b0pTT046ZnVuY3Rpb24odCl7dmFyIGU9cih0aGlzKSxuPW8oZSk7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBufHxpc0Zpbml0ZShuKT9lLnRvSVNPU3RyaW5nKCk6bnVsbH19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDE1Nik7aShpLlAraS5GKihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PXIpLCJEYXRlIix7dG9JU09TdHJpbmc6cn0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oNykscj1EYXRlLnByb3RvdHlwZS5nZXRUaW1lLG89RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcscz1mdW5jdGlvbih0KXsKCXJldHVybiB0Pjk/dDoiMCIrdH07dC5leHBvcnRzPWkoZnVuY3Rpb24oKXtyZXR1cm4iMDM4NS0wNy0yNVQwNzowNjozOS45OTlaIiE9by5jYWxsKG5ldyBEYXRlKC01ZTEzLTEpKX0pfHwhaShmdW5jdGlvbigpe28uY2FsbChuZXcgRGF0ZShOYU4pKX0pP2Z1bmN0aW9uKCl7aWYoIWlzRmluaXRlKHIuY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcigiSW52YWxpZCB0aW1lIHZhbHVlIik7dmFyIHQ9dGhpcyxlPXQuZ2V0VVRDRnVsbFllYXIoKSxuPXQuZ2V0VVRDTWlsbGlzZWNvbmRzKCksaT1lPDA/Ii0iOmU+OTk5OT8iKyI6IiI7cmV0dXJuIGkrKCIwMDAwMCIrTWF0aC5hYnMoZSkpLnNsaWNlKGk/LTY6LTQpKyItIitzKHQuZ2V0VVRDTW9udGgoKSsxKSsiLSIrcyh0LmdldFVUQ0RhdGUoKSkrIlQiK3ModC5nZXRVVENIb3VycygpKSsiOiIrcyh0LmdldFVUQ01pbnV0ZXMoKSkrIjoiK3ModC5nZXRVVENTZWNvbmRzKCkpKyIuIisobj45OT9uOiIwIitzKG4pKSsiWiJ9Om99LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1EYXRlLnByb3RvdHlwZSxyPSJJbnZhbGlkIERhdGUiLG89InRvU3RyaW5nIixzPWlbb10sYT1pLmdldFRpbWU7bmV3IERhdGUoTmFOKSsiIiE9ciYmbigxOCkoaSxvLGZ1bmN0aW9uKCl7dmFyIHQ9YS5jYWxsKHRoaXMpO3JldHVybiB0PT09dD9zLmNhbGwodGhpcyk6cn0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyNSkoInRvUHJpbWl0aXZlIikscj1EYXRlLnByb3RvdHlwZTtpIGluIHJ8fG4oMTApKHIsaSxuKDE1OSkpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTIpLHI9bigxNiksbz0ibnVtYmVyIjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoInN0cmluZyIhPT10JiZ0IT09byYmImRlZmF1bHQiIT09dCl0aHJvdyBUeXBlRXJyb3IoIkluY29ycmVjdCBoaW50Iik7cmV0dXJuIHIoaSh0aGlzKSx0IT1vKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJBcnJheSIse2lzQXJyYXk6big0NCl9KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDIwKSxyPW4oOCksbz1uKDU3KSxzPW4oMTYyKSxhPW4oMTYzKSxsPW4oMzcpLGM9bigxNjQpLHU9bigxNjUpO3Ioci5TK3IuRiohbigxNjYpKGZ1bmN0aW9uKHQpe0FycmF5LmZyb20odCl9KSwiQXJyYXkiLHtmcm9tOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixkLGg9byh0KSxwPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXksZj1hcmd1bWVudHMubGVuZ3RoLG09Zj4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsXz12b2lkIDAhPT1tLGc9MCx2PXUoaCk7aWYoXyYmKG09aShtLGY+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PXZ8fHA9PUFycmF5JiZhKHYpKWZvcihlPWwoaC5sZW5ndGgpLG49bmV3IHAoZSk7ZT5nO2crKyljKG4sZyxfP20oaFtnXSxnKTpoW2ddKTtlbHNlIGZvcihkPXYuY2FsbChoKSxuPW5ldyBwOyEocj1kLm5leHQoKSkuZG9uZTtnKyspYyhuLGcsXz9zKGQsbSxbci52YWx1ZSxnXSwhMCk6ci52YWx1ZSk7cmV0dXJuIG4ubGVuZ3RoPWcsbn19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixyKXt0cnl7cmV0dXJuIHI/ZShpKG4pWzBdLG5bMV0pOmUobil9Y2F0Y2gobyl7dmFyIHM9dFsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmaShzLmNhbGwodCkpLG99fX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTI5KSxyPW4oMjUpKCJpdGVyYXRvciIpLG89QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKGkuQXJyYXk9PT10fHxvW3JdPT09dCl9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTEpLHI9bigxNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtlIGluIHQ/aS5mKHQsZSxyKDAsbikpOnRbZV09bn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDc0KSxyPW4oMjUpKCJpdGVyYXRvciIpLG89bigxMjkpO3QuZXhwb3J0cz1uKDkpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtyXXx8dFsiQEBpdGVyYXRvciJdfHxvW2kodCldfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMjUpKCJpdGVyYXRvciIpLHI9ITE7dHJ5e3ZhciBvPVs3XVtpXSgpO29bInJldHVybiJdPWZ1bmN0aW9uKCl7cj0hMH0sQXJyYXkuZnJvbShvLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHMpe310LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighZSYmIXIpcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBvPVs3XSxzPW9baV0oKTtzLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX0sb1tpXT1mdW5jdGlvbigpe3JldHVybiBzfSx0KG8pfWNhdGNoKGEpe31yZXR1cm4gbn19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTY0KTtpKGkuUytpLkYqbig3KShmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIShBcnJheS5vZi5jYWxsKHQpaW5zdGFuY2VvZiB0KX0pLCJBcnJheSIse29mOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1hcmd1bWVudHMubGVuZ3RoLG49bmV3KCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkpKGUpO2U+dDspcihuLHQsYXJndW1lbnRzW3QrK10pO3JldHVybiBuLmxlbmd0aD1lLG59fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzIpLG89W10uam9pbjtpKGkuUCtpLkYqKG4oMzMpIT1PYmplY3R8fCFuKDE2OSkobykpLCJBcnJheSIse2pvaW46ZnVuY3Rpb24odCl7cmV0dXJuIG8uY2FsbChyKHRoaXMpLHZvaWQgMD09PXQ/IiwiOnQpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0JiZpKGZ1bmN0aW9uKCl7ZT90LmNhbGwobnVsbCxmdW5jdGlvbigpe30sMSk6dC5jYWxsKG51bGwpfSl9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDQ3KSxvPW4oMzQpLHM9bigzOSksYT1uKDM3KSxsPVtdLnNsaWNlO2koaS5QK2kuRipuKDcpKGZ1bmN0aW9uKCl7ciYmbC5jYWxsKHIpfSksIkFycmF5Iix7c2xpY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj1hKHRoaXMubGVuZ3RoKSxpPW8odGhpcyk7aWYoZT12b2lkIDA9PT1lP246ZSwiQXJyYXkiPT1pKXJldHVybiBsLmNhbGwodGhpcyx0LGUpO2Zvcih2YXIgcj1zKHQsbiksYz1zKGUsbiksdT1hKGMtciksZD1BcnJheSh1KSxoPTA7aDx1O2grKylkW2hdPSJTdHJpbmciPT1pP3RoaXMuY2hhckF0KHIraCk6dGhpc1tyK2hdO3JldHVybiBkfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDIxKSxvPW4oNTcpLHM9big3KSxhPVtdLnNvcnQsbD1bMSwyLDNdO2koaS5QK2kuRioocyhmdW5jdGlvbigpe2wuc29ydCh2b2lkIDApfSl8fCFzKGZ1bmN0aW9uKCl7bC5zb3J0KG51bGwpfSl8fCFuKDE2OSkoYSkpLCJBcnJheSIse3NvcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQ/YS5jYWxsKG8odGhpcykpOmEuY2FsbChvKHRoaXMpLHIodCkpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDE3MykoMCksbz1uKDE2OSkoW10uZm9yRWFjaCwhMCk7aShpLlAraS5GKiFvLCJBcnJheSIse2ZvckVhY2g6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50c1sxXSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDIwKSxyPW4oMzMpLG89big1Nykscz1uKDM3KSxhPW4oMTc0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj0xPT10LGw9Mj09dCxjPTM9PXQsdT00PT10LGQ9Nj09dCxoPTU9PXR8fGQscD1lfHxhO3JldHVybiBmdW5jdGlvbihlLGEsZil7Zm9yKHZhciBtLF8sZz1vKGUpLHY9cihnKSx5PWkoYSxmLDMpLGI9cyh2Lmxlbmd0aCksdz0wLE09bj9wKGUsYik6bD9wKGUsMCk6dm9pZCAwO2I+dzt3KyspaWYoKGh8fHcgaW4gdikmJihtPXZbd10sXz15KG0sdyxnKSx0KSlpZihuKU1bd109XztlbHNlIGlmKF8pc3dpdGNoKHQpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIG07Y2FzZSA2OnJldHVybiB3O2Nhc2UgMjpNLnB1c2gobSl9ZWxzZSBpZih1KXJldHVybiExO3JldHVybiBkPy0xOmN8fHU/dTpNfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDE3NSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyhpKHQpKShlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKSxyPW4oNDQpLG89bigyNSkoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHIodCkmJihlPXQuY29uc3RydWN0b3IsImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUhPT1BcnJheSYmIXIoZS5wcm90b3R5cGUpfHwoZT12b2lkIDApLGkoZSkmJihlPWVbb10sbnVsbD09PWUmJihlPXZvaWQgMCkpKSx2b2lkIDA9PT1lP0FycmF5OmV9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDE3MykoMSk7aShpLlAraS5GKiFuKDE2OSkoW10ubWFwLCEwKSwiQXJyYXkiLHttYXA6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50c1sxXSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTczKSgyKTtpKGkuUCtpLkYqIW4oMTY5KShbXS5maWx0ZXIsITApLCJBcnJheSIse2ZpbHRlcjpmdW5jdGlvbih0KXtyZXR1cm4gcih0aGlzLHQsYXJndW1lbnRzWzFdKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigxNzMpKDMpO2koaS5QK2kuRiohbigxNjkpKFtdLnNvbWUsITApLCJBcnJheSIse3NvbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50c1sxXSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTczKSg0KTtpKGkuUCtpLkYqIW4oMTY5KShbXS5ldmVyeSwhMCksIkFycmF5Iix7ZXZlcnk6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50c1sxXSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTgxKTtpKGkuUCtpLkYqIW4oMTY5KShbXS5yZWR1Y2UsITApLCJBcnJheSIse3JlZHVjZTpmdW5jdGlvbih0KXtyZXR1cm4gcih0aGlzLHQsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHNbMV0sITEpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMSkscj1uKDU3KSxvPW4oMzMpLHM9bigzNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGEsbCl7aShlKTt2YXIgYz1yKHQpLHU9byhjKSxkPXMoYy5sZW5ndGgpLGg9bD9kLTE6MCxwPWw/LTE6MTtpZihuPDIpZm9yKDs7KXtpZihoIGluIHUpe2E9dVtoXSxoKz1wO2JyZWFrfWlmKGgrPXAsbD9oPDA6ZDw9aCl0aHJvdyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKX1mb3IoO2w/aD49MDpkPmg7aCs9cCloIGluIHUmJihhPWUoYSx1W2hdLGgsYykpO3JldHVybiBhfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigxODEpO2koaS5QK2kuRiohbigxNjkpKFtdLnJlZHVjZVJpZ2h0LCEwKSwiQXJyYXkiLHtyZWR1Y2VSaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gcih0aGlzLHQsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHNbMV0sITApfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDM2KSghMSksbz1bXS5pbmRleE9mLHM9ISFvJiYxL1sxXS5pbmRleE9mKDEsLTApPDA7aShpLlAraS5GKihzfHwhbigxNjkpKG8pKSwiQXJyYXkiLHtpbmRleE9mOmZ1bmN0aW9uKHQpe3JldHVybiBzP28uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwOnIodGhpcyx0LGFyZ3VtZW50c1sxXSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzIpLG89bigzOCkscz1uKDM3KSxhPVtdLmxhc3RJbmRleE9mLGw9ISFhJiYxL1sxXS5sYXN0SW5kZXhPZigxLC0wKTwwO2koaS5QK2kuRioobHx8IW4oMTY5KShhKSksIkFycmF5Iix7bGFzdEluZGV4T2Y6ZnVuY3Rpb24odCl7aWYobClyZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA7dmFyIGU9cih0aGlzKSxuPXMoZS5sZW5ndGgpLGk9bi0xO2Zvcihhcmd1bWVudHMubGVuZ3RoPjEmJihpPU1hdGgubWluKGksbyhhcmd1bWVudHNbMV0pKSksaTwwJiYoaT1uK2kpO2k+PTA7aS0tKWlmKGkgaW4gZSYmZVtpXT09PXQpcmV0dXJuIGl8fDA7cmV0dXJuLTF9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5QLCJBcnJheSIse2NvcHlXaXRoaW46bigxODYpfSksbigxODcpKCJjb3B5V2l0aGluIil9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big1Nykscj1uKDM5KSxvPW4oMzcpO3QuZXhwb3J0cz1bXS5jb3B5V2l0aGlufHxmdW5jdGlvbih0LGUpe3ZhciBuPWkodGhpcykscz1vKG4ubGVuZ3RoKSxhPXIodCxzKSxsPXIoZSxzKSxjPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLHU9TWF0aC5taW4oKHZvaWQgMD09PWM/czpyKGMscykpLWwscy1hKSxkPTE7Zm9yKGw8YSYmYTxsK3UmJihkPS0xLGwrPXUtMSxhKz11LTEpO3UtLSA+MDspbCBpbiBuP25bYV09bltsXTpkZWxldGUgblthXSxhKz1kLGwrPWQ7cmV0dXJuIG59fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyNSkoInVuc2NvcGFibGVzIikscj1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1yW2ldJiZuKDEwKShyLGkse30pLHQuZXhwb3J0cz1mdW5jdGlvbih0KXtyW2ldW3RdPSEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlAsIkFycmF5Iix7ZmlsbDpuKDE4OSl9KSxuKDE4NykoImZpbGwiKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDU3KSxyPW4oMzkpLG89bigzNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pKHRoaXMpLG49byhlLmxlbmd0aCkscz1hcmd1bWVudHMubGVuZ3RoLGE9cihzPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxuKSxsPXM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGM9dm9pZCAwPT09bD9uOnIobCxuKTtjPmE7KWVbYSsrXT10O3JldHVybiBlfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigxNzMpKDUpLG89ImZpbmQiLHM9ITA7byBpbltdJiZBcnJheSgxKVtvXShmdW5jdGlvbigpe3M9ITF9KSxpKGkuUCtpLkYqcywiQXJyYXkiLHtmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiByKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksbigxODcpKG8pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDE3MykoNiksbz0iZmluZEluZGV4IixzPSEwO28gaW5bXSYmQXJyYXkoMSlbb10oZnVuY3Rpb24oKXtzPSExfSksaShpLlAraS5GKnMsIkFycmF5Iix7ZmluZEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiByKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksbigxODcpKG8pfSxmdW5jdGlvbih0LGUsbil7bigxOTMpKCJBcnJheSIpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oNCkscj1uKDExKSxvPW4oNikscz1uKDI1KSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1pW3RdO28mJmUmJiFlW3NdJiZyLmYoZSxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTg3KSxyPW4oMTk1KSxvPW4oMTI5KSxzPW4oMzIpO3QuZXhwb3J0cz1uKDEyOCkoQXJyYXksIkFycmF5IixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9cyh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3QsZT10aGlzLl9rLG49dGhpcy5faSsrO3JldHVybiF0fHxuPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAscigxKSk6ImtleXMiPT1lP3IoMCxuKToidmFsdWVzIj09ZT9yKDAsdFtuXSk6cigwLFtuLHRbbl1dKX0sInZhbHVlcyIpLG8uQXJndW1lbnRzPW8uQXJyYXksaSgia2V5cyIpLGkoInZhbHVlcyIpLGkoImVudHJpZXMiKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEhdH19fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0KSxyPW4oODcpLG89bigxMSkuZixzPW4oNDkpLmYsYT1uKDEzNCksbD1uKDE5NyksYz1pLlJlZ0V4cCx1PWMsZD1jLnByb3RvdHlwZSxoPS9hL2cscD0vYS9nLGY9bmV3IGMoaCkhPT1oO2lmKG4oNikmJighZnx8big3KShmdW5jdGlvbigpe3JldHVybiBwW24oMjUpKCJtYXRjaCIpXT0hMSxjKGgpIT1ofHxjKHApPT1wfHwiL2EvaSIhPWMoaCwiaSIpfSkpKXtjPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyBpbnN0YW5jZW9mIGMsaT1hKHQpLG89dm9pZCAwPT09ZTtyZXR1cm4hbiYmaSYmdC5jb25zdHJ1Y3Rvcj09PWMmJm8/dDpyKGY/bmV3IHUoaSYmIW8/dC5zb3VyY2U6dCxlKTp1KChpPXQgaW5zdGFuY2VvZiBjKT90LnNvdXJjZTp0LGkmJm8/bC5jYWxsKHQpOmUpLG4/dGhpczpkLGMpfTtmb3IodmFyIG09KGZ1bmN0aW9uKHQpe3QgaW4gY3x8byhjLHQse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdVt0XX0sc2V0OmZ1bmN0aW9uKGUpe3VbdF09ZX19KX0pLF89cyh1KSxnPTA7Xy5sZW5ndGg+ZzspbShfW2crK10pO2QuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZT1kLG4oMTgpKGksIlJlZ0V4cCIsYyl9bigxOTMpKCJSZWdFeHAiKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDEyKTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD1pKHRoaXMpLGU9IiI7cmV0dXJuIHQuZ2xvYmFsJiYoZSs9ImciKSx0Lmlnbm9yZUNhc2UmJihlKz0iaSIpLHQubXVsdGlsaW5lJiYoZSs9Im0iKSx0LnVuaWNvZGUmJihlKz0idSIpLHQuc3RpY2t5JiYoZSs9InkiKSxlfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDE5OSk7dmFyIGk9bigxMikscj1uKDE5Nyksbz1uKDYpLHM9InRvU3RyaW5nIixhPS8uL1tzXSxsPWZ1bmN0aW9uKHQpe24oMTgpKFJlZ0V4cC5wcm90b3R5cGUscyx0LCEwKX07big3KShmdW5jdGlvbigpe3JldHVybiIvYS9iIiE9YS5jYWxsKHtzb3VyY2U6ImEiLGZsYWdzOiJiIn0pfSk/bChmdW5jdGlvbigpe3ZhciB0PWkodGhpcyk7cmV0dXJuIi8iLmNvbmNhdCh0LnNvdXJjZSwiLyIsImZsYWdzImluIHQ/dC5mbGFnczohbyYmdCBpbnN0YW5jZW9mIFJlZ0V4cD9yLmNhbGwodCk6dm9pZCAwKX0pOmEubmFtZSE9cyYmbChmdW5jdGlvbigpe3JldHVybiBhLmNhbGwodGhpcyl9KX0sZnVuY3Rpb24odCxlLG4pe24oNikmJiJnIiE9Ly4vZy5mbGFncyYmbigxMSkuZihSZWdFeHAucHJvdG90eXBlLCJmbGFncyIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6bigxOTcpfSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDIwMSkoIm1hdGNoIiwxLGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm5bZnVuY3Rpb24obil7InVzZSBzdHJpY3QiO3ZhciBpPXQodGhpcykscj12b2lkIDA9PW4/dm9pZCAwOm5bZV07cmV0dXJuIHZvaWQgMCE9PXI/ci5jYWxsKG4saSk6bmV3IFJlZ0V4cChuKVtlXShTdHJpbmcoaSkpfSxuXX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTApLHI9bigxOCksbz1uKDcpLHM9bigzNSksYT1uKDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciBsPWEodCksYz1uKHMsbCwiIlt0XSksdT1jWzBdLGQ9Y1sxXTtvKGZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGVbbF09ZnVuY3Rpb24oKXtyZXR1cm4gN30sNyE9IiJbdF0oZSl9KSYmKHIoU3RyaW5nLnByb3RvdHlwZSx0LHUpLGkoUmVnRXhwLnByb3RvdHlwZSxsLDI9PWU/ZnVuY3Rpb24odCxlKXtyZXR1cm4gZC5jYWxsKHQsdGhpcyxlKX06ZnVuY3Rpb24odCl7cmV0dXJuIGQuY2FsbCh0LHRoaXMpfSkpfX0sZnVuY3Rpb24odCxlLG4pe24oMjAxKSgicmVwbGFjZSIsMixmdW5jdGlvbih0LGUsbil7cmV0dXJuW2Z1bmN0aW9uKGkscil7InVzZSBzdHJpY3QiO3ZhciBvPXQodGhpcykscz12b2lkIDA9PWk/dm9pZCAwOmlbZV07cmV0dXJuIHZvaWQgMCE9PXM/cy5jYWxsKGksbyxyKTpuLmNhbGwoU3RyaW5nKG8pLGkscil9LG5dfSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDIwMSkoInNlYXJjaCIsMSxmdW5jdGlvbih0LGUsbil7cmV0dXJuW2Z1bmN0aW9uKG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT10KHRoaXMpLHI9dm9pZCAwPT1uP3ZvaWQgMDpuW2VdO3JldHVybiB2b2lkIDAhPT1yP3IuY2FsbChuLGkpOm5ldyBSZWdFeHAobilbZV0oU3RyaW5nKGkpKX0sbl19KX0sZnVuY3Rpb24odCxlLG4pe24oMjAxKSgic3BsaXQiLDIsZnVuY3Rpb24odCxlLGkpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKDEzNCksbz1pLHM9W10ucHVzaCxhPSJzcGxpdCIsbD0ibGVuZ3RoIixjPSJsYXN0SW5kZXgiO2lmKCJjIj09ImFiYmMiW2FdKC8oYikqLylbMV18fDQhPSJ0ZXN0IlthXSgvKD86KS8sLTEpW2xdfHwyIT0iYWIiW2FdKC8oPzphYikqLylbbF18fDQhPSIuIlthXSgvKC4/KSguPykvKVtsXXx8Ii4iW2FdKC8oKSgpLylbbF0+MXx8IiJbYV0oLy4/LylbbF0pe3ZhciB1PXZvaWQgMD09PS8oKT8/Ly5leGVjKCIiKVsxXTtpPWZ1bmN0aW9uKHQsZSl7dmFyIG49U3RyaW5nKHRoaXMpO2lmKHZvaWQgMD09PXQmJjA9PT1lKXJldHVybltdO2lmKCFyKHQpKXJldHVybiBvLmNhbGwobix0LGUpO3ZhciBpLGEsZCxoLHAsZj1bXSxtPSh0Lmlnbm9yZUNhc2U/ImkiOiIiKSsodC5tdWx0aWxpbmU/Im0iOiIiKSsodC51bmljb2RlPyJ1IjoiIikrKHQuc3RpY2t5PyJ5IjoiIiksXz0wLGc9dm9pZCAwPT09ZT80Mjk0OTY3Mjk1OmU+Pj4wLHY9bmV3IFJlZ0V4cCh0LnNvdXJjZSxtKyJnIik7Zm9yKHV8fChpPW5ldyBSZWdFeHAoIl4iK3Yuc291cmNlKyIkKD8hXFxzKSIsbSkpOyhhPXYuZXhlYyhuKSkmJihkPWEuaW5kZXgrYVswXVtsXSwhKGQ+XyYmKGYucHVzaChuLnNsaWNlKF8sYS5pbmRleCkpLCF1JiZhW2xdPjEmJmFbMF0ucmVwbGFjZShpLGZ1bmN0aW9uKCl7Zm9yKHA9MTtwPGFyZ3VtZW50c1tsXS0yO3ArKyl2b2lkIDA9PT1hcmd1bWVudHNbcF0mJihhW3BdPXZvaWQgMCl9KSxhW2xdPjEmJmEuaW5kZXg8bltsXSYmcy5hcHBseShmLGEuc2xpY2UoMSkpLGg9YVswXVtsXSxfPWQsZltsXT49ZykpKTspdltjXT09PWEuaW5kZXgmJnZbY10rKztyZXR1cm4gXz09PW5bbF0/IWgmJnYudGVzdCgiIil8fGYucHVzaCgiIik6Zi5wdXNoKG4uc2xpY2UoXykpLGZbbF0+Zz9mLnNsaWNlKDAsZyk6Zn19ZWxzZSIwIlthXSh2b2lkIDAsMClbbF0mJihpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJjA9PT1lP1tdOm8uY2FsbCh0aGlzLHQsZSl9KTtyZXR1cm5bZnVuY3Rpb24obixyKXt2YXIgbz10KHRoaXMpLHM9dm9pZCAwPT1uP3ZvaWQgMDpuW2VdO3JldHVybiB2b2lkIDAhPT1zP3MuY2FsbChuLG8scik6aS5jYWxsKFN0cmluZyhvKSxuLHIpfSxpXX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpLHIsbyxzLGE9bigyOCksbD1uKDQpLGM9bigyMCksdT1uKDc0KSxkPW4oOCksaD1uKDEzKSxwPW4oMjEpLGY9bigyMDYpLG09bigyMDcpLF89bigyMDgpLGc9bigyMDkpLnNldCx2PW4oMjEwKSgpLHk9bigyMTEpLGI9bigyMTIpLHc9bigyMTMpLE09IlByb21pc2UiLFM9bC5UeXBlRXJyb3IsVD1sLnByb2Nlc3Msaz1sW01dLEw9InByb2Nlc3MiPT11KFQpLHg9ZnVuY3Rpb24oKXt9LEE9cj15LmYsRT0hIWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PWsucmVzb2x2ZSgxKSxlPSh0LmNvbnN0cnVjdG9yPXt9KVtuKDI1KSgic3BlY2llcyIpXT1mdW5jdGlvbih0KXt0KHgseCl9O3JldHVybihMfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmdC50aGVuKHgpaW5zdGFuY2VvZiBlfWNhdGNoKGkpe319KCksRD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCFoKHQpfHwiZnVuY3Rpb24iIT10eXBlb2YoZT10LnRoZW4pKSYmZX0sQz1mdW5jdGlvbih0LGUpe2lmKCF0Ll9uKXt0Ll9uPSEwO3ZhciBuPXQuX2M7dihmdW5jdGlvbigpe2Zvcih2YXIgaT10Ll92LHI9MT09dC5fcyxvPTAscz1mdW5jdGlvbihlKXt2YXIgbixvLHM9cj9lLm9rOmUuZmFpbCxhPWUucmVzb2x2ZSxsPWUucmVqZWN0LGM9ZS5kb21haW47dHJ5e3M/KHJ8fCgyPT10Ll9oJiZQKHQpLHQuX2g9MSkscz09PSEwP249aTooYyYmYy5lbnRlcigpLG49cyhpKSxjJiZjLmV4aXQoKSksbj09PWUucHJvbWlzZT9sKFMoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KG89RChuKSk/by5jYWxsKG4sYSxsKTphKG4pKTpsKGkpfWNhdGNoKHUpe2wodSl9fTtuLmxlbmd0aD5vOylzKG5bbysrXSk7dC5fYz1bXSx0Ll9uPSExLGUmJiF0Ll9oJiZZKHQpfSl9fSxZPWZ1bmN0aW9uKHQpe2cuY2FsbChsLGZ1bmN0aW9uKCl7dmFyIGUsbixpLHI9dC5fdixvPU8odCk7aWYobyYmKGU9YihmdW5jdGlvbigpe0w/VC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLHIsdCk6KG49bC5vbnVuaGFuZGxlZHJlamVjdGlvbik/bih7cHJvbWlzZTp0LHJlYXNvbjpyfSk6KGk9bC5jb25zb2xlKSYmaS5lcnJvciYmaS5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixyKX0pLHQuX2g9THx8Tyh0KT8yOjEpLHQuX2E9dm9pZCAwLG8mJmUuZSl0aHJvdyBlLnZ9KX0sTz1mdW5jdGlvbih0KXtpZigxPT10Ll9oKXJldHVybiExO2Zvcih2YXIgZSxuPXQuX2F8fHQuX2MsaT0wO24ubGVuZ3RoPmk7KWlmKGU9bltpKytdLGUuZmFpbHx8IU8oZS5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sUD1mdW5jdGlvbih0KXtnLmNhbGwobCxmdW5jdGlvbigpe3ZhciBlO0w/VC5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIix0KTooZT1sLm9ucmVqZWN0aW9uaGFuZGxlZCkmJmUoe3Byb21pc2U6dCxyZWFzb246dC5fdn0pfSl9LE49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLl9kfHwoZS5fZD0hMCxlPWUuX3d8fGUsZS5fdj10LGUuX3M9MixlLl9hfHwoZS5fYT1lLl9jLnNsaWNlKCkpLEMoZSwhMCkpfSxJPWZ1bmN0aW9uKHQpe3ZhciBlLG49dGhpcztpZighbi5fZCl7bi5fZD0hMCxuPW4uX3d8fG47dHJ5e2lmKG49PT10KXRocm93IFMoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KGU9RCh0KSk/dihmdW5jdGlvbigpe3ZhciBpPXtfdzpuLF9kOiExfTt0cnl7ZS5jYWxsKHQsYyhJLGksMSksYyhOLGksMSkpfWNhdGNoKHIpe04uY2FsbChpLHIpfX0pOihuLl92PXQsbi5fcz0xLEMobiwhMSkpfWNhdGNoKGkpe04uY2FsbCh7X3c6bixfZDohMX0saSl9fX07RXx8KGs9ZnVuY3Rpb24odCl7Zih0aGlzLGssTSwiX2giKSxwKHQpLGkuY2FsbCh0aGlzKTt0cnl7dChjKEksdGhpcywxKSxjKE4sdGhpcywxKSl9Y2F0Y2goZSl7Ti5jYWxsKHRoaXMsZSl9fSxpPWZ1bmN0aW9uKHQpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LGkucHJvdG90eXBlPW4oMjE0KShrLnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbih0LGUpe3ZhciBuPUEoXyh0aGlzLGspKTtyZXR1cm4gbi5vaz0iZnVuY3Rpb24iIT10eXBlb2YgdHx8dCxuLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUsbi5kb21haW49TD9ULmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKG4pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChuKSx0aGlzLl9zJiZDKHRoaXMsITEpLG4ucHJvbWlzZX0sImNhdGNoIjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX19KSxvPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7dGhpcy5wcm9taXNlPXQsdGhpcy5yZXNvbHZlPWMoSSx0LDEpLHRoaXMucmVqZWN0PWMoTix0LDEpfSx5LmY9QT1mdW5jdGlvbih0KXtyZXR1cm4gdD09PWt8fHQ9PT1zP25ldyBvKHQpOnIodCl9KSxkKGQuRytkLlcrZC5GKiFFLHtQcm9taXNlOmt9KSxuKDI0KShrLE0pLG4oMTkzKShNKSxzPW4oOSlbTV0sZChkLlMrZC5GKiFFLE0se3JlamVjdDpmdW5jdGlvbih0KXt2YXIgZT1BKHRoaXMpLG49ZS5yZWplY3Q7cmV0dXJuIG4odCksZS5wcm9taXNlfX0pLGQoZC5TK2QuRiooYXx8IUUpLE0se3Jlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHcoYSYmdGhpcz09PXM/azp0aGlzLHQpfX0pLGQoZC5TK2QuRiohKEUmJm4oMTY2KShmdW5jdGlvbih0KXtrLmFsbCh0KVsiY2F0Y2giXSh4KX0pKSxNLHthbGw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPUEoZSksaT1uLnJlc29sdmUscj1uLnJlamVjdCxvPWIoZnVuY3Rpb24oKXt2YXIgbj1bXSxvPTAscz0xO20odCwhMSxmdW5jdGlvbih0KXt2YXIgYT1vKyssbD0hMTtuLnB1c2godm9pZCAwKSxzKyssZS5yZXNvbHZlKHQpLnRoZW4oZnVuY3Rpb24odCl7bHx8KGw9ITAsblthXT10LC0tc3x8aShuKSl9LHIpfSksLS1zfHxpKG4pfSk7cmV0dXJuIG8uZSYmcihvLnYpLG4ucHJvbWlzZX0scmFjZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49QShlKSxpPW4ucmVqZWN0LHI9YihmdW5jdGlvbigpe20odCwhMSxmdW5jdGlvbih0KXtlLnJlc29sdmUodCkudGhlbihuLnJlc29sdmUsaSl9KX0pO3JldHVybiByLmUmJmkoci52KSxuLnByb21pc2V9fSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKCEodCBpbnN0YW5jZW9mIGUpfHx2b2lkIDAhPT1pJiZpIGluIHQpdGhyb3cgVHlwZUVycm9yKG4rIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMCkscj1uKDE2Miksbz1uKDE2Mykscz1uKDEyKSxhPW4oMzcpLGw9bigxNjUpLGM9e30sdT17fSxlPXQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixkLGgpe3ZhciBwLGYsbSxfLGc9aD9mdW5jdGlvbigpe3JldHVybiB0fTpsKHQpLHY9aShuLGQsZT8yOjEpLHk9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZyl0aHJvdyBUeXBlRXJyb3IodCsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihvKGcpKXtmb3IocD1hKHQubGVuZ3RoKTtwPnk7eSsrKWlmKF89ZT92KHMoZj10W3ldKVswXSxmWzFdKTp2KHRbeV0pLF89PT1jfHxfPT09dSlyZXR1cm4gX31lbHNlIGZvcihtPWcuY2FsbCh0KTshKGY9bS5uZXh0KCkpLmRvbmU7KWlmKF89cihtLHYsZi52YWx1ZSxlKSxfPT09Y3x8Xz09PXUpcmV0dXJuIF99O2UuQlJFQUs9YyxlLlJFVFVSTj11fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMikscj1uKDIxKSxvPW4oMjUpKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG4scz1pKHQpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1zfHx2b2lkIDA9PShuPWkocylbb10pP2U6cihuKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scz1uKDIwKSxhPW4oNzcpLGw9big0NyksYz1uKDE1KSx1PW4oNCksZD11LnByb2Nlc3MsaD11LnNldEltbWVkaWF0ZSxwPXUuY2xlYXJJbW1lZGlhdGUsZj11Lk1lc3NhZ2VDaGFubmVsLG09dS5EaXNwYXRjaCxfPTAsZz17fSx2PSJvbnJlYWR5c3RhdGVjaGFuZ2UiLHk9ZnVuY3Rpb24oKXt2YXIgdD0rdGhpcztpZihnLmhhc093blByb3BlcnR5KHQpKXt2YXIgZT1nW3RdO2RlbGV0ZSBnW3RdLGUoKX19LGI9ZnVuY3Rpb24odCl7eS5jYWxsKHQuZGF0YSl9O2gmJnB8fChoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7YXJndW1lbnRzLmxlbmd0aD5uOyllLnB1c2goYXJndW1lbnRzW24rK10pO3JldHVybiBnWysrX109ZnVuY3Rpb24oKXthKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCksZSl9LGkoXyksX30scD1mdW5jdGlvbih0KXtkZWxldGUgZ1t0XX0sInByb2Nlc3MiPT1uKDM0KShkKT9pPWZ1bmN0aW9uKHQpe2QubmV4dFRpY2socyh5LHQsMSkpfTptJiZtLm5vdz9pPWZ1bmN0aW9uKHQpe20ubm93KHMoeSx0LDEpKX06Zj8ocj1uZXcgZixvPXIucG9ydDIsci5wb3J0MS5vbm1lc3NhZ2U9YixpPXMoby5wb3N0TWVzc2FnZSxvLDEpKTp1LmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIXUuaW1wb3J0U2NyaXB0cz8oaT1mdW5jdGlvbih0KXt1LnBvc3RNZXNzYWdlKHQrIiIsIioiKX0sdS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixiLCExKSk6aT12IGluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKHQpe2wuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpW3ZdPWZ1bmN0aW9uKCl7bC5yZW1vdmVDaGlsZCh0aGlzKSx5LmNhbGwodCl9fTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KHMoeSx0LDEpLDApfSksdC5leHBvcnRzPXtzZXQ6aCxjbGVhcjpwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNCkscj1uKDIwOSkuc2V0LG89aS5NdXRhdGlvbk9ic2VydmVyfHxpLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIscz1pLnByb2Nlc3MsYT1pLlByb21pc2UsbD0icHJvY2VzcyI9PW4oMzQpKHMpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0LGUsbixjPWZ1bmN0aW9uKCl7dmFyIGkscjtmb3IobCYmKGk9cy5kb21haW4pJiZpLmV4aXQoKTt0Oyl7cj10LmZuLHQ9dC5uZXh0O3RyeXtyKCl9Y2F0Y2gobyl7dGhyb3cgdD9uKCk6ZT12b2lkIDAsb319ZT12b2lkIDAsaSYmaS5lbnRlcigpfTtpZihsKW49ZnVuY3Rpb24oKXtzLm5leHRUaWNrKGMpfTtlbHNlIGlmKG8pe3ZhciB1PSEwLGQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBvKGMpLm9ic2VydmUoZCx7Y2hhcmFjdGVyRGF0YTohMH0pLG49ZnVuY3Rpb24oKXtkLmRhdGE9dT0hdX19ZWxzZSBpZihhJiZhLnJlc29sdmUpe3ZhciBoPWEucmVzb2x2ZSgpO249ZnVuY3Rpb24oKXtoLnRoZW4oYyl9fWVsc2Ugbj1mdW5jdGlvbigpe3IuY2FsbChpLGMpfTtyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIHI9e2ZuOmksbmV4dDp2b2lkIDB9O2UmJihlLm5leHQ9ciksdHx8KHQ9cixuKCkpLGU9cn19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkodCl7dmFyIGUsbjt0aGlzLnByb21pc2U9bmV3IHQoZnVuY3Rpb24odCxpKXtpZih2b2lkIDAhPT1lfHx2b2lkIDAhPT1uKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTtlPXQsbj1pfSksdGhpcy5yZXNvbHZlPXIoZSksdGhpcy5yZWplY3Q9cihuKX0KCS8vIDI1LjQuMS41IE5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCgl2YXIgcj1uKDIxKTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGkodCl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJue2U6ITEsdjp0KCl9fWNhdGNoKGUpe3JldHVybntlOiEwLHY6ZX19fX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTIpLHI9bigxMyksbz1uKDIxMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoaSh0KSxyKGUpJiZlLmNvbnN0cnVjdG9yPT09dClyZXR1cm4gZTt2YXIgbj1vLmYodCkscz1uLnJlc29sdmU7cmV0dXJuIHMoZSksbi5wcm9taXNlfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByIGluIGUpaSh0LHIsZVtyXSxuKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9bigyMTYpLHI9bigyMTcpLG89Ik1hcCI7dC5leHBvcnRzPW4oMjE4KShvLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2dldDpmdW5jdGlvbih0KXt2YXIgZT1pLmdldEVudHJ5KHIodGhpcyxvKSx0KTtyZXR1cm4gZSYmZS52fSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5kZWYocih0aGlzLG8pLDA9PT10PzA6dCxlKX19LGksITApfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMTEpLmYscj1uKDQ1KSxvPW4oMjE0KSxzPW4oMjApLGE9bigyMDYpLGw9bigyMDcpLGM9bigxMjgpLHU9bigxOTUpLGQ9bigxOTMpLGg9big2KSxwPW4oMjIpLmZhc3RLZXksZj1uKDIxNyksbT1oPyJfcyI6InNpemUiLF89ZnVuY3Rpb24odCxlKXt2YXIgbixpPXAoZSk7aWYoIkYiIT09aSlyZXR1cm4gdC5faVtpXTtmb3Iobj10Ll9mO247bj1uLm4paWYobi5rPT1lKXJldHVybiBufTt0LmV4cG9ydHM9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSxuLGMpe3ZhciB1PXQoZnVuY3Rpb24odCxpKXthKHQsdSxlLCJfaSIpLHQuX3Q9ZSx0Ll9pPXIobnVsbCksdC5fZj12b2lkIDAsdC5fbD12b2lkIDAsdFttXT0wLHZvaWQgMCE9aSYmbChpLG4sdFtjXSx0KX0pO3JldHVybiBvKHUucHJvdG90eXBlLHtjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdD1mKHRoaXMsZSksbj10Ll9pLGk9dC5fZjtpO2k9aS5uKWkucj0hMCxpLnAmJihpLnA9aS5wLm49dm9pZCAwKSxkZWxldGUgbltpLmldO3QuX2Y9dC5fbD12b2lkIDAsdFttXT0wfSwiZGVsZXRlIjpmdW5jdGlvbih0KXt2YXIgbj1mKHRoaXMsZSksaT1fKG4sdCk7aWYoaSl7dmFyIHI9aS5uLG89aS5wO2RlbGV0ZSBuLl9pW2kuaV0saS5yPSEwLG8mJihvLm49ciksciYmKHIucD1vKSxuLl9mPT1pJiYobi5fZj1yKSxuLl9sPT1pJiYobi5fbD1vKSxuW21dLS19cmV0dXJuISFpfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe2YodGhpcyxlKTtmb3IodmFyIG4saT1zKHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7bj1uP24ubjp0aGlzLl9mOylmb3IoaShuLnYsbi5rLHRoaXMpO24mJm4ucjspbj1uLnB9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4hIV8oZih0aGlzLGUpLHQpfX0pLGgmJmkodS5wcm90b3R5cGUsInNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLGUpW21dfX0pLHV9LGRlZjpmdW5jdGlvbih0LGUsbil7dmFyIGkscixvPV8odCxlKTtyZXR1cm4gbz9vLnY9bjoodC5fbD1vPXtpOnI9cChlLCEwKSxrOmUsdjpuLHA6aT10Ll9sLG46dm9pZCAwLHI6ITF9LHQuX2Z8fCh0Ll9mPW8pLGkmJihpLm49byksdFttXSsrLCJGIiE9PXImJih0Ll9pW3JdPW8pKSx0fSxnZXRFbnRyeTpfLHNldFN0cm9uZzpmdW5jdGlvbih0LGUsbil7Yyh0LGUsZnVuY3Rpb24odCxuKXt0aGlzLl90PWYodCxlKSx0aGlzLl9rPW4sdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT10Ll9rLG49dC5fbDtuJiZuLnI7KW49bi5wO3JldHVybiB0Ll90JiYodC5fbD1uPW4/bi5uOnQuX3QuX2YpPyJrZXlzIj09ZT91KDAsbi5rKToidmFsdWVzIj09ZT91KDAsbi52KTp1KDAsW24uayxuLnZdKToodC5fdD12b2lkIDAsdSgxKSl9LG4/ImVudHJpZXMiOiJ2YWx1ZXMiLCFuLCEwKSxkKGUpfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEzKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighaSh0KXx8dC5fdCE9PWUpdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGli", "base64"));
  res.write(new Buffer("bGUgcmVjZWl2ZXIsICIrZSsiIHJlcXVpcmVkISIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDQpLHI9big4KSxvPW4oMTgpLHM9bigyMTQpLGE9bigyMiksbD1uKDIwNyksYz1uKDIwNiksdT1uKDEzKSxkPW4oNyksaD1uKDE2NikscD1uKDI0KSxmPW4oODcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixtLF8sZyl7dmFyIHY9aVt0XSx5PXYsYj1fPyJzZXQiOiJhZGQiLHc9eSYmeS5wcm90b3R5cGUsTT17fSxTPWZ1bmN0aW9uKHQpe3ZhciBlPXdbdF07byh3LHQsImRlbGV0ZSI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShnJiYhdSh0KSkmJmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OiJoYXMiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEoZyYmIXUodCkpJiZlLmNhbGwodGhpcywwPT09dD8wOnQpfToiZ2V0Ij09dD9mdW5jdGlvbih0KXtyZXR1cm4gZyYmIXUodCk/dm9pZCAwOmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OiJhZGQiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwodGhpcywwPT09dD8wOnQpLHRoaXN9OmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0aGlzLDA9PT10PzA6dCxuKSx0aGlzfSl9O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB5JiYoZ3x8dy5mb3JFYWNoJiYhZChmdW5jdGlvbigpeyhuZXcgeSkuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIFQ9bmV3IHksaz1UW2JdKGc/e306LTAsMSkhPVQsTD1kKGZ1bmN0aW9uKCl7VC5oYXMoMSl9KSx4PWgoZnVuY3Rpb24odCl7bmV3IHkodCl9KSxBPSFnJiZkKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyB5LGU9NTtlLS07KXRbYl0oZSxlKTtyZXR1cm4hdC5oYXMoLTApfSk7eHx8KHk9ZShmdW5jdGlvbihlLG4pe2MoZSx5LHQpO3ZhciBpPWYobmV3IHYsZSx5KTtyZXR1cm4gdm9pZCAwIT1uJiZsKG4sXyxpW2JdLGkpLGl9KSx5LnByb3RvdHlwZT13LHcuY29uc3RydWN0b3I9eSksKEx8fEEpJiYoUygiZGVsZXRlIiksUygiaGFzIiksXyYmUygiZ2V0IikpLChBfHxrKSYmUyhiKSxnJiZ3LmNsZWFyJiZkZWxldGUgdy5jbGVhcn1lbHNlIHk9bS5nZXRDb25zdHJ1Y3RvcihlLHQsXyxiKSxzKHkucHJvdG90eXBlLG4pLGEuTkVFRD0hMDtyZXR1cm4gcCh5LHQpLE1bdF09eSxyKHIuRytyLlcrci5GKih5IT12KSxNKSxnfHxtLnNldFN0cm9uZyh5LHQsXykseX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9bigyMTYpLHI9bigyMTcpLG89IlNldCI7dC5leHBvcnRzPW4oMjE4KShvLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gaS5kZWYocih0aGlzLG8pLHQ9MD09PXQ/MDp0LHQpfX0saSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGkscj1uKDE3MykoMCksbz1uKDE4KSxzPW4oMjIpLGE9big2OCksbD1uKDIyMSksYz1uKDEzKSx1PW4oNyksZD1uKDIxNyksaD0iV2Vha01hcCIscD1zLmdldFdlYWssZj1PYmplY3QuaXNFeHRlbnNpYmxlLG09bC51ZnN0b3JlLF89e30sZz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHY9e2dldDpmdW5jdGlvbih0KXtpZihjKHQpKXt2YXIgZT1wKHQpO3JldHVybiBlPT09ITA/bShkKHRoaXMsaCkpLmdldCh0KTplP2VbdGhpcy5faV06dm9pZCAwfX0sc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGwuZGVmKGQodGhpcyxoKSx0LGUpfX0seT10LmV4cG9ydHM9bigyMTgpKGgsZyx2LGwsITAsITApO3UoZnVuY3Rpb24oKXtyZXR1cm4gNyE9KG5ldyB5KS5zZXQoKE9iamVjdC5mcmVlemV8fE9iamVjdCkoXyksNykuZ2V0KF8pfSkmJihpPWwuZ2V0Q29uc3RydWN0b3IoZyxoKSxhKGkucHJvdG90eXBlLHYpLHMuTkVFRD0hMCxyKFsiZGVsZXRlIiwiaGFzIiwiZ2V0Iiwic2V0Il0sZnVuY3Rpb24odCl7dmFyIGU9eS5wcm90b3R5cGUsbj1lW3RdO28oZSx0LGZ1bmN0aW9uKGUscil7aWYoYyhlKSYmIWYoZSkpe3RoaXMuX2Z8fCh0aGlzLl9mPW5ldyBpKTt2YXIgbz10aGlzLl9mW3RdKGUscik7cmV0dXJuInNldCI9PXQ/dGhpczpvfXJldHVybiBuLmNhbGwodGhpcyxlLHIpfSl9KSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9bigyMTQpLHI9bigyMikuZ2V0V2VhayxvPW4oMTIpLHM9bigxMyksYT1uKDIwNiksbD1uKDIwNyksYz1uKDE3MyksdT1uKDUpLGQ9bigyMTcpLGg9Yyg1KSxwPWMoNiksZj0wLG09ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2x8fCh0Ll9sPW5ldyBfKX0sXz1mdW5jdGlvbigpe3RoaXMuYT1bXX0sZz1mdW5jdGlvbih0LGUpe3JldHVybiBoKHQuYSxmdW5jdGlvbih0KXtyZXR1cm4gdFswXT09PWV9KX07Xy5wcm90b3R5cGU9e2dldDpmdW5jdGlvbih0KXt2YXIgZT1nKHRoaXMsdCk7aWYoZSlyZXR1cm4gZVsxXX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhZyh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1nKHRoaXMsdCk7bj9uWzFdPWU6dGhpcy5hLnB1c2goW3QsZV0pfSwiZGVsZXRlIjpmdW5jdGlvbih0KXt2YXIgZT1wKHRoaXMuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KTtyZXR1cm5+ZSYmdGhpcy5hLnNwbGljZShlLDEpLCEhfmV9fSx0LmV4cG9ydHM9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBjPXQoZnVuY3Rpb24odCxpKXthKHQsYyxlLCJfaSIpLHQuX3Q9ZSx0Ll9pPWYrKyx0Ll9sPXZvaWQgMCx2b2lkIDAhPWkmJmwoaSxuLHRbb10sdCl9KTtyZXR1cm4gaShjLnByb3RvdHlwZSx7ImRlbGV0ZSI6ZnVuY3Rpb24odCl7aWYoIXModCkpcmV0dXJuITE7dmFyIG49cih0KTtyZXR1cm4gbj09PSEwP20oZCh0aGlzLGUpKVsiZGVsZXRlIl0odCk6biYmdShuLHRoaXMuX2kpJiZkZWxldGUgblt0aGlzLl9pXX0saGFzOmZ1bmN0aW9uKHQpe2lmKCFzKHQpKXJldHVybiExO3ZhciBuPXIodCk7cmV0dXJuIG49PT0hMD9tKGQodGhpcyxlKSkuaGFzKHQpOm4mJnUobix0aGlzLl9pKX19KSxjfSxkZWY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXIobyhlKSwhMCk7cmV0dXJuIGk9PT0hMD9tKHQpLnNldChlLG4pOmlbdC5faV09bix0fSx1ZnN0b3JlOm19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMjIxKSxyPW4oMjE3KSxvPSJXZWFrU2V0IjtuKDIxOCkobyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHthZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkuZGVmKHIodGhpcyxvKSx0LCEwKX19LGksITEsITApfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDIyNCksbz1uKDIyNSkscz1uKDEyKSxhPW4oMzkpLGw9bigzNyksYz1uKDEzKSx1PW4oNCkuQXJyYXlCdWZmZXIsZD1uKDIwOCksaD1vLkFycmF5QnVmZmVyLHA9by5EYXRhVmlldyxmPXIuQUJWJiZ1LmlzVmlldyxtPWgucHJvdG90eXBlLnNsaWNlLF89ci5WSUVXLGc9IkFycmF5QnVmZmVyIjtpKGkuRytpLlcraS5GKih1IT09aCkse0FycmF5QnVmZmVyOmh9KSxpKGkuUytpLkYqIXIuQ09OU1RSLGcse2lzVmlldzpmdW5jdGlvbih0KXtyZXR1cm4gZiYmZih0KXx8Yyh0KSYmXyBpbiB0fX0pLGkoaS5QK2kuVStpLkYqbig3KShmdW5jdGlvbigpe3JldHVybiFuZXcgaCgyKS5zbGljZSgxLHZvaWQgMCkuYnl0ZUxlbmd0aH0pLGcse3NsaWNlOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwIT09bSYmdm9pZCAwPT09ZSlyZXR1cm4gbS5jYWxsKHModGhpcyksdCk7Zm9yKHZhciBuPXModGhpcykuYnl0ZUxlbmd0aCxpPWEodCxuKSxyPWEodm9pZCAwPT09ZT9uOmUsbiksbz1uZXcoZCh0aGlzLGgpKShsKHItaSkpLGM9bmV3IHAodGhpcyksdT1uZXcgcChvKSxmPTA7aTxyOyl1LnNldFVpbnQ4KGYrKyxjLmdldFVpbnQ4KGkrKykpO3JldHVybiBvfX0pLG4oMTkzKShnKX0sZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSxyPW4oNCksbz1uKDEwKSxzPW4oMTkpLGE9cygidHlwZWRfYXJyYXkiKSxsPXMoInZpZXciKSxjPSEoIXIuQXJyYXlCdWZmZXJ8fCFyLkRhdGFWaWV3KSx1PWMsZD0wLGg9OSxwPSJJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheSIuc3BsaXQoIiwiKTtkPGg7KShpPXJbcFtkKytdXSk/KG8oaS5wcm90b3R5cGUsYSwhMCksbyhpLnByb3RvdHlwZSxsLCEwKSk6dT0hMTt0LmV4cG9ydHM9e0FCVjpjLENPTlNUUjp1LFRZUEVEOmEsVklFVzpsfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKHQsZSxuKXt2YXIgaSxyLG8scz1BcnJheShuKSxhPTgqbi1lLTEsbD0oMTw8YSktMSxjPWw+PjEsdT0yMz09PWU/eigyLC0yNCkteigyLC03Nyk6MCxkPTAsaD10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9Rih0KSx0IT10fHx0PT09aj8ocj10IT10PzE6MCxpPWwpOihpPVUoVyh0KS9CKSx0KihvPXooMiwtaSkpPDEmJihpLS0sbyo9MiksdCs9aStjPj0xP3Uvbzp1KnooMiwxLWMpLHQqbz49MiYmKGkrKyxvLz0yKSxpK2M+PWw/KHI9MCxpPWwpOmkrYz49MT8ocj0odCpvLTEpKnooMixlKSxpKz1jKToocj10KnooMixjLTEpKnooMixlKSxpPTApKTtlPj04O3NbZCsrXT0yNTUmcixyLz0yNTYsZS09OCk7Zm9yKGk9aTw8ZXxyLGErPWU7YT4wO3NbZCsrXT0yNTUmaSxpLz0yNTYsYS09OCk7cmV0dXJuIHNbLS1kXXw9MTI4Kmgsc31mdW5jdGlvbiByKHQsZSxuKXt2YXIgaSxyPTgqbi1lLTEsbz0oMTw8ciktMSxzPW8+PjEsYT1yLTcsbD1uLTEsYz10W2wtLV0sdT0xMjcmYztmb3IoYz4+PTc7YT4wO3U9MjU2KnUrdFtsXSxsLS0sYS09OCk7Zm9yKGk9dSYoMTw8LWEpLTEsdT4+PS1hLGErPWU7YT4wO2k9MjU2KmkrdFtsXSxsLS0sYS09OCk7aWYoMD09PXUpdT0xLXM7ZWxzZXtpZih1PT09bylyZXR1cm4gaT9OYU46Yz8tajpqO2krPXooMixlKSx1LT1zfXJldHVybihjPy0xOjEpKmkqeigyLHUtZSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdFszXTw8MjR8dFsyXTw8MTZ8dFsxXTw8OHx0WzBdfWZ1bmN0aW9uIHModCl7cmV0dXJuWzI1NSZ0XX1mdW5jdGlvbiBhKHQpe3JldHVyblsyNTUmdCx0Pj44JjI1NV19ZnVuY3Rpb24gbCh0KXtyZXR1cm5bMjU1JnQsdD4+OCYyNTUsdD4+MTYmMjU1LHQ+PjI0JjI1NV19ZnVuY3Rpb24gYyh0KXtyZXR1cm4gaSh0LDUyLDgpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIGkodCwyMyw0KX1mdW5jdGlvbiBkKHQsZSxuKXtMKHRbQ10sZSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbbl19fSl9ZnVuY3Rpb24gaCh0LGUsbixpKXt2YXIgcj0rbixvPVQocik7aWYobytlPnRbS10pdGhyb3cgUihPKTt2YXIgcz10W0ddLl9iLGE9byt0W0pdLGw9cy5zbGljZShhLGErZSk7cmV0dXJuIGk/bDpsLnJldmVyc2UoKX1mdW5jdGlvbiBwKHQsZSxuLGkscixvKXt2YXIgcz0rbixhPVQocyk7aWYoYStlPnRbS10pdGhyb3cgUihPKTtmb3IodmFyIGw9dFtHXS5fYixjPWErdFtKXSx1PWkoK3IpLGQ9MDtkPGU7ZCsrKWxbYytkXT11W28/ZDplLWQtMV19dmFyIGY9big0KSxtPW4oNiksXz1uKDI4KSxnPW4oMjI0KSx2PW4oMTApLHk9bigyMTQpLGI9big3KSx3PW4oMjA2KSxNPW4oMzgpLFM9bigzNyksVD1uKDIyNiksaz1uKDQ5KS5mLEw9bigxMSkuZix4PW4oMTg5KSxBPW4oMjQpLEU9IkFycmF5QnVmZmVyIixEPSJEYXRhVmlldyIsQz0icHJvdG90eXBlIixZPSJXcm9uZyBsZW5ndGghIixPPSJXcm9uZyBpbmRleCEiLFA9ZltFXSxOPWZbRF0sST1mLk1hdGgsUj1mLlJhbmdlRXJyb3Isaj1mLkluZmluaXR5LEg9UCxGPUkuYWJzLHo9SS5wb3csVT1JLmZsb29yLFc9SS5sb2csQj1JLkxOMixWPSJidWZmZXIiLHE9ImJ5dGVMZW5ndGgiLCQ9ImJ5dGVPZmZzZXQiLEc9bT8iX2IiOlYsSz1tPyJfbCI6cSxKPW0/Il9vIjokO2lmKGcuQUJWKXtpZighYihmdW5jdGlvbigpe1AoMSl9KXx8IWIoZnVuY3Rpb24oKXtuZXcgUCgoLTEpKX0pfHxiKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQLG5ldyBQKDEuNSksbmV3IFAoTmFOKSxQLm5hbWUhPUV9KSl7UD1mdW5jdGlvbih0KXtyZXR1cm4gdyh0aGlzLFApLG5ldyBIKFQodCkpfTtmb3IodmFyIFgsUT1QW0NdPUhbQ10sWj1rKEgpLHR0PTA7Wi5sZW5ndGg+dHQ7KShYPVpbdHQrK10paW4gUHx8dihQLFgsSFtYXSk7X3x8KFEuY29uc3RydWN0b3I9UCl9dmFyIGV0PW5ldyBOKG5ldyBQKDIpKSxudD1OW0NdLnNldEludDg7ZXQuc2V0SW50OCgwLDIxNDc0ODM2NDgpLGV0LnNldEludDgoMSwyMTQ3NDgzNjQ5KSwhZXQuZ2V0SW50OCgwKSYmZXQuZ2V0SW50OCgxKXx8eShOW0NdLHtzZXRJbnQ4OmZ1bmN0aW9uKHQsZSl7bnQuY2FsbCh0aGlzLHQsZTw8MjQ+PjI0KX0sc2V0VWludDg6ZnVuY3Rpb24odCxlKXtudC5jYWxsKHRoaXMsdCxlPDwyND4+MjQpfX0sITApfWVsc2UgUD1mdW5jdGlvbih0KXt3KHRoaXMsUCxFKTt2YXIgZT1UKHQpO3RoaXMuX2I9eC5jYWxsKEFycmF5KGUpLDApLHRoaXNbS109ZX0sTj1mdW5jdGlvbih0LGUsbil7dyh0aGlzLE4sRCksdyh0LFAsRCk7dmFyIGk9dFtLXSxyPU0oZSk7aWYocjwwfHxyPmkpdGhyb3cgUigiV3Jvbmcgb2Zmc2V0ISIpO2lmKG49dm9pZCAwPT09bj9pLXI6UyhuKSxyK24+aSl0aHJvdyBSKFkpO3RoaXNbR109dCx0aGlzW0pdPXIsdGhpc1tLXT1ufSxtJiYoZChQLHEsIl9sIiksZChOLFYsIl9iIiksZChOLHEsIl9sIiksZChOLCQsIl9vIikpLHkoTltDXSx7Z2V0SW50ODpmdW5jdGlvbih0KXtyZXR1cm4gaCh0aGlzLDEsdClbMF08PDI0Pj4yNH0sZ2V0VWludDg6ZnVuY3Rpb24odCl7cmV0dXJuIGgodGhpcywxLHQpWzBdfSxnZXRJbnQxNjpmdW5jdGlvbih0KXt2YXIgZT1oKHRoaXMsMix0LGFyZ3VtZW50c1sxXSk7cmV0dXJuKGVbMV08PDh8ZVswXSk8PDE2Pj4xNn0sZ2V0VWludDE2OmZ1bmN0aW9uKHQpe3ZhciBlPWgodGhpcywyLHQsYXJndW1lbnRzWzFdKTtyZXR1cm4gZVsxXTw8OHxlWzBdfSxnZXRJbnQzMjpmdW5jdGlvbih0KXtyZXR1cm4gbyhoKHRoaXMsNCx0LGFyZ3VtZW50c1sxXSkpfSxnZXRVaW50MzI6ZnVuY3Rpb24odCl7cmV0dXJuIG8oaCh0aGlzLDQsdCxhcmd1bWVudHNbMV0pKT4+PjB9LGdldEZsb2F0MzI6ZnVuY3Rpb24odCl7cmV0dXJuIHIoaCh0aGlzLDQsdCxhcmd1bWVudHNbMV0pLDIzLDQpfSxnZXRGbG9hdDY0OmZ1bmN0aW9uKHQpe3JldHVybiByKGgodGhpcyw4LHQsYXJndW1lbnRzWzFdKSw1Miw4KX0sc2V0SW50ODpmdW5jdGlvbih0LGUpe3AodGhpcywxLHQscyxlKX0sc2V0VWludDg6ZnVuY3Rpb24odCxlKXtwKHRoaXMsMSx0LHMsZSl9LHNldEludDE2OmZ1bmN0aW9uKHQsZSl7cCh0aGlzLDIsdCxhLGUsYXJndW1lbnRzWzJdKX0sc2V0VWludDE2OmZ1bmN0aW9uKHQsZSl7cCh0aGlzLDIsdCxhLGUsYXJndW1lbnRzWzJdKX0sc2V0SW50MzI6ZnVuY3Rpb24odCxlKXtwKHRoaXMsNCx0LGwsZSxhcmd1bWVudHNbMl0pfSxzZXRVaW50MzI6ZnVuY3Rpb24odCxlKXtwKHRoaXMsNCx0LGwsZSxhcmd1bWVudHNbMl0pfSxzZXRGbG9hdDMyOmZ1bmN0aW9uKHQsZSl7cCh0aGlzLDQsdCx1LGUsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbih0LGUpe3AodGhpcyw4LHQsYyxlLGFyZ3VtZW50c1syXSl9fSk7QShQLEUpLEEoTixEKSx2KE5bQ10sZy5WSUVXLCEwKSxlW0VdPVAsZVtEXT1OfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzOCkscj1uKDM3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gMDt2YXIgZT1pKHQpLG49cihlKTtpZihlIT09bil0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7cmV0dXJuIG59fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuRytpLlcraS5GKiFuKDIyNCkuQUJWLHtEYXRhVmlldzpuKDIyNSkuRGF0YVZpZXd9KX0sZnVuY3Rpb24odCxlLG4pe24oMjI5KSgiSW50OCIsMSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KHRoaXMsZSxuLGkpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2lmKG4oNikpe3ZhciBpPW4oMjgpLHI9big0KSxvPW4oNykscz1uKDgpLGE9bigyMjQpLGw9bigyMjUpLGM9bigyMCksdT1uKDIwNiksZD1uKDE3KSxoPW4oMTApLHA9bigyMTQpLGY9bigzOCksbT1uKDM3KSxfPW4oMjI2KSxnPW4oMzkpLHY9bigxNikseT1uKDUpLGI9big3NCksdz1uKDEzKSxNPW4oNTcpLFM9bigxNjMpLFQ9big0NSksaz1uKDU4KSxMPW4oNDkpLmYseD1uKDE2NSksQT1uKDE5KSxFPW4oMjUpLEQ9bigxNzMpLEM9bigzNiksWT1uKDIwOCksTz1uKDE5NCksUD1uKDEyOSksTj1uKDE2NiksST1uKDE5MyksUj1uKDE4OSksaj1uKDE4NiksSD1uKDExKSxGPW4oNTApLHo9SC5mLFU9Ri5mLFc9ci5SYW5nZUVycm9yLEI9ci5UeXBlRXJyb3IsVj1yLlVpbnQ4QXJyYXkscT0iQXJyYXlCdWZmZXIiLCQ9IlNoYXJlZCIrcSxHPSJCWVRFU19QRVJfRUxFTUVOVCIsSz0icHJvdG90eXBlIixKPUFycmF5W0tdLFg9bC5BcnJheUJ1ZmZlcixRPWwuRGF0YVZpZXcsWj1EKDApLHR0PUQoMiksZXQ9RCgzKSxudD1EKDQpLGl0PUQoNSkscnQ9RCg2KSxvdD1DKCEwKSxzdD1DKCExKSxhdD1PLnZhbHVlcyxsdD1PLmtleXMsY3Q9Ty5lbnRyaWVzLHV0PUoubGFzdEluZGV4T2YsZHQ9Si5yZWR1Y2UsaHQ9Si5yZWR1Y2VSaWdodCxwdD1KLmpvaW4sZnQ9Si5zb3J0LG10PUouc2xpY2UsX3Q9Si50b1N0cmluZyxndD1KLnRvTG9jYWxlU3RyaW5nLHZ0PUUoIml0ZXJhdG9yIikseXQ9RSgidG9TdHJpbmdUYWciKSxidD1BKCJ0eXBlZF9jb25zdHJ1Y3RvciIpLHd0PUEoImRlZl9jb25zdHJ1Y3RvciIpLE10PWEuQ09OU1RSLFN0PWEuVFlQRUQsVHQ9YS5WSUVXLGt0PSJXcm9uZyBsZW5ndGghIixMdD1EKDEsZnVuY3Rpb24odCxlKXtyZXR1cm4gQ3QoWSh0LHRbd3RdKSxlKX0pLHh0PW8oZnVuY3Rpb24oKXtyZXR1cm4gMT09PW5ldyBWKG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF19KSxBdD0hIVYmJiEhVltLXS5zZXQmJm8oZnVuY3Rpb24oKXtuZXcgVigxKS5zZXQoe30pfSksRXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1mKHQpO2lmKG48MHx8biVlKXRocm93IFcoIldyb25nIG9mZnNldCEiKTtyZXR1cm4gbn0sRHQ9ZnVuY3Rpb24odCl7aWYodyh0KSYmU3QgaW4gdClyZXR1cm4gdDt0aHJvdyBCKHQrIiBpcyBub3QgYSB0eXBlZCBhcnJheSEiKX0sQ3Q9ZnVuY3Rpb24odCxlKXtpZighKHcodCkmJmJ0IGluIHQpKXRocm93IEIoIkl0IGlzIG5vdCBhIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9yISIpO3JldHVybiBuZXcgdChlKX0sWXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT3QoWSh0LHRbd3RdKSxlKX0sT3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPWUubGVuZ3RoLHI9Q3QodCxpKTtpPm47KXJbbl09ZVtuKytdO3JldHVybiByfSxQdD1mdW5jdGlvbih0LGUsbil7eih0LGUse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kW25dfX0pfSxOdD1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixvLHMsYT1NKHQpLGw9YXJndW1lbnRzLmxlbmd0aCx1PWw+MT9hcmd1bWVudHNbMV06dm9pZCAwLGQ9dm9pZCAwIT09dSxoPXgoYSk7aWYodm9pZCAwIT1oJiYhUyhoKSl7Zm9yKHM9aC5jYWxsKGEpLGk9W10sZT0wOyEobz1zLm5leHQoKSkuZG9uZTtlKyspaS5wdXNoKG8udmFsdWUpO2E9aX1mb3IoZCYmbD4yJiYodT1jKHUsYXJndW1lbnRzWzJdLDIpKSxlPTAsbj1tKGEubGVuZ3RoKSxyPUN0KHRoaXMsbik7bj5lO2UrKylyW2VdPWQ/dShhW2VdLGUpOmFbZV07cmV0dXJuIHJ9LEl0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT1hcmd1bWVudHMubGVuZ3RoLG49Q3QodGhpcyxlKTtlPnQ7KW5bdF09YXJndW1lbnRzW3QrK107cmV0dXJuIG59LFJ0PSEhViYmbyhmdW5jdGlvbigpe2d0LmNhbGwobmV3IFYoMSkpfSksanQ9ZnVuY3Rpb24oKXtyZXR1cm4gZ3QuYXBwbHkoUnQ/bXQuY2FsbChEdCh0aGlzKSk6RHQodGhpcyksYXJndW1lbnRzKX0sSHQ9e2NvcHlXaXRoaW46ZnVuY3Rpb24odCxlKXtyZXR1cm4gai5jYWxsKER0KHRoaXMpLHQsZSxhcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCl9LGV2ZXJ5OmZ1bmN0aW9uKHQpe3JldHVybiBudChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmlsbDpmdW5jdGlvbih0KXtyZXR1cm4gUi5hcHBseShEdCh0aGlzKSxhcmd1bWVudHMpfSxmaWx0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIFl0KHRoaXMsdHQoRHQodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCkpfSxmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiBpdChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmluZEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiBydChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbih0KXtaKER0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmRleE9mOmZ1bmN0aW9uKHQpe3JldHVybiBzdChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuIG90KER0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxqb2luOmZ1bmN0aW9uKHQpe3JldHVybiBwdC5hcHBseShEdCh0aGlzKSxhcmd1bWVudHMpfSxsYXN0SW5kZXhPZjpmdW5jdGlvbih0KXtyZXR1cm4gdXQuYXBwbHkoRHQodGhpcyksYXJndW1lbnRzKX0sbWFwOmZ1bmN0aW9uKHQpe3JldHVybiBMdChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0scmVkdWNlOmZ1bmN0aW9uKHQpe3JldHVybiBkdC5hcHBseShEdCh0aGlzKSxhcmd1bWVudHMpfSxyZWR1Y2VSaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gaHQuYXBwbHkoRHQodGhpcyksYXJndW1lbnRzKX0scmV2ZXJzZTpmdW5jdGlvbigpe2Zvcih2YXIgdCxlPXRoaXMsbj1EdChlKS5sZW5ndGgsaT1NYXRoLmZsb29yKG4vMikscj0wO3I8aTspdD1lW3JdLGVbcisrXT1lWy0tbl0sZVtuXT10O3JldHVybiBlfSxzb21lOmZ1bmN0aW9uKHQpe3JldHVybiBldChEdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sc29ydDpmdW5jdGlvbih0KXtyZXR1cm4gZnQuY2FsbChEdCh0aGlzKSx0KX0sc3ViYXJyYXk6ZnVuY3Rpb24odCxlKXt2YXIgbj1EdCh0aGlzKSxpPW4ubGVuZ3RoLHI9Zyh0LGkpO3JldHVybiBuZXcoWShuLG5bd3RdKSkobi5idWZmZXIsbi5ieXRlT2Zmc2V0K3Iqbi5CWVRFU19QRVJfRUxFTUVOVCxtKCh2b2lkIDA9PT1lP2k6ZyhlLGkpKS1yKSl9fSxGdD1mdW5jdGlvbih0LGUpe3JldHVybiBZdCh0aGlzLG10LmNhbGwoRHQodGhpcyksdCxlKSl9LHp0PWZ1bmN0aW9uKHQpe0R0KHRoaXMpO3ZhciBlPUV0KGFyZ3VtZW50c1sxXSwxKSxuPXRoaXMubGVuZ3RoLGk9TSh0KSxyPW0oaS5sZW5ndGgpLG89MDtpZihyK2U+bil0aHJvdyBXKGt0KTtmb3IoO288cjspdGhpc1tlK29dPWlbbysrXX0sVXQ9e2VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gY3QuY2FsbChEdCh0aGlzKSl9LGtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gbHQuY2FsbChEdCh0aGlzKSl9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBhdC5jYWxsKER0KHRoaXMpKX19LFd0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHcodCkmJnRbU3RdJiYic3ltYm9sIiE9dHlwZW9mIGUmJmUgaW4gdCYmU3RyaW5nKCtlKT09U3RyaW5nKGUpfSxCdD1mdW5jdGlvbih0LGUpe3JldHVybiBXdCh0LGU9dihlLCEwKSk/ZCgyLHRbZV0pOlUodCxlKX0sVnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiEoV3QodCxlPXYoZSwhMCkpJiZ3KG4pJiZ5KG4sInZhbHVlIikpfHx5KG4sImdldCIpfHx5KG4sInNldCIpfHxuLmNvbmZpZ3VyYWJsZXx8eShuLCJ3cml0YWJsZSIpJiYhbi53cml0YWJsZXx8eShuLCJlbnVtZXJhYmxlIikmJiFuLmVudW1lcmFibGU/eih0LGUsbik6KHRbZV09bi52YWx1ZSx0KX07TXR8fChGLmY9QnQsSC5mPVZ0KSxzKHMuUytzLkYqIU10LCJPYmplY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6QnQsZGVmaW5lUHJvcGVydHk6VnR9KSxvKGZ1bmN0aW9uKCl7X3QuY2FsbCh7fSl9KSYmKF90PWd0PWZ1bmN0aW9uKCl7cmV0dXJuIHB0LmNhbGwodGhpcyl9KTt2YXIgcXQ9cCh7fSxIdCk7cChxdCxVdCksaChxdCx2dCxVdC52YWx1ZXMpLHAocXQse3NsaWNlOkZ0LHNldDp6dCxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe30sdG9TdHJpbmc6X3QsdG9Mb2NhbGVTdHJpbmc6anR9KSxQdChxdCwiYnVmZmVyIiwiYiIpLFB0KHF0LCJieXRlT2Zmc2V0IiwibyIpLFB0KHF0LCJieXRlTGVuZ3RoIiwibCIpLFB0KHF0LCJsZW5ndGgiLCJlIikseihxdCx5dCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbU3RdfX0pLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixsKXtsPSEhbDt2YXIgYz10KyhsPyJDbGFtcGVkIjoiIikrIkFycmF5IixkPSJnZXQiK3QscD0ic2V0Iit0LGY9cltjXSxnPWZ8fHt9LHY9ZiYmayhmKSx5PSFmfHwhYS5BQlYsTT17fSxTPWYmJmZbS10seD1mdW5jdGlvbih0LG4pe3ZhciBpPXQuX2Q7cmV0dXJuIGkudltkXShuKmUraS5vLHh0KX0sQT1mdW5jdGlvbih0LG4saSl7dmFyIHI9dC5fZDtsJiYoaT0oaT1NYXRoLnJvdW5kKGkpKTwwPzA6aT4yNTU/MjU1OjI1NSZpKSxyLnZbcF0obiplK3IubyxpLHh0KX0sRT1mdW5jdGlvbih0LGUpe3oodCxlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geCh0aGlzLGUpfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIEEodGhpcyxlLHQpfSxlbnVtZXJhYmxlOiEwfSl9O3k/KGY9bihmdW5jdGlvbih0LG4saSxyKXt1KHQsZixjLCJfZCIpO3ZhciBvLHMsYSxsLGQ9MCxwPTA7aWYodyhuKSl7aWYoIShuIGluc3RhbmNlb2YgWHx8KGw9YihuKSk9PXF8fGw9PSQpKXJldHVybiBTdCBpbiBuP090KGYsbik6TnQuY2FsbChmLG4pO289bixwPUV0KGksZSk7dmFyIGc9bi5ieXRlTGVuZ3RoO2lmKHZvaWQgMD09PXIpe2lmKGclZSl0aHJvdyBXKGt0KTtpZihzPWctcCxzPDApdGhyb3cgVyhrdCl9ZWxzZSBpZihzPW0ocikqZSxzK3A+Zyl0aHJvdyBXKGt0KTthPXMvZX1lbHNlIGE9XyhuKSxzPWEqZSxvPW5ldyBYKHMpO2ZvcihoKHQsIl9kIix7YjpvLG86cCxsOnMsZTphLHY6bmV3IFEobyl9KTtkPGE7KUUodCxkKyspfSksUz1mW0tdPVQocXQpLGgoUywiY29uc3RydWN0b3IiLGYpKTpvKGZ1bmN0aW9uKCl7ZigxKX0pJiZvKGZ1bmN0aW9uKCl7bmV3IGYoKC0xKSl9KSYmTihmdW5jdGlvbih0KXtuZXcgZixuZXcgZihudWxsKSxuZXcgZigxLjUpLG5ldyBmKHQpfSwhMCl8fChmPW4oZnVuY3Rpb24odCxuLGkscil7dSh0LGYsYyk7dmFyIG87cmV0dXJuIHcobik/biBpbnN0YW5jZW9mIFh8fChvPWIobikpPT1xfHxvPT0kP3ZvaWQgMCE9PXI/bmV3IGcobixFdChpLGUpLHIpOnZvaWQgMCE9PWk/bmV3IGcobixFdChpLGUpKTpuZXcgZyhuKTpTdCBpbiBuP090KGYsbik6TnQuY2FsbChmLG4pOm5ldyBnKF8obikpfSksWih2IT09RnVuY3Rpb24ucHJvdG90eXBlP0woZykuY29uY2F0KEwodikpOkwoZyksZnVuY3Rpb24odCl7dCBpbiBmfHxoKGYsdCxnW3RdKX0pLGZbS109UyxpfHwoUy5jb25zdHJ1Y3Rvcj1mKSk7dmFyIEQ9U1t2dF0sQz0hIUQmJigidmFsdWVzIj09RC5uYW1lfHx2b2lkIDA9PUQubmFtZSksWT1VdC52YWx1ZXM7aChmLGJ0LCEwKSxoKFMsU3QsYyksaChTLFR0LCEwKSxoKFMsd3QsZiksKGw/bmV3IGYoMSlbeXRdPT1jOnl0IGluIFMpfHx6KFMseXQse2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLE1bY109ZixzKHMuRytzLlcrcy5GKihmIT1nKSxNKSxzKHMuUyxjLHtCWVRFU19QRVJfRUxFTUVOVDplfSkscyhzLlMrcy5GKm8oZnVuY3Rpb24oKXtnLm9mLmNhbGwoZiwxKX0pLGMse2Zyb206TnQsb2Y6SXR9KSxHIGluIFN8fGgoUyxHLGUpLHMocy5QLGMsSHQpLEkoYykscyhzLlArcy5GKkF0LGMse3NldDp6dH0pLHMocy5QK3MuRiohQyxjLFV0KSxpfHxTLnRvU3RyaW5nPT1fdHx8KFMudG9TdHJpbmc9X3QpLHMocy5QK3MuRipvKGZ1bmN0aW9uKCl7bmV3IGYoMSkuc2xpY2UoKX0pLGMse3NsaWNlOkZ0fSkscyhzLlArcy5GKihvKGZ1bmN0aW9uKCl7cmV0dXJuWzEsMl0udG9Mb2NhbGVTdHJpbmcoKSE9bmV3IGYoWzEsMl0pLnRvTG9jYWxlU3RyaW5nKCl9KXx8IW8oZnVuY3Rpb24oKXtTLnRvTG9jYWxlU3RyaW5nLmNhbGwoWzEsMl0pfSkpLGMse3RvTG9jYWxlU3RyaW5nOmp0fSksUFtjXT1DP0Q6WSxpfHxDfHxoKFMsdnQsWSl9fWVsc2UgdC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24odCxlLG4pe24oMjI5KSgiVWludDgiLDEsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdCh0aGlzLGUsbixpKX19KX0sZnVuY3Rpb24odCxlLG4pe24oMjI5KSgiVWludDgiLDEsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdCh0aGlzLGUsbixpKX19LCEwKX0sZnVuY3Rpb24odCxlLG4pe24oMjI5KSgiSW50MTYiLDIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdCh0aGlzLGUsbixpKX19KX0sZnVuY3Rpb24odCxlLG4pe24oMjI5KSgiVWludDE2IiwyLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQodGhpcyxlLG4saSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDIyOSkoIkludDMyIiw0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQodGhpcyxlLG4saSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDIyOSkoIlVpbnQzMiIsNCxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KHRoaXMsZSxuLGkpfX0pfSxmdW5jdGlvbih0LGUsbil7bigyMjkpKCJGbG9hdDMyIiw0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQodGhpcyxlLG4saSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDIyOSkoIkZsb2F0NjQiLDgsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdCh0aGlzLGUsbixpKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDIxKSxvPW4oMTIpLHM9KG4oNCkuUmVmbGVjdHx8e30pLmFwcGx5LGE9RnVuY3Rpb24uYXBwbHk7aShpLlMraS5GKiFuKDcpKGZ1bmN0aW9uKCl7cyhmdW5jdGlvbigpe30pfSksIlJlZmxlY3QiLHthcHBseTpmdW5jdGlvbih0LGUsbil7dmFyIGk9cih0KSxsPW8obik7cmV0dXJuIHM/cyhpLGUsbCk6YS5jYWxsKGksZSxsKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDQ1KSxvPW4oMjEpLHM9bigxMiksYT1uKDEzKSxsPW4oNyksYz1uKDc2KSx1PShuKDQpLlJlZmxlY3R8fHt9KS5jb25zdHJ1Y3QsZD1sKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4hKHUoZnVuY3Rpb24oKXt9LFtdLHQpaW5zdGFuY2VvZiB0KX0pLGg9IWwoZnVuY3Rpb24oKXt1KGZ1bmN0aW9uKCl7fSl9KTtpKGkuUytpLkYqKGR8fGgpLCJSZWZsZWN0Iix7Y29uc3RydWN0OmZ1bmN0aW9uKHQsZSl7byh0KSxzKGUpO3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg8Mz90Om8oYXJndW1lbnRzWzJdKTtpZihoJiYhZClyZXR1cm4gdSh0LGUsbik7aWYodD09bil7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoZVswXSk7Y2FzZSAyOnJldHVybiBuZXcgdChlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSl9dmFyIGk9W251bGxdO3JldHVybiBpLnB1c2guYXBwbHkoaSxlKSxuZXcoYy5hcHBseSh0LGkpKX12YXIgbD1uLnByb3RvdHlwZSxwPXIoYShsKT9sOk9iamVjdC5wcm90b3R5cGUpLGY9RnVuY3Rpb24uYXBwbHkuY2FsbCh0LHAsZSk7cmV0dXJuIGEoZik/ZjpwfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMSkscj1uKDgpLG89bigxMikscz1uKDE2KTtyKHIuUytyLkYqbig3KShmdW5jdGlvbigpe1JlZmxlY3QuZGVmaW5lUHJvcGVydHkoaS5mKHt9LDEse3ZhbHVlOjF9KSwxLHt2YWx1ZToyfSl9KSwiUmVmbGVjdCIse2RlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtvKHQpLGU9cyhlLCEwKSxvKG4pO3RyeXtyZXR1cm4gaS5mKHQsZSxuKSwhMH1jYXRjaChyKXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9big1MCkuZixvPW4oMTIpO2koaS5TLCJSZWZsZWN0Iix7ZGVsZXRlUHJvcGVydHk6ZnVuY3Rpb24odCxlKXt2YXIgbj1yKG8odCksZSk7cmV0dXJuIShuJiYhbi5jb25maWd1cmFibGUpJiZkZWxldGUgdFtlXX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigxMiksbz1mdW5jdGlvbih0KXt0aGlzLl90PXIodCksdGhpcy5faT0wO3ZhciBlLG49dGhpcy5faz1bXTtmb3IoZSBpbiB0KW4ucHVzaChlKX07bigxMzApKG8sIk9iamVjdCIsZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMsbj1lLl9rO2RvIGlmKGUuX2k+PW4ubGVuZ3RoKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH07d2hpbGUoISgodD1uW2UuX2krK10paW4gZS5fdCkpO3JldHVybnt2YWx1ZTp0LGRvbmU6ITF9fSksaShpLlMsIlJlZmxlY3QiLHtlbnVtZXJhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvKHQpfX0pfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3ZhciBuLGEsdT1hcmd1bWVudHMubGVuZ3RoPDM/dDphcmd1bWVudHNbMl07cmV0dXJuIGModCk9PT11P3RbZV06KG49ci5mKHQsZSkpP3MobiwidmFsdWUiKT9uLnZhbHVlOnZvaWQgMCE9PW4uZ2V0P24uZ2V0LmNhbGwodSk6dm9pZCAwOmwoYT1vKHQpKT9pKGEsZSx1KTp2b2lkIDB9dmFyIHI9big1MCksbz1uKDU4KSxzPW4oNSksYT1uKDgpLGw9bigxMyksYz1uKDEyKTthKGEuUywiUmVmbGVjdCIse2dldDppfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDUwKSxyPW4oOCksbz1uKDEyKTtyKHIuUywiUmVmbGVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiBpLmYobyh0KSxlKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDU4KSxvPW4oMTIpO2koaS5TLCJSZWZsZWN0Iix7Z2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHIobyh0KSl9fSl9LGZ1bmN0aW9uKHQs", "base64"));
  res.write(new Buffer("ZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJSZWZsZWN0Iix7aGFzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUgaW4gdH19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDEyKSxvPU9iamVjdC5pc0V4dGVuc2libGU7aShpLlMsIlJlZmxlY3QiLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24odCl7cmV0dXJuIHIodCksIW98fG8odCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJSZWZsZWN0Iix7b3duS2V5czpuKDI0OSl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNDkpLHI9big0Miksbz1uKDEyKSxzPW4oNCkuUmVmbGVjdDt0LmV4cG9ydHM9cyYmcy5vd25LZXlzfHxmdW5jdGlvbih0KXt2YXIgZT1pLmYobyh0KSksbj1yLmY7cmV0dXJuIG4/ZS5jb25jYXQobih0KSk6ZX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpLHI9bigxMiksbz1PYmplY3QucHJldmVudEV4dGVuc2lvbnM7aShpLlMsIlJlZmxlY3QiLHtwcmV2ZW50RXh0ZW5zaW9uczpmdW5jdGlvbih0KXtyKHQpO3RyeXtyZXR1cm4gbyYmbyh0KSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt2YXIgbCxoLHA9YXJndW1lbnRzLmxlbmd0aDw0P3Q6YXJndW1lbnRzWzNdLGY9by5mKHUodCksZSk7aWYoIWYpe2lmKGQoaD1zKHQpKSlyZXR1cm4gaShoLGUsbixwKTtmPWMoMCl9cmV0dXJuIGEoZiwidmFsdWUiKT8hKGYud3JpdGFibGU9PT0hMXx8IWQocCkpJiYobD1vLmYocCxlKXx8YygwKSxsLnZhbHVlPW4sci5mKHAsZSxsKSwhMCk6dm9pZCAwIT09Zi5zZXQmJihmLnNldC5jYWxsKHAsbiksITApfXZhciByPW4oMTEpLG89big1MCkscz1uKDU4KSxhPW4oNSksbD1uKDgpLGM9bigxNyksdT1uKDEyKSxkPW4oMTMpO2wobC5TLCJSZWZsZWN0Iix7c2V0Oml9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDcyKTtyJiZpKGkuUywiUmVmbGVjdCIse3NldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQsZSl7ci5jaGVjayh0LGUpO3RyeXtyZXR1cm4gci5zZXQodCxlKSwhMH1jYXRjaChuKXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzYpKCEwKTtpKGkuUCwiQXJyYXkiLHtpbmNsdWRlczpmdW5jdGlvbih0KXtyZXR1cm4gcih0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLG4oMTg3KSgiaW5jbHVkZXMiKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigyNTUpLG89big1Nykscz1uKDM3KSxhPW4oMjEpLGw9bigxNzQpO2koaS5QLCJBcnJheSIse2ZsYXRNYXA6ZnVuY3Rpb24odCl7dmFyIGUsbixpPW8odGhpcyk7cmV0dXJuIGEodCksZT1zKGkubGVuZ3RoKSxuPWwoaSwwKSxyKG4saSxpLGUsMCwxLHQsYXJndW1lbnRzWzFdKSxufX0pLG4oMTg3KSgiZmxhdE1hcCIpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkodCxlLG4sYyx1LGQsaCxwKXtmb3IodmFyIGYsbSxfPXUsZz0wLHY9ISFoJiZhKGgscCwzKTtnPGM7KXtpZihnIGluIG4pe2lmKGY9dj92KG5bZ10sZyxlKTpuW2ddLG09ITEsbyhmKSYmKG09ZltsXSxtPXZvaWQgMCE9PW0/ISFtOnIoZikpLG0mJmQ+MClfPWkodCxlLGYscyhmLmxlbmd0aCksXyxkLTEpLTE7ZWxzZXtpZihfPj05MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcigpO3RbX109Zn1fKyt9ZysrfXJldHVybiBffXZhciByPW4oNDQpLG89bigxMykscz1uKDM3KSxhPW4oMjApLGw9bigyNSkoImlzQ29uY2F0U3ByZWFkYWJsZSIpO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDI1NSksbz1uKDU3KSxzPW4oMzcpLGE9bigzOCksbD1uKDE3NCk7aShpLlAsIkFycmF5Iix7ZmxhdHRlbjpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW8odGhpcyksbj1zKGUubGVuZ3RoKSxpPWwoZSwwKTtyZXR1cm4gcihpLGUsZSxuLDAsdm9pZCAwPT09dD8xOmEodCkpLGl9fSksbigxODcpKCJmbGF0dGVuIil9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMTI3KSghMCk7aShpLlAsIlN0cmluZyIse2F0OmZ1bmN0aW9uKHQpe3JldHVybiByKHRoaXMsdCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMjU5KTtpKGkuUCwiU3RyaW5nIix7cGFkU3RhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCEwKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzcpLHI9big5MCksbz1uKDM1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scyl7dmFyIGE9U3RyaW5nKG8odCkpLGw9YS5sZW5ndGgsYz12b2lkIDA9PT1uPyIgIjpTdHJpbmcobiksdT1pKGUpO2lmKHU8PWx8fCIiPT1jKXJldHVybiBhO3ZhciBkPXUtbCxoPXIuY2FsbChjLE1hdGguY2VpbChkL2MubGVuZ3RoKSk7cmV0dXJuIGgubGVuZ3RoPmQmJihoPWguc2xpY2UoMCxkKSkscz9oK2E6YStofX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigyNTkpO2koaS5QLCJTdHJpbmciLHtwYWRFbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIHIodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCExKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuKDgyKSgidHJpbUxlZnQiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsMSl9fSwidHJpbVN0YXJ0Iil9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7big4MikoInRyaW1SaWdodCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcywyKX19LCJ0cmltRW5kIil9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oMzUpLG89bigzNykscz1uKDEzNCksYT1uKDE5NyksbD1SZWdFeHAucHJvdG90eXBlLGM9ZnVuY3Rpb24odCxlKXt0aGlzLl9yPXQsdGhpcy5fcz1lfTtuKDEzMCkoYywiUmVnRXhwIFN0cmluZyIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yLmV4ZWModGhpcy5fcyk7cmV0dXJue3ZhbHVlOnQsZG9uZTpudWxsPT09dH19KSxpKGkuUCwiU3RyaW5nIix7bWF0Y2hBbGw6ZnVuY3Rpb24odCl7aWYocih0aGlzKSwhcyh0KSl0aHJvdyBUeXBlRXJyb3IodCsiIGlzIG5vdCBhIHJlZ2V4cCEiKTt2YXIgZT1TdHJpbmcodGhpcyksbj0iZmxhZ3MiaW4gbD9TdHJpbmcodC5mbGFncyk6YS5jYWxsKHQpLGk9bmV3IFJlZ0V4cCh0LnNvdXJjZSx+bi5pbmRleE9mKCJnIik/bjoiZyIrbik7cmV0dXJuIGkubGFzdEluZGV4PW8odC5sYXN0SW5kZXgpLG5ldyBjKGksZSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDI3KSgiYXN5bmNJdGVyYXRvciIpfSxmdW5jdGlvbih0LGUsbil7bigyNykoIm9ic2VydmFibGUiKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDI0OSksbz1uKDMyKSxzPW4oNTApLGE9bigxNjQpO2koaS5TLCJPYmplY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLGk9byh0KSxsPXMuZixjPXIoaSksdT17fSxkPTA7Yy5sZW5ndGg+ZDspbj1sKGksZT1jW2QrK10pLHZvaWQgMCE9PW4mJmEodSxlLG4pO3JldHVybiB1fX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMjY4KSghMSk7aShpLlMsIk9iamVjdCIse3ZhbHVlczpmdW5jdGlvbih0KXtyZXR1cm4gcih0KX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzApLHI9bigzMiksbz1uKDQzKS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuLHM9cihlKSxhPWkocyksbD1hLmxlbmd0aCxjPTAsdT1bXTtsPmM7KW8uY2FsbChzLG49YVtjKytdKSYmdS5wdXNoKHQ/W24sc1tuXV06c1tuXSk7cmV0dXJuIHV9fX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDI2OCkoITApO2koaS5TLCJPYmplY3QiLHtlbnRyaWVzOmZ1bmN0aW9uKHQpe3JldHVybiByKHQpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDU3KSxvPW4oMjEpLHM9bigxMSk7big2KSYmaShpLlArbigyNzEpLCJPYmplY3QiLHtfX2RlZmluZUdldHRlcl9fOmZ1bmN0aW9uKHQsZSl7cy5mKHIodGhpcyksdCx7Z2V0Om8oZSksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9bigyOCl8fCFuKDcpKGZ1bmN0aW9uKCl7dmFyIHQ9TWF0aC5yYW5kb20oKTtfX2RlZmluZVNldHRlcl9fLmNhbGwobnVsbCx0LGZ1bmN0aW9uKCl7fSksZGVsZXRlIG4oNClbdF19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9big1Nyksbz1uKDIxKSxzPW4oMTEpO24oNikmJmkoaS5QK24oMjcxKSwiT2JqZWN0Iix7X19kZWZpbmVTZXR0ZXJfXzpmdW5jdGlvbih0LGUpe3MuZihyKHRoaXMpLHQse3NldDpvKGUpLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oNTcpLG89bigxNikscz1uKDU4KSxhPW4oNTApLmY7big2KSYmaShpLlArbigyNzEpLCJPYmplY3QiLHtfX2xvb2t1cEdldHRlcl9fOmZ1bmN0aW9uKHQpe3ZhciBlLG49cih0aGlzKSxpPW8odCwhMCk7ZG8gaWYoZT1hKG4saSkpcmV0dXJuIGUuZ2V0O3doaWxlKG49cyhuKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oNTcpLG89bigxNikscz1uKDU4KSxhPW4oNTApLmY7big2KSYmaShpLlArbigyNzEpLCJPYmplY3QiLHtfX2xvb2t1cFNldHRlcl9fOmZ1bmN0aW9uKHQpe3ZhciBlLG49cih0aGlzKSxpPW8odCwhMCk7ZG8gaWYoZT1hKG4saSkpcmV0dXJuIGUuc2V0O3doaWxlKG49cyhuKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5QK2kuUiwiTWFwIix7dG9KU09OOm4oMjc2KSgiTWFwIil9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNzQpLHI9bigyNzcpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZihpKHRoaXMpIT10KXRocm93IFR5cGVFcnJvcih0KyIjdG9KU09OIGlzbid0IGdlbmVyaWMiKTtyZXR1cm4gcih0aGlzKX19fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMDcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPVtdO3JldHVybiBpKHQsITEsbi5wdXNoLG4sZSksbn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5QK2kuUiwiU2V0Iix7dG9KU09OOm4oMjc2KSgiU2V0Iil9KX0sZnVuY3Rpb24odCxlLG4pe24oMjgwKSgiTWFwIil9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aShpLlMsdCx7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpO3QtLTspZVt0XT1hcmd1bWVudHNbdF07cmV0dXJuIG5ldyB0aGlzKGUpfX0pfX0sZnVuY3Rpb24odCxlLG4pe24oMjgwKSgiU2V0Iil9LGZ1bmN0aW9uKHQsZSxuKXtuKDI4MCkoIldlYWtNYXAiKX0sZnVuY3Rpb24odCxlLG4pe24oMjgwKSgiV2Vha1NldCIpfSxmdW5jdGlvbih0LGUsbil7bigyODUpKCJNYXAiKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigyMSksbz1uKDIwKSxzPW4oMjA3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aShpLlMsdCx7ZnJvbTo=", "base64"));
  res.write(new Buffer("ZnVuY3Rpb24odCl7dmFyIGUsbixpLGEsbD1hcmd1bWVudHNbMV07cmV0dXJuIHIodGhpcyksZT12b2lkIDAhPT1sLGUmJnIobCksdm9pZCAwPT10P25ldyB0aGlzOihuPVtdLGU/KGk9MCxhPW8obCxhcmd1bWVudHNbMl0sMikscyh0LCExLGZ1bmN0aW9uKHQpe24ucHVzaChhKHQsaSsrKSl9KSk6cyh0LCExLG4ucHVzaCxuKSxuZXcgdGhpcyhuKSl9fSl9fSxmdW5jdGlvbih0LGUsbil7bigyODUpKCJTZXQiKX0sZnVuY3Rpb24odCxlLG4pe24oMjg1KSgiV2Vha01hcCIpfSxmdW5jdGlvbih0LGUsbil7bigyODUpKCJXZWFrU2V0Iil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5HLHtnbG9iYWw6big0KX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiU3lzdGVtIix7Z2xvYmFsOm4oNCl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDM0KTtpKGkuUywiRXJyb3IiLHtpc0Vycm9yOmZ1bmN0aW9uKHQpe3JldHVybiJFcnJvciI9PT1yKHQpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse2NsYW1wOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTWF0aC5taW4obixNYXRoLm1heChlLHQpKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk1hdGgiLHtERUdfUEVSX1JBRDpNYXRoLlBJLzE4MH0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPTE4MC9NYXRoLlBJO2koaS5TLCJNYXRoIix7ZGVncmVlczpmdW5jdGlvbih0KXtyZXR1cm4gdCpyfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMjk2KSxvPW4oMTEzKTtpKGkuUywiTWF0aCIse2ZzY2FsZTpmdW5jdGlvbih0LGUsbixpLHMpe3JldHVybiBvKHIodCxlLG4saSxzKSl9fSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPU1hdGguc2NhbGV8fGZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RofHx0IT10fHxlIT1lfHxuIT1ufHxpIT1pfHxyIT1yP05hTjp0PT09MS8wfHx0PT09LSgxLzApP3Q6KHQtZSkqKHItaSkvKG4tZSkraX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJNYXRoIix7aWFkZGg6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dD4+PjAsbz1lPj4+MCxzPW4+Pj4wO3JldHVybiBvKyhpPj4+MCkrKChyJnN8KHJ8cykmfihyK3M+Pj4wKSk+Pj4zMSl8MH19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk1hdGgiLHtpc3ViaDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10Pj4+MCxvPWU+Pj4wLHM9bj4+PjA7cmV0dXJuIG8tKGk+Pj4wKS0oKH5yJnN8fihyXnMpJnItcz4+PjApPj4+MzEpfDB9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDgpO2koaS5TLCJNYXRoIix7aW11bGg6ZnVuY3Rpb24odCxlKXt2YXIgbj02NTUzNSxpPSt0LHI9K2Usbz1pJm4scz1yJm4sYT1pPj4xNixsPXI+PjE2LGM9KGEqcz4+PjApKyhvKnM+Pj4xNik7cmV0dXJuIGEqbCsoYz4+MTYpKygobypsPj4+MCkrKGMmbik+PjE2KX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCk7aShpLlMsIk1hdGgiLHtSQURfUEVSX0RFRzoxODAvTWF0aC5QSX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPU1hdGguUEkvMTgwO2koaS5TLCJNYXRoIix7cmFkaWFuczpmdW5jdGlvbih0KXtyZXR1cm4gdCpyfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse3NjYWxlOm4oMjk2KX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse3VtdWxoOmZ1bmN0aW9uKHQsZSl7dmFyIG49NjU1MzUsaT0rdCxyPStlLG89aSZuLHM9ciZuLGE9aT4+PjE2LGw9cj4+PjE2LGM9KGEqcz4+PjApKyhvKnM+Pj4xNik7cmV0dXJuIGEqbCsoYz4+PjE2KSsoKG8qbD4+PjApKyhjJm4pPj4+MTYpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KTtpKGkuUywiTWF0aCIse3NpZ25iaXQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQ9K3QpIT10P3Q6MD09dD8xL3Q9PTEvMDp0PjB9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIGk9big4KSxyPW4oOSksbz1uKDQpLHM9bigyMDgpLGE9bigyMTMpO2koaS5QK2kuUiwiUHJvbWlzZSIseyJmaW5hbGx5IjpmdW5jdGlvbih0KXt2YXIgZT1zKHRoaXMsci5Qcm9taXNlfHxvLlByb21pc2UpLG49ImZ1bmN0aW9uIj09dHlwZW9mIHQ7cmV0dXJuIHRoaXMudGhlbihuP2Z1bmN0aW9uKG4pe3JldHVybiBhKGUsdCgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG59KX06dCxuP2Z1bmN0aW9uKG4pe3JldHVybiBhKGUsdCgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgbn0pfTp0KX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDgpLHI9bigyMTEpLG89bigyMTIpO2koaS5TLCJQcm9taXNlIix7InRyeSI6ZnVuY3Rpb24odCl7dmFyIGU9ci5mKHRoaXMpLG49byh0KTtyZXR1cm4obi5lP2UucmVqZWN0OmUucmVzb2x2ZSkobi52KSxlLnByb21pc2V9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDMwOCkscj1uKDEyKSxvPWkua2V5LHM9aS5zZXQ7aS5leHAoe2RlZmluZU1ldGFkYXRhOmZ1bmN0aW9uKHQsZSxuLGkpe3ModCxlLHIobiksbyhpKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDIxNSkscj1uKDgpLG89bigyMykoIm1ldGFkYXRhIikscz1vLnN0b3JlfHwoby5zdG9yZT1uZXcobigyMjApKSksYT1mdW5jdGlvbih0LGUsbil7dmFyIHI9cy5nZXQodCk7aWYoIXIpe2lmKCFuKXJldHVybjtzLnNldCh0LHI9bmV3IGkpfXZhciBvPXIuZ2V0KGUpO2lmKCFvKXtpZighbilyZXR1cm47ci5zZXQoZSxvPW5ldyBpKX1yZXR1cm4gb30sbD1mdW5jdGlvbih0LGUsbil7dmFyIGk9YShlLG4sITEpO3JldHVybiB2b2lkIDAhPT1pJiZpLmhhcyh0KX0sYz1mdW5jdGlvbih0LGUsbil7dmFyIGk9YShlLG4sITEpO3JldHVybiB2b2lkIDA9PT1pP3ZvaWQgMDppLmdldCh0KX0sdT1mdW5jdGlvbih0LGUsbixpKXthKG4saSwhMCkuc2V0KHQsZSl9LGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1hKHQsZSwhMSksaT1bXTtyZXR1cm4gbiYmbi5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aS5wdXNoKGUpfSksaX0saD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dHx8InN5bWJvbCI9PXR5cGVvZiB0P3Q6U3RyaW5nKHQpfSxwPWZ1bmN0aW9uKHQpe3Ioci5TLCJSZWZsZWN0Iix0KX07dC5leHBvcnRzPXtzdG9yZTpzLG1hcDphLGhhczpsLGdldDpjLHNldDp1LGtleXM6ZCxrZXk6aCxleHA6cH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDMwOCkscj1uKDEyKSxvPWkua2V5LHM9aS5tYXAsYT1pLnN0b3JlO2kuZXhwKHtkZWxldGVNZXRhZGF0YTpmdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6byhhcmd1bWVudHNbMl0pLGk9cyhyKGUpLG4sITEpO2lmKHZvaWQgMD09PWl8fCFpWyJkZWxldGUiXSh0KSlyZXR1cm4hMTtpZihpLnNpemUpcmV0dXJuITA7dmFyIGw9YS5nZXQoZSk7cmV0dXJuIGxbImRlbGV0ZSJdKG4pLCEhbC5zaXplfHxhWyJkZWxldGUiXShlKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzA4KSxyPW4oMTIpLG89big1OCkscz1pLmhhcyxhPWkuZ2V0LGw9aS5rZXksYz1mdW5jdGlvbih0LGUsbil7dmFyIGk9cyh0LGUsbik7aWYoaSlyZXR1cm4gYSh0LGUsbik7dmFyIHI9byhlKTtyZXR1cm4gbnVsbCE9PXI/Yyh0LHIsbik6dm9pZCAwfTtpLmV4cCh7Z2V0TWV0YWRhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0LHIoZSksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDpsKGFyZ3VtZW50c1syXSkpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMTkpLHI9bigyNzcpLG89bigzMDgpLHM9bigxMiksYT1uKDU4KSxsPW8ua2V5cyxjPW8ua2V5LHU9ZnVuY3Rpb24odCxlKXt2YXIgbj1sKHQsZSksbz1hKHQpO2lmKG51bGw9PT1vKXJldHVybiBuO3ZhciBzPXUobyxlKTtyZXR1cm4gcy5sZW5ndGg/bi5sZW5ndGg/cihuZXcgaShuLmNvbmNhdChzKSkpOnM6bn07by5leHAoe2dldE1ldGFkYXRhS2V5czpmdW5jdGlvbih0KXtyZXR1cm4gdShzKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6Yyhhcmd1bWVudHNbMV0pKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzA4KSxyPW4oMTIpLG89aS5nZXQscz1pLmtleTtpLmV4cCh7Z2V0T3duTWV0YWRhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LHIoZSksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDpzKGFyZ3VtZW50c1syXSkpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzMDgpLHI9bigxMiksbz1pLmtleXMscz1pLmtleTtpLmV4cCh7Z2V0T3duTWV0YWRhdGFLZXlzOmZ1bmN0aW9uKHQpe3JldHVybiBvKHIodCksYXJndW1lbnRzLmxlbmd0aDwyP3ZvaWQgMDpzKGFyZ3VtZW50c1sxXSkpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigzMDgpLHI9bigxMiksbz1uKDU4KSxzPWkuaGFzLGE9aS5rZXksbD1mdW5jdGlvbih0LGUsbil7dmFyIGk9cyh0LGUsbik7aWYoaSlyZXR1cm4hMDt2YXIgcj1vKGUpO3JldHVybiBudWxsIT09ciYmbCh0LHIsbil9O2kuZXhwKHtoYXNNZXRhZGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiBsKHQscihlKSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOmEoYXJndW1lbnRzWzJdKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDMwOCkscj1uKDEyKSxvPWkuaGFzLHM9aS5rZXk7aS5leHAoe2hhc093bk1ldGFkYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8odCxyKGUpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6cyhhcmd1bWVudHNbMl0pKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzA4KSxyPW4oMTIpLG89bigyMSkscz1pLmtleSxhPWkuc2V0O2kuZXhwKHttZXRhZGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuLGkpe2EodCxlLCh2b2lkIDAhPT1pP3I6bykobikscyhpKSl9fX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMjEwKSgpLG89big0KS5wcm9jZXNzLHM9InByb2Nlc3MiPT1uKDM0KShvKTtpKGkuRyx7YXNhcDpmdW5jdGlvbih0KXt2YXIgZT1zJiZvLmRvbWFpbjtyKGU/ZS5iaW5kKHQpOnQpfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oOCkscj1uKDQpLG89big5KSxzPW4oMjEwKSgpLGE9bigyNSkoIm9ic2VydmFibGUiKSxsPW4oMjEpLGM9bigxMiksdT1uKDIwNiksZD1uKDIxNCksaD1uKDEwKSxwPW4oMjA3KSxmPXAuUkVUVVJOLG09ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOmwodCl9LF89ZnVuY3Rpb24odCl7dmFyIGU9dC5fYztlJiYodC5fYz12b2lkIDAsZSgpKX0sZz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dC5fb30sdj1mdW5jdGlvbih0KXtnKHQpfHwodC5fbz12b2lkIDAsXyh0KSl9LHk9ZnVuY3Rpb24odCxlKXtjKHQpLHRoaXMuX2M9dm9pZCAwLHRoaXMuX289dCx0PW5ldyBiKHRoaXMpO3RyeXt2YXIgbj1lKHQpLGk9bjtudWxsIT1uJiYoImZ1bmN0aW9uIj09dHlwZW9mIG4udW5zdWJzY3JpYmU/bj1mdW5jdGlvbigpe2kudW5zdWJzY3JpYmUoKX06bChuKSx0aGlzLl9jPW4pfWNhdGNoKHIpe3JldHVybiB2b2lkIHQuZXJyb3Iocil9Zyh0aGlzKSYmXyh0aGlzKX07eS5wcm90b3R5cGU9ZCh7fSx7dW5zdWJzY3JpYmU6ZnVuY3Rpb24oKXt2KHRoaXMpfX0pO3ZhciBiPWZ1bmN0aW9uKHQpe3RoaXMuX3M9dH07Yi5wcm90b3R5cGU9ZCh7fSx7bmV4dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zO2lmKCFnKGUpKXt2YXIgbj1lLl9vO3RyeXt2YXIgaT1tKG4ubmV4dCk7aWYoaSlyZXR1cm4gaS5jYWxsKG4sdCl9Y2F0Y2gocil7dHJ5e3YoZSl9ZmluYWxseXt0aHJvdyByfX19fSxlcnJvcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zO2lmKGcoZSkpdGhyb3cgdDt2YXIgbj1lLl9vO2UuX289dm9pZCAwO3RyeXt2YXIgaT1tKG4uZXJyb3IpO2lmKCFpKXRocm93IHQ7dD1pLmNhbGwobix0KX1jYXRjaChyKXt0cnl7XyhlKX1maW5hbGx5e3Rocm93IHJ9fXJldHVybiBfKGUpLHR9LGNvbXBsZXRlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3M7aWYoIWcoZSkpe3ZhciBuPWUuX287ZS5fbz12b2lkIDA7dHJ5e3ZhciBpPW0obi5jb21wbGV0ZSk7dD1pP2kuY2FsbChuLHQpOnZvaWQgMH1jYXRjaChyKXt0cnl7XyhlKX1maW5hbGx5e3Rocm93IHJ9fXJldHVybiBfKGUpLHR9fX0pO3ZhciB3PWZ1bmN0aW9uKHQpe3UodGhpcyx3LCJPYnNlcnZhYmxlIiwiX2YiKS5fZj1sKHQpfTtkKHcucHJvdG90eXBlLHtzdWJzY3JpYmU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB5KHQsdGhpcy5fZil9LGZvckVhY2g6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3KG8uUHJvbWlzZXx8ci5Qcm9taXNlKShmdW5jdGlvbihuLGkpe2wodCk7dmFyIHI9ZS5zdWJzY3JpYmUoe25leHQ6ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiB0KGUpfWNhdGNoKG4pe2kobiksci51bnN1YnNjcmliZSgpfX0sZXJyb3I6aSxjb21wbGV0ZTpufSl9KX19KSxkKHcse2Zyb206ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczp3LG49bShjKHQpW2FdKTtpZihuKXt2YXIgaT1jKG4uY2FsbCh0KSk7cmV0dXJuIGkuY29uc3RydWN0b3I9PT1lP2k6bmV3IGUoZnVuY3Rpb24odCl7CglyZXR1cm4gaS5zdWJzY3JpYmUodCl9KX1yZXR1cm4gbmV3IGUoZnVuY3Rpb24oZSl7dmFyIG49ITE7cmV0dXJuIHMoZnVuY3Rpb24oKXtpZighbil7dHJ5e2lmKHAodCwhMSxmdW5jdGlvbih0KXtpZihlLm5leHQodCksbilyZXR1cm4gZn0pPT09ZilyZXR1cm59Y2F0Y2goaSl7aWYobil0aHJvdyBpO3JldHVybiB2b2lkIGUuZXJyb3IoaSl9ZS5jb21wbGV0ZSgpfX0pLGZ1bmN0aW9uKCl7bj0hMH19KX0sb2Y6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheShlKTt0PGU7KW5bdF09YXJndW1lbnRzW3QrK107cmV0dXJuIG5ldygiZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOncpKGZ1bmN0aW9uKHQpe3ZhciBlPSExO3JldHVybiBzKGZ1bmN0aW9uKCl7aWYoIWUpe2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7KytpKWlmKHQubmV4dChuW2ldKSxlKXJldHVybjt0LmNvbXBsZXRlKCl9fSksZnVuY3Rpb24oKXtlPSEwfX0pfX0pLGgody5wcm90b3R5cGUsYSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksaShpLkcse09ic2VydmFibGU6d30pLG4oMTkzKSgiT2JzZXJ2YWJsZSIpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big0KSxyPW4oOCksbz1pLm5hdmlnYXRvcixzPVtdLnNsaWNlLGE9ISFvJiYvTVNJRSAuXC4vLnRlc3Qoby51c2VyQWdlbnQpLGw9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4yLHI9ISFpJiZzLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiB0KGk/ZnVuY3Rpb24oKXsoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSkuYXBwbHkodGhpcyxyKX06ZSxuKX19O3Ioci5HK3IuQityLkYqYSx7c2V0VGltZW91dDpsKGkuc2V0VGltZW91dCksc2V0SW50ZXJ2YWw6bChpLnNldEludGVydmFsKX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big4KSxyPW4oMjA5KTtpKGkuRytpLkIse3NldEltbWVkaWF0ZTpyLnNldCxjbGVhckltbWVkaWF0ZTpyLmNsZWFyfSl9LGZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9bigxOTQpLHI9bigzMCksbz1uKDE4KSxzPW4oNCksYT1uKDEwKSxsPW4oMTI5KSxjPW4oMjUpLHU9YygiaXRlcmF0b3IiKSxkPWMoInRvU3RyaW5nVGFnIiksaD1sLkFycmF5LHA9e0NTU1J1bGVMaXN0OiEwLENTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCxUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSxmPXIocCksbT0wO208Zi5sZW5ndGg7bSsrKXt2YXIgXyxnPWZbbV0sdj1wW2ddLHk9c1tnXSxiPXkmJnkucHJvdG90eXBlO2lmKGImJihiW3VdfHxhKGIsdSxoKSxiW2RdfHxhKGIsZCxnKSxsW2ddPWgsdikpZm9yKF8gaW4gaSliW19dfHxvKGIsXyxpW19dLCEwKX19LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpey8qKgoJCSAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy4KCQkgKiBBbGwgcmlnaHRzIHJlc2VydmVkLgoJCSAqCgkJICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlCgkJICogaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9tYXN0ZXIvTElDRU5TRSBmaWxlLiBBbgoJCSAqIGFkZGl0aW9uYWwgZ3JhbnQgb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbgoJCSAqIHRoZSBzYW1lIGRpcmVjdG9yeS4KCQkgKi8KCSFmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0LGUsbixpKXt2YXIgbz1lJiZlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHI/ZTpyLHM9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksYT1uZXcgcChpfHxbXSk7cmV0dXJuIHMuX2ludm9rZT1jKHQsbixhKSxzfWZ1bmN0aW9uIGkodCxlLG4pe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUsbil9fWNhdGNoKGkpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOml9fX1mdW5jdGlvbiByKCl7fWZ1bmN0aW9uIG8oKXt9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiBhKHQpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2UoZSx0KX19KX1mdW5jdGlvbiBsKHQpe2Z1bmN0aW9uIG4oZSxyLG8scyl7dmFyIGE9aSh0W2VdLHQscik7aWYoInRocm93IiE9PWEudHlwZSl7dmFyIGw9YS5hcmcsYz1sLnZhbHVlO3JldHVybiBjJiYib2JqZWN0Ij09dHlwZW9mIGMmJnYuY2FsbChjLCJfX2F3YWl0Iik/UHJvbWlzZS5yZXNvbHZlKGMuX19hd2FpdCkudGhlbihmdW5jdGlvbih0KXtuKCJuZXh0Iix0LG8scyl9LGZ1bmN0aW9uKHQpe24oInRocm93Iix0LG8scyl9KTpQcm9taXNlLnJlc29sdmUoYykudGhlbihmdW5jdGlvbih0KXtsLnZhbHVlPXQsbyhsKX0scyl9cyhhLmFyZyl9ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaSxyKXtuKHQsZSxpLHIpfSl9cmV0dXJuIG89bz9vLnRoZW4oaSxpKTppKCl9Im9iamVjdCI9PXR5cGVvZiBlLnByb2Nlc3MmJmUucHJvY2Vzcy5kb21haW4mJihuPWUucHJvY2Vzcy5kb21haW4uYmluZChuKSk7dmFyIG87dGhpcy5faW52b2tlPXJ9ZnVuY3Rpb24gYyh0LGUsbil7dmFyIHI9aztyZXR1cm4gZnVuY3Rpb24obyxzKXtpZihyPT09eCl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihyPT09QSl7aWYoInRocm93Ij09PW8pdGhyb3cgcztyZXR1cm4gbSgpfWZvcihuLm1ldGhvZD1vLG4uYXJnPXM7Oyl7dmFyIGE9bi5kZWxlZ2F0ZTtpZihhKXt2YXIgbD11KGEsbik7aWYobCl7aWYobD09PUUpY29udGludWU7cmV0dXJuIGx9fWlmKCJuZXh0Ij09PW4ubWV0aG9kKW4uc2VudD1uLl9zZW50PW4uYXJnO2Vsc2UgaWYoInRocm93Ij09PW4ubWV0aG9kKXtpZihyPT09ayl0aHJvdyByPUEsbi5hcmc7bi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyl9ZWxzZSJyZXR1cm4iPT09bi5tZXRob2QmJm4uYWJydXB0KCJyZXR1cm4iLG4uYXJnKTtyPXg7dmFyIGM9aSh0LGUsbik7aWYoIm5vcm1hbCI9PT1jLnR5cGUpe2lmKHI9bi5kb25lP0E6TCxjLmFyZz09PUUpY29udGludWU7cmV0dXJue3ZhbHVlOmMuYXJnLGRvbmU6bi5kb25lfX0idGhyb3ciPT09Yy50eXBlJiYocj1BLG4ubWV0aG9kPSJ0aHJvdyIsbi5hcmc9Yy5hcmcpfX19ZnVuY3Rpb24gdSh0LGUpe3ZhciBuPXQuaXRlcmF0b3JbZS5tZXRob2RdO2lmKG49PT1fKXtpZihlLmRlbGVnYXRlPW51bGwsInRocm93Ij09PWUubWV0aG9kKXtpZih0Lml0ZXJhdG9yWyJyZXR1cm4iXSYmKGUubWV0aG9kPSJyZXR1cm4iLGUuYXJnPV8sdSh0LGUpLCJ0aHJvdyI9PT1lLm1ldGhvZCkpcmV0dXJuIEU7ZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIEV9dmFyIHI9aShuLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1yLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9ci5hcmcsZS5kZWxlZ2F0ZT1udWxsLEU7dmFyIG89ci5hcmc7cmV0dXJuIG8/by5kb25lPyhlW3QucmVzdWx0TmFtZV09by52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9XyksZS5kZWxlZ2F0ZT1udWxsLEUpOm86KGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSxlLmRlbGVnYXRlPW51bGwsRSl9ZnVuY3Rpb24gZCh0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBoKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPSJub3JtYWwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiBwKHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSx0LmZvckVhY2goZCx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBmKHQpe2lmKHQpe3ZhciBlPXRbYl07aWYoZSlyZXR1cm4gZS5jYWxsKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIG49LTEsaT1mdW5jdGlvbiByKCl7Zm9yKDsrK248dC5sZW5ndGg7KWlmKHYuY2FsbCh0LG4pKXJldHVybiByLnZhbHVlPXRbbl0sci5kb25lPSExLHI7cmV0dXJuIHIudmFsdWU9XyxyLmRvbmU9ITAscn07cmV0dXJuIGkubmV4dD1pfX1yZXR1cm57bmV4dDptfX1mdW5jdGlvbiBtKCl7cmV0dXJue3ZhbHVlOl8sZG9uZTohMH19dmFyIF8sZz1PYmplY3QucHJvdG90eXBlLHY9Zy5oYXNPd25Qcm9wZXJ0eSx5PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LGI9eS5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLHc9eS5hc3luY0l0ZXJhdG9yfHwiQEBhc3luY0l0ZXJhdG9yIixNPXkudG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIixTPSJvYmplY3QiPT10eXBlb2YgdCxUPWUucmVnZW5lcmF0b3JSdW50aW1lO2lmKFQpcmV0dXJuIHZvaWQoUyYmKHQuZXhwb3J0cz1UKSk7VD1lLnJlZ2VuZXJhdG9yUnVudGltZT1TP3QuZXhwb3J0czp7fSxULndyYXA9bjt2YXIgaz0ic3VzcGVuZGVkU3RhcnQiLEw9InN1c3BlbmRlZFlpZWxkIix4PSJleGVjdXRpbmciLEE9ImNvbXBsZXRlZCIsRT17fSxEPXt9O0RbYl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dmFyIEM9T2JqZWN0LmdldFByb3RvdHlwZU9mLFk9QyYmQyhDKGYoW10pKSk7WSYmWSE9PWcmJnYuY2FsbChZLGIpJiYoRD1ZKTt2YXIgTz1zLnByb3RvdHlwZT1yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEQpO28ucHJvdG90eXBlPU8uY29uc3RydWN0b3I9cyxzLmNvbnN0cnVjdG9yPW8sc1tNXT1vLmRpc3BsYXlOYW1lPSJHZW5lcmF0b3JGdW5jdGlvbiIsVC5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhZSYmKGU9PT1vfHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KGUuZGlzcGxheU5hbWV8fGUubmFtZSkpfSxULm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxzKToodC5fX3Byb3RvX189cyxNIGluIHR8fCh0W01dPSJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE8pLHR9LFQuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LGEobC5wcm90b3R5cGUpLGwucHJvdG90eXBlW3ddPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LFQuQXN5bmNJdGVyYXRvcj1sLFQuYXN5bmM9ZnVuY3Rpb24odCxlLGkscil7dmFyIG89bmV3IGwobih0LGUsaSxyKSk7cmV0dXJuIFQuaXNHZW5lcmF0b3JGdW5jdGlvbihlKT9vOm8ubmV4dCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOm8ubmV4dCgpfSl9LGEoTyksT1tNXT0iR2VuZXJhdG9yIixPW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LE8udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0sVC5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gZS5yZXZlcnNlKCksZnVuY3Rpb24gaSgpe2Zvcig7ZS5sZW5ndGg7KXt2YXIgbj1lLnBvcCgpO2lmKG4gaW4gdClyZXR1cm4gaS52YWx1ZT1uLGkuZG9uZT0hMSxpfXJldHVybiBpLmRvbmU9ITAsaX19LFQudmFsdWVzPWYscC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnAscmVzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9Xyx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz1fLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKGgpLCF0KWZvcih2YXIgZSBpbiB0aGlzKSJ0Ij09PWUuY2hhckF0KDApJiZ2LmNhbGwodGhpcyxlKSYmIWlzTmFOKCtlLnNsaWNlKDEpKSYmKHRoaXNbZV09Xyl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLGU9dC5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3JldHVybiBvLnR5cGU9InRocm93IixvLmFyZz10LG4ubmV4dD1lLGkmJihuLm1ldGhvZD0ibmV4dCIsbi5hcmc9XyksISFpfWlmKHRoaXMuZG9uZSl0aHJvdyB0O2Zvcih2YXIgbj10aGlzLGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbaV0sbz1yLmNvbXBsZXRpb247aWYoInJvb3QiPT09ci50cnlMb2MpcmV0dXJuIGUoImVuZCIpO2lmKHIudHJ5TG9jPD10aGlzLnByZXYpe3ZhciBzPXYuY2FsbChyLCJjYXRjaExvYyIpLGE9di5jYWxsKHIsImZpbmFsbHlMb2MiKTtpZihzJiZhKXtpZih0aGlzLnByZXY8ci5jYXRjaExvYylyZXR1cm4gZShyLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8ci5maW5hbGx5TG9jKXJldHVybiBlKHIuZmluYWxseUxvYyl9ZWxzZSBpZihzKXtpZih0aGlzLnByZXY8ci5jYXRjaExvYylyZXR1cm4gZShyLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFhKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8ci5maW5hbGx5TG9jKXJldHVybiBlKHIuZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7bj49MDstLW4pe3ZhciBpPXRoaXMudHJ5RW50cmllc1tuXTtpZihpLnRyeUxvYzw9dGhpcy5wcmV2JiZ2LmNhbGwoaSwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8aS5maW5hbGx5TG9jKXt2YXIgcj1pO2JyZWFrfX1yJiYoImJyZWFrIj09PXR8fCJjb250aW51ZSI9PT10KSYmci50cnlMb2M8PWUmJmU8PXIuZmluYWxseUxvYyYmKHI9bnVsbCk7dmFyIG89cj9yLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT10LG8uYXJnPWUscj8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1yLmZpbmFsbHlMb2MsRSk6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24odCxlKXtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiJicmVhayI9PT10LnR5cGV8fCJjb250aW51ZSI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOiJyZXR1cm4iPT09dC50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9dC5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PXQudHlwZSYmZSYmKHRoaXMubmV4dD1lKSxFfSxmaW5pc2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIG49dGhpcy50cnlFbnRyaWVzW2VdO2lmKG4uZmluYWxseUxvYz09PXQpcmV0dXJuIHRoaXMuY29tcGxldGUobi5jb21wbGV0aW9uLG4uYWZ0ZXJMb2MpLGgobiksRX19LCJjYXRjaCI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIG49dGhpcy50cnlFbnRyaWVzW2VdO2lmKG4udHJ5TG9jPT09dCl7dmFyIGk9bi5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1pLnR5cGUpe3ZhciByPWkuYXJnO2gobil9cmV0dXJuIHJ9fXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpmKHQpLHJlc3VsdE5hbWU6ZSxuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9XyksRX19fSgib2JqZWN0Ij09dHlwZW9mIGU/ZToib2JqZWN0Ij09dHlwZW9mIHdpbmRvdz93aW5kb3c6Im9iamVjdCI9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcyl9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXtuKDMyNCksdC5leHBvcnRzPW4oOSkuUmVnRXhwLmVzY2FwZX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oOCkscj1uKDMyNSkoL1tcXF4kKis/LigpfFtcXXt9XS9nLCJcXCQmIik7aShpLlMsIlJlZ0V4cCIse2VzY2FwZTpmdW5jdGlvbih0KXtyZXR1cm4gcih0KX19KX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj1lPT09T2JqZWN0KGUpP2Z1bmN0aW9uKHQpe3JldHVybiBlW3RdfTplO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKGUpLnJlcGxhY2UodCxuKX19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsbixpKXtmdW5jdGlvbiBvKGUpe3Quc2Vzc2lvbi5leGlzdHMoKS50aGVuKGUpfWZ1bmN0aW9uIHMoZSl7dC5zZXNzaW9uLmNsb3NlKCkudGhlbihlKS5mYWlsKGZ1bmN0aW9uKCl7ZSgiVGhlcmUgd2FzIGEgcHJvYmxlbSBjbG9zaW5nIHRoZSBzZXNzaW9uIil9KX1mdW5jdGlvbiBhKGUpe3Quc2Vzc2lvbi5yZWZyZXNoKCkudGhlbihlKS5mYWlsKGZ1bmN0aW9uKCl7ZSh7c3RhdHVzOiJJTkFDVElWRSJ9KX0pfWZ1bmN0aW9uIGwoZSxuLGkpe3QuaWRUb2tlbi5yZWZyZXNoKGkpLnRoZW4obikuZmFpbChmdW5jdGlvbigpe24oIlRoZXJlIHdhcyBhIHByb2JsZW0gcmVmcmVzaGluZyB0aGUgaWRfdG9rZW4iKX0pfWZ1bmN0aW9uIGMoZSl7dC5zZXNzaW9uLmdldCgpLnRoZW4oZnVuY3Rpb24odCl7IkFDVElWRSI9PT10LnN0YXR1cyYmdC51c2VyJiYodC51c2VyPXIucGljayh0LnVzZXIsImlkIiwicHJvZmlsZSIsInBhc3N3b3JkQ2hhbmdlZCIpKSxlKHQpfSl9ZnVuY3Rpb24gdShuLG8scyl7aWYoXyl0aHJvdyJBbiBpbnN0YW5jZSBvZiB0aGUgd2lkZ2V0IGhhcyBhbHJlYWR5IGJlZW4gcmVuZGVyZWQuIENhbGwgcmVtb3ZlKCkgZmlyc3QuIjtfPW5ldyBlKHIuZXh0ZW5kKHt9LGksbix7YXV0aENsaWVudDp0LGdsb2JhbFN1Y2Nlc3NGbjpvLGdsb2JhbEVycm9yRm46c30pKSxfLnN0YXJ0KCl9ZnVuY3Rpb24gZCgpe18mJl8uaGlkZSgpfWZ1bmN0aW9uIGgoKXtfJiZfLnNob3coKX1mdW5jdGlvbiBwKCl7XyYmKF8ucmVtb3ZlKCksXz12b2lkIDApfWZ1bmN0aW9uIGYoKXtyZXR1cm4gbi5oYXNUb2tlbnNJbkhhc2god2luZG93LmxvY2F0aW9uLmhhc2gpfWZ1bmN0aW9uIG0oZSxuKXt0LnRva2VuLnBhcnNlRnJvbVVybCgpLnRoZW4oZSkuZmFpbChuKX12YXIgXztyZXR1cm57cmVuZGVyRWw6dSxzaWduT3V0OnMsaWRUb2tlbjp7cmVmcmVzaDpsfSxzZXNzaW9uOntjbG9zZTpzLGV4aXN0czpvLGdldDpjLHJlZnJlc2g6YX0sdG9rZW46e2hhc1Rva2Vuc0luVXJsOmYscGFyc2VUb2tlbnNGcm9tVXJsOm19LHRva2VuTWFuYWdlcjp0LnRva2VuTWFuYWdlcixoaWRlOmQsc2hvdzpoLHJlbW92ZTpwfX1mdW5jdGlvbiBlKGUpe3ZhciBvLHMsYSxsO24oMzI4KSxuKDMzMCksbigzMzEpLG89bigzMzMpLHM9bigzNTYpLGw9big2MTgpLGE9bmV3IG8oe3VybDplLmJhc2VVcmwsdHJhbnNmb3JtRXJyb3JYSFI6cy50cmFuc2Zvcm1FcnJvclhIUixoZWFkZXJzOnsiWC1Pa3RhLVVzZXItQWdlbnQtRXh0ZW5kZWQiOiJva3RhLXNpZ25pbi13aWRnZXQtIitpLnZlcnNpb259LGNsaWVudElkOmUuY2xpZW50SWQscmVkaXJlY3RVcmk6ZS5yZWRpcmVjdFVyaX0pLHIuZXh0ZW5kKHRoaXMsbC5wcm90b3R5cGUuRXZlbnRzLHQoYSxsLHMsZSkpLHRoaXMubGlzdGVuVG8obC5wcm90b3R5cGUsImFsbCIsdGhpcy50cmlnZ2VyKX12YXIgaT1uKDMyNykscj1uKDMyOCk7cmV0dXJuIGV9KCk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXt2ZXJzaW9uOiIyLjMuMCIsc3VwcG9ydGVkTGFuZ3VhZ2VzOlsiZW4iLCJjcyIsImRhIiwiZGUiLCJlcyIsImZpIiwiZnIiLCJodSIsImlkIiwiaW4iLCJpdCIsImphIiwia28iLCJtcyIsIm5sLU5MIiwicGwiLCJwdC1CUiIsInJvIiwicnUiLCJzdiIsInRoIiwidHIiLCJ1ayIsInpoLUNOIiwiemgtVFciXX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI5KSxuKDMzMCldLHI9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vQ29uZmxpY3QoKTtyZXR1cm4gbi5taXhpbih7cmVzdWx0Q3R4OmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBvPW4uaXNPYmplY3QodCk/dFtlXTp2b2lkIDA7cmV0dXJuIG4uaXNGdW5jdGlvbihvKSYmKG89by5jYWxsKGl8fHQpKSxvP286bi5pc1VuZGVmaW5lZChyKT9vOnJ9LGlzSW50ZWdlcjpmdW5jdGlvbih0KXtyZXR1cm4gbi5pc051bWJlcih0KSYmdCUxPT09MH0sdGVtcGxhdGU6ZnVuY3Rpb24gaSh0LG4pe3ZhciBpPWUuY29tcGlsZSh0KTtyZXR1cm4gbj9pKG4pOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQpfX19KSxufS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyOy8vICAgICBVbmRlcnNjb3JlLmpzIDEuOC4zCgkvLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9ycwoJLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCgkoZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMpe2Zvcig7bz49MCYmbzxzO28rPXQpe3ZhciBhPXI/cltvXTpvO2k9bihpLGVbYV0sYSxlKX1yZXR1cm4gaX1yZXR1cm4gZnVuY3Rpb24obixpLHIsbyl7aT1TKGksbyw0KTt2YXIgcz0hRChuKSYmTS5rZXlzKG4pLGE9KHN8fG4pLmxlbmd0aCxsPXQ+MD8wOmEtMTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYocj1uW3M/c1tsXTpsXSxsKz10KSxlKG4saSxyLHMsbCxhKX19ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe249VChuLGkpO2Zvcih2YXIgcj1FKGUpLG89dD4wPzA6ci0xO28+PTAmJm88cjtvKz10KWlmKG4oZVtvXSxvLGUpKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiBzKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24oaSxyLG8pe3ZhciBzPTAsYT1FKGkpO2lmKCJudW1iZXIiPT10eXBlb2Ygbyl0PjA/cz1vPj0wP286TWF0aC5tYXgobythLHMpOmE9bz49MD9NYXRoLm1pbihvKzEsYSk6bythKzE7ZWxzZSBpZihuJiZvJiZhKXJldHVybiBvPW4oaSxyKSxpW29dPT09cj9vOi0xO2lmKHIhPT1yKXJldHVybiBvPWUoZi5jYWxsKGkscyxhKSxNLmlzTmFOKSxvPj0wP28rczotMTtmb3Iobz10PjA/czphLTE7bz49MCYmbzxhO28rPXQpaWYoaVtvXT09PXIpcmV0dXJuIG87cmV0dXJuLTF9fWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1OLmxlbmd0aCxpPXQuY29uc3RydWN0b3Iscj1NLmlzRnVuY3Rpb24oaSkmJmkucHJvdG90eXBlfHxkLG89ImNvbnN0cnVjdG9yIjtmb3IoTS5oYXModCxvKSYmIU0uY29udGFpbnMoZSxvKSYmZS5wdXNoKG8pO24tLTspbz1OW25dLG8gaW4gdCYmdFtvXSE9PXJbb10mJiFNLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKX12YXIgbD10aGlzLGM9bC5fLHU9QXJyYXkucHJvdG90eXBlLGQ9T2JqZWN0LnByb3RvdHlwZSxoPUZ1bmN0aW9uLnByb3RvdHlwZSxwPXUucHVzaCxmPXUuc2xpY2UsbT1kLnRvU3RyaW5nLF89ZC5oYXNPd25Qcm9wZXJ0eSxnPUFycmF5LmlzQXJyYXksdj1PYmplY3Qua2V5cyx5PWguYmluZCxiPU9iamVjdC5jcmVhdGUsdz1mdW5jdGlvbigpe30sTT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE0/dDp0aGlzIGluc3RhbmNlb2YgTT92b2lkKHRoaXMuX3dyYXBwZWQ9dCk6bmV3IE0odCl9OyJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9TSksZS5fPU0sTS5WRVJTSU9OPSIxLjguMyI7dmFyIFM9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG51bGw9PW4/MzpuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiB0LmNhbGwoZSxuLGkpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4saSxyKXtyZXR1cm4gdC5jYWxsKGUsbixpLHIpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKG4saSxyLG8pe3JldHVybiB0LmNhbGwoZSxuLGkscixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0sVD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PXQ/TS5pZGVudGl0eTpNLmlzRnVuY3Rpb24odCk/Uyh0LGUsbik6TS5pc09iamVjdCh0KT9NLm1hdGNoZXIodCk6TS5wcm9wZXJ0eSh0KX07TS5pdGVyYXRlZT1mdW5jdGlvbih0LGUpe3JldHVybiBUKHQsZSwxLzApfTt2YXIgaz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoO2lmKGk8Mnx8bnVsbD09bilyZXR1cm4gbjtmb3IodmFyIHI9MTtyPGk7cisrKWZvcih2YXIgbz1hcmd1bWVudHNbcl0scz10KG8pLGE9cy5sZW5ndGgsbD0wO2w8YTtsKyspe3ZhciBjPXNbbF07ZSYmdm9pZCAwIT09bltjXXx8KG5bY109b1tjXSl9cmV0dXJuIG59fSxMPWZ1bmN0aW9uKHQpe2lmKCFNLmlzT2JqZWN0KHQpKXJldHVybnt9O2lmKGIpcmV0dXJuIGIodCk7dy5wcm90b3R5cGU9dDt2YXIgZT1uZXcgdztyZXR1cm4gdy5wcm90b3R5cGU9bnVsbCxlfSx4PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19LEE9TWF0aC5wb3coMiw1MyktMSxFPXgoImxlbmd0aCIpLEQ9ZnVuY3Rpb24odCl7dmFyIGU9RSh0KTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+PTAmJmU8PUF9O00uZWFjaD1NLmZvckVhY2g9ZnVuY3Rpb24odCxlLG4pe2U9UyhlLG4pO3ZhciBpLHI7aWYoRCh0KSlmb3IoaT0wLHI9dC5sZW5ndGg7aTxyO2krKyllKHRbaV0saSx0KTtlbHNle3ZhciBvPU0ua2V5cyh0KTtmb3IoaT0wLHI9by5sZW5ndGg7aTxyO2krKyllKHRbb1tpXV0sb1tpXSx0KX1yZXR1cm4gdH0sTS5tYXA9TS5jb2xsZWN0PWZ1bmN0aW9uKHQsZSxuKXtlPVQoZSxuKTtmb3IodmFyIGk9IUQodCkmJk0ua2V5cyh0KSxyPShpfHx0KS5sZW5ndGgsbz1BcnJheShyKSxzPTA7czxyO3MrKyl7dmFyIGE9aT9pW3NdOnM7b1tzXT1lKHRbYV0sYSx0KX1yZXR1cm4gb30sTS5yZWR1Y2U9TS5mb2xkbD1NLmluamVjdD1uKDEpLE0ucmVkdWNlUmlnaHQ9TS5mb2xkcj1uKC0xKSxNLmZpbmQ9TS5kZXRlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciBpO2lmKGk9RCh0KT9NLmZpbmRJbmRleCh0LGUsbik6TS5maW5kS2V5KHQsZSxuKSx2b2lkIDAhPT1pJiZpIT09LTEpcmV0dXJuIHRbaV19LE0uZmlsdGVyPU0uc2VsZWN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1bXTtyZXR1cm4gZT1UKGUsbiksTS5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2UodCxuLHIpJiZpLnB1c2godCl9KSxpfSxNLnJlamVjdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIE0uZmlsdGVyKHQsTS5uZWdhdGUoVChlKSksbil9LE0uZXZlcnk9TS5hbGw9ZnVuY3Rpb24odCxlLG4pe2U9VChlLG4pO2Zvcih2YXIgaT0hRCh0KSYmTS5rZXlzKHQpLHI9KGl8fHQpLmxlbmd0aCxvPTA7bzxyO28rKyl7dmFyIHM9aT9pW29dOm87aWYoIWUodFtzXSxzLHQpKXJldHVybiExfXJldHVybiEwfSxNLnNvbWU9TS5hbnk9ZnVuY3Rpb24odCxlLG4pe2U9VChlLG4pO2Zvcih2YXIgaT0hRCh0KSYmTS5rZXlzKHQpLHI9KGl8fHQpLmxlbmd0aCxvPTA7bzxyO28rKyl7dmFyIHM9aT9pW29dOm87aWYoZSh0W3NdLHMsdCkpcmV0dXJuITB9cmV0dXJuITF9LE0uY29udGFpbnM9TS5pbmNsdWRlcz1NLmluY2x1ZGU9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIEQodCl8fCh0PU0udmFsdWVzKHQpKSwoIm51bWJlciIhPXR5cGVvZiBufHxpKSYmKG49MCksTS5pbmRleE9mKHQsZSxuKT49MH0sTS5pbnZva2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1mLmNhbGwoYXJndW1lbnRzLDIpLGk9TS5pc0Z1bmN0aW9uKGUpO3JldHVybiBNLm1hcCh0LGZ1bmN0aW9uKHQpe3ZhciByPWk/ZTp0W2VdO3JldHVybiBudWxsPT1yP3I6ci5hcHBseSh0LG4pfSl9LE0ucGx1Y2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTS5tYXAodCxNLnByb3BlcnR5KGUpKX0sTS53aGVyZT1mdW5jdGlvbih0LGUpe3JldHVybiBNLmZpbHRlcih0LE0ubWF0Y2hlcihlKSl9LE0uZmluZFdoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE0uZmluZCh0LE0ubWF0Y2hlcihlKSl9LE0ubWF4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG89LSgxLzApLHM9LSgxLzApO2lmKG51bGw9PWUmJm51bGwhPXQpe3Q9RCh0KT90Ok0udmFsdWVzKHQpO2Zvcih2YXIgYT0wLGw9dC5sZW5ndGg7YTxsO2ErKylpPXRbYV0saT5vJiYobz1pKX1lbHNlIGU9VChlLG4pLE0uZWFjaCh0LGZ1bmN0aW9uKHQsbixpKXtyPWUodCxuLGkpLChyPnN8fHI9PT0tKDEvMCkmJm89PT0tKDEvMCkpJiYobz10LHM9cil9KTtyZXR1cm4gb30sTS5taW49ZnVuY3Rpb24odCxlLG4pe3Zh", "base64"));
  res.write(new Buffer("ciBpLHIsbz0xLzAscz0xLzA7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1EKHQpP3Q6TS52YWx1ZXModCk7Zm9yKHZhciBhPTAsbD10Lmxlbmd0aDthPGw7YSsrKWk9dFthXSxpPG8mJihvPWkpfWVsc2UgZT1UKGUsbiksTS5lYWNoKHQsZnVuY3Rpb24odCxuLGkpe3I9ZSh0LG4saSksKHI8c3x8cj09PTEvMCYmbz09PTEvMCkmJihvPXQscz1yKX0pO3JldHVybiBvfSxNLnNodWZmbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49RCh0KT90Ok0udmFsdWVzKHQpLGk9bi5sZW5ndGgscj1BcnJheShpKSxvPTA7bzxpO28rKyllPU0ucmFuZG9tKDAsbyksZSE9PW8mJihyW29dPXJbZV0pLHJbZV09bltvXTtyZXR1cm4gcn0sTS5zYW1wbGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT1lfHxuPyhEKHQpfHwodD1NLnZhbHVlcyh0KSksdFtNLnJhbmRvbSh0Lmxlbmd0aC0xKV0pOk0uc2h1ZmZsZSh0KS5zbGljZSgwLE1hdGgubWF4KDAsZSkpfSxNLnNvcnRCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9VChlLG4pLE0ucGx1Y2soTS5tYXAodCxmdW5jdGlvbih0LG4saSl7cmV0dXJue3ZhbHVlOnQsaW5kZXg6bixjcml0ZXJpYTplKHQsbixpKX19KS5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jcml0ZXJpYSxpPWUuY3JpdGVyaWE7aWYobiE9PWkpe2lmKG4+aXx8dm9pZCAwPT09bilyZXR1cm4gMTtpZihuPGl8fHZvaWQgMD09PWkpcmV0dXJuLTF9cmV0dXJuIHQuaW5kZXgtZS5pbmRleH0pLCJ2YWx1ZSIpfTt2YXIgQz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3ZhciByPXt9O3JldHVybiBuPVQobixpKSxNLmVhY2goZSxmdW5jdGlvbihpLG8pe3ZhciBzPW4oaSxvLGUpO3QocixpLHMpfSkscn19O00uZ3JvdXBCeT1DKGZ1bmN0aW9uKHQsZSxuKXtNLmhhcyh0LG4pP3Rbbl0ucHVzaChlKTp0W25dPVtlXX0pLE0uaW5kZXhCeT1DKGZ1bmN0aW9uKHQsZSxuKXt0W25dPWV9KSxNLmNvdW50Qnk9QyhmdW5jdGlvbih0LGUsbil7TS5oYXModCxuKT90W25dKys6dFtuXT0xfSksTS50b0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0P00uaXNBcnJheSh0KT9mLmNhbGwodCk6RCh0KT9NLm1hcCh0LE0uaWRlbnRpdHkpOk0udmFsdWVzKHQpOltdfSxNLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/MDpEKHQpP3QubGVuZ3RoOk0ua2V5cyh0KS5sZW5ndGh9LE0ucGFydGl0aW9uPWZ1bmN0aW9uKHQsZSxuKXtlPVQoZSxuKTt2YXIgaT1bXSxyPVtdO3JldHVybiBNLmVhY2godCxmdW5jdGlvbih0LG4sbyl7KGUodCxuLG8pP2k6cikucHVzaCh0KX0pLFtpLHJdfSxNLmZpcnN0PU0uaGVhZD1NLnRha2U9ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPXQpcmV0dXJuIG51bGw9PWV8fG4/dFswXTpNLmluaXRpYWwodCx0Lmxlbmd0aC1lKX0sTS5pbml0aWFsPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZi5jYWxsKHQsMCxNYXRoLm1heCgwLHQubGVuZ3RoLShudWxsPT1lfHxuPzE6ZSkpKX0sTS5sYXN0PWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbdC5sZW5ndGgtMV06TS5yZXN0KHQsTWF0aC5tYXgoMCx0Lmxlbmd0aC1lKSl9LE0ucmVzdD1NLnRhaWw9TS5kcm9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZi5jYWxsKHQsbnVsbD09ZXx8bj8xOmUpfSxNLmNvbXBhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIE0uZmlsdGVyKHQsTS5pZGVudGl0eSl9O3ZhciBZPWZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj1bXSxvPTAscz1pfHwwLGE9RSh0KTtzPGE7cysrKXt2YXIgbD10W3NdO2lmKEQobCkmJihNLmlzQXJyYXkobCl8fE0uaXNBcmd1bWVudHMobCkpKXtlfHwobD1Z", "base64"));
  res.write(new Buffer("KGwsZSxuKSk7dmFyIGM9MCx1PWwubGVuZ3RoO2ZvcihyLmxlbmd0aCs9dTtjPHU7KXJbbysrXT1sW2MrK119ZWxzZSBufHwocltvKytdPWwpfXJldHVybiByfTtNLmZsYXR0ZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gWSh0LGUsITEpfSxNLndpdGhvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIE0uZGlmZmVyZW5jZSh0LGYuY2FsbChhcmd1bWVudHMsMSkpfSxNLnVuaXE9TS51bmlxdWU9ZnVuY3Rpb24odCxlLG4saSl7TS5pc0Jvb2xlYW4oZSl8fChpPW4sbj1lLGU9ITEpLG51bGwhPW4mJihuPVQobixpKSk7Zm9yKHZhciByPVtdLG89W10scz0wLGE9RSh0KTtzPGE7cysrKXt2YXIgbD10W3NdLGM9bj9uKGwscyx0KTpsO2U/KHMmJm89PT1jfHxyLnB1c2gobCksbz1jKTpuP00uY29udGFpbnMobyxjKXx8KG8ucHVzaChjKSxyLnB1c2gobCkpOk0uY29udGFpbnMocixsKXx8ci5wdXNoKGwpfXJldHVybiByfSxNLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE0udW5pcShZKGFyZ3VtZW50cywhMCwhMCkpfSxNLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj1hcmd1bWVudHMubGVuZ3RoLGk9MCxyPUUodCk7aTxyO2krKyl7dmFyIG89dFtpXTtpZighTS5jb250YWlucyhlLG8pKXtmb3IodmFyIHM9MTtzPG4mJk0uY29udGFpbnMoYXJndW1lbnRzW3NdLG8pO3MrKyk7cz09PW4mJmUucHVzaChvKX19cmV0dXJuIGV9LE0uZGlmZmVyZW5jZT1mdW5jdGlvbih0KXt2YXIgZT1ZKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gTS5maWx0ZXIodCxmdW5jdGlvbih0KXtyZXR1cm4hTS5jb250YWlucyhlLHQpfSl9LE0uemlwPWZ1bmN0aW9uKCl7cmV0dXJuIE0udW56aXAoYXJndW1lbnRzKX0sTS51bnppcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmTS5tYXgodCxFKS5sZW5ndGh8fDAsbj1BcnJheShlKSxpPTA7aTxlO2krKyluW2ldPU0ucGx1Y2sodCxpKTtyZXR1cm4gbn0sTS5vYmplY3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49e30saT0wLHI9RSh0KTtpPHI7aSsrKWU/blt0W2ldXT1lW2ldOm5bdFtpXVswXV09dFtpXVsxXTtyZXR1cm4gbn0sTS5maW5kSW5kZXg9bygxKSxNLmZpbmRMYXN0SW5kZXg9bygtMSksTS5zb3J0ZWRJbmRleD1mdW5jdGlvbih0LGUsbixpKXtuPVQobixpLDEpO2Zvcih2YXIgcj1uKGUpLG89MCxzPUUodCk7bzxzOyl7dmFyIGE9TWF0aC5mbG9vcigobytzKS8yKTtuKHRbYV0pPHI/bz1hKzE6cz1hfXJldHVybiBvfSxNLmluZGV4T2Y9cygxLE0uZmluZEluZGV4LE0uc29ydGVkSW5kZXgpLE0ubGFzdEluZGV4T2Y9cygtMSxNLmZpbmRMYXN0SW5kZXgpLE0ucmFuZ2U9ZnVuY3Rpb24odCxlLG4pe251bGw9PWUmJihlPXR8fDAsdD0wKSxuPW58fDE7Zm9yKHZhciBpPU1hdGgubWF4KE1hdGguY2VpbCgoZS10KS9uKSwwKSxyPUFycmF5KGkpLG89MDtvPGk7bysrLHQrPW4pcltvXT10O3JldHVybiByfTt2YXIgTz1mdW5jdGlvbih0LGUsbixpLHIpe2lmKCEoaSBpbnN0YW5jZW9mIGUpKXJldHVybiB0LmFwcGx5KG4scik7dmFyIG89TCh0LnByb3RvdHlwZSkscz10LmFwcGx5KG8scik7cmV0dXJuIE0uaXNPYmplY3Qocyk/czpvfTtNLmJpbmQ9ZnVuY3Rpb24odCxlKXtpZih5JiZ0LmJpbmQ9PT15KXJldHVybiB5LmFwcGx5KHQsZi5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIU0uaXNGdW5jdGlvbih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTt2YXIgbj1mLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gTyh0LGksZSx0aGlzLG4uY29uY2F0KGYuY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBpfSxNLnBhcnRpYWw9ZnVuY3Rpb24odCl7dmFyIGU9Zi5jYWxsKGFyZ3VtZW50cywxKSxuPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAscj1lLmxlbmd0aCxvPUFycmF5KHIpLHM9MDtzPHI7cysrKW9bc109ZVtzXT09PU0/YXJndW1lbnRzW2krK106ZVtzXTtmb3IoO2k8YXJndW1lbnRzLmxlbmd0aDspby5wdXNoKGFyZ3VtZW50c1tpKytdKTtyZXR1cm4gTyh0LG4sdGhpcyx0aGlzLG8pfTtyZXR1cm4gbn0sTS5iaW5kQWxsPWZ1bmN0aW9uKHQpe3ZhciBlLG4saT1hcmd1bWVudHMubGVuZ3RoO2lmKGk8PTEpdGhyb3cgbmV3IEVycm9yKCJiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzIik7Zm9yKGU9MTtlPGk7ZSsrKW49YXJndW1lbnRzW2VdLHRbbl09TS5iaW5kKHRbbl0sdCk7cmV0dXJuIHR9LE0ubWVtb2l6ZT1mdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKGkpe3ZhciByPW4uY2FjaGUsbz0iIisoZT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTppKTtyZXR1cm4gTS5oYXMocixvKXx8KHJbb109dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHJbb119O3JldHVybiBuLmNhY2hlPXt9LG59LE0uZGVsYXk9ZnVuY3Rpb24odCxlKXt2YXIgbj1mLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobnVsbCxuKX0sZSl9LE0uZGVmZXI9TS5wYXJ0aWFsKE0uZGVsYXksTSwxKSxNLnRocm90dGxlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scz1udWxsLGE9MDtufHwobj17fSk7dmFyIGw9ZnVuY3Rpb24oKXthPW4ubGVhZGluZz09PSExPzA6TS5ub3coKSxzPW51bGwsbz10LmFwcGx5KGksciksc3x8KGk9cj1udWxsKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9TS5ub3coKTthfHxuLmxlYWRpbmchPT0hMXx8KGE9Yyk7dmFyIHU9ZS0oYy1hKTtyZXR1cm4gaT10aGlzLHI9YXJndW1lbnRzLHU8PTB8fHU+ZT8ocyYmKGNsZWFyVGltZW91dChzKSxzPW51bGwpLGE9YyxvPXQuYXBwbHkoaSxyKSxzfHwoaT1yPW51bGwpKTpzfHxuLnRyYWlsaW5nPT09ITF8fChzPXNldFRpbWVvdXQobCx1KSksb319LE0uZGVib3VuY2U9ZnVuY3Rpbw==", "base64"));
  res.write(new Buffer("bih0LGUsbil7dmFyIGkscixvLHMsYSxsPWZ1bmN0aW9uKCl7dmFyIGM9TS5ub3coKS1zO2M8ZSYmYz49MD9pPXNldFRpbWVvdXQobCxlLWMpOihpPW51bGwsbnx8KGE9dC5hcHBseShvLHIpLGl8fChvPXI9bnVsbCkpKX07cmV0dXJuIGZ1bmN0aW9uKCl7bz10aGlzLHI9YXJndW1lbnRzLHM9TS5ub3coKTt2YXIgYz1uJiYhaTtyZXR1cm4gaXx8KGk9c2V0VGltZW91dChsLGUpKSxjJiYoYT10LmFwcGx5KG8sciksbz1yPW51bGwpLGF9fSxNLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTS5wYXJ0aWFsKGUsdCl9LE0ubmVnYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LE0uY29tcG9zZT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxlPXQubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUsaT10W2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtuLS07KWk9dFtuXS5jYWxsKHRoaXMsaSk7cmV0dXJuIGl9fSxNLmFmdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10PDEpcmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sTS5iZWZvcmU9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLXQ+MCYmKG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHQ8PTEmJihlPW51bGwpLG59fSxNLm9uY2U9TS5wYXJ0aWFsKE0uYmVmb3JlLDIpO3ZhciBQPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIiksTj1bInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwidG9TdHJpbmciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImhhc093blByb3BlcnR5IiwidG9Mb2NhbGVTdHJpbmciXTtNLmtleXM9ZnVuY3Rpb24odCl7aWYoIU0uaXNPYmplY3QodCkpcmV0dXJuW107aWYodilyZXR1cm4gdih0KTt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClNLmhhcyh0LG4pJiZlLnB1c2gobik7cmV0dXJuIFAmJmEodCxlKSxlfSxNLmFsbEtleXM9ZnVuY3Rpb24odCl7aWYoIU0uaXNPYmplY3QodCkpcmV0dXJuW107dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBQJiZhKHQsZSksZX0sTS52YWx1ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPU0ua2V5cyh0KSxuPWUubGVuZ3RoLGk9QXJyYXkobikscj0wO3I8bjtyKyspaVtyXT10W2Vbcl1dO3JldHVybiBpfSxNLm1hcE9iamVjdD1mdW5jdGlvbih0LGUsbil7ZT1UKGUsbik7Zm9yKHZhciBpLHI9TS5rZXlzKHQpLG89ci5sZW5ndGgscz17fSxhPTA7YTxvO2ErKylpPXJbYV0sc1tpXT1lKHRbaV0saSx0KTtyZXR1cm4gc30sTS5wYWlycz1mdW5jdGlvbih0KXtmb3IodmFyIGU9TS5rZXlzKHQpLG49ZS5sZW5ndGgsaT1BcnJheShuKSxyPTA7cjxuO3IrKylpW3JdPVtlW3JdLHRbZVtyXV1dO3JldHVybiBpfSxNLmludmVydD1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30sbj1NLmtleXModCksaT0wLHI9bi5sZW5ndGg7aTxyO2krKyllW3RbbltpXV1dPW5baV07cmV0dXJuIGV9LE0uZnVuY3Rpb25zPU0ubWV0aG9kcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClNLmlzRnVuY3Rpb24odFtuXSkmJmUucHVzaChuKTtyZXR1cm4gZS5zb3J0KCl9LE0uZXh0ZW5kPWsoTS5hbGxLZXlzKSxNLmV4dGVuZE93bj1NLmFzc2lnbj1rKE0ua2V5cyksTS5maW5kS2V5PWZ1bmN0aW9uKHQsZSxuKXtlPVQoZSxuKTtmb3IodmFyIGkscj1NLmtleXModCksbz0wLHM9ci5sZW5ndGg7bzxzO28rKylpZihpPXJbb10sZSh0W2ldLGksdCkpcmV0dXJuIGl9LE0ucGljaz1mdW5jdGlvbih0LGUsbil7dmFyIGkscixvPXt9LHM9dDtpZihudWxsPT1zKXJldHVybiBvO00uaXNGdW5jdGlvbihlKT8ocj1NLmFsbEtleXMocyksaT1TKGUsbikpOihyPVkoYXJndW1lbnRzLCExLCExLDEpLGk9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlIGluIG59LHM9T2JqZWN0KHMpKTtmb3IodmFyIGE9MCxsPXIubGVuZ3RoO2E8bDthKyspe3ZhciBjPXJbYV0sdT1zW2NdO2kodSxjLHMpJiYob1tjXT11KX1yZXR1cm4gb30sTS5vbWl0PWZ1bmN0aW9uKHQsZSxuKXtpZihNLmlzRnVuY3Rpb24oZSkpZT1NLm5lZ2F0ZShlKTtlbHNle3ZhciBpPU0ubWFwKFkoYXJndW1lbnRzLCExLCExLDEpLFN0cmluZyk7ZT1mdW5jdGlvbih0LGUpe3JldHVybiFNLmNvbnRhaW5zKGksZSl9fXJldHVybiBNLnBpY2sodCxlLG4pfSxNLmRlZmF1bHRzPWsoTS5hbGxLZXlzLCEwKSxNLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPUwodCk7cmV0dXJuIGUmJk0uZXh0ZW5kT3duKG4sZSksbn0sTS5jbG9uZT1mdW5jdGlvbih0KXtyZXR1cm4gTS5pc09iamVjdCh0KT9NLmlzQXJyYXkodCk/dC5zbGljZSgpOk0uZXh0ZW5kKHt9LHQpOnR9LE0udGFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUodCksdH0sTS5pc01hdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49TS5rZXlzKGUpLGk9bi5sZW5ndGg7aWYobnVsbD09dClyZXR1cm4haTtmb3IodmFyIHI9T2JqZWN0KHQpLG89MDtvPGk7bysrKXt2YXIgcz1uW29dO2lmKGVbc10hPT1yW3NdfHwhKHMgaW4gcikpcmV0dXJuITF9cmV0dXJuITB9O3ZhciBJPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1lKXJldHVybiAwIT09dHx8MS90PT09MS9lO2lmKG51bGw9PXR8fG51bGw9PWUpcmV0dXJuIHQ9PT1lO3QgaW5zdGFuY2VvZiBNJiYodD10Ll93cmFwcGVkKSxlIGluc3RhbmNlb2YgTSYmKGU9ZS5fd3JhcHBlZCk7dmFyIHI9bS5jYWxsKHQpO2lmKHIhPT1tLmNhbGwoZSkpcmV0dXJuITE7c3dpdGNoKHIpe2Nhc2UiW29iamVjdCBSZWdFeHBdIjpjYXNlIltvYmplY3QgU3RyaW5nXSI6cmV0dXJuIiIrdD09IiIrZTtjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuK3QhPT0rdD8rZSE9PStlOjA9PT0rdD8xLyt0PT09MS9lOit0PT09K2U7Y2FzZSJbb2JqZWN0IERhdGVdIjpjYXNlIltvYmplY3QgQm9vbGVhbl0iOnJldHVybit0PT09K2V9dmFyIG89IltvYmplY3QgQXJyYXldIj09PXI7aWYoIW8pe2lmKCJvYmplY3QiIT10eXBlb2YgdHx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBzPXQuY29uc3RydWN0b3IsYT1lLmNvbnN0cnVjdG9yO2lmKHMhPT1hJiYhKE0uaXNGdW5jdGlvbihzKSYmcyBpbnN0YW5jZW9mIHMmJk0uaXNGdW5jdGlvbihhKSYmYSBpbnN0YW5jZW9mIGEpJiYiY29uc3RydWN0b3IiaW4gdCYmImNvbnN0cnVjdG9yImluIGUpcmV0dXJuITF9bj1ufHxbXSxpPWl8fFtdO2Zvcih2YXIgbD1uLmxlbmd0aDtsLS07KWlmKG5bbF09PT10KXJldHVybiBpW2xdPT09ZTtpZihuLnB1c2godCksaS5wdXNoKGUpLG8pe2lmKGw9dC5sZW5ndGgsbCE9PWUubGVuZ3RoKXJldHVybiExO2Zvcig7bC0tOylpZighSSh0W2xdLGVbbF0sbixpKSlyZXR1cm4hMX1lbHNle3ZhciBjLHU9TS5rZXlzKHQpO2lmKGw9dS5sZW5ndGgsTS5rZXlzKGUpLmxlbmd0aCE9PWwpcmV0dXJuITE7Zm9yKDtsLS07KWlmKGM9dVtsXSwhTS5oYXMoZSxjKXx8IUkodFtjXSxlW2NdLG4saSkpcmV0dXJuITF9cmV0dXJuIG4ucG9wKCksaS5wb3AoKSwhMH07TS5pc0VxdWFsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEkodCxlKX0sTS5pc0VtcHR5PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10fHwoRCh0KSYmKE0uaXNBcnJheSh0KXx8TS5pc1N0cmluZyh0KXx8TS5pc0FyZ3VtZW50cyh0KSk/MD09PXQubGVuZ3RoOjA9PT1NLmtleXModCkubGVuZ3RoKX0sTS5pc0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8MSE9PXQubm9kZVR5cGUpfSxNLmlzQXJyYXk9Z3x8ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PW0uY2FsbCh0KX0sTS5pc09iamVjdD1mdW5jdGlvbih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4iZnVuY3Rpb24iPT09ZXx8Im9iamVjdCI9PT1lJiYhIXR9LE0uZWFjaChbIkFyZ3VtZW50cyIsIkZ1bmN0aW9uIiwiU3RyaW5nIiwiTnVtYmVyIiwiRGF0ZSIsIlJlZ0V4cCIsIkVycm9yIl0sZnVuY3Rpb24odCl7TVsiaXMiK3RdPWZ1bmN0aW9uKGUpe3JldHVybiBtLmNhbGwoZSk9PT0iW29iamVjdCAiK3QrIl0ifX0pLE0uaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KE0uaXNBcmd1bWVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIE0uaGFzKHQsImNhbGxlZSIpfSksImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYib2JqZWN0IiE9dHlwZW9mIEludDhBcnJheSYmKE0uaXNGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdHx8ITF9KSxNLmlzRmluaXRlPWZ1bmN0aW9uKHQpe3JldHVybiBpc0Zpbml0ZSh0KSYmIWlzTmFOKHBhcnNlRmxvYXQodCkpfSxNLmlzTmFOPWZ1bmN0aW9uKHQpe3JldHVybiBNLmlzTnVtYmVyKHQpJiZ0IT09K3R9LE0uaXNCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09ITB8fHQ9PT0hMXx8IltvYmplY3QgQm9vbGVhbl0iPT09bS5jYWxsKHQpfSxNLmlzTnVsbD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXR9LE0uaXNVbmRlZmluZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXR9LE0uaGFzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXQmJl8uY2FsbCh0LGUpfSxNLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gbC5fPWMsdGhpc30sTS5pZGVudGl0eT1mdW5jdGlvbih0KXtyZXR1cm4gdH0sTS5jb25zdGFudD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19LE0ubm9vcD1mdW5jdGlvbigpe30sTS5wcm9wZXJ0eT14LE0ucHJvcGVydHlPZj1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9mdW5jdGlvbigpe306ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19fSxNLm1hdGNoZXI9TS5tYXRjaGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0PU0uZXh0ZW5kT3duKHt9LHQpLGZ1bmN0aW9uKGUpe3JldHVybiBNLmlzTWF0Y2goZSx0KX19LE0udGltZXM9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPUFycmF5KE1hdGgubWF4KDAsdCkpO2U9UyhlLG4sMSk7Zm9yKHZhciByPTA7cjx0O3IrKylpW3JdPWUocik7cmV0dXJuIGl9LE0ucmFuZG9tPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PWUmJihlPXQsdD0wKSx0K01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooZS10KzEpKX0sTS5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9O3ZhciBSPXsiJiI6IiZhbXA7IiwiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7IiwiYCI6IiYjeDYwOyJ9LGo9TS5pbnZlcnQoUiksSD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0sbj0iKD86IitNLmtleXModCkuam9pbigifCIpKyIpIixpPVJlZ0V4cChuKSxyPVJlZ0V4cChuLCJnIik7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB0PW51bGw9PXQ/IiI6IiIrdCxpLnRlc3QodCk/dC5yZXBsYWNlKHIsZSk6dH19O00uZXNjYXBlPUgoUiksTS51bmVzY2FwZT1IKGopLE0ucmVzdWx0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiB2b2lkIDA9PT1pJiYoaT1uKSxNLmlzRnVuY3Rpb24oaSk/aS5jYWxsKHQpOml9O3ZhciBGPTA7TS51bmlxdWVJZD1mdW5jdGlvbih0KXt2YXIgZT0rK0YrIiI7cmV0dXJuIHQ/dCtlOmV9LE0udGVtcGxhdGVTZXR0aW5ncz17ZXZhbHVhdGU6LzwlKFtcc1xTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXHNcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcc1xTXSs/KSU+L2d9O3ZhciB6PS8oLileLyxVPXsiJyI6IiciLCJcXCI6IlxcIiwiXHIiOiJyIiwiXG4iOiJuIiwiXHUyMDI4IjoidTIwMjgiLCI=", "base64"));
  res.write(new Buffer("XHUyMDI5IjoidTIwMjkifSxXPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZyxCPWZ1bmN0aW9uKHQpe3JldHVybiJcXCIrVVt0XX07TS50ZW1wbGF0ZT1mdW5jdGlvbih0LGUsbil7IWUmJm4mJihlPW4pLGU9TS5kZWZhdWx0cyh7fSxlLE0udGVtcGxhdGVTZXR0aW5ncyk7dmFyIGk9UmVnRXhwKFsoZS5lc2NhcGV8fHopLnNvdXJjZSwoZS5pbnRlcnBvbGF0ZXx8eikuc291cmNlLChlLmV2YWx1YXRlfHx6KS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIikscj0wLG89Il9fcCs9JyI7dC5yZXBsYWNlKGksZnVuY3Rpb24oZSxuLGkscyxhKXtyZXR1cm4gbys9dC5zbGljZShyLGEpLnJlcGxhY2UoVyxCKSxyPWErZS5sZW5ndGgsbj9vKz0iJytcbigoX190PSgiK24rIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyI6aT9vKz0iJytcbigoX190PSgiK2krIikpPT1udWxsPycnOl9fdCkrXG4nIjpzJiYobys9Iic7XG4iK3MrIlxuX19wKz0nIiksZX0pLG8rPSInO1xuIixlLnZhcmlhYmxlfHwobz0id2l0aChvYmp8fHt9KXtcbiIrbysifVxuIiksbz0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLHByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK28rInJldHVybiBfX3A7XG4iO3RyeXt2YXIgcz1uZXcgRnVuY3Rpb24oZS52YXJpYWJsZXx8Im9iaiIsIl8iLG8pfWNhdGNoKGEpe3Rocm93IGEuc291cmNlPW8sYX12YXIgbD1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHRoaXMsdCxNKX0sYz1lLnZhcmlhYmxlfHwib2JqIjtyZXR1cm4gbC5zb3VyY2U9ImZ1bmN0aW9uKCIrYysiKXtcbiIrbysifSIsbH0sTS5jaGFpbj1mdW5jdGlvbih0KXt2YXIgZT1NKHQpO3JldHVybiBlLl9jaGFpbj0hMCxlfTt2YXIgVj1mdW5jdGlvbih0LGUpe3JldHVybiB0Ll9jaGFpbj9NKGUpLmNoYWluKCk6ZX07TS5taXhpbj1mdW5jdGlvbih0KXtNLmVhY2goTS5mdW5jdGlvbnModCksZnVuY3Rpb24oZSl7dmFyIG49TVtlXT10W2VdO00ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX3dyYXBwZWRdO3JldHVybiBwLmFwcGx5KHQsYXJndW1lbnRzKSxWKHRoaXMsbi5hcHBseShNLHQpKX19KX0sTS5taXhpbihNKSxNLmVhY2goWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiXSxmdW5jdGlvbih0KXt2YXIgZT11W3RdO00ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fd3JhcHBlZDtyZXR1cm4gZS5hcHBseShuLGFyZ3VtZW50cyksInNoaWZ0IiE9PXQmJiJzcGxpY2UiIT09dHx8MCE9PW4ubGVuZ3RofHxkZWxldGUgblswXSxWKHRoaXMsbil9fSksTS5lYWNoKFsiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0sZnVuY3Rpb24odCl7dmFyIGU9dVt0XTtNLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiBWKHRoaXMsZS5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLE0ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LE0ucHJvdG90eXBlLnZhbHVlT2Y9TS5wcm90b3R5cGUudG9KU09OPU0ucHJvdG90eXBlLnZhbHVlLE0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5fd3JhcHBlZH0saT1bXSxyPWZ1bmN0aW9uKCl7cmV0dXJuIE19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0pLmNhbGwodGhpcyl9LGZ1bmN0aW9uKHQsZSxuKXsvKiEKCgkJIGhhbmRsZWJhcnMgdjQuMC41CgoJCUNvcHlyaWdodCAoQykgMjAxMS0yMDE1IGJ5IFllaHVkYSBLYXR6CgoJCVBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKCQlvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAoJCWluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKCQl0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCgkJY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCgkJZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCgkJVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KCQlhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCgkJVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKCQlJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKCQlGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKCQlBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCgkJTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKCQlPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCgkJVEhFIFNPRlRXQVJFLgoKCQlAbGljZW5zZQoJCSovCgkhZnVuY3Rpb24oZSxuKXt0LmV4cG9ydHM9bigpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSl7aWYobltpXSlyZXR1cm4gbltpXS5leHBvcnRzO3ZhciByPW5baV09e2V4cG9ydHM6e30saWQ6aSxsb2FkZWQ6ITF9O3JldHVybiB0W2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLGUpLHIubG9hZGVkPSEwLHIuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPSIiLGUoMCl9KFtmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkoKXt2YXIgdD1nKCk7cmV0dXJuIHQuY29tcGlsZT1mdW5jdGlvbihlLG4pe3JldHVybiB1LmNvbXBpbGUoZSxuLHQpfSx0LnByZWNvbXBpbGU9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdS5wcmVjb21waWxlKGUsbix0KX0sdC5BU1Q9bFsiZGVmYXVsdCJdLHQuQ29tcGlsZXI9dS5Db21waWxlcix0LkphdmFTY3JpcHRDb21waWxlcj1oWyJkZWZhdWx0Il0sdC5QYXJzZXI9Yy5wYXJzZXIsdC5wYXJzZT1jLnBhcnNlLHR9dmFyIHI9bigxKVsiZGVmYXVsdCJdO2UuX19lc01vZHVsZT0hMDt2YXIgbz1uKDIpLHM9cihvKSxhPW4oMjEpLGw9cihhKSxjPW4oMjIpLHU9bigyNyksZD1uKDI4KSxoPXIoZCkscD1uKDI1KSxmPXIocCksbT1uKDIwKSxfPXIobSksZz1zWyJkZWZhdWx0Il0uY3JlYXRlLHY9aSgpO3YuY3JlYXRlPWksX1siZGVmYXVsdCJdKHYpLHYuVmlzaXRvcj1mWyJkZWZhdWx0Il0sdlsiZGVmYXVsdCJdPXYsZVsiZGVmYXVsdCJdPXYsdC5leHBvcnRzPWVbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZVsiZGVmYXVsdCJdPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fSxlLl9fZXNNb2R1bGU9ITB9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSgpe3ZhciB0PW5ldyBhLkhhbmRsZWJhcnNFbnZpcm9ubWVudDtyZXR1cm4gcC5leHRlbmQodCxhKSx0LlNhZmVTdHJpbmc9Y1siZGVmYXVsdCJdLHQuRXhjZXB0aW9uPWRbImRlZmF1bHQiXSx0LlV0aWxzPXAsdC5lc2NhcGVFeHByZXNzaW9uPXAuZXNjYXBlRXhwcmVzc2lvbix0LlZNPW0sdC50ZW1wbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbS50ZW1wbGF0ZShlLHQpfSx0fXZhciByPW4oMylbImRlZmF1bHQiXSxvPW4oMSlbImRlZmF1bHQiXTtlLl9fZXNNb2R1bGU9ITA7dmFyIHM9big0KSxhPXIocyksbD1uKDE4KSxjPW8obCksdT1uKDYpLGQ9byh1KSxoPW4oNSkscD1yKGgpLGY9bigxOSksbT1yKGYpLF89bigyMCksZz1vKF8pLHY9aSgpO3YuY3JlYXRlPWksZ1siZGVmYXVsdCJdKHYpLHZbImRlZmF1bHQiXT12LGVbImRlZmF1bHQiXT12LHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGVbImRlZmF1bHQiXT10LGV9LGUuX19lc01vZHVsZT0hMH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKHQsZSxuKXt0aGlzLmhlbHBlcnM9dHx8e30sdGhpcy5wYXJ0aWFscz1lfHx7fSx0aGlzLmRlY29yYXRvcnM9bnx8e30sbC5yZWdpc3RlckRlZmF1bHRIZWxwZXJzKHRoaXMpLGMucmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyh0aGlzKX12YXIgcj1uKDEpWyJkZWZhdWx0Il07ZS5fX2VzTW9kdWxlPSEwLGUuSGFuZGxlYmFyc0Vudmlyb25tZW50PWk7dmFyIG89big1KSxzPW4oNiksYT1yKHMpLGw9big3KSxjPW4oMTUpLHU9bigxNyksZD1yKHUpLGg9IjQuMC41IjtlLlZFUlNJT049aDt2YXIgcD03O2UuQ09NUElMRVJfUkVWSVNJT049cDt2YXIgZj17MToiPD0gMS4wLnJjLjIiLDI6Ij09IDEuMC4wLXJjLjMiLDM6Ij09IDEuMC4wLXJjLjQiLDQ6Ij09IDEueC54Iiw1OiI9PSAyLjAuMC1hbHBoYS54Iiw2OiI+PSAyLjAuMC1iZXRhLjEiLDc6Ij49IDQuMC4wIn07ZS5SRVZJU0lPTl9DSEFOR0VTPWY7dmFyIG09IltvYmplY3QgT2JqZWN0XSI7aS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmksbG9nZ2VyOmRbImRlZmF1bHQiXSxsb2c6ZFsiZGVmYXVsdCJdLmxvZyxyZWdpc3RlckhlbHBlcjpmdW5jdGlvbih0LGUpe2lmKG8udG9TdHJpbmcuY2FsbCh0KT09PW0pe2lmKGUpdGhyb3cgbmV3IGFbImRlZmF1bHQiXSgiQXJnIG5vdCBzdXBwb3J0ZWQgd2l0aCBtdWx0aXBsZSBoZWxwZXJzIik7by5leHRlbmQodGhpcy5oZWxwZXJzLHQpfWVsc2UgdGhpcy5oZWxwZXJzW3RdPWV9LHVucmVnaXN0ZXJIZWxwZXI6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuaGVscGVyc1t0XX0scmVnaXN0ZXJQYXJ0aWFsOmZ1bmN0aW9uKHQsZSl7aWYoby50b1N0cmluZy5jYWxsKHQpPT09bSlvLmV4dGVuZCh0aGlzLnBhcnRpYWxzLHQpO2Vsc2V7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBlKXRocm93IG5ldyBhWyJkZWZhdWx0Il0oJ0F0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCAiJyt0KyciIGFzIHVuZGVmaW5lZCcpO3RoaXMucGFydGlhbHNbdF09ZX19LHVucmVnaXN0ZXJQYXJ0aWFsOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLnBhcnRpYWxzW3RdfSxyZWdpc3RlckRlY29yYXRvcjpmdW5jdGlvbih0LGUpe2lmKG8udG9TdHJpbmcuY2FsbCh0KT09PW0pe2lmKGUpdGhyb3cgbmV3IGFbImRlZmF1bHQiXSgiQXJnIG5vdCBzdXBwb3J0ZWQgd2l0aCBtdWx0aXBsZSBkZWNvcmF0b3JzIik7by5leHRlbmQodGhpcy5kZWNvcmF0b3JzLHQpfWVsc2UgdGhpcy5kZWNvcmF0b3JzW3RdPWV9LHVucmVnaXN0ZXJEZWNvcmF0b3I6ZnVuY3Rpb24odCk=", "base64"));
  res.write(new Buffer("e2RlbGV0ZSB0aGlzLmRlY29yYXRvcnNbdF19fTt2YXIgXz1kWyJkZWZhdWx0Il0ubG9nO2UubG9nPV8sZS5jcmVhdGVGcmFtZT1vLmNyZWF0ZUZyYW1lLGUubG9nZ2VyPWRbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdVt0XX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspZm9yKHZhciBuIGluIGFyZ3VtZW50c1tlXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW2VdLG4pJiYodFtuXT1hcmd1bWVudHNbZV1bbl0pO3JldHVybiB0fWZ1bmN0aW9uIHIodCxlKXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO248aTtuKyspaWYodFtuXT09PWUpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gbyh0KXtpZigic3RyaW5nIiE9dHlwZW9mIHQpe2lmKHQmJnQudG9IVE1MKXJldHVybiB0LnRvSFRNTCgpO2lmKG51bGw9PXQpcmV0dXJuIiI7aWYoIXQpcmV0dXJuIHQrIiI7dD0iIit0fXJldHVybiBoLnRlc3QodCk/dC5yZXBsYWNlKGQsbik6dH1mdW5jdGlvbiBzKHQpe3JldHVybiF0JiYwIT09dHx8ISghbSh0KXx8MCE9PXQubGVuZ3RoKX1mdW5jdGlvbiBhKHQpe3ZhciBlPWkoe30sdCk7cmV0dXJuIGUuX3BhcmVudD10LGV9ZnVuY3Rpb24gbCh0LGUpe3JldHVybiB0LnBhdGg9ZSx0fWZ1bmN0aW9uIGModCxlKXtyZXR1cm4odD90KyIuIjoiIikrZX1lLl9fZXNNb2R1bGU9ITAsZS5leHRlbmQ9aSxlLmluZGV4T2Y9cixlLmVzY2FwZUV4cHJlc3Npb249byxlLmlzRW1wdHk9cyxlLmNyZWF0ZUZyYW1lPWEsZS5ibG9ja1BhcmFtcz1sLGUuYXBwZW5kQ29udGV4dFBhdGg9Yzt2YXIgdT17IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsiLCciJzoiJnF1b3Q7IiwiJyI6IiYjeDI3OyIsImAiOiImI3g2MDsiLCI9IjoiJiN4M0Q7In0sZD0vWyY8PiInYD1dL2csaD0vWyY8PiInYD1dLyxwPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZS50b1N0cmluZz1wO3ZhciBmPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fTtmKC94LykmJihlLmlzRnVuY3Rpb249Zj1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdCYmIltvYmplY3QgRnVuY3Rpb25dIj09PXAuY2FsbCh0KX0pLGUuaXNGdW5jdGlvbj1mO3ZhciBtPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fCJvYmplY3QiIT10eXBlb2YgdCkmJiJbb2JqZWN0IEFycmF5XSI9PT1wLmNhbGwodCl9O2UuaXNBcnJheT1tfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKHQsZSl7dmFyIHI9ZSYmZS5sb2Msbz12b2lkIDAscz12b2lkIDA7ciYmKG89ci5zdGFydC5saW5lLHM9ci5zdGFydC5jb2x1bW4sdCs9IiAtICIrbysiOiIrcyk7Zm9yKHZhciBhPUVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksbD0wO2w8aS5sZW5ndGg7bCsrKXRoaXNbaVtsXV09YVtpW2xdXTtFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxuKSxyJiYodGhpcy5saW5lTnVtYmVyPW8sdGhpcy5jb2x1bW49cyl9ZS5fX2VzTW9kdWxlPSEwO3ZhciBpPVsiZGVzY3JpcHRpb24iLCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJtZXNzYWdlIiwibmFtZSIsIm51bWJlciIsInN0YWNrIl07bi5wcm90b3R5cGU9bmV3IEVycm9yLGVbImRlZmF1bHQiXT1uLHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSh0KXtzWyJkZWZhdWx0Il0odCksbFsiZGVmYXVsdCJdKHQpLHVbImRlZmF1bHQiXSh0KSxoWyJkZWZhdWx0Il0odCksZlsiZGVmYXVsdCJdKHQpLF9bImRlZmF1bHQiXSh0KSx2WyJkZWZhdWx0Il0odCl9dmFyIHI9bigxKVsiZGVmYXVsdCJdO2UuX19lc01vZHVsZT0hMCxlLnJlZ2lzdGVyRGVmYXVsdEhlbHBlcnM9aTt2YXIgbz1uKDgpLHM9cihvKSxhPW4oOSksbD1yKGEpLGM9bigxMCksdT1yKGMpLGQ9bigxMSksaD1yKGQpLHA9bigxMiksZj1yKHApLG09bigxMyksXz1yKG0pLGc9bigxNCksdj1yKGcpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2UuX19lc01vZHVsZT0hMDt2YXIgaT1uKDUpO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt0LnJlZ2lzdGVySGVscGVyKCJibG9ja0hlbHBlck1pc3NpbmciLGZ1bmN0aW9uKGUsbil7dmFyIHI9bi5pbnZlcnNlLG89bi5mbjtpZihlPT09ITApcmV0dXJuIG8odGhpcyk7aWYoZT09PSExfHxudWxsPT1lKXJldHVybiByKHRoaXMpO2lmKGkuaXNBcnJheShlKSlyZXR1cm4gZS5sZW5ndGg+MD8obi5pZHMmJihuLmlkcz1bbi5uYW1lXSksdC5oZWxwZXJzLmVhY2goZSxuKSk6cih0aGlzKTtpZihuLmRhdGEmJm4uaWRzKXt2YXIgcz1pLmNyZWF0ZUZyYW1lKG4uZGF0YSk7cy5jb250ZXh0UGF0aD1pLmFwcGVuZENvbnRleHRQYXRoKG4uZGF0YS5jb250ZXh0UGF0aCxuLm5hbWUpLG49e2RhdGE6c319cmV0dXJuIG8oZSxuKX0pfSx0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciBpPW4oMSlbImRlZmF1bHQiXTtlLl9fZXNNb2R1bGU9ITA7dmFyIHI9big1KSxvPW4oNikscz1pKG8pO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt0LnJlZ2lzdGVySGVscGVyKCJlYWNoIixmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSxuLG8pe2MmJihjLmtleT1lLGMuaW5kZXg9bixjLmZpcnN0PTA9PT1uLGMubGFzdD0hIW8sdSYmKGMuY29udGV4dFBhdGg9dStlKSksbCs9aSh0W2VdLHtkYXRhOmMsYmxvY2tQYXJhbXM6ci5ibG9ja1BhcmFtcyhbdFtlXSxlXSxbdStlLG51bGxdKX0pfWlmKCFlKXRocm93IG5ldyBzWyJkZWZhdWx0Il0oIk11c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCIpO3ZhciBpPWUuZm4sbz1lLmludmVyc2UsYT0wLGw9IiIsYz12b2lkIDAsdT12b2lkIDA7aWYoZS5kYXRhJiZlLmlkcyYmKHU9ci5hcHBlbmRDb250ZXh0UGF0aChlLmRhdGEuY29udGV4dFBhdGgsZS5pZHNbMF0pKyIuIiksci5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwodGhpcykpLGUuZGF0YSYmKGM9ci5jcmVhdGVGcmFtZShlLmRhdGEpKSx0JiYib2JqZWN0Ij09dHlwZW9mIHQpaWYoci5pc0FycmF5KHQpKWZvcih2YXIgZD10Lmxlbmd0aDthPGQ7YSsrKWEgaW4gdCYmbihhLGEsYT09PXQubGVuZ3RoLTEpO2Vsc2V7dmFyIGg9dm9pZCAwO2Zvcih2YXIgcCBpbiB0KXQuaGFzT3duUHJvcGVydHkocCkmJih2b2lkIDAhPT1oJiZuKGgsYS0xKSxoPXAsYSsrKTt2b2lkIDAhPT1oJiZuKGgsYS0xLCEwKX1yZXR1cm4gMD09PWEmJihsPW8odGhpcykpLGx9KX0sdC5leHBvcnRzPWVbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1uKDEpWyJkZWZhdWx0Il07ZS5fX2VzTW9kdWxlPSEwO3ZhciByPW4oNiksbz1pKHIpO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt0LnJlZ2lzdGVySGVscGVyKCJoZWxwZXJNaXNzaW5nIixmdW5jdGlvbigpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBvWyJkZWZhdWx0Il0oJ01pc3NpbmcgaGVscGVyOiAiJythcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXS5uYW1lKyciJyl9KX0sdC5leHBvcnRzPWVbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtlLl9fZXNNb2R1bGU9ITA7dmFyIGk9big1KTtlWyJkZWZhdWx0Il09ZnVuY3Rpb24odCl7dC5yZWdpc3RlckhlbHBlcigiaWYiLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkuaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKHRoaXMpKSwhZS5oYXNoLmluY2x1ZGVaZXJvJiYhdHx8aS5pc0VtcHR5KHQpP2UuaW52ZXJzZSh0aGlzKTplLmZuKHRoaXMpfSksdC5yZWdpc3RlckhlbHBlcigidW5sZXNzIixmdW5jdGlvbihlLG4pe3JldHVybiB0LmhlbHBlcnNbImlmIl0uY2FsbCh0aGlzLGUse2ZuOm4uaW52ZXJzZSxpbnZlcnNlOm4uZm4saGFzaDpuLmhhc2h9KX0pfSx0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtlLl9fZXNNb2R1bGU9ITAsZVsiZGVmYXVsdCJdPWZ1bmN0aW9uKHQpe3QucmVnaXN0ZXJIZWxwZXIoImxvZyIsZnVuY3Rpb24oKXtmb3IodmFyIGU9W3ZvaWQgMF0sbj1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoLTE7aSsrKWUucHVzaChhcmd1bWVudHNbaV0pO3ZhciByPTE7bnVsbCE9bi5oYXNoLmxldmVsP3I9bi5oYXNoLmxldmVsOm4uZGF0YSYmbnVsbCE9bi5kYXRhLmxldmVsJiYocj1uLmRhdGEubGV2ZWwpLGVbMF09cix0LmxvZy5hcHBseSh0LGUpfSl9LHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2UuX19lc01vZHVsZT0hMCxlWyJkZWZhdWx0Il09ZnVuY3Rpb24odCl7dC5yZWdpc3RlckhlbHBlcigibG9va3VwIixmdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0W2VdfSl9LHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciBpPW4oNSk7ZVsiZGVmYXVsdCJdPWZ1bmN0aW9uKHQpe3QucmVnaXN0ZXJIZWxwZXIoIndpdGgiLGZ1bmN0aW9uKHQsZSl7aS5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwodGhpcykpO3ZhciBuPWUuZm47aWYoaS5pc0VtcHR5KHQpKXJldHVybiBlLmludmVyc2UodGhpcyk7dmFyIHI9ZS5kYXRhO3JldHVybiBlLmRhdGEmJmUuaWRzJiYocj1pLmNyZWF0ZUZyYW1lKGUuZGF0YSksci5jb250ZXh0UGF0aD1pLmFwcGVuZENvbnRleHRQYXRoKGUuZGF0YS5jb250ZXh0UGF0aCxlLmlkc1swXSkpLG4odCx7ZGF0YTpyLGJsb2NrUGFyYW1zOmkuYmxvY2tQYXJhbXMoW3RdLFtyJiZyLmNvbnRleHRQYXRoXSl9KX0pfSx0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkodCl7c1siZGVmYXVsdCJdKHQpfXZhciByPW4oMSlbImRlZmF1bHQiXTtlLl9fZXNNb2R1bGU9ITAsZS5yZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzPWk7dmFyIG89bigxNikscz1yKG8pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2UuX19lc01vZHVsZT0hMDt2YXIgaT1uKDUpO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt0LnJlZ2lzdGVyRGVjb3JhdG9yKCJpbmxpbmUiLGZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQ7cmV0dXJuIGUucGFydGlhbHN8fChlLnBhcnRpYWxzPXt9LG89ZnVuY3Rpb24ocixvKXt2YXIgcz1uLnBhcnRpYWxzO24ucGFydGlhbHM9aS5leHRlbmQoe30scyxlLnBhcnRpYWxzKTt2YXIgYT10KHIsbyk7cmV0dXJuIG4ucGFydGlhbHM9cyxhfSksZS5wYXJ0aWFsc1tyLmFyZ3NbMF1dPXIuZm4sb30pfSx0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2UuX19lc01vZHVsZT0hMDt2YXIgaT1uKDUpLHI9e21ldGhvZE1hcDpbImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciJdLGxldmVsOiJpbmZvIixsb29rdXBMZXZlbDpmdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBlPWkuaW5kZXhPZihyLm1ldGhvZE1hcCx0LnRvTG93ZXJDYXNlKCkpO3Q9ZT49MD9lOnBhcnNlSW50KHQsMTApfXJldHVybiB0fSxsb2c6ZnVuY3Rpb24odCl7aWYodD1yLmxvb2t1cExldmVsKHQpLCJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmci5sb29rdXBMZXZlbChyLmxldmVsKTw9dCl7dmFyIGU9ci5tZXRob2RNYXBbdF07Y29uc29sZVtlXXx8KGU9ImxvZyIpO2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkobj4xP24tMTowKSxvPTE7bzxuO28rKylpW28tMV09YXJndW1lbnRzW29dO2NvbnNvbGVbZV0uYXBwbHkoY29uc29sZSxpKX19fTtlWyJkZWZhdWx0Il09cix0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKHQpe3RoaXMuc3RyaW5nPXR9ZS5fX2VzTW9kdWxlPSEwLG4ucHJvdG90eXBlLnRvU3RyaW5nPW4ucHJvdG90eXBlLnRvSFRNTD1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMuc3RyaW5nfSxlWyJkZWZhdWx0Il09bix0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkodCl7dmFyIGU9dCYmdFswXXx8MSxuPWcuQ09NUElMRVJfUkVWSVNJT047aWYoZSE9PW4pe2lmKGU8bil7dmFyIGk9Zy5SRVZJU0lPTl9DSEFOR0VTW25dLHI9Zy5SRVZJU0lPTl9DSEFOR0VTW2VdO3Rocm93IG5ldyBfWyJkZWZhdWx0Il0oIlRlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGFuIG9sZGVyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuIFBsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKCIraSsiKSBvciBkb3duZ3JhZGUgeW91ciBydW50aW1lIHRvIGFuIG9sZGVyIHZlcnNpb24gKCIrcisiKS4iKX10aHJvdyBuZXcgX1siZGVmYXVsdCJdKCJUZW1wbGF0ZSB3YXMgcHJlY29tcGlsZWQgd2l0aCBhIG5ld2VyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuIFBsZWFzZSB1cGRhdGUgeW91ciBydW50aW1lIHRvIGEgbmV3ZXIgdmVyc2lvbiAoIit0WzFdKyIpLiIpfX1mdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbihuLGkscil7ci5oYXNoJiYoaT1mLmV4dGVuZCh7fSxpLHIuaGFzaCksci5pZHMmJihyLmlkc1swXT0hMCkpLG49ZS5WTS5yZXNvbHZlUGFydGlhbC5jYWxsKHRoaXMsbixpLHIpO3ZhciBvPWUuVk0uaW52b2tlUGFydGlhbC5jYWxsKHRoaXMsbixpLHIpO2lmKG51bGw9PW8mJmUuY29tcGlsZSYmKHIucGFydGlhbHNbci5uYW1lXT1lLmNvbXBpbGUobix0LmNvbXBpbGVyT3B0aW9ucyxlKSxvPXIucGFydGlhbHNbci5uYW1lXShpLHIpKSxudWxsIT1vKXtpZihyLmluZGVudCl7Zm9yKHZhciBzPW8uc3BsaXQoIlxuIiksYT0wLGw9cy5sZW5ndGg7YTxsJiYoc1thXXx8YSsxIT09bCk7YSsrKXNbYV09ci5pbmRlbnQrc1thXTtvPXMuam9pbigiXG4iKX1yZXR1cm4gb310aHJvdyBuZXcgX1siZGVmYXVsdCJdKCJUaGUgcGFydGlhbCAiK3IubmFtZSsiIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGUiKX1mdW5jdGlvbiBpKGUpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIiIrdC5tYWluKHIsZSxyLmhlbHBlcnMsci5wYXJ0aWFscyxzLGwsYSl9dmFyIG89YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXSxzPW8uZGF0YTtpLl9zZXR1cChvKSwhby5wYXJ0aWFsJiZ0LnVzZURhdGEmJihzPWMoZSxzKSk7dmFyIGE9dm9pZCAwLGw9dC51c2VCbG9ja1BhcmFtcz9bXTp2b2lkIDA7cmV0dXJuIHQudXNlRGVwdGhzJiYoYT1vLmRlcHRocz9lIT09by5kZXB0aHNbMF0/W2VdLmNvbmNhdChvLmRlcHRocyk6by5kZXB0aHM6W2VdKSwobj11KHQubWFpbixuLHIsby5kZXB0aHN8fFtdLHMsbCkpKGUsbyl9aWYoIWUpdGhyb3cgbmV3IF9bImRlZmF1bHQiXSgiTm8gZW52aXJvbm1lbnQgcGFzc2VkIHRvIHRlbXBsYXRlIik7aWYoIXR8fCF0Lm1haW4pdGhyb3cgbmV3IF9bImRlZmF1bHQiXSgiVW5rbm93biB0ZW1wbGF0ZSBvYmplY3Q6ICIrdHlwZW9mIHQpO3QubWFpbi5kZWNvcmF0b3I9dC5tYWluX2QsZS5WTS5jaGVja1JldmlzaW9uKHQuY29tcGlsZXIpO3ZhciByPXtzdHJpY3Q6ZnVuY3Rpb24odCxlKXtpZighKGUgaW4gdCkpdGhyb3cgbmV3IF9bImRlZmF1bHQiXSgnIicrZSsnIiBub3QgZGVmaW5lZCBpbiAnK3QpO3JldHVybiB0W2VdfSxsb29rdXA6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5sZW5ndGgsaT0wO2k8bjtpKyspaWYodFtpXSYmbnVsbCE9dFtpXVtlXSlyZXR1cm4gdFtpXVtlXX0sbGFtYmRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dC5jYWxsKGUpOnR9LGVzY2FwZUV4cHJlc3Npb246Zi5lc2NhcGVFeHByZXNzaW9uLGludm9rZVBhcnRpYWw6bixmbjpmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLmRlY29yYXRvcj10W2UrIl9kIl0sbn0scHJvZ3JhbXM6W10scHJvZ3JhbTpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBzPXRoaXMucHJvZ3JhbXNbdF0sYT10aGlzLmZuKHQpO3JldHVybiBlfHxyfHxpfHxuP3M9byh0aGlzLHQsYSxlLG4saSxyKTpzfHwocz10aGlzLnByb2dyYW1zW3RdPW8odGhpcyx0LGEpKSxzfSxkYXRhOmZ1bmN0aW9uKHQsZSl7Zm9yKDt0JiZlLS07KXQ9dC5fcGFyZW50O3JldHVybiB0fSxtZXJnZTpmdW5jdGlvbih0LGUpe3ZhciBuPXR8fGU7cmV0dXJuIHQmJmUmJnQhPT1lJiYobj1mLmV4dGVuZCh7fSxlLHQpKSxufSxub29wOmUuVk0ubm9vcCxjb21waWxlckluZm86dC5jb21waWxlcn07cmV0dXJuIGkuaXNUb3A9ITAsaS5fc2V0dXA9ZnVuY3Rpb24obil7bi5wYXJ0aWFsPyhyLmhlbHBlcnM9bi5oZWxwZXJzLHIucGFydGlhbHM9bi5wYXJ0aWFscyxyLmRlY29yYXRvcnM9bi5kZWNvcmF0b3JzKTooci5oZWxwZXJzPXIubWVyZ2Uobi5oZWxwZXJzLGUuaGVscGVycyksdC51c2VQYXJ0aWFsJiYoci5wYXJ0aWFscz1yLm1lcmdlKG4ucGFydGlhbHMsZS5wYXJ0aWFscykpLCh0LnVzZVBhcnRpYWx8fHQudXNlRGVjb3JhdG9ycykmJihyLmRlY29yYXRvcnM9ci5tZXJnZShuLmRlY29yYXRvcnMsZS5kZWNvcmF0b3JzKSkpfSxpLl9jaGlsZD1mdW5jdGlvbihlLG4saSxzKXtpZih0LnVzZUJsb2NrUGFyYW1zJiYhaSl0aHJvdyBuZXcgX1siZGVmYXVsdCJdKCJtdXN0IHBhc3MgYmxvY2sgcGFyYW1zIik7aWYodC51c2VEZXB0aHMmJiFzKXRocm93IG5ldyBfWyJkZWZhdWx0Il0oIm11c3QgcGFzcyBwYXJlbnQgZGVwdGhzIik7cmV0dXJuIG8ocixlLHRbZV0sbiwwLGkscyl9LGl9ZnVuY3Rpb24gbyh0LGUsbixpLHIsbyxzKXtmdW5jdGlvbiBhKGUpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT97fTphcmd1bWVudHNbMV0sYT1zO3JldHVybiBzJiZlIT09c1swXSYmKGE9W2VdLmNvbmNhdChzKSksbih0LGUsdC5oZWxwZXJzLHQucGFydGlhbHMsci5kYXRhfHxpLG8mJltyLmJsb2NrUGFyYW1zXS5jb25jYXQobyksYSl9cmV0dXJuIGE9dShuLGEsdCxzLGksbyksYS5wcm9ncmFtPWUsYS5kZXB0aD1zP3MubGVuZ3RoOjAsYS5ibG9ja1BhcmFtcz1yfHwwLGF9ZnVuY3Rpb24gcyh0LGUsbil7cmV0dXJuIHQ/dC5jYWxsfHxuLm5hbWV8fChuLm5hbWU9dCx0PW4ucGFydGlhbHNbdF0pOnQ9IkBwYXJ0aWFsLWJsb2NrIj09PW4ubmFtZT9uLmRhdGFbInBhcnRpYWwtYmxvY2siXTpuLnBhcnRpYWxzW24ubmFtZV0sdH1mdW5jdGlvbiBhKHQsZSxuKXtuLnBhcnRpYWw9ITAsbi5pZHMmJihuLmRhdGEuY29udGV4dFBhdGg9bi5pZHNbMF18fG4uZGF0YS5jb250ZXh0UGF0aCk7dmFyIGk9dm9pZCAwO2lmKG4uZm4mJm4uZm4hPT1sJiYobi5kYXRhPWcuY3JlYXRlRnJhbWUobi5kYXRhKSxpPW4uZGF0YVsicGFydGlhbC1ibG9jayJdPW4uZm4saS5wYXJ0aWFscyYmKG4ucGFydGlhbHM9Zi5leHRlbmQoe30sbi5wYXJ0aWFscyxpLnBhcnRpYWxzKSkpLHZvaWQgMD09PXQmJmkmJih0PWkpLHZvaWQgMD09PXQpdGhyb3cgbmV3IF9bImRlZmF1bHQiXSgiVGhlIHBhcnRpYWwgIituLm5hbWUrIiBjb3VsZCBub3QgYmUgZm91bmQiKTtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pcmV0dXJuIHQoZSxuKX1mdW5jdGlvbiBsKCl7cmV0dXJuIiJ9ZnVuY3Rpb24gYyh0LGUpe3JldHVybiBlJiYicm9vdCJpbiBlfHwoZT1lP2cuY3JlYXRlRnJhbWUoZSk6e30sZS5yb290PXQpLGV9ZnVuY3Rpb24gdSh0LGUsbixpLHIsbyl7aWYodC5kZWNvcmF0b3Ipe3ZhciBzPXt9O2U9dC5kZWNvcmF0b3IoZSxzLG4saSYmaVswXSxyLG8saSksZi5leHRlbmQoZSxzKX1yZXR1cm4gZX12YXIgZD1uKDMpWyJkZWZhdWx0Il0saD1uKDEpWyJkZWZhdWx0Il07ZS5fX2VzTW9kdWxlPSEwLGUuY2hlY2tSZXZpc2lvbj1pLGUudGVtcGxhdGU9cixlLndyYXBQcm9ncmFtPW8sZS5yZXNvbHZlUGFydGlhbD1zLGUuaW52b2tlUGFydGlhbD1hLGUubm9vcD1sO3ZhciBwPW4oNSksZj1kKHApLG09big2KSxfPWgobSksZz1uKDQpfSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihuKXsidXNlIHN0cmljdCI7ZS5fX2VzTW9kdWxlPSEwLGVbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt2YXIgZT0idW5kZWZpbmVkIiE9dHlwZW9mIG4/bjp3aW5kb3csaT1lLkhhbmRsZWJhcnM7dC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuSGFuZGxlYmFycz09PXQmJihlLkhhbmRsZWJhcnM9aSksdH19LHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2UuX19lc01vZHVsZT0hMDt2YXIgbj17aGVscGVyczp7aGVscGVyRXhwcmVzc2lvbjpmdW5jdGlvbih0KXtyZXR1cm4iU3ViRXhwcmVzc2lvbiI9PT10LnR5cGV8fCgiTXVzdGFjaGVTdGF0ZW1lbnQiPT09dC50eXBlfHwiQmxvY2tTdGF0ZW1lbnQiPT09dC50eXBlKSYmISEodC5wYXJhbXMmJnQucGFyYW1zLmxlbmd0aHx8dC5oYXNoKX0sc2NvcGVkSWQ6ZnVuY3Rpb24odCl7cmV0dXJuL15cLnx0aGlzXGIvLnRlc3QodC5vcmlnaW5hbCl9LHNpbXBsZUlkOmZ1bmN0aW9uKHQpe3JldHVybiAxPT09dC5wYXJ0cy5sZW5ndGgmJiFuLmhlbHBlcnMuc2NvcGVkSWQodCkmJiF0LmRlcHRofX19O2VbImRlZmF1bHQiXT1uLHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSh0LGUpe2lmKCJQcm9ncmFtIj09PXQudHlwZSlyZXR1cm4gdDthWyJkZWZhdWx0Il0ueXk9cCxwLmxvY0luZm89ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBwLlNvdXJjZUxvY2F0aW9uKGUmJmUuc3JjTmFtZSx0KX07dmFyIG49bmV3IGNbImRlZmF1bHQiXShlKTtyZXR1cm4gbi5hY2NlcHQoYVsiZGVmYXVsdCJdLnBhcnNlKHQpKX12YXIgcj1uKDEpWyJkZWZhdWx0Il0sbz1uKDMpWyJkZWZhdWx0Il07ZS5fX2VzTW9kdWxlPSEwLGUucGFyc2U9aTt2YXIgcz1uKDIzKSxhPXIocyksbD1uKDI0KSxjPXIobCksdT1uKDI2KSxkPW8odSksaD1uKDUpO2UucGFyc2VyPWFbImRlZmF1bHQiXTt2YXIgcD17fTtoLmV4dGVuZChwLGQpfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLnl5PXt9fXZhciBlPXt0cmFjZTpmdW5jdGlvbigpe30seXk6e30sc3ltYm9sc186e2Vycm9yOjIscm9vdDozLHByb2dyYW06NCxFT0Y6NSxwcm9ncmFtX3JlcGV0aXRpb24wOjYsc3RhdGVtZW50OjcsbXVzdGFjaGU6OCxibG9jazo5LHJhd0Jsb2NrOjEwLHBhcnRpYWw6MTEscGFydGlhbEJsb2NrOjEyLGNvbnRlbnQ6MTMsQ09NTUVOVDoxNCxDT05URU5UOjE1LG9wZW5SYXdCbG9jazoxNixyYXdCbG9ja19yZXBldGl0aW9uX3BsdXMwOjE3LEVORF9SQVdfQkxPQ0s6MTgsT1BFTl9SQVdfQkxPQ0s6MTksaGVscGVyTmFtZToyMCxvcGVuUmF3QmxvY2tfcmVwZXRpdGlvbjA6MjEsb3BlblJhd0Jsb2NrX29wdGlvbjA6MjIsQ0xPU0VfUkFXX0JMT0NLOjIzLG9wZW5CbG9jazoyNCxibG9ja19vcHRpb24wOjI1LGNsb3NlQmxvY2s6MjYsb3BlbkludmVyc2U6MjcsYmxvY2tfb3B0aW9uMToyOCxPUEVOX0JMT0NLOjI5LG9wZW5CbG9ja19yZXBldGl0aW9uMDozMCxvcGVuQmxvY2tfb3B0aW9uMDozMSxvcGVuQmxvY2tfb3B0aW9uMTozMixDTE9TRTozMyxPUEVOX0lOVkVSU0U6MzQsb3BlbkludmVyc2VfcmVwZXRpdGlvbjA6MzUsb3BlbkludmVyc2Vfb3B0aW9uMDozNixvcGVuSW52ZXJzZV9vcHRpb24xOjM3LG9wZW5JbnZlcnNlQ2hhaW46MzgsT1BFTl9JTlZFUlNFX0NIQUlOOjM5LG9wZW5JbnZlcnNlQ2hhaW5fcmVwZXRpdGlvbjA6NDAsb3BlbkludmVyc2VDaGFpbl9vcHRpb24wOjQxLG9wZW5JbnZlcnNlQ2hhaW5fb3B0aW9uMTo0MixpbnZlcnNlQW5kUHJvZ3JhbTo0MyxJTlZFUlNFOjQ0LGludmVyc2VDaGFpbjo0NSxpbnZlcnNlQ2hhaW5fb3B0aW9uMDo0NixPUEVOX0VOREJMT0NLOjQ3LE9QRU46NDgsbXVzdGFjaGVfcmVwZXRpdGlvbjA6NDksbXVzdGFjaGVfb3B0aW9uMDo1MCxPUEVOX1VORVNDQVBFRDo1MSxtdXN0YWNoZV9yZXBldGl0aW9uMTo1MixtdXN0YWNoZV9vcHRpb24xOjUzLENMT1NFX1VORVNDQVBFRDo1NCxPUEVOX1BBUlRJQUw6NTUscGFydGlhbE5hbWU6NTYscGFydGlhbF9yZXBldGl0aW9uMDo1NyxwYXJ0aWFsX29wdGlvbjA6NTgsb3BlblBhcnRpYWxCbG9jazo1OSxPUEVOX1BBUlRJQUxfQkxPQ0s6NjAsb3BlblBhcnRpYWxCbG9ja19yZXBldGl0aW9uMDo2MSxvcGVuUGFydGlhbEJsb2NrX29wdGlvbjA6NjIscGFyYW06NjMsc2V4cHI6NjQsT1BFTl9TRVhQUjo2NSxzZXhwcl9yZXBldGl0aW9uMDo2NixzZXhwcl9vcHRpb24wOjY3LENMT1NFX1NFWFBSOjY4LGhhc2g6NjksaGFzaF9yZXBldGl0aW9uX3BsdXMwOjcwLGhhc2hTZWdtZW50OjcxLElEOjcyLEVRVUFMUzo3MyxibG9ja1BhcmFtczo3NCxPUEVOX0JMT0NLX1BBUkFNUzo3NSxibG9ja1BhcmFtc19yZXBldGl0aW9uX3BsdXMwOjc2LENMT1NFX0JMT0NLX1BBUkFNUzo3NyxwYXRoOjc4LGRhdGFOYW1lOjc5LFNUUklORzo4MCxOVU1CRVI6ODEsQk9PTEVBTjo4MixVTkRFRklORUQ6ODMsTlVMTDo4NCxEQVRBOjg1LHBhdGhTZWdtZW50czo4NixTRVA6ODcsJGFjY2VwdDowLCRlbmQ6MX0sdGVybWluYWxzXzp7MjoiZXJyb3IiLDU6IkVPRiIsMTQ6IkNPTU1FTlQiLDE1OiJDT05URU5UIiwxODoiRU5EX1JBV19CTE9DSyIsMTk6Ik9QRU5fUkFXX0JMT0NLIiwyMzoiQ0xPU0VfUkFXX0JMT0NLIiwyOToiT1BFTl9CTE9DSyIsMzM6IkNMT1NFIiwzNDoiT1BFTl9JTlZFUlNFIiwzOToiT1BFTl9JTlZFUlNFX0NIQUlOIiw0NDoiSU5WRVJTRSIsNDc6Ik9QRU5fRU5EQkxPQ0siLDQ4OiJPUEVOIiw1MToiT1BFTl9VTkVTQ0FQRUQiLDU0OiJDTE9TRV9VTkVTQ0FQRUQiLDU1OiJPUEVOX1BBUlRJQUwiLDYwOiJPUEVOX1BBUlRJQUxfQkxPQ0siLDY1OiJPUEVOX1NFWFBSIiw2ODoiQ0xPU0VfU0VYUFIiLDcyOiJJRCIsNzM6IkVRVUFMUyIsNzU6Ik9QRU5fQkxPQ0tfUEFSQU1TIiw3NzoiQ0xPU0VfQkxPQ0tfUEFSQU1TIiw4MDoiU1RSSU5HIiw4MToiTlVNQkVSIiw4MjoiQk9PTEVBTiIsODM6IlVOREVGSU5FRCIsODQ6Ik5VTEwiLDg1OiJEQVRBIiw4NzoiU0VQIn0scHJvZHVjdGlvbnNfOlswLFszLDJdLFs0LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFsxMywxXSxbMTAsM10sWzE2LDVdLFs5LDRdLFs5LDRdLFsyNCw2XSxbMjcsNl0sWzM4LDZdLFs0MywyXSxbNDUsM10sWzQ1LDFdLFsyNiwzXSxbOCw1XSxbOCw1XSxbMTEsNV0sWzEyLDNdLFs1OSw1XSxbNjMsMV0sWzYzLDFdLFs2NCw1XSxbNjksMV0sWzcxLDNdLFs3NCwzXSxbMjAsMV0sWzIwLDFdLFsyMCwxXSxbMjAsMV0sWzIwLDFdLFsyMCwxXSxbMjAsMV0sWzU2LDFdLFs1NiwxXSxbNzksMl0sWzc4LDFdLFs4NiwzXSxbODYsMV0sWzYsMF0sWzYsMl0sWzE3LDFdLFsxNywyXSxbMjEsMF0sWzIxLDJdLFsyMiwwXSxbMjIsMV0sWzI1LDBdLFsyNSwxXSxbMjgsMF0sWzI4LDFdLFszMCwwXSxbMzAsMl0sWzMxLDBdLFszMSwxXSxbMzIsMF0sWzMyLDFdLFszNSwwXSxbMzUsMl0sWzM2LDBdLFszNiwxXSxbMzcsMF0sWzM3LDFdLFs0MCwwXSxbNDAsMl0sWzQxLDBdLFs0MSwxXSxbNDIsMF0sWzQyLDFdLFs0NiwwXSxbNDYsMV0sWzQ5LDBdLFs0OSwyXSxbNTAsMF0sWzUwLDFdLFs1MiwwXSxbNTIsMl0sWzUzLDBdLFs1MywxXSxbNTcsMF0sWzU3LDJdLFs1OCwwXSxbNTgsMV0sWzYxLDBdLFs2MSwyXSxbNjIsMF0sWzYyLDFdLFs2NiwwXSxbNjYsMl0sWzY3LDBdLFs2NywxXSxbNzAsMV0sWzcwLDJdLFs3NiwxXSxbNzYsMl1dLHBlcmZvcm1BY3Rpb246ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9by5sZW5ndGgtMTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBvW2EtMV07Y2FzZSAyOnRoaXMuJD1pLnByZXBhcmVQcm9ncmFtKG9bYV0pO2JyZWFrO2Nhc2UgMzp0aGlzLiQ9b1thXTticmVhaztjYXNlIDQ6dGhpcy4kPW9bYV07YnJlYWs7Y2FzZSA1OnRoaXMuJD1vW2FdO2JyZWFrO2Nhc2UgNjp0aGlzLiQ9b1thXTticmVhaztjYXNlIDc6dGhpcy4kPW9bYV07YnJlYWs7Y2FzZSA4OnRoaXMuJD1vW2FdO2JyZWFrO2Nhc2UgOTp0aGlzLiQ9e3R5cGU6IkNvbW1lbnRTdGF0ZW1lbnQiLHZhbHVlOmkuc3RyaXBDb21tZW50KG9bYV0pLHN0cmlwOmkuc3RyaXBGbGFncyhvW2FdLG9bYV0pLGxvYzppLmxvY0luZm8odGhpcy5fJCl9O2JyZWFrO2Nhc2UgMTA6dGhpcy4kPXt0eXBlOiJDb250ZW50U3RhdGVtZW50IixvcmlnaW5hbDpvW2FdLHZhbHVlOm9bYV0sbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAxMTp0aGlzLiQ9aS5wcmVwYXJlUmF3QmxvY2sob1thLTJdLG9bYS0xXSxvW2FdLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMTI6dGhpcy4kPXtwYXRoOm9bYS0zXSxwYXJhbXM6b1thLTJdLGhhc2g6b1thLTFdfTticmVhaztjYXNlIDEzOnRoaXMuJD1pLnByZXBhcmVCbG9jayhvW2EtM10sb1thLTJdLG9bYS0xXSxvW2FdLCExLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMTQ6dGhpcy4kPWkucHJlcGFyZUJsb2NrKG9bYS0zXSxvW2EtMl0sb1thLTFdLG9bYV0sITAsdGhpcy5fJCk7YnJlYWs7Y2FzZSAxNTp0aGlzLiQ9e29wZW46b1thLTVdLHBhdGg6b1thLTRdLHBhcmFtczpvW2EtM10saGFzaDpvW2EtMl0sYmxvY2tQYXJhbXM6b1thLTFdLHN0cmlwOmkuc3RyaXBGbGFncyhvW2EtNV0sb1thXSl9O2JyZWFrO2Nhc2UgMTY6dGhpcy4kPXtwYXRoOm9bYS00XSxwYXJhbXM6b1thLTNdLGhhc2g6b1thLTJdLGJsb2NrUGFyYW1zOm9bYS0xXSxzdHJpcDppLnN0cmlwRmxhZ3Mob1thLTVdLG9bYV0pfTticmVhaztjYXNlIDE3OnRoaXMuJD17cGF0aDpvW2EtNF0scGFyYW1zOm9bYS0zXSxoYXNoOm9bYS0yXSxibG9ja1BhcmFtczpvW2EtMV0sc3RyaXA6aS5zdHJpcEZsYWdzKG9bYS01XSxvW2FdKX07YnJlYWs7Y2FzZSAxODp0aGlzLiQ9e3N0cmlwOmkuc3RyaXBGbGFncyhvW2EtMV0sb1thLTFdKSxwcm9ncmFtOm9bYV19O2JyZWFrO2Nhc2UgMTk6dmFyIGw9aS5wcmVwYXJlQmxvY2sob1thLTJdLG9bYS0xXSxvW2FdLG9bYV0sITEsdGhpcy5fJCksYz1pLnByZXBhcmVQcm9ncmFtKFtsXSxvW2EtMV0ubG9jKTtjLmNoYWluZWQ9ITAsdGhpcy4kPXtzdHJpcDpvW2EtMl0uc3RyaXAscHJvZ3JhbTpjLGNoYWluOiEwfTticmVhaztjYXNlIDIwOnRoaXMuJD1vW2FdO2JyZWFrO2Nhc2UgMjE6dGhpcy4kPXtwYXRoOm9bYS0xXSxzdHJpcDppLnN0cmlwRmxhZ3Mob1thLTJdLG9bYV0pfTticmVhaztjYXNlIDIyOnRoaXMuJD1pLnByZXBhcmVNdXN0YWNoZShvW2EtM10sb1thLTJdLG9bYS0xXSxvW2EtNF0saS5zdHJpcEZsYWdzKG9bYS00XSxvW2FdKSx0aGlzLl8kKTticmVhaztjYXNlIDIzOnRoaXMuJD1pLnByZXBhcmVNdXN0YWNoZShvW2EtM10sb1thLTJdLG9bYS0xXSxvW2EtNF0saS5zdHJpcEZsYWdzKG9bYS00XSxvW2FdKSx0aGlzLl8kKTticmVhaztjYXNlIDI0OnRoaXMuJD17dHlwZToiUGFydGlhbFN0YXRlbWVudCIsbmFtZTpvW2EtM10scGFyYW1zOm9bYS0yXSxoYXNoOm9bYS0xXSxpbmRlbnQ6IiIsc3RyaXA6aS5zdHJpcEZsYWdzKG9bYS00XSxvW2FdKSxsb2M6aS5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDI1OnRoaXMuJD1pLnByZXBhcmVQYXJ0aWFsQmxvY2sob1thLTJdLG9bYS0xXSxvW2FdLHRoaXMuXyQpO2JyZWFrO2Nhc2UgMjY6dGhpcy4kPXtwYXRoOm9bYS0zXSxwYXJhbXM6b1thLTJdLGhhc2g6b1thLTFdLHN0cmlwOmkuc3RyaXBGbGFncyhvW2EtNF0sb1thXSl9O2JyZWFrO2Nhc2UgMjc6dGhpcy4kPW9bYV07YnJlYWs7Y2FzZSAyODp0aGlzLiQ9b1thXTticmVhaztjYXNlIDI5OnRoaXMuJD17dHlwZToiU3ViRXhwcmVzc2lvbiIscGF0aDpvW2EtM10scGFyYW1zOm9bYS0yXSxoYXNoOm9bYS0xXSxsb2M6aS5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDMwOnRoaXMuJD17dHlwZToiSGFzaCIscGFpcnM6b1thXSxsb2M6aS5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDMxOnRoaXMuJD17dHlwZToiSGFzaFBhaXIiLGtleTppLmlkKG9bYS0yXSksdmFsdWU6b1thXSxsb2M6aS5sb2NJbmZvKHRoaXMuXyQpfTticmVhaztjYXNlIDMyOnRoaXMuJD1pLmlkKG9bYS0xXSk7YnJlYWs7Y2FzZSAzMzp0aGlzLiQ9b1thXTticmVhaztjYXNlIDM0OnRoaXMuJD1vW2FdO2JyZWFrO2Nhc2UgMzU6dGhpcy4kPXt0eXBlOiJTdHJpbmdMaXRlcmFsIix2YWx1ZTpvW2FdLG9yaWdpbmFsOm9bYV0sbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzNjp0aGlzLiQ9e3R5cGU6Ik51bWJlckxpdGVyYWwiLHZhbHVlOk51bWJlcihvW2FdKSxvcmlnaW5hbDpOdW1iZXIob1thXSksbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzNzp0aGlzLiQ9e3R5cGU6IkJvb2xlYW5MaXRlcmFsIix2YWx1ZToidHJ1ZSI9PT1vW2FdLG9yaWdpbmFsOiJ0cnVlIj09PW9bYV0sbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzODp0aGlzLiQ9e3R5cGU6IlVuZGVmaW5lZExpdGVyYWwiLG9yaWdpbmFsOnZvaWQgMCx2YWx1ZTp2b2lkIDAsbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSAzOTp0aGlzLiQ9e3R5cGU6Ik51bGxMaXRlcmFsIixvcmlnaW5hbDpudWxsLHZhbHVlOm51bGwsbG9jOmkubG9jSW5mbyh0aGlzLl8kKX07YnJlYWs7Y2FzZSA0MDp0aGlzLiQ9b1thXTticmVhaztjYXNlIDQxOnRoaXMuJD1vW2FdO2JyZWFrO2Nhc2UgNDI6dGhpcy4kPWkucHJlcGFyZVBhdGgoITAsb1thXSx0aGlzLl8kKTticmVhaztjYXNlIDQzOnRoaXMuJD1pLnByZXBhcmVQYXRoKCExLG9bYV0sdGhpcy5fJCk7YnJlYWs7Y2FzZSA0NDpvW2EtMl0ucHVzaCh7cGFydDppLmlkKG9bYV0pLG9yaWdpbmFsOm9bYV0sc2VwYXJhdG9yOm9bYS0xXX0pLHRoaXMuJD1vW2EtMl07YnJlYWs7Y2FzZSA0NTp0aGlzLiQ9W3twYXJ0OmkuaWQob1thXSksb3JpZ2luYWw6b1thXX1dO2JyZWFrO2Nhc2UgNDY6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgNDc6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSA0ODp0aGlzLiQ9W29bYV1dO2JyZWFrO2Nhc2UgNDk6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSA1MDp0aGlzLiQ9W107YnJlYWs7Y2FzZSA1MTpvW2EtMV0ucHVzaChvW2FdKTticmVhaztjYXNlIDU4OnRoaXMuJD1bXTticmVhaztjYXNlIDU5Om9bYS0xXS5wdXNoKG9bYV0pO2JyZWFrO2Nhc2UgNjQ6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgNjU6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSA3MDp0aGlzLiQ9W107YnJlYWs7Y2FzZSA3MTpvW2EtMV0ucHVzaChvW2FdKTticmVhaztjYXNlIDc4OnRoaXMuJD1bXTticmVhaztjYXNlIDc5Om9bYS0xXS5wdXNoKG9bYV0pO2JyZWFrO2Nhc2UgODI6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgODM6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSA4Njp0aGlzLiQ9W107YnJlYWs7Y2FzZSA4NzpvW2EtMV0ucHVzaChvW2FdKTticmVhaztjYXNlIDkwOnRoaXMuJD1bXTticmVhaztjYXNlIDkxOm9bYS0xXS5wdXNoKG9bYV0pO2JyZWFrO2Nhc2UgOTQ6dGhpcy4kPVtdO2JyZWFrO2Nhc2UgOTU6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSA5ODp0aGlzLiQ9W29bYV1dO2JyZWFrO2Nhc2UgOTk6b1thLTFdLnB1c2gob1thXSk7YnJlYWs7Y2FzZSAxMDA6dGhpcy4kPVtvW2FdXTticmVhaztjYXNlIDEwMTpvW2EtMV0ucHVzaChvW2FdKX19LHRhYmxlOlt7MzoxLDQ6Miw1OlsyLDQ2XSw2OjMsMTQ6WzIsNDZdLDE1OlsyLDQ2XSwxOTpbMiw0Nl0sMjk6WzIsNDZdLDM0OlsyLDQ2XSw0ODpbMiw0Nl0sNTE6WzIsNDZdLDU1OlsyLDQ2XSw2MDpbMiw0Nl19LHsxOlszXX0sezU6WzEsNF19LHs1OlsyLDJdLDc6NSw4OjYsOTo3LDEwOjgsMTE6OSwxMjoxMCwxMzoxMSwxNDpbMSwxMl0sMTU6WzEsMjBdLDE2OjE3LDE5OlsxLDIzXSwyNDoxNSwyNzoxNiwyOTpbMSwyMV0sMzQ6WzEsMjJdLDM5OlsyLDJdLDQ0OlsyLDJdLDQ3OlsyLDJdLDQ4OlsxLDEzXSw1MTpbMSwxNF0sNTU6WzEsMThdLDU5OjE5LDYwOlsxLDI0XX0sezE6WzIsMV19LHs1OlsyLDQ3XSwxNDpbMiw0N10sMTU6WzIsNDddLDE5OlsyLDQ3XSwyOTpbMiw0N10sMzQ6WzIsNDddLDM5OlsyLDQ3XSw0NDpbMiw0N10sNDc6WzIsNDddLDQ4OlsyLDQ3XSw1MTpbMiw0N10sNTU6WzIsNDddLDYwOlsyLDQ3XX0sezU6WzIsM10sMTQ6WzIsM10sMTU6WzIsM10sMTk6WzIsM10sMjk6WzIsM10sMzQ6WzIsM10sMzk6WzIsM10sNDQ6WzIsM10sNDc6WzIsM10sNDg6WzIsM10sNTE6WzIsM10sNTU6WzIsM10sNjA6WzIsM119LHs1OlsyLDRdLDE0OlsyLDRdLDE1OlsyLDRdLDE5OlsyLDRdLDI5OlsyLDRdLDM0OlsyLDRdLDM5OlsyLDRdLDQ0OlsyLDRdLDQ3OlsyLDRdLDQ4OlsyLDRdLDUxOlsyLDRdLDU1OlsyLDRdLDYwOlsyLDRdfSx7NTpbMiw1XSwxNDpbMiw1XSwxNTpbMiw1XSwxOTpbMiw1XSwyOTpbMiw1XSwzNDpbMiw1XSwzOTpbMiw1XSw0NDpbMiw1XSw0NzpbMiw1XSw0ODpbMiw1XSw1MTpbMiw1XSw1NTpbMiw1XSw2MDpbMiw1XX0sezU6WzIsNl0sMTQ6WzIsNl0sMTU6WzIsNl0sMTk6WzIsNl0sMjk6WzIsNl0sMzQ6WzIsNl0sMzk6WzIsNl0sNDQ6WzIsNl0sNDc6WzIsNl0sNDg6WzIsNl0sNTE6WzIsNl0sNTU6WzIsNl0sNjA6WzIsNl19LHs1OlsyLDddLDE0OlsyLDddLDE1OlsyLDddLDE5OlsyLDddLDI5OlsyLDddLDM0OlsyLDddLDM5OlsyLDddLDQ0OlsyLDddLDQ3OlsyLDddLDQ4OlsyLDddLDUxOlsyLDddLDU1OlsyLDddLDYwOlsyLDddfSx7NTpbMiw4XSwxNDpbMiw4XSwxNTpbMiw4XSwxOTpbMiw4XSwyOTpbMiw4XSwzNDpbMiw4XSwzOTpbMiw4XSw0NDpbMiw4XSw0NzpbMiw4XSw0ODpbMiw4XSw1MTpbMiw4XSw1NTpbMiw4XSw2MDpbMiw4XX0sezU6WzIsOV0sMTQ6WzIsOV0sMTU6WzIsOV0sMTk6WzIsOV0sMjk6WzIsOV0sMzQ6WzIsOV0sMzk6WzIsOV0sNDQ6WzIsOV0sNDc6WzIsOV0sNDg6WzIsOV0sNTE6WzIsOV0sNTU6WzIsOV0sNjA6WzIsOV19LHsyMDoyNSw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDozNiw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHs0OjM3LDY6MywxNDpbMiw0Nl0sMTU6WzIsNDZdLDE5OlsyLDQ2XSwyOTpbMiw0Nl0sMzQ6WzIsNDZdLDM5OlsyLDQ2XSw0NDpbMiw0Nl0sNDc6WzIsNDZdLDQ4OlsyLDQ2XSw1MTpbMiw0Nl0sNTU6WzIsNDZdLDYwOlsyLDQ2XX0sezQ6MzgsNjozLDE0OlsyLDQ2XSwxNTpbMiw0Nl0sMTk6WzIsNDZdLDI5OlsyLDQ2XSwzNDpbMiw0Nl0sNDQ6WzIsNDZdLDQ3OlsyLDQ2XSw0ODpbMiw0Nl0sNTE6WzIsNDZdLDU1OlsyLDQ2XSw2MDpbMiw0Nl19LHsxMzo0MCwxNTpbMSwyMF0sMTc6Mzl9LHsyMDo0Miw1Njo0MSw2NDo0Myw2NTpbMSw0NF0sNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7NDo0NSw2OjMsMTQ6WzIsNDZdLDE1OlsyLDQ2XSwxOTpbMiw0Nl0sMjk6WzIsNDZdLDM0OlsyLDQ2XSw0NzpbMiw0Nl0sNDg6WzIsNDZdLDUxOlsyLDQ2XSw1NTpbMiw0Nl0sNjA6WzIsNDZdfSx7NTpbMiwxMF0sMTQ6WzIsMTBdLDE1OlsyLDEwXSwxODpbMiwxMF0sMTk6WzIsMTBdLDI5OlsyLDEwXSwzNDpbMiwxMF0sMzk6WzIsMTBdLDQ0OlsyLDEwXSw0NzpbMiwxMF0sNDg6WzIsMTBdLDUxOlsyLDEwXSw1NTpbMiwxMF0sNjA6WzIsMTBdfSx7MjA6NDYsNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjA6NDcsNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjA6NDgsNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjA6NDIsNTY6NDksNjQ6NDMsNjU6WzEsNDRdLDcyOlsxLDM1XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezMzOlsyLDc4XSw0OTo1MCw2NTpbMiw3OF0sNzI6WzIsNzhdLDgwOlsyLDc4XSw4MTpbMiw3OF0sODI6WzIsNzhdLDgzOlsyLDc4XSw4NDpbMiw3OF0sODU6WzIsNzhdfSx7MjM6WzIsMzNdLDMzOlsyLDMzXSw1NDpbMiwzM10sNjU6WzIsMzNdLDY4OlsyLDMzXSw3MjpbMiwzM10sNzU6WzIsMzNdLDgwOlsyLDMzXSw4MTpbMiwzM10sODI6WzIsMzNdLDgzOlsyLDMzXSw4NDpbMiwzM10sODU6WzIsMzNdfSx7MjM6WzIsMzRdLDMzOlsyLDM0XSw1NDpbMiwzNF0sNjU6WzIsMzRdLDY4OlsyLDM0XSw3MjpbMiwzNF0sNzU6WzIsMzRdLDgwOlsyLDM0XSw4MTpbMiwzNF0sODI6WzIsMzRdLDgzOlsyLDM0XSw4NDpbMiwzNF0sODU6WzIsMzRdfSx7MjM6WzIsMzVdLDMzOlsyLDM1XSw1NDpbMiwzNV0sNjU6WzIsMzVdLDY4OlsyLDM1XSw3MjpbMiwzNV0sNzU6WzIsMzVdLDgwOlsyLDM1XSw4MTpbMiwzNV0sODI6WzIsMzVdLDgzOlsyLDM1XSw4NDpbMiwzNV0sODU6WzIsMzVdfSx7MjM6WzIsMzZdLDMzOlsyLDM2XSw1NDpbMiwzNl0sNjU6WzIsMzZdLDY4OlsyLDM2XSw3MjpbMiwzNl0sNzU6WzIsMzZdLDgwOlsyLDM2XSw4MTpbMiwzNl0sODI6WzIsMzZdLDgzOlsyLDM2XSw4NDpbMiwzNl0sODU6WzIsMzZdfSx7MjM6WzIsMzddLDMzOlsyLDM3XSw1NDpbMiwzN10sNjU6WzIsMzddLDY4OlsyLDM3XSw3MjpbMiwzN10sNzU6WzIsMzddLDgwOlsyLDM3XSw4MTpbMiwzN10sODI6WzIsMzddLDgzOlsyLDM3XSw4NDpbMiwzN10sODU6WzIsMzddfSx7MjM6WzIsMzhdLDMzOlsyLDM4XSw1NDpbMiwzOF0sNjU6WzIsMzhdLDY4OlsyLDM4XSw3MjpbMiwzOF0sNzU6WzIsMzhdLDgwOlsyLDM4XSw4MTpbMiwzOF0sODI6WzIsMzhdLDgzOlsyLDM4XSw4NDpbMiwzOF0sODU6WzIsMzhdfSx7MjM6WzIsMzldLDMzOlsyLDM5XSw1NDpbMiwzOV0sNjU6WzIsMzldLDY4OlsyLDM5XSw3MjpbMiwzOV0sNzU6WzIsMzldLDgwOlsyLDM5XSw4MTpbMiwzOV0sODI6WzIsMzldLDgzOlsyLDM5XSw4NDpbMiwzOV0sODU6WzIsMzldfSx7MjM6WzIsNDNdLDMzOlsyLDQzXSw1NDpbMiw0M10sNjU6WzIsNDNdLDY4OlsyLDQzXSw3MjpbMiw0M10sNzU6WzIsNDNdLDgwOlsyLDQzXSw4MTpbMiw0M10sODI6WzIsNDNdLDgzOlsyLDQzXSw4NDpbMiw0M10sODU6WzIsNDNdLDg3OlsxLDUxXX0sezcyOlsxLDM1XSw4Njo1Mn0sezIzOlsyLDQ1XSwzMzpbMiw0NV0sNTQ6WzIsNDVdLDY1OlsyLDQ1XSw2ODpbMiw0NV0sNzI6WzIsNDVdLDc1OlsyLDQ1XSw4MDpbMiw0NV0sODE6WzIsNDVdLDgyOlsyLDQ1XSw4MzpbMiw0NV0sODQ6WzIsNDVdLDg1", "base64"));
  res.write(new Buffer("OlsyLDQ1XSw4NzpbMiw0NV19LHs1Mjo1Myw1NDpbMiw4Ml0sNjU6WzIsODJdLDcyOlsyLDgyXSw4MDpbMiw4Ml0sODE6WzIsODJdLDgyOlsyLDgyXSw4MzpbMiw4Ml0sODQ6WzIsODJdLDg1OlsyLDgyXX0sezI1OjU0LDM4OjU2LDM5OlsxLDU4XSw0Mzo1Nyw0NDpbMSw1OV0sNDU6NTUsNDc6WzIsNTRdfSx7Mjg6NjAsNDM6NjEsNDQ6WzEsNTldLDQ3OlsyLDU2XX0sezEzOjYzLDE1OlsxLDIwXSwxODpbMSw2Ml19LHsxNTpbMiw0OF0sMTg6WzIsNDhdfSx7MzM6WzIsODZdLDU3OjY0LDY1OlsyLDg2XSw3MjpbMiw4Nl0sODA6WzIsODZdLDgxOlsyLDg2XSw4MjpbMiw4Nl0sODM6WzIsODZdLDg0OlsyLDg2XSw4NTpbMiw4Nl19LHszMzpbMiw0MF0sNjU6WzIsNDBdLDcyOlsyLDQwXSw4MDpbMiw0MF0sODE6WzIsNDBdLDgyOlsyLDQwXSw4MzpbMiw0MF0sODQ6WzIsNDBdLDg1OlsyLDQwXX0sezMzOlsyLDQxXSw2NTpbMiw0MV0sNzI6WzIsNDFdLDgwOlsyLDQxXSw4MTpbMiw0MV0sODI6WzIsNDFdLDgzOlsyLDQxXSw4NDpbMiw0MV0sODU6WzIsNDFdfSx7MjA6NjUsNzI6WzEsMzVdLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjY6NjYsNDc6WzEsNjddfSx7MzA6NjgsMzM6WzIsNThdLDY1OlsyLDU4XSw3MjpbMiw1OF0sNzU6WzIsNThdLDgwOlsyLDU4XSw4MTpbMiw1OF0sODI6WzIsNThdLDgzOlsyLDU4XSw4NDpbMiw1OF0sODU6WzIsNThdfSx7MzM6WzIsNjRdLDM1OjY5LDY1OlsyLDY0XSw3MjpbMiw2NF0sNzU6WzIsNjRdLDgwOlsyLDY0XSw4MTpbMiw2NF0sODI6WzIsNjRdLDgzOlsyLDY0XSw4NDpbMiw2NF0sODU6WzIsNjRdfSx7MjE6NzAsMjM6WzIsNTBdLDY1OlsyLDUwXSw3MjpbMiw1MF0sODA6WzIsNTBdLDgxOlsyLDUwXSw4MjpbMiw1MF0sODM6WzIsNTBdLDg0OlsyLDUwXSw4NTpbMiw1MF19LHszMzpbMiw5MF0sNjE6NzEsNjU6WzIsOTBdLDcyOlsyLDkwXSw4MDpbMiw5MF0sODE6WzIsOTBdLDgyOlsyLDkwXSw4MzpbMiw5MF0sODQ6WzIsOTBdLDg1OlsyLDkwXX0sezIwOjc1LDMzOlsyLDgwXSw1MDo3Miw2Mzo3Myw2NDo3Niw2NTpbMSw0NF0sNjk6NzQsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7NzI6WzEsODBdfSx7MjM6WzIsNDJdLDMzOlsyLDQyXSw1NDpbMiw0Ml0sNjU6WzIsNDJdLDY4OlsyLDQyXSw3MjpbMiw0Ml0sNzU6WzIsNDJdLDgwOlsyLDQyXSw4MTpbMiw0Ml0sODI6WzIsNDJdLDgzOlsyLDQyXSw4NDpbMiw0Ml0sODU6WzIsNDJdLDg3OlsxLDUxXX0sezIwOjc1LDUzOjgxLDU0OlsyLDg0XSw2Mzo4Miw2NDo3Niw2NTpbMSw0NF0sNjk6ODMsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjY6ODQsNDc6WzEsNjddfSx7NDc6WzIsNTVdfSx7NDo4NSw2OjMsMTQ6WzIsNDZdLDE1OlsyLDQ2XSwxOTpbMiw0Nl0sMjk6WzIsNDZdLDM0OlsyLDQ2XSwzOTpbMiw0Nl0sNDQ6WzIsNDZdLDQ3OlsyLDQ2XSw0ODpbMiw0Nl0sNTE6WzIsNDZdLDU1OlsyLDQ2XSw2MDpbMiw0Nl19LHs0NzpbMiwyMF19LHsyMDo4Niw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHs0Ojg3LDY6MywxNDpbMiw0Nl0sMTU6WzIsNDZdLDE5OlsyLDQ2XSwyOTpbMiw0Nl0sMzQ6WzIsNDZdLDQ3OlsyLDQ2XSw0ODpbMiw0Nl0sNTE6WzIsNDZdLDU1OlsyLDQ2XSw2MDpbMiw0Nl19LHsyNjo4OCw0NzpbMSw2N119LHs0NzpbMiw1N119LHs1OlsyLDExXSwxNDpbMiwxMV0sMTU6WzIsMTFdLDE5OlsyLDExXSwyOTpbMiwxMV0sMzQ6WzIsMTFdLDM5OlsyLDExXSw0NDpbMiwxMV0sNDc6WzIsMTFdLDQ4OlsyLDExXSw1MTpbMiwxMV0sNTU6WzIsMTFdLDYwOlsyLDExXX0sezE1OlsyLDQ5XSwxODpbMiw0OV19LHsyMDo3NSwzMzpbMiw4OF0sNTg6ODksNjM6OTAsNjQ6NzYsNjU6WzEsNDRdLDY5OjkxLDcwOjc3LDcxOjc4LDcyOlsxLDc5XSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezY1OlsyLDk0XSw2Njo5Miw2ODpbMiw5NF0sNzI6WzIsOTRdLDgwOlsyLDk0XSw4MTpbMiw5NF0sODI6WzIsOTRdLDgzOlsyLDk0XSw4NDpbMiw5NF0sODU6WzIsOTRdfSx7NTpbMiwyNV0sMTQ6WzIsMjVdLDE1OlsyLDI1XSwxOTpbMiwyNV0sMjk6WzIsMjVdLDM0OlsyLDI1XSwzOTpbMiwyNV0sNDQ6WzIsMjVdLDQ3OlsyLDI1XSw0ODpbMiwyNV0sNTE6WzIsMjVdLDU1OlsyLDI1XSw2MDpbMiwyNV19LHsyMDo5Myw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo3NSwzMTo5NCwzMzpbMiw2MF0sNjM6OTUsNjQ6NzYsNjU6WzEsNDRdLDY5Ojk2LDcwOjc3LDcxOjc4LDcyOlsxLDc5XSw3NTpbMiw2MF0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo3NSwzMzpbMiw2Nl0sMzY6OTcsNjM6OTgsNjQ6NzYsNjU6WzEsNDRdLDY5Ojk5LDcwOjc3LDcxOjc4LDcyOlsxLDc5XSw3NTpbMiw2Nl0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHsyMDo3NSwyMg==", "base64"));
  res.write(new Buffer("OjEwMCwyMzpbMiw1Ml0sNjM6MTAxLDY0Ojc2LDY1OlsxLDQ0XSw2OToxMDIsNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc4OjI2LDc5OjI3LDgwOlsxLDI4XSw4MTpbMSwyOV0sODI6WzEsMzBdLDgzOlsxLDMxXSw4NDpbMSwzMl0sODU6WzEsMzRdLDg2OjMzfSx7MjA6NzUsMzM6WzIsOTJdLDYyOjEwMyw2MzoxMDQsNjQ6NzYsNjU6WzEsNDRdLDY5OjEwNSw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHszMzpbMSwxMDZdfSx7MzM6WzIsNzldLDY1OlsyLDc5XSw3MjpbMiw3OV0sODA6WzIsNzldLDgxOlsyLDc5XSw4MjpbMiw3OV0sODM6WzIsNzldLDg0OlsyLDc5XSw4NTpbMiw3OV19LHszMzpbMiw4MV19LHsyMzpbMiwyN10sMzM6WzIsMjddLDU0OlsyLDI3XSw2NTpbMiwyN10sNjg6WzIsMjddLDcyOlsyLDI3XSw3NTpbMiwyN10sODA6WzIsMjddLDgxOlsyLDI3XSw4MjpbMiwyN10sODM6WzIsMjddLDg0OlsyLDI3XSw4NTpbMiwyN119LHsyMzpbMiwyOF0sMzM6WzIsMjhdLDU0OlsyLDI4XSw2NTpbMiwyOF0sNjg6WzIsMjhdLDcyOlsyLDI4XSw3NTpbMiwyOF0sODA6WzIsMjhdLDgxOlsyLDI4XSw4MjpbMiwyOF0sODM6WzIsMjhdLDg0OlsyLDI4XSw4NTpbMiwyOF19LHsyMzpbMiwzMF0sMzM6WzIsMzBdLDU0OlsyLDMwXSw2ODpbMiwzMF0sNzE6MTA3LDcyOlsxLDEwOF0sNzU6WzIsMzBdfSx7MjM6WzIsOThdLDMzOlsyLDk4XSw1NDpbMiw5OF0sNjg6WzIsOThdLDcyOlsyLDk4XSw3NTpbMiw5OF19LHsyMzpbMiw0NV0sMzM6WzIsNDVdLDU0OlsyLDQ1XSw2NTpbMiw0NV0sNjg6WzIsNDVdLDcyOlsyLDQ1XSw3MzpbMSwxMDldLDc1OlsyLDQ1XSw4MDpbMiw0NV0sODE6WzIsNDVdLDgyOlsyLDQ1XSw4MzpbMiw0NV0sODQ6WzIsNDVdLDg1OlsyLDQ1XSw4NzpbMiw0NV19LHsyMzpbMiw0NF0sMzM6WzIsNDRdLDU0OlsyLDQ0XSw2NTpbMiw0NF0sNjg6WzIsNDRdLDcyOlsyLDQ0XSw3NTpbMiw0NF0sODA6WzIsNDRdLDgxOlsyLDQ0XSw4MjpbMiw0NF0sODM6WzIsNDRdLDg0OlsyLDQ0XSw4NTpbMiw0NF0sODc6WzIsNDRdfSx7NTQ6WzEsMTEwXX0sezU0OlsyLDgzXSw2NTpbMiw4M10sNzI6WzIsODNdLDgwOlsyLDgzXSw4MTpbMiw4M10sODI6WzIsODNdLDgzOlsyLDgzXSw4NDpbMiw4M10sODU6WzIsODNdfSx7NTQ6WzIsODVdfSx7NTpbMiwxM10sMTQ6WzIsMTNdLDE1OlsyLDEzXSwxOTpbMiwxM10sMjk6WzIsMTNdLDM0OlsyLDEzXSwzOTpbMiwxM10sNDQ6WzIsMTNdLDQ3OlsyLDEzXSw0ODpbMiwxM10sNTE6WzIsMTNdLDU1OlsyLDEzXSw2MDpbMiwxM119LHszODo1NiwzOTpbMSw1OF0sNDM6NTcsNDQ6WzEsNTldLDQ1OjExMiw0NjoxMTEsNDc6WzIsNzZdfSx7MzM6WzIsNzBdLDQwOjExMyw2NTpbMiw3MF0sNzI6WzIsNzBdLDc1OlsyLDcwXSw4MDpbMiw3MF0sODE6WzIsNzBdLDgyOlsyLDcwXSw4MzpbMiw3MF0sODQ6WzIsNzBdLDg1OlsyLDcwXX0sezQ3OlsyLDE4XX0sezU6WzIsMTRdLDE0OlsyLDE0XSwxNTpbMiwxNF0sMTk6WzIsMTRdLDI5OlsyLDE0XSwzNDpbMiwxNF0sMzk6WzIsMTRdLDQ0OlsyLDE0XSw0NzpbMiwxNF0sNDg6WzIsMTRdLDUxOlsyLDE0XSw1NTpbMiwxNF0sNjA6WzIsMTRdfSx7MzM6WzEsMTE0XX0sezMzOlsyLDg3XSw2NTpbMiw4N10sNzI6WzIsODddLDgwOlsyLDg3XSw4MTpbMiw4N10sODI6WzIsODddLDgzOlsyLDg3XSw4NDpbMiw4N10sODU6WzIsODddfSx7MzM6WzIsODldfSx7MjA6NzUsNjM6MTE2LDY0Ojc2LDY1OlsxLDQ0XSw2NzoxMTUsNjg6WzIsOTZdLDY5OjExNyw3MDo3Nyw3MTo3OCw3MjpbMSw3OV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHszMzpbMSwxMThdfSx7MzI6MTE5LDMzOlsyLDYyXSw3NDoxMjAsNzU6WzEsMTIxXX0sezMzOlsyLDU5XSw2NTpbMiw1OV0sNzI6WzIsNTldLDc1OlsyLDU5XSw4MDpbMiw1OV0sODE6WzIsNTldLDgyOlsyLDU5XSw4MzpbMiw1OV0sODQ6WzIsNTldLDg1OlsyLDU5XX0sezMzOlsyLDYxXSw3NTpbMiw2MV19LHszMzpbMiw2OF0sMzc6MTIyLDc0OjEyMyw3NTpbMSwxMjFdfSx7MzM6WzIsNjVdLDY1OlsyLDY1XSw3MjpbMiw2NV0sNzU6WzIsNjVdLDgwOlsyLDY1XSw4MTpbMiw2NV0sODI6WzIsNjVdLDgzOlsyLDY1XSw4NDpbMiw2NV0sODU6WzIsNjVdfSx7MzM6WzIsNjddLDc1OlsyLDY3XX0sezIzOlsxLDEyNF19LHsyMzpbMiw1MV0sNjU6WzIsNTFdLDcyOlsyLDUxXSw4MDpbMiw1MV0sODE6WzIsNTFdLDgyOlsyLDUxXSw4MzpbMiw1MV0sODQ6WzIsNTFdLDg1OlsyLDUxXX0sezIzOlsyLDUzXX0sezMzOlsxLDEyNV19LHszMzpbMiw5MV0sNjU6WzIsOTFdLDcyOlsyLDkxXSw4MDpbMiw5MV0sODE6WzIsOTFdLDgyOlsyLDkxXSw4MzpbMiw5MV0sODQ6WzIsOTFdLDg1OlsyLDkxXX0sezMzOlsyLDkzXX0sezU6WzIsMjJdLDE0OlsyLDIyXSwxNTpbMiwyMl0sMTk6WzIsMjJdLDI5OlsyLDIyXSwzNDpbMiwyMl0sMzk6WzIsMjJdLDQ0OlsyLDIyXSw0NzpbMiwyMl0sNDg6WzIsMjJdLDUxOlsyLDIyXSw1NTpbMiwyMl0sNjA6WzIsMjJdfSx7MjM6WzIsOTldLDMzOlsyLDk5XSw1NDpbMiw5OV0sNjg6WzIsOTldLDcyOlsyLDk5XSw3NTpbMiw5OV19LHs3MzpbMSwxMDldfSx7MjA6NzUsNjM6MTI2LDY0Ojc2LDY1OlsxLDQ0XSw3MjpbMSwzNV0sNzg6MjYsNzk6MjcsODA6WzEsMjhdLDgxOlsxLDI5XSw4MjpbMSwzMF0sODM6WzEsMzFdLDg0OlsxLDMyXSw4NTpbMSwzNF0sODY6MzN9LHs1OlsyLDIzXSwxNDpbMiwyM10sMTU6WzIsMjNdLDE5OlsyLDIzXSwyOTpbMiwyM10sMzQ6WzIsMjNdLDM5OlsyLDIzXSw0NDpbMiwyM10sNDc6WzIsMjNdLDQ4OlsyLDIzXSw1MTpbMiwyM10sNTU6WzIsMjNdLDYwOlsyLDIzXX0sezQ3OlsyLDE5XX0sezQ3OlsyLDc3XX0sezIwOjc1LDMzOlsyLDcyXSw0MToxMjcsNjM6MTI4LDY0Ojc2LDY1OlsxLDQ0XSw2OToxMjksNzA6NzcsNzE6NzgsNzI6WzEsNzldLDc1OlsyLDcyXSw3ODoyNiw3OToyNyw4MDpbMSwyOF0sODE6WzEsMjldLDgyOlsxLDMwXSw4MzpbMSwzMV0sODQ6WzEsMzJdLDg1OlsxLDM0XSw4NjozM30sezU6WzIsMjRdLDE0OlsyLDI0XSwxNTpbMiwyNF0sMTk6WzIsMjRdLDI5OlsyLDI0XSwzNDpbMiwyNF0sMzk6WzIsMjRdLDQ0OlsyLDI0XSw0NzpbMiwyNF0sNDg6WzIsMjRdLDUxOlsyLDI0XSw1NTpbMiwyNF0sNjA6WzIsMjRdfSx7Njg6WzEsMTMwXX0sezY1OlsyLDk1XSw2ODpbMiw5NV0sNzI6WzIsOTVdLDgwOlsyLDk1XSw4MTpbMiw5NV0sODI6WzIsOTVdLDgzOlsyLDk1XSw4NDpbMiw5NV0sODU6WzIsOTVdfSx7Njg6WzIsOTddfSx7NTpbMiwyMV0sMTQ6WzIsMjFdLDE1OlsyLDIxXSwxOTpbMiwyMV0sMjk6WzIsMjFdLDM0OlsyLDIxXSwzOTpbMiwyMV0sNDQ6WzIsMjFdLDQ3OlsyLDIxXSw0ODpbMiwyMV0sNTE6WzIsMjFdLDU1OlsyLDIxXSw2MDpbMiwyMV19LHszMzpbMSwxMzFdfSx7MzM6WzIsNjNdfSx7NzI6WzEsMTMzXSw3NjoxMzJ9LHszMzpbMSwxMzRdfSx7MzM6WzIsNjldfSx7MTU6WzIsMTJdfSx7MTQ6WzIsMjZdLDE1OlsyLDI2XSwxOTpbMiwyNl0sMjk6WzIsMjZdLDM0OlsyLDI2XSw0NzpbMiwyNl0sNDg6WzIsMjZdLDUxOlsyLDI2XSw1NTpbMiwyNl0sNjA6WzIsMjZdfSx7MjM6WzIsMzFdLDMzOlsyLDMxXSw1NDpbMiwzMV0sNjg6WzIsMzFdLDcyOlsyLDMxXSw3NTpbMiwzMV19LHszMzpbMiw3NF0sNDI6MTM1LDc0OjEzNiw3NTpbMSwxMjFdfSx7MzM6WzIsNzFdLDY1OlsyLDcxXSw3MjpbMiw3MV0sNzU6WzIsNzFdLDgwOlsyLDcxXSw4MTpbMiw3MV0sODI6WzIsNzFdLDgzOlsyLDcxXSw4NDpbMiw3MV0sODU6WzIsNzFdfSx7MzM6WzIsNzNdLDc1OlsyLDczXX0sezIzOlsyLDI5XSwzMzpbMiwyOV0sNTQ6WzIsMjldLDY1OlsyLDI5XSw2ODpbMiwyOV0sNzI6WzIsMjldLDc1OlsyLDI5XSw4MDpbMiwyOV0sODE6WzIsMjldLDgyOlsyLDI5XSw4MzpbMiwyOV0sODQ6WzIsMjldLDg1OlsyLDI5XX0sezE0OlsyLDE1XSwxNTpbMiwxNV0sMTk6WzIsMTVdLDI5OlsyLDE1XSwzNDpbMiwxNV0sMzk6WzIsMTVdLDQ0OlsyLDE1XSw0NzpbMiwxNV0sNDg6WzIsMTVdLDUxOlsyLDE1XSw1NTpbMiwxNV0sNjA6WzIsMTVdfSx7NzI6WzEsMTM4XSw3NzpbMSwxMzddfSx7NzI6WzIsMTAwXSw3NzpbMiwxMDBdfSx7MTQ6WzIsMTZdLDE1OlsyLDE2XSwxOTpbMiwxNl0sMjk6WzIsMTZdLDM0OlsyLDE2XSw0NDpbMiwxNl0sNDc6WzIsMTZdLDQ4OlsyLDE2XSw1MTpbMiwxNl0sNTU6WzIsMTZdLDYwOlsyLDE2XX0sezMzOlsxLDEzOV19LHszMzpbMiw3NV19LHszMzpbMiwzMl19LHs3MjpbMiwxMDFdLDc3OlsyLDEwMV19LHsxNDpbMiwxN10sMTU6WzIsMTddLDE5OlsyLDE3XSwyOTpbMiwxN10sMzQ6WzIsMTddLDM5OlsyLDE3XSw0NDpbMiwxN10sCgk0NzpbMiwxN10sNDg6WzIsMTddLDUxOlsyLDE3XSw1NTpbMiwxN10sNjA6WzIsMTddfV0sZGVmYXVsdEFjdGlvbnM6ezQ6WzIsMV0sNTU6WzIsNTVdLDU3OlsyLDIwXSw2MTpbMiw1N10sNzQ6WzIsODFdLDgzOlsyLDg1XSw4NzpbMiwxOF0sOTE6WzIsODldLDEwMjpbMiw1M10sMTA1OlsyLDkzXSwxMTE6WzIsMTldLDExMjpbMiw3N10sMTE3OlsyLDk3XSwxMjA6WzIsNjNdLDEyMzpbMiw2OV0sMTI0OlsyLDEyXSwxMzY6WzIsNzVdLDEzNzpbMiwzMl19LHBhcnNlRXJyb3I6ZnVuY3Rpb24odCxlKXt0aHJvdyBuZXcgRXJyb3IodCl9LHBhcnNlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdDtyZXR1cm4gdD1uLmxleGVyLmxleCgpfHwxLCJudW1iZXIiIT10eXBlb2YgdCYmKHQ9bi5zeW1ib2xzX1t0XXx8dCksdH12YXIgbj10aGlzLGk9WzBdLHI9W251bGxdLG89W10scz10aGlzLnRhYmxlLGE9IiIsbD0wLGM9MCx1PTA7dGhpcy5sZXhlci5zZXRJbnB1dCh0KSx0aGlzLmxleGVyLnl5PXRoaXMueXksdGhpcy55eS5sZXhlcj10aGlzLmxleGVyLHRoaXMueXkucGFyc2VyPXRoaXMsInVuZGVmaW5lZCI9PXR5cGVvZiB0aGlzLmxleGVyLnl5bGxvYyYmKHRoaXMubGV4ZXIueXlsbG9jPXt9KTt2YXIgZD10aGlzLmxleGVyLnl5bGxvYztvLnB1c2goZCk7dmFyIGg9dGhpcy5sZXhlci5vcHRpb25zJiZ0aGlzLmxleGVyLm9wdGlvbnMucmFuZ2VzOyJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnl5LnBhcnNlRXJyb3ImJih0aGlzLnBhcnNlRXJyb3I9dGhpcy55eS5wYXJzZUVycm9yKTtmb3IodmFyIHAsZixtLF8sZyx2LHksYix3LE09e307Oyl7aWYobT1pW2kubGVuZ3RoLTFdLHRoaXMuZGVmYXVsdEFjdGlvbnNbbV0/Xz10aGlzLmRlZmF1bHRBY3Rpb25zW21dOihudWxsIT09cCYmInVuZGVmaW5lZCIhPXR5cGVvZiBwfHwocD1lKCkpLF89c1ttXSYmc1ttXVtwXSksInVuZGVmaW5lZCI9PXR5cGVvZiBffHwhXy5sZW5ndGh8fCFfWzBdKXt2YXIgUz0iIjtpZighdSl7dz1bXTtmb3IodiBpbiBzW21dKXRoaXMudGVybWluYWxzX1t2XSYmdj4yJiZ3LnB1c2goIiciK3RoaXMudGVybWluYWxzX1t2XSsiJyIpO1M9dGhpcy5sZXhlci5zaG93UG9zaXRpb24/IlBhcnNlIGVycm9yIG9uIGxpbmUgIisobCsxKSsiOlxuIit0aGlzLmxleGVyLnNob3dQb3NpdGlvbigpKyJcbkV4cGVjdGluZyAiK3cuam9pbigiLCAiKSsiLCBnb3QgJyIrKHRoaXMudGVybWluYWxzX1twXXx8cCkrIiciOiJQYXJzZSBlcnJvciBvbiBsaW5lICIrKGwrMSkrIjogVW5leHBlY3RlZCAiKygxPT1wPyJlbmQgb2YgaW5wdXQiOiInIisodGhpcy50ZXJtaW5hbHNfW3BdfHxwKSsiJyIpLHRoaXMucGFyc2VFcnJvcihTLHt0ZXh0OnRoaXMubGV4ZXIubWF0Y2gsdG9rZW46dGhpcy50ZXJtaW5hbHNfW3BdfHxwLGxpbmU6dGhpcy5sZXhlci55eWxpbmVubyxsb2M6ZCxleHBlY3RlZDp3fSl9fWlmKF9bMF1pbnN0YW5jZW9mIEFycmF5JiZfLmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcigiUGFyc2UgRXJyb3I6IG11bHRpcGxlIGFjdGlvbnMgcG9zc2libGUgYXQgc3RhdGU6ICIrbSsiLCB0b2tlbjogIitwKTtzd2l0Y2goX1swXSl7Y2FzZSAxOmkucHVzaChwKSxyLnB1c2godGhpcy5sZXhlci55eXRleHQpLG8ucHVzaCh0aGlzLmxleGVyLnl5bGxvYyksaS5wdXNoKF9bMV0pLHA9bnVsbCxmPyhwPWYsZj1udWxsKTooYz10aGlzLmxleGVyLnl5bGVuZyxhPXRoaXMubGV4ZXIueXl0ZXh0LGw9dGhpcy5sZXhlci55eWxpbmVubyxkPXRoaXMubGV4ZXIueXlsbG9jLHU+MCYmdS0tKTticmVhaztjYXNlIDI6aWYoeT10aGlzLnByb2R1Y3Rpb25zX1tfWzFdXVsxXSxNLiQ9cltyLmxlbmd0aC15XSxNLl8kPXtmaXJzdF9saW5lOm9bby5sZW5ndGgtKHl8fDEpXS5maXJzdF9saW5lLGxhc3RfbGluZTpvW28ubGVuZ3RoLTFdLmxhc3RfbGluZSxmaXJzdF9jb2x1bW46b1tvLmxlbmd0aC0oeXx8MSldLmZpcnN0X2NvbHVtbixsYXN0X2NvbHVtbjpvW28ubGVuZ3RoLTFdLmxhc3RfY29sdW1ufSxoJiYoTS5fJC5yYW5nZT1bb1tvLmxlbmd0aC0oeXx8MSldLnJhbmdlWzBdLG9bby5sZW5ndGgtMV0ucmFuZ2VbMV1dKSxnPXRoaXMucGVyZm9ybUFjdGlvbi5jYWxsKE0sYSxjLGwsdGhpcy55eSxfWzFdLHIsbyksInVuZGVmaW5lZCIhPXR5cGVvZiBnKXJldHVybiBnO3kmJihpPWkuc2xpY2UoMCwtMSp5KjIpLHI9ci5zbGljZSgwLC0xKnkpLG89by5zbGljZSgwLC0xKnkpKSxpLnB1c2godGhpcy5wcm9kdWN0aW9uc19bX1sxXV1bMF0pLHIucHVzaChNLiQpLG8ucHVzaChNLl8kKSxiPXNbaVtpLmxlbmd0aC0yXV1baVtpLmxlbmd0aC0xXV0saS5wdXNoKGIpO2JyZWFrO2Nhc2UgMzpyZXR1cm4hMH19cmV0dXJuITB9fSxuPWZ1bmN0aW9uKCl7dmFyIHQ9e0VPRjoxLHBhcnNlRXJyb3I6ZnVuY3Rpb24odCxlKXtpZighdGhpcy55eS5wYXJzZXIpdGhyb3cgbmV3IEVycm9yKHQpO3RoaXMueXkucGFyc2VyLnBhcnNlRXJyb3IodCxlKX0sc2V0SW5wdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lucHV0PXQsdGhpcy5fbW9yZT10aGlzLl9sZXNzPXRoaXMuZG9uZT0hMSx0aGlzLnl5bGluZW5vPXRoaXMueXlsZW5nPTAsdGhpcy55eXRleHQ9dGhpcy5tYXRjaGVkPXRoaXMubWF0Y2g9IiIsdGhpcy5jb25kaXRpb25TdGFjaz1bIklOSVRJQUwiXSx0aGlzLnl5bGxvYz17Zmlyc3RfbGluZToxLGZpcnN0X2NvbHVtbjowLGxhc3RfbGluZToxLGxhc3RfY29sdW1uOjB9LHRoaXMub3B0aW9ucy5yYW5nZXMmJih0aGlzLnl5bGxvYy5yYW5nZT1bMCwwXSksdGhpcy5vZmZzZXQ9MCx0aGlzfSxpbnB1dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2lucHV0WzBdO3RoaXMueXl0ZXh0Kz10LHRoaXMueXlsZW5nKyssdGhpcy5vZmZzZXQrKyx0aGlzLm1hdGNoKz10LHRoaXMubWF0Y2hlZCs9dDt2YXIgZT10Lm1hdGNoKC8oPzpcclxuP3xcbikuKi9nKTtyZXR1cm4gZT8odGhpcy55eWxpbmVubysrLHRoaXMueXlsbG9jLmxhc3RfbGluZSsrKTp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbisrLHRoaXMub3B0aW9ucy5yYW5nZXMmJnRoaXMueXlsbG9jLnJhbmdlWzFdKyssdGhpcy5faW5wdXQ9dGhpcy5faW5wdXQuc2xpY2UoMSksdH0sdW5wdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsbj10LnNwbGl0KC8oPzpcclxuP3xcbikvZyk7dGhpcy5faW5wdXQ9dCt0aGlzLl9pbnB1dCx0aGlzLnl5dGV4dD10aGlzLnl5dGV4dC5zdWJzdHIoMCx0aGlzLnl5dGV4dC5sZW5ndGgtZS0xKSx0aGlzLm9mZnNldC09ZTt2YXIgaT10aGlzLm1hdGNoLnNwbGl0KC8oPzpcclxuP3xcbikvZyk7dGhpcy5tYXRjaD10aGlzLm1hdGNoLnN1YnN0cigwLHRoaXMubWF0Y2gubGVuZ3RoLTEpLHRoaXMubWF0Y2hlZD10aGlzLm1hdGNoZWQuc3Vic3RyKDAsdGhpcy5tYXRjaGVkLmxlbmd0aC0xKSxuLmxlbmd0aC0xJiYodGhpcy55eWxpbmVuby09bi5sZW5ndGgtMSk7dmFyIHI9dGhpcy55eWxsb2MucmFuZ2U7cmV0dXJuIHRoaXMueXlsbG9jPXtmaXJzdF9saW5lOnRoaXMueXlsbG9jLmZpcnN0X2xpbmUsbGFzdF9saW5lOnRoaXMueXlsaW5lbm8rMSxmaXJzdF9jb2x1bW46dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uLGxhc3RfY29sdW1uOm4/KG4ubGVuZ3RoPT09aS5sZW5ndGg/dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uOjApK2lbaS5sZW5ndGgtbi5sZW5ndGhdLmxlbmd0aC1uWzBdLmxlbmd0aDp0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4tZX0sdGhpcy5vcHRpb25zLnJhbmdlcyYmKHRoaXMueXlsbG9jLnJhbmdlPVtyWzBdLHJbMF0rdGhpcy55eWxlbmctZV0pLHRoaXN9LG1vcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9yZT0hMCx0aGlzfSxsZXNzOmZ1bmN0aW9uKHQpe3RoaXMudW5wdXQodGhpcy5tYXRjaC5zbGljZSh0KSl9LHBhc3RJbnB1dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMubWF0Y2hlZC5zdWJzdHIoMCx0aGlzLm1hdGNoZWQubGVuZ3RoLXRoaXMubWF0Y2gubGVuZ3RoKTtyZXR1cm4odC5sZW5ndGg+MjA/Ii4uLiI6IiIpK3Quc3Vic3RyKC0yMCkucmVwbGFjZSgvXG4vZywiIil9LHVwY29taW5nSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1hdGNoO3JldHVybiB0Lmxlbmd0aDwyMCYmKHQrPXRoaXMuX2lucHV0LnN1YnN0cigwLDIwLXQubGVuZ3RoKSksKHQuc3Vic3RyKDAsMjApKyh0Lmxlbmd0aD4yMD8iLi4uIjoiIikpLnJlcGxhY2UoL1xuL2csIiIpfSxzaG93UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhc3RJbnB1dCgpLGU9bmV3IEFycmF5KHQubGVuZ3RoKzEpLmpvaW4oIi0iKTtyZXR1cm4gdCt0aGlzLnVwY29taW5nSW5wdXQoKSsiXG4iK2UrIl4ifSxuZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5kb25lKXJldHVybiB0aGlzLkVPRjt0aGlzLl9pbnB1dHx8KHRoaXMuZG9uZT0hMCk7dmFyIHQsZSxuLGkscjt0aGlzLl9tb3JlfHwodGhpcy55eXRleHQ9IiIsdGhpcy5tYXRjaD0iIik7Zm9yKHZhciBvPXRoaXMuX2N1cnJlbnRSdWxlcygpLHM9MDtzPG8ubGVuZ3RoJiYobj10aGlzLl9pbnB1dC5tYXRjaCh0aGlzLnJ1bGVzW29bc11dKSwhbnx8ZSYmIShuWzBdLmxlbmd0aD5lWzBdLmxlbmd0aCl8fChlPW4saT1zLHRoaXMub3B0aW9ucy5mbGV4KSk7cysrKTtyZXR1cm4gZT8ocj1lWzBdLm1hdGNoKC8oPzpcclxuP3xcbikuKi9nKSxyJiYodGhpcy55eWxpbmVubys9ci5sZW5ndGgpLHRoaXMueXlsbG9jPXtmaXJzdF9saW5lOnRoaXMueXlsbG9jLmxhc3RfbGluZSxsYXN0X2xpbmU6dGhpcy55eWxpbmVubysxLGZpcnN0X2NvbHVtbjp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbixsYXN0X2NvbHVtbjpyP3Jbci5sZW5ndGgtMV0ubGVuZ3RoLXJbci5sZW5ndGgtMV0ubWF0Y2goL1xyP1xuPy8pWzBdLmxlbmd0aDp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbitlWzBdLmxlbmd0aH0sdGhpcy55eXRleHQrPWVbMF0sdGhpcy5tYXRjaCs9ZVswXSx0aGlzLm1hdGNoZXM9ZSx0aGlzLnl5bGVuZz10aGlzLnl5dGV4dC5sZW5ndGgsdGhpcy5vcHRpb25zLnJhbmdlcyYmKHRoaXMueXlsbG9jLnJhbmdlPVt0aGlzLm9mZnNldCx0aGlzLm9mZnNldCs9dGhpcy55eWxlbmddKSx0aGlzLl9tb3JlPSExLHRoaXMuX2lucHV0PXRoaXMuX2lucHV0LnNsaWNlKGVbMF0ubGVuZ3RoKSx0aGlzLm1hdGNoZWQrPWVbMF0sdD10aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh0aGlzLHRoaXMueXksdGhpcyxvW2ldLHRoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMV0pLHRoaXMuZG9uZSYmdGhpcy5faW5wdXQmJih0aGlzLmRvbmU9ITEpLHQ/dDp2b2lkIDApOiIiPT09dGhpcy5faW5wdXQ/dGhpcy5FT0Y6dGhpcy5wYXJzZUVycm9yKCJMZXhpY2FsIGVycm9yIG9uIGxpbmUgIisodGhpcy55eWxpbmVubysxKSsiLiBVbnJlY29nbml6ZWQgdGV4dC5cbiIrdGhpcy5zaG93UG9zaXRpb24oKSx7dGV4dDoiIix0b2tlbjpudWxsLGxpbmU6dGhpcy55eWxpbmVub30pfSxsZXg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5leHQoKTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHQ/dDp0aGlzLmxleCgpfSxiZWdpbjpmdW5jdGlvbih0KXt0aGlzLmNvbmRpdGlvblN0YWNrLnB1c2godCl9LHBvcFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2sucG9wKCl9LF9jdXJyZW50UnVsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMV1dLnJ1bGVzfSx0b3BTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTJdfSxwdXNoU3RhdGU6ZnVuY3Rpb24odCl7dGhpcy5iZWdpbih0KX19O3JldHVybiB0Lm9wdGlvbnM9e30sdC5wZXJmb3JtQWN0aW9uPWZ1bmN0aW9uKHQsZSxuLGkpe2Z1bmN0aW9uIHIodCxuKXtyZXR1cm4gZS55eXRleHQ9ZS55eXRleHQuc3Vic3RyKHQsZS55eWxlbmctbil9c3dpdGNoKG4pe2Nhc2UgMDppZigiXFxcXCI9PT1lLnl5dGV4dC5zbGljZSgtMik/KHIoMCwxKSx0aGlzLmJlZ2luKCJtdSIpKToiXFwiPT09ZS55eXRleHQuc2xpY2UoLTEpPyhyKDAsMSksdGhpcy5iZWdpbigiZW11IikpOnRoaXMuYmVnaW4oIm11IiksZS55eXRleHQpcmV0dXJuIDE1O2JyZWFrO2Nhc2UgMTpyZXR1cm4gMTU7Y2FzZSAyOnJldHVybiB0aGlzLnBvcFN0YXRlKCksMTU7Y2FzZSAzOnJldHVybiB0aGlzLmJlZ2luKCJyYXciKSwxNTtjYXNlIDQ6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSwicmF3Ij09PXRoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMV0/MTU6KGUueXl0ZXh0PWUueXl0ZXh0LnN1YnN0cig1LGUueXlsZW5nLTkpLCJFTkRfUkFXX0JMT0NLIik7Y2FzZSA1OnJldHVybiAxNTtjYXNlIDY6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSwxNDtjYXNlIDc6cmV0dXJuIDY1O2Nhc2UgODpyZXR1cm4gNjg7Y2FzZSA5OnJldHVybiAxOTtjYXNlIDEwOnJldHVybiB0aGlzLnBvcFN0YXRlKCksdGhpcy5iZWdpbigicmF3IiksMjM7Y2FzZSAxMTpyZXR1cm4gNTU7Y2FzZSAxMjpyZXR1cm4gNjA7Y2FzZSAxMzpyZXR1cm4gMjk7Y2FzZSAxNDpyZXR1cm4gNDc7Y2FzZSAxNTpyZXR1cm4gdGhpcy5wb3BTdGF0ZSgpLDQ0O2Nhc2UgMTY6cmV0dXJuIHRoaXMucG9wU3RhdGUoKSw0NDtjYXNlIDE3OnJldHVybiAzNDtjYXNlIDE4OnJldHVybiAzOTtjYXNlIDE5OnJldHVybiA1MTtjYXNlIDIwOnJldHVybiA0ODtjYXNlIDIxOnRoaXMudW5wdXQoZS55eXRleHQpLHRoaXMucG9wU3RhdGUoKSx0aGlzLmJlZ2luKCJjb20iKTticmVhaztjYXNlIDIyOnJldHVybiB0aGlzLnBvcFN0YXRlKCksMTQ7Y2FzZSAyMzpyZXR1cm4gNDg7Y2FzZSAyNDpyZXR1cm4gNzM7Y2FzZSAyNTpyZXR1cm4gNzI7Y2FzZSAyNjpyZXR1cm4gNzI7Y2FzZSAyNzpyZXR1cm4gODc7Y2FzZSAyODpicmVhaztjYXNlIDI5OnJldHVybiB0aGlzLnBvcFN0YXRlKCksNTQ7Y2FzZSAzMDpyZXR1cm4gdGhpcy5wb3BTdGF0ZSgpLDMzO2Nhc2UgMzE6cmV0dXJuIGUueXl0ZXh0PXIoMSwyKS5yZXBsYWNlKC9cXCIvZywnIicpLDgwO2Nhc2UgMzI6cmV0dXJuIGUueXl0ZXh0PXIoMSwyKS5yZXBsYWNlKC9cXA==", "base64"));
  res.write(new Buffer("Jy9nLCInIiksODA7Y2FzZSAzMzpyZXR1cm4gODU7Y2FzZSAzNDpyZXR1cm4gODI7Y2FzZSAzNTpyZXR1cm4gODI7Y2FzZSAzNjpyZXR1cm4gODM7Y2FzZSAzNzpyZXR1cm4gODQ7Y2FzZSAzODpyZXR1cm4gODE7Y2FzZSAzOTpyZXR1cm4gNzU7Y2FzZSA0MDpyZXR1cm4gNzc7Y2FzZSA0MTpyZXR1cm4gNzI7Y2FzZSA0MjpyZXR1cm4gZS55eXRleHQ9ZS55eXRleHQucmVwbGFjZSgvXFwoW1xcXF1dKS9nLCIkMSIpLDcyO2Nhc2UgNDM6cmV0dXJuIklOVkFMSUQiO2Nhc2UgNDQ6cmV0dXJuIDV9fSx0LnJ1bGVzPVsvXig/OlteXHgwMF0qPyg/PShce1x7KSkpLywvXig/OlteXHgwMF0rKS8sL14oPzpbXlx4MDBdezIsfT8oPz0oXHtce3xcXFx7XHt8XFxcXFx7XHt8JCkpKS8sL14oPzpce1x7XHtceyg/PVteXC9dKSkvLC9eKD86XHtce1x7XHtcL1teXHMhIiMlLSxcLlwvOy0+QFxbLVxeYFx7LX5dKyg/PVs9fVxzXC8uXSlcfVx9XH1cfSkvLC9eKD86W15ceDAwXSo/KD89KFx7XHtce1x7KSkpLywvXig/Oltcc1xTXSo/LS0ofik/XH1cfSkvLC9eKD86XCgpLywvXig/OlwpKS8sL14oPzpce1x7XHtceykvLC9eKD86XH1cfVx9XH0pLywvXig/Olx7XHsofik/PikvLC9eKD86XHtceyh+KT8jPikvLC9eKD86XHtceyh+KT8jXCo/KS8sL14oPzpce1x7KH4pP1wvKS8sL14oPzpce1x7KH4pP1xeXHMqKH4pP1x9XH0pLywvXig/Olx7XHsofik/XHMqZWxzZVxzKih+KT9cfVx9KS8sL14oPzpce1x7KH4pP1xeKS8sL14oPzpce1x7KH4pP1xzKmVsc2VcYikvLC9eKD86XHtceyh+KT9ceykvLC9eKD86XHtceyh+KT8mKS8sL14oPzpce1x7KH4pPyEtLSkvLC9eKD86XHtceyh+KT8hW1xzXFNdKj9cfVx9KS8sL14oPzpce1x7KH4pP1wqPykvLC9eKD86PSkvLC9eKD86XC5cLikvLC9eKD86XC4oPz0oWz1+fVxzXC8uKXxdKSkpLywvXig/OltcLy5dKS8sL14oPzpccyspLywvXig/Olx9KH4pP1x9XH0pLywvXig/Oih+KT9cfVx9KS8sL14oPzoiKFxcWyJdfFteIl0pKiIpLywvXig/OicoXFxbJ118W14nXSkqJykvLC9eKD86QCkvLC9eKD86dHJ1ZSg/PShbfn1ccyldKSkpLywvXig/OmZhbHNlKD89KFt+fVxzKV0pKSkvLC9eKD86dW5kZWZpbmVkKD89KFt+fVxzKV0pKSkvLC9eKD86bnVsbCg/PShbfn1ccyldKSkpLywvXig/Oi0/WzAtOV0rKD86XC5bMC05XSspPyg/PShbfn1ccyldKSkpLywvXig/OmFzXHMrXHwpLywvXig/Olx8KS8sL14oPzooW15ccyEiIyUtLFwuXC87LT5AXFstXF5gXHstfl0rKD89KFs9fn1cc1wvLil8XSkpKSkvLC9eKD86XFsoXFxcXXxbXlxdXSkqXF0pLywvXig/Oi4pLywvXig/OiQpL10sdC5jb25kaXRpb25zPXttdTp7cnVsZXM6WzcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0XSxpbmNsdXNpdmU6ITF9LGVtdTp7cnVsZXM6WzJdLGluY2x1c2l2ZTohMX0sY29tOntydWxlczpbNl0saW5jbHVzaXZlOiExfSxyYXc6e3J1bGVzOlszLDQsNV0saW5jbHVzaXZlOiExfSxJTklUSUFMOntydWxlczpbMCwxLDQ0XSxpbmNsdXNpdmU6ITB9fSx0fSgpO3JldHVybiBlLmxleGVyPW4sdC5wcm90b3R5cGU9ZSxlLlBhcnNlcj10LG5ldyB0fSgpO2UuX19lc01vZHVsZT0hMCxlWyJkZWZhdWx0Il09bn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXTt0aGlzLm9wdGlvbnM9dH1mdW5jdGlvbiByKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT10Lmxlbmd0aCk7dmFyIGk9dFtlLTFdLHI9dFtlLTJdO3JldHVybiBpPyJDb250ZW50U3RhdGVtZW50Ij09PWkudHlwZT8ocnx8IW4/L1xyP1xuXHMqPyQvOi8oXnxccj9cbilccyo/JC8pLnRlc3QoaS5vcmlnaW5hbCk6dm9pZCAwOm59ZnVuY3Rpb24gbyh0LGUsbil7dm9pZCAwPT09ZSYmKGU9LTEpO3ZhciBpPXRbZSsxXSxyPXRbZSsyXTtyZXR1cm4gaT8iQ29udGVudFN0YXRlbWVudCI9PT1pLnR5cGU/KHJ8fCFuPy9eXHMqP1xyP1xuLzovXlxzKj8oXHI/XG58JCkvKS50ZXN0KGkub3JpZ2luYWwpOnZvaWQgMDpufWZ1bmN0aW9uIHModCxlLG4pe3ZhciBpPXRbbnVsbD09ZT8wOmUrMV07aWYoaSYmIkNvbnRlbnRTdGF0ZW1lbnQiPT09aS50eXBlJiYobnx8IWkucmlnaHRTdHJpcHBlZCkpe3ZhciByPWkudmFsdWU7aS52YWx1ZT1pLnZhbHVlLnJlcGxhY2Uobj8vXlxzKy86L15bIFx0XSpccj9cbj8vLCIiKSxpLnJpZ2h0U3RyaXBwZWQ9aS52YWx1ZSE9PXJ9fWZ1bmN0aW9uIGEodCxlLG4pe3ZhciBpPXRbbnVsbD09ZT90Lmxlbmd0aC0xOmUtMV07aWYoaSYmIkNvbnRlbnRTdGF0ZW1lbnQiPT09aS50eXBlJiYobnx8IWkubGVmdFN0cmlwcGVkKSl7dmFyIHI9aS52YWx1ZTtyZXR1cm4gaS52YWx1ZT1pLnZhbHVlLnJlcGxhY2Uobj8vXHMrJC86L1sgXHRdKyQvLCIiKSxpLmxlZnRTdHJpcHBlZD1pLnZhbHVlIT09cixpLmxlZnRTdHJpcHBlZH19dmFyIGw9bigxKVsiZGVmYXVsdCJdO2UuX19lc01vZHVsZT0hMDt2YXIgYz1uKDI1KSx1PWwoYyk7aS5wcm90b3R5cGU9bmV3IHVbImRlZmF1bHQiXSxpLnByb3RvdHlwZS5Qcm9ncmFtPWZ1bmN0aW9uKHQpe3ZhciBlPSF0aGlzLm9wdGlvbnMuaWdub3JlU3RhbmRhbG9uZSxuPSF0aGlzLmlzUm9vdFNlZW47dGhpcy5pc1Jvb3RTZWVuPSEwO2Zvcih2YXIgaT10LmJvZHksbD0wLGM9aS5sZW5ndGg7bDxjO2wrKyl7dmFyIHU9aVtsXSxkPXRoaXMuYWNjZXB0KHUpO2lmKGQpe3ZhciBoPXIoaSxsLG4pLHA9byhpLGwsbiksZj1kLm9wZW5TdGFuZGFsb25lJiZoLG09ZC5jbG9zZVN0YW5kYWxvbmUmJnAsXz1kLmlubGluZVN0YW5kYWxvbmUmJmgmJg==", "base64"));
  res.write(new Buffer("cDtkLmNsb3NlJiZzKGksbCwhMCksZC5vcGVuJiZhKGksbCwhMCksZSYmXyYmKHMoaSxsKSxhKGksbCkmJiJQYXJ0aWFsU3RhdGVtZW50Ij09PXUudHlwZSYmKHUuaW5kZW50PS8oWyBcdF0rJCkvLmV4ZWMoaVtsLTFdLm9yaWdpbmFsKVsxXSkpLGUmJmYmJihzKCh1LnByb2dyYW18fHUuaW52ZXJzZSkuYm9keSksYShpLGwpKSxlJiZtJiYocyhpLGwpLGEoKHUuaW52ZXJzZXx8dS5wcm9ncmFtKS5ib2R5KSl9fXJldHVybiB0fSxpLnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudD1pLnByb3RvdHlwZS5EZWNvcmF0b3JCbG9jaz1pLnByb3RvdHlwZS5QYXJ0aWFsQmxvY2tTdGF0ZW1lbnQ9ZnVuY3Rpb24odCl7dGhpcy5hY2NlcHQodC5wcm9ncmFtKSx0aGlzLmFjY2VwdCh0LmludmVyc2UpO3ZhciBlPXQucHJvZ3JhbXx8dC5pbnZlcnNlLG49dC5wcm9ncmFtJiZ0LmludmVyc2UsaT1uLGw9bjtpZihuJiZuLmNoYWluZWQpZm9yKGk9bi5ib2R5WzBdLnByb2dyYW07bC5jaGFpbmVkOylsPWwuYm9keVtsLmJvZHkubGVuZ3RoLTFdLnByb2dyYW07dmFyIGM9e29wZW46dC5vcGVuU3RyaXAub3BlbixjbG9zZTp0LmNsb3NlU3RyaXAuY2xvc2Usb3BlblN0YW5kYWxvbmU6byhlLmJvZHkpLGNsb3NlU3RhbmRhbG9uZTpyKChpfHxlKS5ib2R5KX07aWYodC5vcGVuU3RyaXAuY2xvc2UmJnMoZS5ib2R5LG51bGwsITApLG4pe3ZhciB1PXQuaW52ZXJzZVN0cmlwO3Uub3BlbiYmYShlLmJvZHksbnVsbCwhMCksdS5jbG9zZSYmcyhpLmJvZHksbnVsbCwhMCksdC5jbG9zZVN0cmlwLm9wZW4mJmEobC5ib2R5LG51bGwsITApLCF0aGlzLm9wdGlvbnMuaWdub3JlU3RhbmRhbG9uZSYmcihlLmJvZHkpJiZvKGkuYm9keSkmJihhKGUuYm9keSkscyhpLmJvZHkpKX1lbHNlIHQuY2xvc2VTdHJpcC5vcGVuJiZhKGUuYm9keSxudWxsLCEwKTtyZXR1cm4gY30saS5wcm90b3R5cGUuRGVjb3JhdG9yPWkucHJvdG90eXBlLk11c3RhY2hlU3RhdGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LnN0cmlwfSxpLnByb3RvdHlwZS5QYXJ0aWFsU3RhdGVtZW50PWkucHJvdG90eXBlLkNvbW1lbnRTdGF0ZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zdHJpcHx8e307cmV0dXJue2lubGluZVN0YW5kYWxvbmU6ITAsb3BlbjplLm9wZW4sY2xvc2U6ZS5jbG9zZX19LGVbImRlZmF1bHQiXT1pLHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSgpe3RoaXMucGFyZW50cz1bXX1mdW5jdGlvbiByKHQpe3RoaXMuYWNjZXB0UmVxdWlyZWQodCwicGF0aCIpLHRoaXMuYWNjZXB0QXJyYXkodC5wYXJhbXMpLHRoaXMuYWNjZXB0S2V5KHQsImhhc2giKX1mdW5jdGlvbiBvKHQpe3IuY2FsbCh0aGlzLHQpLHRoaXMuYWNjZXB0S2V5KHQsInByb2dyYW0iKSx0aGlzLmFjY2VwdEtleSh0LCJpbnZlcnNlIil9ZnVuY3Rpb24gcyh0KXt0aGlzLmFjY2VwdFJlcXVpcmVkKHQsIm5hbWUiKSx0aGlzLmFjY2VwdEFycmF5KHQucGFyYW1zKSx0aGlzLmFjY2VwdEtleSh0LCJoYXNoIil9dmFyIGE9bigxKVsiZGVmYXVsdCJdO2UuX19lc01vZHVsZT0hMDt2YXIgbD1uKDYpLGM9YShsKTtpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aSxtdXRhdGluZzohMSxhY2NlcHRLZXk6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmFjY2VwdCh0W2VdKTtpZih0aGlzLm11dGF0aW5nKXtpZihuJiYhaS5wcm90b3R5cGVbbi50eXBlXSl0aHJvdyBuZXcgY1siZGVmYXVsdCJdKCdVbmV4cGVjdGVkIG5vZGUgdHlwZSAiJytuLnR5cGUrJyIgZm91bmQgd2hlbiBhY2NlcHRpbmcgJytlKyIgb24gIit0LnR5cGUpO3RbZV09bn19LGFjY2VwdFJlcXVpcmVkOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5hY2NlcHRLZXkodCxlKSwhdFtlXSl0aHJvdyBuZXcgY1siZGVmYXVsdCJdKHQudHlwZSsiIHJlcXVpcmVzICIrZSl9LGFjY2VwdEFycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmFjY2VwdEtleSh0LGUpLHRbZV18fCh0LnNwbGljZShlLDEpLGUtLSxuLS0pfSxhY2NlcHQ6ZnVuY3Rpb24odCl7aWYodCl7aWYoIXRoaXNbdC50eXBlXSl0aHJvdyBuZXcgY1siZGVmYXVsdCJdKCJVbmtub3duIHR5cGU6ICIrdC50eXBlLHQpO3RoaXMuY3VycmVudCYmdGhpcy5wYXJlbnRzLnVuc2hpZnQodGhpcy5jdXJyZW50KSx0aGlzLmN1cnJlbnQ9dDt2YXIgZT10aGlzW3QudHlwZV0odCk7cmV0dXJuIHRoaXMuY3VycmVudD10aGlzLnBhcmVudHMuc2hpZnQoKSwhdGhpcy5tdXRhdGluZ3x8ZT9lOmUhPT0hMT90OnZvaWQgMH19LFByb2dyYW06ZnVuY3Rpb24odCl7dGhpcy5hY2NlcHRBcnJheSh0LmJvZHkpfSxNdXN0YWNoZVN0YXRlbWVudDpyLERlY29yYXRvcjpyLEJsb2NrU3RhdGVtZW50Om8sRGVjb3JhdG9yQmxvY2s6byxQYXJ0aWFsU3RhdGVtZW50OnMsUGFydGlhbEJsb2NrU3RhdGVtZW50OmZ1bmN0aW9uKHQpe3MuY2FsbCh0aGlzLHQpLHRoaXMuYWNjZXB0S2V5KHQsInByb2dyYW0iKX0sQ29udGVudFN0YXRlbWVudDpmdW5jdGlvbigpe30sQ29tbWVudFN0YXRlbWVudDpmdW5jdGlvbigpe30sU3ViRXhwcmVzc2lvbjpyLFBhdGhFeHByZXNzaW9uOmZ1bmN0aW9uKCl7fSxTdHJpbmdMaXRlcmFsOmZ1bmN0aW9uKCl7fSxOdW1iZXJMaXRlcmFsOmZ1bmN0aW9uKCl7fSxCb29sZWFuTGl0ZXJhbDpmdW5jdGlvbigpe30sVW5kZWZpbmVkTGl0ZXJhbDpmdW5jdGlvbigpe30sTnVsbExpdGVyYWw6ZnVuY3Rpb24oKXt9LEhhc2g6ZnVuY3Rpb24odCl7dGhpcy5hY2NlcHRBcnJheSh0LnBhaXJzKX0sSGFzaFBhaXI6ZnVuY3Rpb24odCl7dGhpcy5hY2NlcHRSZXF1aXJlZCh0LCJ2YWx1ZSIpfX0sZVsiZGVmYXVsdCJdPWksdC5leHBvcnRzPWVbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKHQsZSl7aWYoZT1lLnBhdGg/ZS5wYXRoLm9yaWdpbmFsOmUsdC5wYXRoLm9yaWdpbmFsIT09ZSl7dmFyIG49e2xvYzp0LnBhdGgubG9jfTt0aHJvdyBuZXcgX1siZGVmYXVsdCJdKHQucGF0aC5vcmlnaW5hbCsiIGRvZXNuJ3QgbWF0Y2ggIitlLG4pfX1mdW5jdGlvbiByKHQsZSl7dGhpcy5zb3VyY2U9dCx0aGlzLnN0YXJ0PXtsaW5lOmUuZmlyc3RfbGluZSxjb2x1bW46ZS5maXJzdF9jb2x1bW59LHRoaXMuZW5kPXtsaW5lOmUubGFzdF9saW5lLGNvbHVtbjplLmxhc3RfY29sdW1ufX1mdW5jdGlvbiBvKHQpe3JldHVybi9eXFsuKlxdJC8udGVzdCh0KT90LnN1YnN0cigxLHQubGVuZ3RoLTIpOnR9ZnVuY3Rpb24gcyh0LGUpe3JldHVybntvcGVuOiJ+Ij09PXQuY2hhckF0KDIpLGNsb3NlOiJ+Ij09PWUuY2hhckF0KGUubGVuZ3RoLTMpfX1mdW5jdGlvbiBhKHQpe3JldHVybiB0LnJlcGxhY2UoL15ce1x7fj9cIS0/LT8vLCIiKS5yZXBsYWNlKC8tPy0/fj9cfVx9JC8sIiIpfWZ1bmN0aW9uIGwodCxlLG4pe249dGhpcy5sb2NJbmZvKG4pO2Zvcih2YXIgaT10PyJAIjoiIixyPVtdLG89MCxzPSIiLGE9MCxsPWUubGVuZ3RoO2E8bDthKyspe3ZhciBjPWVbYV0ucGFydCx1PWVbYV0ub3JpZ2luYWwhPT1jO2lmKGkrPShlW2FdLnNlcGFyYXRvcnx8IiIpK2MsdXx8Ii4uIiE9PWMmJiIuIiE9PWMmJiJ0aGlzIiE9PWMpci5wdXNoKGMpO2Vsc2V7aWYoci5sZW5ndGg+MCl0aHJvdyBuZXcgX1siZGVmYXVsdCJdKCJJbnZhbGlkIHBhdGg6ICIraSx7bG9jOm59KTsiLi4iPT09YyYmKG8rKyxzKz0iLi4vIil9fXJldHVybnt0eXBlOiJQYXRoRXhwcmVzc2lvbiIsZGF0YTp0LGRlcHRoOm8scGFydHM6cixvcmlnaW5hbDppLGxvYzpufX1mdW5jdGlvbiBjKHQsZSxuLGkscixvKXt2YXIgcz1pLmNoYXJBdCgzKXx8aS5jaGFyQXQoMiksYT0ieyIhPT1zJiYiJiIhPT1zLGw9L1wqLy50ZXN0KGkpO3JldHVybnt0eXBlOmw/IkRlY29yYXRvciI6Ik11c3RhY2hlU3RhdGVtZW50IixwYXRoOnQscGFyYW1zOmUsaGFzaDpuLGVzY2FwZWQ6YSxzdHJpcDpyLGxvYzp0aGlzLmxvY0luZm8obyl9fWZ1bmN0aW9uIHUodCxlLG4scil7aSh0LG4pLHI9dGhpcy5sb2NJbmZvKHIpO3ZhciBvPXt0eXBlOiJQcm9ncmFtIixib2R5OmUsc3RyaXA6e30sbG9jOnJ9O3JldHVybnt0eXBlOiJCbG9ja1N0YXRlbWVudCIscGF0aDp0LnBhdGgscGFyYW1zOnQucGFyYW1zLGhhc2g6dC5oYXNoLHByb2dyYW06byxvcGVuU3RyaXA6e30saW52ZXJzZVN0cmlwOnt9LGNsb3NlU3RyaXA6e30sbG9jOnJ9fWZ1bmN0aW9uIGQodCxlLG4scixvLHMpe3ImJnIucGF0aCYmaSh0LHIpO3ZhciBhPS9cKi8udGVzdCh0Lm9wZW4pO2UuYmxvY2tQYXJhbXM9dC5ibG9ja1BhcmFtczt2YXIgbD12b2lkIDAsYz12b2lkIDA7aWYobil7aWYoYSl0aHJvdyBuZXcgX1siZGVmYXVsdCJdKCJVbmV4cGVjdGVkIGludmVyc2UgYmxvY2sgb24gZGVjb3JhdG9yIixuKTtuLmNoYWluJiYobi5wcm9ncmFtLmJvZHlbMF0uY2xvc2VTdHJpcD1yLnN0cmlwKSxjPW4uc3RyaXAsbD1uLnByb2dyYW19cmV0dXJuIG8mJihvPWwsbD1lLGU9bykse3R5cGU6YT8iRGVjb3JhdG9yQmxvY2siOiJCbG9ja1N0YXRlbWVudCIscGF0aDp0LnBhdGgscGFyYW1zOnQucGFyYW1zLGhhc2g6dC5oYXNoLHByb2dyYW06ZSxpbnZlcnNlOmwsb3BlblN0cmlwOnQuc3RyaXAsaW52ZXJzZVN0cmlwOmMsY2xvc2VTdHJpcDpyJiZyLnN0cmlwLGxvYzp0aGlzLmxvY0luZm8ocyl9fWZ1bmN0aW9uIGgodCxlKXtpZighZSYmdC5sZW5ndGgpe3ZhciBuPXRbMF0ubG9jLGk9dFt0Lmxlbmd0aC0xXS5sb2M7biYmaSYmKGU9e3NvdXJjZTpuLnNvdXJjZSxzdGFydDp7bGluZTpuLnN0YXJ0LmxpbmUsY29sdW1uOm4uc3RhcnQuY29sdW1ufSxlbmQ6e2xpbmU6aS5lbmQubGluZSxjb2x1bW46aS5lbmQuY29sdW1ufX0pfXJldHVybnt0eXBlOiJQcm9ncmFtIixib2R5OnQsc3RyaXA6e30sbG9jOmV9fWZ1bmN0aW9uIHAodCxlLG4scil7cmV0dXJuIGkodCxuKSx7dHlwZToiUGFydGlhbEJsb2NrU3RhdGVtZW50IixuYW1lOnQucGF0aCxwYXJhbXM6dC5wYXJhbXMsaGFzaDp0Lmhhc2gscHJvZ3JhbTplLG9wZW5TdHJpcDp0LnN0cmlwLGNsb3NlU3RyaXA6biYmbi5zdHJpcCxsb2M6dGhpcy5sb2NJbmZvKHIpfX12YXIgZj1uKDEpWyJkZWZhdWx0Il07ZS5fX2VzTW9kdWxlPSEwLGUuU291cmNlTG9jYXRpb249cixlLmlkPW8sZS5zdHJpcEZsYWdzPXMsZS5zdHJpcENvbW1lbnQ9YSxlLnByZXBhcmVQYXRoPWwsZS5wcmVwYXJlTXVzdGFjaGU9YyxlLnByZXBhcmVSYXdCbG9jaz11LGUucHJlcGFyZUJsb2NrPWQsZS5wcmVwYXJlUHJvZ3JhbT1oLGUucHJlcGFyZVBhcnRpYWxCbG9jaz1wO3ZhciBtPW4oNiksXz1mKG0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkoKXt9ZnVuY3Rpb24gcih0LGUsbil7aWYobnVsbD09dHx8InN0cmluZyIhPXR5cGVvZiB0JiYiUHJvZ3JhbSIhPT10LnR5cGUpdGhyb3cgbmV3IHVbImRlZmF1bHQiXSgiWW91IG11c3QgcGFzcyBhIHN0cmluZyBvciBIYW5kbGViYXJzIEFTVCB0byBIYW5kbGViYXJzLnByZWNvbXBpbGUuIFlvdSBwYXNzZWQgIit0KTtlPWV8fHt9LCJkYXRhImluIGV8fChlLmRhdGE9ITApLGUuY29tcGF0JiYoZS51c2VEZXB0aHM9ITApO3ZhciBpPW4ucGFyc2UodCxlKSxyPShuZXcgbi5Db21waWxlcikuY29tcGlsZShpLGUpO3JldHVybihuZXcgbi5KYXZhU2NyaXB0Q29tcGlsZXIpLmNvbXBpbGUocixlKX1mdW5jdGlvbiBvKHQsZSxuKXtmdW5jdGlvbiBpKCl7dmFyIGk9bi5wYXJzZSh0LGUpLHI9KG5ldyBuLkNvbXBpbGVyKS5jb21waWxlKGksZSksbz0obmV3IG4uSmF2YVNjcmlwdENvbXBpbGVyKS5jb21waWxlKHIsZSx2b2lkIDAsITApO3JldHVybiBuLnRlbXBsYXRlKG8pfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gb3x8KG89aSgpKSxvLmNhbGwodGhpcyx0LGUpfWlmKHZvaWQgMD09PWUmJihlPXt9KSxudWxsPT10fHwic3RyaW5nIiE9dHlwZW9mIHQmJiJQcm9ncmFtIiE9PXQudHlwZSl0aHJvdyBuZXcgdVsiZGVmYXVsdCJdKCJZb3UgbXVzdCBwYXNzIGEgc3RyaW5nIG9yIEhhbmRsZWJhcnMgQVNUIHRvIEhhbmRsZWJhcnMuY29tcGlsZS4gWW91IHBhc3NlZCAiK3QpOyJkYXRhImluIGV8fChlLmRhdGE9ITApLGUuY29tcGF0JiYoZS51c2VEZXB0aHM9ITApO3ZhciBvPXZvaWQgMDtyZXR1cm4gci5fc2V0dXA9ZnVuY3Rpb24odCl7cmV0dXJuIG98fChvPWkoKSksby5fc2V0dXAodCl9LHIuX2NoaWxkPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBvfHwobz1pKCkpLG8uX2NoaWxkKHQsZSxuLHIpfSxyfWZ1bmN0aW9uIHModCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZihkLmlzQXJyYXkodCkmJmQuaXNBcnJheShlKSYmdC5sZW5ndGg9PT1lLmxlbmd0aCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXModFtuXSxlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gYSh0KXtpZighdC5wYXRoLnBhcnRzKXt2YXIgZT10LnBhdGg7dC5wYXRoPXt0eXBlOiJQYXRoRXhwcmVzc2lvbiIsZGF0YTohMSxkZXB0aDowLHBhcnRzOltlLm9yaWdpbmFsKyIiXSxvcmlnaW5hbDplLm9yaWdpbmFsKyIiLGxvYzplLmxvY319fXZhciBsPW4oMSlbImRlZmF1bHQiXTtlLl9fZXNNb2R1bGU9ITAsZS5Db21waWxlcj1pLGUucHJlY29tcGlsZT1yLGUuY29tcGlsZT1vO3ZhciBjPW4oNiksdT1sKGMpLGQ9big1KSxoPW4oMjEpLHA9bChoKSxmPVtdLnNsaWNlO2kucHJvdG90eXBlPXtjb21waWxlcjppLGVxdWFsczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wY29kZXMubGVuZ3RoO2lmKHQub3Bjb2Rlcy5sZW5ndGghPT1lKXJldHVybiExO2Zvcih2YXIgbj0wO248ZTtuKyspe3ZhciBpPXRoaXMub3Bjb2Rlc1tuXSxyPXQub3Bjb2Rlc1tuXTtpZihpLm9wY29kZSE9PXIub3Bjb2RlfHwhcyhpLmFyZ3Msci5hcmdzKSlyZXR1cm4hMX1lPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2Zvcih2YXIgbj0wO248ZTtuKyspaWYoIXRoaXMuY2hpbGRyZW5bbl0uZXF1YWxzKHQuY2hpbGRyZW5bbl0pKXJldHVybiExO3JldHVybiEwfSxndWlkOjAsY29tcGlsZTpmdW5jdGlvbih0LGUpe3RoaXMuc291cmNlTm9kZT1bXSx0aGlzLm9wY29kZXM9W10sdGhpcy5jaGlsZHJlbj1bXSx0aGlzLm9wdGlvbnM9ZSx0aGlzLnN0cmluZ1BhcmFtcz1lLnN0cmluZ1BhcmFtcyx0aGlzLnRyYWNrSWRzPWUudHJhY2tJZHMsZS5ibG9ja1BhcmFtcz1lLmJsb2NrUGFyYW1zfHxbXTt2YXIgbj1lLmtub3duSGVscGVycztpZihlLmtub3duSGVscGVycz17aGVscGVyTWlzc2luZzohMCxibG9ja0hlbHBlck1pc3Npbmc6ITAsZWFjaDohMCwiaWYiOiEwLHVubGVzczohMCwid2l0aCI6ITAsbG9nOiEwLGxvb2t1cDohMH0sbilmb3IodmFyIGkgaW4gbilpIGluIG4mJihlLmtub3duSGVscGVyc1tpXT1uW2ldKTtyZXR1cm4gdGhpcy5hY2NlcHQodCl9LGNvbXBpbGVQcm9ncmFtOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB0aGlzLmNvbXBpbGVyLG49ZS5jb21waWxlKHQsdGhpcy5vcHRpb25zKSxpPXRoaXMuZ3VpZCsrO3JldHVybiB0aGlzLnVzZVBhcnRpYWw9dGhpcy51c2VQYXJ0aWFsfHxuLnVzZVBhcnRpYWwsdGhpcy5jaGlsZHJlbltpXT1uLHRoaXMudXNlRGVwdGhzPXRoaXMudXNlRGVwdGhzfHxuLnVzZURlcHRocyxpfSxhY2NlcHQ6ZnVuY3Rpb24odCl7aWYoIXRoaXNbdC50eXBlXSl0aHJvdyBuZXcgdVsiZGVmYXVsdCJdKCJVbmtub3duIHR5cGU6ICIrdC50eXBlLHQpO3RoaXMuc291cmNlTm9kZS51bnNoaWZ0KHQpO3ZhciBlPXRoaXNbdC50eXBlXSh0KTtyZXR1cm4gdGhpcy5zb3VyY2VOb2RlLnNoaWZ0KCksZX0sUHJvZ3JhbTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMudW5zaGlmdCh0LmJsb2NrUGFyYW1zKTtmb3IodmFyIGU9dC5ib2R5LG49ZS5sZW5ndGgsaT0wO2k8bjtpKyspdGhpcy5hY2NlcHQoZVtpXSk7cmV0dXJuIHRoaXMub3B0aW9ucy5ibG9ja1BhcmFtcy5zaGlmdCgpLHRoaXMuaXNTaW1wbGU9MT09PW4sdGhpcy5ibG9ja1BhcmFtcz10LmJsb2NrUGFyYW1zP3QuYmxvY2tQYXJhbXMubGVuZ3RoOjAsdGhpc30sQmxvY2tTdGF0ZW1lbnQ6ZnVuY3Rpb24odCl7YSh0KTt2YXIgZT10LnByb2dyYW0sbj10LmludmVyc2U7ZT1lJiZ0aGlzLmNvbXBpbGVQcm9ncmFtKGUpLG49biYmdGhpcy5jb21waWxlUHJvZ3JhbShuKTt2YXIgaT10aGlzLmNsYXNzaWZ5U2V4cHIodCk7ImhlbHBlciI9PT1pP3RoaXMuaGVscGVyU2V4cHIodCxlLG4pOiJzaW1wbGUiPT09aT8odGhpcy5zaW1wbGVTZXhwcih0KSx0aGlzLm9wY29kZSgicHVzaFByb2dyYW0iLGUpLHRoaXMub3Bjb2RlKCJwdXNoUHJvZ3JhbSIsbiksdGhpcy5vcGNvZGUoImVtcHR5SGFzaCIpLHRoaXMub3Bjb2RlKCJibG9ja1ZhbHVlIix0LnBhdGgub3JpZ2luYWwpKToodGhpcy5hbWJpZ3VvdXNTZXhwcih0LGUsbiksdGhpcy5vcGNvZGUoInB1c2hQcm9ncmFtIixlKSx0aGlzLm9wY29kZSgicHVzaFByb2dyYW0iLG4pLHRoaXMub3Bjb2RlKCJlbXB0eUhhc2giKSx0aGlzLm9wY29kZSgiYW1iaWd1b3VzQmxvY2tWYWx1ZSIpKSx0aGlzLm9wY29kZSgiYXBwZW5kIil9LERlY29yYXRvckJsb2NrOmZ1bmN0aW9uKHQpe3ZhciBlPXQucHJvZ3JhbSYmdGhpcy5jb21waWxlUHJvZ3JhbSh0LnByb2dyYW0pLG49dGhpcy5zZXR1cEZ1bGxNdXN0YWNoZVBhcmFtcyh0LGUsdm9pZCAwKSxpPXQucGF0aDt0aGlzLnVzZURlY29yYXRvcnM9ITAsdGhpcy5vcGNvZGUoInJlZ2lzdGVyRGVjb3JhdG9yIixuLmxlbmd0aCxpLm9yaWdpbmFsKX0sUGFydGlhbFN0YXRlbWVudDpmdW5jdGlvbih0KXt0aGlzLnVzZVBhcnRpYWw9ITA7dmFyIGU9dC5wcm9ncmFtO2UmJihlPXRoaXMuY29tcGlsZVByb2dyYW0odC5wcm9ncmFtKSk7dmFyIG49dC5wYXJhbXM7aWYobi5sZW5ndGg+MSl0aHJvdyBuZXcgdVsiZGVmYXVsdCJdKCJVbnN1cHBvcnRlZCBudW1iZXIgb2YgcGFydGlhbCBhcmd1bWVudHM6ICIrbi5sZW5ndGgsdCk7bi5sZW5ndGh8fCh0aGlzLm9wdGlvbnMuZXhwbGljaXRQYXJ0aWFsQ29udGV4dD90aGlzLm9wY29kZSgicHVzaExpdGVyYWwiLCJ1bmRlZmluZWQiKTpuLnB1c2goe3R5cGU6IlBhdGhFeHByZXNzaW9uIixwYXJ0czpbXSxkZXB0aDowfSkpO3ZhciBpPXQubmFtZS5vcmlnaW5hbCxyPSJTdWJFeHByZXNzaW9uIj09PXQubmFtZS50eXBlO3ImJnRoaXMuYWNjZXB0KHQubmFtZSksdGhpcy5zZXR1cEZ1bGxNdXN0YWNoZVBhcmFtcyh0LGUsdm9pZCAwLCEwKTt2YXIgbz10LmluZGVudHx8IiI7dGhpcy5vcHRpb25zLnByZXZlbnRJbmRlbnQmJm8mJih0aGlzLm9wY29kZSgiYXBwZW5kQ29udGVudCIsbyksbz0iIiksdGhpcy5vcGNvZGUoImludm9rZVBhcnRpYWwiLHIsaSxvKSx0aGlzLm9wY29kZSgiYXBwZW5kIil9LFBhcnRpYWxCbG9ja1N0YXRlbWVudDpmdW5jdGlvbih0KXt0aGlzLlBhcnRpYWxTdGF0ZW1lbnQodCl9LE11c3RhY2hlU3RhdGVtZW50OmZ1bmN0aW9uKHQpe3RoaXMuU3ViRXhwcmVzc2lvbih0KSx0LmVzY2FwZWQmJiF0aGlzLm9wdGlvbnMubm9Fc2NhcGU/dGhpcy5vcGNvZGUoImFwcGVuZEVzY2FwZWQiKTp0aGlzLm9wY29kZSgiYXBwZW5kIil9LERlY29yYXRvcjpmdW5jdGlvbih0KXt0aGlzLkRlY29yYXRvckJsb2NrKHQpfSxDb250ZW50U3RhdGVtZW50OmZ1bmN0aW9uKHQpe3QudmFsdWUmJnRoaXMub3Bjb2RlKCJhcHBlbmRDb250ZW50Iix0LnZhbHVlKX0sQ29tbWVudFN0YXRlbWVudDpmdW5jdGlvbigpe30sU3ViRXhwcmVzc2lvbjpmdW5jdGlvbih0KXthKHQpO3ZhciBlPXRoaXMuY2xhc3NpZnlTZXhwcih0KTsic2ltcGxlIj09PWU/dGhpcy5zaW1wbGVTZXhwcih0KToiaGVscGVyIj09PWU/dGhpcy5oZWxwZXJTZXhwcih0KTp0aGlzLmFtYmlndW91c1NleHByKHQpfSxhbWJpZ3VvdXNTZXhwcjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5wYXRoLHI9aS5wYXJ0c1swXSxvPW51bGwhPWV8fG51bGwhPW47dGhpcy5vcGNvZGUoImdldENvbnRleHQiLGkuZGVwdGgpLHRoaXMub3Bjb2RlKCJwdXNoUHJvZ3JhbSIsZSksdGhpcy5vcGNvZGUoInB1c2hQcm9ncmFtIixuKSxpLnN0cmljdD0hMCx0aGlzLmFjY2VwdChpKSx0aGlzLm9wY29kZSgiaW52b2tlQW1iaWd1b3VzIixyLG8pfSxzaW1wbGVTZXhwcjpmdW5jdGlvbih0KXt2YXIgZT10LnBhdGg7ZS5zdHJpY3Q9ITAsdGhpcy5hY2NlcHQoZSksdGhpcy5vcGNvZGUoInJlc29sdmU=", "base64"));
  res.write(new Buffer("UG9zc2libGVMYW1iZGEiKX0saGVscGVyU2V4cHI6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuc2V0dXBGdWxsTXVzdGFjaGVQYXJhbXModCxlLG4pLHI9dC5wYXRoLG89ci5wYXJ0c1swXTtpZih0aGlzLm9wdGlvbnMua25vd25IZWxwZXJzW29dKXRoaXMub3Bjb2RlKCJpbnZva2VLbm93bkhlbHBlciIsaS5sZW5ndGgsbyk7ZWxzZXtpZih0aGlzLm9wdGlvbnMua25vd25IZWxwZXJzT25seSl0aHJvdyBuZXcgdVsiZGVmYXVsdCJdKCJZb3Ugc3BlY2lmaWVkIGtub3duSGVscGVyc09ubHksIGJ1dCB1c2VkIHRoZSB1bmtub3duIGhlbHBlciAiK28sdCk7ci5zdHJpY3Q9ITAsci5mYWxzeT0hMCx0aGlzLmFjY2VwdChyKSx0aGlzLm9wY29kZSgiaW52b2tlSGVscGVyIixpLmxlbmd0aCxyLm9yaWdpbmFsLHBbImRlZmF1bHQiXS5oZWxwZXJzLnNpbXBsZUlkKHIpKX19LFBhdGhFeHByZXNzaW9uOmZ1bmN0aW9uKHQpe3RoaXMuYWRkRGVwdGgodC5kZXB0aCksdGhpcy5vcGNvZGUoImdldENvbnRleHQiLHQuZGVwdGgpO3ZhciBlPXQucGFydHNbMF0sbj1wWyJkZWZhdWx0Il0uaGVscGVycy5zY29wZWRJZCh0KSxpPSF0LmRlcHRoJiYhbiYmdGhpcy5ibG9ja1BhcmFtSW5kZXgoZSk7aT90aGlzLm9wY29kZSgibG9va3VwQmxvY2tQYXJhbSIsaSx0LnBhcnRzKTplP3QuZGF0YT8odGhpcy5vcHRpb25zLmRhdGE9ITAsdGhpcy5vcGNvZGUoImxvb2t1cERhdGEiLHQuZGVwdGgsdC5wYXJ0cyx0LnN0cmljdCkpOnRoaXMub3Bjb2RlKCJsb29rdXBPbkNvbnRleHQiLHQucGFydHMsdC5mYWxzeSx0LnN0cmljdCxuKTp0aGlzLm9wY29kZSgicHVzaENvbnRleHQiKX0sU3RyaW5nTGl0ZXJhbDpmdW5jdGlvbih0KXt0aGlzLm9wY29kZSgicHVzaFN0cmluZyIsdC52YWx1ZSl9LE51bWJlckxpdGVyYWw6ZnVuY3Rpb24odCl7dGhpcy5vcGNvZGUoInB1c2hMaXRlcmFsIix0LnZhbHVlKX0sQm9vbGVhbkxpdGVyYWw6ZnVuY3Rpb24odCl7dGhpcy5vcGNvZGUoInB1c2hMaXRlcmFsIix0LnZhbHVlKX0sVW5kZWZpbmVkTGl0ZXJhbDpmdW5jdGlvbigpe3RoaXMub3Bjb2RlKCJwdXNoTGl0ZXJhbCIsInVuZGVmaW5lZCIpfSxOdWxsTGl0ZXJhbDpmdW5jdGlvbigpe3RoaXMub3Bjb2RlKCJwdXNoTGl0ZXJhbCIsIm51bGwiKX0sSGFzaDpmdW5jdGlvbih0KXt2YXIgZT10LnBhaXJzLG49MCxpPWUubGVuZ3RoO2Zvcih0aGlzLm9wY29kZSgicHVzaEhhc2giKTtuPGk7bisrKXRoaXMucHVzaFBhcmFtKGVbbl0udmFsdWUpO2Zvcig7bi0tOyl0aGlzLm9wY29kZSgiYXNzaWduVG9IYXNoIixlW25dLmtleSk7dGhpcy5vcGNvZGUoInBvcEhhc2giKX0sb3Bjb2RlOmZ1bmN0aW9uKHQpe3RoaXMub3Bjb2Rlcy5wdXNoKHtvcGNvZGU6dCxhcmdzOmYuY2FsbChhcmd1bWVudHMsMSksbG9jOnRoaXMuc291cmNlTm9kZVswXS5sb2N9KX0sYWRkRGVwdGg6ZnVuY3Rpb24odCl7dCYmKHRoaXMudXNlRGVwdGhzPSEwKX0sY2xhc3NpZnlTZXhwcjpmdW5jdGlvbih0KXt2YXIgZT1wWyJkZWZhdWx0Il0uaGVscGVycy5zaW1wbGVJZCh0LnBhdGgpLG49ZSYmISF0aGlzLmJsb2NrUGFyYW1JbmRleCh0LnBhdGgucGFydHNbMF0pLGk9IW4mJnBbImRlZmF1bHQiXS5oZWxwZXJzLmhlbHBlckV4cHJlc3Npb24odCkscj0hbiYmKGl8fGUpO2lmKHImJiFpKXt2YXIgbz10LnBhdGgucGFydHNbMF0scz10aGlzLm9wdGlvbnM7cy5rbm93bkhlbHBlcnNbb10/aT0hMDpzLmtub3duSGVscGVyc09ubHkmJihyPSExKX1yZXR1cm4gaT8iaGVscGVyIjpyPyJhbWJpZ3VvdXMiOiJzaW1wbGUifSxwdXNoUGFyYW1zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7", "base64"));
  res.write(new Buffer("ZTxuO2UrKyl0aGlzLnB1c2hQYXJhbSh0W2VdKX0scHVzaFBhcmFtOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGwhPXQudmFsdWU/dC52YWx1ZTp0Lm9yaWdpbmFsfHwiIjtpZih0aGlzLnN0cmluZ1BhcmFtcyllLnJlcGxhY2UmJihlPWUucmVwbGFjZSgvXihcLj9cLlwvKSovZywiIikucmVwbGFjZSgvXC8vZywiLiIpKSx0LmRlcHRoJiZ0aGlzLmFkZERlcHRoKHQuZGVwdGgpLHRoaXMub3Bjb2RlKCJnZXRDb250ZXh0Iix0LmRlcHRofHwwKSx0aGlzLm9wY29kZSgicHVzaFN0cmluZ1BhcmFtIixlLHQudHlwZSksIlN1YkV4cHJlc3Npb24iPT09dC50eXBlJiZ0aGlzLmFjY2VwdCh0KTtlbHNle2lmKHRoaXMudHJhY2tJZHMpe3ZhciBuPXZvaWQgMDtpZighdC5wYXJ0c3x8cFsiZGVmYXVsdCJdLmhlbHBlcnMuc2NvcGVkSWQodCl8fHQuZGVwdGh8fChuPXRoaXMuYmxvY2tQYXJhbUluZGV4KHQucGFydHNbMF0pKSxuKXt2YXIgaT10LnBhcnRzLnNsaWNlKDEpLmpvaW4oIi4iKTt0aGlzLm9wY29kZSgicHVzaElkIiwiQmxvY2tQYXJhbSIsbixpKX1lbHNlIGU9dC5vcmlnaW5hbHx8ZSxlLnJlcGxhY2UmJihlPWUucmVwbGFjZSgvXnRoaXMoPzpcLnwkKS8sIiIpLnJlcGxhY2UoL15cLlwvLywiIikucmVwbGFjZSgvXlwuJC8sIiIpKSx0aGlzLm9wY29kZSgicHVzaElkIix0LnR5cGUsZSl9dGhpcy5hY2NlcHQodCl9fSxzZXR1cEZ1bGxNdXN0YWNoZVBhcmFtczpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10LnBhcmFtcztyZXR1cm4gdGhpcy5wdXNoUGFyYW1zKHIpLHRoaXMub3Bjb2RlKCJwdXNoUHJvZ3JhbSIsZSksdGhpcy5vcGNvZGUoInB1c2hQcm9ncmFtIixuKSx0Lmhhc2g/dGhpcy5hY2NlcHQodC5oYXNoKTp0aGlzLm9wY29kZSgiZW1wdHlIYXNoIixpKSxyfSxibG9ja1BhcmFtSW5kZXg6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLm9wdGlvbnMuYmxvY2tQYXJhbXMubGVuZ3RoO2U8bjtlKyspe3ZhciBpPXRoaXMub3B0aW9ucy5ibG9ja1BhcmFtc1tlXSxyPWkmJmQuaW5kZXhPZihpLHQpO2lmKGkmJnI+PTApcmV0dXJuW2Uscl19fX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSh0KXt0aGlzLnZhbHVlPXR9ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKHQsZSxuLGkpe3ZhciByPWUucG9wU3RhY2soKSxvPTAscz1uLmxlbmd0aDtmb3IodCYmcy0tO288cztvKyspcj1lLm5hbWVMb29rdXAocixuW29dLGkpO3JldHVybiB0P1tlLmFsaWFzYWJsZSgiY29udGFpbmVyLnN0cmljdCIpLCIoIixyLCIsICIsZS5xdW90ZWRTdHJpbmcobltvXSksIikiXTpyfXZhciBzPW4oMSlbImRlZmF1bHQiXTtlLl9fZXNNb2R1bGU9ITA7dmFyIGE9big0KSxsPW4oNiksYz1zKGwpLHU9big1KSxkPW4oMjkpLGg9cyhkKTtyLnByb3RvdHlwZT17bmFtZUxvb2t1cDpmdW5jdGlvbih0LGUpe3JldHVybiByLmlzVmFsaWRKYXZhU2NyaXB0VmFyaWFibGVOYW1lKGUpP1t0LCIuIixlXTpbdCwiWyIsSlNPTi5zdHJpbmdpZnkoZSksIl0iXX0sZGVwdGhlZExvb2t1cDpmdW5jdGlvbih0KXtyZXR1cm5bdGhpcy5hbGlhc2FibGUoImNvbnRhaW5lci5sb29rdXAiKSwnKGRlcHRocywgIicsdCwnIiknXX0sY29tcGlsZXJJbmZvOmZ1bmN0aW9uKCl7dmFyIHQ9YS5DT01QSUxFUl9SRVZJU0lPTixlPWEuUkVWSVNJT05fQ0hBTkdFU1t0XTtyZXR1cm5bdCxlXX0sYXBwZW5kVG9CdWZmZXI6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB1LmlzQXJyYXkodCl8fCh0PVt0XSksdD10aGlzLnNvdXJjZS53cmFwKHQsZSksdGhpcy5lbnZpcm9ubWVudC5pc1NpbXBsZT9bInJldHVybiAiLHQsIjsiXTpuP1siYnVmZmVyICs9ICIsdCwiOyJdOih0LmFwcGVuZFRvQnVmZmVyPSEwLHQpfSxpbml0aWFsaXplQnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVvdGVkU3RyaW5nKCIiKX0sY29tcGlsZTpmdW5jdGlvbih0LGUsbixpKXt0aGlzLmVudmlyb25tZW50PXQsdGhpcy5vcHRpb25zPWUsdGhpcy5zdHJpbmdQYXJhbXM9dGhpcy5vcHRpb25zLnN0cmluZ1BhcmFtcyx0aGlzLnRyYWNrSWRzPXRoaXMub3B0aW9ucy50cmFja0lkcyx0aGlzLnByZWNvbXBpbGU9IWksdGhpcy5uYW1lPXRoaXMuZW52aXJvbm1lbnQubmFtZSx0aGlzLmlzQ2hpbGQ9ISFuLHRoaXMuY29udGV4dD1ufHx7ZGVjb3JhdG9yczpbXSxwcm9ncmFtczpbXSxlbnZpcm9ubWVudHM6W119LHRoaXMucHJlYW1ibGUoKSx0aGlzLnN0YWNrU2xvdD0wLHRoaXMuc3RhY2tWYXJzPVtdLHRoaXMuYWxpYXNlcz17fSx0aGlzLnJlZ2lzdGVycz17bGlzdDpbXX0sdGhpcy5oYXNoZXM9W10sdGhpcy5jb21waWxlU3RhY2s9W10sdGhpcy5pbmxpbmVTdGFjaz1bXSx0aGlzLmJsb2NrUGFyYW1zPVtdLHRoaXMuY29tcGlsZUNoaWxkcmVuKHQsZSksdGhpcy51c2VEZXB0aHM9dGhpcy51c2VEZXB0aHN8fHQudXNlRGVwdGhzfHx0LnVzZURlY29yYXRvcnN8fHRoaXMub3B0aW9ucy5jb21wYXQsdGhpcy51c2VCbG9ja1BhcmFtcz10aGlzLnVzZUJsb2NrUGFyYW1zfHx0LnVzZUJsb2NrUGFyYW1zO3ZhciByPXQub3Bjb2RlcyxvPXZvaWQgMCxzPXZvaWQgMCxhPXZvaWQgMCxsPXZvaWQgMDtmb3IoYT0wLGw9ci5sZW5ndGg7YTxsO2ErKylvPXJbYV0sdGhpcy5zb3VyY2UuY3VycmVudExvY2F0aW9uPW8ubG9jLHM9c3x8by5sb2MsdGhpc1tvLm9wY29kZV0uYXBwbHkodGhpcyxvLmFyZ3MpO2lmKHRoaXMuc291cmNlLmN1cnJlbnRMb2NhdGlvbj1zLHRoaXMucHVzaFNvdXJjZSgiIiksdGhpcy5zdGFja1Nsb3R8fHRoaXMuaW5saW5lU3RhY2subGVuZ3RofHx0aGlzLmNvbXBpbGVTdGFjay5sZW5ndGgpdGhyb3cgbmV3IGNbImRlZmF1bHQiXSgiQ29tcGlsZSBjb21wbGV0ZWQgd2l0aCBjb250ZW50IGxlZnQgb24gc3RhY2siKTt0aGlzLmRlY29yYXRvcnMuaXNFbXB0eSgpP3RoaXMuZGVjb3JhdG9ycz12b2lkIDA6KHRoaXMudXNlRGVjb3JhdG9ycz0hMCx0aGlzLmRlY29yYXRvcnMucHJlcGVuZCgidmFyIGRlY29yYXRvcnMgPSBjb250YWluZXIuZGVjb3JhdG9ycztcbiIpLHRoaXMuZGVjb3JhdG9ycy5wdXNoKCJyZXR1cm4gZm47IiksaT90aGlzLmRlY29yYXRvcnM9RnVuY3Rpb24uYXBwbHkodGhpcyxbImZuIiwicHJvcHMiLCJjb250YWluZXIiLCJkZXB0aDAiLCJkYXRhIiwiYmxvY2tQYXJhbXMiLCJkZXB0aHMiLHRoaXMuZGVjb3JhdG9ycy5tZXJnZSgpXSk6KHRoaXMuZGVjb3JhdG9ycy5wcmVwZW5kKCJmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGgwLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4iKSx0aGlzLmRlY29yYXRvcnMucHVzaCgifVxuIiksdGhpcy5kZWNvcmF0b3JzPXRoaXMuZGVjb3JhdG9ycy5tZXJnZSgpKSk7dmFyIHU9dGhpcy5jcmVhdGVGdW5jdGlvbkNvbnRleHQoaSk7aWYodGhpcy5pc0NoaWxkKXJldHVybiB1O3ZhciBkPXtjb21waWxlcjp0aGlzLmNvbXBpbGVySW5mbygpLG1haW46dX07dGhpcy5kZWNvcmF0b3JzJiYoZC5tYWluX2Q9dGhpcy5kZWNvcmF0b3JzLGQudXNlRGVjb3JhdG9ycz0hMCk7dmFyIGg9dGhpcy5jb250ZXh0LHA9aC5wcm9ncmFtcyxmPWguZGVjb3JhdG9ycztmb3IoYT0wLGw9cC5sZW5ndGg7YTxsO2ErKylwW2FdJiYoZFthXT1wW2FdLGZbYV0mJihkW2ErIl9kIl09ZlthXSxkLnVzZURlY29yYXRvcnM9ITApKTtyZXR1cm4gdGhpcy5lbnZpcm9ubWVudC51c2VQYXJ0aWFsJiYoZC51c2VQYXJ0aWFsPSEwKSx0aGlzLm9wdGlvbnMuZGF0YSYmKGQudXNlRGF0YT0hMCksdGhpcy51c2VEZXB0aHMmJihkLnVzZURlcHRocz0hMCksdGhpcy51c2VCbG9ja1BhcmFtcyYmKGQudXNlQmxvY2tQYXJhbXM9ITApLHRoaXMub3B0aW9ucy5jb21wYXQmJihkLmNvbXBhdD0hMCksaT9kLmNvbXBpbGVyT3B0aW9ucz10aGlzLm9wdGlvbnM6KGQuY29tcGlsZXI9SlNPTi5zdHJpbmdpZnkoZC5jb21waWxlciksdGhpcy5zb3VyY2UuY3VycmVudExvY2F0aW9uPXtzdGFydDp7bGluZToxLGNvbHVtbjowfX0sZD10aGlzLm9iamVjdExpdGVyYWwoZCksZS5zcmNOYW1lPyhkPWQudG9TdHJpbmdXaXRoU291cmNlTWFwKHtmaWxlOmUuZGVzdE5hbWV9KSxkLm1hcD1kLm1hcCYmZC5tYXAudG9TdHJpbmcoKSk6ZD1kLnRvU3RyaW5nKCkpLGR9LHByZWFtYmxlOmZ1bmN0aW9uKCl7dGhpcy5sYXN0Q29udGV4dD0wLHRoaXMuc291cmNlPW5ldyBoWyJkZWZhdWx0Il0odGhpcy5vcHRpb25zLnNyY05hbWUpLHRoaXMuZGVjb3JhdG9ycz1uZXcgaFsiZGVmYXVsdCJdKHRoaXMub3B0aW9ucy5zcmNOYW1lKX0sY3JlYXRlRnVuY3Rpb25Db250ZXh0OmZ1bmN0aW9uKHQpe3ZhciBlPSIiLG49dGhpcy5zdGFja1ZhcnMuY29uY2F0KHRoaXMucmVnaXN0ZXJzLmxpc3QpO24ubGVuZ3RoPjAmJihlKz0iLCAiK24uam9pbigiLCAiKSk7dmFyIGk9MDtmb3IodmFyIHIgaW4gdGhpcy5hbGlhc2VzKXt2YXIgbz10aGlzLmFsaWFzZXNbcl07dGhpcy5hbGlhc2VzLmhhc093blByb3BlcnR5KHIpJiZvLmNoaWxkcmVuJiZvLnJlZmVyZW5jZUNvdW50PjEmJihlKz0iLCBhbGlhcyIrICsraSsiPSIrcixvLmNoaWxkcmVuWzBdPSJhbGlhcyIraSl9dmFyIHM9WyJjb250YWluZXIiLCJkZXB0aDAiLCJoZWxwZXJzIiwicGFydGlhbHMiLCJkYXRhIl07KHRoaXMudXNlQmxvY2tQYXJhbXN8fHRoaXMudXNlRGVwdGhzKSYmcy5wdXNoKCJibG9ja1BhcmFtcyIpLHRoaXMudXNlRGVwdGhzJiZzLnB1c2goImRlcHRocyIpO3ZhciBhPXRoaXMubWVyZ2VTb3VyY2UoZSk7cmV0dXJuIHQ/KHMucHVzaChhKSxGdW5jdGlvbi5hcHBseSh0aGlzLHMpKTp0aGlzLnNvdXJjZS53cmFwKFsiZnVuY3Rpb24oIixzLmpvaW4oIiwiKSwiKSB7XG4gICIsYSwifSJdKX0sbWVyZ2VTb3VyY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbnZpcm9ubWVudC5pc1NpbXBsZSxuPSF0aGlzLmZvcmNlQnVmZmVyLGk9dm9pZCAwLHI9dm9pZCAwLG89dm9pZCAwLHM9dm9pZCAwO3JldHVybiB0aGlzLnNvdXJjZS5lYWNoKGZ1bmN0aW9uKHQpe3QuYXBwZW5kVG9CdWZmZXI/KG8/dC5wcmVwZW5kKCIgICsgIik6bz10LHM9dCk6KG8mJihyP28ucHJlcGVuZCgiYnVmZmVyICs9ICIpOmk9ITAscy5hZGQoIjsiKSxvPXM9dm9pZCAwKSxyPSEwLGV8fChuPSExKSl9KSxuP28/KG8ucHJlcGVuZCgicmV0dXJuICIpLHMuYWRkKCI7IikpOnJ8fHRoaXMuc291cmNlLnB1c2goJ3JldHVybiAiIjsnKToodCs9IiwgYnVmZmVyID0gIisoaT8iIjp0aGlzLmluaXRpYWxpemVCdWZmZXIoKSksbz8oby5wcmVwZW5kKCJyZXR1cm4gYnVmZmVyICsgIikscy5hZGQoIjsiKSk6dGhpcy5zb3VyY2UucHVzaCgicmV0dXJuIGJ1ZmZlcjsiKSksdCYmdGhpcy5zb3VyY2UucHJlcGVuZCgidmFyICIrdC5zdWJzdHJpbmcoMikrKGk/IiI6IjtcbiIpKSx0aGlzLnNvdXJjZS5tZXJnZSgpfSxibG9ja1ZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWxpYXNhYmxlKCJoZWxwZXJzLmJsb2NrSGVscGVyTWlzc2luZyIpLG49W3RoaXMuY29udGV4dE5hbWUoMCldO3RoaXMuc2V0dXBIZWxwZXJBcmdzKHQsMCxuKTt2YXIgaT10aGlzLnBvcFN0YWNrKCk7bi5zcGxpY2UoMSwwLGkpLHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoZSwiY2FsbCIsbikpfSxhbWJpZ3VvdXNCbG9ja1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5hbGlhc2FibGUoImhlbHBlcnMuYmxvY2tIZWxwZXJNaXNzaW5nIiksZT1bdGhpcy5jb250ZXh0TmFtZSgwKV07dGhpcy5zZXR1cEhlbHBlckFyZ3MoIiIsMCxlLCEwKSx0aGlzLmZsdXNoSW5saW5lKCk7dmFyIG49dGhpcy50b3BTdGFjaygpO2Uuc3BsaWNlKDEsMCxuKSx0aGlzLnB1c2g=", "base64"));
  res.write(new Buffer("U291cmNlKFsiaWYgKCEiLHRoaXMubGFzdEhlbHBlciwiKSB7ICIsbiwiID0gIix0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwodCwiY2FsbCIsZSksIn0iXSl9LGFwcGVuZENvbnRlbnQ6ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nQ29udGVudD90PXRoaXMucGVuZGluZ0NvbnRlbnQrdDp0aGlzLnBlbmRpbmdMb2NhdGlvbj10aGlzLnNvdXJjZS5jdXJyZW50TG9jYXRpb24sdGhpcy5wZW5kaW5nQ29udGVudD10fSxhcHBlbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzSW5saW5lKCkpdGhpcy5yZXBsYWNlU3RhY2soZnVuY3Rpb24odCl7cmV0dXJuWyIgIT0gbnVsbCA/ICIsdCwnIDogIiInXX0pLHRoaXMucHVzaFNvdXJjZSh0aGlzLmFwcGVuZFRvQnVmZmVyKHRoaXMucG9wU3RhY2soKSkpO2Vsc2V7dmFyIHQ9dGhpcy5wb3BTdGFjaygpO3RoaXMucHVzaFNvdXJjZShbImlmICgiLHQsIiAhPSBudWxsKSB7ICIsdGhpcy5hcHBlbmRUb0J1ZmZlcih0LHZvaWQgMCwhMCksIiB9Il0pLHRoaXMuZW52aXJvbm1lbnQuaXNTaW1wbGUmJnRoaXMucHVzaFNvdXJjZShbImVsc2UgeyAiLHRoaXMuYXBwZW5kVG9CdWZmZXIoIicnIix2b2lkIDAsITApLCIgfSJdKX19LGFwcGVuZEVzY2FwZWQ6ZnVuY3Rpb24oKXt0aGlzLnB1c2hTb3VyY2UodGhpcy5hcHBlbmRUb0J1ZmZlcihbdGhpcy5hbGlhc2FibGUoImNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uIiksIigiLHRoaXMucG9wU3RhY2soKSwiKSJdKSl9LGdldENvbnRleHQ6ZnVuY3Rpb24odCl7dGhpcy5sYXN0Q29udGV4dD10fSxwdXNoQ29udGV4dDpmdW5jdGlvbigpe3RoaXMucHVzaFN0YWNrTGl0ZXJhbCh0aGlzLmNvbnRleHROYW1lKHRoaXMubGFzdENvbnRleHQpKX0sbG9va3VwT25Db250ZXh0OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPTA7aXx8IXRoaXMub3B0aW9ucy5jb21wYXR8fHRoaXMubGFzdENvbnRleHQ/dGhpcy5wdXNoQ29udGV4dCgpOnRoaXMucHVzaCh0aGlzLmRlcHRoZWRMb29rdXAodFtyKytdKSksdGhpcy5yZXNvbHZlUGF0aCgiY29udGV4dCIsdCxyLGUsbil9LGxvb2t1cEJsb2NrUGFyYW06ZnVuY3Rpb24odCxlKXt0aGlzLnVzZUJsb2NrUGFyYW1zPSEwLHRoaXMucHVzaChbImJsb2NrUGFyYW1zWyIsdFswXSwiXVsiLHRbMV0sIl0iXSksdGhpcy5yZXNvbHZlUGF0aCgiY29udGV4dCIsZSwxKX0sbG9va3VwRGF0YTpmdW5jdGlvbih0LGUsbil7dD90aGlzLnB1c2hTdGFja0xpdGVyYWwoImNvbnRhaW5lci5kYXRhKGRhdGEsICIrdCsiKSIpOnRoaXMucHVzaFN0YWNrTGl0ZXJhbCgiZGF0YSIpLHRoaXMucmVzb2x2ZVBhdGgoImRhdGEiLGUsMCwhMCxuKX0scmVzb2x2ZVBhdGg6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgcz10aGlzO2lmKHRoaXMub3B0aW9ucy5zdHJpY3R8fHRoaXMub3B0aW9ucy5hc3N1bWVPYmplY3RzKXJldHVybiB2b2lkIHRoaXMucHVzaChvKHRoaXMub3B0aW9ucy5zdHJpY3QmJnIsdGhpcyxlLHQpKTtmb3IodmFyIGE9ZS5sZW5ndGg7bjxhO24rKyl0aGlzLnJlcGxhY2VTdGFjayhmdW5jdGlvbihyKXt2YXIgbz1zLm5hbWVMb29rdXAocixlW25dLHQpO3JldHVybiBpP1siICYmICIsb106WyIgIT0gbnVsbCA/ICIsbywiIDogIixyXX0pfSxyZXNvbHZlUG9zc2libGVMYW1iZGE6ZnVuY3Rpb24oKXt0aGlzLnB1c2goW3RoaXMuYWxpYXNhYmxlKCJjb250YWluZXIubGFtYmRhIiksIigiLHRoaXMucG9wU3RhY2soKSwiLCAiLHRoaXMuY29udGV4dE5hbWUoMCksIikiXSl9LHB1c2hTdHJpbmdQYXJhbTpmdW5jdGlvbih0LGUpe3RoaXMucHVzaENvbnRleHQoKSx0aGlzLnB1c2hTdHJpbmcoZSksIlN1YkV4cHJlc3Npb24iIT09ZSYmKCJzdHJpbmciPT10eXBlb2YgdD90aGlzLnB1c2hTdHJpbmcodCk6dGhpcy5wdXNoU3RhY2tMaXRlcmFsKHQpKX0sZW1wdHlIYXNoOmZ1bmN0aW9uKHQpe3RoaXMudHJhY2tJZHMmJnRoaXMucHVzaCgie30iKSx0aGlzLnN0cmluZ1BhcmFtcyYmKHRoaXMucHVzaCgie30iKSx0aGlzLnB1c2goInt9IikpLHRoaXMucHVzaFN0YWNrTGl0ZXJhbCh0PyJ1bmRlZmluZWQiOiJ7fSIpfSxwdXNoSGFzaDpmdW5jdGlvbigpe3RoaXMuaGFzaCYmdGhpcy5oYXNoZXMucHVzaCh0aGlzLmhhc2gpLHRoaXMuaGFzaD17dmFsdWVzOltdLHR5cGVzOltdLGNvbnRleHRzOltdLGlkczpbXX19LHBvcEhhc2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhhc2g7dGhpcy5oYXNoPXRoaXMuaGFzaGVzLnBvcCgpLHRoaXMudHJhY2tJZHMmJnRoaXMucHVzaCh0aGlzLm9iamVjdExpdGVyYWwodC5pZHMpKSx0aGlzLnN0cmluZ1BhcmFtcyYmKHRoaXMucHVzaCh0aGlzLm9iamVjdExpdGVyYWwodC5jb250ZXh0cykpLHRoaXMucHVzaCh0aGlzLm9iamVjdExpdGVyYWwodC50eXBlcykpKSx0aGlzLnB1c2godGhpcy5vYmplY3RMaXRlcmFsKHQudmFsdWVzKSl9LHB1c2hTdHJpbmc6ZnVuY3Rpb24odCl7dGhpcy5wdXNoU3RhY2tMaXRlcmFsKHRoaXMucXVvdGVkU3RyaW5nKHQpKX0scHVzaExpdGVyYWw6ZnVuY3Rpb24odCl7dGhpcy5wdXNoU3RhY2tMaXRlcmFsKHQpfSxwdXNoUHJvZ3JhbTpmdW5jdGlvbih0KXtudWxsIT10P3RoaXMucHVzaFN0YWNrTGl0ZXJhbCh0aGlzLnByb2dyYW1FeHByZXNzaW9uKHQpKTp0aGlzLnB1c2hTdGFja0xpdGVyYWwobnVsbCl9LHJlZ2lzdGVyRGVjb3JhdG9yOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5uYW1lTG9va3VwKCJkZWNvcmF0b3JzIixlLCJkZWNvcmF0b3IiKSxpPXRoaXMuc2V0dXBIZWxwZXJBcmdzKGUsdCk7dGhpcy5kZWNvcmF0b3JzLnB1c2goWyJmbiA9ICIsdGhpcy5kZWNvcmF0b3JzLmZ1bmN0aW9uQ2FsbChuLCIiLFsiZm4iLCJwcm9wcyIsImNvbnRhaW5lciIsaV0pLCIgfHwgZm47Il0pfSxpbnZva2VIZWxwZXI6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMucG9wU3RhY2soKSxyPXRoaXMuc2V0dXBIZWxwZXIodCxlKSxvPW4/W3IubmFtZSwiIHx8ICJdOiIiLHM9WyIoIl0uY29uY2F0KG8saSk7dGhpcy5vcHRpb25zLnN0cmljdHx8cy5wdXNoKCIgfHwgIix0aGlzLmFsaWFzYWJsZSgiaGVscGVycy5oZWxwZXJNaXNzaW5nIikpLHMucHVzaCgiKSIpLHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwocywiY2FsbCIsci5jYWxsUGFyYW1zKSl9LGludm9rZUtub3duSGVscGVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zZXR1cEhlbHBlcih0LGUpO3RoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwobi5uYW1lLCJjYWxsIixuLmNhbGxQYXJhbXMpKX0saW52b2tlQW1iaWd1b3VzOmZ1bmN0aW9uKHQsZSl7dGhpcy51c2VSZWdpc3RlcigiaGVscGVyIik7dmFyIG49dGhpcy5wb3BTdGFjaygpO3RoaXMuZW1wdHlIYXNoKCk7dmFyIGk9dGhpcy5zZXR1cEhlbHBlcigwLHQsZSkscj10aGlzLmxhc3RIZWxwZXI9dGhpcy5uYW1lTG9va3VwKCJoZWxwZXJzIix0LCJoZWxwZXIiKSxvPVsiKCIsIihoZWxwZXIgPSAiLHIsIiB8fCAiLG4sIikiXTt0aGlzLm9wdGlvbnMuc3RyaWN0fHwob1swXT0iKGhlbHBlciA9ICIsby5wdXNoKCIgIT0gbnVsbCA/IGhlbHBlciA6ICIsdGhpcy5hbGlhc2FibGUoImhlbHBlcnMuaGVscGVyTWlzc2luZyIpKSksdGhpcy5wdXNoKFsiKCIsbyxpLnBhcmFtc0luaXQ/WyIpLCgiLGkucGFyYW1zSW5pdF06W10sIiksIiwiKHR5cGVvZiBoZWxwZXIgPT09ICIsdGhpcy5hbGlhc2FibGUoJyJmdW5jdGlvbiInKSwiID8gIix0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoImhlbHBlciIsImNhbGwiLGkuY2FsbFBhcmFtcyksIiA6IGhlbHBlcikpIl0pfSxpbnZva2VQYXJ0aWFsOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1bXSxyPXRoaXMuc2V0dXBQYXJhbXMoZSwxLGkpO3QmJihlPXRoaXMucG9wU3RhY2soKSxkZWxldGUgci5uYW1lKSxuJiYoci5pbmRlbnQ9SlNPTi5zdHJpbmdpZnkobikpLHIuaGVscGVycz0iaGVscGVycyIsci5wYXJ0aWFscz0icGFydGlhbHMiLHIuZGVjb3JhdG9ycz0iY29udGFpbmVyLmRlY29yYXRvcnMiLHQ/aS51bnNoaWZ0KGUpOmkudW5zaGlmdCh0aGlzLm5hbWVMb29rdXAoInBhcnRpYWxzIixlLCJwYXJ0aWFsIikpLHRoaXMub3B0aW9ucy5jb21wYXQmJihyLmRlcHRocz0iZGVwdGhzIikscj10aGlzLm9iamVjdExpdGVyYWwociksaS5wdXNoKHIpLHRoaXMucHVzaCh0aGlzLnNvdXJjZS5mdW5jdGlvbkNhbGwoImNvbnRhaW5lci5pbnZva2VQYXJ0aWFsIiwiIixpKSl9LGFzc2lnblRvSGFzaDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBvcFN0YWNrKCksbj12b2lkIDAsaT12b2lkIDAscj12b2lkIDA7dGhpcy50cmFja0lkcyYmKHI9dGhpcy5wb3BTdGFjaygpKSwKCXRoaXMuc3RyaW5nUGFyYW1zJiYoaT10aGlzLnBvcFN0YWNrKCksbj10aGlzLnBvcFN0YWNrKCkpO3ZhciBvPXRoaXMuaGFzaDtuJiYoby5jb250ZXh0c1t0XT1uKSxpJiYoby50eXBlc1t0XT1pKSxyJiYoby5pZHNbdF09ciksby52YWx1ZXNbdF09ZX0scHVzaElkOmZ1bmN0aW9uKHQsZSxuKXsiQmxvY2tQYXJhbSI9PT10P3RoaXMucHVzaFN0YWNrTGl0ZXJhbCgiYmxvY2tQYXJhbXNbIitlWzBdKyJdLnBhdGhbIitlWzFdKyJdIisobj8iICsgIitKU09OLnN0cmluZ2lmeSgiLiIrbik6IiIpKToiUGF0aEV4cHJlc3Npb24iPT09dD90aGlzLnB1c2hTdHJpbmcoZSk6IlN1YkV4cHJlc3Npb24iPT09dD90aGlzLnB1c2hTdGFja0xpdGVyYWwoInRydWUiKTp0aGlzLnB1c2hTdGFja0xpdGVyYWwoIm51bGwiKX0sY29tcGlsZXI6cixjb21waWxlQ2hpbGRyZW46ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5jaGlsZHJlbixpPXZvaWQgMCxyPXZvaWQgMCxvPTAscz1uLmxlbmd0aDtvPHM7bysrKXtpPW5bb10scj1uZXcgdGhpcy5jb21waWxlcjt2YXIgYT10aGlzLm1hdGNoRXhpc3RpbmdQcm9ncmFtKGkpO251bGw9PWE/KHRoaXMuY29udGV4dC5wcm9ncmFtcy5wdXNoKCIiKSxhPXRoaXMuY29udGV4dC5wcm9ncmFtcy5sZW5ndGgsaS5pbmRleD1hLGkubmFtZT0icHJvZ3JhbSIrYSx0aGlzLmNvbnRleHQucHJvZ3JhbXNbYV09ci5jb21waWxlKGksZSx0aGlzLmNvbnRleHQsIXRoaXMucHJlY29tcGlsZSksdGhpcy5jb250ZXh0LmRlY29yYXRvcnNbYV09ci5kZWNvcmF0b3JzLHRoaXMuY29udGV4dC5lbnZpcm9ubWVudHNbYV09aSx0aGlzLnVzZURlcHRocz10aGlzLnVzZURlcHRoc3x8ci51c2VEZXB0aHMsdGhpcy51c2VCbG9ja1BhcmFtcz10aGlzLnVzZUJsb2NrUGFyYW1zfHxyLnVzZUJsb2NrUGFyYW1zKTooaS5pbmRleD1hLGkubmFtZT0icHJvZ3JhbSIrYSx0aGlzLnVzZURlcHRocz10aGlzLnVzZURlcHRoc3x8aS51c2VEZXB0aHMsdGhpcy51c2VCbG9ja1BhcmFtcz10aGlzLnVzZUJsb2NrUGFyYW1zfHxpLnVzZUJsb2NrUGFyYW1zKX19LG1hdGNoRXhpc3RpbmdQcm9ncmFtOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5jb250ZXh0LmVudmlyb25tZW50cy5sZW5ndGg7ZTxuO2UrKyl7dmFyIGk9dGhpcy5jb250ZXh0LmVudmlyb25tZW50c1tlXTtpZihpJiZpLmVxdWFscyh0KSlyZXR1cm4gZX19LHByb2dyYW1FeHByZXNzaW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZW52aXJvbm1lbnQuY2hpbGRyZW5bdF0sbj1bZS5pbmRleCwiZGF0YSIsZS5ibG9ja1BhcmFtc107cmV0dXJuKHRoaXMudXNlQmxvY2tQYXJhbXN8fHRoaXMudXNlRGVwdGhzKSYmbi5wdXNoKCJibG9ja1BhcmFtcyIpLHRoaXMudXNlRGVwdGhzJiZuLnB1c2goImRlcHRocyIpLCJjb250YWluZXIucHJvZ3JhbSgiK24uam9pbigiLCAiKSsiKSJ9LHVzZVJlZ2lzdGVyOmZ1bmN0aW9uKHQpe3RoaXMucmVnaXN0ZXJzW3RdfHwodGhpcy5yZWdpc3RlcnNbdF09ITAsdGhpcy5yZWdpc3RlcnMubGlzdC5wdXNoKHQpKX0scHVzaDpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGl8fCh0PXRoaXMuc291cmNlLndyYXAodCkpLHRoaXMuaW5saW5lU3RhY2sucHVzaCh0KSx0fSxwdXNoU3RhY2tMaXRlcmFsOmZ1bmN0aW9uKHQpe3RoaXMucHVzaChuZXcgaSh0KSl9LHB1c2hTb3VyY2U6ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nQ29udGVudCYmKHRoaXMuc291cmNlLnB1c2godGhpcy5hcHBlbmRUb0J1ZmZlcih0aGlzLnNvdXJjZS5xdW90ZWRTdHJpbmcodGhpcy5wZW5kaW5nQ29udGVudCksdGhpcy5wZW5kaW5nTG9jYXRpb24pKSx0aGlzLnBlbmRpbmdDb250ZW50PXZvaWQgMCksdCYmdGhpcy5zb3VyY2UucHVzaCh0KX0scmVwbGFjZVN0YWNrOmZ1bmN0aW9uKHQpe3ZhciBlPVsiKCJdLG49dm9pZCAwLHI9dm9pZCAwLG89dm9pZCAwO2lmKCF0aGlzLmlzSW5saW5lKCkpdGhyb3cgbmV3IGNbImRlZmF1bHQiXSgicmVwbGFjZVN0YWNrIG9uIG5vbi1pbmxpbmUiKTt2YXIgcz10aGlzLnBvcFN0YWNrKCEwKTtpZihzIGluc3RhbmNlb2YgaSluPVtzLnZhbHVlXSxlPVsiKCIsbl0sbz0hMDtlbHNle3I9ITA7dmFyIGE9dGhpcy5pbmNyU3RhY2soKTtlPVsiKCgiLHRoaXMucHVzaChhKSwiID0gIixzLCIpIl0sbj10aGlzLnRvcFN0YWNrKCl9dmFyIGw9dC5jYWxsKHRoaXMsbik7b3x8dGhpcy5wb3BTdGFjaygpLHImJnRoaXMuc3RhY2tTbG90LS0sdGhpcy5wdXNoKGUuY29uY2F0KGwsIikiKSl9LGluY3JTdGFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YWNrU2xvdCsrLHRoaXMuc3RhY2tTbG90PnRoaXMuc3RhY2tWYXJzLmxlbmd0aCYmdGhpcy5zdGFja1ZhcnMucHVzaCgic3RhY2siK3RoaXMuc3RhY2tTbG90KSx0aGlzLnRvcFN0YWNrTmFtZSgpfSx0b3BTdGFja05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4ic3RhY2siK3RoaXMuc3RhY2tTbG90fSxmbHVzaElubGluZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5saW5lU3RhY2s7dGhpcy5pbmxpbmVTdGFjaz1bXTtmb3IodmFyIGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspe3ZhciByPXRbZV07aWYociBpbnN0YW5jZW9mIGkpdGhpcy5jb21waWxlU3RhY2sucHVzaChyKTtlbHNle3ZhciBvPXRoaXMuaW5jclN0YWNrKCk7dGhpcy5wdXNoU291cmNlKFtvLCIgPSAiLHIsIjsiXSksdGhpcy5jb21waWxlU3RhY2sucHVzaChvKX19fSxpc0lubGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlubGluZVN0YWNrLmxlbmd0aH0scG9wU3RhY2s6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pc0lubGluZSgpLG49KGU/dGhpcy5pbmxpbmVTdGFjazp0aGlzLmNvbXBpbGVTdGFjaykucG9wKCk7aWYoIXQmJm4gaW5zdGFuY2VvZiBpKXJldHVybiBuLnZhbHVlO2lmKCFlKXtpZighdGhpcy5zdGFja1Nsb3QpdGhyb3cgbmV3IGNbImRlZmF1bHQiXSgiSW52YWxpZCBzdGFjayBwb3AiKTt0aGlzLnN0YWNrU2xvdC0tfXJldHVybiBufSx0b3BTdGFjazpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXNJbmxpbmUoKT90aGlzLmlubGluZVN0YWNrOnRoaXMuY29tcGlsZVN0YWNrLGU9dFt0Lmxlbmd0aC0xXTtyZXR1cm4gZSBpbnN0YW5jZW9mIGk/ZS52YWx1ZTplfSxjb250ZXh0TmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy51c2VEZXB0aHMmJnQ/ImRlcHRoc1siK3QrIl0iOiJkZXB0aCIrdH0scXVvdGVkU3RyaW5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNvdXJjZS5xdW90ZWRTdHJpbmcodCl9LG9iamVjdExpdGVyYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc291cmNlLm9iamVjdExpdGVyYWwodCl9LGFsaWFzYWJsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFsaWFzZXNbdF07cmV0dXJuIGU/KGUucmVmZXJlbmNlQ291bnQrKyxlKTooZT10aGlzLmFsaWFzZXNbdF09dGhpcy5zb3VyY2Uud3JhcCh0KSxlLmFsaWFzYWJsZT0hMCxlLnJlZmVyZW5jZUNvdW50PTEsZSl9LHNldHVwSGVscGVyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1bXSxyPXRoaXMuc2V0dXBIZWxwZXJBcmdzKGUsdCxpLG4pLG89dGhpcy5uYW1lTG9va3VwKCJoZWxwZXJzIixlLCJoZWxwZXIiKSxzPXRoaXMuYWxpYXNhYmxlKHRoaXMuY29udGV4dE5hbWUoMCkrIiAhPSBudWxsID8gIit0aGlzLmNvbnRleHROYW1lKDApKyIgOiB7fSIpO3JldHVybntwYXJhbXM6aSxwYXJhbXNJbml0OnIsbmFtZTpvLGNhbGxQYXJhbXM6W3NdLmNvbmNhdChpKX19LHNldHVwUGFyYW1zOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT17fSxyPVtdLG89W10scz1bXSxhPSFuLGw9dm9pZCAwO2EmJihuPVtdKSxpLm5hbWU9dGhpcy5xdW90ZWRTdHJpbmcodCksaS5oYXNoPXRoaXMucG9wU3RhY2soKSx0aGlzLnRyYWNrSWRzJiYoaS5oYXNoSWRzPXRoaXMucG9wU3RhY2soKSksdGhpcy5zdHJpbmdQYXJhbXMmJihpLmhhc2hUeXBlcz10aGlzLnBvcFN0YWNrKCksaS5oYXNoQ29udGV4dHM9dGhpcy5wb3BTdGFjaygpKTt2YXIgYz10aGlzLnBvcFN0YWNrKCksdT10aGlzLnBvcFN0YWNrKCk7KHV8fGMpJiYoaS5mbj11fHwiY29udGFpbmVyLm5vb3AiLGkuaW52ZXJzZT1jfHwiY29udGFpbmVyLm5vb3AiKTtmb3IodmFyIGQ9ZTtkLS07KWw9dGhpcy5wb3BTdGFjaygpLG5bZF09bCx0aGlzLnRyYWNrSWRzJiYoc1tkXT10aGlzLnBvcFN0YWNrKCkpLHRoaXMuc3RyaW5nUGFyYW1zJiYob1tkXT10aGlzLnBvcFN0YWNrKCkscltkXT10aGlzLnBvcFN0YWNrKCkpO3JldHVybiBhJiYoaS5hcmdzPXRoaXMuc291cmNlLmdlbmVyYXRlQXJyYXkobikpLHRoaXMudHJhY2tJZHMmJihpLmlkcz10aGlzLnNvdXJjZS5nZW5lcmF0ZUFycmF5KHMpKSx0aGlzLnN0cmluZ1BhcmFtcyYmKGkudHlwZXM9dGhpcy5zb3VyY2UuZ2VuZXJhdGVBcnJheShvKSxpLmNvbnRleHRzPXRoaXMuc291cmNlLmdlbmVyYXRlQXJyYXkocikpLHRoaXMub3B0aW9ucy5kYXRhJiYoaS5kYXRhPSJkYXRhIiksdGhpcy51c2VCbG9ja1BhcmFtcyYmKGkuYmxvY2tQYXJhbXM9ImJsb2NrUGFyYW1zIiksaX0sc2V0dXBIZWxwZXJBcmdzOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXRoaXMuc2V0dXBQYXJhbXModCxlLG4pO3JldHVybiByPXRoaXMub2JqZWN0TGl0ZXJhbChyKSxpPyh0aGlzLnVzZVJlZ2lzdGVyKCJvcHRpb25zIiksbi5wdXNoKCJvcHRpb25zIiksWyJvcHRpb25zPSIscl0pOm4/KG4ucHVzaChyKSwiIik6cn19LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PSJicmVhayBlbHNlIG5ldyB2YXIgY2FzZSBmaW5hbGx5IHJldHVybiB2b2lkIGNhdGNoIGZvciBzd2l0Y2ggd2hpbGUgY29udGludWUgZnVuY3Rpb24gdGhpcyB3aXRoIGRlZmF1bHQgaWYgdGhyb3cgZGVsZXRlIGluIHRyeSBkbyBpbnN0YW5jZW9mIHR5cGVvZiBhYnN0cmFjdCBlbnVtIGludCBzaG9ydCBib29sZWFuIGV4cG9ydCBpbnRlcmZhY2Ugc3RhdGljIGJ5dGUgZXh0ZW5kcyBsb25nIHN1cGVyIGNoYXIgZmluYWwgbmF0aXZlIHN5bmNocm9uaXplZCBjbGFzcyBmbG9hdCBwYWNrYWdlIHRocm93cyBjb25zdCBnb3RvIHByaXZhdGUgdHJhbnNpZW50IGRlYnVnZ2VyIGltcGxlbWVudHMgcHJvdGVjdGVkIHZvbGF0aWxlIGRvdWJsZSBpbXBvcnQgcHVibGljIGxldCB5aWVsZCBhd2FpdCBudWxsIHRydWUgZmFsc2UiLnNwbGl0KCIgIiksZT1yLlJFU0VSVkVEX1dPUkRTPXt9LG49MCxpPXQubGVuZ3RoO248aTtuKyspZVt0W25dXT0hMH0oKSxyLmlzVmFsaWRKYXZhU2NyaXB0VmFyaWFibGVOYW1lPWZ1bmN0aW9uKHQpe3JldHVybiFyLlJFU0VSVkVEX1dPUkRTW3RdJiYvXlthLXpBLVpfJF1bMC05YS16QS1aXyRdKiQvLnRlc3QodCl9LGVbImRlZmF1bHQiXT1yLHQuZXhwb3J0cz1lWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSh0LGUsbil7aWYoby5pc0FycmF5KHQpKXtmb3IodmFyIGk9W10scj0wLHM9dC5sZW5ndGg7cjxzO3IrKylpLnB1c2goZS53cmFwKHRbcl0sbikpO3JldHVybiBpfXJldHVybiJib29sZWFuIj09dHlwZW9mIHR8fCJudW1iZXIiPT10eXBlb2YgdD90KyIiOnR9ZnVuY3Rpb24gcih0KXt0aGlzLnNyY0ZpbGU9dCx0aGlzLnNvdXJjZT1bXX1lLl9fZXNNb2R1bGU9ITA7dmFyIG89big1KSxzPXZvaWQgMDt0cnl7fWNhdGNoKGEpe31zfHwocz1mdW5jdGlvbih0LGUsbixpKXt0aGlzLnNyYz0iIixpJiZ0aGlzLmFkZChpKX0scy5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbih0KXtvLmlzQXJyYXkodCkmJih0PXQuam9pbigiIikpLHRoaXMuc3JjKz10fSxwcmVwZW5kOmZ1bmN0aW9uKHQpe28uaXNBcnJheSh0KSYmKHQ9dC5qb2luKCIiKSksdGhpcy5zcmM9dCt0aGlzLnNyY30sdG9TdHJpbmdXaXRoU291cmNlTWFwOmZ1bmN0aW9uKCl7cmV0dXJue2NvZGU6dGhpcy50b1N0cmluZygpfX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcmN9fSksci5wcm90b3R5cGU9e2lzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zb3VyY2UubGVuZ3RofSxwcmVwZW5kOmZ1bmN0aW9uKHQsZSl7dGhpcy5zb3VyY2UudW5zaGlmdCh0aGlzLndyYXAodCxlKSl9LHB1c2g6ZnVuY3Rpb24odCxlKXt0aGlzLnNvdXJjZS5wdXNoKHRoaXMud3JhcCh0LGUpKX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVtcHR5KCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXt0LmFkZChbIiAgIixlLCJcbiJdKX0pLHR9LGVhY2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnNvdXJjZS5sZW5ndGg7ZTxuO2UrKyl0KHRoaXMuc291cmNlW2VdKX0sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmN1cnJlbnRMb2NhdGlvbnx8e3N0YXJ0Ont9fTtyZXR1cm4gbmV3IHModC5zdGFydC5saW5lLHQuc3RhcnQuY29sdW1uLHRoaXMuc3JjRmlsZSl9LHdyYXA6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3RoaXMuY3VycmVudExvY2F0aW9ufHx7c3RhcnQ6e319OmFyZ3VtZW50c1sxXTtyZXR1cm4gdCBpbnN0YW5jZW9mIHM/dDoodD1pKHQsdGhpcyxlKSxuZXcgcyhlLnN0YXJ0LmxpbmUsZS5zdGFydC5jb2x1bW4sdGhpcy5zcmNGaWxlLHQpKX0sZnVuY3Rpb25DYWxsOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbj10aGlzLmdlbmVyYXRlTGlzdChuKSx0aGlzLndyYXAoW3QsZT8iLiIrZSsiKCI6IigiLG4sIikiXSl9LHF1b3RlZFN0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4nIicrKHQrIiIpLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC8iL2csJ1xcIicpLnJlcGxhY2UoL1xuL2csIlxcbiIpLnJlcGxhY2UoL1xyL2csIlxcciIpLnJlcGxhY2UoL1x1MjAyOC9nLCJcXHUyMDI4IikucmVwbGFjZSgvXHUyMDI5L2csIlxcdTIwMjkiKSsnIid9LG9iamVjdExpdGVyYWw6ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIHI9aSh0W25dLHRoaXMpOyJ1bmRlZmluZWQiIT09ciYmZS5wdXNoKFt0aGlzLnF1b3RlZFN0cmluZyhuKSwiOiIscl0pfXZhciBvPXRoaXMuZ2VuZXJhdGVMaXN0KGUpO3JldHVybiBvLnByZXBlbmQoInsiKSxvLmFkZCgifSIpLG99LGdlbmVyYXRlTGlzdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lbXB0eSgpLG49MCxyPXQubGVuZ3RoO248cjtuKyspbiYmZS5hZGQoIiwiKSxlLmFkZChpKHRbbl0sdGhpcykpO3JldHVybiBlfSxnZW5lcmF0ZUFycmF5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2VuZXJhdGVMaXN0KHQpO3JldHVybiBlLnByZXBlbmQoIlsiKSxlLmFkZCgiXSIpLGV9fSxlWyJkZWZhdWx0Il09cix0LmV4cG9ydHM9ZVsiZGVmYXVsdCJdfV0pfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMyKV0scj1mdW5jdGlvbih0KXtyZXR1cm4gdC5hamF4U2V0dXAoe2JlZm9yZVNlbmQ6ZnVuY3Rpb24oZSl7ZS5zZXRSZXF1ZXN0SGVhZGVyKCJYLU9rdGEtWHNyZlRva2VuIix0KCIjX3hzcmZUb2tlbiIpLnRleHQoKSl9LGNvbnZlcnRlcnM6eyJ0ZXh0IHNlY3VyZUpTT04iOmZ1bmN0aW9uKHQpe3JldHVybiJ3aGlsZSgxKXt9OyI9PT10LnN1YnN0cmluZygwLDExKSYmKHQ9dC5zdWJzdHJpbmcoMTEpKSxKU09OLnBhcnNlKHQpfX19KSx3aW5kb3cualF1ZXJ5Q291cmFnZT10LHR9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9X19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zMzJfX30sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMzM0KTt0LmV4cG9ydHM9bigzMzUpKGkpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7dmFyIGk9ci5EZWZlcnJlZCgpO3JldHVybiByLmFqYXgoe3R5cGU6dCx1cmw6ZSxoZWFkZXJzOm4uaGVhZGVycyxkYXRhOkpTT04uc3RyaW5naWZ5KG4uZGF0YSkseGhyRmllbGRzOnt3aXRoQ3JlZGVudGlhbHM6ITB9fSkudGhlbihmdW5jdGlvbih0LGUsbil7ZGVsZXRlIG4udGhlbixpLnJlc29sdmUobil9LGZ1bmN0aW9uKHQpe2RlbGV0ZSB0LnRoZW4saS5yZWplY3QodCl9KSxpfXZhciByPW4oMzMyKTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU9dGhpcztpZighdCl0aHJvdyBuZXcgYygiTm8gYXJndW1lbnRzIHBhc3NlZCB0byBjb25zdHJ1Y3Rvci4gUmVxdWlyZWQgdXNhZ2U6IG5ldyBPa3RhQXV0aChhcmdzKSIpO2lmKCF0LnVybCl0aHJvdyBuZXcgYygnTm8gdXJsIHBhc3NlZCB0byBjb25zdHJ1Y3Rvci4gUmVxdWlyZWQgdXNhZ2U6IG5ldyBPa3RhQXV0aCh7dXJsOiAiaHR0cHM6Ly9zYW1wbGUub2t0YS5jb20ifSknKTt0aGlzLm9wdGlvbnM9e3VybDpyLnJlbW92ZVRyYWlsaW5nU2xhc2godC51cmwpLGNsaWVudElkOnQuY2xpZW50SWQsaXNzdWVyOnIucmVtb3ZlVHJhaWxpbmdTbGFzaCh0Lmlzc3VlciksYXV0aG9yaXplVXJsOnIucmVtb3ZlVHJhaWxpbmdTbGFzaCh0LmF1dGhvcml6ZVVybCksdXNlcmluZm9Vcmw6ci5yZW1vdmVUcmFpbGluZ1NsYXNoKHQudXNlcmluZm9VcmwpLHJlZGlyZWN0VXJpOnQucmVkaXJlY3RVcmksYWpheFJlcXVlc3Q6dC5hamF4UmVxdWVzdCx0cmFuc2Zvcm1FcnJvclhIUjp0LnRyYW5zZm9ybUVycm9yWEhSLGhlYWRlcnM6dC5oZWFkZXJzfSx0Lm1heENsb2NrU2tld3x8MD09PXQubWF4Q2xvY2tTa2V3P3RoaXMub3B0aW9ucy5tYXhDbG9ja1NrZXc9dC5tYXhDbG9ja1NrZXc6dGhpcy5vcHRpb25zLm1heENsb2NrU2tldz11LkRFRkFVTFRfTUFYX0NMT0NLX1NLRVcsZS5zZXNzaW9uPXtjbG9zZTpyLmJpbmQocy5jbG9zZVNlc3Npb24sbnVsbCxlKSxleGlzdHM6ci5iaW5kKHMuc2Vzc2lvbkV4aXN0cyxudWxsLGUpLGdldDpyLmJpbmQocy5nZXRTZXNzaW9uLG51bGwsZSkscmVmcmVzaDpyLmJpbmQocy5yZWZyZXNoU2Vzc2lvbixudWxsLGUpLHNldENvb2tpZUFuZFJlZGlyZWN0OnIuYmluZChzLnNldENvb2tpZUFuZFJlZGlyZWN0LG51bGwsZSl9LGUudHg9e3N0YXR1czpyLmJpbmQoby50cmFuc2FjdGlvblN0YXR1cyxudWxsLGUpLHJlc3VtZTpyLmJpbmQoby5yZXN1bWVUcmFuc2FjdGlvbixudWxsLGUpLGV4aXN0czpyLmJpbmQoby50cmFuc2FjdGlvbkV4aXN0cyxudWxsLGUpfSxlLnR4LmV4aXN0cy5fZ2V0Q29va2llPWZ1bmN0aW9uKHQpe3JldHVybiBhLmdldENvb2tpZSh0KX0sZS5pZFRva2VuPXthdXRob3JpemU6ci5kZXByZWNhdGVXcmFwKCJVc2UgdG9rZW4uZ2V0V2l0aG91dFByb21wdCwgdG9rZW4uZ2V0V2l0aFBvcHVwLCBvciB0b2tlbi5nZXRXaXRoUmVkaXJlY3QgaW5zdGVhZCBvZiBpZFRva2VuLmF1dGhvcml6ZS4iLHIuYmluZChsLmdldFRva2VuLG51bGwsZSkpLHZlcmlmeTpyLmRlcHJlY2F0ZVdyYXAoIlVzZSB0b2tlbi52ZXJpZnkgaW5zdGVhZCBvZiBpZFRva2VuLnZlcmlmeSIsci5iaW5kKGwudmVyaWZ5SWRUb2tlbixudWxsLGUpKSxyZWZyZXNoOnIuZGVwcmVjYXRlV3JhcCgiVXNlIHRva2VuLnJlZnJlc2ggaW5zdGVhZCBvZiBpZFRva2VuLnJlZnJlc2giLHIuYmluZChsLnJlZnJlc2hJZFRva2VuLG51bGwsZSkpLGRlY29kZTpyLmRlcHJlY2F0ZVdyYXAoIlVzZSB0b2tlbi5kZWNvZGUgaW5zdGVhZCBvZiBpZFRva2VuLmRlY29kZSIsbC5kZWNvZGVUb2tlbil9LGUuaWRUb2tlbi5hdXRob3JpemUuX2dldExvY2F0aW9uSHJlZj1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sZS50b2tlbj17Z2V0V2l0aG91dFByb21wdDpyLmJpbmQobC5nZXRXaXRob3V0UHJvbXB0LG51bGwsZSksZ2V0V2l0aFBvcHVwOnIuYmluZChsLmdldFdpdGhQb3B1cCxudWxsLGUpLGdldFdpdGhSZWRpcmVjdDpyLmJpbmQobC5nZXRXaXRoUmVkaXJlY3QsbnVsbCxlKSxwYXJzZUZyb21Vcmw6ci5iaW5kKGwucGFyc2VGcm9tVXJsLG51bGwsZSksZGVjb2RlOmwuZGVjb2RlVG9rZW4scmVmcmVzaDpyLmJpbmQobC5yZWZyZXNoVG9rZW4sbnVsbCxlKSxnZXRVc2VySW5mbzpyLmJpbmQobC5nZXRVc2VySW5mbyxudWxsLGUpLHZlcmlmeTpyLmJpbmQobC52ZXJpZnlUb2tlbixudWxsLGUpfSxlLnRva2VuLmdldFdpdGhSZWRpcmVjdC5fc2V0TG9jYXRpb249ZnVuY3Rpb24odCl7d2luZG93LmxvY2F0aW9uPXR9LGUudG9rZW4ucGFyc2VGcm9tVXJsLl9nZXRMb2NhdGlvbkhhc2g9ZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNofSxlLnRva2VuTWFuYWdlcj1uZXcgZChlLHQudG9rZW5NYW5hZ2VyKX1uKDMzNik7dmFyIHI9big=", "base64"));
  res.write(new Buffer("MzM4KSxvPW4oMzM5KSxzPW4oMzQ5KSxhPW4oMzQxKSxsPW4oMzUwKSxjPW4oMzQ0KSx1PW4oMzQ1KSxkPW4oMzU0KSxoPWkucHJvdG90eXBlO2guZmVhdHVyZXM9e30saC5mZWF0dXJlcy5pc1BvcHVwUG9zdE1lc3NhZ2VTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5kb2N1bWVudE1vZGUmJmRvY3VtZW50LmRvY3VtZW50TW9kZTwxMDtyZXR1cm4hKCF3aW5kb3cucG9zdE1lc3NhZ2V8fHQpfSxoLmZlYXR1cmVzLmlzVG9rZW5WZXJpZnlTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGNyeXB0byYmY3J5cHRvLnN1YnRsZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5fSxoLnNpZ25Jbj1mdW5jdGlvbih0KXtyZXR1cm4gby5wb3N0VG9UcmFuc2FjdGlvbih0aGlzLCIvYXBpL3YxL2F1dGhuIix0KX0saC5zaWduT3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbi5jbG9zZSgpfSxoLmZvcmdvdFBhc3N3b3JkPWZ1bmN0aW9uKHQpe3JldHVybiBvLnBvc3RUb1RyYW5zYWN0aW9uKHRoaXMsIi9hcGkvdjEvYXV0aG4vcmVjb3ZlcnkvcGFzc3dvcmQiLHQpfSxoLnVubG9ja0FjY291bnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG8ucG9zdFRvVHJhbnNhY3Rpb24odGhpcywiL2FwaS92MS9hdXRobi9yZWNvdmVyeS91bmxvY2siLHQpfSxoLnZlcmlmeVJlY292ZXJ5VG9rZW49ZnVuY3Rpb24odCl7cmV0dXJuIG8ucG9zdFRvVHJhbnNhY3Rpb24odGhpcywiL2FwaS92MS9hdXRobi9yZWNvdmVyeS90b2tlbiIsdCl9LHQuZXhwb3J0cz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKG4pe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT8obiYmIW4uYWpheFJlcXVlc3QmJihuLmFqYXhSZXF1ZXN0PXQpLHZvaWQgci5iaW5kKGksdGhpcykobikpOm5ldyBlKG4pfXJldHVybiBlLnByb3RvdHlwZT1pLnByb3RvdHlwZSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGV9fSxmdW5jdGlvbih0LGUsbil7bigzMzcpLEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCxlKXt2YXIgbjtpZihudWxsPT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3IoJyJ0aGlzIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7dmFyIGk9T2JqZWN0KHRoaXMpLHI9aS5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBvPStlfHwwO2lmKE1hdGguYWJzKG8pPT09MS8wJiYobz0wKSxvPj1yKXJldHVybi0xO2ZvcihuPU1hdGgubWF4KG8+PTA/bzpyLU1hdGguYWJzKG8pLDApO248cjspe2lmKG4gaW4gaSYmaVtuXT09PXQpcmV0dXJuIG47bisrfXJldHVybi0xfSksQXJyYXkuaXNBcnJheXx8KEFycmF5LmlzQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLm1lc3NhZ2U9dH12YXIgbj1lLGk9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ijt0LnByb3RvdHlwZT1uZXcgRXJyb3IsdC5wcm90b3R5cGUubmFtZT0iSW52YWxpZENoYXJhY3RlckVycm9yIixuLmJ0b2F8fChuLmJ0b2E9ZnVuY3Rpb24oZSl7Zm9yKHZhciBuLHIsbz1TdHJpbmcoZSkscz0wLGE9aSxsPSIiO28uY2hhckF0KDB8cyl8fChhPSI9IixzJTEpO2wrPWEuY2hhckF0KDYzJm4+PjgtcyUxKjgpKXtpZihyPW8uY2hhckNvZGVBdChzKz0uNzUpLHI+MjU1KXRocm93IG5ldyB0KCInYnRvYScgZmFpbGVkOiBUaGUgc3RyaW5nIHRvIGJlIGVuY29kZWQgY29udGFpbnMgY2hhcmFjdGVycyBvdXRzaWRlIG9mIHRoZSBMYXRpbjEgcmFuZ2UuIik7bj1uPDw4fHJ9cmV0dXJuIGx9KSxuLmF0b2J8fChuLmF0b2I9ZnVuY3Rpb24oZSl7dmFyIG49U3RyaW5nKGUpLnJlcGxhY2UoLz0rJC8sIiIpO2lmKG4ubGVuZ3RoJTQ9PTEpdGhyb3cgbmV3IHQoIidhdG9iJyBmYWlsZWQ6IFRoZSBzdHJpbmcgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuIik7Zm9yKHZhciByLG8scz0wLGE9MCxsPSIiO289bi5jaGFyQXQoYSsrKTt+byYmKHI9cyU0PzY0KnIrbzpvLHMrKyU0KT9sKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZyPj4oLTIqcyY2KSk6MClvPWkuaW5kZXhPZihvKTtyZXR1cm4gbH0pfSgpfSxmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cztuLmJhc2U2NFVybFRvQmFzZTY0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1wtL2csIisiKS5yZXBsYWNlKC9fL2csIi8iKX0sbi5iYXNlNjRVcmxUb1N0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1uLmJhc2U2NFVybFRvQmFzZTY0KHQpO3N3aXRjaChlLmxlbmd0aCU0KXtjYXNlIDA6YnJlYWs7Y2FzZSAyOmUrPSI9PSI7YnJlYWs7Y2FzZSAzOmUrPSI9IjticmVhaztkZWZhdWx0OnRocm93Ik5vdCBhIHZhbGlkIEJhc2U2NFVybCJ9dmFyIGk9YXRvYihlKTt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoaSkpfWNhdGNoKHIpe3JldHVybiBpfX0sbi5zdHJpbmdUb0J1ZmZlcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLG49MDtuPHQubGVuZ3RoO24rKyllW25dPXQuY2hhckNvZGVBdChuKTtyZXR1cm4gZX0sbi5iYXNlNjRVcmxEZWNvZGU9ZnVuY3Rpb24odCl7cmV0dXJuIGF0b2Iobi5iYXNlNjRVcmxUb0Jhc2U2NCh0KSl9LG4uYmluZD1mdW5jdGlvbih0LGUpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBpPW4uY29uY2F0KGkpLHQuYXBwbHkoZSxpKX19LG4uaXNBYnNvbHV0ZVVybD1mdW5jdGlvbih0KXtyZXR1cm4vXig/OlthLXpdKzopP1wvXC8vaS50ZXN0KHQpfSxuLmlzU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IFN0cmluZ10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSxuLmlzT2JqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSxuLmlzTnVtYmVyPWZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSxuLmlzQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0sbi5pc29Ub1VUQ1N0cmluZz1mdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKC9cZCsvZyksbj1EYXRlLlVUQyhlWzBdLGVbMV0tMSxlWzJdLGVbM10sZVs0XSxlWzVdKSxpPW5ldyBEYXRlKG4pO3JldHVybiBpLnRvVVRDU3RyaW5nKCl9LG4udG9RdWVyeVBhcmFtcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtpZihudWxsIT09dClmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZ2b2lkIDAhPT10W25dJiZudWxsIT09dFtuXSYmZS5wdXNoKG4rIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0W25dKSk7cmV0dXJuIGUubGVuZ3RoPyI/IitlLmpvaW4oIiYiKToiIn0sbi5nZW5SYW5kb21TdHJpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSJhYmNkZWZnaGlqa2xub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5IixuPSIiLGk9MCxyPWUubGVuZ3RoO2k8dDsrK2kpbis9ZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqcildO3JldHVybiBufSxuLmV4dGVuZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfSxuLnJlbW92ZU5pbHM9ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIGk9dFtuXTtudWxsIT09aSYmdm9pZCAwIT09aSYmKGVbbl09aSl9cmV0dXJuIGV9LG4uY2xvbmU9ZnVuY3Rpb24odCl7aWYodCl7dmFyIGU9SlNPTi5zdHJpbmdpZnkodCk7aWYoZSlyZXR1cm4gSlNPTi5wYXJzZShlKX1yZXR1cm4gdH0sbi5vbWl0PWZ1bmN0aW9uKHQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxpPXt9O2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJmUuaW5kZXhPZihyKT09LTEmJihpW3JdPXRbcl0pO3JldHVybiBuLmNsb25lKGkpfSxuLmZpbmQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5sZW5ndGg7bi0tOyl7dmFyIGk9dFtuXSxyPSEwO2Zvcih2YXIgbyBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkobykmJmlbb10hPT1lW29dKXtyPSExO2JyZWFrfWlmKHIpcmV0dXJuIGl9fSxuLmdldExpbms9ZnVuY3Rpb24odCxlLGkpe2lmKHQmJnQuX2xpbmtzKXt2YXIgcj1uLmNsb25lKHQuX2xpbmtzW2VdKTtyZXR1cm4gciYmci5uYW1lJiZpP3IubmFtZT09PWk/cjp2b2lkIDA6cn19LG4uZ2V0TmF0aXZlQ29uc29sZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuY29uc29sZX0sbi5nZXRDb25zb2xlPWZ1bmN0aW9uKCl7dmFyIHQ9bi5nZXROYXRpdmVDb25zb2xlKCk7cmV0dXJuIHQmJnQubG9nP3Q6e2xvZzpmdW5jdGlvbigpe319fSxuLndhcm49ZnVuY3Rpb24odCl7bi5nZXRDb25zb2xlKCkubG9nKCJbb2t0YS1hdXRoLXNka10gV0FSTjogIit0KX0sbi5kZXByZWNhdGU9ZnVuY3Rpb24odCl7bi5nZXRDb25zb2xlKCkubG9nKCJbb2t0YS1hdXRoLXNka10gREVQUkVDQVRJT046ICIrdCl9LG4uZGVwcmVjYXRlV3JhcD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuLmRlcHJlY2F0ZSh0KSxlLmFwcGx5KG51bGwsYXJndW1lbnRzKX19LG4ucmVtb3ZlVHJhaWxpbmdTbGFzaD1mdW5jdGlvbih0KXtpZih0KXJldHVybiIvIj09PXQuc2xpY2UoLTEpP3Quc2xpY2UoMCwtMSk6dH19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7dmFyIG49bS5jbG9uZShlKXx8e307cmV0dXJuIW4uc3RhdGVUb2tlbiYmdC5zdGF0ZVRva2VuJiYobi5zdGF0ZVRva2VuPXQuc3RhdGVUb2tlbiksbn1mdW5jdGlvbiByKHQpe3JldHVybiBpKHQpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gZT1pKHQsZSksZi5wb3N0KHQsdC5vcHRpb25zLnVybCsiL2FwaS92MS9hdXRobiIsZSl9ZnVuY3Rpb24gcyh0LGUpe2lmKCFlfHwhZS5zdGF0ZVRva2VuKXt2YXIgbj10LnR4LmV4aXN0cy5fZ2V0Q29va2llKHkuU1RBVEVfVE9LRU5fQ09PS0lFX05BTUUpO2lmKCFuKXJldHVybiBfLnJlamVjdChuZXcgZygiTm8gdHJhbnNhY3Rpb24gdG8gcmVzdW1lIikpO2U9e3N0YXRlVG9rZW46bn19cmV0dXJuIHQudHguc3RhdHVzKGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBwKHQsZSl9KX1mdW5jdGlvbiBhKHQpe3JldHVybiEhdC50eC5leGlzdHMuX2dldENvb2tpZSh5LlNUQVRFX1RPS0VOX0NPT0tJRV9OQU1FKX1mdW5jdGlvbiBsKHQsZSxuKXtyZXR1cm4gZi5wb3N0KHQsZSxuKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcCh0LGUpfSl9ZnVuY3Rpb24gYyh0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKGkpe2Z1bmN0aW9uIG8oKXt2YXIgbj1sLmhyZWY7cmV0dXJuIGEmJihuKz0iP3JlbWVtYmVyRGV2aWNlPXRydWUiKSxmLnBvc3QodCxuLHIoZSkse3NhdmVBdXRoblN0YXRlOiExfSl9dmFyIHMsYTttLmlzTnVtYmVyKGkpP3M9aTptLmlzT2JqZWN0KGkpJiYocz1pLmRlbGF5LGE9aS5yZW1lbWJlckRldmljZSksc3x8MD09PXN8fChzPXkuREVGQVVMVF9QT0xMSU5HX0RFTEFZKTt2YXIgbD1tLmdldExpbmsoZSwibmV4dCIsInBvbGwiKTtuLmlzUG9sbGluZz0hMDt2YXIgYz0wLHU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5pc1BvbGxpbmc/bygpLnRoZW4oZnVuY3Rpb24oZSl7aWYoYz0wLGUuZmFjdG9yUmVzdWx0JiYiV0FJVElORyI9PT1lLmZhY3RvclJlc3VsdCl7aWYoIW4uaXNQb2xsaW5nKXRocm93IG5ldyB2O3JldHVybiBfLmRlbGF5KHMpLnRoZW4odSl9cmV0dXJuIG4uaXNQb2xsaW5nPSExLG5ldyBwKHQsZSl9KS5mYWlsKGZ1bmN0aW9uKHQpe2lmKHQueGhyJiYoMD09PXQueGhyLnN0YXR1c3x8NDI5PT09dC54aHIuc3RhdHVzKSYmYzw9NCl7dmFyIGU9MWUzKk1hdGgucG93KDIsYyk7cmV0dXJuIGMrKyxfLmRlbGF5KGUpLnRoZW4odSl9dGhyb3cgdH0pOl8ucmVqZWN0KG5ldyB2KX07cmV0dXJuIHUoKS5mYWlsKGZ1bmN0aW9uKHQpe3Rocm93IG4uaXNQb2xsaW5nPSExLHR9KX19ZnVuY3Rpb24gdSh0LGUsbixyLG8pe2lmKEFycmF5LmlzQXJyYXkocikpcmV0dXJuIGZ1bmN0aW9uKGkscyl7aWYoIWkpdGhyb3cgbmV3IGcoIk11c3QgcHJvdmlkZSBhIGxpbmsgbmFtZSIpO3ZhciBhPW0uZmluZChyLHtuYW1lOml9KTtpZighYSl0aHJvdyBuZXcgZygiTm8gbGluayBmb3VuZCBmb3IgdGhhdCBuYW1lIik7cmV0dXJuIHUodCxlLG4sYSxvKShzKX07aWYoci5oaW50cyYmci5oaW50cy5hbGxvdyYmMT09PXIuaGludHMuYWxsb3cubGVuZ3RoKXt2YXIgcz1yLmhpbnRzLmFsbG93WzBdO3N3aXRjaChzKXtjYXNlIkdFVCI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYuZ2V0KHQsci5ocmVmKX07Y2FzZSJQT1NUIjpyZXR1cm4gZnVuY3Rpb24ocyl7byYmby5pc1BvbGxpbmcmJihvLmlzUG9sbGluZz0hMSk7dmFyIGE9aShlLHMpOyJNRkFfRU5ST0xMIj09PWUuc3RhdHVzJiZtLmV4dGVuZChhLHtmYWN0b3JUeXBlOm4uZmFjdG9yVHlwZSxwcm92aWRlcjpuLnByb3ZpZGVyfSk7dmFyIGM9ci5ocmVmO3JldHVybiB2b2lkIDAhPT1hLnJlbWVtYmVyRGV2aWNlPyhhLnJlbWVtYmVyRGV2aWNlJiYoYys9Ij9yZW1lbWJlckRldmljZT10cnVlIiksYT1tLm9taXQoYSwicmVtZW1iZXJEZXZpY2UiKSk6YS5wcm9maWxlJiZ2b2lkIDAhPT1hLnByb2ZpbGUudXBkYXRlUGhvbmUmJihhLnByb2ZpbGUudXBkYXRlUGhvbmUmJihjKz0iP3VwZGF0ZVBob25lPXRydWUiKSxhLnByb2ZpbGU9bS5vbWl0KGEucHJvZmlsZSwidXBkYXRlUGhvbmUiKSksbCh0LGMsYSl9fX19ZnVuY3Rpb24gZCh0LGUsbixpKXt2YXIgcj17fTtmb3IodmFyIG8gaW4gbi5fbGlua3MpaWYobi5fbGlua3MuaGFzT3duUHJvcGVydHkobykpe3ZhciBzPW4uX2xpbmtzW29dO2lmKCJuZXh0Ij09PW8mJihvPXMubmFtZSkscy50eXBlKXJbb109cztlbHNlIHN3aXRjaChvKXtjYXNlInBvbGwiOnIucG9sbD1jKHQsZSxpKTticmVhaztkZWZhdWx0OnZhciBhPXUodCxlLG4scw==", "base64"));
  res.write(new Buffer("LGkpO2EmJihyW29dPWEpfX1yZXR1cm4gcn1mdW5jdGlvbiBoKHQsZSxuLGkpe2lmKG49bnx8ZSxuPW0uY2xvbmUobiksQXJyYXkuaXNBcnJheShuKSl7Zm9yKHZhciByPVtdLG89MCxzPW4ubGVuZ3RoO288cztvKyspci5wdXNoKGgodCxlLG5bb10saSkpO3JldHVybiByfXZhciBhPW4uX2VtYmVkZGVkfHx7fTtmb3IodmFyIGwgaW4gYSlhLmhhc093blByb3BlcnR5KGwpJiYobS5pc09iamVjdChhW2xdKXx8QXJyYXkuaXNBcnJheShhW2xdKSkmJihhW2xdPWgodCxlLGFbbF0saSkpO3ZhciBjPWQodCxlLG4saSk7cmV0dXJuIG0uZXh0ZW5kKGEsYyksbj1tLm9taXQobiwiX2VtYmVkZGVkIiwiX2xpbmtzIiksbS5leHRlbmQobixhKSxufWZ1bmN0aW9uIHAodCxlKXtlJiYodGhpcy5kYXRhPWUsbS5leHRlbmQodGhpcyxoKHQsZSxlLHt9KSksZGVsZXRlIHRoaXMuc3RhdGVUb2tlbiwiUkVDT1ZFUllfQ0hBTExFTkdFIiE9PWUuc3RhdHVzfHxlLl9saW5rc3x8KHRoaXMuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBfKG5ldyBwKHQpKX0pKX12YXIgZj1uKDM0MCksbT1uKDMzOCksXz1uKDM0NiksZz1uKDM0NCksdj1uKDM0OCkseT1uKDM0NSk7dC5leHBvcnRzPXt0cmFuc2FjdGlvblN0YXR1czpvLHJlc3VtZVRyYW5zYWN0aW9uOnMsdHJhbnNhY3Rpb25FeGlzdHM6YSxwb3N0VG9UcmFuc2FjdGlvbjpsfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtlPWV8fHt9O3ZhciBuPWUudXJsLGk9ZS5tZXRob2Qscj1lLmFyZ3Msbz1lLnNhdmVBdXRoblN0YXRlLGg9ZS5hY2Nlc3NUb2tlbixwPWwuZ2V0SHR0cENhY2hlKCk7aWYoZS5jYWNoZVJlc3BvbnNlKXt2YXIgZj1wLmdldFN0b3JhZ2UoKSxtPWZbbl07aWYobSYmRGF0ZS5ub3coKS8xZTM8bS5leHBpcmVzQXQpcmV0dXJuIGMucmVzb2x2ZShtLnJlc3BvbnNlKX12YXIgXz17QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiIsIlgtT2t0YS1Vc2VyLUFnZW50LUV4dGVuZGVkIjoib2t0YS1hdXRoLWpzLSIrZC5TREtfVkVSU0lPTn07cy5leHRlbmQoXyx0Lm9wdGlvbnMuaGVhZGVyc3x8e30pLGgmJnMuaXNTdHJpbmcoaCkmJihfLkF1dGhvcml6YXRpb249IkJlYXJlciAiK2gpO3ZhciBnLHYseT17aGVhZGVyczpfLGRhdGE6cnx8dm9pZCAwfTtyZXR1cm4gbmV3IGModC5vcHRpb25zLmFqYXhSZXF1ZXN0KGksbix5KSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdj10LnJlc3BvbnNlVGV4dCx2JiZzLmlzU3RyaW5nKHYpJiYodj1KU09OLnBhcnNlKHYpKSxvJiYodi5zdGF0ZVRva2VufHxhLmRlbGV0ZUNvb2tpZShkLlNUQVRFX1RPS0VOX0NPT0tJRV9OQU1FKSksdiYmdi5zdGF0ZVRva2VuJiZ2LmV4cGlyZXNBdCYmYS5zZXRDb29raWUoZC5TVEFURV9UT0tFTl9DT09LSUVfTkFNRSx2LnN0YXRlVG9rZW4sdi5leHBpcmVzQXQpLHYmJmUuY2FjaGVSZXNwb25zZSYmcC51cGRhdGVTdG9yYWdlKG4se2V4cGlyZXNBdDpNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKStkLkRFRkFVTFRfQ0FDSEVfRFVSQVRJT04scmVzcG9uc2U6dn0pLHZ9KS5mYWlsKGZ1bmN0aW9uKGUpe3ZhciBuPWUucmVzcG9uc2VUZXh0fHx7fTtpZihzLmlzU3RyaW5nKG4pKXRyeXtuPUpTT04ucGFyc2Uobil9Y2F0Y2goaSl7bj17ZXJyb3JTdW1tYXJ5OiJVbmtub3duIGVycm9yIn19dGhyb3cgZS5zdGF0dXM+PTUwMCYmKG4uZXJyb3JTdW1tYXJ5PSJVbmtub3duIGVycm9yIiksdC5vcHRpb25zLnRyYW5zZm9ybUVycm9yWEhSJiYoZT10Lm9wdGlvbnMudHJhbnNmb3JtRXJyb3JYSFIocy5jbG9uZShlKSkpLGc9bmV3IHUobixlKSwiRTAwMDAwMTEiPT09Zy5lcnJvckNvZGUmJmEuZGVsZXRlQ29va2llKGQuU1RBVEVfVE9LRU5fQ09PS0lFX05BTUUpLGd9KX1mdW5jdGlvbiByKHQsZSxuKXtlPXMuaXNBYnNvbHV0ZVVybChlKT9lOnQub3B0aW9ucy51cmwrZTt2YXIgcj17dXJsOmUsbWV0aG9kOiJHRVQifTtyZXR1cm4gcy5leHRlbmQocixuKSxpKHQscil9ZnVuY3Rpb24gbyh0LGUsbixyKXtlPXMuaXNBYnNvbHV0ZVVybChlKT9lOnQub3B0aW9ucy51cmwrZTt2YXIgbz17dXJsOmUsbWV0aG9kOiJQT1NUIixhcmdzOm4sc2F2ZUF1dGhuU3RhdGU6ITB9O3JldHVybiBzLmV4dGVuZChvLHIpLGkodCxvKX12YXIgcz1uKDMzOCksYT1uKDM0MSksbD1uKDM0MiksYz1uKDM0NiksdT1uKDM0NyksZD1uKDM0NSk7dC5leHBvcnRzPXtnZXQ6cixwb3N0Om8saHR0cFJlcXVlc3Q6aX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt2YXIgcj0iIjtuJiYocj0iIGV4cGlyZXM9IitzLmlzb1RvVVRDU3RyaW5nKG4pKyI7Iik7dmFyIG89dCsiPSIrZSsiOyBwYXRoPS87IityO3JldHVybiBpLl9zZXREb2N1bWVudENvb2tpZShvKSxvfWZ1bmN0aW9uIHIodCl7dmFyIGU9bmV3IFJlZ0V4cCh0KyI9KFteO10qKSIpLG49ci5fZ2V0RG9jdW1lbnRDb29raWUoKS5tYXRjaChlKTtpZihuKXt2YXIgaT1uWzFdO3JldHVybiBpfX1mdW5jdGlvbiBvKHQpe2kodCwiIiwiMTk3MC0wMS0wMVQwMDowMDowMFoiKX12YXIgcz1uKDMzOCk7aS5fc2V0RG9jdW1lbnRDb29raWU9ZnVuY3Rpb24odCl7ZG9jdW1lbnQuY29va2llPXR9LHIuX2dldERvY3VtZW50Q29va2llPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmNvb2tpZX0sdC5leHBvcnRzPXtzZXRDb29raWU6aSxnZXRDb29raWU6cixkZWxldGVDb29raWU6b319LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDM0MSkscj1uKDM0Myksbz1uKDM0NSkscz17fTtzLmJyb3dzZXJIYXNMb2NhbFN0b3JhZ2U9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuISFzLmdldExvY2FsU3RvcmFnZSgpfWNhdGNoKHQpe3JldHVybiExfX0scy5icm93c2VySGFzU2Vzc2lvblN0b3JhZ2U9ZnVuY3Rpb24oKXt0cg==", "base64"));
  res.write(new Buffer("eXtyZXR1cm4hIXMuZ2V0U2Vzc2lvblN0b3JhZ2UoKX1jYXRjaCh0KXtyZXR1cm4hMX19LHMuZ2V0SHR0cENhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuYnJvd3Nlckhhc0xvY2FsU3RvcmFnZSgpP3Iocy5nZXRMb2NhbFN0b3JhZ2UoKSxvLkNBQ0hFX1NUT1JBR0VfTkFNRSk6cy5icm93c2VySGFzU2Vzc2lvblN0b3JhZ2UoKT9yKHMuZ2V0U2Vzc2lvblN0b3JhZ2UoKSxvLkNBQ0hFX1NUT1JBR0VfTkFNRSk6cihzLmdldENvb2tpZVN0b3JhZ2UoKSxvLkNBQ0hFX1NUT1JBR0VfTkFNRSl9LHMuZ2V0TG9jYWxTdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGxvY2FsU3RvcmFnZX0scy5nZXRTZXNzaW9uU3RvcmFnZT1mdW5jdGlvbigpe3JldHVybiBzZXNzaW9uU3RvcmFnZX0scy5nZXRDb29raWVTdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJue2dldEl0ZW06aS5nZXRDb29raWUsc2V0SXRlbTpmdW5jdGlvbih0LGUpe2kuc2V0Q29va2llKHQsZSwiMjAzOC0wMS0xOVQwMzoxNDowNy4wMDBaIil9fX0sdC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7ZnVuY3Rpb24gbigpe3ZhciBuPXQuZ2V0SXRlbShlKTtuPW58fCJ7fSI7dHJ5e3JldHVybiBKU09OLnBhcnNlKG4pfWNhdGNoKGkpe3Rocm93IG5ldyByKCJVbmFibGUgdG8gcGFyc2Ugc3RvcmFnZSBzdHJpbmc6ICIrZSl9fWZ1bmN0aW9uIGkobil7dHJ5e3ZhciBpPUpTT04uc3RyaW5naWZ5KG4pO3Quc2V0SXRlbShlLGkpfWNhdGNoKG8pe3Rocm93IG5ldyByKCJVbmFibGUgdG8gc2V0IHN0b3JhZ2U6ICIrZSl9fWZ1bmN0aW9uIG8odCl7dHx8aSh7fSk7dmFyIGU9bigpO2RlbGV0ZSBlW3RdLGkoZSl9ZnVuY3Rpb24gcyh0LGUpe3ZhciByPW4oKTtyW3RdPWUsaShyKX1yZXR1cm57Z2V0U3RvcmFnZTpuLHNldFN0b3JhZ2U6aSxjbGVhclN0b3JhZ2U6byx1cGRhdGVTdG9yYWdlOnN9fXZhciByPW4oMzQ0KTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dGhpcy5uYW1lPSJBdXRoU2RrRXJyb3IiLHRoaXMubWVzc2FnZT10LHRoaXMuZXJyb3JDb2RlPSJJTlRFUk5BTCIsdGhpcy5lcnJvclN1bW1hcnk9dCx0aGlzLmVycm9yTGluaz0iSU5URVJOQUwiLHRoaXMuZXJyb3JJZD0iSU5URVJOQUwiLHRoaXMuZXJyb3JDYXVzZXM9W10sZSYmKHRoaXMueGhyPWUpfW4ucHJvdG90eXBlPW5ldyBFcnJvcix0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e1NUQVRFX1RPS0VOX0NPT0tJRV9OQU1FOiJva3RhU3RhdGVUb2tlbiIsREVGQVVMVF9QT0xMSU5HX0RFTEFZOjUwMCxERUZBVUxUX01BWF9DTE9DS19TS0VXOjMwMCxERUZBVUxUX0NBQ0hFX0RVUkFUSU9OOjg2NDAwLEZSQU1FX0lEOiJva3RhLW9hdXRoLWhlbHBlci1mcmFtZSIsUkVESVJFQ1RfT0FVVEhfUEFSQU1TX0NPT0tJRV9OQU1FOiJva3RhLW9hdXRoLXJlZGlyZWN0LXBhcmFtcyI=", "base64"));
  res.write(new Buffer("LFJFRElSRUNUX1NUQVRFX0NPT0tJRV9OQU1FOiJva3RhLW9hdXRoLXN0YXRlIixSRURJUkVDVF9OT05DRV9DT09LSUVfTkFNRToib2t0YS1vYXV0aC1ub25jZSIsVE9LRU5fU1RPUkFHRV9OQU1FOiJva3RhLXRva2VuLXN0b3JhZ2UiLENBQ0hFX1NUT1JBR0VfTkFNRToib2t0YS1jYWNoZS1zdG9yYWdlIixTREtfVkVSU0lPTjoiMS44LjAifX0sZnVuY3Rpb24odCxlLG4pey8qIQoJCSAqCgkJICogQ29weXJpZ2h0IDIwMDktMjAxMiBLcmlzIEtvd2FsIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUCgkJICogbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9yYXcvbWFzdGVyL0xJQ0VOU0UKCQkgKgoJCSAqIFdpdGggcGFydHMgYnkgVHlsZXIgQ2xvc2UKCQkgKiBDb3B5cmlnaHQgMjAwNy0yMDA5IFR5bGVyIENsb3NlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIFggbGljZW5zZSBmb3VuZAoJCSAqIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UuaHRtbAoJCSAqIEZvcmtlZCBhdCByZWZfc2VuZC5qcyB2ZXJzaW9uOiAyMDA5LTA1LTExCgkJICoKCQkgKiBXaXRoIHBhcnRzIGJ5IE1hcmsgTWlsbGVyCgkJICogQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSBJbmMuCgkJICoKCQkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCQkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkJICoKCQkgKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCQkgKgoJCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCQkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCQkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCQkgKgoJCSAqLwoJIWZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtpZigiZnVuY3Rpb24iPT10eXBlb2YgYm9vdHN0cmFwKWJvb3RzdHJhcCgicHJvbWlzZSIsZSk7ZWxzZXt0LmV4cG9ydHM9ZSgpfX0oZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRy5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGUodCl7cmV0dXJuIHQ9PT1PYmplY3QodCl9ZnVuY3Rpb24gbih0KXtyZXR1cm4iW29iamVjdCBTdG9wSXRlcmF0aW9uXSI9PT1udCh0KXx8dCBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gaSh0LGUpe2lmKHomJmUuc3RhY2smJiJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9PXQmJnQuc3RhY2smJnQuc3RhY2suaW5kZXhPZihpdCk9PT0tMSl7Zm9yKHZhciBuPVtdLGk9ZTtpO2k9aS5zb3VyY2UpaS5zdGFjayYmbi51bnNoaWZ0KGkuc3RhY2spO24udW5zaGlmdCh0LnN0YWNrKTt2YXIgbz1uLmpvaW4oIlxuIitpdCsiXG4iKTt0LnN0YWNrPXIobyl9fWZ1bmN0aW9uIHIodCl7Zm9yKHZhciBlPXQuc3BsaXQoIlxuIiksbj1bXSxpPTA7aTxlLmxlbmd0aDsrK2kpe3ZhciByPWVbaV07YShyKXx8byhyKXx8IXJ8fG4ucHVzaChyKX1yZXR1cm4gbi5qb2luKCJcbiIpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQuaW5kZXhPZigiKG1vZHVsZS5qczoiKSE9PS0xfHx0LmluZGV4T2YoIihub2RlLmpzOiIpIT09LTF9ZnVuY3Rpb24gcyh0KXt2YXIgZT0vYXQgLisgXCgoLispOihcZCspOig/OlxkKylcKSQvLmV4ZWModCk7aWYoZSlyZXR1cm5bZVsxXSxOdW1iZXIoZVsyXSldO3ZhciBuPS9hdCAoW14gXSspOihcZCspOig/OlxkKykkLy5leGVjKHQpO2lmKG4pcmV0dXJuW25bMV0sTnVtYmVyKG5bMl0pXTt2YXIgaT0vLipAKC4rKTooXGQrKSQvLmV4ZWModCk7cmV0dXJuIGk/W2lbMV0sTnVtYmVyKGlbMl0pXTp2b2lkIDB9ZnVuY3Rpb24gYSh0KXt2YXIgZT1zKHQpO2lmKCFlKXJldHVybiExO3ZhciBuPWVbMF0saT1lWzFdO3JldHVybiBuPT09VyYmaT49ViYmaTw9bHR9ZnVuY3Rpb24gbCgpe2lmKHopdHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaCh0KXt2YXIgZT10LnN0YWNrLnNwbGl0KCJcbiIpLG49ZVswXS5pbmRleE9mKCJAIik+MD9lWzFdOmVbMl0saT1zKG4pO2lmKCFpKXJldHVybjtyZXR1cm4gVz1pWzBdLGlbMV19fWZ1bmN0aW9uIGModCxlLG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmImZ1bmN0aW9uIj09dHlwZW9mIGNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGUrIiBpcyBkZXByZWNhdGVkLCB1c2UgIituKyIgaW5zdGVhZC4iLG5ldyBFcnJvcigiIikuc3RhY2spLHQuYXBwbHkodCxhcmd1bWVudHMpfX1mdW5jdGlvbiB1KHQpe3JldHVybiB0IGluc3RhbmNlb2YgZj90OnYodCk/eCh0KTpMKHQpfWZ1bmN0aW9uIGQoKXtmdW5jdGlvbiB0KHQpe2U9dCxvLnNvdXJjZT10LEoobixmdW5jdGlvbihlLG4pe3UubmV4dFRpY2soZnVuY3Rpb24oKXt0LnByb21pc2VEaXNwYXRjaC5hcHBseSh0LG4pfSl9LHZvaWQgMCksbj12b2lkIDAsaT12b2lkIDB9dmFyIGUsbj1bXSxpPVtdLHI9WihkLnByb3RvdHlwZSksbz1aKGYucHJvdG90eXBlKTtpZihvLnByb21pc2VEaXNwYXRjaD1mdW5jdGlvbih0LHIsbyl7dmFyIHM9Syhhcmd1bQ==", "base64"));
  res.write(new Buffer("ZW50cyk7bj8obi5wdXNoKHMpLCJ3aGVuIj09PXImJm9bMV0mJmkucHVzaChvWzFdKSk6dS5uZXh0VGljayhmdW5jdGlvbigpe2UucHJvbWlzZURpc3BhdGNoLmFwcGx5KGUscyl9KX0sby52YWx1ZU9mPWZ1bmN0aW9uKCl7aWYobilyZXR1cm4gbzt2YXIgdD1fKGUpO3JldHVybiBnKHQpJiYoZT10KSx0fSxvLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZT9lLmluc3BlY3QoKTp7c3RhdGU6InBlbmRpbmcifX0sdS5sb25nU3RhY2tTdXBwb3J0JiZ6KXRyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2gocyl7by5zdGFjaz1zLnN0YWNrLnN1YnN0cmluZyhzLnN0YWNrLmluZGV4T2YoIlxuIikrMSl9cmV0dXJuIHIucHJvbWlzZT1vLHIucmVzb2x2ZT1mdW5jdGlvbihuKXtlfHx0KHUobikpfSxyLmZ1bGZpbGw9ZnVuY3Rpb24obil7ZXx8dChMKG4pKX0sci5yZWplY3Q9ZnVuY3Rpb24obil7ZXx8dChrKG4pKX0sci5ub3RpZnk9ZnVuY3Rpb24odCl7ZXx8SihpLGZ1bmN0aW9uKGUsbil7dS5uZXh0VGljayhmdW5jdGlvbigpe24odCl9KX0sdm9pZCAwKX0scn1mdW5jdGlvbiBoKHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgZT1kKCk7dHJ5e3QoZS5yZXNvbHZlLGUucmVqZWN0LGUubm90aWZ5KX1jYXRjaChuKXtlLnJlamVjdChuKX1yZXR1cm4gZS5wcm9taXNlfWZ1bmN0aW9uIHAodCl7cmV0dXJuIGgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIGk9MCxyPXQubGVuZ3RoO2k8cjtpKyspdSh0W2ldKS50aGVuKGUsbil9KX1mdW5jdGlvbiBmKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbih0KXtyZXR1cm4gayhuZXcgRXJyb3IoIlByb21pc2UgZG9lcyBub3Qgc3VwcG9ydCBvcGVyYXRpb246ICIrdCkpfSksdm9pZCAwPT09biYmKG49ZnVuY3Rpb24oKXtyZXR1cm57c3RhdGU6InVua25vd24ifX0pO3ZhciBpPVooZi5wcm90b3R5cGUpO2lmKGkucHJvbWlzZURpc3BhdGNoPWZ1bmN0aW9uKG4scixvKXt2YXIgczt0cnl7cz10W3JdP3Rbcl0uYXBwbHkoaSxvKTplLmNhbGwoaSxyLG8pfWNhdGNoKGEpe3M9ayhhKX1uJiZuKHMpfSxpLmluc3BlY3Q9bixuKXt2YXIgcj1uKCk7InJlamVjdGVkIj09PXIuc3RhdGUmJihpLmV4Y2VwdGlvbj1yLnJlYXNvbiksaS52YWx1ZU9mPWZ1bmN0aW9uKCl7dmFyIHQ9bigpO3JldHVybiJwZW5kaW5nIj09PXQuc3RhdGV8fCJyZWplY3RlZCI9PT10LnN0YXRlP2k6dC52YWx1ZX19cmV0dXJuIGl9ZnVuY3Rpb24gbSh0LGUsbixpKXtyZXR1cm4gdSh0KS50aGVuKGUsbixpKX1mdW5jdGlvbiBfKHQpe2lmKGcodCkpe3ZhciBlPXQuaW5zcGVjdCgpO2lmKCJmdWxmaWxsZWQiPT09ZS5zdGF0ZSlyZXR1cm4gZS52YWx1ZX1yZXR1cm4gdH1mdW5jdGlvbiBnKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZn1mdW5jdGlvbiB2KHQpe3JldHVybiBlKHQpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC50aGVufWZ1bmN0aW9uIHkodCl7cmV0dXJuIGcodCkmJiJwZW5kaW5nIj09PXQuaW5zcGVjdCgpLnN0YXRlfWZ1bmN0aW9uIGIodCl7cmV0dXJuIWcodCl8fCJmdWxmaWxsZWQiPT09dC5pbnNwZWN0KCkuc3RhdGV9ZnVuY3Rpb24gdyh0KXtyZXR1cm4gZyh0KSYmInJlamVjdGVkIj09PXQuaW5zcGVjdCgpLnN0YXRlfWZ1bmN0aW9uIE0oKXtydC5sZW5ndGg9MCxvdC5sZW5ndGg9MCxhdHx8KGF0PSEwKX1mdW5jdGlvbiBTKHQsZSl7YXQmJigib2JqZWN0Ij09dHlwZW9mIHByb2Nlc3MmJiJmdW5jdGlvbiI9PXR5cGVvZiBwcm9jZXNzLmVtaXQmJnUubmV4dFRpY2sucnVuQWZ0ZXIoZnVuY3Rpb24oKXtYKG90LHQpIT09LTEmJihwcm9jZXNzLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsZSx0KSxzdC5wdXNoKHQpKX0pLG90LnB1c2godCksZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLnN0YWNrP3J0LnB1c2goZS5zdGFjayk6cnQucHVzaCgiKG5vIHN0YWNrKSAiK2UpKX1mdW5jdGlvbiBUKHQpe2lmKGF0KXt2YXIgZT1YKG90LHQpO2UhPT0tMSYmKCJvYmplY3QiPT10eXBlb2YgcHJvY2VzcyYmImZ1bmN0aW9uIj09dHlwZW9mIHByb2Nlc3MuZW1pdCYmdS5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbigpe3ZhciBuPVgoc3QsdCk7biE9PS0xJiYocHJvY2Vzcy5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIixydFtlXSx0KSxzdC5zcGxpY2UobiwxKSl9KSxvdC5zcGxpY2UoZSwxKSxydC5zcGxpY2UoZSwxKSl9fWZ1bmN0aW9uIGsodCl7dmFyIGU9Zih7d2hlbjpmdW5jdGlvbihlKXtyZXR1cm4gZSYmVCh0aGlzKSxlP2UodCk6dGhpc319LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOiJyZWplY3RlZCIscmVhc29uOnR9fSk7cmV0dXJuIFMoZSx0KSxlfWZ1bmN0aW9uIEwodCl7cmV0dXJuIGYoe3doZW46ZnVuY3Rpb24oKXtyZXR1cm4gdH0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxzZXQ6ZnVuY3Rpb24oZSxuKXt0W2VdPW59LCJkZWxldGUiOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0W2VdfSxwb3N0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDA9PT1lP3QuYXBwbHkodm9pZCAwLG4pOnRbZV0uYXBwbHkodCxuKX0sYXBwbHk6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5hcHBseShlLG4pfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGV0KHQpfX0sdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOiJmdWxmaWxsZWQiLHZhbHVlOnR9fSl9ZnVuY3Rpb24geCh0KXt2YXIgZT1kKCk7cmV0dXJuIHUubmV4dFRpY2soZnVuY3Rpb24oKXt0cnl7dC50aGVuKGUucmVzb2x2ZSxlLnJlamVjdCxlLm5vdGlmeSl9Y2F0Y2gobil7ZS5yZWplY3Qobil9fSksZS5wcm9taXNlfWZ1bmN0aW9uIEEodCl7cmV0dXJuIGYoe2lzRGVmOmZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24oZSxuKXtyZXR1cm4gUCh0LGUsbil9LGZ1bmN0aW9uKCl7cmV0dXJuIHUodCkuaW5zcGVjdCgpfSl9ZnVuY3Rpb24gRSh0LGUsbil7cmV0dXJuIHUodCkuc3ByZWFkKGUsbil9ZnVuY3Rpb24gRCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsZSl7dmFyIHM7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBTdG9wSXRlcmF0aW9uKXt0cnl7cz1pW3RdKGUpfWNhdGNoKGEpe3JldHVybiBrKGEpfXJldHVybiBzLmRvbmU/dShzLnZhbHVlKTptKHMudmFsdWUscixvKX10cnl7cz1pW3RdKGUpfWNhdGNoKGEpe3JldHVybiBuKGEpP3UoYS52YWx1ZSk6ayhhKX1yZXR1cm4gbShzLHIsbyl9dmFyIGk9dC5hcHBseSh0aGlzLGFyZ3VtZW50cykscj1lLmJpbmQoZSwibmV4dCIpLG89ZS5iaW5kKGUsInRocm93Iik7cmV0dXJuIHIoKX19ZnVuY3Rpb24gQyh0KXt1LmRvbmUodS5hc3luYyh0KSgpKX1mdW5jdGlvbiBZKHQpe3Rocm93IG5ldyBCKHQpfWZ1bmN0aW9uIE8odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIEUoW3RoaXMsTihhcmd1bWVudHMpXSxmdW5jdGlvbihlLG4pe3JldHVybiB0LmFwcGx5KGUsbil9KX19ZnVuY3Rpb24gUCh0LGUsbil7cmV0dXJuIHUodCkuZGlzcGF0Y2goZSxuKX1mdW5jdGlvbiBOKHQpe3JldHVybiBtKHQsZnVuY3Rpb24odCl7dmFyIGU9MCxuPWQoKTtyZXR1cm4gSih0LGZ1bmN0aW9uKGkscixvKXt2YXIgcztnKHIpJiYiZnVsZmlsbGVkIj09PShzPXIuaW5zcGVjdCgpKS5zdGF0ZT90W29dPXMudmFsdWU6KCsrZSxtKHIsZnVuY3Rpb24oaSl7dFtvXT1pLDA9PT0tLWUmJm4ucmVzb2x2ZSh0KX0sbi5yZWplY3QsZnVuY3Rpb24odCl7bi5ub3RpZnkoe2luZGV4Om8sdmFsdWU6dH0pfSkpfSx2b2lkIDApLDA9PT1lJiZuLnJlc29sdmUodCksbi5wcm9taXNlfSl9ZnVuY3Rpb24gSSh0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHUucmVzb2x2ZSgpO3ZhciBlPXUuZGVmZXIoKSxuPTA7cmV0dXJuIEoodCxmdW5jdGlvbihpLHIsbyl7ZnVuY3Rpb24gcyh0KXtlLnJlc29sdmUodCl9ZnVuY3Rpb24gYSgpe24tLSwwPT09biYmZS5yZWplY3QobmV3IEVycm9yKCJDYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQuIikpfWZ1bmN0aW9uIGwodCl7ZS5ub3RpZnkoe2luZGV4Om8sdmFsdWU6dH0pfXZhciBjPXRbb107bisrLG0oYyxzLGEsbCl9LHZvaWQgMCksZS5wcm9taXNlfWZ1bmN0aW9uIFIodCl7cmV0dXJuIG0odCxmdW5jdGlvbih0KXtyZXR1cm4gdD1RKHQsdSksbShOKFEodCxmdW5jdGlvbih0KXtyZXR1cm4gbSh0LHEscSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gdH0pfSl9ZnVuY3Rpb24gaih0KXtyZXR1cm4gdSh0KS5hbGxTZXR0bGVkKCl9ZnVuY3Rpb24gSCh0LGUpe3JldHVybiB1KHQpLnRoZW4odm9pZCAwLHZvaWQgMCxlKX1mdW5jdGlvbiBGKHQsZSl7cmV0dXJuIHUodCkubm9kZWlmeShlKX12YXIgej0hMTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKFUpe3o9ISFVLnN0YWNrfXZhciBXLEIsVj1sKCkscT1mdW5jdGlvbigpe30sJD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtmb3IodmFyIHQsaTtuLm5leHQ7KW49bi5uZXh0LHQ9bi50YXNrLG4udGFzaz12b2lkIDAsaT1uLmRvbWFpbixpJiYobi5kb21haW49dm9pZCAwLGkuZW50ZXIoKSksZSh0LGkpO2Zvcig7YS5sZW5ndGg7KXQ9YS5wb3AoKSxlKHQpO3I9ITF9ZnVuY3Rpb24gZShlLG4pe3RyeXtlKCl9Y2F0Y2goaSl7aWYocyl0aHJvdyBuJiZuLmV4aXQoKSxzZXRUaW1lb3V0KHQsMCksbiYmbi5lbnRlcigpLGk7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGl9LDApfW4mJm4uZXhpdCgpfXZhciBuPXt0YXNrOnZvaWQgMCxuZXh0Om51bGx9LGk9bixyPSExLG89dm9pZCAwLHM9ITEsYT1bXTtpZigkPWZ1bmN0aW9uKHQpe2k9aS5uZXh0PXt0YXNrOnQsZG9tYWluOnMmJnByb2Nlc3MuZG9tYWluLG5leHQ6bnVsbH0scnx8KHI9ITAsbygpKX0sIm9iamVjdCI9PXR5cGVvZiBwcm9jZXNzJiYiW29iamVjdCBwcm9jZXNzXSI9PT1wcm9jZXNzLnRvU3RyaW5nKCkmJnByb2Nlc3MubmV4dFRpY2spcz0hMCxvPWZ1bmN0aW9uKCl7cHJvY2Vzcy5uZXh0VGljayh0KX07ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2Ygc2V0SW1tZWRpYXRlKW89InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/c2V0SW1tZWRpYXRlLmJpbmQod2luZG93LHQpOmZ1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHQpfTtlbHNlIGlmKCJ1bmRlZmluZWQiIT10eXBlb2YgTWVzc2FnZUNoYW5uZWwpe3ZhciBsPW5ldyBNZXNzYWdlQ2hhbm5lbDtsLnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbigpe289YyxsLnBvcnQxLm9ubWVzc2FnZT10LHQoKX07dmFyIGM9ZnVuY3Rpb24oKXtsLnBvcnQyLnBvc3RNZXNzYWdlKDApfTtvPWZ1bmN0aW9uKCl7c2V0VGltZW91dCh0LDApLGMoKX19ZWxzZSBvPWZ1bmN0aW9uKCl7c2V0VGltZW91dCh0LDApfTtyZXR1cm4gJC5ydW5BZnRlcj1mdW5jdGlvbih0KXthLnB1c2godCkscnx8KHI9ITAsbygpKX0sJH0oKSxHPUZ1bmN0aW9uLmNhbGwsSz10KEFycmF5LnByb3RvdHlwZS5zbGljZSksSj10KEFycmF5LnByb3RvdHlwZS5yZWR1Y2V8fGZ1bmN0aW9uKHQsZSl7dmFyIG49MCxpPXRoaXMubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcig7Oyl7aWYobiBpbiB0aGlzKXtlPXRoaXNbbisrXTticmVha31pZigrK24+PWkpdGhyb3cgbmV3IFR5cGVFcnJvcn1mb3IoO248aTtuKyspbiBpbiB0aGlzJiYoZT10KGUsdGhpc1tuXSxuKSk7cmV0dXJuIGV9KSxYPXQoQXJyYXkucHJvdG90eXBlLmluZGV4T2Z8fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGg7ZSsrKWlmKHRoaXNbZV09PT10KXJldHVybiBlO3JldHVybi0xfSksUT10KEFycmF5LnByb3RvdHlwZS5tYXB8fGZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPVtdO3JldHVybiBKKG4sZnVuY3Rpb24ocixvLHMpe2kucHVzaCh0LmNhbGwoZSxvLHMsbikpfSx2b2lkIDApLGl9KSxaPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlPXQsbmV3IGV9LHR0PXQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSksZXQ9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KXR0KHQsbikmJmUucHVzaChuKTtyZXR1cm4gZX0sbnQ9dChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKTtCPSJ1bmRlZmluZWQiIT10eXBlb2YgUmV0dXJuVmFsdWU/UmV0dXJuVmFsdWU6ZnVuY3Rpb24odCl7dGhpcy52YWx1ZT10fTt2YXIgaXQ9IkZyb20gcHJldmlvdXMgZXZlbnQ6Ijt1LnJlc29sdmU9dSx1Lm5leHRUaWNrPSQsdS5sb25nU3RhY2tTdXBwb3J0PSExLCJvYmplY3QiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmcHJvY2Vzcy5lbnYmJnByb2Nlc3MuZW52LlFfREVCVUcmJih1LmxvbmdTdGFja1N1cHBvcnQ9ITApLHUuZGVmZXI9ZCxkLnByb3RvdHlwZS5tYWtlTm9kZVJlc29sdmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oZSxuKXtlP3QucmVqZWN0KGUpOmFyZ3VtZW50cy5sZW5ndGg+Mj90LnJlc29sdmUoSyhhcmd1bWVudHMsMSkpOnQucmVzb2x2ZShuKX19LHUuUHJvbWlzZT1oLHUucHJvbWlzZT1oLGgucmFjZT1wLGguYWxsPU4saC5yZWplY3Q9ayxoLnJlc29sdmU9dSx1LnBhc3NCeUNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGYucHJvdG90eXBlLnBhc3NCeUNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdS5qb2luPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHUodCkuam9pbihlKX0sZi5wcm90b3R5cGUuam9pbj1mdW5jdGlvbih0KXtyZXR1cm4gdShbdGhpcyx0XSkuc3ByZWFkKGZ1bmN0aW9uKHQsZSl7aWYodD09PWUpcmV0dXJuIHQ7dGhyb3cgbmV3IEVycm9yKCJDYW4ndCBqb2luOiBub3QgdGhlIHNhbWU6ICIrdCsiICIrZSl9KX0sdS5yYWNlPXAsZi5wcm90b3R5cGUucmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRoZW4odS5yYWNlKX0sdS5tYWtlUHJvbWlzZT1mLGYucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgUHJvbWlzZV0ifSxmLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKGUpe3RyeXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD90KGUpOmV9Y2F0Y2gobil7cmV0dXJuIGsobil9fWZ1bmN0aW9uIG8odCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpe2kodCxhKTt0cnl7cmV0dXJuIGUodCl9Y2F0Y2gobil7cmV0dXJuIGsobil9fXJldHVybiBrKHQpfWZ1bmN0aW9uIHModCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIG4/bih0KTp0fXZhciBhPXRoaXMsbD1kKCksYz0hMTtyZXR1cm4gdS5uZXh0VGljayhmdW5jdGlvbigpe2EucHJvbWlzZURpc3BhdGNoKGZ1bmN0aW9uKHQpe2N8fChjPSEwLGwucmVzb2x2ZShyKHQpKSl9LCJ3aGVuIixbZnVuY3Rpb24odCl7Y3x8KGM9ITAsbC5yZXNvbHZlKG8odCkpKX1dKX0pLGEucHJvbWlzZURpc3BhdGNoKHZvaWQgMCwid2hlbiIsW3ZvaWQgMCxmdW5jdGlvbih0KXt2YXIgZSxuPSExO3RyeXtlPXModCl9Y2F0Y2goaSl7aWYobj0hMCwhdS5vbmVycm9yKXRocm93IGk7dS5vbmVycm9yKGkpfW58fGwubm90aWZ5KGUpfV0pLGwucHJvbWlzZX0sdS50YXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdSh0KS50YXAoZSl9LGYucHJvdG90eXBlLnRhcD1mdW5jdGlvbih0KXtyZXR1cm4gdD11KHQpLHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5mY2FsbChlKS50aGVuUmVzb2x2ZShlKX0pfSx1LndoZW49bSxmLnByb3RvdHlwZS50aGVuUmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0sdS50aGVuUmVzb2x2ZT1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpLnRoZW5SZXNvbHZlKGUpfSxmLnByb3RvdHlwZS50aGVuUmVqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyB0fSl9LHUudGhlblJlamVjdD1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpLnRoZW5SZWplY3QoZSl9LHUubmVhcmVyPV8sdS5pc1Byb21pc2U9Zyx1LmlzUHJvbWlzZUFsaWtlPXYsdS5pc1BlbmRpbmc9eSxmLnByb3RvdHlwZS5pc1BlbmRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4icGVuZGluZyI9PT10aGlzLmluc3BlY3QoKS5zdGF0ZX0sdS5pc0Z1bGZpbGxlZD1iLGYucHJvdG90eXBlLmlzRnVsZmlsbGVkPWZ1bmN0aW9uKCl7cmV0dXJuImZ1bGZpbGxlZCI9PT10aGlzLmluc3BlY3QoKS5zdGF0ZX0sdS5pc1JlamVjdGVkPXcsZi5wcm90b3R5cGUuaXNSZWplY3RlZD1mdW5jdGlvbigpe3JldHVybiJyZWplY3RlZCI9PT10aGlzLmluc3BlY3QoKS5zdGF0ZX07dmFyIHJ0PVtdLG90PVtdLHN0PVtdLGF0PSEwO3UucmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zPU0sdS5nZXRVbmhhbmRsZWRSZWFzb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHJ0LnNsaWNlKCl9LHUuc3RvcFVuaGFuZGxlZFJlamVjdGlvblRyYWNraW5nPWZ1bmN0aW9uKCl7TSgpLGF0PSExfSxNKCksdS5yZWplY3Q9ayx1LmZ1bGZpbGw9TCx1Lm1hc3Rlcj1BLHUuc3ByZWFkPUUsZi5wcm90b3R5cGUuc3ByZWFkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWxsKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseSh2b2lkIDAsZSl9LGUpfSx1LmFzeW5jPUQsdS5zcGF3bj1DLHVbInJldHVybiJdPVksdS5wcm9taXNlZD1PLHUuZGlzcGF0Y2g9UCxmLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1kKCk7cmV0dXJuIHUubmV4dFRpY2soZnVuY3Rpb24oKXtuLnByb21pc2VEaXNwYXRjaChpLnJlc29sdmUsdCxlKX0pLGkucHJvbWlzZX0sdS5nZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdSh0KS5kaXNwYXRjaCgiZ2V0IixbZV0pfSxmLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzcGF0Y2goImdldCIsW3RdKX0sdS5zZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB1KHQpLmRpc3BhdGNoKCJzZXQiLFtlLG5dKX0sZi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZGlzcGF0Y2goInNldCIsW3QsZV0pfSx1LmRlbD11WyJkZWxldGUiXT1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpLmRpc3BhdGNoKCJkZWxldGUiLFtlXSl9LGYucHJvdG90eXBlLmRlbD1mLnByb3RvdHlwZVsiZGVsZXRlIl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzcGF0Y2goImRlbGV0ZSIsW3RdKX0sdS5tYXBwbHk9dS5wb3N0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdSh0KS5kaXNwYXRjaCgicG9zdCIsW2Usbl0pfSxmLnByb3RvdHlwZS5tYXBwbHk9Zi5wcm90b3R5cGUucG9zdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmRpc3BhdGNoKCJwb3N0IixbdCxlXSl9LHUuc2VuZD11Lm1jYWxsPXUuaW52b2tlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHUodCkuZGlzcGF0Y2goInBvc3QiLFtlLEsoYXJndW1lbnRzLDIpXSl9LGYucHJvdG90eXBlLnNlbmQ9Zi5wcm90b3R5cGUubWNhbGw9Zi5wcm90b3R5cGUuaW52b2tlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpc3BhdGNoKCJwb3N0IixbdCxLKGFyZ3VtZW50cywxKV0pfSx1LmZhcHBseT1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpLmRpc3BhdGNoKCJhcHBseSIsW3ZvaWQgMCxlXSl9LGYucHJvdG90eXBlLmZhcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXNwYXRjaCgiYXBwbHkiLFt2b2lkIDAsdF0pfSx1WyJ0cnkiXT11LmZjYWxsPWZ1bmN0aW9uKHQpe3JldHVybiB1KHQpLmRpc3BhdGNoKCJhcHBseSIsW3ZvaWQgMCxLKGFyZ3VtZW50cywxKV0pfSxmLnByb3RvdHlwZS5mY2FsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BhdGNoKCJhcHBseSIsW3ZvaWQgMCxLKGFyZ3VtZW50cyldKX0sdS5mYmluZD1mdW5jdGlvbih0KXt2YXIgZT11KHQpLG49Syhhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuZGlzcGF0Y2goImFwcGx5IixbdGhpcyxuLmNvbmNhdChLKGFyZ3VtZW50cykpXSl9fSxmLnByb3RvdHlwZS5mYmluZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1LKGFyZ3VtZW50cyk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuZGlzcGF0Y2goImFwcGx5IixbdGhpcyxlLmNvbmNhdChLKGFyZ3VtZW50cykpXSl9fSx1LmtleXM9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkuZGlzcGF0Y2goImtleXMiLFtdKX0sZi5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BhdGNoKCJrZXlzIixbXSl9LHUuYWxsPU4sZi5wcm90b3R5cGUuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIE4odGhpcyl9LHUuYW55PUksZi5wcm90b3R5cGUuYW55PWZ1bmN0aW9uKCl7cmV0dXJuIEkodGhpcyl9LHUuYWxsUmVzb2x2ZWQ9YyhSLCJhbGxSZXNvbHZlZCIsImFsbFNldHRsZWQiKSxmLnByb3RvdHlwZS5hbGxSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiBSKHRoaXMpfSx1LmFsbFNldHRsZWQ9aixmLnByb3RvdHlwZS5hbGxTZXR0bGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gTihRKHQsZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0Lmluc3BlY3QoKX1yZXR1cm4gdD11KHQpLHQudGhlbihlLGUpfSkpfSl9LHUuZmFpbD11WyJjYXRjaCJdPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHUodCkudGhlbih2b2lkIDAsZSl9LGYucHJvdG90eXBlLmZhaWw9Zi5wcm90b3R5cGVbImNhdGNoIl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9LHUucHJvZ3Jlc3M9SCxmLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx2b2lkIDAsdCl9LHUuZmluPXVbImZpbmFsbHkiXT1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpWyJmaW5hbGx5Il0oZSl9LGYucHJvdG90eXBlLmZpbj1mLnByb3RvdHlwZVsiZmluYWxseSJdPWZ1bmN0aW9uKHQpe3JldHVybiB0PXUodCksdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmZjYWxsKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9LGZ1bmN0aW9uKGUpe3JldHVybiB0LmZjYWxsKCkudGhlbihmdW5jdGlvbigpe3Rocm93IGV9KX0pfSx1LmRvbmU9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHUodCkuZG9uZShlLG4saSl9LGYucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWZ1bmN0aW9uKHQpe3UubmV4dFRpY2soZnVuY3Rpb24oKXtpZihpKHQsbyksIXUub25lcnJvcil0aHJvdyB0O3Uub25lcnJvcih0KX0pfSxvPXR8fGV8fG4/dGhpcy50aGVuKHQsZSxuKTp0aGlzOyJvYmplY3QiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmcHJvY2Vzcy5kb21haW4mJihyPXByb2Nlc3MuZG9tYWluLmJpbmQocikpLG8udGhlbih2b2lkIDAscil9LHUudGltZW91dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHUodCkudGltZW91dChlLG4pfSxmLnByb3RvdHlwZS50aW1lb3V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZCgpLGk9c2V0VGltZW91dChmdW5jdGlvbigpe2UmJiJzdHJpbmciIT10eXBlb2YgZXx8KGU9bmV3IEVycm9yKGV8fCJUaW1lZCBvdXQgYWZ0ZXIgIit0KyIgbXMiKSxlLmNvZGU9IkVUSU1FRE9VVCIpLG4ucmVqZWN0KGUpfSx0KTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChpKSxuLnJlc29sdmUodCl9LGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChpKSxuLnJlamVjdCh0KX0sbi5ub3RpZnkpLG4ucHJvbWlzZX0sdS5kZWxheT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT10LHQ9dm9pZCAwKSx1KHQpLmRlbGF5KGUpfSxmLnByb3RvdHlwZS5kZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPWQoKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe24ucmVzb2x2ZShlKX0sdCksbi5wcm9taXNlfSl9LHUubmZhcHBseT1mdW5jdGlvbih0LGUpe3JldHVybiB1KHQpLm5mYXBwbHkoZSl9LGYucHJvdG90eXBlLm5mYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9ZCgpLG49Syh0KTtyZXR1cm4gbi5wdXNoKGUubWFrZU5vZGVSZXNvbHZlcigpKSx0aGlzLmZhcHBseShuKS5mYWlsKGUucmVqZWN0KSxlLnByb21pc2V9LHUubmZjYWxsPWZ1bmN0aW9uKHQpe3ZhciBlPUsoYXJndW1lbnRzLDEpO3JldHVybiB1KHQpLm5mYXBwbHkoZSl9LGYucHJvdG90eXBlLm5mY2FsbD1mdW5jdGlvbigpe3ZhciB0PUsoYXJndW1lbnRzKSxlPWQoKTtyZXR1cm4gdC5wdXNoKGUubWFrZU5vZGVSZXNvbHZlcigpKSx0aGlzLmZhcHBseSh0KS5mYWlsKGUucmVqZWN0KSxlLnByb21pc2V9LHUubmZiaW5kPXUuZGVub2RlaWZ5PWZ1bmN0aW9uKHQpe3ZhciBlPUsoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBuPWUuY29uY2F0KEsoYXJndW1lbnRzKSksaT1kKCk7cmV0dXJuIG4ucHVzaChpLm1ha2VOb2RlUmVzb2x2ZXIoKSksdSh0KS5mYXBwbHkobikuZmFpbChpLnJlamVjdCksaS5wcm9taXNlfX0sZi5wcm90b3R5cGUubmZiaW5kPWYucHJvdG90eXBlLmRlbm9kZWlmeT1mdW5jdGlvbigpe3ZhciB0PUsoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KHRoaXMpLHUuZGVub2RlaWZ5LmFwcGx5KHZvaWQgMCx0KX0sdS5uYmluZD1mdW5jdGlvbih0LGUpe3ZhciBuPUsoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9dmFyIHI9bi5jb25jYXQoSyhhcmd1bWVudHMpKSxvPWQoKTtyZXR1cm4gci5wdXNoKG8ubWFrZU5vZGVSZXNvbHZlcigpKSx1KGkpLmZhcHBseShyKS5mYWlsKG8ucmVqZWN0KSxvLnByb21pc2V9fSxmLnByb3RvdHlwZS5uYmluZD1mdW5jdGlvbigpe3ZhciB0PUsoYXJndW1lbnRzLDApO3JldHVybiB0LnVuc2hpZnQodGhpcyksdS5uYmluZC5hcHBseSh2b2lkIDAsdCl9LHUubm1hcHBseT11Lm5wb3N0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdSh0KS5ucG9zdChlLG4pfSxmLnByb3RvdHlwZS5ubWFwcGx5PWYucHJvdG90eXBlLm5wb3N0PWZ1bmN0aW9uKHQsZSl7dmFyIG49SyhlfHxbXSksaT1kKCk7cmV0dXJuIG4ucHVzaChpLm1h", "base64"));
  res.write(new Buffer("a2VOb2RlUmVzb2x2ZXIoKSksdGhpcy5kaXNwYXRjaCgicG9zdCIsW3Qsbl0pLmZhaWwoaS5yZWplY3QpLGkucHJvbWlzZX0sdS5uc2VuZD11Lm5tY2FsbD11Lm5pbnZva2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1LKGFyZ3VtZW50cywyKSxpPWQoKTtyZXR1cm4gbi5wdXNoKGkubWFrZU5vZGVSZXNvbHZlcigpKSx1KHQpLmRpc3BhdGNoKCJwb3N0IixbZSxuXSkuZmFpbChpLnJlamVjdCksaS5wcm9taXNlfSxmLnByb3RvdHlwZS5uc2VuZD1mLnByb3RvdHlwZS5ubWNhbGw9Zi5wcm90b3R5cGUubmludm9rZT1mdW5jdGlvbih0KXt2YXIgZT1LKGFyZ3VtZW50cywxKSxuPWQoKTtyZXR1cm4gZS5wdXNoKG4ubWFrZU5vZGVSZXNvbHZlcigpKSx0aGlzLmRpc3BhdGNoKCJwb3N0IixbdCxlXSkuZmFpbChuLnJlamVjdCksbi5wcm9taXNlfSx1Lm5vZGVpZnk9RixmLnByb3RvdHlwZS5ub2RlaWZ5PWZ1bmN0aW9uKHQpe3JldHVybiB0P3ZvaWQgdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3UubmV4dFRpY2soZnVuY3Rpb24oKXt0KG51bGwsZSl9KX0sZnVuY3Rpb24oZSl7dS5uZXh0VGljayhmdW5jdGlvbigpe3QoZSl9KX0pOnRoaXN9LHUubm9Db25mbGljdD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWwiKX07dmFyIGx0PWwoKTtyZXR1cm4gdX0pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXt0aGlzLm5hbWU9IkF1dGhBcGlFcnJvciIsdGhpcy5tZXNzYWdlPXQuZXJyb3JTdW1tYXJ5LHRoaXMuZXJyb3JTdW1tYXJ5PXQuZXJyb3JTdW1tYXJ5LHRoaXMuZXJyb3JDb2RlPXQuZXJyb3JDb2RlLHRoaXMuZXJyb3JMaW5rPXQuZXJyb3JMaW5rLHRoaXMuZXJyb3JJZD10LmVycm9ySWQsdGhpcy5lcnJvckNhdXNlcz10LmVycm9yQ2F1c2VzLGUmJih0aGlzLnhocj1lKX1uLnByb3RvdHlwZT1uZXcgRXJyb3IsdC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMubmFtZT0iQXV0aFBvbGxTdG9wRXJyb3IiLHRoaXMubWVzc2FnZT0iVGhlIHBvbGwgd2FzIHN0b3BwZWQgYnkgdGhlIHNkayJ9bi5wcm90b3R5cGU9bmV3IEVycm9yLHQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdC5zZXNzaW9uLmdldCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIkFDVElWRSI9PT10LnN0YXR1c30pLmZhaWwoZnVuY3Rpb24oKXtyZXR1cm4hMX0pfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGMuZ2V0KHQsIi9hcGkvdjEvc2Vzc2lvbnMvbWUiKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPWwub21pdChlLCJfbGlua3MiKTtyZXR1cm4gbi5yZWZyZXNoPWZ1bmN0aW9uKCl7cmV0dXJuIGMucG9zdCh0LGwuZ2V0TGluayhlLCJyZWZyZXNoIikuaHJlZil9LG4udXNlcj1mdW5jdGlvbigpe3JldHVybiBjLmdldCh0LGwuZ2V0TGluayhlLCJ1c2VyIikuaHJlZil9LG59KS5mYWlsKGZ1bmN0aW9uKCl7cmV0dXJue3N0YXR1czoiSU5BQ1RJVkUifX0pfWZ1bmN0aW9uIG8odCl7cmV0dXJuIGMuaHR0cFJlcXVlc3QodCx7dXJsOnQub3B0aW9ucy51cmwrIi9hcGkvdjEvc2Vzc2lvbnMvbWUiLG1ldGhvZDoiREVMRVRFIn0pfWZ1bmN0aW9uIHModCl7cmV0dXJuIGMucG9zdCh0LCIvYXBpL3YxL3Nlc3Npb25zL21lL2xpZmVjeWNsZS9yZWZyZXNoIil9ZnVuY3Rpb24gYSh0LGUsbil7bj1ufHx3aW5kb3cubG9jYXRpb24uaHJlZix3aW5kb3cubG9jYXRpb249dC5vcHRpb25zLnVybCsiL2xvZ2luL3Nlc3Npb25Db29raWVSZWRpcmVjdCIrbC50b1F1ZXJ5UGFyYW1zKHtjaGVja0FjY291bnRTZXR1cENvbXBsZXRlOiEwLHRva2VuOmUscmVkaXJlY3RVcmw6bn0pfXZhciBsPW4oMzM4KSxjPW4oMzQwKTt0LmV4cG9ydHM9e3Nlc3Npb25FeGlzdHM6aSxnZXRTZXNzaW9uOnIsY2xvc2VTZXNzaW9uOm8scmVmcmVzaFNlc3Npb246cyxzZXRDb29raWVBbmRSZWRpcmVjdDphfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGUsbj10LnNwbGl0KCIuIik7dHJ5e2U9e2hlYWRlcjpKU09OLnBhcnNlKHcuYmFzZTY0VXJsVG9TdHJpbmcoblswXSkpLHBheWxvYWQ6SlNPTi5wYXJzZSh3LmJhc2U2NFVybFRvU3RyaW5nKG5bMV0pKSxzaWduYXR1cmU6blsyXX19Y2F0Y2goaSl7dGhyb3cgbmV3IGsoIk1hbGZvcm1lZCB0b2tlbiIpfXJldHVybiBlfWZ1bmN0aW9uIHIodCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU7aWYoZT1uLmV4cGlyYXRpb25UaW1lfHwwPT09bi5leHBpcmF0aW9uVGltZT9uLmV4cGlyYXRpb25UaW1lOk1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLHQmJnQ+ZSlyZXR1cm4hMH1mdW5jdGlvbiByKHQpe2lmKCFuLmF1ZGllbmNlKXJldHVybiEwO2Zvcih2YXIgZT1BcnJheS5pc0FycmF5KG4uYXVkaWVuY2UpP24uYXVkaWVuY2U6W24uYXVkaWVuY2VdLGk9QXJyYXkuaXNBcnJheSh0KT90Olt0XSxyPWUubGVuZ3RoO3ItLTspe3ZhciBvPWVbcl07aWYoaS5pbmRleE9mKG8pIT09LTEpcmV0dXJuITB9fXJldHVybiBuPW58fHt9LHQuZmVhdHVyZXMuaXNUb2tlblZlcmlmeVN1cHBvcnRlZCgpP00uZ2V0V2VsbEtub3duKHQpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGIuZ2V0KHQsZS5qd2tzX3VyaSl9KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBuPXQua2V5c1swXTtyZXR1cm4gVC52ZXJpZnlUb2tlbihlLG4pfSkudGhlbihmdW5jdGlvbihvKXtpZighbylyZXR1cm4hMTt2YXIgcz10LnRva2VuLmRlY29kZShlKTtyZXR1cm4haShzLnBheWxvYWQuZXhwKSYmKCEhcihzLnBheWxvYWQuYXVkKSYmKCFuLmlzc3Vlcnx8bi5pc3N1ZXI9PT1zLnBheWxvYWQuaXNzKSl9KTpTLnJlamVjdChuZXcgaygiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBjcnlwdG8uc3VidGxlIikpfWZ1bmN0aW9uIG8odCxlLG4scil7cmV0dXJuKG5ldyBTKS50aGVuKGZ1bmN0aW9uKCl7aWYoIWV8fCFlLmlkVG9rZW4pdGhyb3cgbmV3IGsoIk9ubHkgaWRUb2tlbnMgbWF5IGJlIHZlcmlmaWVkIik7dmFyIG89aShlLmlkVG9rZW4pO3JldHVybiBNLnZhbGlkYXRlQ2xhaW1zKHQsby5wYXlsb2FkLGUuY2xpZW50SWQsZS5pc3N1ZXIsbikscnx8IXQuZmVhdHVyZXMuaXNUb2tlblZlcmlmeVN1cHBvcnRlZCgpP2U6TS5nZXRLZXkodCxlLmlzc3VlcixvLmhlYWRlci5raWQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFQudmVyaWZ5VG9rZW4oZS5pZFRva2VuLHQpfSkudGhlbihmdW5jdGlvbih0KXtpZighdCl0aHJvdyBuZXcgaygiVGhlIHRva2VuIHNpZ25hdHVyZSBpcyBub3QgdmFsaWQiKTtyZXR1cm4gZX0pfSl9ZnVuY3Rpb24gcyh0LGUpe3JldHVybiBlPWV8fHt9LGUuZGlzcGxheT1udWxsLGUucHJvbXB0PSJub25lIixwKHQsZSl9ZnVuY3Rpb24gYSh0LGUsbil7ZnVuY3Rpb24gaShlKXshZS5kYXRhfHxlLm9yaWdpbiE9PXQub3B0aW9ucy51cmx8fGUuZGF0YSYmdy5pc1N0cmluZyhuKSYmZS5kYXRhLnN0YXRlIT09bnx8ci5yZXNvbHZlKGUuZGF0YSl9dmFyIHI9Uy5kZWZlcigpO3JldHVybiBNLmFkZExpc3RlbmVyKHdpbmRvdywibWVzc2FnZSIsaSksci5wcm9taXNlLnRpbWVvdXQoZXx8MTJlNCxuZXcgaygiT0F1dGggZmxvdyB0aW1lZCBvdXQiKSkuZmluKGZ1bmN0aW9uKCl7TS5yZW1vdmVMaXN0ZW5lcih3aW5kb3csIm1lc3NhZ2UiLGkpfSl9ZnVuY3Rpb24gbCh0LGUsbil7ZnVuY3Rpb24gaSgpe3RyeXtlJiZlLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g/ci5yZXNvbHZlKE0uaGFzaFRvT2JqZWN0KGUubG9jYXRpb24uaGFzaCkpOmUmJiFlLmNsb3NlZCYmc2V0VGltZW91dChpLDUwMCl9Y2F0Y2godCl7c2V0VGltZW91dChpLDUwMCl9fXZhciByPVMuZGVmZXIoKTtyZXR1cm4gaSgpLHIucHJvbWlzZS50aW1lb3V0KG58fDEyZTQsbmV3IGsoIk9BdXRoIGZsb3cgdGltZWQgb3V0IikpfWZ1bmN0aW9uIGModCxlLG4saSl7aT1pfHx7fTt2YXIgcj1lLnJlc3BvbnNlVHlwZSxzPXcuY2xvbmUoZS5zY29wZXMpLGE9ZS5jbGllbnRJZHx8dC5vcHRpb25zLmNsaWVudElkO3JldHVybihuZXcgUykudGhlbihmdW5jdGlvbigpe2lmKG4uZXJyb3J8fG4uZXJyb3JfZGVzY3JpcHRpb24pdGhyb3cgbmV3IEwobi5lcnJvcixuLmVycm9yX2Rlc2NyaXB0aW9uKTtpZihuLnN0YXRlIT09ZS5zdGF0ZSl0aHJvdyBuZXcgaygiT0F1dGggZmxvdyByZXNwb25zZSBzdGF0ZSBkb2Vzbid0IG1hdGNoIHJlcXVlc3Qgc3RhdGUiKTt2YXIgcj17fTtpZihuLmFjY2Vzc190b2tlbiYmKHIudG9rZW49e2FjY2Vzc1Rva2VuOm4uYWNjZXNzX3Rva2VuLGV4cGlyZXNBdDpOdW1iZXIobi5leHBpcmVzX2luKStNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSx0b2tlblR5cGU6bi50b2tlbl90eXBlLHNjb3BlczpzLGF1dGhvcml6ZVVybDppLmF1dGhvcml6ZVVybCx1c2VyaW5mb1VybDppLnVzZXJpbmZvVXJsfSksbi5jb2RlJiYoci5jb2RlPXthdXRob3JpemF0aW9uQ29kZTpuLmNvZGV9KSxuLmlkX3Rva2VuKXt2YXIgbD10LnRva2VuLmRlY29kZShuLmlkX3Rva2VuKSxjPXtpZFRva2VuOm4uaWRfdG9rZW4sY2xhaW1zOmwucGF5bG9hZCxleHBpcmVzQXQ6bC5wYXlsb2FkLmV4cCxzY29wZXM6cyxhdXRob3JpemVVcmw6aS5hdXRob3JpemVVcmwsaXNzdWVyOmkuaXNzdWVyLGNsaWVudElkOmF9O3JldHVybiBvKHQsYyxlLm5vbmNlLCEwKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiByLmlkX3Rva2VuPWMscn0pfXJldHVybiByfSkudGhlbihmdW5jdGlvbih0KXtpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gdFtyXTtpZighdC50b2tlbiYmIXQuaWRfdG9rZW4pdGhyb3cgbmV3IGsoIlVuYWJsZSB0byBwYXJzZSBPQXV0aCBmbG93IHJlc3BvbnNlIik7cmV0dXJuIHIubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSl9KX1mdW5jdGlvbiB1KHQsZSl7ZT13LmNsb25lKGUpfHx7fSxlLnNjb3BlJiYody5kZXByZWNhdGUoJ1RoZSBwYXJhbSAic2NvcGUiIGlzIGVxdWl2YWxlbnQgdG8gInNjb3BlcyIuIFVzZSAic2NvcGVzIiBpbnN0ZWFkLicpLGUuc2NvcGVzPWUuc2NvcGUsZGVsZXRlIGUuc2NvcGUpO3ZhciBuPXtjbGllbnRJZDp0Lm9wdGlvbnMuY2xpZW50SWQscmVkaXJlY3RVcmk6dC5vcHRpb25zLnJlZGlyZWN0VXJpfHx3aW5kb3cubG9jYXRpb24uaHJlZixyZXNwb25zZVR5cGU6ImlkX3Rva2VuIixyZXNwb25zZU1vZGU6Im9rdGFfcG9zdF9tZXNzYWdlIixzdGF0ZTp3LmdlblJhbmRvbVN0cmluZyg2NCksbm9uY2U6dy5nZW5SYW5kb21TdHJpbmcoNjQpLHNjb3BlczpbIm9wZW5pZCIsImVtYWlsIl19O3JldHVybiB3LmV4dGVuZChuLGUpLG59ZnVuY3Rpb24gZCh0KXtpZighdC5jbGllbnRJZCl0aHJvdyBuZXcgaygiQSBjbGllbnRJZCBtdXN0IGJlIHNwZWNpZmllZCBpbiB0aGUgT2t0YUF1dGggY29uc3RydWN0b3IgdG8gZ2V0IGEgdG9rZW4iKTtpZih3LmlzU3RyaW5nKHQucmVzcG9uc2VUeXBlKSYmdC5yZXNwb25zZVR5cGUuaW5kZXhPZigiICIpIT09LTEpdGhyb3cgbmV3IGsoIk11bHRpcGxlIE9BdXRoIHJlc3BvbnNlVHlwZXMgbXVzdCBiZSBkZWZpbmVkIGFzIGFuIGFycmF5Iik7dmFyIGU9dy5yZW1vdmVOaWxzKHtjbGllbnRfaWQ6dC5jbGllbnRJZCxyZWRpcmVjdF91cmk6dC5yZWRpcmVjdFVyaSxyZXNwb25zZV90eXBlOnQucmVzcG9uc2VUeXBlLHJlc3BvbnNlX21vZGU6dC5yZXNwb25zZU1vZGUsc3RhdGU6dC5zdGF0ZSxub25jZTp0Lm5vbmNlLHByb21wdDp0LnByb21wdCxkaXNwbGF5OnQuZGlzcGxheSxzZXNzaW9uVG9rZW46dC5zZXNzaW9uVG9rZW4saWRwOnQuaWRwLG1heF9hZ2U6dC5tYXhBZ2V9KTtpZihBcnJheS5pc0FycmF5KGUucmVzcG9uc2VfdHlwZSkmJihlLnJlc3BvbnNlX3R5cGU9ZS5yZXNwb25zZV90eXBlLmpvaW4oIiAiKSksdC5yZXNwb25zZVR5cGUuaW5kZXhPZigiaWRfdG9rZW4iKSE9PS0xJiZ0LnNjb3Blcy5pbmRleE9mKCJvcGVuaWQiKT09PS0xKXRocm93IG5ldyBrKCJvcGVuaWQgc2NvcGUgbXVzdCBiZSBzcGVjaWZpZWQgaW4gdGhlIHNjb3BlcyBhcmd1bWVudCB3aGVuIHJlcXVlc3RpbmcgYW4gaWRfdG9rZW4iKTtyZXR1cm4gZS5zY29wZT10LnNjb3Blcy5qb2luKCIgIiksZX1mdW5jdGlvbiBoKHQpe3ZhciBlPWQodCk7cmV0dXJuIHcudG9RdWVyeVBhcmFtcyhlKX1mdW5jdGlvbiBwKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3ZhciBlPS9eKGh0dHBzP1w6XC9cLyk/KFteOlwvPyNdKig/Olw6WzAtOV0rKT8pLztyZXR1cm4gZS5leGVjKHQpWzBdfWZ1bmN0aW9uIHIodCl7dC5jbG9zZWQmJkEucmVqZWN0KG5ldyBrKCJVbmFibGUgdG8gcGFyc2UgT0F1dGggZmxvdyByZXNwb25zZSIpKX1lPWV8fHt9LG49bnx8e307dmFyIG89dSh0LGUpLHM9e3Byb21wdDoibm9uZSIscmVzcG9uc2VNb2RlOiJva3RhX3Bvc3RfbWVzc2FnZSIsZGlzcGxheTpudWxsfSxkPXtkaXNwbGF5OiJwb3B1cCJ9O2Uuc2Vzc2lvblRva2VuP3cuZXh0ZW5kKG8scyk6ZS5pZHAmJncuZXh0ZW5kKG8sZCk7dmFyIHAsZjt0cnl7Zj1NLmdldE9BdXRoVXJscyh0LG8sbikscD1mLmF1dGhvcml6ZVVybCtoKG8pfWNhdGNoKG0pe3JldHVybiBTLnJlamVjdChtKX12YXIgXztzd2l0Y2goXz1vLnNlc3Npb25Ub2tlbnx8bnVsbD09PW8uZGlzcGxheT8iSUZSQU1FIjoicG9wdXAiPT09by5kaXNwbGF5PyJQT1BVUCI6IklNUExJQ0lUIil7Y2FzZSJJRlJBTUUiOnZhciBnPWEodCxuLnRpbWVvdXQsby5zdGF0ZSksdj1NLmxvYWRGcmFtZShwKTtyZXR1cm4gZy50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjKHQsbyxlLGYpfSkuZmluKGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5jb250YWlucyh2KSYmdi5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHYpfSk7Y2FzZSJQT1BVUCI6dmFyIHk7aWYoIm9rdGFfcG9zdF9tZXNzYWdlIj09PW8ucmVzcG9uc2VNb2RlKXtpZighdC5mZWF0dXJlcy5pc1BvcHVwUG9zdE1lc3NhZ2VTdXBwb3J0ZWQoKSlyZXR1cm4gUy5yZWplY3QobmV3IGsoIlRoaXMgYnJvd3NlciBkb2Vzbid0IGhhdmUgZnVsbCBwb3N0TWVzc2FnZSBzdXBwb3J0IikpO3k9YSh0LG4udGltZW91dCxvLnN0YXRlKX12YXIgYj17cG9wdXBUaXRsZTpuLnBvcHVwVGl0bGV9LFQ9TS5sb2FkUG9wdXAocCxiKTtpZigiZnJhZ21lbnQiPT09by5yZXNwb25zZU1vZGUpe3ZhciBMPWkodC5pZFRva2VuLmF1dGhvcml6ZS5fZ2V0TG9jYXRpb25IcmVmKCkpLHg9aShvLnJlZGlyZWN0VXJpKTtpZihMIT09eClyZXR1cm4gUy5yZWplY3QobmV3IGsoIlVzaW5nIGZyYWdtZW50LCB0aGUgcg==", "base64"));
  res.write(new Buffer("ZWRpcmVjdFVyaSBvcmlnaW4gKCIreCsiKSBtdXN0IG1hdGNoIHRoZSBvcmlnaW4gb2YgdGhpcyBwYWdlICgiK0wrIikiKSk7eT1sKHQsVCxuLnRpbWVvdXQpfXZhciBBPVMuZGVmZXIoKSxFPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cihUKX0sNTAwKTtyZXR1cm4geS50aGVuKGZ1bmN0aW9uKHQpe0EucmVzb2x2ZSh0KX0pLmZhaWwoZnVuY3Rpb24odCl7QS5yZWplY3QodCl9KSxBLnByb21pc2UudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYyh0LG8sZSxmKX0pLmZpbihmdW5jdGlvbigpe1QuY2xvc2VkfHwoY2xlYXJJbnRlcnZhbChFKSxULmNsb3NlKCkpfSk7ZGVmYXVsdDpyZXR1cm4gUy5yZWplY3QobmV3IGsoIlRoZSBmdWxsIHBhZ2UgcmVkaXJlY3QgZmxvdyBpcyBub3Qgc3VwcG9ydGVkIikpfX1mdW5jdGlvbiBmKHQsZSxuKXt2YXIgaT13LmNsb25lKGUpfHx7fTtyZXR1cm4gdy5leHRlbmQoaSx7cHJvbXB0OiJub25lIixyZXNwb25zZU1vZGU6Im9rdGFfcG9zdF9tZXNzYWdlIixkaXNwbGF5Om51bGx9KSxwKHQsaSxuKX1mdW5jdGlvbiBtKHQsZSxuKXt2YXIgaT13LmNsb25lKGUpfHx7fTtyZXR1cm4gdy5leHRlbmQoaSx7ZGlzcGxheToicG9wdXAifSkscCh0LGksbil9ZnVuY3Rpb24gXyh0LGUsbil7ZT13LmNsb25lKGUpfHx7fTt2YXIgaT11KHQsZSk7aWYoIWUucmVzcG9uc2VNb2RlKXt2YXIgcj1pLnJlc3BvbnNlVHlwZTtyLmluZGV4T2YoImNvZGUiKSE9PS0xJiYody5pc1N0cmluZyhyKXx8QXJyYXkuaXNBcnJheShyKSYmMT09PXIubGVuZ3RoKT93LmV4dGVuZChpLHtyZXNwb25zZU1vZGU6InF1ZXJ5In0pOncuZXh0ZW5kKGkse3Jlc3BvbnNlTW9kZToiZnJhZ21lbnQifSl9dmFyIG89TS5nZXRPQXV0aFVybHModCxpLG4pLHM9by5hdXRob3JpemVVcmwraChpKTtBLnNldENvb2tpZSh4LlJFRElSRUNUX09BVVRIX1BBUkFNU19DT09LSUVfTkFNRSxKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2VUeXBlOmkucmVzcG9uc2VUeXBlLHN0YXRlOmkuc3RhdGUsbm9uY2U6aS5ub25jZSxzY29wZXM6aS5zY29wZXMsdXJsczpvfSkpLEEuc2V0Q29va2llKHguUkVESVJFQ1RfTk9OQ0VfQ09PS0lFX05BTUUsaS5ub25jZSksQS5zZXRDb29raWUoeC5SRURJUkVDVF9TVEFURV9DT09LSUVfTkFNRSxpLnN0YXRlKSx0LnRva2VuLmdldFdpdGhSZWRpcmVjdC5fc2V0TG9jYXRpb24ocyl9ZnVuY3Rpb24gZyh0LGUpe2lmKCFNLmlzVG9rZW4oZSkpcmV0dXJuIFMucmVqZWN0KG5ldyBrKCJSZWZyZXNoIG11c3QgYmUgcGFzc2VkIGEgdG9rZW4gd2l0aCBhbiBhcnJheSBvZiBzY29wZXMgYW5kIGFuIGFjY2Vzc1Rva2VuIG9yIGlkVG9rZW4iKSk7dmFyIG47cmV0dXJuIG49ZS5hY2Nlc3NUb2tlbj8idG9rZW4iOiJpZF90b2tlbiIsdC50b2tlbi5nZXRXaXRob3V0UHJvbXB0KHtyZXNwb25zZVR5cGU6bixzY29wZXM6ZS5zY29wZXN9LHthdXRob3JpemVVcmw6ZS5hdXRob3JpemVVcmwsdXNlcmluZm9Vcmw6ZS51c2VyaW5mb1VybCxpc3N1ZXI6ZS5pc3N1ZXJ9KX1mdW5jdGlvbiB2KHQsZSl7dmFyIG49dC50b2tlbi5wYXJzZUZyb21VcmwuX2dldExvY2F0aW9uSGFzaCgpO2UmJihuPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKSk7dmFyIGk9QS5nZXRDb29raWUoeC5SRURJUkVDVF9PQVVUSF9QQVJBTVNfQ09PS0lFX05BTUUpO2lmKCFufHwhaSlyZXR1cm4gUy5yZWplY3QobmV3IGsoIlVuYWJsZSB0byBwYXJzZSBhIHRva2VuIGZyb20gdGhlIHVybCIpKTt0cnl7dmFyIHI9SlNPTi5wYXJzZShpKSxvPXIudXJscztkZWxldGUgci51cmxzLEEuZGVsZXRlQ29va2llKHguUkVESVJFQ1RfT0FVVEhfUEFSQU1TX0NPT0tJRV9OQU1FKX1jYXRjaChzKXtyZXR1cm4gUy5yZWplY3QobmV3IGsoIlVuYWJsZSB0byBwYXJzZSB0aGUgIit4LlJFRElSRUNUX09BVVRIX1BBUkFNU19DT09LSUVfTkFNRSsiIGNvb2tpZTogIitzLm1lc3NhZ2UpKX1yZXR1cm4gUy5yZXNvbHZlKE0uaGFzaFRvT2JqZWN0KG4pKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjKHQscixlLG8pfSl9ZnVuY3Rpb24geSh0LGUpe3JldHVybiBlJiYoTS5pc1Rva2VuKGUpfHxlLmFjY2Vzc1Rva2VufHxlLnVzZXJpbmZvVXJsKT9iLmh0dHBSZXF1ZXN0KHQse3VybDplLnVzZXJpbmZvVXJsLG1ldGhvZDoiR0VUIixhY2Nlc3NUb2tlbjplLmFjY2Vzc1Rva2VufSkuZmFpbChmdW5jdGlvbih0KXtpZih0LnhociYmKDQwMT09PXQueGhyLnN0YXR1c3x8NDAzPT09dC54aHIuc3RhdHVzKSl7dmFyIGU9dC54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoIldXVy1BdXRoZW50aWNhdGUiKTtpZihlKXt2YXIgbj1lLm1hdGNoKC9lcnJvcj0iKC4qPykiLyl8fFtdLGk9ZS5tYXRjaCgvZXJyb3JfZGVzY3JpcHRpb249IiguKj8pIi8pfHxbXSxyPW5bMV0sbz1pWzFdO3ImJm8mJih0PW5ldyBMKHIsbykpfX10aHJvdyB0fSk6Uy5yZWplY3QobmV3IGsoImdldFVzZXJJbmZvIHJlcXVpcmVzIGFuIGFjY2VzcyB0b2tlbiBvYmplY3QiKSl9dmFyIGI9bigzNDApLHc9bigzMzgpLE09bigzNTEpLFM9bigzNDYpLFQ9bigzNTIpLGs9bigzNDQpLEw9bigzNTMpLHg9bigzNDUpLEE9bigzNDEpO3QuZXhwb3J0cz17Z2V0VG9rZW46cCxnZXRXaXRob3V0UHJvbXB0OmYsZ2V0V2l0aFBvcHVwOm0sZ2V0V2l0aFJlZGlyZWN0Ol8scGFyc2VGcm9tVXJsOnYscmVmcmVzaElkVG9rZW46cyxkZWNvZGVUb2tlbjppLHZlcmlmeUlkVG9rZW46cixyZWZyZXNoVG9rZW46ZyxnZXRVc2VySW5mbzp5LHZlcmlmeVRva2VuOm99fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4hKCF0fHwhdC5hY2Nlc3NUb2tlbiYmIXQuaWRUb2tlbnx8IUFycmF5LmlzQXJyYXkodC5zY29wZXMpKX1mdW5jdGlvbiByKHQsZSxuKXt0LmFkZEV2ZW50TGlzdGVuZXI/dC5hZGRFdmVudExpc3RlbmVyKGUsbik6dC5hdHRhY2hFdmVudCgib24iK2Usbil9ZnVuY3Rpb24gbyh0LGUsbil7dC5yZW1vdmVFdmVudExpc3RlbmVyP3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4pOnQuZGV0YWNoRXZlbnQoIm9uIitlLG4pfWZ1bmN0aW9uIHModCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7cmV0dXJuIGUuc3R5bGUuZGlzcGxheT0ibm9uZSIsZS5zcmM9dCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1lLnBvcHVwVGl0bGV8fCJFeHRlcm5hbCBJZGVudGl0eSBQcm92aWRlciBVc2VyIEF1dGhlbnRpY2F0aW9uIixpPSJ0b29sYmFyPW5vLCBzY3JvbGxiYXJzPXllcywgcmVzaXphYmxlPXllcywgdG9wPTEwMCwgbGVmdD01MDAsIHdpZHRoPTYwMCwgaGVpZ2h0PTYwMCI7cmV0dXJuIHdpbmRvdy5vcGVuKHQsbixpKX1mdW5jdGlvbiBsKHQsZSl7cmV0dXJuIHAuZ2V0KHQsKGV8fHQub3B0aW9ucy51cmwpKyIvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb24iLHtjYWNoZVJlc3BvbnNlOiEwfSl9ZnVuY3Rpb24gYyh0LGUsbil7cmV0dXJuIGwodCxlKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBpPWUuandrc191cmkscj1nLmdldFN0b3JhZ2UoKSxvPXJbaV07aWYobyYmRGF0ZS5ub3coKS8xZTM8by5leHBpcmVzQXQpe3ZhciBzPWYuZmluZChvLnJlc3BvbnNlLmtleXMse2tpZDpufSk7aWYocylyZXR1cm4gc31yZXR1cm4gZy5jbGVhclN0b3JhZ2UoaSkscC5nZXQodCxpLHtjYWNoZVJlc3BvbnNlOiEwfSkudGhlbihmdW5jdGlvbih0KXt2YXIgZT1mLmZpbmQodC5rZXlzLHtraWQ6bn0pO2lmKGUpcmV0dXJuIGU7dGhyb3cgbmV3IF8oIlRoZSBrZXkgaWQsICIrbisiLCB3YXMgbm90IGZvdW5kIGluIHRoZSBzZXJ2ZXIncyBrZXlzIil9KX0pfWZ1bmN0aW9uIHUodCxlLG4saSxyKXtpZighZXx8IWl8fCFuKXRocm93IG5ldyBfKCJUaGUgand0LCBpc3MsIGFuZCBhdWQgYXJndW1lbnRzIGFyZSBhbGwgcmVxdWlyZWQiKTtpZihyJiZlLm5vbmNlIT09cil0aHJvdyBuZXcgXygiT0F1dGggZmxvdyByZXNwb25zZSBub25jZSBkb2Vzbid0IG1hdGNoIHJlcXVlc3Qgbm9uY2UiKTt2YXIgbz1NYXRoLmZsb29yKChuZXcgRGF0ZSkuZ2V0VGltZSgpLzFlMyk7aWYoZS5pc3MhPT1pKXRocm93IG5ldyBfKCJUaGUgaXNzdWVyIFsiK2UuaXNzKyJdIGRvZXMgbm90IG1hdGNoIFsiK2krIl0iKTtpZihlLmF1ZCE9PW4pdGhyb3cgbmV3IF8oIlRoZSBhdWRpZW5jZSBbIitlLmF1ZCsiXSBkb2VzIG5vdCBtYXRjaCBbIituKyJdIik7aWYoZS5pYXQ+ZS5leHApdGhyb3cgbmV3IF8oIlRoZSBKV1QgZXhwaXJlZCBiZWZvcmUgaXQgd2FzIGlzc3VlZCIpO2lmKG8tdC5vcHRpb25zLm1heENsb2NrU2tldz5lLmV4cCl0aHJvdyBuZXcgXygiVGhlIEpXVCBleHBpcmVkIGFuZCBpcyBubyBsb25nZXIgdmFsaWQiKTtpZihlLmlhdD5vK3Qub3B0aW9ucy5tYXhDbG9ja1NrZXcpdGhyb3cgbmV3IF8oIlRoZSBKV1Qgd2FzIGlzc3VlZCBpbiB0aGUgZnV0dXJlIil9ZnVuY3Rpb24gZCh0LGUsbil7bj1ufHx7fTt2YXIgaT1mLnJlbW92ZVRyYWlsaW5nU2xhc2gobi5hdXRob3JpemVVcmwpfHx0Lm9wdGlvbnMuYXV0aG9yaXplVXJsLHI9Zi5yZW1vdmVUcmFpbGluZ1NsYXNoKG4uaXNzdWVyKXx8dC5vcHRpb25zLmlzc3VlcixvPWYucmVtb3ZlVHJhaWxpbmdTbGFzaChuLnVzZXJpbmZvVXJsKXx8dC5vcHRpb25zLnVzZXJpbmZvVXJsO2lmKHImJiEvXmh0dHBzPzovLnRlc3QocikmJihyPXQub3B0aW9ucy51cmwrIi9vYXV0aDIvIityKSwhciYmaSYmZS5yZXNwb25zZVR5cGUuaW5kZXhPZigiaWRfdG9rZW4iKSE9PS0xKXRocm93IG5ldyBfKCJDYW5ub3QgcmVxdWVzdCBpZFRva2VuIHdpdGggYW4gYXV0aG9yaXplVXJsIHdpdGhvdXQgYW4gaXNzdWVyIik7aWYoIXImJmUucmVzcG9uc2VUeXBlLmluZGV4T2YoInRva2VuIikhPT0tMSl7aWYoaSYmIW8pdGhyb3cgbmV3IF8oIkNhbm5vdCByZXF1ZXN0IGFjY2Vzc1Rva2VuIHdpdGggYW4gYXV0aG9yaXplVXJsIHdpdGhvdXQgYW4gaXNzdWVyIG9yIHVzZXJpbmZvVXJsIik7aWYobyYmIWkpdGhyb3cgbmV3IF8oIkNhbm5vdCByZXF1ZXN0IHRva2VuIHdpdGggYW4gdXNlcmluZm9Vcmwgd2l0aG91dCBhbiBpc3N1ZXIgb3IgYXV0aG9yaXplVXJsIil9dmFyIHM9bmV3IFJlZ0V4cCgiXmh0dHBzPzovLy4qPy9vYXV0aDIvLisiKTtyZXR1cm4gcj1yfHx0Lm9wdGlvbnMudXJsLHMudGVzdChyKT8oaT1pfHxyKyIvdjEvYXV0aG9yaXplIixvPW98fHIrIi92MS91c2VyaW5mbyIpOihpPWl8fHIrIi9vYXV0aDIvdjEvYXV0aG9yaXplIixvPW98fHIrIi9vYXV0aDIvdjEvdXNlcmluZm8iKSx7aXNzdWVyOnIsYXV0aG9yaXplVXJsOmksdXNlcmluZm9Vcmw6b319ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGUsbj0vXCsvZyxpPS8oW14mPV0rKT0/KFteJl0qKS9nLHI9dC5zdWJzdHJpbmcoMSksbz17fTs7KXtpZihlPWkuZXhlYyhyKSwhZSlicmVhazt2YXIgcz1lWzFdLGE9ZVsyXTsiaWRfdG9rZW4iPT09c3x8ImFjY2Vzc190b2tlbiI9PT1zfHwiY29kZSI9PT1zP29bc109YTpvW3NdPWRlY29kZVVSSUNvbXBvbmVudChhLnJlcGxhY2UobiwiICIpKX1yZXR1cm4gb312YXIgcD1uKDM0MCksZj1uKDMzOCksbT1uKDM0MiksXz1uKDM0NCksZz1tLmdldEh0dHBDYWNoZSgpO3QuZXhwb3J0cz17Z2V0V2VsbEtub3duOmwsZ2V0S2V5OmMsdmFsaWRhdGVDbGFpbXM6dSxnZXRPQXV0aFVybHM6ZCxsb2FkRnJhbWU6cyxsb2FkUG9wdXA6YSxoYXNoVG9PYmplY3Q6aCxpc1Rva2VuOmksYWRkTGlzdGVuZXI6cixyZW1vdmVMaXN0ZW5lcjpvfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtlPXIuY2xvbmUoZSk7dmFyIG49Imp3ayIsaT17bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sbz0hMCxzPVsidmVyaWZ5Il07cmV0dXJuIGRlbGV0ZSBlLnVzZSxjcnlwdG8uc3VidGxlLmltcG9ydEtleShuLGUsaSxvLHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49dC5zcGxpdCgiLiIpLG89ci5zdHJpbmdUb0J1ZmZlcihuWzBdKyIuIituWzFdKSxzPXIuYmFzZTY0VXJsRGVjb2RlKG5bMl0pLGE9ci5zdHJpbmdUb0J1ZmZlcihzKTtyZXR1cm4gY3J5cHRvLnN1YnRsZS52ZXJpZnkoaSxlLGEsbyl9KX12YXIgcj1uKDMzOCk7dC5leHBvcnRzPXt2ZXJpZnlUb2tlbjppfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dGhpcy5uYW1lPSJPQXV0aEVycm9yIix0aGlzLm1lc3NhZ2U9ZSx0aGlzLmVycm9yQ29kZT10LHRoaXMuZXJyb3JTdW1tYXJ5PWV9bi5wcm90b3R5cGU9bmV3IEVycm9yLHQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7dC5lbWl0dGVyLmVtaXQoImV4cGlyZWQiLGUsbil9ZnVuY3Rpb24gcih0LGUpe2NsZWFyVGltZW91dCh0LnJlZnJlc2hUaW1lb3V0c1tlXSksZGVsZXRlIHQucmVmcmVzaFRpbWVvdXRzW2VdfWZ1bmN0aW9uIG8odCl7dmFyIGU9dC5yZWZyZXNoVGltZW91dHM7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmcih0LG4pO3QucmVmcmVzaFRpbWVvdXRzPXt9fWZ1bmN0aW9uIHModCxlLG4sbyxzKXt2YXIgYT0xZTMqcy5leHBpcmVzQXQtRGF0ZS5ub3coKTthPDAmJihhPTApO3ZhciBsPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZS5hdXRvUmVmcmVzaD9kKHQsZSxuLG8pOnZvaWQoMWUzKnMuZXhwaXJlc0F0PD1EYXRlLm5vdygpJiYodShlLG4sbyksaShlLG8scykpKX0sYSk7cihlLG8pLGUucmVmcmVzaFRpbWVvdXRzW29dPWx9ZnVuY3Rpb24gYSh0LGUsbil7dHJ5e3ZhciBpPW4uZ2V0U3RvcmFnZSgpfWNhdGNoKHIpe3JldHVybiB2b2lkIGUuZW1pdHRlci5lbWl0KCJlcnJvciIscil9Zm9yKHZhciBvIGluIGkpaWYoaS5oYXNPd25Qcm9wZXJ0eShvKSl7dmFyIGE9aVtvXTtzKHQsZSxuLG8sYSl9fWZ1bmN0aW9uIGwodCxlLG4saSxyKXt2YXIgbz1uLmdldFN0b3JhZ2UoKTtpZighZi5pc09iamVjdChyKXx8IXIuc2NvcGVzfHwhci5leHBpcmVzQXQmJjAhPT1yLmV4cGlyZXNBdHx8IXIuaWRUb2tlbiYmIXIuYWNjZXNzVG9rZW4pdGhyb3cgbmV3IG0oIlRva2VuIG11c3QgYmUgYW4gT2JqZWN0IHdpdGggc2NvcGVzLCBleHBpcmVzQXQsIGFuZCBhbiBpZFRva2VuIG9yIGFjY2Vzc1Rva2VuIHByb3BlcnRpZXMiKTtvW2ldPXIsbi5zZXRTdG9yYWdlKG8pLHModCxlLG4saSxyKX1mdW5jdGlvbiBjKHQsZSl7dmFyIG49dC5nZXRTdG9yYWdlKCk7cmV0dXJuIG5bZV19ZnVuY3Rpb24gdSh0LGUsbil7cih0LG4pO3ZhciBpPWUuZ2V0U3RvcmFnZSgpO2RlbGV0ZSBpW25dLGUuc2V0U3RvcmFnZShpKX1mdW5jdGlvbiBkKHQsZSxuLG8pe3RyeXt2YXIgcz1jKG4sbyk7aWYoIXMpdGhyb3cgbmV3IG0oIlRoZSB0b2tlbk1hbmFnZXIgaGFzIG5vIHRva2VuIGZvciB0aGUga2V5OiAiK28pfWNhdGNoKGEpe3JldHVybiBnLnJlamVjdChhKX1yZXR1cm4gcihlLG8pLHQudG9rZW4ucmVmcmVzaChzKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBsKHQsZSxuLG8saSksZS5lbWl0dGVyLmVtaXQoInJlZnJlc2hlZCIsbyxpLHMpLGl9KS5mYWlsKGZ1bmN0aW9uKHQpe3Rocm93Ik9BdXRoRXJyb3IiPT09dC5uYW1lJiYodShlLG4sbyksaShlLG8scykpLHR9KX1mdW5jdGlvbiBoKHQsZSl7byh0KSxlLmNsZWFyU3RvcmFnZSgpfWZ1bmN0aW9uIHAodCxlKXtlPWV8fHt9LGUuc3RvcmFnZT1lLnN0b3JhZ2V8fCJsb2NhbFN0b3JhZ2UiLGUuYXV0b1JlZnJlc2h8fGUuYXV0b1JlZnJlc2g9PT0hMXx8KGUuYXV0b1JlZnJlc2g9ITApLCJsb2NhbFN0b3JhZ2UiIT09ZS5zdG9yYWdlfHxfLmJyb3dzZXJIYXNMb2NhbFN0b3JhZ2UoKXx8KGYud2FybigiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBsb2NhbFN0b3JhZ2UuIFN3aXRjaGluZyB0byBzZXNzaW9uU3RvcmFnZS4iKSxlLnN0b3JhZ2U9InNlc3Npb25TdG9yYWdlIiksInNlc3Npb25TdG9yYWdlIiE9PWUuc3RvcmFnZXx8Xy5icm93c2VySGFzU2Vzc2lvblN0b3JhZ2UoKXx8KGYud2FybigiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBzZXNzaW9uU3RvcmFnZS4gU3dpdGNoaW5nIHRvIGNvb2tpZS1iYXNlZCBzdG9yYWdlLiIpLGUuc3RvcmFnZT0iY29va2llIik7dmFyIG47c3dpdGNoKGUuc3RvcmFnZSl7Y2FzZSJsb2NhbFN0b3JhZ2UiOm49Yihsb2NhbFN0b3JhZ2UseS5UT0tFTl9TVE9SQUdFX05BTUUpO2JyZWFrO2Nhc2Uic2Vzc2lvblN0b3JhZ2UiOm49YihzZXNzaW9uU3RvcmFnZSx5LlRPS0VOX1NUT1JBR0VfTkFNRSk7YnJlYWs7Y2FzZSJjb29raWUiOm49YihfLmdldENvb2tpZVN0b3JhZ2UoKSx5LlRPS0VOX1NUT1JBR0VfTkFNRSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgbSgiVW5yZWNvZ25pemVkIHN0b3JhZ2Ugb3B0aW9uIil9dmFyIGk9e2VtaXR0ZXI6bmV3IHYsYXV0b1JlZnJlc2g6ZS5hdXRvUmVmcmVzaCxyZWZyZXNoVGltZW91dHM6e319O3RoaXMuYWRkPWYuYmluZChsLHRoaXMsdCxpLG4pLHRoaXMuZ2V0PWYuYmluZChjLHRoaXMsbiksdGhpcy5yZW1vdmU9Zi5iaW5kKHUsdGhpcyxpLG4pLHRoaXMuY2xlYXI9Zi5iaW5kKGgsdGhpcyxpLG4pLHRoaXMucmVmcmVzaD1mLmJpbmQoZCx0aGlzLHQsaSxuKSx0aGlzLm9uPWYuYmluZChpLmVtaXR0ZXIub24saS5lbWl0dGVyKSx0aGlzLm9mZj1mLmJpbmQoaS5lbWl0dGVyLm9mZixpLmVtaXR0ZXIpLGEodCxpLG4pfXZhciBmPW4oMzM4KSxtPW4oMzQ0KSxfPW4oMzQyKSxnPW4oMzQ2KSx2PW4oMzU1KSx5PW4oMzQ1KSxiPW4oMzQzKTt0LmV4cG9ydHM9cH0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7fW4ucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5lfHwodGhpcy5lPXt9KTtyZXR1cm4oaVt0XXx8KGlbdF09W10pKS5wdXNoKHtmbjplLGN0eDpufSksdGhpc30sb25jZTpmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSgpe3Iub2ZmKHQsaSksZS5hcHBseShuLGFyZ3VtZW50cyl9dmFyIHI9dGhpcztyZXR1cm4gaS5fPWUsdGhpcy5vbih0LGksbil9LGVtaXQ6ZnVuY3Rpb24odCl7dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW3RdfHxbXSkuc2xpY2UoKSxpPTAscj1uLmxlbmd0aDtmb3IoaTtpPHI7aSsrKW5baV0uZm4uYXBwbHkobltpXS5jdHgsZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXx8KHRoaXMuZT17fSksaT1uW3RdLHI9W107aWYoaSYmZSlmb3IodmFyIG89MCxzPWkubGVuZ3RoO288cztvKyspaVtvXS5mbiE9PWUmJmlbb10uZm4uXyE9PWUmJnIucHVzaChpW29dKTtyZXR1cm4gci5sZW5ndGg/blt0XT1yOmRlbGV0ZSBuW3RdLHRoaXN9fSx0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpXSxyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7Zm9yKHZhciBlPVt0XSxuPXQuc3BsaXQoIi0iKTtuLnBvcCgpJiZuLmxlbmd0aD4wOyllLnB1c2gobi5qb2luKCItIikpO3JldHVybiBlfXZhciBuPXt9LGk9dC5fO3JldHVybiBuLmhhc1Rva2Vuc0luSGFzaD1mdW5jdGlvbih0KXtyZXR1cm4vKChpZHxhY2Nlc3MpX3Rva2VuPSkvaS50ZXN0KHQpfSxuLnRyYW5zZm9ybUVycm9yWEhSPWZ1bmN0aW9uKGUpe2lmKDA9PT1lLnN0YXR1cyYmaS5pc0VtcHR5KGUucmVzcG9uc2VKU09OKSlyZXR1cm4gZS5yZXNwb25zZUpTT049e2Vycm9yU3VtbWFyeTp0LmxvYygiZXJyb3IubmV0d29yay5jb25uZWN0aW9uIiwibG9naW4iKX0sZTtpZighZS5yZXNwb25zZUpTT04pdHJ5e2UucmVzcG9uc2VKU09OPUpTT04ucGFyc2UoZS5yZXNwb25zZVRleHQpfWNhdGNoKG4pe3JldHVybiBlLnJlc3BvbnNlSlNPTj17ZXJyb3JTdW1tYXJ5OnQubG9jKCJvZm9ybS5lcnJvci51bmV4cGVjdGVkIiwibG9naW4iKX0sZX1pZihlLnJlc3BvbnNlSlNPTiYmZS5yZXNwb25zZUpTT04uZXJyb3JDYXVzZXMmJmUucmVzcG9uc2VKU09OLmVycm9yQ2F1c2VzLmxlbmd0aCYmKGUucmVzcG9uc2VKU09OLmVycm9yU3VtbWFyeT1lLnJlc3BvbnNlSlNPTi5lcnJvckNhdXNlc1swXS5lcnJvclN1bW1hcnkpLCFpLmlzRW1wdHkoZS5yZXNwb25zZUpTT04pKXt2YXIgcj10LmxvYygiZXJyb3JzLiIrZS5yZXNwb25zZUpTT04uZXJyb3JDb2RlLCJsb2dpbiIpOwoJci5pbmRleE9mKCJMMTBOX0VSUk9SWyIpPT09LTEmJihlLnJlc3BvbnNlSlNPTi5lcnJvclN1bW1hcnk9cil9cmV0dXJuIGV9LG4udG9Mb3dlcj1mdW5jdGlvbih0KXtyZXR1cm4gaS5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpfSl9LG4uZXhwYW5kTGFuZ3VhZ2VzPWZ1bmN0aW9uKHQpe3JldHVybiBpLmNoYWluKHQpLm1hcChlKS5mbGF0dGVuKCkudW5pcSgpLnZhbHVlKCl9LG4uY2FsbEFmdGVyVGltZW91dD1mdW5jdGlvbih0LGUpe3JldHVybiBzZXRUaW1lb3V0KHQsZSl9LG59LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNjApLG4oMzMxKSxuKDMyOCksbigzMzApLG4oMzYxKSxuKDQ2MSksbig0NjIpLG4oNDY1KSxuKDM1OCksbig0NjYpLG4oNDY2", "base64"));
  res.write(new Buffer("KSxuKDQ2Niksbig0NjcpLG4oNTE1KSxuKDQ2NildLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhLGwsYyx1LGQsaCxwKXt2YXIgZj11LG09ZCxfPWgsZz1wO3JldHVybntCYWNrYm9uZTp0LCQ6ZSxfOm4sbW9tZW50OnIsbW9tZW50VHo6byxIYW5kbGViYXJzOmksbG9jOl8uU3RyaW5nVXRpbC5sb2NhbGl6ZSxjcmVhdGVCdXR0b246Xy5CdXR0b25GYWN0b3J5LmNyZWF0ZSxjcmVhdGVDYWxsb3V0OmcuY29tcG9uZW50cy5DYWxsb3V0LmNyZWF0ZSx0cGw6Xy5UZW1wbGF0ZVV0aWwudHBsLE1vZGVsOnMsQmFzZU1vZGVsOmEsQ29sbGVjdGlvbjpsLFZpZXc6Zy5CYXNlVmlldyxMaXN0VmlldzpnLkxpc3RWaWV3LFRhYmxlVmlldzpnLlRhYmxlVmlldyxSb3V0ZXI6Xy5CYXNlUm91dGVyLFRhYmJlZFJvdXRlcjpfLlRhYmJlZFJvdXRlcixDb250cm9sbGVyOl8uQmFzZUNvbnRyb2xsZXIsRGF0YUxpc3RDb250cm9sbGVyOl8uRGF0YUxpc3RDb250cm9sbGVyLERhdGFMaXN0OmcuZGF0YWxpc3QuRGVhZFNpbXBsZURhdGFMaXN0LE1vZGFsRGlhbG9nOmcuY29tcG9uZW50cy5CYXNlTW9kYWxEaWFsb2csTXVsdGlWaWV3TW9kYWxEaWFsb2c6Zy5jb21wb25lbnRzLk11bHRpVmlld01vZGFsRGlhbG9nLEZvcm06Zy5mb3Jtcy5CYXNlRm9ybSxGb3JtRGlhbG9nOmcuY29tcG9uZW50cy5CYXNlRm9ybURpYWxvZyxEcm9wRG93bjpnLmNvbXBvbmVudHMuRHJvcERvd24sV2l6YXJkOmMsTG9nZ2VyOl8uTG9nZ2VyLE1ldHJpY3M6Xy5NZXRyaWNzLGludGVybmFsOntmcmFtZXdvcms6Zix1dGlsOl8sdmlld3M6Zyxtb2RlbHM6bX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDM1OSldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe3NlY3VyZUpTT046ITEsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0LnJlc3VsdCh0aGlzLCJzZWN1cmVKU09OIikmJih0aGlzLnN5bmM9dC53cmFwKHRoaXMuc3luYyxmdW5jdGlvbihlLG4saSxyKXtyZXR1cm4gZS5jYWxsKHRoaXMsbixpLHQuZXh0ZW5kKHtkYXRhVHlwZToic2VjdXJlSlNPTiJ9LHIpKX0pKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvOyJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fTshZnVuY3Rpb24ocyxhKXtyPVtuKDMyOCksbigzNjApXSxpPWEsbz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KGUscik6aSwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpfSh2b2lkIDAsZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dHJ5e3ZhciBuPW8oZS5nZXRSZXNwb25zZUhlYWRlcigibGluayIpKTt0W3NdLnNldCh1LCEwKSx0LnNldFBhZ2luYXRpb24obi5uZXh0LmhyZWYpfWNhdGNoKGkpe3Rbc10uZ2V0KHUpJiZ0LnNldFBhZ2luYXRpb24obnVsbCl9fWZ1bmN0aW9uIGkodCl7Zm9yKHZhciBlPXt9LG49dCYmdC5zcGxpdCgiPyIpWzFdLGk9biYmZGVjb2RlVVJJQ29tcG9uZW50KG4uc3BsaXQoIiMiKVswXSkucmVwbGFjZSgvXCsvZywiICIpLHI9aT9pLnNwbGl0KCImIik6W10sbz0wO288ci5sZW5ndGg7bysrKXt2YXIgcz1yW29dLnNwbGl0KCI9Iik7ZVtzLnNoaWZ0KCldPXMuam9pbigiPSIpfXJldHVybiBlfWZ1bmN0aW9uIHIodCl7cmV0dXJuJyInPT10LmNoYXJBdCgwKSYmJyInPT10LmNoYXJBdCh0Lmxlbmd0aC0xKT90LnN1YnN0cmluZygxLHQubGVuZ3RoLTEpOnR9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGU9LzxbXj5dKj5ccyooXHMqO1xzKlteXChcKTw+QCw7OiJcL1xbXF1cPz17fSBcdF0rPSgoW15cKFwpPD5ALDs6IlwvXFtcXVw/PXt9IFx0XSspfCgiW14iXSoiKSkpKigsfCQpL2csbj0vW15cKFwpPD5ALDs6IlwvXFtcXVw/PXt9IFx0XSs9KChbXlwoXCk8PkAsOzoiXC9cW1xdXD89e30gXHRdKyl8KCJbXiJdKiIpKS9nLGk9dC5tYXRjaChlKSxvPXt9LHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXS5zcGxpdCgiPiIpLGw9YVswXS5zdWJzdHJpbmcoMSksYz17fTtjLmhyZWY9bDtmb3IodmFyIHU9YVsxXS5tYXRjaChuKSxkPTA7ZDx1Lmxlbmd0aDtkKyspe3ZhciBoPXVbZF0uc3BsaXQoIj0iKSxwPWhbMF07Y1twXT1yKGhbMV0pfXZvaWQgMCE9PWMucmVsJiYob1tjLnJlbF09Yyl9cmV0dXJuIG99dmFyIHM9Il9fU1RBVEVfXyIsYT0iRkVUQ0hfREFUQSIsbD0iUEFHSU5BVElPTl9EQVRBIixjPSJERUZBVUxUX1BBUkFNUyIsdT0iTElOS19CWV9IRUFERVIiLGQ9IlhIUiI7cmV0dXJuIGUuQ29sbGVjdGlvbi5leHRlbmQoe3BhcmFtczp7fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihuLGkpe3ZhciByPXRoaXNbc109bmV3IGUuTW9kZWw7ci5zZXQoYyx0LmRlZmF1bHRzKGkmJmkucGFyYW1zfHx7fSx0aGlzLnBhcmFtc3x8e30pKSxlLkNvbGxlY3Rpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzeW5jOmZ1bmN0aW9uKHQsaSxyKXt2YXIgbz10aGlzLHM9ci5zdWNjZXNzO3JldHVybiByLnN1Y2Nlc3M9ZnVuY3Rpb24odCxlLGkpe24obyxpKSxzLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sZS5Db2xsZWN0aW9uLnByb3RvdHlwZS5zeW5jLmNhbGwodGhpcyx0LGkscil9LGZldGNoOmZ1bmN0aW9uKG4pe258fChuPXt9KTt2YXIgaT10aGlzW3NdLHI9aS5nZXQoZCk7cmV0dXJuIG4uZGF0YT10LmV4dGVuZCh7fSxpLmdldChjKSxuLmRhdGF8fHt9KSxuLmZyb21GZXRjaD0hMCxpLnNldChhLG4uZGF0YSksciYmci5hYm9ydCYmbi5hYm9ydCE9PSExJiZyLmFib3J0KCkscj1lLkNvbGxlY3Rpb24ucHJvdG90eXBlLmZldGNoLmNhbGwodGhpcyxuKSxpLnNldChkLHIpLHJ9LHNldFBhZ2luYXRpb246ZnVuY3Rpb24oZSxuKXt0LmlzU3RyaW5nKGUpJiZlJiYoZT1pKGUpKSx0LmlzT2JqZWN0KGUpJiYhdC5pc0FycmF5KGUpJiZ0LnNpemUoZSk/biYmbi5mcm9tRmV0Y2gmJihlPXQuZXh0ZW5kKHt9LHRoaXMuZ2V0RmV0Y2hEYXRhKCksZSkpOmU9bnVsbCx0aGlzW3NdLnNldChsLGUpfSxnZXRGZXRjaERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tzXS5nZXQoYSl8fHt9fSxnZXRQYWdpbmF0aW9uRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzW3NdLmdldChsKXx8e319LGhhc01vcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zaXplKHRoaXMuZ2V0UGFnaW5hdGlvbkRhdGEoKSk+MH0sZmV0Y2hNb3JlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaGFzTW9yZSgpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBSZXF1ZXN0Iik7cmV0dXJuIHRoaXMuZmV0Y2goe2RhdGE6dGhpcy5nZXRQYWdpbmF0aW9uRGF0YSgpLGFkZDohMCxyZW1vdmU6ITEsdXBkYXRlOiEwfSl9LHJlc2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIG58fChuPXt9KSxuLmZyb21GZXRjaHx8dGhpcy5zZXRQYWdpbmF0aW9uKG51bGwpLGUuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVzZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx3aGVyZTpmdW5jdGlvbihlLG4pe3JldHVybiB0LmlzRW1wdHkoZSk/bj92b2lkIDA6W106dGhpc1tuPyJmaW5kIjoiZmlsdGVyIl0oZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIGUpaWYoZVtuXSE9PXQuZ2V0KG4pKXJldHVybiExO3JldHVybiEwfSl9LGNyZWF0ZTpmdW5jdGlvbihuLGkpe3JldHVybiBpfHwoaT17fSksdC5yZXN1bHQobiwidXJsUm9vdCIpfHwoaS51cmw9dC5yZXN1bHQodGhpcywidXJsIikpLGUuQ29sbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlLmNhbGwodGhpcyxuLGkpfX0pfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyOyhmdW5jdGlvbihvKXsKCS8vICAgICAoYykgMjAxMC0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzCgkvLyAgICAgQmFja2JvbmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCgkhZnVuY3Rpb24ocyl7dmFyIGE9Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmLnNlbGY9PXNlbGYmJnNlbGZ8fCJvYmplY3QiPT10eXBlb2YgbyYmby5nbG9iYWw9PW8mJm87aT1bbigzMjkpLG4oMzMyKSxlXSxyPWZ1bmN0aW9uKHQsZSxuKXthLkJhY2tib25lPXMoYSxuLHQsZSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0oZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dC5CYWNrYm9uZSxvPVtdLnNsaWNlO2UuVkVSU0lPTj0iMS4yLjEiLGUuJD1pLGUubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LkJhY2tib25lPXIsdGhpc30sZS5lbXVsYXRlSFRUUD0hMSxlLmVtdWxhdGVKU09OPSExO3ZhciBzPWZ1bmN0aW9uKHQsZSxpKXtzd2l0Y2godCl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuW2VdKHRoaXNbaV0pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBuW2VdKHRoaXNbaV0sdCl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbltlXSh0aGlzW2ldLHQscil9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24odCxyLG8pe3JldHVybiBuW2VdKHRoaXNbaV0sdCxyLG8pfTtkZWZhdWx0OnJldHVybiBmdW5jdGlvbigpe3ZhciB0PW8uY2FsbChhcmd1bWVudHMpO3JldHVybiB0LnVuc2hpZnQodGhpc1tpXSksbltlXS5hcHBseShuLHQpfX19LGE9ZnVuY3Rpb24odCxlLGkpe24uZWFjaChlLGZ1bmN0aW9uKGUscil7bltyXSYmKHQucHJvdG90eXBlW3JdPXMoZSxyLGkpKX0pfSxsPWUuRXZlbnRzPXt9LGM9L1xzKy8sdT1mdW5jdGlvbih0LGUsaSxyLG8pe3ZhciBzLGE9MDtpZihpJiYib2JqZWN0Ij09dHlwZW9mIGkpe3ZvaWQgMCE9PXImJiJjb250ZXh0ImluIG8mJnZvaWQgMD09PW8uY29udGV4dCYmKG8uY29udGV4dD1yKTtmb3Iocz1uLmtleXMoaSk7YTxzLmxlbmd0aDthKyspZT10KGUsc1thXSxpW3NbYV1dLG8pfWVsc2UgaWYoaSYmYy50ZXN0KGkpKWZvcihzPWkuc3BsaXQoYyk7YTxzLmxlbmd0aDthKyspZT10KGUsc1thXSxyLG8pO2Vsc2UgZT10KGUsaSxyLG8pO3JldHVybiBlfTtsLm9uPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZCh0aGlzLHQsZSxuKX07dmFyIGQ9ZnVuY3Rpb24odCxlLG4saSxyKXtpZih0Ll9ldmVudHM9dShoLHQuX2V2ZW50c3x8e30sZSxuLHtjb250ZXh0OmksY3R4OnQsbGlzdGVuaW5nOnJ9KSxyKXt2YXIgbz10Ll9saXN0ZW5lcnN8fCh0Ll9saXN0ZW5lcnM9e30pO29bci5pZF09cn1yZXR1cm4gdH07bC5saXN0ZW5Ubz1mdW5jdGlvbih0LGUsaSl7aWYoIXQpcmV0dXJuIHRoaXM7dmFyIHI9dC5fbGlzdGVuSWR8fCh0Ll9saXN0ZW5JZD1uLnVuaXF1ZUlkKCJsIikpLG89dGhpcy5fbGlzdGVuaW5nVG98fCh0aGlzLl9saXN0ZW5pbmdUbz17fSkscz1vW3JdO2lmKCFzKXt2YXIgYT10aGlzLl9saXN0ZW5JZHx8KHRoaXMuX2xpc3RlbklkPW4udW5pcXVlSWQoImwiKSk7cz1vW3JdPXtvYmo6dCxvYmpJZDpyLGlkOmEsbGlzdGVuaW5nVG86byxjb3VudDowfX1yZXR1cm4gZCh0LGUsaSx0aGlzLHMpLHRoaXN9O3ZhciBoPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKG4pe3ZhciByPXRbZV18fCh0W2VdPVtdKSxvPWkuY29udGV4dCxzPWkuY3R4LGE9aS5saXN0ZW5pbmc7YSYmYS5jb3VudCsrLHIucHVzaCg=", "base64"));
  res.write(new Buffer("e2NhbGxiYWNrOm4sY29udGV4dDpvLGN0eDpvfHxzLGxpc3RlbmluZzphfSl9cmV0dXJuIHR9O2wub2ZmPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5fZXZlbnRzPyh0aGlzLl9ldmVudHM9dShwLHRoaXMuX2V2ZW50cyx0LGUse2NvbnRleHQ6bixsaXN0ZW5lcnM6dGhpcy5fbGlzdGVuZXJzfSksdGhpcyk6dGhpc30sbC5zdG9wTGlzdGVuaW5nPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLl9saXN0ZW5pbmdUbztpZighcilyZXR1cm4gdGhpcztmb3IodmFyIG89dD9bdC5fbGlzdGVuSWRdOm4ua2V5cyhyKSxzPTA7czxvLmxlbmd0aDtzKyspe3ZhciBhPXJbb1tzXV07aWYoIWEpYnJlYWs7YS5vYmoub2ZmKGUsaSx0aGlzKX1yZXR1cm4gbi5pc0VtcHR5KHIpJiYodGhpcy5fbGlzdGVuaW5nVG89dm9pZCAwKSx0aGlzfTt2YXIgcD1mdW5jdGlvbih0LGUsaSxyKXtpZih0KXt2YXIgbyxzPTAsYT1yLmNvbnRleHQsbD1yLmxpc3RlbmVycztpZihlfHxpfHxhKXtmb3IodmFyIGM9ZT9bZV06bi5rZXlzKHQpO3M8Yy5sZW5ndGg7cysrKXtlPWNbc107dmFyIHU9dFtlXTtpZighdSlicmVhaztmb3IodmFyIGQ9W10saD0wO2g8dS5sZW5ndGg7aCsrKXt2YXIgcD11W2hdO2kmJmkhPT1wLmNhbGxiYWNrJiZpIT09cC5jYWxsYmFjay5fY2FsbGJhY2t8fGEmJmEhPT1wLmNvbnRleHQ/ZC5wdXNoKHApOihvPXAubGlzdGVuaW5nLG8mJjA9PT0tLW8uY291bnQmJihkZWxldGUgbFtvLmlkXSxkZWxldGUgby5saXN0ZW5pbmdUb1tvLm9iaklkXSkpfWQubGVuZ3RoP3RbZV09ZDpkZWxldGUgdFtlXX1yZXR1cm4gbi5zaXplKHQpP3Q6dm9pZCAwfWZvcih2YXIgZj1uLmtleXMobCk7czxmLmxlbmd0aDtzKyspbz1sW2Zbc11dLGRlbGV0ZSBsW28uaWRdLGRlbGV0ZSBvLmxpc3RlbmluZ1RvW28ub2JqSWRdfX07bC5vbmNlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj11KGYse30sdCxlLG4uYmluZCh0aGlzLm9mZix0aGlzKSk7cmV0dXJuIHRoaXMub24ocix2b2lkIDAsaSl9LGwubGlzdGVuVG9PbmNlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj11KGYse30sZSxpLG4uYmluZCh0aGlzLnN0b3BMaXN0ZW5pbmcsdGhpcyx0KSk7cmV0dXJuIHRoaXMubGlzdGVuVG8odCxyKX07dmFyIGY9ZnVuY3Rpb24odCxlLGkscil7aWYoaSl7dmFyIG89dFtlXT1uLm9uY2UoZnVuY3Rpb24oKXtyKGUsbyksaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtvLl9jYWxsYmFjaz1pfXJldHVybiB0fTtsLnRyaWdnZXI9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztmb3IodmFyIGU9TWF0aC5tYXgoMCxhcmd1bWVudHMubGVuZ3RoLTEpLG49QXJyYXkoZSksaT0wO2k8ZTtpKyspbltpXT1hcmd1bWVudHNbaSsxXTtyZXR1cm4gdShtLHRoaXMuX2V2ZW50cyx0LHZvaWQgMCxuKSx0aGlzfTt2YXIgbT1mdW5jdGlvbih0LGUsbixpKXtpZih0KXt2YXIgcj10W2VdLG89dC5hbGw7ciYmbyYmKG89by5zbGljZSgpKSxyJiZfKHIsaSksbyYmXyhvLFtlXS5jb25jYXQoaSkpfXJldHVybiB0fSxfPWZ1bmN0aW9uKHQsZSl7dmFyIG4saT0tMSxyPXQubGVuZ3RoLG89ZVswXSxzPWVbMV0sYT1lWzJdO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvKTtyZXR1cm47Y2FzZSAyOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzKTtyZXR1cm47Y2FzZSAzOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzLGEpO3JldHVybjtkZWZhdWx0OmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LGUpO3JldHVybn19O2wuYmluZD1sLm9uLGwudW5iaW5kPWwub2ZmLG4uZXh0ZW5kKGUsbCk7dmFyIGc9ZS5Nb2RlbD1mdW5jdGlvbih0LGUpe3ZhciBpPXR8fHt9O2V8fChlPXt9KSx0aGlzLmNpZD1uLnVuaXF1ZUlkKHRoaXMuY2lkUHJlZml4KSx0aGlzLmF0dHJpYnV0ZXM9e30sZS5jb2xsZWN0aW9uJiYodGhpcy5jb2xsZWN0aW9uPWUuY29sbGVjdGlvbiksZS5wYXJzZSYmKGk9dGhpcy5wYXJzZShpLGUpfHx7fSksaT1uLmRlZmF1bHRzKHt9LGksbi5yZXN1bHQodGhpcywiZGVmYXVsdHMiKSksdGhpcy5zZXQoaSxlKSx0aGlzLmNoYW5nZWQ9e30sdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07bi5leHRlbmQoZy5wcm90b3R5cGUsbCx7Y2hhbmdlZDpudWxsLHZhbGlkYXRpb25FcnJvcjpudWxsLGlkQXR0cmlidXRlOiJpZCIsY2lkUHJlZml4OiJjIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKX0sc3luYzpmdW5jdGlvbigpe3JldHVybiBlLnN5bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1t0XX0sZXNjYXBlOmZ1bmN0aW9uKHQpe3JldHVybiBuLmVzY2FwZSh0aGlzLmdldCh0KSl9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dGhpcy5nZXQodCl9LG1hdGNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuISFuLml0ZXJhdGVlKHQsdGhpcykodGhpcy5hdHRyaWJ1dGVzKX0sc2V0OmZ1bmN0aW9uKHQsZSxpKXtpZihudWxsPT10KXJldHVybiB0aGlzO3ZhciByO2lmKCJvYmplY3QiPT10eXBlb2YgdD8ocj10LGk9ZSk6KHI9e30pW3RdPWUsaXx8KGk9e30pLCF0aGlzLl92YWxpZGF0ZShyLGkpKXJldHVybiExO3ZhciBvPWkudW5zZXQscz1pLnNpbGVudCxhPVtdLGw9dGhpcy5fY2hhbmdpbmc7dGhpcy5fY2hhbmdpbmc9ITAsbHx8KHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcz1uLmNsb25lKHRoaXMuYXR0cmlidXRlcyksdGhpcy5jaGFuZ2VkPXt9KTt2YXIgYz10aGlzLmF0dHJpYnV0ZXMsdT10aGlzLmNoYW5nZWQsZD10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7dGhpcy5pZEF0dHJpYnV0ZSBpbiByJiYodGhpcy5pZD1yW3RoaXMuaWRBdHRyaWJ1dGVdKTtmb3IodmFyIGggaW4gcillPXJbaF0sbi5pc0VxdWFsKGNbaF0sZSl8fGEucHVzaChoKSxuLmlzRXF1YWwoZFtoXSxlKT9kZWxldGUgdVtoXTp1W2hdPWUsbz9kZWxldGUgY1toXTpjW2hdPWU7aWYoIXMpe2EubGVuZ3RoJiYodGhpcy5fcGVuZGluZz1pKTtmb3IodmFyIHA9MDtwPGEubGVuZ3RoO3ArKyl0aGlzLnRyaWdnZXIoImNoYW5nZToiK2FbcF0sdGhpcyxjW2FbcF1dLGkpfWlmKGwpcmV0dXJuIHRoaXM7aWYoIXMpZm9yKDt0aGlzLl9wZW5kaW5nOylpPXRoaXMuX3BlbmRpbmcsdGhpcy5fcGVuZGluZz0hMSx0aGlzLnRyaWdnZXIoImNoYW5nZSIsdGhpcyxpKTtyZXR1cm4gdGhpcy5fcGVuZGluZz0hMSx0aGlzLl9jaGFuZ2luZz0hMSx0aGlzfSx1bnNldDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNldCh0LHZvaWQgMCxuLmV4dGVuZCh7fSxlLHt1bnNldDohMH0pKX0sY2xlYXI6ZnVuY3Rpb24odCl7dmFyIGU9e307Zm9yKHZhciBpIGluIHRoaXMuYXR0cmlidXRlcyllW2ldPXZvaWQgMDtyZXR1cm4gdGhpcy5zZXQoZSxuLmV4dGVuZCh7fSx0LHt1bnNldDohMH0pKX0saGFzQ2hhbmdlZDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD8hbi5pc0VtcHR5KHRoaXMuY2hhbmdlZCk6bi5oYXModGhpcy5jaGFuZ2VkLHQpfSxjaGFuZ2VkQXR0cmlidXRlczpmdW5jdGlvbih0KXtpZighdClyZXR1cm4hIXRoaXMuaGFzQ2hhbmdlZCgpJiZuLmNsb25lKHRoaXMuY2hhbmdlZCk7dmFyIGU9dGhpcy5fY2hhbmdpbmc/dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzOnRoaXMuYXR0cmlidXRlcyxpPXt9O2Zvcih2YXIgciBpbiB0KXt2YXIgbz10W3JdO24uaXNFcXVhbChlW3JdLG8pfHwoaVtyXT1vKX1yZXR1cm4hIW4uc2l6ZShpKSYmaX0scHJldmlvdXM6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJnRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcz90aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbdF06bnVsbH0scHJldmlvdXNBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKX0sZmV0Y2g6ZnVuY3Rpb24odCl7dD1uLmV4dGVuZCh7cGFyc2U6ITB9LHQpO3ZhciBlPXRoaXMsaT10LnN1Y2Nlc3M7cmV0dXJuIHQuc3VjY2Vzcz1mdW5jdGlvbihuKXt2YXIgcj10LnBhcnNlP2UucGFyc2Uobix0KTpuO3JldHVybiEhZS5zZXQocix0KSYmKGkmJmkuY2FsbCh0LmNvbnRleHQsZSxuLHQpLHZvaWQgZS50cmlnZ2VyKCJzeW5jIixlLG4sdCkpfSxIKHRoaXMsdCksdGhpcy5zeW5jKCJyZWFkIix0aGlzLHQpfSxzYXZlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcjtudWxsPT10fHwib2JqZWN0Ij09dHlwZW9mIHQ/KHI9dCxpPWUpOihyPXt9KVt0XT1lLGk9bi5leHRlbmQoe3ZhbGlkYXRlOiEwLHBhcnNlOiEwfSxpKTt2YXIgbz1pLndhaXQ7aWYociYmIW8pe2lmKCF0aGlzLnNldChyLGkpKXJldHVybiExfWVsc2UgaWYoIXRoaXMuX3ZhbGlkYXRlKHIsaSkpcmV0dXJuITE7dmFyIHM9dGhpcyxhPWkuc3VjY2VzcyxsPXRoaXMuYXR0cmlidXRlcztpLnN1Y2Nlc3M9ZnVuY3Rpb24odCl7cy5hdHRyaWJ1dGVzPWw7dmFyIGU9aS5wYXJzZT9zLnBhcnNlKHQsaSk6dDtyZXR1cm4gbyYmKGU9bi5leHRlbmQoe30scixlKSksIShlJiYhcy5zZXQoZSxpKSkmJihhJiZhLmNhbGwoaS5jb250ZXh0LHMsdCxpKSx2b2lkIHMudHJpZ2dlcigic3luYyIscyx0LGkpKX0sSCh0aGlzLGkpLHImJm8mJih0aGlzLmF0dHJpYnV0ZXM9bi5leHRlbmQoe30sbCxyKSk7dmFyIGM9dGhpcy5pc05ldygpPyJjcmVhdGUiOmkucGF0Y2g/InBhdGNoIjoidXBkYXRlIjsicGF0Y2giIT09Y3x8aS5hdHRyc3x8KGkuYXR0cnM9cik7dmFyIHU9dGhpcy5zeW5jKGMsdGhpcyxpKTtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzPWwsdX0sZGVzdHJveTpmdW5jdGlvbih0KXt0PXQ/bi5jbG9uZSh0KTp7fTt2YXIgZT10aGlzLGk9dC5zdWNjZXNzLHI9dC53YWl0LG89ZnVuY3Rpb24oKXtlLnN0b3BMaXN0ZW5pbmcoKSxlLnRyaWdnZXIoImRlc3Ryb3kiLGUsZS5jb2xsZWN0aW9uLHQpfTt0LnN1Y2Nlc3M9ZnVuY3Rpb24obil7ciYmbygpLGkmJmkuY2FsbCh0LmNvbnRleHQsZSxuLHQpLGUuaXNOZXcoKXx8ZS50cmlnZ2VyKCJzeW5jIixlLG4sdCl9O3ZhciBzPSExO3JldHVybiB0aGlzLmlzTmV3KCk/bi5kZWZlcih0LnN1Y2Nlc3MpOihIKHRoaXMsdCkscz10aGlzLnN5bmMoImRlbGV0ZSIsdGhpcyx0KSkscnx8bygpLHN9LHVybDpmdW5jdGlvbigpe3ZhciB0PW4ucmVzdWx0KHRoaXMsInVybFJvb3QiKXx8bi5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCJ1cmwiKXx8aigpO2lmKHRoaXMuaXNOZXcoKSlyZXR1cm4gdDt2YXIgZT10aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTtyZXR1cm4gdC5yZXBsYWNlKC9bXlwvXSQvLCIkJi8iKStlbmNvZGVVUklDb21wb25lbnQoZSl9LHBhcnNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXR0cmlidXRlcyl9LGlzTmV3OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzKHRoaXMuaWRBdHRyaWJ1dGUpfSxpc1ZhbGlkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92YWxpZGF0ZSh7fSxuLmRlZmF1bHRzKHt2YWxpZGF0ZTohMH0sdCkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24odCxlKXtpZighZS52YWxpZGF0ZXx8IXRoaXMudmFsaWRhdGUpcmV0dXJuITA7dD1uLmV4dGVuZCh7fSx0aGlzLmF0dHJpYnV0ZXMsdCk7dmFyIGk9dGhpcy52YWxpZGF0aW9uRXJyb3I9dGhpcy52YWxpZGF0ZSh0LGUpfHxudWxsO3JldHVybiFpfHwodGhpcy50cmlnZ2VyKCJpbnZhbGlkIix0aGlzLGksbi5leHRlbmQoZSx7dmFsaWRhdGlvbkVycm9yOml9KSksITEpfX0pO3ZhciB2PXtrZXlzOjEsdmFsdWVzOjEscGFpcnM6MSxpbnZlcnQ6MSxwaWNrOjAsb21pdDowLGNoYWluOjEsaXNFbXB0eToxfTthKGcsdiwiYXR0cmlidXRlcyIpO3ZhciB5PWUuQ29sbGVjdGlvbj1mdW5jdGlvbih0LGUpe2V8fChlPXt9KSxlLm1vZGVsJiYodGhpcy5tb2RlbD1lLm1vZGVsKSx2b2lkIDAhPT1lLmNvbXBhcmF0b3ImJih0aGlzLmNvbXBhcmF0b3I9ZS5jb21wYXJhdG9yKSx0aGlzLl9yZXNldCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdCYmdGhpcy5yZXNldCh0LG4uZXh0ZW5kKHtzaWxlbnQ6ITB9LGUpKX0sYj17YWRkOiEwLHJlbW92ZTohMCxtZXJnZTohMH0sdz17YWRkOiEwLHJlbW92ZTohMX07bi5leHRlbmQoeS5wcm90b3R5cGUsbCx7bW9kZWw6Zyxpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvSlNPTih0KX0pfSxzeW5jOmZ1bmN0aW9uKCl7cmV0dXJuIGUuc3luYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFkZDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNldCh0LG4uZXh0ZW5kKHttZXJnZTohMX0sZSx3KSl9LHJlbW92ZTpmdW5jdGlvbih0LGUpe2U9bi5leHRlbmQoe30sZSk7dmFyIGk9IW4uaXNBcnJheSh0KTt0PWk/W3RdOm4uY2xvbmUodCk7dmFyIHI9dGhpcy5fcmVtb3ZlTW9kZWxzKHQsZSk7cmV0dXJuIWUuc2lsZW50JiZyJiZ0aGlzLnRyaWdnZXIoInVwZGF0ZSIsdGhpcyxlKSxpP3JbMF06cn0sc2V0OmZ1bmN0aW9uKHQsZSl7ZT1uLmRlZmF1bHRzKHt9LGUsYiksZS5wYXJzZSYmIXRoaXMuX2lzTW9kZWwodCkmJih0PXRoaXMucGFyc2UodCxlKSk7dmFyIGk9IW4uaXNBcnJheSh0KTt0PWk/dD9bdF06W106dC5zbGljZSgpO3ZhciByLG8scyxhLGwsYz1lLmF0O251bGwhPWMmJihjPStjKSxjPDAmJihjKz10aGlzLmxlbmd0aCsxKTtmb3IodmFyIHU9dGhpcy5jb21wYXJhdG9yJiZudWxsPT1jJiZlLnNvcnQhPT0hMSxkPW4uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKT90aGlzLmNvbXBhcmF0b3I6bnVsbCxoPVtdLHA9W10sZj17fSxtPWUuYWRkLF89ZS5tZXJnZSxnPWUucmVtb3ZlLHY9ISh1fHwhbXx8IWcpJiZbXSx5PSExLHc9MDt3PHQubGVuZ3RoO3crKyl7aWYocz10W3ddLGE9dGhpcy5nZXQocykpZyYmKGZbYS5jaWRdPSEwKSxfJiZzIT09YSYmKHM9dGhpcy5faXNNb2RlbChzKT9zLmF0dHJpYnV0ZXM6cyxlLnBhcnNlJiYocz1hLnBhcnNlKHMsZSkpLGEuc2V0KHMsZSksdSYmIWwmJmEuaGFzQ2hhbmdlZChkKSYmKGw9ITApKSx0W3ddPWE7ZWxzZSBpZihtKXtpZihvPXRbd109dGhpcy5fcHJlcGFyZU1vZGVsKHMsZSksIW8pY29udGludWU7aC5wdXNoKG8pLHRoaXMuX2FkZFJlZmVyZW5jZShvLGUpfW89YXx8byxvJiYocj10aGlzLm1vZGVsSWQoby5hdHRyaWJ1dGVzKSwhdnx8IW8uaXNOZXcoKSYmZltyXXx8KHYucHVzaChvKSx5PXl8fCF0aGlzLm1vZGVsc1t3XXx8by5jaWQhPT10aGlzLm1vZGVsc1t3XS5jaWQpLGZbcl09ITApfWlmKGcpe2Zvcih2YXIgdz0wO3c8dGhpcy5sZW5ndGg7dysrKWZbKG89dGhpcy5tb2RlbHNbd10pLmNpZF18fHAucHVzaChvKTtwLmxlbmd0aCYmdGhpcy5fcmVtb3ZlTW9kZWxzKHAsZSl9aWYoaC5sZW5ndGh8fHkpaWYodSYmKGw9ITApLHRoaXMubGVuZ3RoKz1oLmxlbmd0aCxudWxsIT1jKWZvcih2YXIgdz0wO3c8aC5sZW5ndGg7dysrKXRoaXMubW9kZWxzLnNwbGljZShjK3csMCxoW3ddKTtlbHNle3YmJih0aGlzLm1vZGVscy5sZW5ndGg9MCk7Zm9yKHZhciBNPXZ8fGgsdz0wO3c8TS5sZW5ndGg7dysrKXRoaXMubW9kZWxzLnB1c2goTVt3XSl9aWYobCYmdGhpcy5zb3J0KHtzaWxlbnQ6ITB9KSwhZS5zaWxlbnQpe2Zvcih2YXIgUz1udWxsIT1jP24uY2xvbmUoZSk6ZSx3PTA7dzxoLmxlbmd0aDt3KyspbnVsbCE9YyYmKFMuaW5kZXg9Yyt3KSwobz1oW3ddKS50cmlnZ2VyKCJhZGQiLG8sdGhpcyxTKTsobHx8eSkmJnRoaXMudHJpZ2dlcigic29ydCIsdGhpcyxlKSwoaC5sZW5ndGh8fHAubGVuZ3RoKSYmdGhpcy50cmlnZ2VyKCJ1cGRhdGUiLHRoaXMsZSl9cmV0dXJuIGk/dFswXTp0fSxyZXNldDpmdW5jdGlvbih0LGUpe2U9ZT9uLmNsb25lKGUpOnt9O2Zvcih2YXIgaT0wO2k8dGhpcy5tb2RlbHMubGVuZ3RoO2krKyl0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sZSk7cmV0dXJuIGUucHJldmlvdXNNb2RlbHM9dGhpcy5tb2RlbHMsdGhpcy5fcmVzZXQoKSx0PXRoaXMuYWRkKHQsbi5leHRlbmQoe3NpbGVudDohMH0sZSkpLGUuc2lsZW50fHx0aGlzLnRyaWdnZXIoInJlc2V0Iix0aGlzLGUpLHR9LHB1c2g6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hZGQodCxuLmV4dGVuZCh7YXQ6dGhpcy5sZW5ndGh9LGUpKX0scG9wOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYXQodGhpcy5sZW5ndGgtMSk7cmV0dXJuIHRoaXMucmVtb3ZlKGUsdCl9LHVuc2hpZnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hZGQodCxuLmV4dGVuZCh7YXQ6MH0sZSkpfSxzaGlmdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmF0KDApO3JldHVybiB0aGlzLnJlbW92ZShlLHQpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiBvLmFwcGx5KHRoaXMubW9kZWxzLGFyZ3VtZW50cyl9LGdldDpmdW5jdGlvbih0KXtpZihudWxsIT10KXt2YXIgZT10aGlzLm1vZGVsSWQodGhpcy5faXNNb2RlbCh0KT90LmF0dHJpYnV0ZXM6dCk7cmV0dXJuIHRoaXMuX2J5SWRbdF18fHRoaXMuX2J5SWRbZV18fHRoaXMuX2J5SWRbdC5jaWRdfX0sYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MCYmKHQrPXRoaXMubGVuZ3RoKSx0aGlzLm1vZGVsc1t0XX0sd2hlcmU6ZnVuY3Rpb24odCxlKXt2YXIgaT1uLm1hdGNoZXModCk7cmV0dXJuIHRoaXNbZT8iZmluZCI6ImZpbHRlciJdKGZ1bmN0aW9uKHQpe3JldHVybiBpKHQuYXR0cmlidXRlcyl9KX0sZmluZFdoZXJlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLndoZXJlKHQsITApfSxzb3J0OmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmNvbXBhcmF0b3IpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvciIpO3JldHVybiB0fHwodD17fSksbi5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpfHwxPT09dGhpcy5jb21wYXJhdG9yLmxlbmd0aD90aGlzLm1vZGVscz10aGlzLnNvcnRCeSh0aGlzLmNvbXBhcmF0b3IsdGhpcyk6dGhpcy5tb2RlbHMuc29ydChuLmJpbmQodGhpcy5jb21wYXJhdG9yLHRoaXMpKSx0LnNpbGVudHx8dGhpcy50cmlnZ2VyKCJzb3J0Iix0aGlzLHQpLHRoaXN9LHBsdWNrOmZ1bmN0aW9uKHQpe3JldHVybiBuLmludm9rZSh0aGlzLm1vZGVscywiZ2V0Iix0KX0sZmV0Y2g6ZnVuY3Rpb24odCl7dD1uLmV4dGVuZCh7cGFyc2U6ITB9LHQpO3ZhciBlPXQuc3VjY2VzcyxpPXRoaXM7cmV0dXJuIHQuc3VjY2Vzcz1mdW5jdGlvbihuKXt2YXIgcj10LnJlc2V0PyJyZXNldCI6InNldCI7aVtyXShuLHQpLGUmJmUuY2FsbCh0LmNvbnRleHQsaSxuLHQpLGkudHJpZ2dlcigic3luYyIsaSxuLHQpfSxIKHRoaXMsdCksdGhpcy5zeW5jKCJyZWFkIix0aGlzLHQpfSxjcmVhdGU6ZnVuY3Rpb24odCxlKXtlPWU/bi5jbG9uZShlKTp7fTt2YXIgaT1lLndhaXQ7aWYodD10aGlzLl9wcmVwYXJlTW9kZWwodCxlKSwhdClyZXR1cm4hMTtpfHx0aGlzLmFkZCh0LGUpO3ZhciByPXRoaXMsbz1lLnN1Y2Nlc3M7cmV0dXJuIGUuc3VjY2Vzcz1mdW5jdGlvbih0LGUsbil7aSYmci5hZGQodCxuKSxvJiZvLmNhbGwobi5jb250ZXh0LHQsZSxuKX0sdC5zYXZlKG51bGwsZSksdH0scGFyc2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMse21vZGVsOnRoaXMubW9kZWwsY29tcGFyYXRvcjp0aGlzLmNvbXBhcmF0b3J9KX0sbW9kZWxJZDpmdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLm1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZXx8ImlkIl19LF9yZXNldDpmdW5jdGlvbigpe3RoaXMubGVuZ3RoPTAsdGhpcy5tb2RlbHM9W10sdGhpcy5fYnlJZD17fX0sX3ByZXBhcmVNb2RlbDpmdW5jdGlvbih0LGUpe2lmKHRoaXMuX2lzTW9kZWwodCkpcmV0dXJuIHQuY29sbGVjdGlvbnx8KHQuY29sbGVjdGlvbj10aGlzKSx0O2U9ZT9uLmNsb25lKGUpOnt9LGUuY29sbGVjdGlvbj10aGlzO3ZhciBpPW5ldyB0aGlzLm1vZGVsKHQsZSk7cmV0dXJuIGkudmFsaWRhdGlvbkVycm9yPyh0aGlzLnRyaWdnZXIoImludmFsaWQiLHRoaXMsaS52YWxpZGF0aW9uRXJyb3IsZSksITEpOml9LF9yZW1vdmVNb2RlbHM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10saT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcj10aGlzLmdldCh0W2ldKTtpZihyKXt2YXIgbz10aGlzLmluZGV4T2Yocik7dGhpcy5tb2RlbHMuc3BsaWNlKG8sMSksdGhpcy5sZW5ndGgtLSxlLnNpbGVudHx8KGUuaW5kZXg9byxyLnRyaWdnZXIoInJlbW92ZSIscix0aGlzLGUpKSxuLnB1c2gociksdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHIsZSl9fXJldHVybiEhbi5sZW5ndGgmJm59LF9pc01vZGVsOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZ30sX2FkZFJlZmVyZW5jZTpmdW5jdGlvbih0LGUpe3RoaXMuX2J5SWRbdC5jaWRdPXQ7dmFyIG49dGhpcy5tb2RlbElkKHQuYXR0cmlidXRlcyk7bnVsbCE9biYmKHRoaXMuX2J5SWRbbl09dCksdC5vbigiYWxsIix0aGlzLl9vbk1vZGVsRXZlbnQsdGhpcyl9LF9yZW1vdmVSZWZlcmVuY2U6ZnVuY3Rpb24odCxlKXtkZWxldGUgdGhpcy5fYnlJZFt0LmNpZF07dmFyIG49dGhpcy5tb2RlbElkKHQuYXR0cmlidXRlcyk7bnVsbCE9biYmZGVsZXRlIHRoaXMuX2J5SWRbbl0sdGhpcz09PXQuY29sbGVjdGlvbiYmZGVsZXRlIHQuY29sbGVjdGlvbix0Lm9mZigiYWxsIix0aGlzLl9vbk1vZGVsRXZlbnQsdGhpcyl9LF9vbk1vZGVsRXZlbnQ6ZnVuY3Rpb24odCxlLG4saSl7aWYoImFkZCIhPT10JiYicmVtb3ZlIiE9PXR8fG49PT10aGlzKXtpZigiZGVzdHJveSI9PT10JiZ0aGlzLnJlbW92ZShlLGkpLCJjaGFuZ2UiPT09dCl7dmFyIHI9dGhpcy5tb2RlbElkKGUucHJldmlvdXNBdHRyaWJ1dGVzKCkpLG89dGhpcy5tb2RlbElkKGUuYXR0cmlidXRlcyk7ciE9PW8mJihudWxsIT1yJiZkZWxldGUgdGhpcy5fYnlJZFtyXSxudWxsIT1vJiYodGhpcy5fYnlJZFtvXT1lKSl9dGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSk7dmFyIE09e2ZvckVhY2g6MyxlYWNoOjMsbWFwOjMsY29sbGVjdDozLHJlZHVjZTo0LGZvbGRsOjQsaW5qZWN0OjQscmVkdWNlUmlnaHQ6NCxmb2xkcjo0LGZpbmQ6MyxkZXRlY3Q6MyxmaWx0ZXI6MyxzZWxlY3Q6MyxyZWplY3Q6MyxldmVyeTozLGFsbDozLHNvbWU6Myxhbnk6MyxpbmNsdWRlOjIsY29udGFpbnM6MixpbnZva2U6MCxtYXg6MyxtaW46Myx0b0FycmF5OjEsc2l6ZToxLGZpcnN0OjMsaGVhZDozLHRha2U6Myxpbml0aWFsOjMscmVzdDozLHRhaWw6Myxkcm9wOjMsbGFzdDozLHdpdGhvdXQ6MCxkaWZmZXJlbmNlOjAsaW5kZXhPZjozLHNodWZmbGU6MSxsYXN0SW5kZXhPZjozLGlzRW1wdHk6MSxjaGFpbjoxLHNhbXBsZTozLHBhcnRpdGlvbjozfTthKHksTSwibW9kZWxzIik7dmFyIFM9WyJncm91cEJ5IiwiY291bnRCeSIsInNvcnRCeSIsImluZGV4QnkiXTtuLmVhY2goUyxmdW5jdGlvbih0KXtuW3RdJiYoeS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oZSxpKXt2YXIgcj1uLmlzRnVuY3Rpb24oZSk/ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoZSl9O3JldHVybiBuW3RdKHRoaXMubW9kZWxzLHIsaSl9KX0pO3ZhciBUPWUuVmlldz1mdW5jdGlvbih0KXt0aGlzLmNpZD1uLnVuaXF1ZUlkKCJ2aWV3Iiksbi5leHRlbmQodGhpcyxuLnBpY2sodCxMKSksdGhpcy5fZW5zdXJlRWxlbWVudCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGs9L14oXFMrKVxzKiguKikkLyxMPVsibW9kZWwiLCJjb2xsZWN0aW9uIiwiZWwiLCJpZCIsImF0dHJpYnV0ZXMiLCJjbGFzc05hbWUiLCJ0YWdOYW1lIiwiZXZlbnRzIl07bi5leHRlbmQoVC5wcm90b3R5cGUsbCx7dGFnTmFtZToiZGl2IiwkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiRlbC5maW5kKHQpfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW92ZUVsZW1lbnQoKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKSx0aGlzfSxfcmVtb3ZlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZSgpfSxzZXRFbGVtZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSx0aGlzLl9zZXRFbGVtZW50KHQpLHRoaXMuZGVsZWdhdGVFdmVudHMoKSx0aGlzfSxfc2V0RWxlbWVudDpmdW5jdGlvbih0KXt0aGlzLiRlbD10IGluc3RhbmNlb2YgZS4kP3Q6ZS4kKHQpLHRoaXMuZWw9dGhpcy4kZWxbMF19LGRlbGVnYXRlRXZlbnRzOmZ1bmN0aW9uKHQpe2lmKHR8fCh0PW4ucmVzdWx0KHRoaXMsImV2ZW50cyIpKSwhdClyZXR1cm4gdGhpczt0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtmb3IodmFyIGUgaW4gdCl7dmFyIGk9dFtlXTtpZihuLmlzRnVuY3Rpb24oaSl8fChpPXRoaXNbaV0pLGkpe3ZhciByPWUubWF0Y2goayk7dGhpcy5kZWxlZ2F0ZShyWzFdLHJbMl0sbi5iaW5kKGksdGhpcykpfX1yZXR1cm4gdGhpc30sZGVsZWdhdGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLiRlbC5vbih0KyIuZGVsZWdhdGVFdmVudHMiK3RoaXMuY2lkLGUsbiksdGhpc30sdW5kZWxlZ2F0ZUV2ZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbCYmdGhpcy4kZWwub2ZmKCIuZGVsZWdhdGVFdmVudHMiK3RoaXMuY2lkKSx0aGlzfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy4kZWwub2ZmKHQrIi5kZWxlZ2F0ZUV2ZW50cyIrdGhpcy5jaWQsZSxuKSx0aGlzfSxfY3JlYXRlRWxlbWVudDpmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KX0sX2Vuc3VyZUVsZW1lbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmVsKXRoaXMuc2V0RWxlbWVudChuLnJlc3VsdCh0aGlzLCJlbCIpKTtlbHNle3ZhciB0PW4uZXh0ZW5kKHt9LG4ucmVzdWx0KHRoaXMsImF0dHJpYnV0ZXMiKSk7dGhpcy5pZCYmKHQuaWQ9bi5yZXN1bHQodGhpcywiaWQiKSksdGhpcy5jbGFzc05hbWUmJih0WyJjbGFzcyJdPW4ucmVzdWx0KHRoaXMsImNsYXNzTmFtZSIpKSx0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChuLnJlc3VsdCh0aGlzLCJ0YWdOYW1lIikpKSx0aGlzLl9zZXRBdHRyaWJ1dGVzKHQpfX0sX3NldEF0dHJpYnV0ZXM6ZnVuY3Rpb24odCl7dGhpcy4kZWwuYXR0cih0KX19KSxlLnN5bmM9ZnVuY3Rpb24odCxpLHIpe3ZhciBvPXhbdF07bi5kZWZhdWx0cyhyfHwocj17fSkse2VtdWxhdGVIVFRQOmUuZW11bGF0ZUhUVFAsZW11bGF0ZUpTT046ZS5lbXVsYXRlSlNPTn0pO3ZhciBzPXt0eXBlOm8sZGF0YVR5cGU6Impzb24ifTtpZihyLnVybHx8KHMudXJsPW4ucmVzdWx0KGksInVybCIpfHxqKCkpLG51bGwhPXIuZGF0YXx8IWl8fCJjcmVhdGUiIT09dCYmInVwZGF0ZSIhPT10JiYicGF0Y2giIT09dHx8KHMuY29udGVudFR5cGU9ImFwcGxpY2F0aW9uL2pzb24iLHMuZGF0YT1KU09OLnN0cmluZ2lmeShyLmF0dHJzfHxpLnRvSlNPTihyKSkpLHIuZW11bGF0ZUpTT04mJihzLmNvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLHMuZGF0YT1zLmRhdGE/e21vZGVsOnMuZGF0YX06e30pLHIuZW11bGF0ZUhUVFAmJigiUFVUIj09PW98fCJERUxFVEUiPT09b3x8IlBBVENIIj09PW8pKXtzLnR5cGU9IlBPU1QiLHIuZW11bGF0ZUpTT04mJihzLmRhdGEuX21ldGhvZD1vKTt2YXIgYT1yLmJlZm9yZVNlbmQ7ci5iZWZvcmVTZW5kPWZ1bmN0aW9uKHQpe2lmKHQuc2V0UmVxdWVzdEhlYWRlcigiWC1IVFRQLU1ldGhvZC1PdmVycmlkZSIsbyksYSlyZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSJHRVQiPT09cy50eXBlfHxyLmVtdWxhdGVKU09OfHwocy5wcm9jZXNzRGF0YT0hMSk7dmFyIGw9ci5lcnJvcjtyLmVycm9yPWZ1bmN0aW9uKHQsZSxuKXtyLnRleHRTdGF0dXM9ZSxyLmVycm9yVGhyb3duPW4sbCYmbC5jYWxsKHIuY29udGV4dCx0LGUsbil9O3ZhciBjPXIueGhyPWUuYWpheChuLmV4dGVuZChzLHIpKTtyZXR1cm4gaS50cmlnZ2VyKCJyZXF1ZXN0IixpLGMsciksY307dmFyIHg9e2NyZWF0ZToiUE9TVCIsdXBkYXRlOiJQVVQiLHBhdGNoOiJQQVRDSCIsImRlbGV0ZSI6IkRFTEVURSIscmVhZDoiR0VUIn07ZS5hamF4PWZ1bmN0aW9uKCl7cmV0dXJuIGUuJC5hamF4LmFwcGx5KGUuJCxhcmd1bWVudHMpfTt2YXIgQT1lLlJvdXRlcj1mdW5jdGlvbih0KXt0fHwodD17fSksdC5yb3V0ZXMmJih0aGlzLnJvdXRlcz10LnJvdXRlcyksdGhpcy5fYmluZFJvdXRlcygpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEU9L1woKC4qPylcKS9nLEQ9LyhcKFw/KT86XHcrL2csQz0vXCpcdysvZyxZPS9bXC17fVxbXF0rPy4sXFxcXiR8I1xzXS9nO24uZXh0ZW5kKEEucHJvdG90eXBlLGwse2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHJvdXRlOmZ1bmN0aW9uKHQsaSxyKXtuLmlzUmVnRXhwKHQpfHwodD10aGlzLl9yb3V0ZVRvUmVnRXhwKHQpKSxuLmlzRnVuY3Rpb24oaSkmJihyPWksaT0iIikscnx8KHI9dGhpc1tpXSk7dmFyIG89dGhpcztyZXR1cm4gZS5oaXN0b3J5LnJvdXRlKHQsZnVuY3Rpb24obil7dmFyIHM9by5fZXh0cmFjdFBhcmFtZXRlcnModCxuKTtvLmV4ZWN1dGUocixzLGkpIT09ITEmJihvLnRyaWdnZXIuYXBwbHkobyxbInJvdXRlOiIraV0uY29uY2F0KHMpKSxvLnRyaWdnZXIoInJvdXRlIixpLHMpLGUuaGlzdG9yeS50cmlnZ2VyKCJyb3V0ZSIsbyxpLHMpKX0pLHRoaXN9LGV4ZWN1dGU6ZnVuY3Rpb24odCxlLG4pe3QmJnQuYXBwbHkodGhpcyxlKX0sbmF2aWdhdGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5oaXN0b3J5Lm5hdmlnYXRlKHQsbiksdGhpc30sX2JpbmRSb3V0ZXM6ZnVuY3Rpb24oKXtpZih0aGlzLnJvdXRlcyl7dGhpcy5yb3V0ZXM9bi5yZXN1bHQodGhpcywicm91dGVzIik7Zm9yKHZhciB0LGU9bi5rZXlzKHRoaXMucm91dGVzKTtudWxsIT0odD1lLnBvcCgpKTspdGhpcy5yb3V0ZSh0LHRoaXMucm91dGVzW3RdKX19LF9yb3V0ZVRvUmVnRXhwOmZ1bmN0aW9uKHQpe3JldHVybiB0PXQucmVwbGFjZShZLCJcXCQmIikucmVwbGFjZShFLCIoPzokMSk/IikucmVwbGFjZShELGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/dDoiKFteLz9dKykifSkucmVwbGFjZShDLCIoW14/XSo/KSIpLG5ldyBSZWdFeHAoIl4iK3QrIig/OlxcPyhbXFxzXFxTXSopKT8kIil9LF9leHRyYWN0UGFyYW1ldGVyczpmdW5jdGlvbih0LGUpe3ZhciBpPXQuZXhlYyhlKS5zbGljZSgxKTtyZXR1cm4gbi5tYXAoaSxmdW5jdGlvbih0LGUpe3JldHVybiBlPT09aS5sZW5ndGgtMT90fHxudWxsOnQ/ZGVjb2RlVVJJQ29tcG9uZW50KHQpOm51bGx9KX19KTt2YXIgTz1lLkhpc3Rvcnk9ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXJzPVtdLG4uYmluZEFsbCh0aGlzLCJjaGVja1VybCIpLCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiYodGhpcy5sb2NhdGlvbj13aW5kb3cubG9jYXRpb24sdGhpcy5oaXN0b3J5PXdpbmRvdy5oaXN0b3J5KX0sUD0vXlsjXC9dfFxzKyQvZyxOPS9eXC8rfFwvKyQvZyxJPS8jLiokLztPLnN0YXJ0ZWQ9ITEsbi5leHRlbmQoTy5wcm90b3R5cGUsbCx7aW50ZXJ2YWw6NTAsYXRSb290OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlwvXSQvLCIkJi8iKTtyZXR1cm4gdD09PXRoaXMucm9vdCYmIXRoaXMuZ2V0U2VhcmNoKCl9LG1hdGNoUm9vdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSksZT10LnNsaWNlKDAsdGhpcy5yb290Lmxlbmd0aC0xKSsiLyI7cmV0dXJuIGU9PT10aGlzLnJvb3R9LGRlY29kZUZyYWdtZW50OmZ1bmN0aW9uKHQpe3JldHVybiBkZWNvZGVVUkkodC5yZXBsYWNlKC8lMjUvZywiJTI1MjUiKSl9LGdldFNlYXJjaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCIiKS5tYXRjaCgvXD8uKy8pO3JldHVybiB0P3RbMF06IiJ9LGdldEhhc2g6ZnVuY3Rpb24odCl7dmFyIGU9KHR8fHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO3JldHVybiBlP2VbMV06IiJ9LGdldFBhdGg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRlY29kZUZyYWdtZW50KHRoaXMubG9jYXRpb24ucGF0aG5hbWUrdGhpcy5nZXRTZWFyY2goKSkuc2xpY2UodGhpcy5yb290Lmxlbmd0aC0xKTtyZXR1cm4iLyI9PT10LmNoYXJBdCgwKT90LnNsaWNlKDEpOnR9LGdldEZyYWdtZW50OmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10JiYodD10aGlzLl91c2VQdXNoU3RhdGV8fCF0aGlzLl93YW50c0hhc2hDaGFuZ2U/dGhpcy5nZXRQYXRoKCk6dGhpcy5nZXRIYXNoKCkpLHQucmVwbGFjZShQLCIiKX0sc3RhcnQ6ZnVuY3Rpb24odCl7aWYoTy5zdGFydGVkKXRocm93IG5ldyBFcnJvcigiQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQiKTtpZihPLnN0YXJ0ZWQ9ITAsdGhpcy5vcHRpb25zPW4uZXh0ZW5kKHtyb290OiIvIn0sdGhpcy5vcHRpb25zLHQpLHRoaXMucm9vdD10aGlzLm9wdGlvbnMucm9vdCx0aGlzLl93YW50c0hhc2hDaGFuZ2U9dGhpcy5vcHRpb25zLmhhc2hDaGFuZ2UhPT0hMSx0aGlzLl9oYXNIYXNoQ2hhbmdlPSJvbmhhc2hjaGFuZ2UiaW4gd2luZG93LHRoaXMuX3VzZUhhc2hDaGFuZ2U9dGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZ0aGlzLl9oYXNIYXNoQ2hhbmdlLHRoaXMuX3dhbnRzUHVzaFN0YXRlPSEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZSx0aGlzLl9oYXNQdXNoU3RhdGU9ISghdGhpcy5oaXN0b3J5fHwhdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSksdGhpcy5fdXNlUHVzaFN0YXRlPXRoaXMuX3dhbnRzUHVzaFN0YXRlJiZ0aGlzLl9oYXNQdXNoU3RhdGUsdGhpcy5mcmFnbWVudD10aGlzLmdldEZyYWdtZW50KCksdGhpcy5yb290PSgiLyIrdGhpcy5yb290KyIvIikucmVwbGFjZShOLCIvIiksdGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZ0aGlzLl93YW50c1B1c2hTdGF0ZSl7aWYoIXRoaXMuX2hhc1B1c2hTdGF0ZSYmIXRoaXMuYXRSb290KCkpe3ZhciBlPXRoaXMucm9vdC5zbGljZSgwLC0xKXx8Ii8iO3JldHVybiB0aGlzLmxvY2F0aW9uLnJlcGxhY2UoZSsiIyIrdGhpcy5nZXRQYXRoKCkpLCEwfXRoaXMuX2hhc1B1c2hTdGF0ZSYmdGhpcy5hdFJvb3QoKSYmdGhpcy5uYXZpZ2F0ZSh0aGlzLmdldEhhc2goKSx7cmVwbGFjZTohMH0pfWlmKCF0aGlzLl9oYXNIYXNoQ2hhbmdlJiZ0", "base64"));
  res.write(new Buffer("aGlzLl93YW50c0hhc2hDaGFuZ2UmJiF0aGlzLl91c2VQdXNoU3RhdGUpe3RoaXMuaWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLHRoaXMuaWZyYW1lLnNyYz0iamF2YXNjcmlwdDowIix0aGlzLmlmcmFtZS5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLmlmcmFtZS50YWJJbmRleD0tMTt2YXIgaT1kb2N1bWVudC5ib2R5LHI9aS5pbnNlcnRCZWZvcmUodGhpcy5pZnJhbWUsaS5maXJzdENoaWxkKS5jb250ZW50V2luZG93O3IuZG9jdW1lbnQub3BlbigpLHIuZG9jdW1lbnQuY2xvc2UoKSxyLmxvY2F0aW9uLmhhc2g9IiMiK3RoaXMuZnJhZ21lbnR9dmFyIG89d2luZG93LmFkZEV2ZW50TGlzdGVuZXJ8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGF0dGFjaEV2ZW50KCJvbiIrdCxlKX07aWYodGhpcy5fdXNlUHVzaFN0YXRlP28oInBvcHN0YXRlIix0aGlzLmNoZWNrVXJsLCExKTp0aGlzLl91c2VIYXNoQ2hhbmdlJiYhdGhpcy5pZnJhbWU/bygiaGFzaGNoYW5nZSIsdGhpcy5jaGVja1VybCwhMSk6dGhpcy5fd2FudHNIYXNoQ2hhbmdlJiYodGhpcy5fY2hlY2tVcmxJbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLHRoaXMuaW50ZXJ2YWwpKSwhdGhpcy5vcHRpb25zLnNpbGVudClyZXR1cm4gdGhpcy5sb2FkVXJsKCl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcnx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gZGV0YWNoRXZlbnQoIm9uIit0LGUpfTt0aGlzLl91c2VQdXNoU3RhdGU/dCgicG9wc3RhdGUiLHRoaXMuY2hlY2tVcmwsITEpOnRoaXMuX3VzZUhhc2hDaGFuZ2UmJiF0aGlzLmlmcmFtZSYmdCgiaGFzaGNoYW5nZSIsdGhpcy5jaGVja1VybCwhMSksdGhpcy5pZnJhbWUmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKSx0aGlzLmlmcmFtZT1udWxsKSx0aGlzLl9jaGVja1VybEludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLE8uc3RhcnRlZD0hMX0scm91dGU6ZnVuY3Rpb24odCxlKXt0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOnQsY2FsbGJhY2s6ZX0pfSxjaGVja1VybDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEZyYWdtZW50KCk7cmV0dXJuIGU9PT10aGlzLmZyYWdtZW50JiZ0aGlzLmlmcmFtZSYmKGU9dGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpKSxlIT09dGhpcy5mcmFnbWVudCYmKHRoaXMuaWZyYW1lJiZ0aGlzLm5hdmlnYXRlKGUpLHZvaWQgdGhpcy5sb2FkVXJsKCkpfSxsb2FkVXJsOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5tYXRjaFJvb3QoKSYmKHQ9dGhpcy5mcmFnbWVudD10aGlzLmdldEZyYWdtZW50KHQpLG4uYW55KHRoaXMuaGFuZGxlcnMsZnVuY3Rpb24oZSl7aWYoZS5yb3V0ZS50ZXN0KHQpKXJldHVybiBlLmNhbGxiYWNrKHQpLCEwfSkpfSxuYXZpZ2F0ZTpmdW5jdGlvbih0LGUpe2lmKCFPLnN0YXJ0ZWQpcmV0dXJuITE7ZSYmZSE9PSEwfHwoZT17dHJpZ2dlcjohIWV9KSx0PXRoaXMuZ2V0RnJhZ21lbnQodHx8IiIpO3ZhciBuPXRoaXMucm9vdDsiIiE9PXQmJiI/IiE9PXQuY2hhckF0KDApfHwobj1uLnNsaWNlKDAsLTEpfHwiLyIpO3ZhciBpPW4rdDtpZih0PXRoaXMuZGVjb2RlRnJhZ21lbnQodC5yZXBsYWNlKEksIiIpKSx0aGlzLmZyYWdtZW50IT09dCl7aWYodGhpcy5mcmFnbWVudD10LHRoaXMuX3VzZVB1c2hTdGF0ZSl0aGlzLmhpc3RvcnlbZS5yZXBsYWNlPyJyZXBsYWNlU3RhdGUiOiJwdXNoU3RhdGUiXSh7fSxkb2N1bWVudC50aXRsZSxpKTtlbHNle2lmKCF0aGlzLl93YW50c0hhc2hDaGFuZ2UpcmV0dXJuIHRoaXMubG9jYXRpb24uYXNzaWduKGkpO2lmKHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbix0LGUucmVwbGFjZSksdGhpcy5pZnJhbWUmJnQhPT10aGlzLmdldEhhc2godGhpcy5pZnJhbWUuY29udGVudFdpbmRvdykpe3ZhciByPXRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3c7ZS5yZXBsYWNlfHwoci5kb2N1bWVudC5vcGVuKCksci5kb2N1bWVudC5jbG9zZSgpKSx0aGlzLl91cGRhdGVIYXNoKHIubG9jYXRpb24sdCxlLnJlcGxhY2UpfX1yZXR1cm4gZS50cmlnZ2VyP3RoaXMubG9hZFVybCh0KTp2b2lkIDB9fSxfdXBkYXRlSGFzaDpmdW5jdGlvbih0LGUsbil7aWYobil7dmFyIGk9dC5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sIiIpO3QucmVwbGFjZShpKyIjIitlKX1lbHNlIHQuaGFzaD0iIyIrZX19KSxlLmhpc3Rvcnk9bmV3IE87dmFyIFI9ZnVuY3Rpb24odCxlKXt2YXIgaSxyPXRoaXM7aT10JiZuLmhhcyh0LCJjb25zdHJ1Y3RvciIpP3QuY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG4uZXh0ZW5kKGkscixlKTt2YXIgbz1mdW5jdGlvbigpe3RoaXMuY29uc3RydWN0b3I9aX07cmV0dXJuIG8ucHJvdG90eXBlPXIucHJvdG90eXBlLGkucHJvdG90eXBlPW5ldyBvLHQmJm4uZXh0ZW5kKGkucHJvdG90eXBlLHQpLGkuX19zdXBlcl9fPXIucHJvdG90eXBlLGl9O2cuZXh0ZW5kPXkuZXh0ZW5kPUEuZXh0ZW5kPVQuZXh0ZW5kPU8uZXh0ZW5kPVI7dmFyIGo9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoJ0EgInVybCIgcHJvcGVydHkgb3IgZnVuY3Rpb24gbXVzdCBiZSBzcGVjaWZpZWQnKX0sSD1mdW5jdGlvbih0LGUpe3ZhciBuPWUuZXJyb3I7ZS5lcnJvcj1mdW5jdGlvbihpKXtuJiZuLmNhbGwoZS5jb250ZXh0LHQsaSxlKSx0LnRyaWdnZXIoImVycm9yIix0LGksZSl9fTtyZXR1cm4gZX0pfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlLG4pe3QuZXhwb3J0cz1uKCl9KHRoaXMsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSgpe3JldHVybiB0aS5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gaSh0KXt0aT10fWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheXx8IltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBvKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRGF0ZXx8IltvYmplY3QgRGF0ZV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIHModCxlKXt2YXIgbixpPVtdO2ZvcihuPTA7bjx0Lmxlbmd0aDsrK24paS5wdXNoKGUodFtuXSxuKSk7cmV0dXJuIGl9ZnVuY3Rpb24gYSh0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX1mdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciBuIGluIGUpYShlLG4pJiYodFtuXT1lW25dKTtyZXR1cm4gYShlLCJ0b1N0cmluZyIpJiYodC50b1N0cmluZz1lLnRvU3RyaW5nKSxhKGUsInZhbHVlT2YiKSYmKHQudmFsdWVPZj1lLnZhbHVlT2YpLHR9ZnVuY3Rpb24gYyh0LGUsbixpKXtyZXR1cm4gSXQodCxlLG4saSwhMCkudXRjKCl9ZnVuY3Rpb24gdSgpe3JldHVybntlbXB0eTohMSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDohMSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OiExLHVzZXJJbnZhbGlkYXRlZDohMSxpc286ITF9fWZ1bmN0aW9uIGQodCl7cmV0dXJuIG51bGw9PXQuX3BmJiYodC5fcGY9dSgpKSx0Ll9wZn1mdW5jdGlvbiBoKHQpe2lmKG51bGw9PXQuX2lzVmFsaWQpe3ZhciBlPWQodCk7dC5faXNWYWxpZD0hKGlzTmFOKHQuX2QuZ2V0VGltZSgpKXx8IShlLm92ZXJmbG93PDApfHxlLmVtcHR5fHxlLmludmFsaWRNb250aHx8ZS5pbnZhbGlkV2Vla2RheXx8ZS5udWxsSW5wdXR8fGUuaW52YWxpZEZvcm1hdHx8ZS51c2VySW52YWxpZGF0ZWQpLHQuX3N0cmljdCYmKHQuX2lzVmFsaWQ9dC5faXNWYWxpZCYmMD09PWUuY2hhcnNMZWZ0T3ZlciYmMD09PWUudW51c2VkVG9rZW5zLmxlbmd0aCYmdm9pZCAwPT09ZS5iaWdIb3VyKX1yZXR1cm4gdC5faXNWYWxpZH1mdW5jdGlvbiBwKHQpe3ZhciBlPWMoTmFOKTtyZXR1cm4gbnVsbCE9dD9sKGQoZSksdCk6ZChlKS51c2VySW52YWxpZGF0ZWQ9ITAsZX1mdW5jdGlvbiBmKHQpe3JldHVybiB2b2lkIDA9PT10fWZ1bmN0aW9uIG0odCxlKXt2YXIgbixpLHI7aWYoZihlLl9pc0FNb21lbnRPYmplY3QpfHwodC5faXNBTW9tZW50T2JqZWN0PWUuX2lzQU1vbWVudE9iamVjdCksZihlLl9pKXx8KHQuX2k9ZS5faSksZihlLl9mKXx8KHQuX2Y9ZS5fZiksZihlLl9sKXx8KHQuX2w9ZS5fbCksZihlLl9zdHJpY3QpfHwodC5fc3RyaWN0PWUuX3N0cmljdCksZihlLl90em0pfHwodC5fdHptPWUuX3R6bSksZihlLl9pc1VUQyl8fCh0Ll9pc1VUQz1lLl9pc1VUQyksZihlLl9vZmZzZXQpfHwodC5fb2Zmc2V0PWUuX29mZnNldCksZihlLl9wZil8fCh0Ll9wZj1kKGUpKSxmKGUuX2xvY2FsZSl8fCh0Ll9sb2NhbGU9ZS5fbG9jYWxlKSxlaS5sZW5ndGg+MClmb3IobiBpbiBlaSlpPWVpW25dLHI9ZVtpXSxmKHIpfHwodFtpXT1yKTtyZXR1cm4gdH1mdW5jdGlvbiBfKHQpe20odGhpcyx0KSx0aGlzLl9kPW5ldyBEYXRlKG51bGwhPXQuX2Q/dC5fZC5nZXRUaW1lKCk6TmFOKSxuaT09PSExJiYobmk9ITAsZS51cGRhdGVPZmZzZXQodGhpcyksbmk9ITEpfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBffHxudWxsIT10JiZudWxsIT10Ll9pc0FNb21lbnRPYmplY3R9ZnVuY3Rpb24gdih0KXtyZXR1cm4gdDwwP01hdGguY2VpbCh0KTpNYXRoLmZsb29yKHQpfWZ1bmN0aW9uIHkodCl7dmFyIGU9K3Qsbj0wO3JldHVybiAwIT09ZSYmaXNGaW5pdGUoZSkmJihuPXYoZSkpLG59ZnVuY3Rpb24gYih0LGUsbil7dmFyIGkscj1NYXRoLm1pbih0Lmxlbmd0aCxlLmxlbmd0aCksbz1NYXRoLmFicyh0Lmxlbmd0aC1lLmxlbmd0aCkscz0wO2ZvcihpPTA7aTxyO2krKykobiYmdFtpXSE9PWVbaV18fCFuJiZ5KHRbaV0pIT09eShlW2ldKSkmJnMrKztyZXR1cm4gcytvfWZ1bmN0aW9uIHcodCl7ZS5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9PT0hMSYmInVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybigiRGVwcmVjYXRpb24gd2FybmluZzogIit0KX1mdW5jdGlvbiBNKHQsZSl7dmFyIG49ITA7cmV0dXJuIGwoZnVuY3Rpb24oKXtyZXR1cm4gbiYmKHcodCsiXG5Bcmd1bWVudHM6ICIrQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsICIpKyJcbiIrKG5ldyBFcnJvcikuc3RhY2spLG49ITEpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlKX1mdW5jdGlvbiBTKHQsZSl7aWlbdF18fCh3KGUpLGlpW3RdPSEwKX1mdW5jdGlvbiBUKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb258fCJbb2JqZWN0IEZ1bmN0aW9uXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZnVuY3Rpb24gayh0KXtyZXR1cm4iW29iamVjdCBPYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBMKHQpe3ZhciBlLG47Zm9yKG4gaW4gdCllPXRbbl0sVChlKT90aGlzW25dPWU6dGhpc1siXyIrbl09ZTt0aGlzLl9jb25maWc9dCx0aGlzLl9vcmRpbmFsUGFyc2VMZW5pZW50PW5ldyBSZWdFeHAodGhpcy5fb3JkaW5hbFBhcnNlLnNvdXJjZSsifCIrL1xkezEsMn0vLnNvdXJjZSl9ZnVuY3Rpb24geCh0LGUpe3ZhciBuLGk9bCh7fSx0KTtmb3IobiBpbiBlKWEoZSxuKSYmKGsodFtuXSkmJmsoZVtuXSk/KGlbbl09e30sbChpW25dLHRbbl0pLGwoaVtuXSxlW25dKSk6bnVsbCE9ZVtuXT9pW25dPWVbbl06ZGVsZXRlIGlbbl0pO3JldHVybiBpfWZ1bmN0aW9uIEEodCl7bnVsbCE9dCYmdGhpcy5zZXQodCl9ZnVuY3Rpb24gRSh0KXtyZXR1cm4gdD90LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgiXyIsIi0iKTp0fWZ1bmN0aW9uIEQodCl7Zm9yKHZhciBlLG4saSxyLG89MDtvPHQubGVuZ3RoOyl7Zm9yKHI9RSh0W29dKS5zcGxpdCgiLSIpLGU9ci5sZW5ndGgsbj1FKHRbbysxXSksbj1uP24uc3BsaXQoIi0iKTpudWxsO2U+MDspe2lmKGk9QyhyLnNsaWNlKDAsZSkuam9pbigiLSIpKSlyZXR1cm4gaTtpZihuJiZuLmxlbmd0aD49ZSYmYihyLG4sITApPj1lLTEpYnJlYWs7ZS0tfW8rK31yZXR1cm4gbnVsbH1mdW5jdGlvbiBDKGUpe3ZhciBpPW51bGw7aWYoIW9pW2VdJiYidW5kZWZpbmVkIiE9dHlwZW9mIHQmJnQmJnQuZXhwb3J0cyl0cnl7aT1yaS5fYWJicixuKDM2MykoIi4vIitlKSxZKGkpfWNhdGNoKHIpe31yZXR1cm4gb2lbZV19ZnVuY3Rpb24gWSh0LGUpe3ZhciBuO3JldHVybiB0JiYobj1mKGUpP04odCk6Tyh0LGUpLG4mJihyaT1uKSkscmkuX2FiYnJ9ZnVuY3Rpb24gTyh0LGUpe3JldHVybiBudWxsIT09ZT8oZS5hYmJyPXQsbnVsbCE9b2lbdF0/KFMoImRlZmluZUxvY2FsZU92ZXJyaWRlIiwidXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlIiksZT14KG9pW3RdLl9jb25maWcsZSkpOm51bGwhPWUucGFyZW50TG9jYWxlJiYobnVsbCE9b2lbZS5wYXJlbnRMb2NhbGVdP2U9eChvaVtlLnBhcmVudExvY2FsZV0uX2NvbmZpZyxlKTpTKCJwYXJlbnRMb2NhbGVVbmRlZmluZWQiLCJzcGVjaWZpZWQgcGFyZW50TG9jYWxlIGlzIG5vdCBkZWZpbmVkIHlldCIpKSxvaVt0XT1uZXcgQShlKSxZKHQpLG9pW3RdKTooZGVsZXRlIG9pW3RdLG51bGwpfWZ1bmN0aW9uIFAodCxlKXtpZihudWxsIT1lKXt2YXIgbjtudWxsIT1vaVt0XSYmKGU9eChvaVt0XS5fY29uZmlnLGUpKSxuPW5ldyBBKGUpLG4ucGFyZW50TG9jYWxlPW9pW3RdLG9pW3RdPW4sWSh0KX1lbHNlIG51bGwhPW9pW3RdJiYobnVsbCE9b2lbdF0ucGFyZW50TG9jYWxlP29pW3RdPW9pW3RdLnBhcmVudExvY2FsZTpudWxsIT1vaVt0XSYmZGVsZXRlIG9pW3RdKTtyZXR1cm4gb2lbdF19ZnVuY3Rpb24gTih0KXt2YXIgZTtpZih0JiZ0Ll9sb2NhbGUmJnQuX2xvY2FsZS5fYWJiciYmKHQ9dC5fbG9jYWxlLl9hYmJyKSwhdClyZXR1cm4gcmk7aWYoIXIodCkpe2lmKGU9Qyh0KSlyZXR1cm4gZTt0PVt0XX1yZXR1cm4gRCh0KX1mdW5jdGlvbiBJKCl7cmV0dXJuIE9iamVjdC5rZXlzKG9pKX1mdW5jdGlvbiBSKHQsZSl7dmFyIG49dC50b0xvd2VyQ2FzZSgpO3NpW25dPXNpW24rInMiXT1zaVtlXT10fWZ1bmN0aW9uIGoodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3NpW3RdfHxzaVt0LnRvTG93ZXJDYXNlKCldOnZvaWQgMH1mdW5jdGlvbiBIKHQpe3ZhciBlLG4saT17fTtmb3IobiBpbiB0KWEodCxuKSYmKGU9aihuKSxlJiYoaVtlXT10W25dKSk7cmV0dXJuIGl9ZnVuY3Rpb24gRih0LG4pe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gbnVsbCE9aT8oVSh0aGlzLHQsaSksZS51cGRhdGVPZmZzZXQodGhpcyxuKSx0aGlzKTp6KHRoaXMsdCl9fWZ1bmN0aW9uIHoodCxlKXtyZXR1cm4gdC5pc1ZhbGlkKCk/dC5fZFsiZ2V0IisodC5faXNVVEM/IlVUQyI6IiIpK2VdKCk6TmFOfWZ1bmN0aW9uIFUodCxlLG4pe3QuaXNWYWxpZCgpJiZ0Ll9kWyJzZXQiKyh0Ll9pc1VUQz8iVVRDIjoiIikrZV0obil9ZnVuY3Rpb24gVyh0LGUpe3ZhciBuO2lmKCJvYmplY3QiPT10eXBlb2YgdClmb3IobiBpbiB0KXRoaXMuc2V0KG4sdFtuXSk7ZWxzZSBpZih0PWoodCksVCh0aGlzW3RdKSlyZXR1cm4gdGhpc1t0XShlKTtyZXR1cm4gdGhpc31mdW5jdGlvbiBCKHQsZSxuKXt2YXIgaT0iIitNYXRoLmFicyh0KSxyPWUtaS5sZW5ndGgsbz10Pj0wO3JldHVybihvP24/IisiOiIiOiItIikrTWF0aC5wb3coMTAsTWF0aC5tYXgoMCxyKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkraX1mdW5jdGlvbiBWKHQsZSxuLGkpe3ZhciByPWk7InN0cmluZyI9PXR5cGVvZiBpJiYocj1mdW5jdGlvbigpe3JldHVybiB0aGlzW2ldKCl9KSx0JiYodWlbdF09ciksZSYmKHVpW2VbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIEIoci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZVsxXSxlWzJdKX0pLG4mJih1aVtuXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKHIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQpfSl9ZnVuY3Rpb24gcSh0KXtyZXR1cm4gdC5tYXRjaCgvXFtbXHNcU10vKT90LnJlcGxhY2UoL15cW3xcXSQvZywiIik6dC5yZXBsYWNlKC9cXC9nLCIiKX1mdW5jdGlvbiAkKHQpe3ZhciBlLG4saT10Lm1hdGNoKGFpKTtmb3IoZT0wLG49aS5sZW5ndGg7ZTxuO2UrKyl1aVtpW2VdXT9pW2VdPXVpW2lbZV1dOmlbZV09cShpW2VdKTtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89IiI7Zm9yKGU9MDtlPG47ZSsrKW8rPWlbZV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2lbZV0uY2FsbChyLHQpOmlbZV07cmV0dXJuIG99fWZ1bmN0aW9uIEcodCxlKXtyZXR1cm4gdC5pc1ZhbGlkKCk/KGU9SyhlLHQubG9jYWxlRGF0YSgpKSxjaVtlXT1jaVtlXXx8JChlKSxjaVtlXSh0KSk6dC5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKX1mdW5jdGlvbiBLKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZS5sb25nRGF0ZUZvcm1hdCh0KXx8dH12YXIgaT01O2ZvcihsaS5sYXN0SW5kZXg9MDtpPj0wJiZsaS50ZXN0KHQpOyl0PXQucmVwbGFjZShsaSxuKSxsaS5sYXN0SW5kZXg9MCxpLT0xO3JldHVybiB0fWZ1bmN0aW9uIEoodCxlLG4pe0FpW3RdPVQoZSk/ZTpmdW5jdGlvbih0LGkpe3JldHVybiB0JiZuP246ZX19ZnVuY3Rpb24gWCh0LGUpe3JldHVybiBhKEFpLHQpP0FpW3RdKGUuX3N0cmljdCxlLl9sb2NhbGUpOm5ldyBSZWdFeHAoUSh0KSl9ZnVuY3Rpb24gUSh0KXtyZXR1cm4gWih0LnJlcGxhY2UoIlxcIiwiIikucmVwbGFjZSgvXFwoXFspfFxcKFxdKXxcWyhbXlxdXFtdKilcXXxcXCguKS9nLGZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuIGV8fG58fGl8fHJ9KSl9ZnVuY3Rpb24gWih0KXtyZXR1cm4gdC5yZXBsYWNlKC9bLVwvXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpfWZ1bmN0aW9uIHR0KHQsZSl7dmFyIG4saT1lO2Zvcigic3RyaW5nIj09dHlwZW9mIHQmJih0PVt0XSksIm51bWJlciI9PXR5cGVvZiBlJiYoaT1mdW5jdGlvbih0LG4pe25bZV09eSh0KX0pLG49MDtuPHQubGVuZ3RoO24rKylFaVt0W25dXT1pfWZ1bmN0aW9uIGV0KHQsZSl7dHQodCxmdW5jdGlvbih0LG4saSxyKXtpLl93PWkuX3d8fHt9LGUodCxpLl93LGkscil9KX1mdW5jdGlvbiBudCh0LGUsbil7bnVsbCE9ZSYmYShFaSx0KSYmRWlbdF0oZSxuLl9hLG4sdCl9ZnVuY3Rpb24gaXQodCxlKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEModCxlKzEsMCkpLmdldFVUQ0RhdGUoKX1mdW5jdGlvbiBydCh0LGUpe3JldHVybiByKHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW3QubW9udGgoKV06dGhpcy5fbW9udGhzW0hpLnRlc3QoZSk/ImZvcm1hdCI6InN0YW5kYWxvbmUiXVt0Lm1vbnRoKCldfWZ1bmN0aW9uIG90KHQsZSl7cmV0dXJuIHIodGhpcy5fbW9udGhzU2hvcnQpP3RoaXMuX21vbnRoc1Nob3J0W3QubW9udGgoKV06dGhpcy5fbW9udGhzU2hvcnRbSGkudGVzdChlKT8iZm9ybWF0Ijoic3RhbmRhbG9uZSJdW3QubW9udGgoKV19ZnVuY3Rpb24gc3QodCxlLG4pe3ZhciBpLHIsbztmb3IodGhpcy5fbW9udGhzUGFyc2V8fCh0aGlzLl9tb250aHNQYXJzZT1bXSx0aGlzLl9sb25nTW9udGhzUGFyc2U9W10sdGhpcy5fc2hvcnRNb250aHNQYXJzZT1bXSksaT0wO2k8MTI7aSsrKXtpZihyPWMoWzJlMyxpXSksbiYmIXRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSYmKHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKCJeIit0aGlzLm1vbnRocyhyLCIiKS5yZXBsYWNlKCIuIiwiIikrIiQiLCJpIiksdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKCJeIit0aGlzLm1vbnRoc1Nob3J0KHIsIiIpLnJlcGxhY2UoIi4iLCIiKSsiJCIsImkiKSksbnx8dGhpcy5fbW9udGhzUGFyc2VbaV18fChvPSJeIit0aGlzLm1vbnRocyhyLCIiKSsifF4iK3RoaXMubW9udGhzU2hvcnQociwiIiksdGhpcy5fbW9udGhzUGFyc2VbaV09bmV3IFJlZ0V4cChvLnJlcGxhY2UoIi4iLCIiKSwiaSIpKSxuJiYiTU1NTSI9PT1lJiZ0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0udGVzdCh0KSlyZXR1cm4gaTtpZihuJiYiTU1NIj09PWUmJnRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0udGVzdCh0KSlyZXR1cm4gaTtpZighbiYmdGhpcy5fbW9udGhzUGFyc2VbaV0udGVzdCh0KSlyZXR1cm4gaX19ZnVuY3Rpb24gYXQodCxlKXt2YXIgbjtpZighdC5pc1ZhbGlkKCkpcmV0dXJuIHQ7aWYoInN0cmluZyI9PXR5cGVvZiBlKWlmKC9eXGQrJC8udGVzdChlKSllPXkoZSk7ZWxzZSBpZihlPXQubG9jYWxlRGF0YSgpLm1vbnRoc1BhcnNlKGUpLCJudW1iZXIiIT10eXBlb2YgZSlyZXR1cm4gdDtyZXR1cm4gbj1NYXRoLm1pbih0LmRhdGUoKSxpdCh0LnllYXIoKSxlKSksdC5fZFsic2V0IisodC5faXNVVEM/IlVUQyI6IiIpKyJNb250aCJdKGUsbiksdH1mdW5jdGlvbiBsdCh0KXtyZXR1cm4gbnVsbCE9dD8oYXQodGhpcyx0KSxlLnVwZGF0ZU9mZnNldCh0aGlzLCEwKSx0aGlzKTp6KHRoaXMsIk1vbnRoIil9ZnVuY3Rpb24gY3QoKXtyZXR1cm4gaXQodGhpcy55ZWFyKCksdGhpcy5tb250aCgpKX1mdW5jdGlvbiB1dCh0KXtyZXR1cm4gdGhpcy5fbW9udGhzUGFyc2VFeGFjdD8oYSh0aGlzLCJfbW9udGhzUmVnZXgiKXx8aHQuY2FsbCh0aGlzKSx0P3RoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzU2hvcnRSZWdleCk6dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCYmdD90aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1Nob3J0UmVnZXh9ZnVuY3Rpb24gZHQodCl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KGEodGhpcywiX21vbnRoc1JlZ2V4Iil8fGh0LmNhbGwodGhpcyksdD90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleCk6dGhpcy5fbW9udGhzU3RyaWN0UmVnZXgmJnQ/dGhpcy5fbW9udGhzU3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzUmVnZXh9ZnVuY3Rpb24gaHQoKXtmdW5jdGlvbiB0KHQsZSl7cmV0dXJuIGUubGVuZ3RoLXQubGVuZ3RofXZhciBlLG4saT1bXSxyPVtdLG89W107Zm9yKGU9MDtlPDEyO2UrKyluPWMoWzJlMyxlXSksaS5wdXNoKHRoaXMubW9udGhzU2hvcnQobiwiIikpLHIucHVzaCh0aGlzLm1vbnRocyhuLCIiKSksby5wdXNoKHRoaXMubW9udGhzKG4sIiIpKSxvLnB1c2godGhpcy5tb250aHNTaG9ydChuLCIiKSk7Zm9yKGkuc29ydCh0KSxyLnNvcnQodCksby5zb3J0KHQpLGU9MDtlPDEyO2UrKylpW2VdPVooaVtlXSkscltlXT1aKHJbZV0pLG9bZV09WihvW2VdKTt0aGlzLl9tb250aHNSZWdleD1uZXcgUmVnRXhwKCJeKCIrby5qb2luKCJ8IikrIikiLCJpIiksdGhpcy5fbW9udGhzU2hvcnRSZWdleD10aGlzLl9tb250aHNSZWdleCx0aGlzLl9tb250aHNTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCJeKCIrci5qb2luKCJ8IikrIikkIiwiaSIpLHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cCgiXigiK2kuam9pbigifCIpKyIpJCIsImkiKX1mdW5jdGlvbiBwdCh0KXt2YXIgZSxuPXQuX2E7cmV0dXJuIG4mJmQodCkub3ZlcmZsb3c9PT0tMiYmKGU9bltDaV08MHx8bltDaV0+MTE/Q2k6bltZaV08MXx8bltZaV0+aXQobltEaV0sbltDaV0pP1lpOm5bT2ldPDB8fG5bT2ldPjI0fHwyND09PW5bT2ldJiYoMCE9PW5bUGldfHwwIT09bltOaV18fDAhPT1uW0lpXSk/T2k6bltQaV08MHx8bltQaV0+NTk/UGk6bltOaV08MHx8bltOaV0+NTk/Tmk6bltJaV08MHx8bltJaV0+OTk5P0lpOi0xLGQodCkuX292ZXJmbG93RGF5T2ZZZWFyJiYoZTxEaXx8ZT5ZaSkmJihlPVlpKSxkKHQpLl9vdmVyZmxvd1dlZWtzJiZlPT09LTEmJihlPVJpKSxkKHQpLl9vdmVyZmxvd1dlZWtkYXkmJmU9PT0tMSYmKGU9amkpLGQodCkub3ZlcmZsb3c9ZSksdH1mdW5jdGlvbiBmdCh0KXt2YXIgZSxuLGkscixvLHMsYT10Ll9pLGw9QmkuZXhlYyhhKXx8VmkuZXhlYyhhKTtpZihsKXtmb3IoZCh0KS5pc289ITAsZT0wLG49JGkubGVuZ3RoO2U8bjtlKyspaWYoJGlbZV1bMV0uZXhlYyhsWzFdKSl7cj0kaVtlXVswXSxpPSRpW2VdWzJdIT09ITE7YnJlYWt9aWYobnVsbD09cilyZXR1cm4gdm9pZCh0Ll9pc1ZhbGlkPSExKTtpZihsWzNdKXtmb3IoZT0wLG49R2kubGVuZ3RoO2U8bjtlKyspaWYoR2lbZV1bMV0uZXhlYyhsWzNdKSl7bz0obFsyXXx8IiAiKStHaVtlXVswXTticmVha31pZihudWxsPT1vKXJldHVybiB2b2lkKHQuX2lzVmFsaWQ9ITEpfWlmKCFpJiZudWxsIT1vKXJldHVybiB2b2lkKHQuX2lzVmFsaWQ9ITEpO2lmKGxbNF0pe2lmKCFxaS5leGVjKGxbNF0pKXJldHVybiB2b2lkKHQuX2lzVmFsaWQ9ITEpO3M9IloifXQuX2Y9cisob3x8IiIpKyhzfHwiIiksRXQodCl9ZWxzZSB0Ll9pc1ZhbGlkPSExfWZ1bmN0aW9uIG10KHQpe3ZhciBuPUtpLmV4ZWModC5faSk7cmV0dXJuIG51bGwhPT1uP3ZvaWQodC5fZD1uZXcgRGF0ZSgoK25bMV0pKSk6KGZ0KHQpLHZvaWQodC5faXNWYWxpZD09PSExJiYoZGVsZXRlIHQuX2lzVmFsaWQsZS5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayh0KSkpKX1mdW5jdGlvbiBfdCh0LGUsbixpLHIsbyxzKXt2YXIgYT1uZXcgRGF0ZSh0LGUsbixpLHIsbyxzKTtyZXR1cm4gdDwxMDAmJnQ+PTAmJmlzRmluaXRlKGEuZ2V0RnVsbFllYXIoKSkmJmEuc2V0RnVsbFllYXIodCksYX1mdW5jdGlvbiBndCh0KXt2YXIgZT1uZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLGFyZ3VtZW50cykpO3JldHVybiB0PDEwMCYmdD49MCYmaXNGaW5pdGUoZS5nZXRVVENGdWxsWWVhcigpKSYmZS5zZXRVVENGdWxsWWVhcih0KSxlfWZ1bmN0aW9uIHZ0KHQpe3JldHVybiB5dCh0KT8zNjY6MzY1OwoJfWZ1bmN0aW9uIHl0KHQpe3JldHVybiB0JTQ9PT0wJiZ0JTEwMCE9PTB8fHQlNDAwPT09", "base64"));
  res.write(new Buffer("MH1mdW5jdGlvbiBidCgpe3JldHVybiB5dCh0aGlzLnllYXIoKSl9ZnVuY3Rpb24gd3QodCxlLG4pe3ZhciBpPTcrZS1uLHI9KDcrZ3QodCwwLGkpLmdldFVUQ0RheSgpLWUpJTc7cmV0dXJuLXIraS0xfWZ1bmN0aW9uIE10KHQsZSxuLGkscil7dmFyIG8scyxhPSg3K24taSklNyxsPXd0KHQsaSxyKSxjPTErNyooZS0xKSthK2w7cmV0dXJuIGM8PTA/KG89dC0xLHM9dnQobykrYyk6Yz52dCh0KT8obz10KzEscz1jLXZ0KHQpKToobz10LHM9Yykse3llYXI6byxkYXlPZlllYXI6c319ZnVuY3Rpb24gU3QodCxlLG4pe3ZhciBpLHIsbz13dCh0LnllYXIoKSxlLG4pLHM9TWF0aC5mbG9vcigodC5kYXlPZlllYXIoKS1vLTEpLzcpKzE7cmV0dXJuIHM8MT8ocj10LnllYXIoKS0xLGk9cytUdChyLGUsbikpOnM+VHQodC55ZWFyKCksZSxuKT8oaT1zLVR0KHQueWVhcigpLGUsbikscj10LnllYXIoKSsxKToocj10LnllYXIoKSxpPXMpLHt3ZWVrOmkseWVhcjpyfX1mdW5jdGlvbiBUdCh0LGUsbil7dmFyIGk9d3QodCxlLG4pLHI9d3QodCsxLGUsbik7cmV0dXJuKHZ0KHQpLWkrcikvN31mdW5jdGlvbiBrdCh0LGUsbil7cmV0dXJuIG51bGwhPXQ/dDpudWxsIT1lP2U6bn1mdW5jdGlvbiBMdCh0KXt2YXIgbj1uZXcgRGF0ZShlLm5vdygpKTtyZXR1cm4gdC5fdXNlVVRDP1tuLmdldFVUQ0Z1bGxZZWFyKCksbi5nZXRVVENNb250aCgpLG4uZ2V0VVRDRGF0ZSgpXTpbbi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSxuLmdldERhdGUoKV19ZnVuY3Rpb24geHQodCl7dmFyIGUsbixpLHIsbz1bXTtpZighdC5fZCl7Zm9yKGk9THQodCksdC5fdyYmbnVsbD09dC5fYVtZaV0mJm51bGw9PXQuX2FbQ2ldJiZBdCh0KSx0Ll9kYXlPZlllYXImJihyPWt0KHQuX2FbRGldLGlbRGldKSx0Ll9kYXlPZlllYXI+dnQocikmJihkKHQpLl9vdmVyZmxvd0RheU9mWWVhcj0hMCksbj1ndChyLDAsdC5fZGF5T2ZZZWFyKSx0Ll9hW0NpXT1uLmdldFVUQ01vbnRoKCksdC5fYVtZaV09bi5nZXRVVENEYXRlKCkpLGU9MDtlPDMmJm51bGw9PXQuX2FbZV07KytlKXQuX2FbZV09b1tlXT1pW2VdO2Zvcig7ZTw3O2UrKyl0Ll9hW2VdPW9bZV09bnVsbD09dC5fYVtlXT8yPT09ZT8xOjA6dC5fYVtlXTsyND09PXQuX2FbT2ldJiYwPT09dC5fYVtQaV0mJjA9PT10Ll9hW05pXSYmMD09PXQuX2FbSWldJiYodC5fbmV4dERheT0hMCx0Ll9hW09pXT0wKSx0Ll9kPSh0Ll91c2VVVEM/Z3Q6X3QpLmFwcGx5KG51bGwsbyksbnVsbCE9dC5fdHptJiZ0Ll9kLnNldFVUQ01pbnV0ZXModC5fZC5nZXRVVENNaW51dGVzKCktdC5fdHptKSx0Ll9uZXh0RGF5JiYodC5fYVtPaV09MjQpfX1mdW5jdGlvbiBBdCh0KXt2YXIgZSxuLGkscixvLHMsYSxsO2U9dC5fdyxudWxsIT1lLkdHfHxudWxsIT1lLld8fG51bGwhPWUuRT8obz0xLHM9NCxuPWt0KGUuR0csdC5fYVtEaV0sU3QoUnQoKSwxLDQpLnllYXIpLGk9a3QoZS5XLDEpLHI9a3QoZS5FLDEpLChyPDF8fHI+NykmJihsPSEwKSk6KG89dC5fbG9jYWxlLl93ZWVrLmRvdyxzPXQuX2xvY2FsZS5fd2Vlay5kb3ksbj1rdChlLmdnLHQuX2FbRGldLFN0KFJ0KCksbyxzKS55ZWFyKSxpPWt0KGUudywxKSxudWxsIT1lLmQ/KHI9ZS5kLChyPDB8fHI+NikmJihsPSEwKSk6bnVsbCE9ZS5lPyhyPWUuZStvLChlLmU8MHx8ZS5lPjYpJiYobD0hMCkpOnI9byksaTwxfHxpPlR0KG4sbyxzKT9kKHQpLl9vdmVyZmxvd1dlZWtzPSEwOm51bGwhPWw/ZCh0KS5fb3ZlcmZsb3dXZWVrZGF5PSEwOihhPU10KG4saSxyLG8scyksdC5fYVtEaV09YS55ZWFyLHQuX2RheU9mWWVhcj1hLmRheU9mWWVhcil9ZnVuY3Rpb24gRXQodCl7aWYodC5fZj09PWUuSVNPXzg2MDEpcmV0dXJuIHZvaWQgZnQodCk7dC5fYT1bXSxkKHQpLmVtcHR5PSEwO3ZhciBuLGkscixvLHMsYT0iIit0Ll9pLGw9YS5sZW5ndGgsYz0wO2ZvcihyPUsodC5fZix0Ll9sb2NhbGUpLm1hdGNoKGFpKXx8W10sbj0wO248ci5sZW5ndGg7bisrKW89cltuXSxpPShhLm1hdGNoKFgobyx0KSl8fFtdKVswXSxpJiYocz1hLnN1YnN0cigwLGEuaW5kZXhPZihpKSkscy5sZW5ndGg+MCYmZCh0KS51bnVzZWRJbnB1dC5wdXNoKHMpLGE9YS5zbGljZShhLmluZGV4T2YoaSkraS5sZW5ndGgpLGMrPWkubGVuZ3RoKSx1aVtvXT8oaT9kKHQpLmVtcHR5PSExOmQodCkudW51c2VkVG9rZW5zLnB1c2gobyksbnQobyxpLHQpKTp0Ll9zdHJpY3QmJiFpJiZkKHQpLnVudXNlZFRva2Vucy5wdXNoKG8pO2QodCkuY2hhcnNMZWZ0T3Zlcj1sLWMsYS5sZW5ndGg+MCYmZCh0KS51bnVzZWRJbnB1dC5wdXNoKGEpLGQodCkuYmlnSG91cj09PSEwJiZ0Ll9hW09pXTw9MTImJnQuX2FbT2ldPjAmJihkKHQpLmJpZ0hvdXI9dm9pZCAwKSx0Ll9hW09pXT1EdCh0Ll9sb2NhbGUsdC5fYVtPaV0sdC5fbWVyaWRpZW0pLHh0KHQpLHB0KHQpfWZ1bmN0aW9uIER0KHQsZSxuKXt2YXIgaTtyZXR1cm4gbnVsbD09bj9lOm51bGwhPXQubWVyaWRpZW1Ib3VyP3QubWVyaWRpZW1Ib3VyKGUsbik6bnVsbCE9dC5pc1BNPyhpPXQuaXNQTShuKSxpJiZlPDEyJiYoZSs9MTIpLGl8fDEyIT09ZXx8KGU9MCksZSk6ZX1mdW5jdGlvbiBDdCh0KXt2YXIgZSxuLGkscixvO2lmKDA9PT10Ll9mLmxlbmd0aClyZXR1cm4gZCh0KS5pbnZhbGlkRm9ybWF0PSEwLHZvaWQodC5fZD1uZXcgRGF0ZShOYU4pKTtmb3Iocj0wO3I8dC5fZi5sZW5ndGg7cisrKW89MCxlPW0oe30sdCksbnVsbCE9dC5fdXNlVVRDJiYoZS5fdXNlVVRDPXQuX3VzZVVUQyksZS5fZj10Ll9mW3JdLEV0KGUpLGgoZSkmJihvKz1kKGUpLmNoYXJzTGVmdE92ZXIsbys9MTAqZChlKS51bnVzZWRUb2tlbnMubGVuZ3RoLGQoZSkuc2NvcmU9bywobnVsbD09aXx8bzxpKSYmKGk9byxuPWUpKTtsKHQsbnx8ZSl9ZnVuY3Rpb24gWXQodCl7aWYoIXQuX2Qpe3ZhciBlPUgodC5faSk7dC5fYT1zKFtlLnllYXIsZS5tb250aCxlLmRheXx8ZS5kYXRlLGUuaG91cixlLm1pbnV0ZSxlLnNlY29uZCxlLm1pbGxpc2Vjb25kXSxmdW5jdGlvbih0KXtyZXR1cm4gdCYmcGFyc2VJbnQodCwxMCl9KSx4dCh0KX19ZnVuY3Rpb24gT3QodCl7dmFyIGU9bmV3IF8ocHQoUHQodCkpKTtyZXR1cm4gZS5fbmV4dERheSYmKGUuYWRkKDEsImQiKSxlLl9uZXh0RGF5PXZvaWQgMCksZX1mdW5jdGlvbiBQdCh0KXt2YXIgZT10Ll9pLG49dC5fZjtyZXR1cm4gdC5fbG9jYWxlPXQuX2xvY2FsZXx8Tih0Ll9sKSxudWxsPT09ZXx8dm9pZCAwPT09biYmIiI9PT1lP3Aoe251bGxJbnB1dDohMH0pOigic3RyaW5nIj09dHlwZW9mIGUmJih0Ll9pPWU9dC5fbG9jYWxlLnByZXBhcnNlKGUpKSxnKGUpP25ldyBfKHB0KGUpKToocihuKT9DdCh0KTpuP0V0KHQpOm8oZSk/dC5fZD1lOk50KHQpLGgodCl8fCh0Ll9kPW51bGwpLHQpKX1mdW5jdGlvbiBOdCh0KXt2YXIgbj10Ll9pO3ZvaWQgMD09PW4/dC5fZD1uZXcgRGF0ZShlLm5vdygpKTpvKG4pP3QuX2Q9bmV3IERhdGUoKCtuKSk6InN0cmluZyI9PXR5cGVvZiBuP210KHQpOnIobik/KHQuX2E9cyhuLnNsaWNlKDApLGZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX0pLHh0KHQpKToib2JqZWN0Ij09dHlwZW9mIG4/WXQodCk6Im51bWJlciI9PXR5cGVvZiBuP3QuX2Q9bmV3IERhdGUobik6ZS5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayh0KX1mdW5jdGlvbiBJdCh0LGUsbixpLHIpe3ZhciBvPXt9O3JldHVybiJib29sZWFuIj09dHlwZW9mIG4mJihpPW4sbj12b2lkIDApLG8uX2lzQU1vbWVudE9iamVjdD0hMCxvLl91c2VVVEM9by5faXNVVEM9cixvLl9sPW4sby5faT10LG8uX2Y9ZSxvLl9zdHJpY3Q9aSxPdChvKX1mdW5jdGlvbiBSdCh0LGUsbixpKXtyZXR1cm4gSXQodCxlLG4saSwhMSl9ZnVuY3Rpb24ganQodCxlKXt2YXIgbixpO2lmKDE9PT1lLmxlbmd0aCYmcihlWzBdKSYmKGU9ZVswXSksIWUubGVuZ3RoKXJldHVybiBSdCgpO2ZvcihuPWVbMF0saT0xO2k8ZS5sZW5ndGg7KytpKWVbaV0uaXNWYWxpZCgpJiYhZVtpXVt0XShuKXx8KG49ZVtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gSHQoKXt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4ganQoImlzQmVmb3JlIix0KX1mdW5jdGlvbiBGdCgpe3ZhciB0PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBqdCgiaXNBZnRlciIsdCl9ZnVuY3Rpb24genQodCl7dmFyIGU9SCh0KSxuPWUueWVhcnx8MCxpPWUucXVhcnRlcnx8MCxyPWUubW9udGh8fDAsbz1lLndlZWt8fDAscz1lLmRheXx8MCxhPWUuaG91cnx8MCxsPWUubWludXRlfHwwLGM9ZS5zZWNvbmR8fDAsdT1lLm1pbGxpc2Vjb25kfHwwO3RoaXMuX21pbGxpc2Vjb25kcz0rdSsxZTMqYys2ZTQqbCszNmU1KmEsdGhpcy5fZGF5cz0rcys3Km8sdGhpcy5fbW9udGhzPStyKzMqaSsxMipuLHRoaXMuX2RhdGE9e30sdGhpcy5fbG9jYWxlPU4oKSx0aGlzLl9idWJibGUoKX1mdW5jdGlvbiBVdCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHp0fWZ1bmN0aW9uIFd0KHQsZSl7Vih0LDAsMCxmdW5jdGlvbigpe3ZhciB0PXRoaXMudXRjT2Zmc2V0KCksbj0iKyI7cmV0dXJuIHQ8MCYmKHQ9LXQsbj0iLSIpLG4rQih+fih0LzYwKSwyKStlK0Iofn50JTYwLDIpfSl9ZnVuY3Rpb24gQnQodCxlKXt2YXIgbj0oZXx8IiIpLm1hdGNoKHQpfHxbXSxpPW5bbi5sZW5ndGgtMV18fFtdLHI9KGkrIiIpLm1hdGNoKHRyKXx8WyItIiwwLDBdLG89Kyg2MCpyWzFdKSt5KHJbMl0pO3JldHVybiIrIj09PXJbMF0/bzotb31mdW5jdGlvbiBWdCh0LG4pe3ZhciBpLHI7cmV0dXJuIG4uX2lzVVRDPyhpPW4uY2xvbmUoKSxyPShnKHQpfHxvKHQpPyt0OitSdCh0KSktK2ksaS5fZC5zZXRUaW1lKCtpLl9kK3IpLGUudXBkYXRlT2Zmc2V0KGksITEpLGkpOlJ0KHQpLmxvY2FsKCl9ZnVuY3Rpb24gcXQodCl7cmV0dXJuIDE1Ki1NYXRoLnJvdW5kKHQuX2QuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9ZnVuY3Rpb24gJHQodCxuKXt2YXIgaSxyPXRoaXMuX29mZnNldHx8MDtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/bnVsbCE9dD8oInN0cmluZyI9PXR5cGVvZiB0P3Q9QnQoa2ksdCk6TWF0aC5hYnModCk8MTYmJih0PTYwKnQpLCF0aGlzLl9pc1VUQyYmbiYmKGk9cXQodGhpcykpLHRoaXMuX29mZnNldD10LHRoaXMuX2lzVVRDPSEwLG51bGwhPWkmJnRoaXMuYWRkKGksIm0iKSxyIT09dCYmKCFufHx0aGlzLl9jaGFuZ2VJblByb2dyZXNzP3VlKHRoaXMscmUodC1yLCJtIiksMSwhMSk6dGhpcy5fY2hhbmdlSW5Qcm9ncmVzc3x8KHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9ITAsZS51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsKSksdGhpcyk6dGhpcy5faXNVVEM/cjpxdCh0aGlzKTpudWxsIT10P3RoaXM6TmFOfWZ1bmN0aW9uIEd0KHQsZSl7cmV0dXJuIG51bGwhPXQ/KCJzdHJpbmciIT10eXBlb2YgdCYmKHQ9LXQpLHRoaXMudXRjT2Zmc2V0KHQsZSksdGhpcyk6LXRoaXMudXRjT2Zmc2V0KCl9ZnVuY3Rpb24gS3QodCl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsdCl9ZnVuY3Rpb24gSnQodCl7cmV0dXJuIHRoaXMuX2lzVVRDJiYodGhpcy51dGNPZmZzZXQoMCx0KSx0aGlzLl9pc1VUQz0hMSx0JiZ0aGlzLnN1YnRyYWN0KHF0KHRoaXMpLCJtIikpLHRoaXN9ZnVuY3Rpb24gWHQoKXtyZXR1cm4gdGhpcy5fdHptP3RoaXMudXRjT2Zmc2V0KHRoaXMuX3R6bSk6InN0cmluZyI9PXR5cGVvZiB0aGlzLl9pJiZ0aGlzLnV0Y09mZnNldChCdChUaSx0aGlzLl9pKSksdGhpc31mdW5jdGlvbiBRdCh0KXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiYodD10P1J0KHQpLnV0Y09mZnNldCgpOjAsKHRoaXMudXRjT2Zmc2V0KCktdCklNjA9PT0wKX1mdW5jdGlvbiBadCgpe3JldHVybiB0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCgwKS51dGNPZmZzZXQoKXx8dGhpcy51dGNPZmZzZXQoKT50aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KCl9ZnVuY3Rpb24gdGUoKXtpZighZih0aGlzLl9pc0RTVFNoaWZ0ZWQpKXJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7dmFyIHQ9e307aWYobSh0LHRoaXMpLHQ9UHQodCksdC5fYSl7dmFyIGU9dC5faXNVVEM/Yyh0Ll9hKTpSdCh0Ll9hKTt0aGlzLl9pc0RTVFNoaWZ0ZWQ9dGhpcy5pc1ZhbGlkKCkmJmIodC5fYSxlLnRvQXJyYXkoKSk+MH1lbHNlIHRoaXMuX2lzRFNUU2hpZnRlZD0hMTtyZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkfWZ1bmN0aW9uIGVlKCl7cmV0dXJuISF0aGlzLmlzVmFsaWQoKSYmIXRoaXMuX2lzVVRDfWZ1bmN0aW9uIG5lKCl7cmV0dXJuISF0aGlzLmlzVmFsaWQoKSYmdGhpcy5faXNVVEN9ZnVuY3Rpb24gaWUoKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiYodGhpcy5faXNVVEMmJjA9PT10aGlzLl9vZmZzZXQpfWZ1bmN0aW9uIHJlKHQsZSl7dmFyIG4saSxyLG89dCxzPW51bGw7cmV0dXJuIFV0KHQpP289e21zOnQuX21pbGxpc2Vjb25kcyxkOnQuX2RheXMsTTp0Ll9tb250aHN9OiJudW1iZXIiPT10eXBlb2YgdD8obz17fSxlP29bZV09dDpvLm1pbGxpc2Vjb25kcz10KToocz1lci5leGVjKHQpKT8obj0iLSI9PT1zWzFdPy0xOjEsbz17eTowLGQ6eShzW1lpXSkqbixoOnkoc1tPaV0pKm4sbTp5KHNbUGldKSpuLHM6eShzW05pXSkqbixtczp5KHNbSWldKSpufSk6KHM9bnIuZXhlYyh0KSk/KG49Ii0iPT09c1sxXT8tMToxLG89e3k6b2Uoc1syXSxuKSxNOm9lKHNbM10sbiksdzpvZShzWzRdLG4pLGQ6b2Uoc1s1XSxuKSxoOm9lKHNbNl0sbiksbTpvZShzWzddLG4pLHM6b2Uoc1s4XSxuKX0pOm51bGw9PW8/bz17fToib2JqZWN0Ij09dHlwZW9mIG8mJigiZnJvbSJpbiBvfHwidG8iaW4gbykmJihyPWFlKFJ0KG8uZnJvbSksUnQoby50bykpLG89e30sby5tcz1yLm1pbGxpc2Vjb25kcyxvLk09ci5tb250aHMpLGk9bmV3IHp0KG8pLFV0KHQpJiZhKHQsIl9sb2NhbGUiKSYmKGkuX2xvY2FsZT10Ll9sb2NhbGUpLGl9ZnVuY3Rpb24gb2UodCxlKXt2YXIgbj10JiZwYXJzZUZsb2F0KHQucmVwbGFjZSgiLCIsIi4iKSk7cmV0dXJuKGlzTmFOKG4pPzA6bikqZX1mdW5jdGlvbiBzZSh0LGUpe3ZhciBuPXttaWxsaXNlY29uZHM6MCxtb250aHM6MH07cmV0dXJuIG4ubW9udGhzPWUubW9udGgoKS10Lm1vbnRoKCkrMTIqKGUueWVhcigpLXQueWVhcigpKSx0LmNsb25lKCkuYWRkKG4ubW9udGhzLCJNIikuaXNBZnRlcihlKSYmLS1uLm1vbnRocyxuLm1pbGxpc2Vjb25kcz0rZS0rdC5jbG9uZSgpLmFkZChuLm1vbnRocywiTSIpLG59ZnVuY3Rpb24gYWUodCxlKXt2YXIgbjtyZXR1cm4gdC5pc1ZhbGlkKCkmJg==", "base64"));
  res.write(new Buffer("ZS5pc1ZhbGlkKCk/KGU9VnQoZSx0KSx0LmlzQmVmb3JlKGUpP249c2UodCxlKToobj1zZShlLHQpLG4ubWlsbGlzZWNvbmRzPS1uLm1pbGxpc2Vjb25kcyxuLm1vbnRocz0tbi5tb250aHMpLG4pOnttaWxsaXNlY29uZHM6MCxtb250aHM6MH19ZnVuY3Rpb24gbGUodCl7cmV0dXJuIHQ8MD9NYXRoLnJvdW5kKC0xKnQpKi0xOk1hdGgucm91bmQodCl9ZnVuY3Rpb24gY2UodCxlKXtyZXR1cm4gZnVuY3Rpb24obixpKXt2YXIgcixvO3JldHVybiBudWxsPT09aXx8aXNOYU4oK2kpfHwoUyhlLCJtb21lbnQoKS4iK2UrIihwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4iK2UrIihudW1iZXIsIHBlcmlvZCkuIiksbz1uLG49aSxpPW8pLG49InN0cmluZyI9PXR5cGVvZiBuPytuOm4scj1yZShuLGkpLHVlKHRoaXMscix0KSx0aGlzfX1mdW5jdGlvbiB1ZSh0LG4saSxyKXt2YXIgbz1uLl9taWxsaXNlY29uZHMscz1sZShuLl9kYXlzKSxhPWxlKG4uX21vbnRocyk7dC5pc1ZhbGlkKCkmJihyPW51bGw9PXJ8fHIsbyYmdC5fZC5zZXRUaW1lKCt0Ll9kK28qaSkscyYmVSh0LCJEYXRlIix6KHQsIkRhdGUiKStzKmkpLGEmJmF0KHQseih0LCJNb250aCIpK2EqaSksciYmZS51cGRhdGVPZmZzZXQodCxzfHxhKSl9ZnVuY3Rpb24gZGUodCxlKXt2YXIgbj10fHxSdCgpLGk9VnQobix0aGlzKS5zdGFydE9mKCJkYXkiKSxyPXRoaXMuZGlmZihpLCJkYXlzIiwhMCksbz1yPC02PyJzYW1lRWxzZSI6cjwtMT8ibGFzdFdlZWsiOnI8MD8ibGFzdERheSI6cjwxPyJzYW1lRGF5IjpyPDI/Im5leHREYXkiOnI8Nz8ibmV4dFdlZWsiOiJzYW1lRWxzZSIscz1lJiYoVChlW29dKT9lW29dKCk6ZVtvXSk7cmV0dXJuIHRoaXMuZm9ybWF0KHN8fHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKG8sdGhpcyxSdChuKSkpfWZ1bmN0aW9uIGhlKCl7cmV0dXJuIG5ldyBfKHRoaXMpfWZ1bmN0aW9uIHBlKHQsZSl7dmFyIG49Zyh0KT90OlJ0KHQpO3JldHVybiEoIXRoaXMuaXNWYWxpZCgpfHwhbi5pc1ZhbGlkKCkpJiYoZT1qKGYoZSk/Im1pbGxpc2Vjb25kIjplKSwibWlsbGlzZWNvbmQiPT09ZT8rdGhpcz4rbjorbjwrdGhpcy5jbG9uZSgpLnN0YXJ0T2YoZSkpfWZ1bmN0aW9uIGZlKHQsZSl7dmFyIG49Zyh0KT90OlJ0KHQpO3JldHVybiEoIXRoaXMuaXNWYWxpZCgpfHwhbi5pc1ZhbGlkKCkpJiYoZT1qKGYoZSk/Im1pbGxpc2Vjb25kIjplKSwibWlsbGlzZWNvbmQiPT09ZT8rdGhpczwrbjordGhpcy5jbG9uZSgpLmVuZE9mKGUpPCtuKX1mdW5jdGlvbiBtZSh0LGUsbil7cmV0dXJuIHRoaXMuaXNBZnRlcih0LG4pJiZ0aGlzLmlzQmVmb3JlKGUsbil9ZnVuY3Rpb24gX2UodCxlKXt2YXIgbixpPWcodCk/dDpSdCh0KTtyZXR1cm4hKCF0aGlzLmlzVmFsaWQoKXx8IWkuaXNWYWxpZCgpKSYmKGU9aihlfHwibWlsbGlzZWNvbmQiKSwibWlsbGlzZWNvbmQiPT09ZT8rdGhpcz09PStpOihuPStpLCt0aGlzLmNsb25lKCkuc3RhcnRPZihlKTw9biYmbjw9K3RoaXMuY2xvbmUoKS5lbmRPZihlKSkpfWZ1bmN0aW9uIGdlKHQsZSl7cmV0dXJuIHRoaXMuaXNTYW1lKHQsZSl8fHRoaXMuaXNBZnRlcih0LGUpfWZ1bmN0aW9uIHZlKHQsZSl7cmV0dXJuIHRoaXMuaXNTYW1lKHQsZSl8fHRoaXMuaXNCZWZvcmUodCxlKX1mdW5jdGlvbiB5ZSh0LGUsbil7dmFyIGkscixvLHM7cmV0dXJuIHRoaXMuaXNWYWxpZCgpPyhpPVZ0KHQsdGhpcyksaS5pc1ZhbGlkKCk/KHI9NmU0KihpLnV0Y09mZnNldCgpLXRoaXMudXRjT2Zmc2V0KCkpLGU9aihlKSwieWVhciI9PT1lfHwibW9udGgiPT09ZXx8InF1YXJ0ZXIiPT09ZT8ocz1iZSh0aGlzLGkpLCJxdWFydGVyIj09PWU/cy89MzoieWVhciI9PT1lJiYocy89MTIpKToobz10aGlzLWkscz0ic2Vjb25kIj09PWU/by8xZTM6Im1pbnV0ZSI9PT1lP28vNmU0OiJob3VyIj09PWU/by8zNmU1OiJkYXkiPT09ZT8oby1yKS84NjRlNToid2VlayI9PT1lPyhvLXIpLzYwNDhlNTpvKSxuP3M6dihzKSk6TmFOKTpOYU59ZnVuY3Rpb24gYmUodCxlKXt2YXIgbixpLHI9MTIqKGUueWVhcigpLXQueWVhcigpKSsoZS5tb250aCgpLXQubW9udGgoKSksbz10LmNsb25lKCkuYWRkKHIsIm1vbnRocyIpO3JldHVybiBlLW88MD8obj10LmNsb25lKCkuYWRkKHItMSwibW9udGhzIiksaT0oZS1vKS8oby1uKSk6KG49dC5jbG9uZSgpLmFkZChyKzEsIm1vbnRocyIpLGk9KGUtbykvKG4tbykpLC0ocitpKX1mdW5jdGlvbiB3ZSgpe3JldHVybiB0aGlzLmNsb25lKCkubG9jYWxlKCJlbiIpLmZvcm1hdCgiZGRkIE1NTSBERCBZWVlZIEhIOm1tOnNzIFtHTVRdWloiKX1mdW5jdGlvbiBNZSgpe3ZhciB0PXRoaXMuY2xvbmUoKS51dGMoKTtyZXR1cm4gMDx0LnllYXIoKSYmdC55ZWFyKCk8PTk5OTk/VChEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyk/dGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpOkcodCwiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXSIpOkcodCwiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdIil9ZnVuY3Rpb24gU2UodCl7dmFyIG49Ryh0aGlzLHR8fGUuZGVmYXVsdEZvcm1hdCk7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQobil9ZnVuY3Rpb24gVGUodCxlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJihnKHQpJiZ0LmlzVmFsaWQoKXx8UnQodCkuaXNWYWxpZCgpKT9yZSh7dG86dGhpcyxmcm9tOnR9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIWUpOnRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24ga2UodCl7cmV0dXJuIHRoaXMuZnJvbShSdCgpLHQpfWZ1bmN0aW9uIExlKHQsZSl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiYoZyh0KSYmdC5pc1ZhbGlkKCl8fFJ0KHQpLmlzVmFsaWQoKSk/cmUoe2Zyb206dGhpcyx0bzp0fSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCFlKTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIHhlKHQpe3JldHVybiB0aGlzLnRvKFJ0KCksdCl9ZnVuY3Rpb24gQWUodCl7dmFyIGU7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5fbG9jYWxlLl9hYmJyOihlPU4odCksbnVsbCE9ZSYmKHRoaXMuX2xvY2FsZT1lKSx0aGlzKX1mdW5jdGlvbiBFZSgpe3JldHVybiB0aGlzLl9sb2NhbGV9ZnVuY3Rpb24gRGUodCl7c3dpdGNoKHQ9aih0KSl7Y2FzZSJ5ZWFyIjp0aGlzLm1vbnRoKDApO2Nhc2UicXVhcnRlciI6Y2FzZSJtb250aCI6dGhpcy5kYXRlKDEpO2Nhc2Uid2VlayI6Y2FzZSJpc29XZWVrIjpjYXNlImRheSI6dGhpcy5ob3VycygwKTtjYXNlImhvdXIiOnRoaXMubWludXRlcygwKTtjYXNlIm1pbnV0ZSI6dGhpcy5zZWNvbmRzKDApO2Nhc2Uic2Vjb25kIjp0aGlzLm1pbGxpc2Vjb25kcygwKX1yZXR1cm4id2VlayI9PT10JiZ0aGlzLndlZWtkYXkoMCksImlzb1dlZWsiPT09dCYmdGhpcy5pc29XZWVrZGF5KDEpLCJxdWFydGVyIj09PXQmJnRoaXMubW9udGgoMypNYXRoLmZsb29yKHRoaXMubW9udGgoKS8zKSksdGhpc31mdW5jdGlvbiBDZSh0KXtyZXR1cm4gdD1qKHQpLHZvaWQgMD09PXR8fCJtaWxsaXNlY29uZCI9PT10P3RoaXM6dGhpcy5zdGFydE9mKHQpLmFkZCgxLCJpc29XZWVrIj09PXQ/IndlZWsiOnQpLnN1YnRyYWN0KDEsIm1zIil9ZnVuY3Rpb24gWWUoKXtyZXR1cm4rdGhpcy5fZC02ZTQqKHRoaXMuX29mZnNldHx8MCl9ZnVuY3Rpb24gT2UoKXtyZXR1cm4gTWF0aC5mbG9vcigrdGhpcy8xZTMpfWZ1bmN0aW9uIFBlKCl7cmV0dXJuIHRoaXMuX29mZnNldD9uZXcgRGF0ZSgoK3RoaXMpKTp0aGlzLl9kfWZ1bmN0aW9uIE5lKCl7dmFyIHQ9dGhpcztyZXR1cm5bdC55ZWFyKCksdC5tb250aCgpLHQuZGF0ZSgpLHQuaG91cigpLHQubWludXRlKCksdC5zZWNvbmQoKSx0Lm1pbGxpc2Vjb25kKCldfWZ1bmN0aW9uIEllKCl7dmFyIHQ9dGhpcztyZXR1cm57eWVhcnM6dC55ZWFyKCksbW9udGhzOnQubW9udGgoKSxkYXRlOnQuZGF0ZSgpLGhvdXJzOnQuaG91cnMoKSxtaW51dGVzOnQubWludXRlcygpLHNlY29uZHM6dC5zZWNvbmRzKCksbWlsbGlzZWNvbmRzOnQubWlsbGlzZWNvbmRzKCl9fWZ1bmN0aW9uIFJlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMudG9JU09TdHJpbmcoKTpudWxsfWZ1bmN0aW9uIGplKCl7cmV0dXJuIGgodGhpcyl9ZnVuY3Rpb24gSGUoKXtyZXR1cm4gbCh7fSxkKHRoaXMpKX1mdW5jdGlvbiBGZSgpe3JldHVybiBkKHRoaXMpLm92ZXJmbG93fWZ1bmN0aW9uIHplKCl7cmV0dXJue2lucHV0OnRoaXMuX2ksZm9ybWF0OnRoaXMuX2YsbG9jYWxlOnRoaXMuX2xvY2FsZSxpc1VUQzp0aGlzLl9pc1VUQyxzdHJpY3Q6dGhpcy5fc3RyaWN0fX1mdW5jdGlvbiBVZSh0LGUpe1YoMCxbdCx0Lmxlbmd0aF0sMCxlKX1mdW5jdGlvbiBXZSh0KXtyZXR1cm4gJGUuY2FsbCh0aGlzLHQsdGhpcy53ZWVrKCksdGhpcy53ZWVrZGF5KCksdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93LHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRveSl9ZnVuY3Rpb24gQmUodCl7cmV0dXJuICRlLmNhbGwodGhpcyx0LHRoaXMuaXNvV2VlaygpLHRoaXMuaXNvV2Vla2RheSgpLDEsNCl9ZnVuY3Rpb24gVmUoKXtyZXR1cm4gVHQodGhpcy55ZWFyKCksMSw0KX1mdW5jdGlvbiBxZSgpe3ZhciB0PXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO3JldHVybiBUdCh0aGlzLnllYXIoKSx0LmRvdyx0LmRveSl9ZnVuY3Rpb24gJGUodCxlLG4saSxyKXt2YXIgbztyZXR1cm4gbnVsbD09dD9TdCh0aGlzLGkscikueWVhcjoobz1UdCh0LGksciksZT5vJiYoZT1vKSxHZS5jYWxsKHRoaXMsdCxlLG4saSxyKSl9ZnVuY3Rpb24gR2UodCxlLG4saSxyKXt2YXIgbz1NdCh0LGUsbixpLHIpLHM9Z3Qoby55ZWFyLDAsby5kYXlPZlllYXIpO3JldHVybiB0aGlzLnllYXIocy5nZXRVVENGdWxsWWVhcigpKSx0aGlzLm1vbnRoKHMuZ2V0VVRDTW9udGgoKSksdGhpcy5kYXRlKHMuZ2V0VVRDRGF0ZSgpKSx0aGlzfWZ1bmN0aW9uIEtlKHQpe3JldHVybiBudWxsPT10P01hdGguY2VpbCgodGhpcy5tb250aCgpKzEpLzMpOnRoaXMubW9udGgoMyoodC0xKSt0aGlzLm1vbnRoKCklMyl9ZnVuY3Rpb24gSmUodCl7cmV0dXJuIFN0KHQsdGhpcy5fd2Vlay5kb3csdGhpcy5fd2Vlay5kb3kpLndlZWt9ZnVuY3Rpb24gWGUoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3d9ZnVuY3Rpb24gUWUoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3l9ZnVuY3Rpb24gWmUodCl7dmFyIGU9dGhpcy5sb2NhbGVEYXRhKCkud2Vlayh0aGlzKTtyZXR1cm4gbnVsbD09dD9lOnRoaXMuYWRkKDcqKHQtZSksImQiKX1mdW5jdGlvbiB0bih0KXt2YXIgZT1TdCh0aGlzLDEsNCkud2VlaztyZXR1cm4gbnVsbD09dD9lOnRoaXMuYWRkKDcqKHQtZSksImQiKX1mdW5jdGlvbiBlbih0LGUpe3JldHVybiJzdHJpbmciIT10eXBlb2YgdD90OmlzTmFOKHQpPyh0PWUud2Vla2RheXNQYXJzZSh0KSwibnVtYmVyIj09dHlwZW9mIHQ/dDpudWxsKTpwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBubih0LGUpe3JldHVybiByKHRoaXMuX3dlZWtkYXlzKT90aGlzLl93ZWVrZGF5c1t0LmRheSgpXTp0aGlzLl93ZWVrZGF5c1t0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGUpPyJmb3JtYXQiOiJzdGFuZGFsb25lIl1bdC5kYXkoKV19ZnVuY3Rpb24gcm4odCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRbdC5kYXkoKV19ZnVuY3Rpb24gb24odCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluW3QuZGF5KCldfWZ1bmN0aW9uIHNuKHQsZSxuKXt2YXIgaSxyLG87Zm9yKHRoaXMuX3dlZWtkYXlzUGFyc2V8fCh0aGlzLl93ZWVrZGF5c1BhcnNlPVtdLHRoaXMuX21pbldlZWtkYXlzUGFyc2U9W10sdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdLHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlPVtdKSxpPTA7aTw3O2krKyl7aWYocj1SdChbMmUzLDFdKS5kYXkoaSksbiYmIXRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldJiYodGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cCgiXiIrdGhpcy53ZWVrZGF5cyhyLCIiKS5yZXBsYWNlKCIuIiwiLj8iKSsiJCIsImkiKSx0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cCgiXiIrdGhpcy53ZWVrZGF5c1Nob3J0KHIsIiIpLnJlcGxhY2UoIi4iLCIuPyIpKyIkIiwiaSIpLHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cCgiXiIrdGhpcy53ZWVrZGF5c01pbihyLCIiKS5yZXBsYWNlKCIuIiwiLj8iKSsiJCIsImkiKSksdGhpcy5fd2Vla2RheXNQYXJzZVtpXXx8KG89Il4iK3RoaXMud2Vla2RheXMociwiIikrInxeIit0aGlzLndlZWtkYXlzU2hvcnQociwiIikrInxeIit0aGlzLndlZWtkYXlzTWluKHIsIiIpLHRoaXMuX3dlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cChvLnJlcGxhY2UoIi4iLCIiKSwiaSIpKSxuJiYiZGRkZCI9PT1lJiZ0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXS50ZXN0KHQpKXJldHVybiBpO2lmKG4mJiJkZGQiPT09ZSYmdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldLnRlc3QodCkpcmV0dXJuIGk7aWYobiYmImRkIj09PWUmJnRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh0KSlyZXR1cm4gaTtpZighbiYmdGhpcy5fd2Vla2RheXNQYXJzZVtpXS50ZXN0KHQpKXJldHVybiBpfX1mdW5jdGlvbiBhbih0KXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIG51bGwhPXQ/dGhpczpOYU47dmFyIGU9dGhpcy5faXNVVEM/dGhpcy5fZC5nZXRVVENEYXkoKTp0aGlzLl9kLmdldERheSgpO3JldHVybiBudWxsIT10Pyh0PWVuKHQsdGhpcy5sb2NhbGVEYXRhKCkpLHRoaXMuYWRkKHQtZSwiZCIpKTplfWZ1bmN0aW9uIGxuKHQpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9dD90aGlzOk5hTjt2YXIgZT0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09dD9lOnRoaXMuYWRkKHQtZSwiZCIpfWZ1bmN0aW9uIGNuKHQpe3JldHVybiB0aGlzLmlzVmFsaWQoKT9udWxsPT10P3RoaXMuZGF5KCl8fDc6dGhpcy5kYXkodGhpcy5kYXkoKSU3P3Q6dC03KTpudWxsIT10P3RoaXM6TmFOfWZ1bmN0aW9uIHVuKHQpe3ZhciBlPU1hdGgucm91bmQoKHRoaXMuY2xvbmUoKS5zdGFydE9mKCJkYXkiKS10aGlzLmNsb25lKCkuc3RhcnRPZigieWVhciIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09dD9lOnRoaXMuYWRkKHQtZSwiZCIpfWZ1bmN0aW9uIGRuKCl7cmV0dXJuIHRoaXMuaG91cnMoKSUxMnx8MTJ9ZnVuY3Rpb24gaG4odCxlKXtWKHQsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSxlKX0pfWZ1bmN0aW9uIHBuKHQsZSl7cmV0dXJuIGUuX21lcmlkaWVtUGFyc2V9ZnVuY3Rpb24gZm4odCl7cmV0dXJuInAiPT09KHQrIiIpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApfWZ1bmN0aW9uIG1uKHQsZSxuKXtyZXR1cm4gdD4xMT9uPyJwbSI6IlBNIjpuPyJhbSI6IkFNIn1mdW5jdGlvbiBfbih0LGUpe2VbSWldPXkoMWUzKigiMC4iK3QpKX1mdW5jdGlvbiBnbigpe3JldHVybiB0aGlzLl9pc1VUQz8iVVRDIjoiIn1mdW5jdGlvbiB2bigpe3JldHVybiB0aGlzLl9pc1VUQz8iQ29vcmRpbmF0ZWQgVW5pdmVyc2FsIFRpbWUiOiIifWZ1bmN0aW9uIHluKHQpe3JldHVybiBSdCgxZTMqdCl9ZnVuY3Rpb24gYm4oKXtyZXR1cm4gUnQuYXBwbHkobnVsbCxhcmd1bWVudHMpLnBhcnNlWm9uZSgpfWZ1bmN0aW9uIHduKHQsZSxuKXt2YXIgaT10aGlzLl9jYWxlbmRhclt0XTtyZXR1cm4gVChpKT9pLmNhbGwoZSxuKTppfWZ1bmN0aW9uIE1uKHQpe3ZhciBlPXRoaXMuX2xvbmdEYXRlRm9ybWF0W3RdLG49dGhpcy5fbG9uZ0RhdGVGb3JtYXRbdC50b1VwcGVyQ2FzZSgpXTtyZXR1cm4gZXx8IW4/ZToodGhpcy5fbG9uZ0RhdGVGb3JtYXRbdF09bi5yZXBsYWNlKC9NTU1NfE1NfEREfGRkZGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZSgxKX0pLHRoaXMuX2xvbmdEYXRlRm9ybWF0W3RdKX1mdW5jdGlvbiBTbigpe3JldHVybiB0aGlzLl9pbnZhbGlkRGF0ZX1mdW5jdGlvbiBUbih0KXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKCIlZCIsdCl9ZnVuY3Rpb24ga24odCl7cmV0dXJuIHR9ZnVuY3Rpb24gTG4odCxlLG4saSl7dmFyIHI9dGhpcy5fcmVsYXRpdmVUaW1lW25dO3JldHVybiBUKHIpP3IodCxlLG4saSk6ci5yZXBsYWNlKC8lZC9pLHQpfWZ1bmN0aW9uIHhuKHQsZSl7dmFyIG49dGhpcy5fcmVsYXRpdmVUaW1lW3Q+MD8iZnV0dXJlIjoicGFzdCJdO3JldHVybiBUKG4pP24oZSk6bi5yZXBsYWNlKC8lcy9pLGUpfWZ1bmN0aW9uIEFuKHQsZSxuLGkpe3ZhciByPU4oKSxvPWMoKS5zZXQoaSxlKTtyZXR1cm4gcltuXShvLHQpfWZ1bmN0aW9uIEVuKHQsZSxuLGkscil7aWYoIm51bWJlciI9PXR5cGVvZiB0JiYoZT10LHQ9dm9pZCAwKSx0PXR8fCIiLG51bGwhPWUpcmV0dXJuIEFuKHQsZSxuLHIpO3ZhciBvLHM9W107Zm9yKG89MDtvPGk7bysrKXNbb109QW4odCxvLG4scik7cmV0dXJuIHN9ZnVuY3Rpb24gRG4odCxlKXtyZXR1cm4gRW4odCxlLCJtb250aHMiLDEyLCJtb250aCIpfWZ1bmN0aW9uIENuKHQsZSl7cmV0dXJuIEVuKHQsZSwibW9udGhzU2hvcnQiLDEyLCJtb250aCIpfWZ1bmN0aW9uIFluKHQsZSl7cmV0dXJuIEVuKHQsZSwid2Vla2RheXMiLDcsImRheSIpfWZ1bmN0aW9uIE9uKHQsZSl7cmV0dXJuIEVuKHQsZSwid2Vla2RheXNTaG9ydCIsNywiZGF5Iil9ZnVuY3Rpb24gUG4odCxlKXtyZXR1cm4gRW4odCxlLCJ3ZWVrZGF5c01pbiIsNywiZGF5Iil9ZnVuY3Rpb24gTm4oKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHM9THIodGhpcy5fbWlsbGlzZWNvbmRzKSx0aGlzLl9kYXlzPUxyKHRoaXMuX2RheXMpLHRoaXMuX21vbnRocz1Mcih0aGlzLl9tb250aHMpLHQubWlsbGlzZWNvbmRzPUxyKHQubWlsbGlzZWNvbmRzKSx0LnNlY29uZHM9THIodC5zZWNvbmRzKSx0Lm1pbnV0ZXM9THIodC5taW51dGVzKSx0LmhvdXJzPUxyKHQuaG91cnMpLHQubW9udGhzPUxyKHQubW9udGhzKSx0LnllYXJzPUxyKHQueWVhcnMpLHRoaXN9ZnVuY3Rpb24gSW4odCxlLG4saSl7dmFyIHI9cmUoZSxuKTtyZXR1cm4gdC5fbWlsbGlzZWNvbmRzKz1pKnIuX21pbGxpc2Vjb25kcyx0Ll9kYXlzKz1pKnIuX2RheXMsdC5fbW9udGhzKz1pKnIuX21vbnRocyx0Ll9idWJibGUoKX1mdW5jdGlvbiBSbih0LGUpe3JldHVybiBJbih0aGlzLHQsZSwxKX1mdW5jdGlvbiBqbih0LGUpe3JldHVybiBJbih0aGlzLHQsZSwtMSl9ZnVuY3Rpb24gSG4odCl7cmV0dXJuIHQ8MD9NYXRoLmZsb29yKHQpOk1hdGguY2VpbCh0KX1mdW5jdGlvbiBGbigpe3ZhciB0LGUsbixpLHIsbz10aGlzLl9taWxsaXNlY29uZHMscz10aGlzLl9kYXlzLGE9dGhpcy5fbW9udGhzLGw9dGhpcy5fZGF0YTtyZXR1cm4gbz49MCYmcz49MCYmYT49MHx8bzw9MCYmczw9MCYmYTw9MHx8KG8rPTg2NGU1KkhuKFVuKGEpK3MpLHM9MCxhPTApLGwubWlsbGlzZWNvbmRzPW8lMWUzLHQ9dihvLzFlMyksbC5zZWNvbmRzPXQlNjAsZT12KHQvNjApLGwubWludXRlcz1lJTYwLG49dihlLzYwKSxsLmhvdXJzPW4lMjQscys9dihuLzI0KSxyPXYoem4ocykpLGErPXIscy09SG4oVW4ocikpLGk9dihhLzEyKSxhJT0xMixsLmRheXM9cyxsLm1vbnRocz1hLGwueWVhcnM9aSx0aGlzfWZ1bmN0aW9uIHpuKHQpe3JldHVybiA0ODAwKnQvMTQ2MDk3fWZ1bmN0aW9uIFVuKHQpe3JldHVybiAxNDYwOTcqdC80ODAwfWZ1bmN0aW9uIFduKHQpe3ZhciBlLG4saT10aGlzLl9taWxsaXNlY29uZHM7aWYodD1qKHQpLCJtb250aCI9PT10fHwieWVhciI9PT10KXJldHVybiBlPXRoaXMuX2RheXMraS84NjRlNSxuPXRoaXMuX21vbnRocyt6bihlKSwibW9udGgiPT09dD9uOm4vMTI7c3dpdGNoKGU9dGhpcy5fZGF5cytNYXRoLnJvdW5kKFVuKHRoaXMuX21vbnRocykpLHQpe2Nhc2Uid2VlayI6cmV0dXJuIGUvNytpLzYwNDhlNTtjYXNlImRheSI6cmV0dXJuIGUraS84NjRlNTtjYXNlImhvdXIiOnJldHVybiAyNCplK2kvMzZlNTtjYXNlIm1pbnV0ZSI6cmV0dXJuIDE0NDAqZStpLzZlNDtjYXNlInNlY29uZCI6cmV0dXJuIDg2NDAwKmUraS8xZTM7Y2FzZSJtaWxsaXNlY29uZCI6cmV0dXJuIE1hdGguZmxvb3IoODY0ZTUqZSkraTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biB1bml0ICIrdCl9fWZ1bmN0aW9uIEJuKCl7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNip5KHRoaXMuX21vbnRocy8xMil9ZnVuY3Rpb24gVm4odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXModCl9fWZ1bmN0aW9uIHFuKHQpe3JldHVybiB0PWoodCksdGhpc1t0KyJzIl0oKX1mdW5jdGlvbiAkbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVt0XX19ZnVuY3Rpb24gR24oKXtyZXR1cm4gdih0aGlzLmRheXMoKS83KX1mdW5jdGlvbiBLbih0LGUsbixpLHIpe3JldHVybiByLnJlbGF0aXZlVGltZShlfHwxLCEhbix0LGkpfWZ1bmN0aW9uIEpuKHQsZSxuKXt2YXIgaT1yZSh0KS5hYnMoKSxyPVVyKGkuYXMoInMiKSksbz1VcihpLmFzKCJtIikpLHM9VXIoaS5hcygiaCIpKSxhPVVyKGkuYXMoImQiKSksbD1VcihpLmFzKCJNIikpLGM9VXIoaS5hcygieSIpKSx1PXI8V3IucyYmWyJzIixyXXx8bzw9MSYmWyJtIl18fG88V3IubSYmWyJtbSIsb118fHM8PTEmJlsiaCJdfHxzPFdyLmgmJlsiaGgiLHNdfHxhPD0xJiZbImQiXXx8YTxXci5kJiZbImRkIixhXXx8bDw9MSYmWyJNIl18fGw8V3IuTSYmWyJNTSIsbF18fGM8PTEmJlsieSJdfHxbInl5IixjXTtyZXR1cm4gdVsyXT1lLHVbM109K3Q+MCx1WzRdPW4sS24uYXBwbHkobnVsbCx1KX1mdW5jdGlvbiBYbih0LGUpe3JldHVybiB2b2lkIDAhPT1Xclt0XSYmKHZvaWQgMD09PWU/V3JbdF06KFdyW3RdPWUsITApKX1mdW5jdGlvbiBRbih0KXt2YXIgZT10aGlzLmxvY2FsZURhdGEoKSxuPUpuKHRoaXMsIXQsZSk7cmV0dXJuIHQmJihuPWUucGFzdEZ1dHVyZSgrdGhpcyxuKSksZS5wb3N0Zm9ybWF0KG4pfWZ1bmN0aW9uIFpuKCl7dmFyIHQsZSxuLGk9QnIodGhpcy5fbWlsbGlzZWNvbmRzKS8xZTMscj1Ccih0aGlzLl9kYXlzKSxvPUJyKHRoaXMuX21vbnRocyk7dD12KGkvNjApLGU9dih0LzYwKSxpJT02MCx0JT02MCxuPXYoby8xMiksbyU9MTI7dmFyIHM9bixhPW8sbD1yLGM9ZSx1PXQsZD1pLGg9dGhpcy5hc1NlY29uZHMoKTtyZXR1cm4gaD8oaDwwPyItIjoiIikrIlAiKyhzP3MrIlkiOiIiKSsoYT9hKyJNIjoiIikrKGw/bCsiRCI6IiIpKyhjfHx1fHxkPyJUIjoiIikrKGM/YysiSCI6IiIpKyh1P3UrIk0iOiIiKSsoZD9kKyJTIjoiIik6IlAwRCJ9dmFyIHRpLGVpPWUubW9tZW50UHJvcGVydGllcz1bXSxuaT0hMSxpaT17fTtlLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMTt2YXIgcmksb2k9e30sc2k9e30sYWk9LyhcW1teXFtdKlxdKXwoXFwpPyhbSGhdbW0oc3MpP3xNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRbz98WVlZWVlZfFlZWVlZfFlZWVl8WVl8Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZyxsaT0vKFxbW15cW10qXF0pfChcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZyxjaT17fSx1aT17fSxkaT0vXGQvLGhpPS9cZFxkLyxwaT0vXGR7M30vLGZpPS9cZHs0fS8sbWk9L1srLV0/XGR7Nn0vLF9pPS9cZFxkPy8sZ2k9L1xkXGRcZFxkPy8sdmk9L1xkXGRcZFxkXGRcZD8vLHlpPS9cZHsxLDN9LyxiaT0vXGR7MSw0fS8sd2k9L1srLV0/XGR7MSw2fS8sTWk9L1xkKy8sU2k9L1srLV0/XGQrLyxUaT0vWnxbKy1dXGRcZDo/XGRcZC9naSxraT0vWnxbKy1dXGRcZCg/Ojo/XGRcZCk/L2dpLExpPS9bKy1dP1xkKyhcLlxkezEsM30pPy8seGk9L1swLTldKlsnYS16XHUwMEEwLVx1MDVGRlx1MDcwMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0rfFtcdTA2MDAtXHUwNkZGXC9dKyhccyo/W1x1MDYwMC1cdTA2RkZdKyl7MSwyfS9pLEFpPXt9LEVpPXt9LERpPTAsQ2k9MSxZaT0yLE9pPTMsUGk9NCxOaT01LElpPTYsUmk9NyxqaT04O1YoIk0iLFsiTU0iLDJdLCJNbyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzF9KSxWKCJNTU0iLDAsMCxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcyx0KX0pLFYoIk1NTU0iLDAsMCxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsdCl9KSxSKCJtb250aCIsIk0iKSxKKCJNIixfaSksSigiTU0iLF9pLGhpKSxKKCJNTU0iLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubW9udGhzU2hvcnRSZWdleCh0KX0pLEooIk1NTU0iLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubW9udGhzUmVnZXgodCl9KSx0dChbIk0iLCJNTSJdLGZ1bmN0aW9uKHQsZSl7ZVtDaV09eSh0KS0xfSksdHQoWyJNTU0iLCJNTU1NIl0sZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bi5fbG9jYWxlLm1vbnRoc1BhcnNlKHQsaSxuLl9zdHJpY3QpO251bGwhPXI/ZVtDaV09cjpkKG4pLmludmFsaWRNb250aD10fSk7dmFyIEhpPS9EW29EXT8oXFtbXlxbXF1dKlxdfFxzKykrTU1NTT8vLEZpPSJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLHppPSJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSxVaT14aSxXaT14aSxCaT0vXlxzKigoPzpbKy1dXGR7Nn18XGR7NH0pLSg/OlxkXGQtXGRcZHxXXGRcZC1cZHxXXGRcZHxcZFxkXGR8XGRcZCkpKD86KFR8ICkoXGRcZCg/OjpcZFxkKD86OlxkXGQoPzpbLixdXGQrKT8pPyk/KShbXCtcLV1cZFxkKD86Oj9cZFxkKT98XHMqWik/KT8vLFZpPS9eXHMqKCg/OlsrLV1cZHs2fXxcZHs0fSkoPzpcZFxkXGRcZHxXXGRcZFxkfFdcZFxkfFxkXGRcZHxcZFxkKSkoPzooVHwgKShcZFxkKD86XGRcZCg/OlxkXGQoPzpbLixdXGQrKT8pPyk/KShbXCtcLV1cZFxkKD86Oj9cZFxkKT98XHMqWik/KT8vLHFpPS9afFsrLV1cZFxkKD86Oj9cZFxkKT8vLCRpPVtbIllZWVlZWS1NTS1ERCIsL1srLV1cZHs2fS1cZFxkLVxkXGQvXSxbIllZWVktTU0tREQiLC9cZHs0fS1cZFxkLVxkXGQvXSxbIkdHR0ctW1ddV1ctRSIsL1xkezR9LVdcZFxkLVxkL10sWyJHR0dHLVtXXVdXIiwvXGR7NH0tV1xkXGQvLCExXSxbIllZWVktREREIiwvXGR7NH0tXGR7M30vXSxbIllZWVktTU0iLC9cZHs0fS1cZFxkLywhMV0sWyJZWVlZWVlNTUREIiwvWystXVxkezEwfS9dLFsiWVlZWU1NREQiLC9cZHs4fS9dLFsiR0dHR1tXXVdXRSIsL1xkezR9V1xkezN9L10sWyJHR0dHW1ddV1ciLC9cZHs0fVdcZHsyfS8sITFdLFsiWVlZWURERCIsL1xkezd9L11dLEdpPVtbIkhIOm1tOnNzLlNTU1MiLC9cZFxkOlxkXGQ6XGRcZFwuXGQrL10sWyJISDptbTpzcyxTU1NTIiwvXGRcZDpcZFxkOlxkXGQsXGQrL10sWyJISDptbTpzcyIsL1xkXGQ6XGRcZDpcZFxkL10sWyJISDptbSIsL1xkXGQ6XGRcZC9dLFsiSEhtbXNzLlNTU1MiLC9cZFxkXGRcZFxkXGRcLlxkKy9dLFsiSEhtbXNzLFNTU1MiLC9cZFxkXGRcZFxkXGQsXGQrL10sWyJISG1tc3MiLC9cZFxkXGRcZFxkXGQvXSxbIkhIbW0iLC9cZFxkXGRcZC9dLFsiSEgiLC9cZFxkL11dLEtpPS9eXC8/RGF0ZVwoKFwtP1xkKykvaTtlLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrPU0oIm1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlLiBUaGlzIGlzIGRpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDA3IGZvciBtb3JlIGluZm8uIixmdW5jdGlvbih0KXt0Ll9kPW5ldyBEYXRlKHQuX2krKHQuX3VzZVVUQz8iIFVUQyI6IiIpKX0pLFYoIlkiLDAsMCxmdW5jdGlvbigpe3ZhciB0PXRoaXMueWVhcigpO3JldHVybiB0PD05OTk5PyIiK3Q6IisiK3R9KSxWKDAsWyJZWSIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnllYXIoKSUxMDB9KSxWKDAsWyJZWVlZIiw0XSwwLCJ5ZWFyIiksVigwLFsiWVlZWVkiLDVdLDAsInllYXIiKSxWKDAsWyJZWVlZWVkiLDYsITBdLDAsInllYXIiKSxSKCJ5ZWFyIiwieSIpLEooIlkiLFNpKSxKKCJZWSIsX2ksaGkpLEooIllZWVkiLGJpLGZpKSxKKCJZWVlZWSIsd2ksbWkpLEooIllZWVlZWSIsd2ksbWkpLHR0KFsiWVlZWVkiLCJZWVlZWVkiXSxEaSksdHQoIllZWVkiLGZ1bmN0aW9uKHQsbil7bltEaV09Mj09PXQubGVuZ3RoP2UucGFyc2VUd29EaWdpdFllYXIodCk6eSh0KX0pLHR0KCJZWSIsZnVuY3Rpb24odCxuKXtuW0Q=", "base64"));
  res.write(new Buffer("aV09ZS5wYXJzZVR3b0RpZ2l0WWVhcih0KX0pLHR0KCJZIixmdW5jdGlvbih0LGUpe2VbRGldPXBhcnNlSW50KHQsMTApfSksZS5wYXJzZVR3b0RpZ2l0WWVhcj1mdW5jdGlvbih0KXtyZXR1cm4geSh0KSsoeSh0KT42OD8xOTAwOjJlMyl9O3ZhciBKaT1GKCJGdWxsWWVhciIsITEpO2UuSVNPXzg2MDE9ZnVuY3Rpb24oKXt9O3ZhciBYaT1NKCJtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE1NDgiLGZ1bmN0aW9uKCl7dmFyIHQ9UnQuYXBwbHkobnVsbCxhcmd1bWVudHMpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmdC5pc1ZhbGlkKCk/dDx0aGlzP3RoaXM6dDpwKCl9KSxRaT1NKCJtb21lbnQoKS5tYXggaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5taW4gaW5zdGVhZC4gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE1NDgiLGZ1bmN0aW9uKCl7dmFyIHQ9UnQuYXBwbHkobnVsbCxhcmd1bWVudHMpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmdC5pc1ZhbGlkKCk/dD50aGlzP3RoaXM6dDpwKCl9KSxaaT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdz9EYXRlLm5vdygpOituZXcgRGF0ZX07V3QoIloiLCI6IiksV3QoIlpaIiwiIiksSigiWiIsa2kpLEooIlpaIixraSksdHQoWyJaIiwiWloiXSxmdW5jdGlvbih0LGUsbil7bi5fdXNlVVRDPSEwLG4uX3R6bT1CdChraSx0KX0pO3ZhciB0cj0vKFtcK1wtXXxcZFxkKS9naTtlLnVwZGF0ZU9mZnNldD1mdW5jdGlvbigpe307dmFyIGVyPS9eKFwtKT8oPzooXGQqKVsuIF0pPyhcZCspXDooXGQrKSg/Olw6KFxkKylcLj8oXGR7M30pP1xkKik/JC8sbnI9L14oLSk/UCg/OihbMC05LC5dKilZKT8oPzooWzAtOSwuXSopTSk/KD86KFswLTksLl0qKVcpPyg/OihbMC05LC5dKilEKT8oPzpUKD86KFswLTksLl0qKUgpPyg/OihbMC05LC5dKilNKT8oPzooWzAtOSwuXSopUyk/KT8kLztyZS5mbj16dC5wcm90b3R5cGU7dmFyIGlyPWNlKDEsImFkZCIpLHJyPWNlKC0xLCJzdWJ0cmFjdCIpO2UuZGVmYXVsdEZvcm1hdD0iWVlZWS1NTS1ERFRISDptbTpzc1oiO3ZhciBvcj1NKCJtb21lbnQoKS5sYW5nKCkgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCwgdXNlIG1vbWVudCgpLmxvY2FsZURhdGEoKSB0byBnZXQgdGhlIGxhbmd1YWdlIGNvbmZpZ3VyYXRpb24uIFVzZSBtb21lbnQoKS5sb2NhbGUoKSB0byBjaGFuZ2UgbGFuZ3VhZ2VzLiIsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5sb2NhbGVEYXRhKCk6dGhpcy5sb2NhbGUodCl9KTtWKDAsWyJnZyIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLndlZWtZZWFyKCklMTAwfSksVigwLFsiR0ciLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc29XZWVrWWVhcigpJTEwMH0pLFVlKCJnZ2dnIiwid2Vla1k=", "base64"));
  res.write(new Buffer("ZWFyIiksVWUoImdnZ2dnIiwid2Vla1llYXIiKSxVZSgiR0dHRyIsImlzb1dlZWtZZWFyIiksVWUoIkdHR0dHIiwiaXNvV2Vla1llYXIiKSxSKCJ3ZWVrWWVhciIsImdnIiksUigiaXNvV2Vla1llYXIiLCJHRyIpLEooIkciLFNpKSxKKCJnIixTaSksSigiR0ciLF9pLGhpKSxKKCJnZyIsX2ksaGkpLEooIkdHR0ciLGJpLGZpKSxKKCJnZ2dnIixiaSxmaSksSigiR0dHR0ciLHdpLG1pKSxKKCJnZ2dnZyIsd2ksbWkpLGV0KFsiZ2dnZyIsImdnZ2dnIiwiR0dHRyIsIkdHR0dHIl0sZnVuY3Rpb24odCxlLG4saSl7ZVtpLnN1YnN0cigwLDIpXT15KHQpfSksZXQoWyJnZyIsIkdHIl0sZnVuY3Rpb24odCxuLGkscil7bltyXT1lLnBhcnNlVHdvRGlnaXRZZWFyKHQpfSksVigiUSIsMCwiUW8iLCJxdWFydGVyIiksUigicXVhcnRlciIsIlEiKSxKKCJRIixkaSksdHQoIlEiLGZ1bmN0aW9uKHQsZSl7ZVtDaV09MyooeSh0KS0xKX0pLFYoInciLFsid3ciLDJdLCJ3byIsIndlZWsiKSxWKCJXIixbIldXIiwyXSwiV28iLCJpc29XZWVrIiksUigid2VlayIsInciKSxSKCJpc29XZWVrIiwiVyIpLEooInciLF9pKSxKKCJ3dyIsX2ksaGkpLEooIlciLF9pKSxKKCJXVyIsX2ksaGkpLGV0KFsidyIsInd3IiwiVyIsIldXIl0sZnVuY3Rpb24odCxlLG4saSl7ZVtpLnN1YnN0cigwLDEpXT15KHQpfSk7dmFyIHNyPXtkb3c6MCxkb3k6Nn07VigiRCIsWyJERCIsMl0sIkRvIiwiZGF0ZSIpLFIoImRhdGUiLCJEIiksSigiRCIsX2kpLEooIkREIixfaSxoaSksSigiRG8iLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ/ZS5fb3JkaW5hbFBhcnNlOmUuX29yZGluYWxQYXJzZUxlbmllbnR9KSx0dChbIkQiLCJERCJdLFlpKSx0dCgiRG8iLGZ1bmN0aW9uKHQsZSl7ZVtZaV09eSh0Lm1hdGNoKF9pKVswXSwxMCl9KTt2YXIgYXI9RigiRGF0ZSIsITApO1YoImQiLDAsImRvIiwiZGF5IiksVigiZGQiLDAsMCxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNNaW4odGhpcyx0KX0pLFYoImRkZCIsMCwwLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsdCl9KSxWKCJkZGRkIiwwLDAsZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsdCl9KSxWKCJlIiwwLDAsIndlZWtkYXkiKSxWKCJFIiwwLDAsImlzb1dlZWtkYXkiKSxSKCJkYXkiLCJkIiksUigid2Vla2RheSIsImUiKSxSKCJpc29XZWVrZGF5IiwiRSIpLEooImQiLF9pKSxKKCJlIixfaSksSigiRSIsX2kpLEooImRkIix4aSksSigiZGRkIix4aSksSigiZGRkZCIseGkpLGV0KFsiZGQiLCJkZGQiLCJkZGRkIl0sZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bi5fbG9jYWxlLndlZWtkYXlzUGFyc2UodCxpLG4uX3N0cmljdCk7bnVsbCE9cj9lLmQ9cjpkKG4pLmludmFsaWRXZWVrZGF5PXR9KSxldChbImQiLCJlIiwiRSJdLGZ1bmN0aW9uKHQsZSxuLGkpe2VbaV09eSh0KX0pO3ZhciBscj0iU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXkiLnNwbGl0KCJfIiksY3I9IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx1cj0iU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIik7VigiREREIixbIkREREQiLDNdLCJERERvIiwiZGF5T2ZZZWFyIiksUigiZGF5T2ZZZWFyIiwiREREIiksSigiREREIix5aSksSigiRERERCIscGkpLHR0KFsiREREIiwiRERERCJdLGZ1bmN0aW9uKHQsZSxuKXtuLl9kYXlPZlllYXI9eSh0KX0pLFYoIkgiLFsiSEgiLDJdLDAsImhvdXIiKSxWKCJoIixbImhoIiwyXSwwLGRuKSxWKCJobW0iLDAsMCxmdW5jdGlvbigpe3JldHVybiIiK2RuLmFwcGx5KHRoaXMpK0IodGhpcy5taW51dGVzKCksMil9KSxWKCJobW1zcyIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIiIrZG4uYXBwbHkodGhpcykrQih0aGlzLm1pbnV0ZXMoKSwyKStCKHRoaXMuc2Vjb25kcygpLDIpfSksVigiSG1tIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLmhvdXJzKCkrQih0aGlzLm1pbnV0ZXMoKSwyKX0pLFYoIkhtbXNzIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLmhvdXJzKCkrQih0aGlzLm1pbnV0ZXMoKSwyKStCKHRoaXMuc2Vjb25kcygpLDIpfSksaG4oImEiLCEwKSxobigiQSIsITEpLFIoImhvdXIiLCJoIiksSigiYSIscG4pLEooIkEiLHBuKSxKKCJIIixfaSksSigiaCIsX2kpLEooIkhIIixfaSxoaSksSigiaGgiLF9pLGhpKSxKKCJobW0iLGdpKSxKKCJobW1zcyIsdmkpLEooIkhtbSIsZ2kpLEooIkhtbXNzIix2aSksdHQoWyJIIiwiSEgiXSxPaSksdHQoWyJhIiwiQSJdLGZ1bmN0aW9uKHQsZSxuKXtuLl9pc1BtPW4uX2xvY2FsZS5pc1BNKHQpLG4uX21lcmlkaWVtPXR9KSx0dChbImgiLCJoaCJdLGZ1bmN0aW9uKHQsZSxuKXtlW09pXT15KHQpLGQobikuYmlnSG91cj0hMH0pLHR0KCJobW0iLGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Lmxlbmd0aC0yO2VbT2ldPXkodC5zdWJzdHIoMCxpKSksZVtQaV09eSh0LnN1YnN0cihpKSksZChuKS5iaWdIb3VyPSEwfSksdHQoImhtbXNzIixmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5sZW5ndGgtNCxyPXQubGVuZ3RoLTI7ZVtPaV09eSh0LnN1YnN0cigwLGkpKSxlW1BpXT15KHQuc3Vic3RyKGksMikpLGVbTmldPXkodC5zdWJzdHIocikpLGQobikuYmlnSG91cj0hMH0pLHR0KCJIbW0iLGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Lmxlbmd0aC0yO2VbT2ldPXkodC5zdWJzdHIoMCxpKSksZVtQaV09eSh0LnN1YnN0cihpKSl9KSx0dCgiSG1tc3MiLGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Lmxlbmd0aC00LHI9dC5sZW5ndGgtMjtlW09pXT15KHQuc3Vic3RyKDAsaSkpLGVbUGldPXkodC5zdWJzdHIoaSwyKSksZVtOaV09eSh0LnN1YnN0cihyKSl9KTt2YXIgZHI9L1thcF1cLj9tP1wuPy9pLGhyPUYoIkhvdXJzIiwhMCk7VigibSIsWyJtbSIsMl0sMCwibWludXRlIiksUigibWludXRlIiwibSIpLEooIm0iLF9pKSxKKCJtbSIsX2ksaGkpLHR0KFsibSIsIm1tIl0sUGkpO3ZhciBwcj1GKCJNaW51dGVzIiwhMSk7VigicyIsWyJzcyIsMl0sMCwic2Vjb25kIiksUigic2Vjb25kIiwicyIpLEooInMiLF9pKSxKKCJzcyIsX2ksaGkpLHR0KFsicyIsInNzIl0sTmkpO3ZhciBmcj1GKCJTZWNvbmRzIiwhMSk7VigiUyIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJufn4odGhpcy5taWxsaXNlY29uZCgpLzEwMCl9KSxWKDAsWyJTUyIsMl0sMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMCl9KSxWKDAsWyJTU1MiLDNdLDAsIm1pbGxpc2Vjb25kIiksVigwLFsiU1NTUyIsNF0sMCxmdW5jdGlvbigpe3JldHVybiAxMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxWKDAsWyJTU1NTUyIsNV0sMCxmdW5jdGlvbigpe3JldHVybiAxMDAqdGhpcy5taWxsaXNlY29uZCgpfSksVigwLFsiU1NTU1NTIiw2XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLm1pbGxpc2Vjb25kKCl9KSxWKDAsWyJTU1NTU1NTIiw3XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxWKDAsWyJTU1NTU1NTUyIsOF0sMCxmdW5jdGlvbigpe3JldHVybiAxZTUqdGhpcy5taWxsaXNlY29uZCgpfSksVigwLFsiU1NTU1NTU1NTIiw5XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNip0aGlzLm1pbGxpc2Vjb25kKCl9KSxSKCJtaWxsaXNlY29uZCIsIm1zIiksSigiUyIseWksZGkpLEooIlNTIix5aSxoaSksSigiU1NTIix5aSxwaSk7dmFyIG1yO2Zvcihtcj0iU1NTUyI7bXIubGVuZ3RoPD05O21yKz0iUyIpSihtcixNaSk7Zm9yKG1yPSJTIjttci5sZW5ndGg8PTk7bXIrPSJTIil0dChtcixfbik7dmFyIF9yPUYoIk1pbGxpc2Vjb25kcyIsITEpO1YoInoiLDAsMCwiem9uZUFiYnIiKSxWKCJ6eiIsMCwwLCJ6b25lTmFtZSIpO3ZhciBncj1fLnByb3RvdHlwZTtnci5hZGQ9aXIsZ3IuY2FsZW5kYXI9ZGUsZ3IuY2xvbmU9aGUsZ3IuZGlmZj15ZSxnci5lbmRPZj1DZSxnci5mb3JtYXQ9U2UsZ3IuZnJvbT1UZSxnci5mcm9tTm93PWtlLGdyLnRvPUxlLGdyLnRvTm93PXhlLGdyLmdldD1XLGdyLmludmFsaWRBdD1GZSxnci5pc0FmdGVyPXBlLGdyLmlzQmVmb3JlPWZlLGdyLmlzQmV0d2Vlbj1tZSxnci5pc1NhbWU9X2UsZ3IuaXNTYW1lT3JBZnRlcj1nZSxnci5pc1NhbWVPckJlZm9yZT12ZSxnci5pc1ZhbGlkPWplLGdyLmxhbmc9b3IsZ3IubG9jYWxlPUFlLGdyLmxvY2FsZURhdGE9RWUsZ3IubWF4PVFpLGdyLm1pbj1YaSxnci5wYXJzaW5nRmxhZ3M9SGUsZ3Iuc2V0PVcsZ3Iuc3RhcnRPZj1EZSxnci5zdWJ0cmFjdD1ycixnci50b0FycmF5PU5lLGdyLnRvT2JqZWN0PUllLGdyLnRvRGF0ZT1QZSxnci50b0lTT1N0cmluZz1NZSxnci50b0pTT049UmUsZ3IudG9TdHJpbmc9d2UsZ3IudW5peD1PZSxnci52YWx1ZU9mPVllLGdyLmNyZWF0aW9uRGF0YT16ZSxnci55ZWFyPUppLGdyLmlzTGVhcFllYXI9YnQsZ3Iud2Vla1llYXI9V2UsZ3IuaXNvV2Vla1llYXI9QmUsZ3IucXVhcnRlcj1nci5xdWFydGVycz1LZSxnci5tb250aD1sdCxnci5kYXlzSW5Nb250aD1jdCxnci53ZWVrPWdyLndlZWtzPVplLGdyLmlzb1dlZWs9Z3IuaXNvV2Vla3M9dG4sZ3Iud2Vla3NJblllYXI9cWUsZ3IuaXNvV2Vla3NJblllYXI9VmUsZ3IuZGF0ZT1hcixnci5kYXk9Z3IuZGF5cz1hbixnci53ZWVrZGF5PWxuLGdyLmlzb1dlZWtkYXk9Y24sZ3IuZGF5T2ZZZWFyPXVuLGdyLmhvdXI9Z3IuaG91cnM9aHIsZ3IubWludXRlPWdyLm1pbnV0ZXM9cHIsZ3Iuc2Vjb25kPWdyLnNlY29uZHM9ZnIsZ3IubWlsbGlzZWNvbmQ9Z3IubWlsbGlzZWNvbmRzPV9yLGdyLnV0Y09mZnNldD0kdCxnci51dGM9S3QsZ3IubG9jYWw9SnQsZ3IucGFyc2Vab25lPVh0LGdyLmhhc0FsaWduZWRIb3VyT2Zmc2V0PVF0LGdyLmlzRFNUPVp0LGdyLmlzRFNUU2hpZnRlZD10ZSxnci5pc0xvY2FsPWVlLGdyLmlzVXRjT2Zmc2V0PW5lLGdyLmlzVXRjPWllLGdyLmlzVVRDPWllLGdyLnpvbmVBYmJyPWduLGdyLnpvbmVOYW1lPXZuLGdyLmRhdGVzPU0oImRhdGVzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBkYXRlIGluc3RlYWQuIixhciksZ3IubW9udGhzPU0oIm1vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZCIsbHQpLGdyLnllYXJzPU0oInllYXJzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSB5ZWFyIGluc3RlYWQiLEppKSxnci56b25lPU0oIm1vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTc3OSIsR3QpO3ZhciB2cj1ncix5cj17c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LGJyPXtMVFM6Img6bW06c3MgQSIsTFQ6Img6bW0gQSIsTDoiTU0vREQvWVlZWSIsTEw6Ik1NTU0gRCwgWVlZWSIsTExMOiJNTU1NIEQsIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBIn0sd3I9IkludmFsaWQgZGF0ZSIsTXI9IiVkIixTcj0vXGR7MSwyfS8sVHI9e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxrcj1BLnByb3RvdHlwZTtrci5fY2FsZW5kYXI9eXIsa3IuY2FsZW5kYXI9d24sa3IuX2xvbmdEYXRlRm9ybWF0PWJyLGtyLmxvbmdEYXRlRm9ybWF0PU1uLGtyLl9pbnZhbGlkRGF0ZT13cixrci5pbnZhbGlkRGF0ZT1Tbixrci5fb3JkaW5hbD1Ncixrci5vcmRpbmFsPVRuLGtyLl9vcmRpbmFsUGFyc2U9U3Isa3IucHJlcGFyc2U9a24sa3IucG9zdGZvcm1hdD1rbixrci5fcmVsYXRpdmVUaW1lPVRyLGtyLnJlbGF0aXZlVGltZT1Mbixrci5wYXN0RnV0dXJlPXhuLGtyLnNldD1MLGtyLm1vbnRocz1ydCxrci5fbW9udGhzPUZpLGtyLm1vbnRoc1Nob3J0PW90LGtyLl9tb250aHNT", "base64"));
  res.write(new Buffer("aG9ydD16aSxrci5tb250aHNQYXJzZT1zdCxrci5fbW9udGhzUmVnZXg9V2ksa3IubW9udGhzUmVnZXg9ZHQsa3IuX21vbnRoc1Nob3J0UmVnZXg9VWksa3IubW9udGhzU2hvcnRSZWdleD11dCxrci53ZWVrPUplLGtyLl93ZWVrPXNyLGtyLmZpcnN0RGF5T2ZZZWFyPVFlLGtyLmZpcnN0RGF5T2ZXZWVrPVhlLGtyLndlZWtkYXlzPW5uLGtyLl93ZWVrZGF5cz1scixrci53ZWVrZGF5c01pbj1vbixrci5fd2Vla2RheXNNaW49dXIsa3Iud2Vla2RheXNTaG9ydD1ybixrci5fd2Vla2RheXNTaG9ydD1jcixrci53ZWVrZGF5c1BhcnNlPXNuLGtyLmlzUE09Zm4sa3IuX21lcmlkaWVtUGFyc2U9ZHIsa3IubWVyaWRpZW09bW4sWSgiZW4iLHtvcmRpbmFsUGFyc2U6L1xkezEsMn0odGh8c3R8bmR8cmQpLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBlPXQlMTAsbj0xPT09eSh0JTEwMC8xMCk/InRoIjoxPT09ZT8ic3QiOjI9PT1lPyJuZCI6Mz09PWU/InJkIjoidGgiO3JldHVybiB0K259fSksZS5sYW5nPU0oIm1vbWVudC5sYW5nIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlIGluc3RlYWQuIixZKSxlLmxhbmdEYXRhPU0oIm1vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4iLE4pO3ZhciBMcj1NYXRoLmFicyx4cj1WbigibXMiKSxBcj1WbigicyIpLEVyPVZuKCJtIiksRHI9Vm4oImgiKSxDcj1WbigiZCIpLFlyPVZuKCJ3IiksT3I9Vm4oIk0iKSxQcj1WbigieSIpLE5yPSRuKCJtaWxsaXNlY29uZHMiKSxJcj0kbigic2Vjb25kcyIpLFJyPSRuKCJtaW51dGVzIiksanI9JG4oImhvdXJzIiksSHI9JG4oImRheXMiKSxGcj0kbigibW9udGhzIiksenI9JG4oInllYXJzIiksVXI9TWF0aC5yb3VuZCxXcj17czo0NSxtOjQ1LGg6MjIsZDoyNixNOjExfSxCcj1NYXRoLmFicyxWcj16dC5wcm90b3R5cGU7VnIuYWJzPU5uLFZyLmFkZD1SbixWci5zdWJ0cmFjdD1qbixWci5hcz1XbixWci5hc01pbGxpc2Vjb25kcz14cixWci5hc1NlY29uZHM9QXIsVnIuYXNNaW51dGVzPUVyLFZyLmFzSG91cnM9RHIsVnIuYXNEYXlzPUNyLFZyLmFzV2Vla3M9WXIsVnIuYXNNb250aHM9T3IsVnIuYXNZZWFycz1QcixWci52YWx1ZU9mPUJuLFZyLl9idWJibGU9Rm4sVnIuZ2V0PXFuLFZyLm1pbGxpc2Vjb25kcz1OcixWci5zZWNvbmRzPUlyLFZyLm1pbnV0ZXM9UnIsVnIuaG91cnM9anIsVnIuZGF5cz1IcixWci53ZWVrcz1HbixWci5tb250aHM9RnIsVnIueWVhcnM9enIsVnIuaHVtYW5pemU9UW4sVnIudG9JU09TdHJpbmc9Wm4sVnIudG9TdHJpbmc9Wm4sVnIudG9KU09OPVpuLFZyLmxvY2FsZT1BZSxWci5sb2NhbGVEYXRhPUVlLFZyLnRvSXNvU3RyaW5nPU0oInRvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpIixabiksVnIubGFuZz1vcixWKCJYIiwwLDAsInVuaXgiKSxWKCJ4IiwwLDAsInZhbHVlT2YiKSxKKCJ4IixTaSksSigiWCIsTGkpLHR0KCJYIixmdW5jdGlvbih0LGUsbil7bi5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdCh0LDEwKSl9KSx0dCgieCIsZnVuY3Rpb24odCxlLG4pe24uX2Q9bmV3IERhdGUoeSh0KSl9KSxlLnZlcnNpb249IjIuMTIuMCIsaShSdCksZS5mbj12cixlLm1pbj1IdCxlLm1heD1GdCxlLm5vdz1aaSxlLnV0Yz1jLGUudW5peD15bixlLm1vbnRocz1EbixlLmlzRGF0ZT1vLGUubG9jYWxlPVksZS5pbnZhbGlkPXAsZS5kdXJhdGlvbj1yZSxlLmlzTW9tZW50PWcsZS53ZWVrZGF5cz1ZbixlLnBhcnNlWm9uZT1ibixlLmxvY2FsZURhdGE9TixlLmlzRHVyYXRpb249VXQsZS5tb250aHNTaG9ydD1DbixlLndlZWtkYXlzTWluPVBuLGUuZGVmaW5lTG9jYWxlPU8sZS51cGRhdGVMb2NhbGU9UCxlLmxvY2FsZXM9SSxlLndlZWtkYXlzU2hvcnQ9T24sZS5ub3JtYWxpemVVbml0cz1qLGUucmVsYXRpdmVUaW1lVGhyZXNob2xkPVhuLGUucHJvdG90eXBlPXZyO3ZhciBxcj1lO3JldHVybiBxcn0pfSkuY2FsbChlLG4oMzYyKSh0KSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiBuKHIodCkpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIG9bdF18fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrdCsiJy4iKX0oKX12YXIgbz17Ii4vYWYiOjM2NCwiLi9hZi5qcyI6MzY0LCIuL2FyIjozNjUsIi4vYXItbWEiOjM2NiwiLi9hci1tYS5qcyI6MzY2LCIuL2FyLXNhIjozNjcsIi4vYXItc2EuanMiOjM2NywiLi9hci10biI6MzY4LCIuL2FyLXRuLmpzIjozNjgsIi4vYXIuanMiOjM2NSwiLi9heiI6MzY5LCIuL2F6LmpzIjozNjksIi4vYmUiOjM3MCwiLi9iZS5qcyI6MzcwLCIuL2JnIjozNzEsIi4vYmcuanMiOjM3MSwiLi9ibiI6MzcyLCIuL2JuLmpzIjozNzIsIi4vYm8iOjM3MywiLi9iby5qcyI6MzczLCIuL2JyIjozNzQsIi4vYnIuanMiOjM3NCwiLi9icyI6Mzc1LAoJIi4vYnMuanMiOjM3NSwiLi9jYSI6Mzc2LCIuL2NhLmpzIjozNzYsIi4vY3MiOjM3NywiLi9jcy5qcyI6Mzc3LCIuL2N2IjozNzgsIi4vY3YuanMiOjM3OCwiLi9jeSI6Mzc5LCIuL2N5LmpzIjozNzksIi4vZGEiOjM4MCwiLi9kYS5qcyI6MzgwLCIuL2RlIjozODEsIi4vZGUtYXQiOjM4MiwiLi9kZS1hdC5qcyI6MzgyLCIuL2RlLmpzIjozODEsIi4vZHYiOjM4MywiLi9kdi5qcyI6MzgzLCIuL2VsIjozODQsIi4vZWwuanMiOjM4NCwiLi9lbi1hdSI6Mzg1LCIuL2VuLWF1LmpzIjozODUsIi4vZW4tY2EiOjM4NiwiLi9lbi1jYS5qcyI6Mzg2LCIuL2VuLWdiIjozODcsIi4vZW4tZ2IuanMiOjM4NywiLi9lbi1pZSI6Mzg4LCIuL2VuLWllLmpzIjozODgsIi4vZW4tbnoiOjM4OSwiLi9lbi1uei5qcyI6Mzg5LCIuL2VvIjozOTAsIi4vZW8uanMiOjM5MCwiLi9lcyI6MzkxLCIuL2VzLmpzIjozOTEsIi4vZXQiOjM5MiwiLi9ldC5qcyI6MzkyLCIuL2V1IjozOTMsIi4vZXUuanMiOjM5MywiLi9mYSI6Mzk0LCIuL2ZhLmpzIjozOTQsIi4vZmkiOjM5NSwiLi9maS5qcyI6Mzk1LCIuL2ZvIjozOTYsIi4vZm8uanMiOjM5NiwiLi9mciI6Mzk3LCIuL2ZyLWNhIjozOTgsIi4vZnItY2EuanMiOjM5OCwiLi9mci1jaCI6Mzk5LCIuL2ZyLWNoLmpzIjozOTksIi4vZnIuanMiOjM5NywiLi9meSI6NDAwLCIuL2Z5LmpzIjo0MDAsIi4vZ2QiOjQwMSwiLi9nZC5qcyI6NDAxLCIuL2dsIjo0MDIsIi4vZ2wuanMiOjQwMiwiLi9oZSI6NDAzLCIuL2hlLmpzIjo0MDMsIi4vaGkiOjQwNCwiLi9oaS5qcyI6NDA0LCIuL2hyIjo0MDUsIi4vaHIuanMiOjQwNSwiLi9odSI6NDA2LCIuL2h1LmpzIjo0MDYsIi4vaHktYW0iOjQwNywiLi9oeS1hbS5qcyI6NDA3LCIuL2lkIjo0MDgsIi4vaWQuanMiOjQwOCwiLi9pcyI6NDA5LCIuL2lzLmpzIjo0MDksIi4vaXQiOjQxMCwiLi9pdC5qcyI6NDEwLCIuL2phIjo0MTEsIi4vamEuanMiOjQxMSwiLi9qdiI6NDEyLCIuL2p2LmpzIjo0MTIsIi4va2EiOjQxMywiLi9rYS5qcyI6NDEzLCIuL2trIjo0MTQsIi4va2suanMiOjQxNCwiLi9rbSI6NDE1LCIuL2ttLmpzIjo0MTUsIi4va28iOjQxNiwiLi9rby5qcyI6NDE2LCIuL2xiIjo0MTcsIi4vbGIuanMiOjQxNywiLi9sbyI6NDE4LCIuL2xvLmpzIjo0MTgsIi4vbHQiOjQxOSwiLi9sdC5qcyI6NDE5LCIuL2x2Ijo0MjAsIi4vbHYuanMiOjQyMCwiLi9tZSI6NDIxLCIuL21lLmpzIjo0MjEsIi4vbWsiOjQyMiwiLi9tay5qcyI6NDIyLCIuL21sIjo0MjMsIi4vbWwuanMiOjQyMywiLi9tciI6NDI0LCIuL21yLmpzIjo0MjQsIi4vbXMiOjQyNSwiLi9tcy1teSI6NDI2LCIuL21zLW15LmpzIjo0MjYsIi4vbXMuanMiOjQyNSwiLi9teSI6NDI3LCIuL215LmpzIjo0MjcsIi4vbmIiOjQyOCwiLi9uYi5qcyI6NDI4LCIuL25lIjo0MjksIi4vbmUuanMiOjQyOSwiLi9ubCI6NDMwLCIuL25sLmpzIjo0MzAsIi4vbm4iOjQzMSwiLi9ubi5qcyI6NDMxLCIuL3BhLWluIjo0MzIsIi4vcGEtaW4uanMiOjQzMiwiLi9wbCI6NDMzLCIuL3BsLmpzIjo0MzMsIi4vcHQiOjQzNCwiLi9wdC1iciI6NDM1LCIuL3B0LWJyLmpzIjo0MzUsIi4vcHQuanMiOjQzNCwiLi9ybyI6NDM2LCIuL3JvLmpzIjo0MzYsIi4vcnUiOjQzNywiLi9ydS5qcyI6NDM3LCIuL3NlIjo0MzgsIi4vc2UuanMiOjQzOCwiLi9zaSI6NDM5LCIuL3NpLmpzIjo0MzksIi4vc2siOjQ0MCwiLi9zay5qcyI6NDQwLCIuL3NsIjo0", "base64"));
  res.write(new Buffer("NDEsIi4vc2wuanMiOjQ0MSwiLi9zcSI6NDQyLCIuL3NxLmpzIjo0NDIsIi4vc3IiOjQ0MywiLi9zci1jeXJsIjo0NDQsIi4vc3ItY3lybC5qcyI6NDQ0LCIuL3NyLmpzIjo0NDMsIi4vc3YiOjQ0NSwiLi9zdi5qcyI6NDQ1LCIuL3N3Ijo0NDYsIi4vc3cuanMiOjQ0NiwiLi90YSI6NDQ3LCIuL3RhLmpzIjo0NDcsIi4vdGUiOjQ0OCwiLi90ZS5qcyI6NDQ4LCIuL3RoIjo0NDksIi4vdGguanMiOjQ0OSwiLi90bC1waCI6NDUwLCIuL3RsLXBoLmpzIjo0NTAsIi4vdGxoIjo0NTEsIi4vdGxoLmpzIjo0NTEsIi4vdHIiOjQ1MiwiLi90ci5qcyI6NDUyLCIuL3R6bCI6NDUzLCIuL3R6bC5qcyI6NDUzLCIuL3R6bSI6NDU0LCIuL3R6bS1sYXRuIjo0NTUsIi4vdHptLWxhdG4uanMiOjQ1NSwiLi90em0uanMiOjQ1NCwiLi91ayI6NDU2LCIuL3VrLmpzIjo0NTYsIi4vdXoiOjQ1NywiLi91ei5qcyI6NDU3LCIuL3ZpIjo0NTgsIi4vdmkuanMiOjQ1OCwiLi96aC1jbiI6NDU5LCIuL3poLWNuLmpzIjo0NTksIi4vemgtdHciOjQ2MCwiLi96aC10dy5qcyI6NDYwfTtpLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXMobyl9LGkucmVzb2x2ZT1yLHQuZXhwb3J0cz1pLGkuaWQ9MzYzfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiYWYiLHttb250aHM6IkphbnVhcmllX0ZlYnJ1YXJpZV9NYWFydF9BcHJpbF9NZWlfSnVuaWVfSnVsaWVfQXVndXN0dXNfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGVzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NZWlfSnVuX0p1bF9BdWdfU2VwX09rdF9Ob3ZfRGVzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTb25kYWdfTWFhbmRhZ19EaW5zZGFnX1dvZW5zZGFnX0RvbmRlcmRhZ19WcnlkYWdfU2F0ZXJkYWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU29uX01hYV9EaW5fV29lX0Rvbl9WcnlfU2F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTb19NYV9EaV9Xb19Eb19Wcl9TYSIuc3BsaXQoIl8iKSxtZXJpZGllbVBhcnNlOi92bXxubS9pLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuL15ubSQvaS50ZXN0KHQpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8MTI/bj8idm0iOiJWTSI6bj8ibm0iOiJOTSJ9LGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1ZhbmRhZyBvbV0gTFQiLG5leHREYXk6IltNw7RyZSBvbV0gTFQiLG5leHRXZWVrOiJkZGRkIFtvbV0gTFQiLGxhc3REYXk6IltHaXN0ZXIgb21dIExUIixsYXN0V2VlazoiW0xhYXNdIGRkZGQgW29tXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib29yICVzIixwYXN0OiIlcyBnZWxlZGUiLHM6IiduIHBhYXIgc2Vrb25kZXMiLG06IiduIG1pbnV1dCIsbW06IiVkIG1pbnV0ZSIsaDoiJ24gdXVyIixoaDoiJWQgdXJlIixkOiInbiBkYWciLGRkOiIlZCBkYWUiLE06IiduIG1hYW5kIixNTToiJWQgbWFhbmRlIix5OiInbiBqYWFyIix5eToiJWQgamFhciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdGV8ZGUpLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3JldHVybiB0KygxPT09dHx8OD09PXR8fHQ+PTIwPyJzdGUiOiJkZSIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT17MToi2aEiLDI6ItmiIiwzOiLZoyIsNDoi2aQiLDU6ItmlIiw2OiLZpiIsNzoi2aciLDg6ItmoIiw5OiLZqSIsMDoi2aAifSxuPXsi2aEiOiIxIiwi2aIiOiIyIiwi2aMiOiIzIiwi2aQiOiI0Iiwi2aUiOiI1Iiwi2aYiOiI2Iiwi2aciOiI3Iiwi2agiOiI4Iiwi2akiOiI5Iiwi2aAiOiIwIn0saT1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOjI9PT10PzI6dCUxMDA+PTMmJnQlMTAwPD0xMD8zOnQlMTAwPj0xMT80OjV9LHI9e3M6WyLYo9mC2YQg2YXZhiDYq9in2YbZitipIiwi2KvYp9mG2YrYqSDZiNin2K3Yr9ipIixbItir2KfZhtmK2KrYp9mGIiwi2KvYp9mG2YrYqtmK2YYiXSwiJWQg2KvZiNin2YYiLCIlZCDYq9in2YbZitipIiwiJWQg2KvYp9mG2YrYqSJdLG06WyLYo9mC2YQg2YXZhiDYr9mC2YrZgtipIiwi2K/ZgtmK2YLYqSDZiNin2K3Yr9ipIixbItiv2YLZitmC2KrYp9mGIiwi2K/ZgtmK2YLYqtmK2YYiXSwiJWQg2K/Zgtin2KbZgiIsIiVkINiv2YLZitmC2KkiLCIlZCDYr9mC2YrZgtipIl0saDpbItij2YLZhCDZhdmGINiz2KfYudipIiwi2LPYp9i52Kkg2YjYp9it2K/YqSIsWyLYs9in2LnYqtin2YYiLCLYs9in2LnYqtmK2YYiXSwiJWQg2LPYp9i52KfYqiIsIiVkINiz2KfYudipIiwiJWQg2LPYp9i52KkiXSxkOlsi2KPZgtmEINmF2YYg2YrZiNmFIiwi2YrZiNmFINmI2KfYrdivIixbItmK2YjZhdin2YYiLCLZitmI2YXZitmGIl0sIiVkINij2YrYp9mFIiwiJWQg2YrZiNmF2YvYpyIsIiVkINmK2YjZhSJdLE06WyLYo9mC2YQg2YXZhiDYtNmH2LEiLCLYtNmH2LEg2YjYp9it2K8iLFsi2LTZh9ix2KfZhiIsIti02YfYsdmK2YYiXSwiJWQg2KPYtNmH2LEiLCIlZCDYtNmH2LHYpyIsIiVkINi02YfYsSJdLHk6WyLYo9mC2YQg2YXZhiDYudin2YUiLCLYudin2YUg2YjYp9it2K8iLFsi2LnYp9mF2KfZhiIsIti52KfZhdmK2YYiXSwiJWQg2KPYudmI2KfZhSIsIiVkINi52KfZhdmL2KciLCIlZCDYudin2YUiXX0sbz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLG8scyl7dmFyIGE9aShlKSxsPXJbdF1baShlKV07cmV0dXJuIDI9PT1hJiYobD1sW24/MDoxXSksbC5yZXBsYWNlKC8lZC9pLGUpfX0scz1bItmD2KfZhtmI2YYg2KfZhNir2KfZhtmKINmK2YbYp9mK2LEiLCLYtNio2KfYtyDZgdio2LHYp9mK2LEiLCLYotiw2KfYsSDZhdin2LHYsyIsItmG2YrYs9in2YYg2KPYqNix2YrZhCIsItij2YrYp9ixINmF2KfZitmIIiwi2K3YstmK2LHYp9mGINmK2YjZhtmK2YgiLCLYqtmF2YjYsiDZitmI2YTZitmIIiwi2KLYqCDYo9i62LPYt9izIiwi2KPZitmE2YjZhCDYs9io2KrZhdio2LEiLCLYqti02LHZitmGINin2YTYo9mI2YQg2KPZg9iq2YjYqNixIiwi2KrYtNix2YrZhiDYp9mE2KvYp9mG2Yog2YbZiNmB2YXYqNixIiwi2YPYp9mG2YjZhiDYp9mE2KPZiNmEINiv2YrYs9mF2KjYsSJdLGE9dC5kZWZpbmVMb2NhbGUoImFyIix7bW9udGhzOnMsbW9udGhzU2hvcnQ6cyx3ZWVrZGF5czoi2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Itij2K3Yr1/Ypdir2YbZitmGX9ir2YTYp9ir2KfYoV/Yo9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLYrV/Zhl/Yq1/YsV/Yrl/YrF/YsyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJEL+KAj00v4oCPWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2LV82YUvLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuItmFIj09PXR9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDwxMj8i2LUiOiLZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/Zi9inINi52YbYryDYp9mE2LPYp9i52KldIExUIixuZXh0V2VlazoiZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3REYXk6IlvYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2KjYudivICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6bygicyIpLG06bygibSIpLG1tOm8oIm0iKSxoOm8oImgiKSxoaDpvKCJoIiksZDpvKCJkIiksZGQ6bygiZCIpLE06bygiTSIpLE1NOm8oIk0iKSx5Om8oInkiKSx5eTpvKCJ5Iil9LHByZXBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1x1MjAwZi9nLCIiKS5yZXBsYWNlKC9b2aHZotmj2aTZpdmm2afZqNmp2aBdL2csZnVuY3Rpb24odCl7cmV0dXJuIG5bdF19KS5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pLnJlcGxhY2UoLywvZywi2IwiKX0sd2Vlazp7ZG93OjYsZG95OjEyfX0pO3JldHVybiBhfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJhci1tYSIse21vbnRoczoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi2KfZhNij2K3Yr1/Yp9mE2KXYqtmG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Itin2K3Yr1/Yp9iq2YbZitmGX9ir2YTYp9ir2KfYoV/Yp9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLYrV/Zhl/Yq1/YsV/Yrl/YrF/YsyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHREYXk6IlvYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHRXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdERheToiW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLZgdmKICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6Itir2YjYp9mGIixtOiLYr9mC2YrZgtipIixtbToiJWQg2K/Zgtin2KbZgiIsaDoi2LPYp9i52KkiLGhoOiIlZCDYs9in2LnYp9iqIixkOiLZitmI2YUiLGRkOiIlZCDYo9mK2KfZhSIsTToi2LTZh9ixIixNTToiJWQg2KPYtNmH2LEiLHk6Itiz2YbYqSIseXk6IiVkINiz2YbZiNin2KoifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6ItmhIiwyOiLZoiIsMzoi2aMiLDQ6ItmkIiw1OiLZpSIsNjoi2aYiLDc6ItmnIiw4OiLZqCIsOToi2akiLDA6ItmgIn0sbj17ItmhIjoiMSIsItmiIjoiMiIsItmjIjoiMyIsItmkIjoiNCIsItmlIjoiNSIsItmmIjoiNiIsItmnIjoiNyIsItmoIjoiOCIsItmpIjoiOSIsItmgIjoiMCJ9LGk9dC5kZWZpbmVMb2NhbGUoImFyLXNhIix7bW9udGhzOiLZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZitmIX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiF/Yo9i62LPYt9izX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2YrZiF/ZitmI2YbZitmIX9mK2YjZhNmK2Yhf2KPYutiz2LfYs1/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEiLnNwbGl0KCJfIiksd2Vla2RheXM6Itin2YTYo9it2K9f2KfZhNil2KvZhtmK2YZf2KfZhNir2YTYp9ir2KfYoV/Yp9mE2KPYsdio2LnYp9ihX9in2YTYrtmF2YrYs1/Yp9mE2KzZhdi52Klf2KfZhNiz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi2K1f2YZf2Ktf2LFf2K5f2Kxf2LMiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2LV82YUvLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuItmFIj09PXR9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDwxMj8i2LUiOiLZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItmB2YogJXMiLHBhc3Q6ItmF2YbYsCAlcyIsczoi2KvZiNin2YYiLG06Itiv2YLZitmC2KkiLG1tOiIlZCDYr9mC2KfYptmCIixoOiLYs9in2LnYqSIsaGg6IiVkINiz2KfYudin2KoiLA==", "base64"));
  res.write(new Buffer("ZDoi2YrZiNmFIixkZDoiJWQg2KPZitin2YUiLE06Iti02YfYsSIsTU06IiVkINij2LTZh9ixIix5OiLYs9mG2KkiLHl5OiIlZCDYs9mG2YjYp9iqIn0scHJlcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSkucmVwbGFjZSgv2IwvZywiLCIpfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xkL2csZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KS5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2Rvdzo2LGRveToxMn19KTtyZXR1cm4gaX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiYXItdG4iLHttb250aHM6Itis2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2KzYp9mG2YHZil/ZgdmK2YHYsdmKX9mF2KfYsdizX9ij2YHYsdmK2YRf2YXYp9mKX9is2YjYp9mGX9is2YjZitmE2YrYqV/Yo9mI2Kpf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItmB2YogJXMiLHBhc3Q6ItmF2YbYsCAlcyIsczoi2KvZiNin2YYiLG06Itiv2YLZitmC2KkiLG1tOiIlZCDYr9mC2KfYptmCIixoOiLYs9in2LnYqSIsaGg6IiVkINiz2KfYudin2KoiLGQ6ItmK2YjZhSIsZGQ6IiVkINij2YrYp9mFIixNOiLYtNmH2LEiLE1NOiIlZCDYo9i02YfYsSIseToi2LPZhtipIix5eToiJWQg2LPZhtmI2KfYqiJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXsxOiItaW5jaSIsNToiLWluY2kiLDg6Ii1pbmNpIiw3MDoiLWluY2kiLDgwOiItaW5jaSIsMjoiLW5jaSIsNzoiLW5jaSIsMjA6Ii1uY2kiLDUwOiItbmNpIiwzOiItw7xuY8O8Iiw0OiItw7xuY8O8IiwxMDA6Ii3DvG5jw7wiLDY6Ii1uY8SxIiw5OiItdW5jdSIsMTA6Ii11bmN1IiwzMDoiLXVuY3UiLDYwOiItxLFuY8SxIiw5MDoiLcSxbmPEsSJ9LG49dC5kZWZpbmVMb2NhbGUoImF6Iix7bW9udGhzOiJ5YW52YXJfZmV2cmFsX21hcnRfYXByZWxfbWF5X2l5dW5faXl1bF9hdnF1c3Rfc2VudHlhYnJfb2t0eWFicl9ub3lhYnJfZGVrYWJyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJ5YW5fZmV2X21hcl9hcHJfbWF5X2l5bl9peWxfYXZxX3Nlbl9va3Rfbm95X2RlayIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiQmF6YXJfQmF6YXIgZXJ0yZlzaV/Dh8mZcsWfyZluYsmZIGF4xZ9hbcSxX8OHyZlyxZ/JmW5iyZlfQ8O8bcmZIGF4xZ9hbcSxX0PDvG3JmV/FnsmZbmLJmSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJCYXpfQnpFX8OHQXhfw4fJmXJfQ0F4X0PDvG1fxZ7JmW4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkJ6X0JFX8OHQV/Dh8mZX0NBX0PDvF/FnsmZIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2J1Z8O8biBzYWF0XSBMVCIsbmV4dERheToiW3NhYmFoIHNhYXRdIExUIixuZXh0V2VlazoiW2fJmWzJmW4gaMmZZnTJmV0gZGRkZCBbc2FhdF0gTFQiLGxhc3REYXk6Iltkw7xuyZluXSBMVCIsbGFzdFdlZWs6IltrZcOnyZluIGjJmWZ0yZldIGRkZGQgW3NhYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBzb25yYSIscGFzdDoiJXMgyZl2dsmZbCIsczoiYmlybmXDp8mZIHNhbml5ecmZIixtOiJiaXIgZMmZcWlxyZkiLG1tOiIlZCBkyZlxaXHJmSIsaDoiYmlyIHNhYXQiLGhoOiIlZCBzYWF0IixkOiJiaXIgZ8O8biIsZGQ6IiVkIGfDvG4iLE06ImJpciBheSIsTU06IiVkIGF5Iix5OiJiaXIgaWwiLHl5OiIlZCBpbCJ9LG1lcmlkaWVtUGFyc2U6L2dlY8mZfHPJmWjJmXJ8Z8O8bmTDvHp8YXjFn2FtLyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybi9eKGfDvG5kw7x6fGF4xZ9hbSkkLy50ZXN0KHQpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8iZ2VjyZkiOnQ8MTI/InPJmWjJmXIiOnQ8MTc/ImfDvG5kw7x6IjoiYXjFn2FtIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjEsW5jxLF8aW5jaXxuY2l8w7xuY8O8fG5jxLF8dW5jdSkvLG9yZGluYWw6ZnVuY3Rpb24odCl7aWYoMD09PXQpcmV0dXJuIHQrIi3EsW5jxLEiO3ZhciBuPXQlMTAsaT10JTEwMC1uLHI9dD49MTAwPzEwMDpudWxsO3JldHVybiB0KyhlW25dfHxlW2ldfHxlW3JdKX0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUpe3ZhciBuPXQuc3BsaXQoIl8iKTtyZXR1cm4gZSUxMD09PTEmJmUlMTAwIT09MTE/blswXTplJTEwPj0yJiZlJTEwPD00JiYoZSUxMDA8MTB8fGUlMTAwPj0yMCk/blsxXTpuWzJdfWZ1bmN0aW9uIG4odCxuLGkpe3ZhciByPXttbTpuPyLRhdCy0ZbQu9GW0L3QsF/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0iOiLRhdCy0ZbQu9GW0L3Rg1/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0iLGhoOm4/ItCz0LDQtNC30ZbQvdCwX9Cz0LDQtNC30ZbQvdGLX9Cz0LDQtNC30ZbQvSI6ItCz0LDQtNC30ZbQvdGDX9Cz0LDQtNC30ZbQvdGLX9Cz0LDQtNC30ZbQvSIsZGQ6ItC00LfQtdC90Yxf0LTQvdGWX9C00LfRkdC9IixNTToi0LzQtdGB0Y/Rhl/QvNC10YHRj9GG0Ytf0LzQtdGB0Y/RhtCw0Z4iLHl5OiLQs9C+0LRf0LPQsNC00Ytf0LPQsNC00L7RniJ9O3JldHVybiJtIj09PWk/bj8i0YXQstGW0LvRltC90LAiOiLRhdCy0ZbQu9GW0L3RgyI6ImgiPT09aT9uPyLQs9Cw0LTQt9GW0L3QsCI6ItCz0LDQtNC30ZbQvdGDIjp0KyIgIitlKHJbaV0sK3QpfXZhciBpPXQuZGVmaW5lTG9jYWxlKCJiZSIse21vbnRoczp7Zm9ybWF0OiLRgdGC0YPQtNC30LXQvdGPX9C70Y7RgtCw0LPQsF/RgdCw0LrQsNCy0ZbQutCwX9C60YDQsNGB0LDQstGW0LrQsF/RgtGA0LDRntC90Y9f0YfRjdGA0LLQtdC90Y9f0LvRltC/0LXQvdGPX9C20L3RltGe0L3Rj1/QstC10YDQsNGB0L3Rj1/QutCw0YHRgtGA0YvRh9C90ZbQutCwX9C70ZbRgdGC0LDQv9Cw0LTQsF/RgdC90LXQttC90Y8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0YHRgtGD0LTQt9C10L3RjF/Qu9GO0YLRi1/RgdCw0LrQsNCy0ZbQul/QutGA0LDRgdCw0LLRltC6X9GC0YDQsNCy0LXQvdGMX9GH0Y3RgNCy0LXQvdGMX9C70ZbQv9C10L3RjF/QttC90ZbQstC10L3RjF/QstC10YDQsNGB0LXQvdGMX9C60LDRgdGC0YDRi9GH0L3RltC6X9C70ZbRgdGC0LDQv9Cw0LRf0YHQvdC10LbQsNC90YwiLnNwbGl0KCJfIil9LG1vbnRoc1Nob3J0OiLRgdGC0YPQtF/Qu9GO0YJf0YHQsNC6X9C60YDQsNGBX9GC0YDQsNCyX9GH0Y3RgNCyX9C70ZbQv1/QttC90ZbQsl/QstC10YBf0LrQsNGB0YJf0LvRltGB0YJf0YHQvdC10LYiLnNwbGl0KCJfIiksd2Vla2RheXM6e2Zvcm1hdDoi0L3Rj9C00LfQtdC70Y5f0L/QsNC90Y/QtNC30LXQu9Cw0Lpf0LDRntGC0L7RgNCw0Lpf0YHQtdGA0LDQtNGDX9GH0LDRhtCy0LXRgF/Qv9GP0YLQvdGW0YbRg1/RgdGD0LHQvtGC0YMiLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0L3Rj9C00LfQtdC70Y9f0L/QsNC90Y/QtNC30LXQu9Cw0Lpf0LDRntGC0L7RgNCw0Lpf0YHQtdGA0LDQtNCwX9GH0LDRhtCy0LXRgF/Qv9GP0YLQvdGW0YbQsF/RgdGD0LHQvtGC0LAiLnNwbGl0KCJfIiksaXNGb3JtYXQ6L1xbID9b0JLQsl0gPyg/OtC80ZbQvdGD0LvRg9GOfNC90LDRgdGC0YPQv9C90YPRjik/ID9cXSA/ZGRkZC99LHdlZWtkYXlzU2hvcnQ6ItC90LRf0L/QvV/QsNGCX9GB0YBf0YfRhl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItC90LRf0L/QvV/QsNGCX9GB0YBf0YfRhl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZINCzLiIsTExMOiJEIE1NTU0gWVlZWSDQsy4sIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSDQsy4sIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQodGR0L3QvdGPINGeXSBMVCIsbmV4dERheToiW9CX0LDRntGC0YDQsCDRnl0gTFQiLGxhc3REYXk6IlvQo9GH0L7RgNCwINGeXSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iW9CjXSBkZGRkIFvRnl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6Y2FzZSAzOmNhc2UgNTpjYXNlIDY6cmV0dXJuIlvQoyDQvNGW0L3Rg9C70YPRjl0gZGRkZCBb0Z5dIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4iW9CjINC80ZbQvdGD0LvRi10gZGRkZCBb0Z5dIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItC/0YDQsNC3ICVzIixwYXN0OiIlcyDRgtCw0LzRgyIsczoi0L3QtdC60LDQu9GM0LrRliDRgdC10LrRg9C90LQiLG06bixtbTpuLGg6bixoaDpuLGQ6ItC00LfQtdC90YwiLGRkOm4sTToi0LzQtdGB0Y/RhiIsTU06bix5OiLQs9C+0LQiLHl5Om59LG1lcmlkaWVtUGFyc2U6L9C90L7Rh9GLfNGA0LDQvdGW0YbRi3zQtNC90Y980LLQtdGH0LDRgNCwLyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybi9eKNC00L3Rj3zQstC10YfQsNGA0LApJC8udGVzdCh0KX0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDQ/ItC90L7Rh9GLIjp0PDEyPyLRgNCw0L3RltGG0YsiOnQ8MTc/ItC00L3RjyI6ItCy0LXRh9Cw0YDQsCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfS0o0ZZ80Yt80LPQsCkvLG9yZGluYWw6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJNIjpjYXNlImQiOmNhc2UiREREIjpjYXNlInciOmNhc2UiVyI6cmV0dXJuIHQlMTAhPT0yJiZ0JTEwIT09M3x8dCUxMDA9PT0xMnx8dCUxMDA9PT0xMz90KyIt0YsiOnQrIi3RliI7Y2FzZSJEIjpyZXR1cm4gdCsiLdCz0LAiO2RlZmF1bHQ6cmV0dXJuIHR9fSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gaX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiYmciLHttb250aHM6ItGP0L3Rg9Cw0YDQuF/RhNC10LLRgNGD0LDRgNC4X9C80LDRgNGCX9Cw0L/RgNC40Ltf0LzQsNC5X9GO0L3QuF/RjtC70Lhf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCy0YDQuF/QvtC60YLQvtC80LLRgNC4X9C90L7QtdC80LLRgNC4X9C00LXQutC10LzQstGA0LgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGP0L3RgF/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Llf0Y7QvdC4X9GO0LvQuF/QsNCy0LNf0YHQtdC/X9C+0LrRgl/QvdC+0LVf0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQvdC10LTQtdC70Y9f0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNGP0LTQsF/Rh9C10YLQstGK0YDRgtGK0Lpf0L/QtdGC0YrQul/RgdGK0LHQvtGC0LAiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi0L3QtdC0X9C/0L7QvV/QstGC0L5f0YHRgNGPX9GH0LXRgl/Qv9C10YJf0YHRitCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQvdC0X9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQlNC90LXRgSDQsl0gTFQiLG5leHREYXk6IlvQo9GC0YDQtSDQsl0gTFQiLG5leHRXZWVrOiJkZGRkIFvQsl0gTFQiLGxhc3REYXk6IlvQktGH0LXRgNCwINCyXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpjYXNlIDY6cmV0dXJuIlvQkiDQuNC30LzQuNC90LDQu9Cw0YLQsF0gZGRkZCBb0LJdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIlvQkiDQuNC30LzQuNC90LDQu9C40Y9dIGRkZGQgW9CyXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLRgdC70LXQtCAlcyIscGFzdDoi0L/RgNC10LTQuCAlcyIsczoi0L3Rj9C60L7Qu9C60L4g0YHQtdC60YPQvdC00LgiLG06ItC80LjQvdGD0YLQsCIsbW06IiVkINC80LjQvdGD0YLQuCIsaDoi0YfQsNGBIixoaDoiJWQg0YfQsNGB0LAiLGQ6ItC00LXQvSIsZGQ6IiVkINC00L3QuCIsTToi0LzQtdGB0LXRhiIsTU06IiVkINC80LXRgdC10YbQsCIseToi0LPQvtC00LjQvdCwIix5eToiJWQg0LPQvtC00LjQvdC4In0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjQtdCyfNC10L180YLQuHzQstC4fNGA0Lh80LzQuCkvLG9yZGluYWw6ZnVuY3Rpb24odCl7dmFyIGU9dCUxMCxuPXQlMTAwO3JldHVybiAwPT09dD90KyIt0LXQsiI6MD09PW4/dCsiLdC10L0iOm4+MTAmJm48MjA/dCsiLdGC0LgiOjE9PT1lP3QrIi3QstC4IjoyPT09ZT90KyIt0YDQuCI6Nz09PWV8fDg9PT1lP3QrIi3QvNC4Ijp0KyIt0YLQuCJ9LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXsxOiLgp6ciLDI6IuCnqCIsMzoi4KepIiw0OiLgp6oiLDU6IuCnqyIsNjoi4KesIiw3OiLgp60iLDg6IuCnriIsOToi4KevIiwwOiLgp6YifSxuPXsi4KenIjoiMSIsIuCnqCI6IjIiLCLgp6kiOiIzIiwi4KeqIjoiNCIsIuCnqyI6IjUiLCLgp6wiOiI2Iiwi4KetIjoiNyIsIuCnriI6IjgiLCLgp68iOiI5Iiwi4KemIjoiMCJ9LGk9dC5kZWZpbmVMb2NhbGUoImJuIix7bW9udGhzOiLgppzgpr7gpqjgp4Hgp5/gpr7gprDgp4Bf4Kar4KeH4Kas4KeB4Kef4Ka+4Kaw4KeAX+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaF4KaX4Ka+4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn+Cnh+CmruCnjeCmrOCmsF/gpoXgppXgp43gpp/gp4vgpqzgprBf4Kao4Kat4KeH4Kau4KeN4Kas4KawX+CmoeCmv+CmuOCnh+CmruCnjeCmrOCmsCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Kac4Ka+4Kao4KeBX+Cmq+Cnh+CmrF/gpq7gpr7gprDgp43gpppf4KaP4Kaq4KawX+CmruCnh1/gppzgp4Hgpqhf4Kac4KeB4KayX+CmheCml1/gprjgp4fgpqrgp43gpp9f4KaF4KaV4KeN4Kaf4KeLX+CmqOCmrV/gpqHgpr/gprjgp4fgpq7gp40iLnNwbGl0KCJfIiksd2Vla2RheXM6IuCmsOCmrOCmv+CmrOCmvuCmsF/gprjgp4vgpq7gpqzgpr7gprBf4Kau4KaZ4KeN4KaX4Kay4Kas4Ka+4KawX+CmrOCngeCmp+CmrOCmvuCmsF/gpqzgp4Pgprngprjgp43gpqrgpqTgp43gpqTgpr/gpqzgpr7gprBf4Ka24KeB4KaV4KeN4Kaw4Kas4Ka+4KawX+CmtuCmqOCmv+CmrOCmvuCmsCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgprDgpqzgpr9f4Ka44KeL4KauX+CmruCmmeCnjeCml+Cmsl/gpqzgp4Hgpqdf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4KeN4Kak4Ka/X+CmtuCngeCmleCnjeCmsF/gprbgpqjgpr8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuCmsOCmrF/gprjgpq5f4Kau4KaZ4KeN4KaXX+CmrOCngV/gpqzgp43gprDgpr/gprlf4Ka24KeBX+CmtuCmqOCmvyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSDgprjgpq7gp58iLExUUzoiQSBoOm1tOnNzIOCmuOCmruCnnyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCmuOCmruCnnyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KaG4KacXSBMVCIsbmV4dERheToiW+CmhuCml+CmvuCmruCngOCmleCmvuCmsl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+Cml+CmpOCmleCmvuCmsl0gTFQiLGxhc3RXZWVrOiJb4KaX4KakXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4Kaq4Kaw4KeHIixwYXN0OiIlcyDgpobgppfgp4ciLHM6IuCmleCnn+Cnh+CmlSDgprjgp4fgppXgp4fgpqjgp43gpqEiLG06IuCmj+CmlSDgpq7gpr/gpqjgpr/gpp8iLG1tOiIlZCDgpq7gpr/gpqjgpr/gpp8iLGg6IuCmj+CmlSDgppjgpqjgp43gpp/gpr4iLGhoOiIlZCDgppjgpqjgp43gpp/gpr4iLGQ6IuCmj+CmlSDgpqbgpr/gpqgiLGRkOiIlZCDgpqbgpr/gpqgiLE06IuCmj+CmlSDgpq7gpr7gprgiLE1NOiIlZCDgpq7gpr7gprgiLHk6IuCmj+CmlSDgpqzgppvgprAiLHl5OiIlZCDgpqzgppvgprAifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4Ken4Keo4Kep4Keq4Ker4Kes4Ket4Keu4Kev4KemXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSxtZXJpZGllbVBhcnNlOi/gprDgpr7gpqR84Ka44KaV4Ka+4KayfOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Kaw4Ka+4KakLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMTI9PT10JiYodD0wKSwi4Kaw4Ka+4KakIj09PWUmJnQ+PTR8fCLgpqbgp4Hgpqrgp4HgprAiPT09ZSYmdDw1fHwi4Kas4Ka/4KaV4Ka+4KayIj09PWU/dCsxMjp0fSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i4Kaw4Ka+4KakIjp0PDEwPyLgprjgppXgpr7gprIiOnQ8MTc/IuCmpuCngeCmquCngeCmsCI6dDwyMD8i4Kas4Ka/4KaV4Ka+4KayIjoi4Kaw4Ka+4KakIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6IuC8oSIsMjoi4LyiIiwzOiLgvKMiLDQ6IuC8pCIsNToi4LylIiw2OiLgvKYiLDc6IuC8pyIsODoi4LyoIiw5OiLgvKkiLDA6IuC8oCJ9LG49eyLgvKEiOiIxIiwi4LyiIjoiMiIsIuC8oyI6IjMiLCLgvKQiOiI0Iiwi4LylIjoiNSIsIuC8piI6IjYiLCLgvKciOiI3Iiwi4LyoIjoiOCIsIuC8qSI6IjkiLCLgvKAiOiIwIn0saT10LmRlZmluZUxvY2FsZSgiYm8iLHttb250aHM6IuC9n+C+s+C8i+C9luC8i+C9keC9hOC8i+C9lOC9vF/gvZ/gvrPgvIvgvZbgvIvgvYLgvYngvbLgvabgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2C4L2m4L204L2Y4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9nuC9suC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvaPgvpTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L6y4L204L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9keC9tOC9k+C8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvaLgvpLgvrHgvZHgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L2C4L204LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvYLgvYXgvbLgvYLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2J4L2y4L2m4LyL4L2UIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgvZ/gvrPgvIvgvZbgvIvgvZHgvYTgvIvgvZTgvbxf4L2f4L6z4LyL4L2W4LyL4L2C4L2J4L2y4L2m4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9guC9puC9tOC9mOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZ7gvbLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2j4L6U4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC+suC9tOC9guC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZHgvbTgvZPgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2i4L6S4L6x4L2R4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC9guC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2F4L2y4L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9guC9ieC9suC9puC8i+C9lCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4L2C4L2f4L2g4LyL4L2J4L2y4LyL4L2Y4LyLX+C9guC9n+C9oOC8i+C9n+C+s+C8i+C9luC8i1/gvYLgvZ/gvaDgvIvgvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2C4L2f4L2g4LyL4L2j4L634L2C4LyL4L2U4LyLX+C9guC9n+C9oOC8i+C9leC9tOC9ouC8i+C9luC9tF/gvYLgvZ/gvaDgvIvgvZTgvIvgvabgvYTgvabgvItf4L2C4L2f4L2g4LyL4L2m4L6k4L264L2T4LyL4L2U4LyLIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC9ieC9suC8i+C9mOC8i1/gvZ/gvrPgvIvgvZbgvItf4L2Y4L2y4L2C4LyL4L2R4L2Y4L2i4LyLX+C9o+C+t+C9guC8i+C9lOC8i1/gvZXgvbTgvaLgvIvgvZbgvbRf4L2U4LyL4L2m4L2E4L2m4LyLX+C9puC+pOC9uuC9k+C8i+C9lOC8iyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4L2J4L2y4LyL4L2Y4LyLX+C9n+C+s+C8i+C9luC8i1/gvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2j4L634L2C4LyL4L2U4LyLX+C9leC9tOC9ouC8i+C9luC9tF/gvZTgvIvgvabgvYTgvabgvA==", "base64"));
  res.write(new Buffer("i1/gvabgvqTgvbrgvZPgvIvgvZTgvIsiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0iLExUUzoiQSBoOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4L2R4L2y4LyL4L2i4L2y4L2EXSBMVCIsbmV4dERheToiW+C9puC9hOC8i+C9ieC9suC9k10gTFQiLG5leHRXZWVrOiJb4L2W4L2R4L204L2T4LyL4L2V4L6y4L2C4LyL4L2i4L6X4L264L2m4LyL4L2YXSwgTFQiLGxhc3REYXk6IlvgvYHgvIvgvabgvYRdIExUIixsYXN0V2VlazoiW+C9luC9keC9tOC9k+C8i+C9leC+suC9guC8i+C9mOC9kOC9oOC8i+C9mF0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOC9o+C8iyIscGFzdDoiJXMg4L2m4L6U4L2T4LyL4L2jIixzOiLgvaPgvZjgvIvgvabgvYQiLG06IuC9puC+kOC9ouC8i+C9mOC8i+C9guC9heC9suC9giIsbW06IiVkIOC9puC+kOC9ouC8i+C9mCIsaDoi4L2G4L204LyL4L2a4L284L2R4LyL4L2C4L2F4L2y4L2CIixoaDoiJWQg4L2G4L204LyL4L2a4L284L2RIixkOiLgvYngvbLgvZPgvIvgvYLgvYXgvbLgvYIiLGRkOiIlZCDgvYngvbLgvZPgvIsiLE06IuC9n+C+s+C8i+C9luC8i+C9guC9heC9suC9giIsTU06IiVkIOC9n+C+s+C8i+C9liIseToi4L2j4L284LyL4L2C4L2F4L2y4L2CIix5eToiJWQg4L2j4L28In0scHJlcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW+C8oeC8ouC8o+C8pOC8peC8puC8p+C8qOC8qeC8oF0vZyxmdW5jdGlvbih0KXtyZXR1cm4gblt0XX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xkL2csZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX0sbWVyaWRpZW1QYXJzZTov4L2Y4L2a4L2T4LyL4L2Y4L28fOC9nuC9vOC9guC9puC8i+C9gOC9pnzgvYngvbLgvZPgvIvgvYLgvbTgvYR84L2R4L2C4L284L2E4LyL4L2R4L2CfOC9mOC9muC9k+C8i+C9mOC9vC8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDEyPT09dCYmKHQ9MCksIuC9mOC9muC9k+C8i+C9mOC9vCI9PT1lJiZ0Pj00fHwi4L2J4L2y4L2T4LyL4L2C4L204L2EIj09PWUmJnQ8NXx8IuC9keC9guC9vOC9hOC8i+C9keC9giI9PT1lP3QrMTI6dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDQ/IuC9mOC9muC9k+C8i+C9mOC9vCI6dDwxMD8i4L2e4L284L2C4L2m4LyL4L2A4L2mIjp0PDE3PyLgvYngvbLgvZPgvIvgvYLgvbTgvYQiOnQ8MjA/IuC9keC9guC9vOC9hOC8i+C9keC9giI6IuC9mOC9muC9k+C8i+C9mOC9vCJ9LHdlZWs6e2RvdzowLGRveTo2fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4pe3ZhciBpPXttbToibXVudXRlbm4iLE1NOiJtaXoiLGRkOiJkZXZlemgifTtyZXR1cm4gdCsiICIrcihpW25dLHQpfWZ1bmN0aW9uIG4odCl7c3dpdGNoKGkodCkpe2Nhc2UgMTpjYXNlIDM6Y2FzZSA0OmNhc2UgNTpjYXNlIDk6cmV0dXJuIHQrIiBibG9heiI7ZGVmYXVsdDpyZXR1cm4gdCsiIHZsb2F6In19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdD45P2kodCUxMCk6dH1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIDI9PT1lP28odCk6dH1mdW5jdGlvbiBvKHQpe3ZhciBlPXttOiJ2IixiOiJ2IixkOiJ6In07cmV0dXJuIHZvaWQgMD09PWVbdC5jaGFyQXQoMCldP3Q6ZVt0LmNoYXJBdCgwKV0rdC5zdWJzdHJpbmcoMSl9dmFyIHM9dC5kZWZpbmVMb2NhbGUoImJyIix7bW9udGhzOiJHZW52ZXJfQydod2V2cmVyX01ldXJ6aF9FYnJlbF9NYWVfTWV6aGV2ZW5fR291ZXJlX0Vvc3RfR3dlbmdvbG9fSGVyZV9EdV9LZXJ6dSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiR2VuX0MnaHdlX01ldV9FYnJfTWFlX0V2ZV9Hb3VfRW9zX0d3ZV9IZXJfRHVfS2VyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdWxfTHVuX01ldXJ6aF9NZXJjJ2hlcl9ZYW91X0d3ZW5lcl9TYWRvcm4iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3VsX0x1bl9NZXVfTWVyX1lhb19Hd2VfU2FkIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9MdV9NZV9NZXJfWWFfR3dfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoW2VdbW0gQSIsTFRTOiJoW2VdbW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgW2Egdml6XSBNTU1NIFlZWVkiLExMTDoiRCBbYSB2aXpdIE1NTU0gWVlZWSBoW2VdbW0gQSIsTExMTDoiZGRkZCwgRCBbYSB2aXpdIE1NTU0gWVlZWSBoW2VdbW0gQSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSGl6aXYgZGFdIExUIixuZXh0RGF5OiJbV2FyYydob2F6aCBkYV0gTFQiLG5leHRXZWVrOiJkZGRkIFtkYV0gTFQiLGxhc3REYXk6IltEZWMnaCBkYV0gTFQiLGxhc3RXZWVrOiJkZGRkIFtwYXNldCBkYV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImEtYmVubiAlcyIscGFzdDoiJXMgJ3pvIixzOiJ1biBuZWJldWQgc2Vnb25kZW5ub8O5IixtOiJ1ciB2dW51dGVubiIsbW06ZSxoOiJ1biBldXIiLGhoOiIlZCBldXIiLGQ6InVuIGRldmV6aCIsZGQ6ZSxNOiJ1ciBtaXoiLE1NOmUseToidXIgYmxvYXoiLHl5Om59LG9yZGluYWxQYXJzZTovXGR7MSwyfShhw7F8dmV0KS8sb3JkaW5hbDpmdW5jdGlvbih0KXt2YXIgZT0xPT09dD8iYcOxIjoidmV0IjtyZXR1cm4gdCtlfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gc30pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQsZSxuKXt2YXIgaT10KyIgIjtzd2l0Y2gobil7Y2FzZSJtIjpyZXR1cm4gZT8iamVkbmEgbWludXRhIjoiamVkbmUgbWludXRlIjtjYXNlIm1tIjpyZXR1cm4gaSs9MT09PXQ/Im1pbnV0YSI6Mj09PXR8fDM9PT10fHw0PT09dD8ibWludXRlIjoibWludXRhIjtjYXNlImgiOnJldHVybiBlPyJqZWRhbiBzYXQiOiJqZWRub2cgc2F0YSI7Y2FzZSJoaCI6cmV0dXJuIGkrPTE9PT10PyJzYXQiOjI9PT10fHwzPT09dHx8ND09PXQ/InNhdGEiOiJzYXRpIjtjYXNlImRkIjpyZXR1cm4gaSs9MT09PXQ/ImRhbiI6ImRhbmEiO2Nhc2UiTU0iOnJldHVybiBpKz0xPT09dD8ibWplc2VjIjoyPT09dHx8Mz09PXR8fDQ9PT10PyJtamVzZWNhIjoibWplc2VjaSI7Y2FzZSJ5eSI6cmV0dXJuIGkrPTE9PT10PyJnb2RpbmEiOjI9PT10fHwzPT09dHx8ND09PXQ/ImdvZGluZSI6ImdvZGluYSJ9fXZhciBuPXQuZGVmaW5lTG9jYWxlKCJicyIse21vbnRoczoiamFudWFyX2ZlYnJ1YXJfbWFydF9hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iYXJfb2t0b2Jhcl9ub3ZlbWJhcl9kZWNlbWJhciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuLl9mZWIuX21hci5fYXByLl9tYWouX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6Im5lZGplbGphX3BvbmVkamVsamFrX3V0b3Jha19zcmlqZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVkLl9wb24uX3V0by5fc3JpLl/EjWV0Ll9wZXQuX3N1Yi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Im5lX3BvX3V0X3NyX8SNZV9wZV9zdSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGplbGp1XSBbdV0gTFQiO2Nhc2UgMzpyZXR1cm4iW3VdIFtzcmlqZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lciB1XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpyZXR1cm4iW3Byb8WhbHVdIGRkZGQgW3VdIExUIjtjYXNlIDY6cmV0dXJuIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3Byb8WhbGldIGRkZGQgW3VdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiJwcmlqZSAlcyIsczoicGFyIHNla3VuZGkiLG06ZSxtbTplLGg6ZSxoaDplLGQ6ImRhbiIsZGQ6ZSxNOiJtamVzZWMiLE1NOmUseToiZ29kaW51Iix5eTplfSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiY2EiLHttb250aHM6ImdlbmVyX2ZlYnJlcl9tYXLDp19hYnJpbF9tYWlnX2p1bnlfanVsaW9sX2Fnb3N0X3NldGVtYnJlX29jdHVicmVfbm92ZW1icmVfZGVzZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imdlbi5fZmVici5fbWFyLl9hYnIuX21haS5fanVuLl9qdWwuX2FnLl9zZXQuX29jdC5fbm92Ll9kZXMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkaXVtZW5nZV9kaWxsdW5zX2RpbWFydHNfZGltZWNyZXNfZGlqb3VzX2RpdmVuZHJlc19kaXNzYWJ0ZSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkZy5fZGwuX2R0Ll9kYy5fZGouX2R2Ll9kcy4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkRnX0RsX0R0X0RjX0RqX0R2X0RzIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW2F2dWkgYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbmV4dERheTpmdW5jdGlvbigpe3JldHVybiJbZGVtw6AgYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iZGRkZCBbYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbGFzdERheTpmdW5jdGlvbigpe3JldHVybiJbYWhpciBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbZWxdIGRkZGQgW3Bhc3NhdCBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbiAlcyIscGFzdDoiZmEgJXMiLHM6InVucyBzZWdvbnMiLG06InVuIG1pbnV0IixtbToiJWQgbWludXRzIixoOiJ1bmEgaG9yYSIsaGg6IiVkIGhvcmVzIixkOiJ1biBkaWEiLGRkOiIlZCBkaWVzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNvcyIseToidW4gYW55Iix5eToiJWQgYW55cyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShyfG58dHzDqHxhKS8sb3JkaW5hbDpmdW5jdGlvbih0LGUpe3ZhciBuPTE9PT10PyJyIjoyPT09dD8ibiI6Mz09PXQ/InIiOjQ9PT10PyJ0Ijoiw6giO3JldHVybiJ3IiE9PWUmJiJXIiE9PWV8fChuPSJhIiksdCtufSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3JldHVybiB0PjEmJnQ8NSYmMSE9PX5+KHQvMTApfWZ1bmN0aW9uIG4odCxuLGkscil7dmFyIG89dCsiICI7c3dpdGNoKGkpe2Nhc2UicyI6cmV0dXJuIG58fHI/InDDoXIgc2VrdW5kIjoicMOhciBzZWt1bmRhbWkiO2Nhc2UibSI6cmV0dXJuIG4/Im1pbnV0YSI6cj8ibWludXR1IjoibWludXRvdSI7Y2FzZSJtbSI6cmV0dXJuIG58fHI/bysoZSh0KT8ibWludXR5IjoibWludXQiKTpvKyJtaW51dGFtaSI7Y2FzZSJoIjpyZXR1cm4gbj8iaG9kaW5hIjpyPyJob2RpbnUiOiJob2Rpbm91IjtjYXNlImhoIjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJob2RpbnkiOiJob2RpbiIpOm8rImhvZGluYW1pIjtjYXNlImQiOnJldHVybiBufHxyPyJkZW4iOiJkbmVtIjtjYXNlImRkIjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJkbnkiOiJkbsOtIik6bysiZG55IjtjYXNlIk0iOnJldHVybiBufHxyPyJtxJtzw61jIjoibcSbc8OtY2VtIjtjYXNlIk1NIjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJtxJtzw61jZSI6Im3Em3PDrWPFryIpOm8rIm3Em3PDrWNpIjtjYXNlInkiOnJldHVybiBufHxyPyJyb2siOiJyb2tlbSI7Y2FzZSJ5eSI6cmV0dXJuIG58fHI/bysoZSh0KT8icm9reSI6ImxldCIpOm8rImxldHkifX12YXIgaT0ibGVkZW5fw7pub3JfYsWZZXplbl9kdWJlbl9rdsSbdGVuX8SNZXJ2ZW5fxI1lcnZlbmVjX3NycGVuX3rDocWZw61fxZnDrWplbl9saXN0b3BhZF9wcm9zaW5lYyIuc3BsaXQoIl8iKSxyPSJsZWRfw7pub19ixZllX2R1Yl9rdsSbX8SNdm5fxI12Y19zcnBfesOhxZlfxZnDrWpfbGlzX3BybyIuc3BsaXQoIl8iKSxvPXQuZGVmaW5lTG9jYWxlKCJjcyIse21vbnRoczppLG1vbnRoc1Nob3J0OnIsbW9udGhzUGFyc2U6ZnVuY3Rpb24odCxlKXt2YXIgbixpPVtdO2ZvcihuPTA7bjwxMjtuKyspaVtuXT1uZXcgUmVnRXhwKCJeIit0W25dKyIkfF4iK2Vbbl0rIiQiLCJpIik7cmV0dXJuIGl9KGksciksc2hvcnRNb250aHNQYXJzZTpmdW5jdGlvbih0KXt2YXIgZSxuPVtdO2ZvcihlPTA7ZTwxMjtlKyspbltlXT1uZXcgUmVnRXhwKCJeIit0W2VdKyIkIiwiaSIpO3JldHVybiBufShyKSxsb25nTW9udGhzUGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUsbj1bXTtmb3IoZT0wO2U8MTI7ZSsrKW5bZV09bmV3IFJlZ0V4cCgiXiIrdFtlXSsiJCIsImkiKTtyZXR1cm4gbn0oaSksd2Vla2RheXM6Im5lZMSbbGVfcG9uZMSbbMOtX8O6dGVyw71fc3TFmWVkYV/EjXR2cnRla19ww6F0ZWtfc29ib3RhIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Im5lX3BvX8O6dF9zdF/EjXRfcMOhX3NvIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb1/DunRfc3RfxI10X3DDoV9zbyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZG5lcyB2XSBMVCIsbmV4dERheToiW3rDrXRyYSB2XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdiBuZWTEm2xpIHZdIExUIjtjYXNlIDE6Y2FzZSAyOnJldHVybiJbdl0gZGRkZCBbdl0gTFQiO2Nhc2UgMzpyZXR1cm4iW3ZlIHN0xZllZHUgdl0gTFQiO2Nhc2UgNDpyZXR1cm4iW3ZlIMSNdHZydGVrIHZdIExUIjtjYXNlIDU6cmV0dXJuIlt2IHDDoXRlayB2XSBMVCI7Y2FzZSA2OnJldHVybiJbdiBzb2JvdHUgdl0gTFQifX0sbGFzdERheToiW3bEjWVyYSB2XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbbWludWxvdSBuZWTEm2xpIHZdIExUIjtjYXNlIDE6Y2FzZSAyOnJldHVybiJbbWludWzDqV0gZGRkZCBbdl0gTFQiO2Nhc2UgMzpyZXR1cm4iW21pbnVsb3Ugc3TFmWVkdSB2XSBMVCI7Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW21pbnVsw71dIGRkZGQgW3ZdIExUIjtjYXNlIDY6cmV0dXJuIlttaW51bG91IHNvYm90dSB2XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJ6YSAlcyIscGFzdDoicMWZZWQgJXMiLHM6bixtOm4sbW06bixoOm4saGg6bixkOm4sZGQ6bixNOm4sTU06bix5Om4seXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImN2Iix7bW9udGhzOiLQutOR0YDQu9Cw0Ydf0L3QsNGA05HRgV/Qv9GD0Yhf0LDQutCwX9C80LDQuV/Sq9OX0YDRgtC80LVf0YPRgtORX9Kr0YPRgNC70LBf0LDQstOR0L1f0Y7Qv9CwX9GH07PQul/RgNCw0YjRgtCw0LIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItC605HRgF/QvdCw0YBf0L/Rg9GIX9Cw0LrQsF/QvNCw0Llf0qvTl9GAX9GD0YLTkV/Sq9GD0YBf0LDQstC9X9GO0L/QsF/Rh9Oz0Lpf0YDQsNGIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQstGL0YDRgdCw0YDQvdC40LrRg9C9X9GC0YPQvdGC0LjQutGD0L1f0YvRgtC70LDRgNC40LrRg9C9X9GO0L3QutGD0L1f0LrTl9Kr0L3QtdGA0L3QuNC60YPQvV/RjdGA0L3QtdC60YPQvV/RiNOR0LzQsNGC0LrRg9C9Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItCy0YvRgF/RgtGD0L1f0YvRgtC7X9GO0L1f0LrTl9KrX9GN0YDQvV/RiNOR0LwiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItCy0YBf0YLQvV/Ri9GCX9GO0L1f0LrSq1/RjdGAX9GI0LwiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQtTU0tWVlZWSIsTEw6IllZWVkgW9Kr0YPQu9GF0LhdIE1NTU0gW9GD0LnTkdGF05fQvV0gRFst0LzTl9GI05ddIixMTEw6IllZWVkgW9Kr0YPQu9GF0LhdIE1NTU0gW9GD0LnTkdGF05fQvV0gRFst0LzTl9GI05ddLCBISDptbSIsTExMTDoiZGRkZCwgWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10sIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQn9Cw0Y/QvV0gTFQgW9GB0LXRhdC10YLRgNC1XSIsbmV4dERheToiW9Cr0YDQsNC9XSBMVCBb0YHQtdGF0LXRgtGA0LVdIixsYXN0RGF5OiJb05bQvdC10YBdIExUIFvRgdC10YXQtdGC0YDQtV0iLG5leHRXZWVrOiJb0qrQuNGC0LXRgV0gZGRkZCBMVCBb0YHQtdGF0LXRgtGA0LVdIixsYXN0V2VlazoiW9CY0YDRgtC905ddIGRkZGQgTFQgW9GB0LXRhdC10YLRgNC1XSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpmdW5jdGlvbih0KXt2YXIgZT0v0YHQtdGF0LXRgiQvaS5leGVjKHQpPyLRgNC10L0iOi/Sq9GD0LskL2kuZXhlYyh0KT8i0YLQsNC9Ijoi0YDQsNC9IjtyZXR1cm4gdCtlfSxwYXN0OiIlcyDQutCw0Y/Qu9C70LAiLHM6ItC/05fRgC3QuNC6INKr0LXQutC60YPQvdGCIixtOiLQv9OX0YAg0LzQuNC90YPRgiIsbW06IiVkINC80LjQvdGD0YIiLGg6ItC/05fRgCDRgdC10YXQtdGCIixoaDoiJWQg0YHQtdGF0LXRgiIsZDoi0L/Tl9GAINC60YPQvSIsZGQ6IiVkINC60YPQvSIsTToi0L/Tl9GAINGD0LnTkdGFIixNTToiJWQg0YPQudOR0YUiLHk6ItC/05fRgCDSq9GD0LsiLHl5OiIlZCDSq9GD0LsifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0t0LzTl9GILyxvcmRpbmFsOiIlZC3QvNOX0YgiLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJjeSIse21vbnRoczoiSW9uYXdyX0Nod2Vmcm9yX01hd3J0aF9FYnJpbGxfTWFpX01laGVmaW5fR29yZmZlbm5hZl9Bd3N0X01lZGlfSHlkcmVmX1RhY2h3ZWRkX1JoYWdmeXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Iklvbl9DaHdlX01hd19FYnJfTWFpX01laF9Hb3JfQXdzX01lZF9IeWRfVGFjaF9SaGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEeWRkIFN1bF9EeWRkIExsdW5fRHlkZCBNYXdydGhfRHlkZCBNZXJjaGVyX0R5ZGQgSWF1X0R5ZGQgR3dlbmVyX0R5ZGQgU2Fkd3JuIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bF9MbHVuX01hd19NZXJfSWF1X0d3ZV9TYWQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X0xsX01hX01lX0lhX0d3X1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hlZGRpdyBhbV0gTFQiLG5leHREYXk6IltZZm9yeSBhbV0gTFQiLG5leHRXZWVrOiJkZGRkIFthbV0gTFQiLGxhc3REYXk6IltEZG9lIGFtXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rpd2V0aGFmIGFtXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToibWV3biAlcyIscGFzdDoiJXMgeW4gw7RsIixzOiJ5Y2h5ZGlnIGVpbGlhZGF1IixtOiJtdW51ZCIsbW06IiVkIG11bnVkIixoOiJhd3IiLGhoOiIlZCBhd3IiLGQ6ImRpd3Jub2QiLGRkOiIlZCBkaXdybm9kIixNOiJtaXMiLE1NOiIlZCBtaXMiLHk6ImJsd3lkZHluIix5eToiJWQgZmx5bmVkZCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShmZWR8YWlufGFmfGlsfHlkZHxlZHxlZykvLG9yZGluYWw6ZnVuY3Rpb24odCl7dmFyIGU9dCxuPSIiLGk9WyIiLCJhZiIsImlsIiwieWRkIiwieWRkIiwiZWQiLCJlZCIsImVkIiwiZmVkIiwiZmVkIiwiZmVkIiwiZWciLCJmZWQiLCJlZyIsImVnIiwiZmVkIiwiZWciLCJlZyIsImZlZCIsImVnIiwiZmVkIl07cmV0dXJuIGU+MjA/bj00MD09PWV8fDUwPT09ZXx8NjA9PT1lfHw4MD09PWV8fDEwMD09PWU/ImZlZCI6ImFpbiI6ZT4wJiYobj1pW2VdKSx0K259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJkYSIse21vbnRoczoiamFudWFyX2ZlYnJ1YXJfbWFydHNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3Rfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzw7huZGFnX21hbmRhZ190aXJzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7hyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InPDuG5fbWFuX3Rpcl9vbnNfdG9yX2ZyZV9sw7hyIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzw7hfbWFfdGlfb25fdG9fZnJfbMO4Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJELg==", "base64"));
  res.write(new Buffer("IE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgW2QuXSBELiBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0kgZGFnIGtsLl0gTFQiLG5leHREYXk6IltJIG1vcmdlbiBrbC5dIExUIixuZXh0V2VlazoiZGRkZCBba2wuXSBMVCIsbGFzdERheToiW0kgZ8OlciBrbC5dIExUIixsYXN0V2VlazoiW3NpZHN0ZV0gZGRkZCBba2xdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvbSAlcyIscGFzdDoiJXMgc2lkZW4iLHM6ImbDpSBzZWt1bmRlciIsbToiZXQgbWludXQiLG1tOiIlZCBtaW51dHRlciIsaDoiZW4gdGltZSIsaGg6IiVkIHRpbWVyIixkOiJlbiBkYWciLGRkOiIlZCBkYWdlIixNOiJlbiBtw6VuZWQiLE1NOiIlZCBtw6VuZWRlciIseToiZXQgw6VyIix5eToiJWQgw6VyIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsbixpKXt2YXIgcj17bTpbImVpbmUgTWludXRlIiwiZWluZXIgTWludXRlIl0saDpbImVpbmUgU3R1bmRlIiwiZWluZXIgU3R1bmRlIl0sZDpbImVpbiBUYWciLCJlaW5lbSBUYWciXSxkZDpbdCsiIFRhZ2UiLHQrIiBUYWdlbiJdLE06WyJlaW4gTW9uYXQiLCJlaW5lbSBNb25hdCJdLE1NOlt0KyIgTW9uYXRlIix0KyIgTW9uYXRlbiJdLHk6WyJlaW4gSmFociIsImVpbmVtIEphaHIiXSx5eTpbdCsiIEphaHJlIix0KyIgSmFocmVuIl19O3JldHVybiBlP3Jbbl1bMF06cltuXVsxXX12YXIgbj10LmRlZmluZUxvY2FsZSgiZGUiLHttb250aHM6IkphbnVhcl9GZWJydWFyX03DpHJ6X0FwcmlsX01haV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW4uX0ZlYnIuX01yei5fQXByLl9NYWlfSnVuLl9KdWwuX0F1Zy5fU2VwdC5fT2t0Ll9Ob3YuX0Rlei4iLnNwbGl0KCJfIiksd2Vla2RheXM6IlNvbm50YWdfTW9udGFnX0RpZW5zdGFnX01pdHR3b2NoX0Rvbm5lcnN0YWdfRnJlaXRhZ19TYW1zdGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlNvLl9Nby5fRGkuX01pLl9Eby5fRnIuX1NhLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU29fTW9fRGlfTWlfRG9fRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbaGV1dGUgdW1dIExUIFtVaHJdIixzYW1lRWxzZToiTCI=", "base64"));
  res.write(new Buffer("LG5leHREYXk6Ilttb3JnZW4gdW1dIExUIFtVaHJdIixuZXh0V2VlazoiZGRkZCBbdW1dIExUIFtVaHJdIixsYXN0RGF5OiJbZ2VzdGVybiB1bV0gTFQgW1Vocl0iLGxhc3RXZWVrOiJbbGV0enRlbl0gZGRkZCBbdW1dIExUIFtVaHJdIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImluICVzIixwYXN0OiJ2b3IgJXMiLHM6ImVpbiBwYWFyIFNla3VuZGVuIixtOmUsbW06IiVkIE1pbnV0ZW4iLGg6ZSxoaDoiJWQgU3R1bmRlbiIsZDplLGRkOmUsTTplLE1NOmUseTplLHl5OmV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4saSl7dmFyIHI9e206WyJlaW5lIE1pbnV0ZSIsImVpbmVyIE1pbnV0ZSJdLGg6WyJlaW5lIFN0dW5kZSIsImVpbmVyIFN0dW5kZSJdLGQ6WyJlaW4gVGFnIiwiZWluZW0gVGFnIl0sZGQ6W3QrIiBUYWdlIix0KyIgVGFnZW4iXSxNOlsiZWluIE1vbmF0IiwiZWluZW0gTW9uYXQiXSxNTTpbdCsiIE1vbmF0ZSIsdCsiIE1vbmF0ZW4iXSx5OlsiZWluIEphaHIiLCJlaW5lbSBKYWhyIl0seXk6W3QrIiBKYWhyZSIsdCsiIEphaHJlbiJdfTtyZXR1cm4gZT9yW25dWzBdOnJbbl1bMV19dmFyIG49dC5kZWZpbmVMb2NhbGUoImRlLWF0Iix7bW9udGhzOiJKw6RubmVyX0ZlYnJ1YXJfTcOkcnpfQXByaWxfTWFpX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IkrDpG4uX0ZlYnIuX01yei5fQXByLl9NYWlfSnVuLl9KdWwuX0F1Zy5fU2VwdC5fT2t0Ll9Ob3YuX0Rlei4iLnNwbGl0KCJfIiksd2Vla2RheXM6IlNvbm50YWdfTW9udGFnX0RpZW5zdGFnX01pdHR3b2NoX0Rvbm5lcnN0YWdfRnJlaXRhZ19TYW1zdGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlNvLl9Nby5fRGkuX01pLl9Eby5fRnIuX1NhLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU29fTW9fRGlfTWlfRG9fRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbaGV1dGUgdW1dIExUIFtVaHJdIixzYW1lRWxzZToiTCIsbmV4dERheToiW21vcmdlbiB1bV0gTFQgW1Vocl0iLG5leHRXZWVrOiJkZGRkIFt1bV0gTFQgW1Vocl0iLGxhc3REYXk6IltnZXN0ZXJuIHVtXSBMVCBbVWhyXSIsbGFzdFdlZWs6IltsZXR6dGVuXSBkZGRkIFt1bV0gTFQgW1Vocl0ifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6InZvciAlcyIsczoiZWluIHBhYXIgU2VrdW5kZW4iLG06ZSxtbToiJWQgTWludXRlbiIsaDplLGhoOiIlZCBTdHVuZGVuIixkOmUsZGQ6ZSxNOmUsTU06ZSx5OmUseXk6ZX0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9WyLelt6s3oLeqt6H3qbeg96pIiwi3orerN6E3rDeg96q3ofept6D3qkiLCLeid6n3oPeqN6X3qoiLCLeh96t3pXesN6D3qnejd6qIiwi3onerSIsIt6W3qvegt6wIiwi3pbeqt6N3qbeh96oIiwi3ofer96O3qbekN6w3pPeqiIsIt6Q3qzeld6w3pPerN6J3rDehN6m3oPeqiIsIt6H3q7eht6w3pPer96E3qbeg96qIiwi3oLert6I3qzeid6w3oTept6D3qoiLCLekd6o3pDerN6J3rDehN6m3oPeqiJdLG49WyLeh96n3oveqN6H3rDejN6mIiwi3oDer96J3qYiLCLeh96m3oLesN6O3qfeg96mIiwi3oTeqt6L3qYiLCLehN6q3oPep96Q3rDeit6m3ozeqCIsIt6A3qreht6q3oPeqiIsIt6A3q7egt6o3oDeqN6D3qoiXSxpPXQuZGVmaW5lTG9jYWxlKCJkdiIse21vbnRoczplLG1vbnRoc1Nob3J0OmUsd2Vla2RheXM6bix3ZWVrZGF5c1Nob3J0Om4sd2Vla2RheXNNaW46It6H3qfei96oX96A3q/eid6mX96H3qbegt6wX96E3qrei96mX96E3qreg96nX96A3qreht6qX96A3q7egt6oIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkQvTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/eid6GfN6J3oovLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuIt6J3ooiPT09dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDEyPyLeid6GIjoi3oneiiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb3oneqN6H3qbei96qXSBMVCIsbmV4dERheToiW96J3qfei96m3onep10gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJb3ofeqN6H3rDelN6sXSBMVCIsbGFzdFdlZWs6Ilveit6n3ofeqN6M3qreiN6oXSBkZGRkIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLejN6s3oPerd6O3qbeh96oICVzIixwYXN0OiLeht6q3oPeqN6C3rAgJXMiLHM6It6Q3qjeht6q3oLesN6M3qreht6u3oXerN6H3rAiLG06It6J3qjegt6o3pPerN6H3rAiLG1tOiLeid6o3oLeqN6T3qogJWQiLGg6It6O3qbekd6o3ofeqN6D3qzeh96wIixoaDoi3o7ept6R3qjeh96o3oPeqiAlZCIsZDoi3oveqt6I3qbegN6s3ofesCIsZGQ6It6L3qreiN6m3pDesCAlZCIsTToi3onept6A3qzeh96wIixNTToi3onept6Q3rAgJWQiLHk6It6H3qbegN6m3oPerN6H3rAiLHl5OiLeh96m3oDept6D3qogJWQifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvLC9nLCLYjCIpfSx3ZWVrOntkb3c6Nyxkb3k6MTJ9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHwiW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfXZhciBuPXQuZGVmaW5lTG9jYWxlKCJlbCIse21vbnRoc05vbWluYXRpdmVFbDoizpnOsc69zr/Phc6sz4HOuc6/z4JfzqbOtc6yz4HOv8+FzqzPgc65zr/Pgl/OnM6sz4HPhM65zr/Pgl/Okc+Az4HOr867zrnOv8+CX86czqzOuc6/z4JfzpnOv8+Nzr3Ouc6/z4JfzpnOv8+NzrvOuc6/z4JfzpHPjc6zzr/Phc+Dz4TOv8+CX86jzrXPgM+Ezq3OvM6yz4HOuc6/z4Jfzp/Ous+Ez47Oss+BzrnOv8+CX86dzr/Orc68zrLPgc65zr/Pgl/OlM61zrrOrc68zrLPgc65zr/PgiIuc3BsaXQoIl8iKSxtb250aHNHZW5pdGl2ZUVsOiLOmc6xzr3Ov8+FzrHPgc6vzr/PhV/Ops61zrLPgc6/z4XOsc+Bzq/Ov8+FX86czrHPgc+Ezq/Ov8+FX86Rz4DPgc65zrvOr86/z4VfzpzOsc6Qzr/PhV/Omc6/z4XOvc6vzr/PhV/Omc6/z4XOu86vzr/PhV/Okc+FzrPOv8+Nz4PPhM6/z4VfzqPOtc+Az4TOtc68zrLPgc6vzr/PhV/On866z4TPic6yz4HOr86/z4Vfzp3Ov861zrzOss+Bzq/Ov8+FX86UzrXOus61zrzOss+Bzq/Ov8+FIi5zcGxpdCgiXyIpLG1vbnRoczpmdW5jdGlvbih0LGUpe3JldHVybi9ELy50ZXN0KGUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJNTU1NIikpKT90aGlzLl9tb250aHNHZW5pdGl2ZUVsW3QubW9udGgoKV06dGhpcy5fbW9udGhzTm9taW5hdGl2ZUVsW3QubW9udGgoKV19LG1vbnRoc1Nob3J0OiLOmc6xzr1fzqbOtc6yX86czrHPgV/Okc+Az4FfzpzOsc+KX86Zzr/Phc69X86Zzr/Phc67X86Rz4XOs1/Oo861z4Bfzp/Ous+EX86dzr/OtV/OlM61zroiLnNwbGl0KCJfIiksd2Vla2RheXM6Is6az4XPgc65zrHOus6uX86UzrXPhc+Ezq3Pgc6xX86kz4HOr8+EzrdfzqTOtc+EzqzPgc+EzrdfzqDOrc68z4DPhM63X86gzrHPgc6xz4POus61z4XOrl/Oo86szrLOss6xz4TOvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLOms+Fz4FfzpTOtc+FX86kz4HOuV/OpM61z4RfzqDOtc68X86gzrHPgV/Oo86xzrIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Is6az4VfzpTOtV/OpM+BX86kzrVfzqDOtV/OoM6xX86jzrEiLnNwbGl0KCJfIiksCgltZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ+MTE/bj8izrzOvCI6Is6czpwiOm4/Is+AzrwiOiLOoM6cIn0saXNQTTpmdW5jdGlvbih0KXtyZXR1cm4izrwiPT09KHQrIiIpLnRvTG93ZXJDYXNlKClbMF19LG1lcmlkaWVtUGFyc2U6L1vOoM6cXVwuP86cP1wuPy9pLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXJFbDp7c2FtZURheToiW86jzq7OvM61z4HOsSB7fV0gTFQiLG5leHREYXk6IlvOkc+Nz4HOuc6/IHt9XSBMVCIsbmV4dFdlZWs6ImRkZGQgW3t9XSBMVCIsbGFzdERheToiW86nzrjOtc+CIHt9XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSA2OnJldHVybiJbz4TOvyDPgM+Bzr/Ot86zzr/Pjc68zrXOvc6/XSBkZGRkIFt7fV0gTFQiO2RlZmF1bHQ6cmV0dXJuIlvPhM63zr0gz4DPgc6/zrfOs86/z43OvM61zr3Ot10gZGRkZCBbe31dIExUIn19LHNhbWVFbHNlOiJMIn0sY2FsZW5kYXI6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLl9jYWxlbmRhckVsW3RdLHI9biYmbi5ob3VycygpO3JldHVybiBlKGkpJiYoaT1pLmFwcGx5KG4pKSxpLnJlcGxhY2UoInt9IixyJTEyPT09MT8iz4PPhM63Ijoiz4PPhM65z4IiKX0scmVsYXRpdmVUaW1lOntmdXR1cmU6Is+DzrUgJXMiLHBhc3Q6IiVzIM+Az4HOuc69IixzOiLOu86vzrPOsSDOtM61z4XPhM61z4HPjM67zrXPgM+EzrEiLG06Is6tzr3OsSDOu861z4DPhM+MIixtbToiJWQgzrvOtc+Az4TOrCIsaDoizrzOr86xIM+Oz4HOsSIsaGg6IiVkIM+Oz4HOtc+CIixkOiLOvM6vzrEgzrzOrc+BzrEiLGRkOiIlZCDOvM6tz4HOtc+CIixNOiLOrc69zrHPgiDOvM6uzr3Osc+CIixNTToiJWQgzrzOrs69zrXPgiIseToizq3Ovc6xz4Igz4fPgc+Mzr3Ov8+CIix5eToiJWQgz4fPgc+Mzr3Ouc6xIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9zrcvLG9yZGluYWw6IiVkzrciLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJlbi1hdSIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWU=", "base64"));
  res.write(new Buffer("a2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUb2RheSBhdF0gTFQiLG5leHREYXk6IltUb21vcnJvdyBhdF0gTFQiLG5leHRXZWVrOiJkZGRkIFthdF0gTFQiLGxhc3REYXk6IltZZXN0ZXJkYXkgYXRdIExUIixsYXN0V2VlazoiW0xhc3RdIGRkZGQgW2F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBlPXQlMTAsbj0xPT09fn4odCUxMDAvMTApPyJ0aCI6MT09PWU/InN0IjoyPT09ZT8ibmQiOjM9PT1lPyJyZCI6InRoIjtyZXR1cm4gdCtufSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiZW4tY2EiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiWVlZWS1NTS1ERCIsTEw6Ik1NTU0gRCwgWVlZWSIsTExMOiJNTU1NIEQsIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUb2RheSBhdF0gTFQiLG5leHREYXk6IltUb21vcnJvdyBhdF0gTFQiLG5leHRXZWVrOiJkZGRkIFthdF0gTFQiLGxhc3REYXk6IltZZXN0ZXJkYXkgYXRdIExUIixsYXN0V2VlazoiW0xhc3RdIGRkZGQgW2F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBlPXQlMTAsbj0xPT09fn4odCUxMDAvMTApPyJ0aCI6MT09PWU/InN0IjoyPT09ZT8ibmQiOjM9PT1lPyJyZCI6InRoIjtyZXR1cm4gdCtufX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJlbi1nYiIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVG9kYXkgYXRdIExUIixuZXh0RGF5OiJbVG9tb3Jyb3cgYXRdIExUIixuZXh0V2VlazoiZGRkZCBbYXRdIExUIixsYXN0RGF5OiJbWWVzdGVyZGF5IGF0XSBMVCIsbGFzdFdlZWs6IltMYXN0XSBkZGRkIFthdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImluICVzIixwYXN0OiIlcyBhZ28iLHM6ImEgZmV3IHNlY29uZHMiLG06ImEgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoiYW4gaG91ciIsaGg6IiVkIGhvdXJzIixkOiJhIGRheSIsZGQ6IiVkIGRheXMiLE06ImEgbW9udGgiLE1NOiIlZCBtb250aHMiLHk6ImEgeWVhciIseXk6IiVkIHllYXJzIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0fG5kfHJkfHRoKS8sb3JkaW5hbDpmdW5jdGlvbih0KXt2YXIgZT10JTEwLG49MT09PX5+KHQlMTAwLzEwKT8idGgiOjE9PT1lPyJzdCI6Mj09PWU/Im5kIjozPT09ZT8icmQiOiJ0aCI7cmV0dXJuIHQrbn0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImVuLWllIix7bW9udGhzOiJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9Nb19UdV9XZV9UaF9Gcl9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC1NTS1ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24odCl7dmFyIGU9dCUxMCxuPTE9PT1+fih0JTEwMC8xMCk/InRoIjoxPT09ZT8ic3QiOjI9PT1lPyJuZCI6Mz09PWU/InJkIjoidGgiO3JldHVybiB0K259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJlbi1ueiIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24odCl7dmFyIGU9dCUxMCxuPTE9PT1+fih0JTEwMC8xMCk/InRoIjoxPT09ZT8ic3QiOjI9PT1lPyJuZCI6Mz09PWU/InJkIjoidGgiO3JldHVybiB0K259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJlbyIse21vbnRoczoiamFudWFyb19mZWJydWFyb19tYXJ0b19hcHJpbG9fbWFqb19qdW5pb19qdWxpb19hxa1ndXN0b19zZXB0ZW1icm9fb2t0b2Jyb19ub3ZlbWJyb19kZWNlbWJybyIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2HFrWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEaW1hbsSJb19MdW5kb19NYXJkb19NZXJrcmVkb1/EtGHFrWRvX1ZlbmRyZWRvX1NhYmF0byIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEaW1fTHVuX01hcmRfTWVya1/EtGHFrV9WZW5fU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEaV9MdV9NYV9NZV/EtGFfVmVfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IkRbLWFuIGRlXSBNTU1NLCBZWVlZIixMTEw6IkRbLWFuIGRlXSBNTU1NLCBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBbbGFdIERbLWFuIGRlXSBNTU1NLCBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTovW2FwXVwudFwubS9pLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuInAiPT09dC5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKX0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PjExP24/InAudC5tLiI6IlAuVC5NLiI6bj8iYS50Lm0uIjoiQS5ULk0uIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIb2RpYcWtIGplXSBMVCIsbmV4dERheToiW01vcmdhxa0gamVdIExUIixuZXh0V2VlazoiZGRkZCBbamVdIExUIixsYXN0RGF5OiJbSGllcmHFrSBqZV0gTFQiLGxhc3RXZWVrOiJbcGFzaW50YV0gZGRkZCBbamVdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJqZSAlcyIscGFzdDoiYW50YcWtICVzIixzOiJzZWt1bmRvaiIsbToibWludXRvIixtbToiJWQgbWludXRvaiIsaDoiaG9ybyIsaGg6IiVkIGhvcm9qIixkOiJ0YWdvIixkZDoiJWQgdGFnb2oiLE06Im1vbmF0byIsTU06IiVkIG1vbmF0b2oiLHk6Imphcm8iLHl5OiIlZCBqYXJvaiJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfWEvLG9yZGluYWw6IiVkYSIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ImVuZS5fZmViLl9tYXIuX2Fici5fbWF5Ll9qdW4uX2p1bC5fYWdvLl9zZXAuX29jdC5fbm92Ll9kaWMuIi5zcGxpdCgiXyIpLG49ImVuZV9mZWJfbWFyX2Ficl9tYXlfanVuX2p1bF9hZ29fc2VwX29jdF9ub3ZfZGljIi5zcGxpdCgiXyIpLGk9dC5kZWZpbmVMb2NhbGUoImVzIix7bW9udGhzOiJlbmVyb19mZWJyZXJvX21hcnpvX2FicmlsX21heW9fanVuaW9fanVsaW9fYWdvc3RvX3NlcHRpZW1icmVfb2N0dWJyZV9ub3ZpZW1icmVfZGljaWVtYnJlIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OmZ1bmN0aW9uKHQsaSl7cmV0dXJuLy1NTU0tLy50ZXN0KGkpP25bdC5tb250aCgpXTplW3QubW9udGgoKV19LHdlZWtkYXlzOiJkb21pbmdvX2x1bmVzX21hcnRlc19tacOpcmNvbGVzX2p1ZXZlc192aWVybmVzX3PDoWJhZG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiZG9tLl9sdW4uX21hci5fbWnDqS5fanVlLl92aWUuX3PDoWIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJkb19sdV9tYV9taV9qdV92aV9zw6EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW2hveSBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sbmV4dERheTpmdW5jdGlvbigpe3JldHVybiJbbWHDsWFuYSBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iZGRkZCBbYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LGxhc3REYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW2F5ZXIgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIltlbF0gZGRkZCBbcGFzYWRvIGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbiAlcyIscGFzdDoiaGFjZSAlcyIsczoidW5vcyBzZWd1bmRvcyIsbToidW4gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW5hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW4gZMOtYSIsZGQ6IiVkIGTDrWFzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNlcyIseToidW4gYcOxbyIseXk6IiVkIGHDsW9zIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4saSl7dmFyIHI9e3M6WyJtw7VuZSBzZWt1bmRpIiwibcO1bmkgc2VrdW5kIiwicGFhciBzZWt1bmRpdCJdLG06WyLDvGhlIG1pbnV0aSIsIsO8a3MgbWludXQiXSxtbTpbdCsiIG1pbnV0aSIsdCsiIG1pbnV0aXQiXSxoOlsiw7xoZSB0dW5uaSIsInR1bmQgYWVnYSIsIsO8a3MgdHVuZCJdLGhoOlt0KyIgdHVubmkiLHQrIiB0dW5kaSJdLGQ6WyLDvGhlIHDDpGV2YSIsIsO8a3MgcMOkZXYiXSxNOlsia3V1IGFqYSIsImt1dSBhZWdhIiwiw7xrcyBrdXUiXSxNTTpbdCsiIGt1dSIsdCsiIGt1dWQiXSx5Olsiw7xoZSBhYXN0YSIsImFhc3RhIiwiw7xrcyBhYXN0YSJdLHl5Olt0KyIgYWFzdGEiLHQrIiBhYXN0YXQiXX07cmV0dXJuIGU/cltuXVsyXT9yW25dWzJdOnJbbl1bMV06aT9yW25dWzBdOnJbbl1bMV19dmFyIG49dC5kZWZpbmVMb2NhbGUoImV0Iix7bW9udGhzOiJqYWFudWFyX3ZlZWJydWFyX23DpHJ0c19hcHJpbGxfbWFpX2p1dW5pX2p1dWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b29iZXJfbm92ZW1iZXJfZGV0c2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYWFuX3ZlZWJyX23DpHJ0c19hcHJfbWFpX2p1dW5pX2p1dWxpX2F1Z19zZXB0X29rdF9ub3ZfZGV0cyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoicMO8aGFww6Rldl9lc21hc3DDpGV2X3RlaXNpcMOkZXZfa29sbWFww6Rldl9uZWxqYXDDpGV2X3JlZWRlX2xhdXDDpGV2Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlBfRV9UX0tfTl9SX0wiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlBfRV9UX0tfTl9SX0wiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUw6RuYSxdIExUIixuZXh0RGF5OiJbSG9tbWUsXSBMVCIsbmV4dFdlZWs6IltKw6RyZ21pbmVdIGRkZGQgTFQiLGxhc3REYXk6IltFaWxlLF0gTFQiLGxhc3RXZWVrOiJbRWVsbWluZV0gZGRkZCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgcMOkcmFzdCIscGFzdDoiJXMgdGFnYXNpIixzOmUsbTplLG1tOmUsaDplLGhoOmUsZDplLGRkOiIlZCBww6RldmEiLE06ZSxNTTplLHk6ZSx5eTplfSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiZXUiLHttb250aHM6InVydGFycmlsYV9vdHNhaWxhX21hcnR4b2FfYXBpcmlsYV9tYWlhdHphX2VrYWluYV91enRhaWxhX2FidXp0dWFfaXJhaWxhX3VycmlhX2F6YXJvYV9hYmVuZHVhIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJ1cnQuX290cy5fbWFyLl9hcGkuX21haS5fZWthLl91enQuX2FidS5faXJhLl91cnIuX2F6YS5fYWJlLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiaWdhbmRlYV9hc3RlbGVoZW5hX2FzdGVhcnRlYV9hc3RlYXprZW5hX29zdGVndW5hX29zdGlyYWxhX2xhcnVuYmF0YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJpZy5fYWwuX2FyLl9hei5fb2cuX29sLl9sci4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImlnX2FsX2FyX2F6X29nX29sX2xyIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IllZWVktTU0tREQiLExMOiJZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSIsTExMOiJZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSBISDptbSIsTExMTDoiZGRkZCwgWVlZWVtrb10gTU1NTVtyZW5dIERbYV0gSEg6bW0iLGw6IllZWVktTS1EIixsbDoiWVlZWVtrb10gTU1NIERbYV0iLGxsbDoiWVlZWVtrb10gTU1NIERbYV0gSEg6bW0iLGxsbGw6ImRkZCwgWVlZWVtrb10gTU1NIERbYV0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2dhdXJdIExUW2V0YW5dIixuZXh0RGF5OiJbYmloYXJdIExUW2V0YW5dIixuZXh0V2VlazoiZGRkZCBMVFtldGFuXSIsbGFzdERheToiW2F0em9dIExUW2V0YW5dIixsYXN0V2VlazoiW2F1cnJla29dIGRkZGQgTFRbZXRhbl0iLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIGJhcnJ1IixwYXN0OiJkdWVsYSAlcyIsczoic2VndW5kbyBiYXR6dWsiLG06Im1pbnV0dSBiYXQiLG1tOiIlZCBtaW51dHUiLGg6Im9yZHUgYmF0IixoaDoiJWQgb3JkdSIsZDoiZWd1biBiYXQiLGRkOiIlZCBlZ3VuIixNOiJoaWxhYmV0ZSBiYXQiLE1NOiIlZCBoaWxhYmV0ZSIseToidXJ0ZSBiYXQiLHl5OiIlZCB1cnRlIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6ItuxIiwyOiLbsiIsMzoi27MiLDQ6Itu0Iiw1OiLbtSIsNjoi27YiLDc6Itu3Iiw4OiLbuCIsOToi27kiLDA6ItuwIn0sbj17ItuxIjoiMSIsItuyIjoiMiIsItuzIjoiMyIsItu0IjoiNCIsItu1IjoiNSIsItu2IjoiNiIsItu3IjoiNyIsItu4IjoiOCIsItu5IjoiOSIsItuwIjoiMCJ9LGk9dC5kZWZpbmVMb2NhbGUoImZhIix7bW9udGhzOiLamNin2YbZiNuM2Ydf2YHZiNix24zZh1/Zhdin2LHYs1/YotmI2LHbjNmEX9mF2Ydf2pjZiNim2YZf2pjZiNim24zZh1/Yp9mI2Kpf2LPZvtiq2KfZhdio2LFf2Kfaqdiq2KjYsV/ZhtmI2KfZhdio2LFf2K/Ys9in2YXYqNixIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLamNin2YbZiNuM2Ydf2YHZiNix24zZh1/Zhdin2LHYs1/YotmI2LHbjNmEX9mF2Ydf2pjZiNim2YZf2pjZiNim24zZh1/Yp9mI2Kpf2LPZvtiq2KfZhdio2LFf2Kfaqdiq2KjYsV/ZhtmI2KfZhdio2LFf2K/Ys9in2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLbjNqp4oCM2LTZhtio2Ydf2K/ZiNi02YbYqNmHX9iz2YfigIzYtNmG2KjZh1/ahtmH2KfYsdi02YbYqNmHX9m+2YbYrOKAjNi02YbYqNmHX9is2YXYudmHX9i02YbYqNmHIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItuM2qnigIzYtNmG2KjZh1/Yr9mI2LTZhtio2Ydf2LPZh+KAjNi02YbYqNmHX9qG2YfYp9ix2LTZhtio2Ydf2b7Zhtis4oCM2LTZhtio2Ydf2KzZhdi52Ydf2LTZhtio2YciLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItuMX9ivX9izX9qGX9m+X9isX9i0Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/Zgtio2YQg2KfYsiDYuNmH2LF82KjYudivINin2LIg2LjZh9ixLyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybi/YqNi52K8g2KfYsiDYuNmH2LEvLnRlc3QodCl9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDwxMj8i2YLYqNmEINin2LIg2LjZh9ixIjoi2KjYudivINin2LIg2LjZh9ixIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYp9mF2LHZiNiyINiz2KfYudiqXSBMVCIsbmV4dERheToiW9mB2LHYr9inINiz2KfYudiqXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9iz2KfYudiqXSBMVCIsbGFzdERheToiW9iv24zYsdmI2LIg2LPYp9i52KpdIExUIixsYXN0V2VlazoiZGRkZCBb2b7bjNi0XSBb2LPYp9i52KpdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLYr9ixICVzIixwYXN0OiIlcyDZvtuM2LQiLHM6ItqG2YbYr9uM2YYg2KvYp9mG24zZhyIsbToi24zaqSDYr9mC24zZgtmHIixtbToiJWQg2K/ZgtuM2YLZhyIsaDoi24zaqSDYs9in2LnYqiIsaGg6IiVkINiz2KfYudiqIixkOiLbjNqpINix2YjYsiIsZGQ6IiVkINix2YjYsiIsTToi24zaqSDZhdin2YciLE1NOiIlZCDZhdin2YciLHk6ItuM2qkg2LPYp9mEIix5eToiJWQg2LPYp9mEIn0scHJlcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW9uwLdu5XS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSkucmVwbGFjZSgv2IwvZywiLCIpfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xkL2csZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KS5yZXBsYWNlKC8sL2csItiMIil9LG9yZGluYWxQYXJzZTovXGR7MSwyfdmFLyxvcmRpbmFsOiIlZNmFIix3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsaSxyKXt2YXIgbz0iIjtzd2l0Y2goaSl7Y2FzZSJzIjpyZXR1cm4gcj8ibXV1dGFtYW4gc2VrdW5uaW4iOiJtdXV0YW1hIHNla3VudGkiO2Nhc2UibSI6cmV0dXJuIHI/Im1pbnV1dGluIjoibWludXV0dGkiO2Nhc2UibW0iOm89cj8ibWludXV0aW4iOiJtaW51dXR0aWEiO2JyZWFrO2Nhc2UiaCI6cmV0dXJuIHI/InR1bm5pbiI6InR1bnRpIjtjYXNlImhoIjpvPXI/InR1bm5pbiI6InR1bnRpYSI7YnJlYWs7Y2FzZSJkIjpyZXR1cm4gcj8icMOkaXbDpG4iOiJww6RpdsOkIjtjYXNlImRkIjpvPXI/InDDpGl2w6RuIjoicMOkaXbDpMOkIjticmVhaztjYXNlIk0iOnJldHVybiByPyJrdXVrYXVkZW4iOiJrdXVrYXVzaSI7Y2FzZSJNTSI6bz1yPyJrdXVrYXVkZW4iOiJrdXVrYXV0dGEiO2JyZWFrO2Nhc2UieSI6cmV0dXJuIHI/InZ1b2RlbiI6InZ1b3NpIjtjYXNlInl5IjpvPXI/InZ1b2RlbiI6InZ1b3R0YSJ9cmV0dXJuIG89bih0LHIpKyIgIitvfWZ1bmN0aW9uIG4odCxlKXtyZXR1cm4gdDwxMD9lP3JbdF06aVt0XTp0fXZhciBpPSJub2xsYSB5a3NpIGtha3NpIGtvbG1lIG5lbGrDpCB2aWlzaSBrdXVzaSBzZWl0c2Vtw6RuIGthaGRla3NhbiB5aGRla3PDpG4iLnNwbGl0KCIgIikscj1bIm5vbGxhIiwieWhkZW4iLCJrYWhkZW4iLCJrb2xtZW4iLCJuZWxqw6RuIiwidmlpZGVuIiwia3V1ZGVuIixpWzddLGlbOF0saVs5XV0sbz10LmRlZmluZUxvY2FsZSgiZmkiLHttb250aHM6InRhbW1pa3V1X2hlbG1pa3V1X21hYWxpc2t1dV9odWh0aWt1dV90b3Vrb2t1dV9rZXPDpGt1dV9oZWluw6RrdXVfZWxva3V1X3N5eXNrdXVfbG9rYWt1dV9tYXJyYXNrdXVfam91bHVrdXUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6InRhbW1pX2hlbG1pX21hYWxpc19odWh0aV90b3Vrb19rZXPDpF9oZWluw6RfZWxvX3N5eXNfbG9rYV9tYXJyYXNfam91bHUiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bm51bnRhaV9tYWFuYW50YWlfdGlpc3RhaV9rZXNraXZpaWtrb190b3JzdGFpX3BlcmphbnRhaV9sYXVhbnRhaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzdV9tYV90aV9rZV90b19wZV9sYSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic3VfbWFfdGlfa2VfdG9fcGVfbGEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQuTU0uWVlZWSIsTEw6IkRvIE1NTU1bdGFdIFlZWVkiLExMTDoiRG8gTU1NTVt0YV0gWVlZWSwgW2tsb10gSEgubW0iLExMTEw6ImRkZGQsIERvIE1NTU1bdGFdIFlZWVksIFtrbG9dIEhILm1tIixsOiJELk0uWVlZWSIsbGw6IkRvIE1NTSBZWVlZIixsbGw6IkRvIE1NTSBZWVlZLCBba2xvXSBISC5tbSIsbGxsbDoiZGRkLCBEbyBNTU0gWVlZWSwgW2tsb10gSEgubW0ifSxjYWxlbmRhcjp7c2FtZURheToiW3TDpG7DpMOkbl0gW2tsb10gTFQiLG5leHREYXk6IltodW9tZW5uYV0gW2tsb10gTFQiLG5leHRXZWVrOiJkZGRkIFtrbG9dIExUIixsYXN0RGF5OiJbZWlsZW5dIFtrbG9dIExUIixsYXN0V2VlazoiW3ZpaW1lXSBkZGRkW25hXSBba2xvXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgcMOkw6RzdMOkIixwYXN0OiIlcyBzaXR0ZW4iLHM6ZSxtOmUsbW06ZSxoOmUsaGg6ZSxkOmUsZGQ6ZSxNOmUsTU06ZSx5OmUseXk6ZX0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImZvIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJzX2FwcsOtbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bm51ZGFndXJfbcOhbmFkYWd1cl90w71zZGFndXJfbWlrdWRhZ3VyX2jDs3NkYWd1cl9mcsOtZ2dqYWRhZ3VyX2xleWdhcmRhZ3VyIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InN1bl9tw6FuX3TDvXNfbWlrX2jDs3NfZnLDrV9sZXkiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InN1X23DoV90w71fbWlfaMOzX2ZyX2xlIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBELiBNTU1NLCBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvDjSBkYWcga2wuXSBMVCIsbmV4dERheToiW8ONIG1vcmdpbiBrbC5dIExUIixuZXh0V2VlazoiZGRkZCBba2wuXSBMVCIsbGFzdERheToiW8ONIGdqw6FyIGtsLl0gTFQiLGxhc3RXZWVrOiJbc8Otw7BzdHVdIGRkZGQgW2tsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToidW0gJXMiLHBhc3Q6IiVzIHPDrcOwYW5pIixzOiJmw6Egc2VrdW5kIixtOiJlaW4gbWludXR0IixtbToiJWQgbWludXR0aXIiLGg6ImVpbiB0w61taSIsaGg6IiVkIHTDrW1hciIsZDoiZWluIGRhZ3VyIixkZDoiJWQgZGFnYXIiLE06ImVpbiBtw6FuYcOwaSIsTU06IiVkIG3DoW5hw7BpciIseToiZWl0dCDDoXIiLHl5OiIlZCDDoXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiZnIiLHttb250aHM6ImphbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6ImRpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEaV9MdV9NYV9NZV9KZV9WZV9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0F1am91cmQnaHVpIMOgXSBMVCIsbmV4dERheToiW0RlbWFpbiDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltIaWVyIMOgXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rlcm5pZXIgw6BdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYW5zICVzIixwYXN0OiJpbCB5IGEgJXMiLHM6InF1ZWxxdWVzIHNlYw==", "base64"));
  res.write(new Buffer("b25kZXMiLG06InVuZSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJ1bmUgaGV1cmUiLGhoOiIlZCBoZXVyZXMiLGQ6InVuIGpvdXIiLGRkOiIlZCBqb3VycyIsTToidW4gbW9pcyIsTU06IiVkIG1vaXMiLHk6InVuIGFuIix5eToiJWQgYW5zIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KGVyfCkvLG9yZGluYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHQrKDE9PT10PyJlciI6IiIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiZnItY2EiLHttb250aHM6ImphbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6ImRpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEaV9MdV9NYV9NZV9KZV9WZV9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJZWVlZLU1NLUREIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0F1am91cmQnaHVpIMOgXSBMVCIsbmV4dERheToiW0RlbWFpbiDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltIaWVyIMOgXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rlcm5pZXIgw6BdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYW5zICVzIixwYXN0OiJpbCB5IGEgJXMiLHM6InF1ZWxxdWVzIHNlY29uZGVzIixtOiJ1bmUgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoidW5lIGhldXJlIixoaDoiJWQgaGV1cmVzIixkOiJ1biBqb3VyIixkZDoiJWQgam91cnMiLE06InVuIG1vaXMiLE1NOiIlZCBtb2lzIix5OiJ1biBhbiIseXk6IiVkIGFucyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShlcnxlKS8sb3JkaW5hbDpmdW5jdGlvbih0KXtyZXR1cm4gdCsoMT09PXQ/ImVyIjoiZSIpfX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJmci1jaCIse21vbnRoczoiamFudmllcl9mw6l2cmllcl9tYXJzX2F2cmk=", "base64"));
  res.write(new Buffer("bF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6ImRpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEaV9MdV9NYV9NZV9KZV9WZV9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0F1am91cmQnaHVpIMOgXSBMVCIsbmV4dERheToiW0RlbWFpbiDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltIaWVyIMOgXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rlcm5pZXIgw6BdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYW5zICVzIixwYXN0OiJpbCB5IGEgJXMiLHM6InF1ZWxxdWVzIHNlY29uZGVzIixtOiJ1bmUgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoidW5lIGhldXJlIixoaDoiJWQgaGV1cmVzIixkOiJ1biBqb3VyIixkZDoiJWQgam91cnMiLE06InVuIG1vaXMiLE1NOiIlZCBtb2lzIix5OiJ1biBhbiIseXk6IiVkIGFucyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShlcnxlKS8sb3JkaW5hbDpmdW5jdGlvbih0KXtyZXR1cm4gdCsoMT09PXQ/ImVyIjoiZSIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT0iamFuLl9mZWIuX21ydC5fYXByLl9tYWlfanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVzLiIuc3BsaXQoIl8iKSxuPSJqYW5fZmViX21ydF9hcHJfbWFpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlcyIuc3BsaXQoIl8iKSxpPXQuZGVmaW5lTG9jYWxlKCJmeSIse21vbnRoczoiamFubmV3YXJpc19mZWJyZXdhcmlzX21hYXJ0X2FwcmlsX21hYWllX2p1bnlfanVseV9hdWd1c3R1c19zZXB0aW1iZXJfb2t0b2Jlcl9ub3ZpbWJlcl9kZXNpbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDpmdW5jdGlvbih0LGkpe3JldHVybi8tTU1NLS8udGVzdChpKT9uW3QubW9udGgoKV06ZVt0Lm1vbnRoKCldfSx3ZWVrZGF5czoic25laW5fbW9hbmRlaV90aWlzZGVpX3dvYW5zZGVpX3RvbmdlcnNkZWlfZnJlZWRfc25lb24iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic2kuX21vLl90aS5fd28uX3RvLl9mci5fc28uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTaV9Nb19UaV9Xb19Ub19Gcl9TbyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC1NTS1ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2hqb2VkIG9tXSBMVCIsbmV4dERheToiW21vYXJuIG9tXSBMVCIsbmV4dFdlZWs6ImRkZGQgW29tXSBMVCIsbGFzdERheToiW2p1c3RlciBvbV0gTFQiLGxhc3RXZWVrOiJbw7RmcsO7bmVdIGRkZGQgW29tXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib2VyICVzIixwYXN0OiIlcyBseW4iLHM6ImluIHBlYXIgc2Vrb25kZW4iLG06ImllbiBtaW7DunQiLG1tOiIlZCBtaW51dGVuIixoOiJpZW4gb2VyZSIsaGg6IiVkIG9lcmVuIixkOiJpZW4gZGVpIixkZDoiJWQgZGFnZW4iLE06ImllbiBtb2FubmUiLE1NOiIlZCBtb2FubmVuIix5OiJpZW4gamllciIseXk6IiVkIGppZXJyZW4ifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oc3RlfGRlKS8sb3JkaW5hbDpmdW5jdGlvbih0KXtyZXR1cm4gdCsoMT09PXR8fDg9PT10fHx0Pj0yMD8ic3RlIjoiZGUiKX0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9WyJBbSBGYW9pbGxlYWNoIiwiQW4gR2VhcnJhbiIsIkFtIE3DoHJ0IiwiQW4gR2libGVhbiIsIkFuIEPDqGl0ZWFuIiwiQW4gdC3DkmdtaGlvcyIsIkFuIHQtSXVjaGFyIiwiQW4gTMO5bmFzdGFsIiwiQW4gdC1TdWx0YWluIiwiQW4gRMOgbWhhaXIiLCJBbiB0LVNhbWhhaW4iLCJBbiBEw7liaGxhY2hkIl0sbj1bIkZhb2kiLCJHZWFyIiwiTcOgcnQiLCJHaWJsIiwiQ8OoaXQiLCLDkmdtaCIsIkl1Y2giLCJMw7luIiwiU3VsdCIsIkTDoG1oIiwiU2FtaCIsIkTDuWJoIl0saT1bIkRpZMOybWhuYWljaCIsIkRpbHVhaW4iLCJEaW3DoGlydCIsIkRpY2lhZGFpbiIsIkRpYXJkYW9pbiIsIkRpaGFvaW5lIiwiRGlzYXRoYWlybmUiXSxyPVsiRGlkIiwiRGlsIiwiRGltIiwiRGljIiwiRGlhIiwiRGloIiwiRGlzIl0sbz1bIkTDsiIsIkx1IiwiTcOgIiwiQ2kiLCJBciIsIkhhIiwiU2EiXSxzPXQuZGVmaW5lTG9jYWxlKCJnZCIse21vbnRoczplLG1vbnRoc1Nob3J0Om4sbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czppLHdlZWtkYXlzU2hvcnQ6cix3ZWVrZGF5c01pbjpvLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbQ==", "base64"));
  res.write(new Buffer("IixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbQW4tZGl1Z2ggYWlnXSBMVCIsbmV4dERheToiW0EtbcOgaXJlYWNoIGFpZ10gTFQiLG5leHRXZWVrOiJkZGRkIFthaWddIExUIixsYXN0RGF5OiJbQW4tZMOoIGFpZ10gTFQiLGxhc3RXZWVrOiJkZGRkIFtzZW8gY2hhaWRoXSBbYWlnXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiYW5uIGFuICVzIixwYXN0OiJiaG8gY2hpb25uICVzIixzOiJiZWFnYW4gZGlvZ2FuIixtOiJtaW9uYWlkIixtbToiJWQgbWlvbmFpZGVhbiIsaDoidWFpciIsaGg6IiVkIHVhaXJlYW4iLGQ6ImxhdGhhIixkZDoiJWQgbGF0aGEiLE06Im3DrG9zIixNTToiJWQgbcOsb3NhbiIseToiYmxpYWRobmEiLHl5OiIlZCBibGlhZGhuYSJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShkfG5hfG1oKS8sb3JkaW5hbDpmdW5jdGlvbih0KXt2YXIgZT0xPT09dD8iZCI6dCUxMD09PTI/Im5hIjoibWgiO3JldHVybiB0K2V9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBzfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJnbCIse21vbnRoczoiWGFuZWlyb19GZWJyZWlyb19NYXJ6b19BYnJpbF9NYWlvX1h1w7FvX1h1bGxvX0Fnb3N0b19TZXRlbWJyb19PdXR1YnJvX05vdmVtYnJvX0RlY2VtYnJvIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJYYW4uX0ZlYi5fTWFyLl9BYnIuX01haS5fWHXDsS5fWHVsLl9BZ28uX1NldC5fT3V0Ll9Ob3YuX0RlYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6IkRvbWluZ29fTHVuc19NYXJ0ZXNfTcOpcmNvcmVzX1hvdmVzX1ZlbnJlc19Tw6FiYWRvIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkRvbS5fTHVuLl9NYXIuX03DqXIuX1hvdi5fVmVuLl9Tw6FiLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRG9fTHVfTWFfTcOpX1hvX1ZlX1PDoSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltob3hlICIrKDEhPT10aGlzLmhvdXJzKCk/IsOhcyI6IsOhIikrIl0gTFQifSxuZXh0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIlttYcOxw6EgIisoMSE9PXRoaXMuaG91cnMoKT8iw6FzIjoiw6EiKSsiXSBMVCJ9LG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuImRkZGQgWyIrKDEhPT10aGlzLmhvdXJzKCk/IsOhcyI6ImEiKSsiXSBMVCJ9LGxhc3REYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW29udGUgIisoMSE9PXRoaXMuaG91cnMoKT8iw6EiOiJhIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbb10gZGRkZCBbcGFzYWRvICIrKDEhPT10aGlzLmhvdXJzKCk/IsOhcyI6ImEiKSsiXSBMVCJ9LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ZnVuY3Rpb24odCl7cmV0dXJuInVucyBzZWd1bmRvcyI9PT10PyJudW5zIHNlZ3VuZG9zIjoiZW4gIit0fSxwYXN0OiJoYWkgJXMiLHM6InVucyBzZWd1bmRvcyIsbToidW4gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW5oYSBob3JhIixoaDoiJWQgaG9yYXMiLGQ6InVuIGTDrWEiLGRkOiIlZCBkw61hcyIsTToidW4gbWVzIixNTToiJWQgbWVzZXMiLHk6InVuIGFubyIseXk6IiVkIGFub3MifSxvcmRpbmFsUGFyc2U6L1xkezEsMn3Cui8sb3JkaW5hbDoiJWTCuiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImhlIix7bW9udGhzOiLXmdeg15XXkNeoX9ek15HXqNeV15DXqF/Xnteo16Vf15DXpNeo15nXnF/XnteQ15lf15nXldeg15lf15nXldec15lf15DXldeS15XXodeYX9eh16TXmNee15HXqF/XkNeV16fXmNeV15HXqF/XoNeV15HXnteR16hf15PXptee15HXqCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi15nXoNeV17Nf16TXkdeo17Nf157XqNelX9eQ16TXqNezX9ee15DXmV/XmdeV16DXmV/XmdeV15zXmV/XkNeV15LXs1/Xodek15jXs1/XkNeV16fXs1/XoNeV15HXs1/Xk9em157XsyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi16jXkNep15XXn1/Xqdeg15lf16nXnNeZ16nXmV/XqNeR15nXoteZX9eX157Xmdep15lf16nXmdep15lf16nXkdeqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IteQ17Nf15HXs1/XktezX9eT17Nf15TXs1/XldezX9ep17MiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IteQX9eRX9eSX9eTX9eUX9eVX9epIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFvXkV1NTU1NIFlZWVkiLExMTDoiRCBb15FdTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIFvXkV1NTU1NIFlZWVkgSEg6bW0iLGw6IkQvTS9ZWVlZIixsbDoiRCBNTU0gWVlZWSIsbGxsOiJEIE1NTSBZWVlZIEhIOm1tIixsbGxsOiJkZGQsIEQgTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9eU15nXldedINeR1r5dTFQiLG5leHREYXk6IlvXnteX16gg15HWvl1MVCIsbmV4dFdlZWs6ImRkZGQgW9eR16nXoteUXSBMVCIsbGFzdERheToiW9eQ16rXnteV15wg15HWvl1MVCIsbGFzdFdlZWs6IlvXkdeZ15XXnV0gZGRkZCBb15TXkNeX16jXldefINeR16nXoteUXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi15HXoteV15MgJXMiLHBhc3Q6Itec16TXoNeZICVzIixzOiLXnteh16TXqCDXqdeg15nXldeqIixtOiLXk9en15QiLG1tOiIlZCDXk9en15XXqiIsaDoi16nXoteUIixoaDpmdW5jdGlvbih0KXtyZXR1cm4gMj09PXQ/Itep16LXqteZ15nXnSI6dCsiINep16LXldeqIn0sZDoi15nXldedIixkZDpmdW5jdGlvbih0KXtyZXR1cm4gMj09PXQ/IteZ15XXnteZ15nXnSI6dCsiINeZ157XmdedIn0sTToi15fXldeT16kiLE1NOmZ1bmN0aW9uKHQpe3JldHVybiAyPT09dD8i15fXldeT16nXmdeZ150iOnQrIiDXl9eV15PXqdeZ150ifSx5OiLXqdeg15QiLHl5OmZ1bmN0aW9uKHQpe3JldHVybiAyPT09dD8i16nXoNeq15nXmdedIjp0JTEwPT09MCYmMTAhPT10P3QrIiDXqdeg15QiOnQrIiDXqdeg15k=", "base64"));
  res.write(new Buffer("150ifX0sbWVyaWRpZW1QYXJzZTov15DXl9eUItemfNec16TXoNeUItemfNeQ15fXqNeZINeU16bXlNeo15nXmdedfNec16TXoNeZINeU16bXlNeo15nXmdedfNec16TXoNeV16og15HXlden16h815HXkdeV16fXqHzXkdei16jXkS9pLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuL14o15DXl9eUItemfNeQ15fXqNeZINeU16bXlNeo15nXmdedfNeR16LXqNeRKSQvLnRlc3QodCl9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDw1PyLXnNek16DXldeqINeR15XXp9eoIjp0PDEwPyLXkdeR15XXp9eoIjp0PDEyP24/J9ec16TXoNeUItemJzoi15zXpNeg15kg15TXpteU16jXmdeZ150iOnQ8MTg/bj8n15DXl9eUItemJzoi15DXl9eo15kg15TXpteU16jXmdeZ150iOiLXkdei16jXkSJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6IuClpyIsMjoi4KWoIiwzOiLgpakiLDQ6IuClqiIsNToi4KWrIiw2OiLgpawiLDc6IuClrSIsODoi4KWuIiw5OiLgpa8iLDA6IuClpiJ9LG49eyLgpaciOiIxIiwi4KWoIjoiMiIsIuClqSI6IjMiLCLgpaoiOiI0Iiwi4KWrIjoiNSIsIuClrCI6IjYiLCLgpa0iOiI3Iiwi4KWuIjoiOCIsIuClryI6IjkiLCLgpaYiOiIwIn0saT10LmRlZmluZUxvY2FsZSgiaGkiLHttb250aHM6IuCknOCkqOCkteCksOClgF/gpKvgpLzgpLDgpLXgpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCliOCksl/gpK7gpIhf4KSc4KWC4KSoX+CknOClgeCksuCkvuCkiF/gpIXgpJfgpLjgpY3gpKRf4KS44KS/4KSk4KSu4KWN4KSs4KSwX+CkheCkleCljeCkn+ClguCkrOCksF/gpKjgpLXgpK7gpY3gpKzgpLBf4KSm4KS/4KS44KSu4KWN4KSs4KSwIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgpJzgpKguX+Ckq+CkvOCksC5f4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCliC5f4KSu4KSIX+CknOClguCkqF/gpJzgpYHgpLIuX+CkheCkly5f4KS44KS/4KSkLl/gpIXgpJXgpY3gpJ/gpYIuX+CkqOCktS5f4KSm4KS/4KS4LiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4KSw4KS14KS/4KS14KS+4KSwX+CkuOCli+CkruCkteCkvuCksF/gpK7gpILgpJfgpLLgpLXgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+Ckl+ClgeCksOClguCkteCkvuCksF/gpLbgpYHgpJXgpY3gpLDgpLXgpL7gpLBf4KS24KSo4KS/4KS14KS+4KSwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCksOCkteCkv1/gpLjgpYvgpK5f4KSu4KSC4KSX4KSyX+CkrOClgeCkp1/gpJfgpYHgpLDgpYJf4KS24KWB4KSV4KWN4KSwX+CktuCkqOCkvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4KSwX+CkuOCli1/gpK7gpIJf4KSs4KWBX+Ckl+ClgV/gpLbgpYFf4KS2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIOCkrOCknOClhyIsTFRTOiJBIGg6bW06c3Mg4KSs4KSc4KWHIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSDgpKzgpJzgpYciLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4KSs4KSc4KWHIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvgpIbgpJxdIExUIixuZXh0RGF5OiJb4KSV4KSyXSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4KSV4KSyXSBMVCIsbGFzdFdlZWs6IlvgpKrgpL/gpJvgpLLgpYddIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgpK7gpYfgpIIiLHBhc3Q6IiVzIOCkquCkueCksuClhyIsczoi4KSV4KWB4KSbIOCkueClgCDgpJXgpY3gpLfgpKMiLG06IuCkj+CklSDgpK7gpL/gpKjgpJ8iLG1tOiIlZCDgpK7gpL/gpKjgpJ8iLGg6IuCkj+CklSDgpJjgpILgpJ/gpL4iLGhoOiIlZCDgpJjgpILgpJ/gpYciLGQ6IuCkj+CklSDgpKbgpL/gpKgiLGRkOiIlZCDgpKbgpL/gpKgiLE06IuCkj+CklSDgpK7gpLngpYDgpKjgpYciLE1NOiIlZCDgpK7gpLngpYDgpKjgpYciLHk6IuCkj+CklSDgpLXgpLDgpY3gpLciLHl5OiIlZCDgpLXgpLDgpY3gpLcifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4KWn4KWo4KWp4KWq4KWr4KWs4KWt4KWu4KWv4KWmXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSxtZXJpZGllbVBhcnNlOi/gpLDgpL7gpKR84KS44KWB4KSs4KS5fOCkpuCli+CkquCkueCksHzgpLbgpL7gpK4vLG1lcmlkaWVtSG91cjpmdW5jdGlvbih0LGUpe3JldHVybiAxMj09PXQmJih0PTApLCLgpLDgpL7gpKQiPT09ZT90PDQ/dDp0KzEyOiLgpLjgpYHgpKzgpLkiPT09ZT90OiLgpKbgpYvgpKrgpLngpLAiPT09ZT90Pj0xMD90OnQrMTI6IuCktuCkvuCkriI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i4KSw4KS+4KSkIjp0PDEwPyLgpLjgpYHgpKzgpLkiOnQ8MTc/IuCkpuCli+CkquCkueCksCI6dDwyMD8i4KS24KS+4KSuIjoi4KSw4KS+4KSkIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsbil7dmFyIGk9dCsiICI7c3dpdGNoKG4pe2Nhc2UibSI6cmV0dXJuIGU/ImplZG5hIG1pbnV0YSI6ImplZG5lIG1pbnV0ZSI7Y2FzZSJtbSI6cmV0dXJuIGkrPTE9PT10PyJtaW51dGEiOjI9PT10fHwzPT09dHx8ND09PXQ/Im1pbnV0ZSI6Im1pbnV0YSI7Y2FzZSJoIjpyZXR1cm4gZT8iamVkYW4gc2F0IjoiamVkbm9nIHNhdGEiO2Nhc2UiaGgiOnJldHVybiBpKz0xPT09dD8ic2F0IjoyPT09dHx8Mz09PXR8fDQ9PT10PyJzYXRhIjoic2F0aSI7Y2FzZSJkZCI6cmV0dXJuIGkrPTE9PT10PyJkYW4iOiJkYW5hIjtjYXNlIk1NIjpyZXR1cm4gaSs9MT09PXQ/Im1qZXNlYyI6Mj09PXR8fDM9PT10fHw0PT09dD8ibWplc2VjYSI6Im1qZXNlY2kiO2Nhc2UieXkiOnJldHVybiBpKz0xPT09dD8iZ29kaW5hIjoyPT09dHx8Mz09PXR8fDQ9PT10PyJnb2RpbmUiOiJnb2RpbmEifX12YXIgbj10LmRlZmluZUxvY2FsZSgiaHIiLHttb250aHM6e2Zvcm1hdDoic2lqZcSNbmphX3ZlbGphxI1lX2/FvnVqa2FfdHJhdm5qYV9zdmlibmphX2xpcG5qYV9zcnBuamFfa29sb3ZvemFfcnVqbmFfbGlzdG9wYWRhX3N0dWRlbm9nYV9wcm9zaW5jYSIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiJzaWplxI1hbmpfdmVsamHEjWFfb8W+dWpha190cmF2YW5qX3N2aWJhbmpfbGlwYW5qX3NycGFual9rb2xvdm96X3J1amFuX2xpc3RvcGFkX3N0dWRlbmlfcHJvc2luYWMiLnNwbGl0KCJfIil9LG1vbnRoc1Nob3J0OiJzaWouX3ZlbGouX2/FvnUuX3RyYS5fc3ZpLl9saXAuX3NycC5fa29sLl9ydWouX2xpcy5fc3R1Ll9wcm8uIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJuZWRqZWxqYV9wb25lZGplbGpha191dG9yYWtfc3JpamVkYV/EjWV0dnJ0YWtfcGV0YWtfc3Vib3RhIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Im5lZC5fcG9uLl91dG8uX3NyaS5fxI1ldC5fcGV0Ll9zdWIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zcl/EjWVfcGVfc3UiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELiBNTS4gWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RhbmFzIHVdIExUIixuZXh0RGF5OiJbc3V0cmEgdV0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3VdIFtuZWRqZWxqdV0gW3VdIExUIjtjYXNlIDM6cmV0dXJuIlt1XSBbc3JpamVkdV0gW3VdIExUIjtjYXNlIDY6cmV0dXJuIlt1XSBbc3Vib3R1XSBbdV0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3VdIGRkZGQgW3VdIExUIn19LGxhc3REYXk6IltqdcSNZXIgdV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpjYXNlIDM6cmV0dXJuIltwcm/FoWx1XSBkZGRkIFt1XSBMVCI7Y2FzZSA2OnJldHVybiJbcHJvxaFsZV0gW3N1Ym90ZV0gW3VdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIltwcm/FoWxpXSBkZGRkIFt1XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJ6YSAlcyIscGFzdDoicHJpamUgJXMiLHM6InBhciBzZWt1bmRpIixtOmUsbW06ZSxoOmUsaGg6ZSxkOiJkYW4iLGRkOmUsTToibWplc2VjIixNTTplLHk6ImdvZGludSIseXk6ZX0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsbixpKXt2YXIgcj10O3N3aXRjaChuKXtjYXNlInMiOnJldHVybiBpfHxlPyJuw6low6FueSBtw6Fzb2RwZXJjIjoibsOpaMOhbnkgbcOhc29kcGVyY2UiO2Nhc2UibSI6cmV0dXJuImVneSIrKGl8fGU/IiBwZXJjIjoiIHBlcmNlIik7Y2FzZSJtbSI6cmV0dXJuIHIrKGl8fGU/IiBwZXJjIjoiIHBlcmNlIik7Y2FzZSJoIjpyZXR1cm4iZWd5IisoaXx8ZT8iIMOzcmEiOiIgw7Nyw6FqYSIpO2Nhc2UiaGgiOnJldHVybiByKyhpfHxlPyIgw7NyYSI6IiDDs3LDoWphIik7Y2FzZSJkIjpyZXR1cm4iZWd5IisoaXx8ZT8iIG5hcCI6IiBuYXBqYSIpO2Nhc2UiZGQiOnJldHVybiByKyhpfHxlPyIgbmFwIjoiIG5hcGphIik7Y2FzZSJNIjpyZXR1cm4iZWd5IisoaXx8ZT8iIGjDs25hcCI6IiBow7NuYXBqYSIpO2Nhc2UiTU0iOnJldHVybiByKyhpfHxlPyIgaMOzbmFwIjoiIGjDs25hcGphIik7Y2FzZSJ5IjpyZXR1cm4iZWd5IisoaXx8ZT8iIMOpdiI6IiDDqXZlIik7Y2FzZSJ5eSI6cmV0dXJuIHIrKGl8fGU/IiDDqXYiOiIgw6l2ZSIpfXJldHVybiIifWZ1bmN0aW9uIG4odCl7cmV0dXJuKHQ/IiI6Ilttw7psdF0gIikrIlsiK2lbdGhpcy5kYXkoKV0rIl0gTFRbLWtvcl0ifXZhciBpPSJ2YXPDoXJuYXAgaMOpdGbFkW4ga2VkZGVuIHN6ZXJkw6FuIGNzw7x0w7ZydMO2a8O2biBww6ludGVrZW4gc3pvbWJhdG9uIi5zcGxpdCgiICIpLHI9dC5kZWZpbmVMb2NhbGUoImh1Iix7bW9udGhzOiJqYW51w6FyX2ZlYnJ1w6FyX23DoXJjaXVzX8OhcHJpbGlzX23DoWp1c19qw7puaXVzX2rDumxpdXNfYXVndXN6dHVzX3N6ZXB0ZW1iZXJfb2t0w7NiZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbcOhcmNfw6Fwcl9tw6FqX2rDum5fasO6bF9hdWdfc3plcHRfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6InZhc8Ohcm5hcF9ow6l0ZsWRX2tlZGRfc3plcmRhX2Nzw7x0w7ZydMO2a19ww6ludGVrX3N6b21iYXQiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoidmFzX2jDqXRfa2VkZF9zemVfY3PDvHRfcMOpbl9zem8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InZfaF9rX3N6ZV9jc19wX3N6byIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiWVlZWS5NTS5ERC4iLExMOiJZWVlZLiBNTU1NIEQuIixMTEw6IllZWVkuIE1NTU0gRC4gSDptbSIsTExMTDoiWVlZWS4gTU1NTSBELiwgZGRkZCBIOm1tIn0sbWVyaWRpZW1QYXJzZTovZGV8ZHUvaSxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybiJ1Ij09PXQuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCl9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDwxMj9uPT09ITA/ImRlIjoiREUiOm49PT0hMD8iZHUiOiJEVSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbbWFdIExUWy1rb3JdIixuZXh0RGF5OiJbaG9sbmFwXSBMVFsta29yXSIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMsITApfSxsYXN0RGF5OiJbdGVnbmFwXSBMVFsta29yXSIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMsITEpfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBtw7psdmEiLHBhc3Q6IiVzIixzOmUsbTplLG1tOmUsaDplLGhoOmUsZDplLGRkOmUsTTplLE1NOmUseTplLHl5OmV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJoeS1hbSIse21vbnRoczp7Zm9ybWF0OiLVsNW41oLVttW+1aHWgNWrX9aD1aXVv9aA1b7VodaA1atf1bTVodaA1b/Vq1/VodW61oDVq9Ws1atf1bTVodW11avVvdWrX9Ww1bjWgtW21avVvdWrX9Ww1bjWgtWs1avVvdWrX9aF1aPVuNW91b/VuNW91atf1b3VpdW61b/VpdW01aLVpdaA1atf1bDVuNWv1b/VpdW01aLVpdaA1atf1bbVuNW11aXVtNWi1aXWgNWrX9Wk1aXVr9W/1aXVtNWi1aXWgNWrIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItWw1bjWgtW21b7VodaAX9aD1aXVv9aA1b7VodaAX9W01aHWgNW/X9Wh1brWgNWr1axf1bTVodW11avVvV/VsNW41oLVttWr1b1f1bDVuNaC1azVq9W9X9aF1aPVuNW91b/VuNW9X9W91aXVutW/1aXVtNWi1aXWgF/VsNW41a/Vv9Wl1bTVotWl1oBf1bbVuNW11aXVtNWi1aXWgF/VpNWl1a/Vv9Wl1bTVotWl1oAiLnNwbGl0KCJfIil9LG1vbnRoc1Nob3J0OiLVsNW21b5f1oPVv9aAX9W01oDVv1/VodW61oBf1bTVtdW9X9Ww1bbVvV/VsNWs1b1f1oXVo9W9X9W91brVv1/VsNWv1b9f1bbVtNWiX9Wk1a/VvyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi1a/Vq9aA1aHVr9WrX9Wl1oDVr9W41oLVt9Wh1aLVqdWrX9Wl1oDVpdaE1bfVodWi1anVq1/VudW41oDVpdaE1bfVodWi1anVq1/VsNWr1bbVo9W31aHVotWp1atf1bjWgtaA1aLVodWpX9W31aHVotWh1akiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi1a/WgNWvX9Wl1oDVr1/VpdaA1oRf1bnWgNaEX9Ww1bbVo1/VuNaC1oDVol/Vt9Wi1akiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItWv1oDVr1/VpdaA1a9f1aXWgNaEX9W51oDWhF/VsNW21aNf1bjWgtaA1aJf1bfVotWpIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSDVqS4iLExMTDoiRCBNTU1NIFlZWVkg1akuLCBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkg1akuLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb1aHVtdW91oXWgF0gTFQiLG5leHREYXk6IlvVvtWh1bLVqF0gTFQiLGxhc3REYXk6IlvVpdaA1aXVr10gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuImRkZGQgW9aF1oDVqCDVqtWh1bTVqF0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJb1aHVttaB1aHVrl0gZGRkZCBb1oXWgNWoINWq1aHVtNWoXSBMVCJ9LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzINWw1aXVv9W4IixwYXN0OiIlcyDVodW81aHVuyIsczoi1bTVqyDWhNWh1bbVqyDVvtWh1bXWgNWv1bXVodW2IixtOiLWgNW41brVpSIsbW06IiVkINaA1bjVutWlIixoOiLVqtWh1bQiLGhoOiIlZCDVqtWh1bQiLGQ6ItaF1oAiLGRkOiIlZCDWhdaAIixNOiLVodW01avVvSIsTU06IiVkINWh1bTVq9W9Iix5OiLVv9Wh1oDVqyIseXk6IiVkINW/1aHWgNWrIn0sbWVyaWRpZW1QYXJzZTov1aPVq9W31aXWgNW+1aF81aHVvNWh1b7VuNW/1b7VoXzWgdWl1oDVpdWv1b7VoXzVpdaA1aXVr9W41bXVodW2Lyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybi9eKNaB1aXWgNWl1a/VvtWhfNWl1oDVpdWv1bjVtdWh1bYpJC8udGVzdCh0KX0sbWVyaWRpZW06ZnVuY3Rpb24odCl7cmV0dXJuIHQ8ND8i1aPVq9W31aXWgNW+1aEiOnQ8MTI/ItWh1bzVodW+1bjVv9W+1aEiOnQ8MTc/ItaB1aXWgNWl1a/VvtWhIjoi1aXWgNWl1a/VuNW11aHVtiJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfXxcZHsxLDJ9LSjVq9W2fNaA1aQpLyxvcmRpbmFsOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UiREREIjpjYXNlInciOmNhc2UiVyI6Y2FzZSJERERvIjpyZXR1cm4gMT09PXQ/dCsiLdWr1bYiOnQrIi3WgNWkIjtkZWZhdWx0OnJldHVybiB0fX0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImlkIix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hcmV0X0FwcmlsX01laV9KdW5pX0p1bGlfQWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0Fnc19TZXBfT2t0X05vdl9EZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ik1pbmdndV9TZW5pbl9TZWxhc2FfUmFidV9LYW1pc19KdW1hdF9TYWJ0dSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJNaW5fU2VuX1NlbF9SYWJfS2FtX0p1bV9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Ik1nX1NuX1NsX1JiX0ttX0ptX1NiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEgubW0iLExUUzoiSEgubW0uc3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIn0sbWVyaWRpZW1QYXJzZTovcGFnaXxzaWFuZ3xzb3JlfG1hbGFtLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMTI9PT10JiYodD0wKSwicGFnaSI9PT1lP3Q6InNpYW5nIj09PWU/dD49MTE/dDp0KzEyOiJzb3JlIj09PWV8fCJtYWxhbSI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8MTE/InBhZ2kiOnQ8MTU/InNpYW5nIjp0PDE5PyJzb3JlIjoibWFsYW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hhcmkgaW5pIHB1a3VsXSBMVCIsbmV4dERheToiW0Jlc29rIHB1a3VsXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3B1a3VsXSBMVCIsbGFzdERheToiW0tlbWFyaW4gcHVrdWxdIExUIixsYXN0V2VlazoiZGRkZCBbbGFsdSBwdWt1bF0gTFQiLAoJc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGFsdSIsczoiYmViZXJhcGEgZGV0aWsiLG06InNlbWVuaXQiLG1tOiIlZCBtZW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdCUxMDA9PT0xMXx8dCUxMCE9PTF9ZnVuY3Rpb24gbih0LG4saSxyKXt2YXIgbz10KyIgIjtzd2l0Y2goaSl7Y2FzZSJzIjpyZXR1cm4gbnx8cj8ibm9ra3JhciBzZWvDum5kdXIiOiJub2trcnVtIHNla8O6bmR1bSI7Y2FzZSJtIjpyZXR1cm4gbj8ibcOtbsO6dGEiOiJtw61uw7p0dSI7Y2FzZSJtbSI6cmV0dXJuIGUodCk/bysobnx8cj8ibcOtbsO6dHVyIjoibcOtbsO6dHVtIik6bj9vKyJtw61uw7p0YSI6bysibcOtbsO6dHUiO2Nhc2UiaGgiOnJldHVybiBlKHQpP28rKG58fHI/ImtsdWtrdXN0dW5kaXIiOiJrbHVra3VzdHVuZHVtIik6bysia2x1a2t1c3R1bmQiO2Nhc2UiZCI6cmV0dXJuIG4/ImRhZ3VyIjpyPyJkYWciOiJkZWdpIjtjYXNlImRkIjpyZXR1cm4gZSh0KT9uP28rImRhZ2FyIjpvKyhyPyJkYWdhIjoiZMO2Z3VtIik6bj9vKyJkYWd1ciI6bysocj8iZGFnIjoiZGVnaSIpO2Nhc2UiTSI6cmV0dXJuIG4/Im3DoW51w7B1ciI6cj8ibcOhbnXDsCI6Im3DoW51w7BpIjtjYXNlIk1NIjpyZXR1cm4gZSh0KT9uP28rIm3DoW51w7BpciI6bysocj8ibcOhbnXDsGkiOiJtw6FudcOwdW0iKTpuP28rIm3DoW51w7B1ciI6bysocj8ibcOhbnXDsCI6Im3DoW51w7BpIik7Y2FzZSJ5IjpyZXR1cm4gbnx8cj8iw6FyIjoiw6FyaSI7Y2FzZSJ5eSI6cmV0dXJuIGUodCk/bysobnx8cj8iw6FyIjoiw6FydW0iKTpvKyhufHxyPyLDoXIiOiLDoXJpIil9fXZhciBpPXQuZGVmaW5lTG9jYWxlKCJpcyIse21vbnRoczoiamFuw7phcl9mZWJyw7phcl9tYXJzX2FwcsOtbF9tYcOtX2rDum7DrV9qw7psw61fw6Fnw7pzdF9zZXB0ZW1iZXJfb2t0w7NiZXJfbsOzdmVtYmVyX2Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWHDrV9qw7puX2rDumxfw6Fnw7pfc2VwX29rdF9uw7N2X2RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VubnVkYWd1cl9tw6FudWRhZ3VyX8O+cmnDsGp1ZGFndXJfbWnDsHZpa3VkYWd1cl9maW1tdHVkYWd1cl9mw7ZzdHVkYWd1cl9sYXVnYXJkYWd1ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzdW5fbcOhbl/DvnJpX21pw7BfZmltX2bDtnNfbGF1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9Nw6Ffw55yX01pX0ZpX0bDtl9MYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgW2tsLl0gSDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW8OtIGRhZyBrbC5dIExUIixuZXh0RGF5OiJbw6EgbW9yZ3VuIGtsLl0gTFQiLG5leHRXZWVrOiJkZGRkIFtrbC5dIExUIixsYXN0RGF5OiJbw60gZ8OmciBrbC5dIExUIixsYXN0V2VlazoiW3PDrcOwYXN0YV0gZGRkZCBba2wuXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZWZ0aXIgJXMiLHBhc3Q6ImZ5cmlyICVzIHPDrcOwYW4iLHM6bixtOm4sbW06bixoOiJrbHVra3VzdHVuZCIsaGg6bixkOm4sZGQ6bixNOm4sTU06bix5Om4seXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoIml0Iix7bW9udGhzOiJnZW5uYWlvX2ZlYmJyYWlvX21hcnpvX2FwcmlsZV9tYWdnaW9fZ2l1Z25vX2x1Z2xpb19hZ29zdG9fc2V0dGVtYnJlX290dG9icmVfbm92ZW1icmVfZGljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imdlbl9mZWJfbWFyX2Fwcl9tYWdfZ2l1X2x1Z19hZ29fc2V0X290dF9ub3ZfZGljIi5zcGxpdCgiXyIpLA==", "base64"));
  res.write(new Buffer("d2Vla2RheXM6IkRvbWVuaWNhX0x1bmVkw6xfTWFydGVkw6xfTWVyY29sZWTDrF9HaW92ZWTDrF9WZW5lcmTDrF9TYWJhdG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRG9tX0x1bl9NYXJfTWVyX0dpb19WZW5fU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb19MdV9NYV9NZV9HaV9WZV9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltPZ2dpIGFsbGVdIExUIixuZXh0RGF5OiJbRG9tYW5pIGFsbGVdIExUIixuZXh0V2VlazoiZGRkZCBbYWxsZV0gTFQiLGxhc3REYXk6IltJZXJpIGFsbGVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIltsYSBzY29yc2FdIGRkZGQgW2FsbGVdIExUIjtkZWZhdWx0OnJldHVybiJbbG8gc2NvcnNvXSBkZGRkIFthbGxlXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKHQpe3JldHVybigvXlswLTldLiskLy50ZXN0KHQpPyJ0cmEiOiJpbiIpKyIgIit0fSxwYXN0OiIlcyBmYSIsczoiYWxjdW5pIHNlY29uZGkiLG06InVuIG1pbnV0byIsbW06IiVkIG1pbnV0aSIsaDoidW4nb3JhIixoaDoiJWQgb3JlIixkOiJ1biBnaW9ybm8iLGRkOiIlZCBnaW9ybmkiLE06InVuIG1lc2UiLE1NOiIlZCBtZXNpIix5OiJ1biBhbm5vIix5eToiJWQgYW5uaSJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiamEiLHttb250aHM6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi5pel5puc5pelX+aciOabnOaXpV/ngavmm5zml6Vf5rC05puc5pelX+acqOabnOaXpV/ph5Hmm5zml6Vf5Zyf5puc5pelIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuaXpV/mnIhf54GrX+awtF/mnKhf6YeRX+WcnyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi5pelX+aciF/ngatf5rC0X+acqF/ph5Ff5ZyfIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQWjmmYJt5YiGIixMVFM6IkFo5pmCbeWIhnPnp5IiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZ5bm0TeaciETml6UiLExMTDoiWVlZWeW5tE3mnIhE5pelQWjmmYJt5YiGIixMTExMOiJZWVlZ5bm0TeaciETml6VBaOaZgm3liIYgZGRkZCJ9LG1lcmlkaWVtUGFyc2U6L+WNiOWJjXzljYjlvowvaSxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybiLljYjlvowiPT09dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDEyPyLljYjliY0iOiLljYjlvowifSxjYWxlbmRhcjp7c2FtZURheToiW+S7iuaXpV0gTFQiLG5leHREYXk6IlvmmI7ml6VdIExUIixuZXh0V2VlazoiW+adpemAsV1kZGRkIExUIixsYXN0RGF5OiJb5pio5pelXSBMVCIsbGFzdFdlZWs6IlvliY3pgLFdZGRkZCBMVCIsc2FtZUVsc2U6IkwifSxvcmRpbmFsUGFyc2U6L1xkezEsMn3ml6UvLG9yZGluYWw6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJkIjpjYXNlIkQiOmNhc2UiREREIjpyZXR1cm4gdCsi5pelIjtkZWZhdWx0OnJldHVybiB0fX0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz5b6MIixwYXN0OiIlc+WJjSIsczoi5pWw56eSIixtOiIx5YiGIixtbToiJWTliIYiLGg6IjHmmYLplpMiLGhoOiIlZOaZgumWkyIsZDoiMeaXpSIsZGQ6IiVk5pelIixNOiIx44O25pyIIixNTToiJWTjg7bmnIgiLHk6IjHlubQiLHl5OiIlZOW5tCJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImp2Iix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hcmV0X0FwcmlsX01laV9KdW5pX0p1bGlfQWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3BlbWJlcl9EZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0Fnc19TZXBfT2t0X05vcF9EZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ik1pbmdndV9TZW5lbl9TZWxvc29fUmVidV9LZW1pc19KZW11d2FoX1NlcHR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Ik1pbl9TZW5fU2VsX1JlYl9LZW1fSmVtX1NlcCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiTWdfU25fU2xfUmJfS21fSm1fU3AiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9lbmppbmd8c2l5YW5nfHNvbnRlbnxuZGFsdS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDEyPT09dCYmKHQ9MCksImVuamluZyI9PT1lP3Q6InNpeWFuZyI9PT1lP3Q+PTExP3Q6dCsxMjoic29udGVuIj09PWV8fCJuZGFsdSI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8MTE/ImVuamluZyI6dDwxNT8ic2l5YW5nIjp0PDE5PyJzb250ZW4iOiJuZGFsdSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRGludGVuIHB1bmlrbyBwdWt1bF0gTFQiLG5leHREYXk6IltNYmVuamFuZyBwdWt1bF0gTFQiLG5leHRXZWVrOiJkZGRkIFtwdWt1bF0gTFQiLGxhc3REYXk6IltLYWxhIHdpbmdpIHB1a3VsXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2tlcGVuZ2tlciBwdWt1bF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IndvbnRlbiBpbmcgJXMiLHBhc3Q6IiVzIGluZ2thbmcga2VwZW5na2VyIixzOiJzYXdldGF3aXMgZGV0aWsiLG06InNldHVuZ2dhbCBtZW5pdCIsbW06IiVkIG1lbml0IixoOiJzZXR1bmdnYWwgamFtIixoaDoiJWQgamFtIixkOiJzZWRpbnRlbiIsZGQ6IiVkIGRpbnRlbiIsTToic2V3dWxhbiIsTU06IiVkIHd1bGFuIix5OiJzZXRhdW4iLHl5OiIlZCB0YXVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImthIix7bW9udGhzOntzdGFuZGFsb25lOiLhg5jhg5Dhg5zhg5Xhg5Dhg6Dhg5hf4YOX4YOU4YOR4YOU4YOg4YOV4YOQ4YOa4YOYX+GDm+GDkOGDoOGDouGDmF/hg5Dhg57hg6Dhg5jhg5rhg5hf4YOb4YOQ4YOY4YOh4YOYX+GDmOGDleGDnOGDmOGDoeGDmF/hg5jhg5Xhg5rhg5jhg6Hhg5hf4YOQ4YOS4YOV4YOY4YOh4YOi4YOdX+GDoeGDlOGDpeGDouGDlOGDm+GDkeGDlOGDoOGDmF/hg53hg6Xhg6Lhg53hg5vhg5Hhg5Thg6Dhg5hf4YOc4YOd4YOU4YOb4YOR4YOU4YOg4YOYX+GDk+GDlOGDmeGDlOGDm+GDkeGDlOGDoOGDmCIuc3BsaXQoIl8iKSxmb3JtYXQ6IuGDmOGDkOGDnOGDleGDkOGDoOGDoV/hg5fhg5Thg5Hhg5Thg6Dhg5Xhg5Dhg5rhg6Ff4YOb4YOQ4YOg4YOi4YOhX+GDkOGDnuGDoOGDmOGDmuGDmOGDoV/hg5vhg5Dhg5jhg6Hhg6Ff4YOY4YOV4YOc4YOY4YOh4YOhX+GDmOGDleGDmuGDmOGDoeGDoV/hg5Dhg5Lhg5Xhg5jhg6Hhg6Lhg6Ff4YOh4YOU4YOl4YOi4YOU4YOb4YOR4YOU4YOg4YOhX+GDneGDpeGDouGDneGDm+GDkeGDlOGDoOGDoV/hg5zhg53hg5Thg5vhg5Hhg5Thg6Dhg6Ff4YOT4YOU4YOZ4YOU4YOb4YOR4YOU4YOg4YOhIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi4YOY4YOQ4YOcX+GDl+GDlOGDkV/hg5vhg5Dhg6Bf4YOQ4YOe4YOgX+GDm+GDkOGDmF/hg5jhg5Xhg5xf4YOY4YOV4YOaX+GDkOGDkuGDlV/hg6Hhg5Thg6Vf4YOd4YOl4YOiX+GDnOGDneGDlF/hg5Phg5Thg5kiLnNwbGl0KCJfIiksd2Vla2RheXM6e3N0YW5kYWxvbmU6IuGDmeGDleGDmOGDoOGDkF/hg53hg6Dhg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOh4YOQ4YOb4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDneGDl+GDruGDqOGDkOGDkeGDkOGDl+GDmF/hg67hg6Phg5fhg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOe4YOQ4YOg4YOQ4YOh4YOZ4YOU4YOV4YOYX+GDqOGDkOGDkeGDkOGDl+GDmCIuc3BsaXQoIl8iKSxmb3JtYXQ6IuGDmeGDleGDmOGDoOGDkOGDoV/hg53hg6Dhg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOh4YOQ4YOb4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDneGDl+GDruGDqOGDkOGDkeGDkOGDl+GDoV/hg67hg6Phg5fhg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOe4YOQ4YOg4YOQ4YOh4YOZ4YOU4YOV4YOhX+GDqOGDkOGDkeGDkOGDl+GDoSIuc3BsaXQoIl8iKSxpc0Zvcm1hdDovKOGDrOGDmOGDnOGDkHzhg6jhg5Thg5vhg5Phg5Thg5IpL30sd2Vla2RheXNTaG9ydDoi4YOZ4YOV4YOYX+GDneGDoOGDqF/hg6Hhg5Dhg5tf4YOd4YOX4YOuX+GDruGDo+GDl1/hg57hg5Dhg6Bf4YOo4YOQ4YORIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLhg5nhg5Vf4YOd4YOgX+GDoeGDkF/hg53hg5df4YOu4YOjX+GDnuGDkF/hg6jhg5AiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW+GDk+GDpuGDlOGDoV0gTFRbLeGDluGDlF0iLG5leHREYXk6Ilvhg67hg5Xhg5Dhg5pdIExUWy3hg5bhg5RdIixsYXN0RGF5OiJb4YOS4YOj4YOo4YOY4YOcXSBMVFst4YOW4YOUXSIsbmV4dFdlZWs6Ilvhg6jhg5Thg5vhg5Phg5Thg5JdIGRkZGQgTFRbLeGDluGDlF0iLGxhc3RXZWVrOiJb4YOs4YOY4YOc4YOQXSBkZGRkIExULeGDluGDlCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpmdW5jdGlvbih0KXtyZXR1cm4vKOGDrOGDkOGDm+GDmHzhg6zhg6Phg5fhg5h84YOh4YOQ4YOQ4YOX4YOYfOGDrOGDlOGDmuGDmCkvLnRlc3QodCk/dC5yZXBsYWNlKC/hg5gkLywi4YOo4YOYIik6dCsi4YOo4YOYIn0scGFzdDpmdW5jdGlvbih0KXtyZXR1cm4vKOGDrOGDkOGDm+GDmHzhg6zhg6Phg5fhg5h84YOh4YOQ4YOQ4YOX4YOYfOGDk+GDpuGDlHzhg5fhg5Xhg5QpLy50ZXN0KHQpP3QucmVwbGFjZSgvKOGDmHzhg5QpJC8sIuGDmOGDoSDhg6zhg5jhg5wiKTov4YOs4YOU4YOa4YOYLy50ZXN0KHQpP3QucmVwbGFjZSgv4YOs4YOU4YOa4YOYJC8sIuGDrOGDmuGDmOGDoSDhg6zhg5jhg5wiKTp2b2lkIDB9LHM6IuGDoOGDkOGDm+GDk+GDlOGDnOGDmOGDm+GDlCDhg6zhg5Dhg5vhg5giLG06IuGDrOGDo+GDl+GDmCIsbW06IiVkIOGDrOGDo+GDl+GDmCIsaDoi4YOh4YOQ4YOQ4YOX4YOYIixoaDoiJWQg4YOh4YOQ4YOQ4YOX4YOYIixkOiLhg5Phg6bhg5QiLGRkOiIlZCDhg5Phg6bhg5QiLE06IuGDl+GDleGDlCIsTU06IiVkIOGDl+GDleGDlCIseToi4YOs4YOU4YOa4YOYIix5eToiJWQg4YOs4YOU4YOa4YOYIn0sb3JkaW5hbFBhcnNlOi8wfDEt4YOa4YOYfOGDm+GDlC1cZHsxLDJ9fFxkezEsMn0t4YOULyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD90OjE9PT10P3QrIi3hg5rhg5giOnQ8MjB8fHQ8PTEwMCYmdCUyMD09PTB8fHQlMTAwPT09MD8i4YOb4YOULSIrdDp0KyIt4YOUIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezA6Ii3RiNGWIiwxOiIt0YjRliIsMjoiLdGI0ZYiLDM6Ii3RiNGWIiw0OiIt0YjRliIsNToiLdGI0ZYiLDY6Ii3RiNGLIiw3OiIt0YjRliIsODoiLdGI0ZYiLDk6Ii3RiNGLIiwxMDoiLdGI0YsiLDIwOiIt0YjRiyIsMzA6Ii3RiNGLIiw0MDoiLdGI0YsiLDUwOiIt0YjRliIsNjA6Ii3RiNGLIiw3MDoiLdGI0ZYiLDgwOiIt0YjRliIsOTA6Ii3RiNGLIiwxMDA6Ii3RiNGWIn0sbj10LmRlZmluZUxvY2FsZSgia2siLHttb250aHM6ItKa0LDSo9GC0LDRgF/QkNKb0L/QsNC9X9Cd0LDRg9GA0YvQt1/QodOZ0YPRltGAX9Cc0LDQvNGL0YBf0JzQsNGD0YHRi9C8X9Co0ZbQu9C00LVf0KLQsNC80YvQt1/SmtGL0YDQutKv0LnQtdC6X9Ka0LDQt9Cw0L1f0prQsNGA0LDRiNCwX9CW0LXQu9GC0L7Sm9GB0LDQvSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi0prQsNKjX9CQ0pvQv1/QndCw0YNf0KHTmdGDX9Cc0LDQvF/QnNCw0YNf0KjRltC7X9Ci0LDQvF/SmtGL0YBf0prQsNC3X9Ka0LDRgF/QltC10LsiLnNwbGl0KCJfIiksd2Vla2RheXM6ItCW0LXQutGB0LXQvdCx0ZZf0JTSr9C50YHQtdC90LHRll/QodC10LnRgdC10L3QsdGWX9Ch05nRgNGB0LXQvdCx0ZZf0JHQtdC50YHQtdC90LHRll/QltKx0LzQsF/QodC10L3QsdGWIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItCW0LXQul/QlNKv0Llf0KHQtdC5X9Ch05nRgF/QkdC10Llf0JbSsdC8X9Ch0LXQvSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0JbQul/QlNC5X9Ch0Llf0KHRgF/QkdC5X9CW0Lxf0KHQvSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQkdKv0LPRltC9INGB0LDSk9Cw0YJdIExUIixuZXh0RGF5OiJb0JXRgNGC0LXSoyDRgdCw0pPQsNGCXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9GB0LDSk9Cw0YJdIExUIixsYXN0RGF5OiJb0JrQtdGI0LUg0YHQsNKT0LDRgl0gTFQiLGxhc3RXZWVrOiJb06jRgtC60LXQvSDQsNC/0YLQsNC90YvSo10gZGRkZCBb0YHQsNKT0LDRgl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzINGW0YjRltC90LTQtSIscGFzdDoiJXMg0LHSsdGA0YvQvSIsczoi0LHRltGA0L3QtdGI0LUg0YHQtdC60YPQvdC0IixtOiLQsdGW0YAg0LzQuNC90YPRgiIsbW06IiVkINC80LjQvdGD0YIiLGg6ItCx0ZbRgCDRgdCw0pPQsNGCIixoaDoiJWQg0YHQsNKT0LDRgiIsZDoi0LHRltGAINC60q/QvSIsZGQ6IiVkINC60q/QvSIsTToi0LHRltGAINCw0LkiLE1NOiIlZCDQsNC5Iix5OiLQsdGW0YAg0LbRi9C7Iix5eToiJWQg0LbRi9C7In0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjRiNGWfNGI0YspLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBuPXQlMTAsaT10Pj0xMDA/MTAwOm51bGw7cmV0dXJuIHQrKGVbdF18fGVbbl18fGVbaV0pfSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgia20iLHttb250aHM6IuGemOGegOGemuGetl/hnoDhnrvhnpjhn5Lhnpfhn4hf4Z6Y4Z634Z6T4Z62X+GemOGfgeGen+Getl/hnqfhnp/hnpfhnrZf4Z6Y4Z634Z6Q4Z674Z6T4Z62X+GegOGegOGfkuGegOGeiuGetl/hnp/hnrjhnqDhnrZf4Z6A4Z6J4Z+S4Z6J4Z62X+Gej+Geu+Gem+Getl/hnpzhnrfhnoXhn5LhnobhnrfhnoDhnrZf4Z6S4Z+S4Z6T4Z68Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLhnpjhnoDhnprhnrZf4Z6A4Z674Z6Y4Z+S4Z6X4Z+IX+GemOGet+Gek+Getl/hnpjhn4Hhnp/hnrZf4Z6n4Z6f4Z6X4Z62X+GemOGet+GekOGeu+Gek+Getl/hnoDhnoDhn5LhnoDhnorhnrZf4Z6f4Z644Z6g4Z62X+GegOGeieGfkuGeieGetl/hno/hnrvhnpvhnrZf4Z6c4Z634Z6F4Z+S4Z6G4Z634Z6A4Z62X+GekuGfkuGek+GevCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4Z6i4Z624Z6R4Z634Z6P4Z+S4Z6ZX+GeheGfkOGek+GfkuGekV/hnqLhnoThn5LhnoLhnrbhnppf4Z6W4Z674Z6SX+GeluGfkuGemuGeoOGen+GfkuGelOGej+Get+GfjV/hnp/hnrvhnoDhn5Lhnppf4Z6f4Z+F4Z6a4Z+NIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuGeouGetuGekeGet+Gej+GfkuGemV/hnoXhn5DhnpPhn5LhnpFf4Z6i4Z6E4Z+S4Z6C4Z624Z6aX+GeluGeu+Gekl/hnpbhn5LhnprhnqDhnp/hn5LhnpThno/hnrfhn41f4Z6f4Z674Z6A4Z+S4Z6aX+Gen+GfheGemuGfjSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4Z6i4Z624Z6R4Z634Z6P4Z+S4Z6ZX+GeheGfkOGek+GfkuGekV/hnqLhnoThn5LhnoLhnrbhnppf4Z6W4Z674Z6SX+GeluGfkuGemuGeoOGen+GfkuGelOGej+Get+GfjV/hnp/hnrvhnoDhn5Lhnppf4Z6f4Z+F4Z6a4Z+NIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+GekOGfkuGehOGfg+Gek+GfgeGfhyDhnpjhn4nhn4ThnoRdIExUIixuZXh0RGF5OiJb4Z6f4Z+S4Z6i4Z+C4Z6AIOGemOGfieGfhOGehF0gTFQiLG5leHRXZWVrOiJkZGRkIFvhnpjhn4nhn4ThnoRdIExUIixsYXN0RGF5OiJb4Z6Y4Z+S4Z6f4Z634Z6b4Z6Y4Z634Z6JIOGemOGfieGfhOGehF0gTFQiLGxhc3RXZWVrOiJkZGRkIFvhnp/hnpThn5Lhno/hnrbhnqDhn43hnpjhnrvhnpNdIFvhnpjhn4nhn4ThnoRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+GekeGfgOGejyIscGFzdDoiJXPhnpjhnrvhnpMiLHM6IuGelOGfieGeu+Gek+GfkuGemOGetuGek+GenOGet+Gek+GetuGekeGeuCIsbToi4Z6Y4Z694Z6Z4Z6T4Z624Z6R4Z64IixtbToiJWQg4Z6T4Z624Z6R4Z64IixoOiLhnpjhnr3hnpnhnpjhn4nhn4ThnoQiLGhoOiIlZCDhnpjhn4nhn4ThnoQiLGQ6IuGemOGeveGemeGekOGfkuGehOGfgyIsZGQ6IiVkIOGekOGfkuGehOGfgyIsTToi4Z6Y4Z694Z6Z4Z6B4Z+CIixNTToiJWQg4Z6B4Z+CIix5OiLhnpjhnr3hnpnhnobhn5LhnpPhnrbhn4YiLHl5OiIlZCDhnobhn5LhnpPhnrbhn4YifSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgia28iLHttb250aHM6IjHsm5RfMuyblF8z7JuUXzTsm5RfNeyblF827JuUXzfsm5RfOOyblF857JuUXzEw7JuUXzEx7JuUXzEy7JuUIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx7JuUXzLsm5RfM+yblF807JuUXzXsm5RfNuyblF837JuUXzjsm5RfOeyblF8xMOyblF8xMeyblF8xMuyblCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi7J287JqU7J28X+yblOyalOydvF/tmZTsmpTsnbxf7IiY7JqU7J28X+uqqeyalOydvF/quIjsmpTsnbxf7Yag7JqU7J28Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuydvF/sm5Rf7ZmUX+yImF/rqqlf6riIX+2GoCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi7J28X+yblF/tmZRf7IiYX+uqqV/quIhf7YagIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBo7IucIG3rtoQiLExUUzoiQSBo7IucIG3rtoQgc+y0iCIsTDoiWVlZWS5NTS5ERCIsTEw6IllZWVnrhYQgTU1NTSBE7J28IixMTEw6IllZWVnrhYQgTU1NTSBE7J28IEEgaOyLnCBt67aEIixMTExMOiJZWVlZ64WEIE1NTU0gROydvCBkZGRkIEEgaOyLnCBt67aEIn0sY2FsZW5kYXI6e3NhbWVEYXk6IuyYpOuKmCBMVCIsbmV4dERheToi64K07J28IExUIixuZXh0V2VlazoiZGRkZCBMVCIsbGFzdERheToi7Ja07KCcIExUIixsYXN0V2Vlazoi7KeA64Kc7KO8IGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIO2bhCIscGFzdDoiJXMg7KCEIixzOiLrqofstIgiLHNzOiIlZOy0iCIsbToi7J2867aEIixtbToiJWTrtoQiLGg6Iu2VnOyLnOqwhCIsaGg6IiVk7Iuc6rCEIixkOiLtlZjro6giLGRkOiIlZOydvCIsTToi7ZWc64usIixNTToiJWTri6wiLHk6IuydvOuFhCIseXk6IiVk64WEIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ97J28LyxvcmRpbmFsOiIlZOydvCIsbWVyaWRpZW1QYXJzZTov7Jik7KCEfOyYpO2bhC8saXNQTTpmdW5jdGlvbih0KXtyZXR1cm4i7Jik7ZuEIj09PXR9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDwxMj8i7Jik7KCEIjoi7Jik7ZuEIn19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQsZSxuLGkpe3ZhciByPXttOlsiZW5nIE1pbnV0dCIsImVuZ2VyIE1pbnV0dCJdLGg6WyJlbmcgU3Rvbm4iLCJlbmdlciBTdG9ubiJdLGQ6WyJlZW4gRGFnIiwiZW5nZW0gRGFnIl0sTTpbImVlIE1vdW50IiwiZW5nZW0gTW91bnQiXSx5OlsiZWUgSm9lciIsImVuZ2VtIEpvZXIiXX07cmV0dXJuIGU/cltuXVswXTpyW25dWzFdfWZ1bmN0aW9uIG4odCl7dmFyIGU9dC5zdWJzdHIoMCx0LmluZGV4T2YoIiAiKSk7cmV0dXJuIHIoZSk/ImEgIit0OiJhbiAiK3R9ZnVuY3Rpb24gaSh0KXt2YXIgZT10LnN1YnN0cigwLHQuaW5kZXhPZigiICIpKTtyZXR1cm4gcihlKT8idmlydSAiK3Q6InZpcnVuICIrdH1mdW5jdGlvbiByKHQpe2lmKHQ9cGFyc2VJbnQodCwxMCksaXNOYU4odCkpcmV0dXJuITE7aWYodDwwKXJldHVybiEwO2lmKHQ8MTApcmV0dXJuIDQ8PXQmJnQ8PTc7aWYodDwxMDApe3ZhciBlPXQlMTAsbj10LzEwO3JldHVybiByKDA9PT1lP246ZSl9aWYodDwxZTQpe2Zvcig7dD49MTA7KXQvPTEwO3JldHVybiByKHQpfXJldHVybiB0Lz0xZTMscih0KX12YXIgbz10LmRlZmluZUxvY2FsZSgibGIiLHttb250aHM6IkphbnVhcl9GZWJydWFyX03DpGVyel9BYnLDq2xsX01lZV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW4uX0ZlYnIuX01yei5fQWJyLl9NZWVfSnVuLl9KdWwuX0F1Zy5fU2VwdC5fT2t0Ll9Ob3YuX0Rlei4iLnNwbGl0KCJfIiksd2Vla2RheXM6IlNvbm5kZWdfTcOpaW5kZWdfRMOrbnNjaGRlZ19Nw6t0dHdvY2hfRG9ubmVzY2hkZWdfRnJlaWRlZ19TYW1zY2hkZWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU28uX03DqS5fRMOrLl9Nw6suX0RvLl9Gci5fU2EuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTb19Nw6lfRMOrX03Dq19Eb19Gcl9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0gW0F1ZXJdIixMVFM6Ikg6bW06c3MgW0F1ZXJdIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIFtBdWVyXSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0gW0F1ZXJdIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIYXV0IHVtXSBMVCIsc2FtZUVsc2U6IkwiLG5leHREYXk6IltNdWVyIHVtXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3VtXSBMVCIsbGFzdERheToiW0fDq3NjaHRlciB1bV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMjpjYXNlIDQ6cmV0dXJuIltMZXNjaHRlbl0gZGRkZCBbdW1dIExUIjtkZWZhdWx0OnJldHVybiJbTGVzY2h0ZV0gZGRkZCBbdW1dIExUIn19fSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpuLHBhc3Q6aSxzOiJlIHB1ZXIgU2Vrb25uZW4iLG06ZSxtbToiJWQgTWludXR0ZW4iLGg6ZSxoaDoiJWQgU3Rvbm5lbiIsZDplLGRkOiIlZCBEZWVnIixNOmUsTU06IiVkIE3DqWludCIseTplLHl5OiIlZCBKb2VyIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoImxvIix7bW9udGhzOiLguqHgurHguofguoHguq3guplf4LqB4Lq44Lqh4Lqe4LqyX+C6oeC6teC6meC6sl/gu4DguqHguqrgurJf4Lqe4Lq24LqU4Lqq4Lqw4Lqe4LqyX+C6oeC6tOC6luC6uOC6meC6sl/guoHgu43guqXgurDguoHgurvgupRf4Lqq4Lq04LqH4Lqr4LqyX+C6geC6seC6meC6jeC6sl/gupXgurjguqXgurJf4Lqe4Lqw4LqI4Lq04LqBX+C6l+C6seC6meC6p+C6siIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Lqh4Lqx4LqH4LqB4Lqt4LqZX+C6geC6uOC6oeC6nuC6sl/guqHgurXgupngurJf4LuA4Lqh4Lqq4LqyX+C6nuC6tuC6lOC6quC6sOC6nuC6sl/guqHgurTgupbgurjgupngurJf4LqB4LuN4Lql4Lqw4LqB4Lq74LqUX+C6quC6tOC6h+C6q+C6sl/guoHgurHgupnguo3gurJf4LqV4Lq44Lql4LqyX+C6nuC6sOC6iOC6tOC6gV/gupfgurHgupnguqfgurIiLnNwbGl0KCJfIiksd2Vla2RheXM6IuC6reC6suC6l+C6tOC6lF/guojgurHguplf4Lqt4Lqx4LqH4LqE4Lqy4LqZX+C6nuC6uOC6lF/gup7gurDguqvgurHgupRf4Lqq4Lq44LqBX+C7gOC6quC6u+C6siIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgupfgurTgupRf4LqI4Lqx4LqZX+C6reC6seC6h+C6hOC6suC6mV/gup7gurjgupRf4Lqe4Lqw4Lqr4Lqx4LqUX+C6quC6uOC6gV/gu4DguqrgurvgurIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuC6l1/guohf4Lqt4LqEX+C6nl/gup7guqtf4Lqq4LqBX+C6qiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6IuC6p+C6seC6mWRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/gupXguq3gupngu4Dguorgurvgu4ngurJ84LqV4Lqt4LqZ4LuB4Lql4LqHLyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybiLgupXguq3gupngu4HguqXguociPT09dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDEyPyLgupXguq3gupngu4Dguorgurvgu4ngurIiOiLgupXguq3gupngu4HguqXguocifSxjYWxlbmRhcjp7c2FtZURheToiW+C6oeC6t+C7ieC6meC6teC7ieC7gOC6p+C6peC6sl0gTFQiLG5leHREYXk6IlvguqHgurfgu4nguq3gurfgu4jgupngu4DguqfguqXgurJdIExUIixuZXh0V2VlazoiW+C6p+C6seC6mV1kZGRkW+C7nOC7ieC6suC7gOC6p+C6peC6sl0gTFQiLGxhc3REYXk6IlvguqHgurfgu4nguqfgurLgupngupngurXgu4ngu4DguqfguqXgurJdIExUIixsYXN0V2VlazoiW+C6p+C6seC6mV1kZGRkW+C7geC6peC7ieC6p+C6meC6teC7ieC7gOC6p+C6peC6sl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuC6reC6teC6gSAlcyIscGFzdDoiJXPgupzgu4jgurLgupnguqHgurIiLHM6IuC6muC7jeC7iOC7gOC6l+C6u+C7iOC6suC7g+C6lOC6p+C6tOC6meC6suC6l+C6tSIsbToiMSDgupngurLgupfgurUiLG1tOiIlZCDgupngurLgupfgurUiLGg6IjEg4LqK4Lq74LuI4Lqn4LuC4Lqh4LqHIixoaDoiJWQg4LqK4Lq74LuI4Lqn4LuC4Lqh4LqHIixkOiIxIOC6oeC6t+C7iSIsZGQ6IiVkIOC6oeC6t+C7iSIsTToiMSDgu4DgupTgurfguq3gupkiLE1NOiIlZCDgu4DgupTgurfguq3gupkiLHk6IjEg4Lqb4Lq1Iix5eToiJWQg4Lqb4Lq1In0sb3JkaW5hbFBhcnNlOi8o4LqX4Lq14LuIKVxkezEsMn0vLG9yZGluYWw6ZnVuY3Rpb24odCl7cmV0dXJuIuC6l+C6teC7iCIrdH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQsZSxuLGkpe3JldHVybiBlPyJrZWxpb3Mgc2VrdW5kxJdzIjppPyJrZWxpxbMgc2VrdW5kxb5pxbMiOiJrZWxpYXMgc2VrdW5kZXMifWZ1bmN0aW9uIG4odCxlLG4saSl7cmV0dXJuIGU/cihuKVswXTppP3IobilbMV06cihuKVsyXX1mdW5jdGlvbiBpKHQpe3JldHVybiB0JTEwPT09MHx8dD4xMCYmdDwyMH1mdW5jdGlvbiByKHQpe3JldHVybiBzW3RdLnNwbGl0KCJfIil9ZnVuY3Rpb24gbyh0LGUsbyxzKXt2YXIgYT10KyIgIjtyZXR1cm4gMT09PXQ/YStuKHQsZSxvWzBdLHMpOmU/YSsoaSh0KT9yKG8pWzFdOnIobylbMF0pOnM/YStyKG8pWzFdOmErKGkodCk/cihvKVsxXTpyKG8pWzJdKX12YXIgcz17bToibWludXTEl19taW51dMSXc19taW51dMSZIixtbToibWludXTEl3NfbWludcSNacWzX21pbnV0ZXMiLGg6InZhbGFuZGFfdmFsYW5kb3NfdmFsYW5kxIUiLGhoOiJ2YWxhbmRvc192YWxhbmTFs192YWxhbmRhcyIsZDoiZGllbmFfZGllbm9zX2RpZW7EhSIsZGQ6ImRpZW5vc19kaWVuxbNfZGllbmFzIixNOiJtxJdudW9fbcSXbmVzaW9fbcSXbmVzxK8iLE1NOiJtxJduZXNpYWlfbcSXbmVzacWzX23El25lc2l1cyIseToibWV0YWlfbWV0xbNfbWV0dXMiLHl5OiJtZXRhaV9tZXTFs19tZXR1cyJ9LGE9dC5kZWZpbmVMb2NhbGUoImx0Iix7bW9udGhzOntmb3JtYXQ6InNhdXNpb192YXNhcmlvX2tvdm9fYmFsYW5kxb5pb19nZWd1xb7El3NfYmlyxb5lbGlvX2xpZXBvc19ydWdwasWrxI1pb19ydWdzxJdqb19zcGFsaW9fbGFwa3JpxI1pb19ncnVvZMW+aW8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2F1c2lzX3Zhc2FyaXNfa292YXNfYmFsYW5kaXNfZ2VndcW+xJdfYmlyxb5lbGlzX2xpZXBhX3J1Z3Bqxat0aXNfcnVnc8SXamlzX3NwYWxpc19sYXBrcml0aXNfZ3J1b2RpcyIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6InNhdV92YXNfa292X2JhbF9nZWdfYmlyX2xpZV9yZ3BfcmdzX3NwYV9sYXBfZ3JkIi5zcGxpdCgiXyIpLHdlZWtkYXlzOntmb3JtYXQ6InNla21hZGllbsSvX3Bpcm1hZGllbsSvX2FudHJhZGllbsSvX3RyZcSNaWFkaWVuxK9fa2V0dmlydGFkaWVuxK9fcGVua3RhZGllbsSvX8WhZcWhdGFkaWVuxK8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2VrbWFkaWVuaXNfcGlybWFkaWVuaXNfYW50cmFkaWVuaXNfdHJlxI1pYWRpZW5pc19rZXR2aXJ0YWRpZW5pc19wZW5rdGFkaWVuaXNfxaFlxaF0YWRpZW5pcyIuc3BsaXQoIl8iKSxpc0Zvcm1hdDovZGRkZCBISDptbS99LHdlZWtkYXlzU2hvcnQ6IlNla19QaXJfQW50X1RyZV9LZXRfUGVuX8WgZcWhIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTX1BfQV9UX0tfUG5fxaAiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSIsTExMOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0sIEhIOm1tIFt2YWwuXSIsTExMTDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBkZGRkLCBISDptbSBbdmFsLl0iLGw6IllZWVktTU0tREQiLGxsOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0iLGxsbDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBISDptbSBbdmFsLl0iLGxsbGw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSwgZGRkLCBISDptbSBbdmFsLl0ifSxjYWxlbmRhcjp7c2FtZURheToiW8WgaWFuZGllbl0gTFQiLG5leHREYXk6IltSeXRval0gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJbVmFrYXJdIExUIixsYXN0V2VlazoiW1ByYcSXanVzxK9dIGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InBvICVzIixwYXN0OiJwcmllxaEgJXMiLHM6ZSxtOm4sbW06byxoOm4saGg6byxkOm4sZGQ6byxNOm4sTU06byx5Om4seXk6b30sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LW9qaS8sb3JkaW5hbDpmdW5jdGlvbih0KXtyZXR1cm4gdCsiLW9qaSJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBhfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4pe3JldHVybiBuP2UlMTA9PT0xJiYxMSE9PWU/dFsyXTp0WzNdOmUlMTA9PT0xJiYxMSE9PWU/dFswXTp0WzFdfWZ1bmN0aW9uIG4odCxuLGkpe3JldHVybiB0KyIgIitlKG9baV0sdCxuKX1mdW5jdGlvbiBpKHQsbixpKXtyZXR1cm4gZShvW2ldLHQsbil9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBlPyJkYcW+YXMgc2VrdW5kZXMiOiJkYcW+xIFtIHNla3VuZMSTbSJ9dmFyIG89e206Im1pbsWrdGVzX21pbsWrdMSTbV9taW7Fq3RlX21pbsWrdGVzIi5zcGxpdCgiXyIpLG1tOiJtaW7Fq3Rlc19taW7Fq3TEk21fbWluxat0ZV9taW7Fq3RlcyIuc3BsaXQoIl8iKSxoOiJzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzIi5zcGxpdCgiXyIpLGhoOiJzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzIi5zcGxpdCgiXyIpLGQ6ImRpZW5hc19kaWVuxIFtX2RpZW5hX2RpZW5hcyIuc3BsaXQoIl8iKSxkZDoiZGllbmFzX2RpZW7EgW1fZGllbmFfZGllbmFzIi5zcGxpdCgiXyIpLE06Im3Ek25lxaFhX23Ek25lxaFpZW1fbcSTbmVzaXNfbcSTbmXFoWkiLnNwbGl0KCJfIiksTU06Im3Ek25lxaFhX23Ek25lxaFpZW1fbcSTbmVzaXNfbcSTbmXFoWkiLnNwbGl0KCJfIikseToiZ2FkYV9nYWRpZW1fZ2Fkc19nYWRpIi5zcGxpdCgiXyIpLHl5OiJnYWRhX2dhZGllbV9nYWRzX2dhZGkiLnNwbGl0KCJfIil9LHM9dC5kZWZpbmVMb2NhbGUoImx2Iix7bW9udGhzOiJqYW52xIFyaXNfZmVicnXEgXJpc19tYXJ0c19hcHLEq2xpc19tYWlqc19qxatuaWpzX2rFq2xpanNfYXVndXN0c19zZXB0ZW1icmlzX29rdG9icmlzX25vdmVtYnJpc19kZWNlbWJyaXMiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWlfasWrbl9qxatsX2F1Z19zZXBfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN2xJN0ZGllbmFfcGlybWRpZW5hX290cmRpZW5hX3RyZcWhZGllbmFfY2V0dXJ0ZGllbmFfcGlla3RkaWVuYV9zZXN0ZGllbmEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3ZfUF9PX1RfQ19Qa19TIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdl9QX09fVF9DX1BrX1MiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWS4iLExMOiJZWVlZLiBbZ2FkYV0gRC4gTU1NTSIsTExMOiJZWVlZLiBbZ2FkYV0gRC4gTU1NTSwgSEg6bW0iLExMTEw6IllZWVkuIFtnYWRhXSBELiBNTU1NLCBkZGRkLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbxaBvZGllbiBwdWxrc3Rlbl0gTFQiLG5leHREYXk6IltSxKt0IHB1bGtzdGVuXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3B1bGtzdGVuXSBMVCIsbGFzdERheToiW1Zha2FyIHB1bGtzdGVuXSBMVCIsbGFzdFdlZWs6IltQYWfEgWp1xaHEgV0gZGRkZCBbcHVsa3N0ZW5dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJwxJNjICVzIixwYXN0OiJwaXJtcyAlcyIsczpyLG06aSxtbTpuLGg6aSxoaDpuLGQ6aSxkZDpuLE06aSxNTTpuLHk6aSx5eTpufSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gc30pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT17d29yZHM6e206WyJqZWRhbiBtaW51dCIsImplZG5vZyBtaW51dGEiXSxtbTpbIm1pbnV0IiwibWludXRhIiwibWludXRhIl0saDpbImplZGFuIHNhdCIsImplZG5vZyBzYXRhIl0saGg6WyJzYXQiLCJzYXRhIiwic2F0aSJdLGRkOlsiZGFuIiwiZGFuYSIsImRhbmEiXSxNTTpbIm1qZXNlYyIsIm1qZXNlY2EiLCJtamVzZWNpIl0seXk6WyJnb2RpbmEiLCJnb2RpbmUiLCJnb2RpbmEiXX0sY29ycmVjdEdyYW1tYXRpY2FsQ2FzZTpmdW5jdGlvbih0LGUpe3JldHVybiAxPT09dD9lWzBdOnQ+PTImJnQ8PTQ/ZVsxXTplWzJdfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxuLGkpe3ZhciByPWUud29yZHNbaV07cmV0dXJuIDE9PT1pLmxlbmd0aD9uP3JbMF06clsxXTp0KyIgIitlLmNvcnJlY3RHcmFtbWF0aWNhbENhc2UodCxyKX19LG49dC5kZWZpbmVMb2NhbGUoIm1lIix7bW9udGhzOlsiamFudWFyIiwiZmVicnVhciIsIm1hcnQiLCJhcHJpbCIsIm1haiIsImp1biIsImp1bCIsImF2Z3VzdCIsInNlcHRlbWJhciIsIm9rdG9iYXIiLCJub3ZlbWJhciIsImRlY2VtYmFyIl0sbW9udGhzU2hvcnQ6WyJqYW4uIiwiZmViLiIsIm1hci4iLCJhcHIuIiwibWFqIiwianVuIiwianVsIiwiYXZnLiIsInNlcC4iLCJva3QuIiwibm92LiIsImRlYy4iXSx3ZWVrZGF5czpbIm5lZGplbGphIiwicG9uZWRqZWxqYWsiLCJ1dG9yYWsiLCJzcmlqZWRhIiwixI1ldHZydGFrIiwicGV0YWsiLCJzdWJvdGEiXSx3ZWVrZGF5c1Nob3J0OlsibmVkLiIsInBvbi4iLCJ1dG8uIiwic3JpLiIsIsSNZXQuIiwicGV0LiIsInN1Yi4iXSx3ZWVrZGF5c01pbjpbIm5lIiwicG8iLCJ1dCIsInNyIiwixI1lIiwicGUiLCJzdSJdLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC4gTU0uIFlZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5hcyB1XSBMVCIsbmV4dERheToiW3NqdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGplbGp1XSBbdV0gTFQiO2Nhc2UgMzpyZXR1cm4iW3VdIFtzcmlqZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lIHVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3ZhciB0PVsiW3Byb8WhbGVdIFtuZWRqZWxqZV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbcG9uZWRqZWxqa2FdIFt1XSBMVCIsIltwcm/FoWxvZ10gW3V0b3JrYV0gW3VdIExUIiwiW3Byb8WhbGVdIFtzcmlqZWRlXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFvEjWV0dnJ0a2FdIFt1XSBMVCIsIltwcm/FoWxvZ10gW3BldGthXSBbdV0gTFQiLCJbcHJvxaFsZV0gW3N1Ym90ZV0gW3VdIExUIl07cmV0dXJuIHRbdGhpcy5kYXkoKV19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiJwcmlqZSAlcyIsczoibmVrb2xpa28gc2VrdW5kaSIsbTplLnRyYW5zbGF0ZSxtbTplLnRyYW5zbGF0ZSxoOmUudHJhbnNsYXRlLGhoOmUudHJhbnNsYXRlLGQ6ImRhbiIsZGQ6ZS50cmFuc2xhdGUsTToibWplc2VjIixNTTplLnRyYW5zbGF0ZSx5OiJnb2RpbnUiLHl5OmUudHJhbnNsYXRlfSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgibWsiLHttb250aHM6ItGY0LDQvdGD0LDRgNC4X9GE0LXQstGA0YPQsNGA0Lhf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Zhf0ZjRg9C90Lhf0ZjRg9C70Lhf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCy0YDQuF/QvtC60YLQvtC80LLRgNC4X9C90L7QtdC80LLRgNC4X9C00LXQutC10LzQstGA0LgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGY0LDQvV/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LNf0YHQtdC/X9C+0LrRgl/QvdC+0LVf0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQvdC10LTQtdC70LBf0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQvtC6X9C/0LXRgtC+0Lpf0YHQsNCx0L7RgtCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItC90LXQtF/Qv9C+0L1f0LLRgtC+X9GB0YDQtV/Rh9C10YJf0L/QtdGCX9GB0LDQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0L1lX9C/b1/QstGCX9GB0YBf0YfQtV/Qv9C1X9GBYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiRC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JTQtdC90LXRgSDQstC+XSBMVCIsbmV4dERheToiW9Cj0YLRgNC1INCy0L5dIExUIixuZXh0V2VlazoiW9CS0L5dIGRkZGQgW9Cy0L5dIExUIixsYXN0RGF5OiJb0JLRh9C10YDQsCDQstC+XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpjYXNlIDY6cmV0dXJuIlvQmNC30LzQuNC90LDRgtCw0YLQsF0gZGRkZCBb0LLQvl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9CY0LfQvNC40L3QsNGC0LjQvtGCXSBkZGRkIFvQstC+XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQv9C+0YHQu9C1ICVzIixwYXN0OiLQv9GA0LXQtCAlcyIsczoi0L3QtdC60L7Qu9C60YMg0YHQtdC60YPQvdC00LgiLG06ItC80LjQvdGD0YLQsCIsbW06IiVkINC80LjQvdGD0YLQuCIsaDoi0YfQsNGBIixoaDoiJWQg0YfQsNGB0LAiLGQ6ItC00LXQvSIsZGQ6IiVkINC00LXQvdCwIixNOiLQvNC10YHQtdGGIixNTToiJWQg0LzQtdGB0LXRhtC4Iix5OiLQs9C+0LTQuNC90LAiLHl5OiIlZCDQs9C+0LTQuNC90LgifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC10LJ80LXQvXzRgtC4fNCy0Lh80YDQuHzQvNC4KS8sb3JkaW5hbDpmdW5jdGlvbih0KXt2YXIgZT10JTEwLG49dCUxMDA7cmV0dXJuIDA9PT10P3QrIi3QtdCyIjowPT09bj90KyIt0LXQvSI6bj4xMCYmbjwyMD90KyIt0YLQuCI6MT09PWU/dCsiLdCy0LgiOjI9PT1lP3QrIi3RgNC4Ijo3PT09ZXx8OD09PWU/dCsiLdC80LgiOnQrIi3RgtC4In0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoIm1sIix7bW9udGhzOiLgtJzgtKjgtYHgtLXgtLDgtL9f4LSr4LWG4LSs4LWN4LSw4LWB4LS14LSw4LS/X+C0ruC0vuC1vOC0muC1jeC0muC1jV/gtI/gtKrgtY3gtLDgtL/gtb1f4LSu4LWH4LSv4LWNX+C0nOC1guC1ul/gtJzgtYLgtLLgtYhf4LST4LSX4LS44LWN4LSx4LWN4LSx4LWNX+C0uOC1huC0quC1jeC0seC1jeC0seC0guC0rOC1vF/gtJLgtJXgtY3gtJ/gtYvgtKzgtbxf4LSo4LS14LSC4LSs4LW8X+C0oeC0v+C0uOC0guC0rOC1vCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4LSc4LSo4LWBLl/gtKvgtYbgtKzgtY3gtLDgtYEuX+C0ruC0vuC1vC5f4LSP4LSq4LWN4LSw4LS/Ll/gtK7gtYfgtK/gtY1f4LSc4LWC4LW6X+C0nOC1guC0suC1iC5f4LST4LSXLl/gtLjgtYbgtKrgtY3gtLHgtY3gtLEuX+C0kuC0leC1jeC0n+C1iy5f4LSo4LS14LSCLl/gtKHgtL/gtLjgtIIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLgtJ7gtL7gtK/gtLHgtL7gtLTgtY3gtJpf4LSk4LS/4LSZ4LWN4LSV4LSz4LS+4LS04LWN4LSaX+C0muC1iuC0teC1jeC0teC0vuC0tOC1jeC0ml/gtKzgtYHgtKfgtKjgtL7gtLTgtY3gtJpf4LS14LWN4LSv4LS+4LS04LS+4LS04LWN4LSaX+C0teC1huC0s+C1jeC0s+C0v+C0r+C0vuC0tOC1jeC0ml/gtLbgtKjgtL/gtK/gtL7gtLTgtY3gtJoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4LSe4LS+4LSv4LW8X+C0pOC0v+C0meC1jeC0leC1vl/gtJrgtYrgtLXgtY3gtLVf4LSs4LWB4LSn4LW7X+C0teC1jeC0r+C0vuC0tOC0gl/gtLXgtYbgtLPgtY3gtLPgtL9f4LS24LSo4LS/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgtJ7gtL5f4LSk4LS/X+C0muC1il/gtKzgtYFf4LS14LWN4LSv4LS+X+C0teC1hl/gtLYiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0gLeC0qOC1gSIsTFRTOiJBIGg6bW06c3MgLeC0qOC1gSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0gLeC0qOC1gSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSAt4LSo4LWBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvgtIfgtKjgtY3gtKjgtY1dIExUIixuZXh0RGF5OiJb4LSo4LS+4LSz4LWGXSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4LSH4LSo4LWN4LSo4LSy4LWGXSBMVCIsbGFzdFdlZWs6IlvgtJXgtLTgtL/gtJ7gtY3gtJ5dIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY0iLHBhc3Q6IiVzIOC0ruC1geC1u+C0quC1jSIsczoi4LSF4LW94LSqIOC0qOC0v+C0ruC0v+C0t+C0meC1jeC0meC1viIsbToi4LSS4LSw4LWBIOC0ruC0v+C0qOC0v+C0seC1jeC0seC1jSIsbW06IiVkIOC0ruC0v+C0qOC0v+C0seC1jeC0seC1jSIsaDoi4LSS4LSw4LWBIOC0ruC0o+C0v+C0leC1jeC0leC1guC1vCIsaGg6IiVkIOC0ruC0o+C0v+C0leC1jeC0leC1guC1vCIsZDoi4LSS4LSw4LWBIOC0puC0v+C0teC0uOC0giIsZGQ6IiVkIOC0puC0v+C0teC0uOC0giIsTToi4LSS4LSw4LWBIOC0ruC0vuC0uOC0giIsTU06IiVkIOC0ruC0vuC0uOC0giIseToi4LSS4LSw4LWBIOC0teC1vOC0t+C0giIseXk6IiVkIOC0teC1vOC0t+C0giJ9LG1lcmlkaWVtUGFyc2U6L+C0sOC0vuC0pOC1jeC0sOC0v3zgtLDgtL7gtLXgtL/gtLLgtYZ84LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jXzgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIJ84LSw4LS+4LSk4LWN4LSw4LS/L2ksbWU=", "base64"));
  res.write(new Buffer("cmlkaWVtSG91cjpmdW5jdGlvbih0LGUpe3JldHVybiAxMj09PXQmJih0PTApLCLgtLDgtL7gtKTgtY3gtLDgtL8iPT09ZSYmdD49NHx8IuC0ieC0muC1jeC0miDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY0iPT09ZXx8IuC0teC1iOC0leC1geC0qOC1jeC0qOC1h+C0sOC0giI9PT1lP3QrMTI6dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDQ/IuC0sOC0vuC0pOC1jeC0sOC0vyI6dDwxMj8i4LSw4LS+4LS14LS/4LSy4LWGIjp0PDE3PyLgtIngtJrgtY3gtJog4LSV4LS04LS/4LSe4LWN4LSe4LWNIjp0PDIwPyLgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIIiOiLgtLDgtL7gtKTgtY3gtLDgtL8ifX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4saSl7dmFyIHI9IiI7aWYoZSlzd2l0Y2gobil7Y2FzZSJzIjpyPSLgpJXgpL7gpLngpYAg4KS44KWH4KSV4KSC4KSmIjticmVhaztjYXNlIm0iOnI9IuCkj+CklSDgpK7gpL/gpKjgpL/gpJ8iO2JyZWFrO2Nhc2UibW0iOnI9IiVkIOCkruCkv+CkqOCkv+Ckn+ClhyI7YnJlYWs7Y2FzZSJoIjpyPSLgpI/gpJUg4KSk4KS+4KS4IjticmVhaztjYXNlImhoIjpyPSIlZCDgpKTgpL7gpLgiO2JyZWFrO2Nhc2UiZCI6cj0i4KSP4KSVIOCkpuCkv+CkteCkuCI7YnJlYWs7Y2FzZSJkZCI6cj0iJWQg4KSm4KS/4KS14KS4IjticmVhaztjYXNlIk0iOnI9IuCkj+CklSDgpK7gpLngpL/gpKjgpL4iO2JyZWFrO2Nhc2UiTU0iOnI9IiVkIOCkruCkueCkv+CkqOClhyI7YnJlYWs7Y2FzZSJ5IjpyPSLgpI/gpJUg4KS14KSw4KWN4KS3IjticmVhaztjYXNlInl5IjpyPSIlZCDgpLXgpLDgpY3gpLfgpYcifWVsc2Ugc3dpdGNoKG4pe2Nhc2UicyI6cj0i4KSV4KS+4KS54KWAIOCkuOClh+CkleCkguCkpuCkvuCkgiI7YnJlYWs7Y2FzZSJtIjpyPSLgpI/gpJXgpL4g4KSu4KS/4KSo4KS/4KSf4KS+IjticmVhaztjYXNlIm1tIjpyPSIlZCDgpK7gpL/gpKjgpL/gpJ/gpL7gpIIiO2JyZWFrO2Nhc2UiaCI6cj0i4KSP4KSV4KS+IOCkpOCkvuCkuOCkviI7YnJlYWs7Y2FzZSJoaCI6cj0iJWQg4KSk4KS+4KS44KS+4KSCIjticmVhaztjYXNlImQiOnI9IuCkj+CkleCkviDgpKbgpL/gpLXgpLjgpL4iO2JyZWFrO2Nhc2UiZGQiOnI9IiVkIOCkpuCkv+CkteCkuOCkvuCkgiI7YnJlYWs7Y2FzZSJNIjpyPSLgpI/gpJXgpL4g4KSu4KS54KS/4KSo4KWN4KSv4KS+IjticmVhaztjYXNlIk1NIjpyPSIlZCDgpK7gpLngpL/gpKjgpY3gpK/gpL7gpIIiO2JyZWFrO2Nhc2UieSI6cj0i4KSP4KSV4KS+IOCkteCksOCljeCkt+CkviI7YnJlYWs7Y2FzZSJ5eSI6cj0iJWQg4KS14KSw4KWN4KS34KS+4KSCIn1yZXR1cm4gci5yZXBsYWNlKC8lZC9pLHQpfXZhciBuPXsxOiLgpaciLDI6IuClqCIsMzo=", "base64"));
  res.write(new Buffer("IuClqSIsNDoi4KWqIiw1OiLgpasiLDY6IuClrCIsNzoi4KWtIiw4OiLgpa4iLDk6IuClryIsMDoi4KWmIn0saT17IuClpyI6IjEiLCLgpagiOiIyIiwi4KWpIjoiMyIsIuClqiI6IjQiLCLgpasiOiI1Iiwi4KWsIjoiNiIsIuClrSI6IjciLCLgpa4iOiI4Iiwi4KWvIjoiOSIsIuClpiI6IjAifSxyPXQuZGVmaW5lTG9jYWxlKCJtciIse21vbnRoczoi4KSc4KS+4KSo4KWH4KS14KS+4KSw4KWAX+Ckq+Clh+CkrOCljeCksOClgeCkteCkvuCksOClgF/gpK7gpL7gpLDgpY3gpJpf4KSP4KSq4KWN4KSw4KS/4KSyX+CkruClh1/gpJzgpYLgpKhf4KSc4KWB4KSy4KWIX+CkkeCkl+CkuOCljeCkn1/gpLjgpKrgpY3gpJ/gpYfgpILgpKzgpLBf4KSR4KSV4KWN4KSf4KWL4KSs4KSwX+CkqOCli+CkteCljeCkueClh+CkguCkrOCksF/gpKHgpL/gpLjgpYfgpILgpKzgpLAiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuCknOCkvuCkqOClhy5f4KSr4KWH4KSs4KWN4KSw4KWBLl/gpK7gpL7gpLDgpY3gpJouX+Ckj+CkquCljeCksOCkvy5f4KSu4KWHLl/gpJzgpYLgpKguX+CknOClgeCksuCliC5f4KSR4KSXLl/gpLjgpKrgpY3gpJ/gpYfgpIIuX+CkkeCkleCljeCkn+Cliy5f4KSo4KWL4KS14KWN4KS54KWH4KSCLl/gpKHgpL/gpLjgpYfgpIIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLgpLDgpLXgpL/gpLXgpL7gpLBf4KS44KWL4KSu4KS14KS+4KSwX+CkruCkguCkl+Cks+CkteCkvuCksF/gpKzgpYHgpKfgpLXgpL7gpLBf4KSX4KWB4KSw4KWC4KS14KS+4KSwX+CktuClgeCkleCljeCksOCkteCkvuCksF/gpLbgpKjgpL/gpLXgpL7gpLAiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4KSw4KS14KS/X+CkuOCli+Ckrl/gpK7gpILgpJfgpLNf4KSs4KWB4KSnX+Ckl+ClgeCksOClgl/gpLbgpYHgpJXgpY3gpLBf4KS24KSo4KS/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgpLBf4KS44KWLX+CkruCkgl/gpKzgpYFf4KSX4KWBX+CktuClgV/gpLYiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0g4KS14KS+4KSc4KSk4KS+IixMVFM6IkEgaDptbTpzcyDgpLXgpL7gpJzgpKTgpL4iLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQSBoOm1tIOCkteCkvuCknOCkpOCkviIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgpLXgpL7gpJzgpKTgpL4ifSxjYWxlbmRhcjp7c2FtZURheToiW+CkhuCknF0gTFQiLG5leHREYXk6IlvgpIngpKbgpY3gpK/gpL5dIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6IlvgpJXgpL7gpLJdIExUIixsYXN0V2VlazoiW+CkruCkvuCkl+ClgOCksl0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz4KSu4KSn4KWN4KSv4KWHIixwYXN0OiIlc+CkquClguCksOCljeCkteClgCIsczplLG06ZSxtbTplLGg6ZSxoaDplLGQ6ZSxkZDplLE06ZSxNTTplLHk6ZSx5eTplfSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4KWn4KWo4KWp4KWq4KWr4KWs4KWt4KWu4KWv4KWmXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBpW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gblt0XX0pfSxtZXJpZGllbVBhcnNlOi/gpLDgpL7gpKTgpY3gpLDgpYB84KS44KSV4KS+4KSz4KWAfOCkpuClgeCkquCkvuCksOClgHzgpLjgpL7gpK/gpILgpJXgpL7gpLPgpYAvLG1lcmlkaWVtSG91cjpmdW5jdGlvbih0LGUpe3JldHVybiAxMj09PXQmJih0PTApLCLgpLDgpL7gpKTgpY3gpLDgpYAiPT09ZT90PDQ/dDp0KzEyOiLgpLjgpJXgpL7gpLPgpYAiPT09ZT90OiLgpKbgpYHgpKrgpL7gpLDgpYAiPT09ZT90Pj0xMD90OnQrMTI6IuCkuOCkvuCkr+CkguCkleCkvuCks+ClgCI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i4KSw4KS+4KSk4KWN4KSw4KWAIjp0PDEwPyLgpLjgpJXgpL7gpLPgpYAiOnQ8MTc/IuCkpuClgeCkquCkvuCksOClgCI6dDwyMD8i4KS44KS+4KSv4KSC4KSV4KS+4KSz4KWAIjoi4KSw4KS+4KSk4KWN4KSw4KWAIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoIm1zIix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hY19BcHJpbF9NZWlfSnVuX0p1bGFpX09nb3NfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGlzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9PZ3NfU2VwX09rdF9Ob3ZfRGlzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJBaGFkX0lzbmluX1NlbGFzYV9SYWJ1X0toYW1pc19KdW1hYXRfU2FidHUiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQWhkX0lzbl9TZWxfUmFiX0toYV9KdW1fU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJBaF9Jc19TbF9SYl9LbV9KbV9TYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSJ9LG1lcmlkaWVtUGFyc2U6L3BhZ2l8dGVuZ2FoYXJpfHBldGFuZ3xtYWxhbS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDEyPT09dCYmKHQ9MCksInBhZ2kiPT09ZT90OiJ0ZW5nYWhhcmkiPT09ZT90Pj0xMT90OnQrMTI6InBldGFuZyI9PT1lfHwibWFsYW0iPT09ZT90KzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDExPyJwYWdpIjp0PDE1PyJ0ZW5nYWhhcmkiOnQ8MTk/InBldGFuZyI6Im1hbGFtIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIYXJpIGluaSBwdWt1bF0gTFQiLG5leHREYXk6IltFc29rIHB1a3VsXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3B1a3VsXSBMVCIsbGFzdERheToiW0tlbG1hcmluIHB1a3VsXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2xlcGFzIHB1a3VsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGVwYXMiLHM6ImJlYmVyYXBhIHNhYXQiLG06InNlbWluaXQiLG1tOiIlZCBtaW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoIm1zLW15Iix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hY19BcHJpbF9NZWlfSnVuX0p1bGFpX09nb3NfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGlzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9PZ3NfU2VwX09rdF9Ob3ZfRGlzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJBaGFkX0lzbmluX1NlbGFzYV9SYWJ1X0toYW1pc19KdW1hYXRfU2FidHUiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQWhkX0lzbl9TZWxfUmFiX0toYV9KdW1fU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJBaF9Jc19TbF9SYl9LbV9KbV9TYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSJ9LG1lcmlkaWVtUGFyc2U6L3BhZ2l8dGVuZ2FoYXJpfHBldGFuZ3xtYWxhbS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDEyPT09dCYmKHQ9MCksInBhZ2kiPT09ZT90OiJ0ZW5nYWhhcmkiPT09ZT90Pj0xMT90OnQrMTI6InBldGFuZyI9PT1lfHwibWFsYW0iPT09ZT90KzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDExPyJwYWdpIjp0PDE1PyJ0ZW5nYWhhcmkiOnQ8MTk/InBldGFuZyI6Im1hbGFtIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIYXJpIGluaSBwdWt1bF0gTFQiLG5leHREYXk6IltFc29rIHB1a3VsXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3B1a3VsXSBMVCIsbGFzdERheToiW0tlbG1hcmluIHB1a3VsXSBMVCIsbGFz", "base64"));
  res.write(new Buffer("dFdlZWs6ImRkZGQgW2xlcGFzIHB1a3VsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGVwYXMiLHM6ImJlYmVyYXBhIHNhYXQiLG06InNlbWluaXQiLG1tOiIlZCBtaW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6IuGBgSIsMjoi4YGCIiwzOiLhgYMiLDQ6IuGBhCIsNToi4YGFIiw2OiLhgYYiLDc6IuGBhyIsODoi4YGIIiw5OiLhgYkiLDA6IuGBgCJ9LG49eyLhgYEiOiIxIiwi4YGCIjoiMiIsIuGBgyI6IjMiLCLhgYQiOiI0Iiwi4YGFIjoiNSIsIuGBhiI6IjYiLCLhgYciOiI3Iiwi4YGIIjoiOCIsIuGBiSI6IjkiLCLhgYAiOiIwIn0saT10LmRlZmluZUxvY2FsZSgibXkiLHttb250aHM6IuGAh+GAlOGAuuGAlOGAneGAq+GAm+GArl/hgJbhgLHhgJbhgLHhgKzhgLrhgJ3hgKvhgJvhgK5f4YCZ4YCQ4YC6X+GAp+GAleGAvOGArl/hgJnhgLFf4YCH4YC94YCU4YC6X+GAh+GAsOGAnOGAreGAr+GAhOGAul/hgJ7hgLzhgILhgK/hgJDhgLpf4YCF4YCA4YC64YCQ4YCE4YC64YCY4YCsX+GAoeGAseGArOGAgOGAuuGAkOGAreGAr+GAmOGArF/hgJThgK3hgK/hgJ3hgIThgLrhgJjhgKxf4YCS4YCu4YCH4YCE4YC64YCY4YCsIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLhgIfhgJThgLpf4YCW4YCxX+GAmeGAkOGAul/hgJXhgLzhgK5f4YCZ4YCxX+GAh+GAveGAlOGAul/hgJzhgK3hgK/hgIThgLpf4YCe4YC8X+GAheGAgOGAul/hgKHhgLHhgKzhgIDhgLpf4YCU4YCt4YCvX+GAkuGAriIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4YCQ4YCU4YCE4YC64YC54YCC4YCU4YC94YCxX+GAkOGAlOGAhOGAuuGAueGAnOGArF/hgKHhgIThgLrhgLnhgILhgKtf4YCX4YCv4YCS4YC54YCT4YCf4YCw4YC4X+GAgOGAvOGArOGAnuGAleGAkOGAseGAuF/hgJ7hgLHhgKzhgIDhgLzhgKxf4YCF4YCU4YCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuGAlOGAveGAsV/hgJzhgKxf4YCC4YCrX+GAn+GAsOGAuF/hgIDhgLzhgKxf4YCe4YCx4YCsX+GAlOGAsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4YCU4YC94YCxX+GAnOGArF/hgILhgKtf4YCf4YCw4YC4X+GAgOGAvOGArF/hgJ7hgLHhgKxf4YCU4YCxIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4YCa4YCU4YCxLl0gTFQgW+GAmeGAvuGArF0iLG5leHREYXk6IlvhgJnhgJThgIDhgLrhgJbhgLzhgJThgLpdIExUIFvhgJnhgL7hgKxdIixuZXh0V2VlazoiZGRkZCBMVCBb4YCZ4YC+4YCsXSIsbGFzdERheToiW+GAmeGAlOGAsS7hgIBdIExUIFvhgJnhgL7hgKxdIixsYXN0V2VlazoiW+GAleGAvOGAruGAuOGAgeGAsuGAt+GAnuGAseGArF0gZGRkZCBMVCBb4YCZ4YC+4YCsXSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi4YCc4YCs4YCZ4YCK4YC64YC3ICVzIOGAmeGAvuGArCIscGFzdDoi4YCc4YC94YCU4YC64YCB4YCy4YC34YCe4YCx4YCsICVzIOGAgCIsczoi4YCF4YCA4YC54YCA4YCU4YC6LuGAoeGAlOGAiuGAuuGAuOGAhOGAmuGAuiIsbToi4YCQ4YCF4YC64YCZ4YCt4YCU4YCF4YC6IixtbToiJWQg4YCZ4YCt4YCU4YCF4YC6IixoOiLhgJDhgIXhgLrhgJThgKzhgJvhgK4iLGhoOiIlZCDhgJThgKzhgJvhgK4iLGQ6IuGAkOGAheGAuuGAm+GAgOGAuiIsZGQ6IiVkIOGAm+GAgOGAuiIsTToi4YCQ4YCF4YC64YCcIixNTToiJWQg4YCcIix5OiLhgJDhgIXhgLrhgJThgL7hgIXhgLoiLHl5OiIlZCDhgJThgL7hgIXhgLoifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4YGB4YGC4YGD4YGE4YGF4YGG4YGH4YGI4YGJ4YGAXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gaX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgibmIiLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcnNfYXByaWxfbWFpX2p1bmlfanVsaV9hdWd1c3Rfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbi5fZmViLl9tYXJzX2FwcmlsX21haV9qdW5pX2p1bGlfYXVnLl9zZXAuX29rdC5fbm92Ll9kZXMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzw7huZGFnX21hbmRhZ190aXJzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7hyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InPDuC5fbWEuX3RpLl9vbi5fdG8uX2ZyLl9sw7guIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzw7hfbWFfdGlfb25fdG9fZnJfbMO4Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tIixMTExMOiJkZGRkIEQuIE1NTU0gWVlZWSBba2wuXSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbaSBkYWcga2wuXSBMVCIsbmV4dERheToiW2kgbW9yZ2VuIGtsLl0gTFQiLG5leHRXZWVrOiJkZGRkIFtrbC5dIExUIixsYXN0RGF5OiJbaSBnw6VyIGtsLl0gTFQiLGxhc3RXZWVrOiJbZm9ycmlnZV0gZGRkZCBba2wuXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib20gJXMiLHBhc3Q6ImZvciAlcyBzaWRlbiIsczoibm9lbiBzZWt1bmRlciIsbToiZXR0IG1pbnV0dCIsbW06IiVkIG1pbnV0dGVyIixoOiJlbiB0aW1lIixoaDoiJWQgdGltZXIiLGQ6ImVuIGRhZyIsZGQ6IiVkIGRhZ2VyIixNOiJlbiBtw6VuZWQiLE1NOiIlZCBtw6VuZWRlciIseToiZXR0IMOlciIseXk6IiVkIMOlciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXsxOiLgpaciLDI6IuClqCIsMzoi4KWpIiw0OiLgpaoiLDU6IuClqyIsNjoi4KWsIiw3OiLgpa0iLDg6IuClriIsOToi4KWvIiwwOiLgpaYifSxuPXsi4KWnIjoiMSIsIuClqCI6IjIiLCLgpakiOiIzIiwi4KWqIjoiNCIsIuClqyI6IjUiLCLgpawiOiI2Iiwi4KWtIjoiNyIsIuClriI6IjgiLCLgpa8iOiI5Iiwi4KWmIjoiMCJ9LGk9dC5kZWZpbmVMb2NhbGUoIm5lIix7bW9udGhzOiLgpJzgpKjgpLXgpLDgpYBf4KSr4KWH4KSs4KWN4KSw4KWB4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpL/gpLJf4KSu4KSIX+CknOClgeCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS34KWN4KSfX+CkuOClh+CkquCljeCkn+Clh+CkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYvgpKzgpLBf4KSo4KWL4KSt4KWH4KSu4KWN4KSs4KSwX+CkoeCkv+CkuOClh+CkruCljeCkrOCksCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4KSc4KSoLl/gpKvgpYfgpKzgpY3gpLDgpYEuX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpL8uX+CkruCkiF/gpJzgpYHgpKhf4KSc4KWB4KSy4KS+4KSILl/gpIXgpJcuX+CkuOClh+CkquCljeCkny5f4KSF4KSV4KWN4KSf4KWLLl/gpKjgpYvgpK3gpYcuX+CkoeCkv+CkuOClhy4iLnNwbGl0KCJfIiksd2Vla2RheXM6IuCkhuCkh+CkpOCkrOCkvuCksF/gpLjgpYvgpK7gpKzgpL7gpLBf4KSu4KSZ4KWN4KSX4KSy4KSs4KS+4KSwX+CkrOClgeCkp+CkrOCkvuCksF/gpKzgpL/gpLngpL/gpKzgpL7gpLBf4KS24KWB4KSV4KWN4KSw4KSs4KS+4KSwX+CktuCkqOCkv+CkrOCkvuCksCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgpIbgpIfgpKQuX+CkuOCli+Ckri5f4KSu4KSZ4KWN4KSX4KSyLl/gpKzgpYHgpKcuX+CkrOCkv+CkueCkvy5f4KS24KWB4KSV4KWN4KSwLl/gpLbgpKjgpL8uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgpIYuX+CkuOCliy5f4KSu4KSCLl/gpKzgpYEuX+CkrOCkvy5f4KS24KWBLl/gpLYuIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQeCkleCliyBoOm1tIOCkrOCknOClhyIsTFRTOiJB4KSV4KWLIGg6bW06c3Mg4KSs4KSc4KWHIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEHgpJXgpYsgaDptbSDgpKzgpJzgpYciLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBB4KSV4KWLIGg6bW0g4KSs4KSc4KWHIn0scHJlcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbih0KXtyZXR1cm4gblt0XX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xkL2csZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSk4KS/fOCkrOCkv+CkueCkvuCkqHzgpKbgpL/gpIngpIHgpLjgpYt84KS44KS+4KSB4KSdLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMTI9PT10JiYodD0wKSwi4KSw4KS+4KSk4KS/Ij09PWU/dDw0P3Q6dCsxMjoi4KSs4KS/4KS54KS+4KSoIj09PWU/dDoi4KSm4KS/4KSJ4KSB4KS44KWLIj09PWU/dD49MTA/dDp0KzEyOiLgpLjgpL7gpIHgpJ0iPT09ZT90KzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDM/IuCksOCkvuCkpOCkvyI6dDwxMj8i4KSs4KS/4KS54KS+4KSoIjp0PDE2PyLgpKbgpL/gpIngpIHgpLjgpYsiOnQ8MjA/IuCkuOCkvuCkgeCknSI6IuCksOCkvuCkpOCkvyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KSG4KScXSBMVCIsbmV4dERheToiW+CkreCli+CksuCkv10gTFQiLG5leHRXZWVrOiJb4KSG4KSJ4KSB4KSm4KWLXSBkZGRkWyxdIExUIixsYXN0RGF5OiJb4KS54KS/4KSc4KWLXSBMVCIsbGFzdFdlZWs6IlvgpJfgpI/gpJXgpYtdIGRkZGRbLF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz4KSu4KS+IixwYXN0OiIlcyDgpIXgpJfgpL7gpKHgpL8iLHM6IuCkleClh+CkueClgCDgpJXgpY3gpLfgpKMiLG06IuCkj+CklSDgpK7gpL/gpKjgpYfgpJ8iLG1tOiIlZCDgpK7gpL/gpKjgpYfgpJ8iLGg6IuCkj+CklSDgpJjgpKPgpY3gpJ/gpL4iLGhoOiIlZCDgpJjgpKPgpY3gpJ/gpL4iLGQ6IuCkj+CklSDgpKbgpL/gpKgiLGRkOiIlZCDgpKbgpL/gpKgiLE06IuCkj+CklSDgpK7gpLngpL/gpKjgpL4iLE1NOiIlZCDgpK7gpLngpL/gpKjgpL4iLHk6IuCkj+CklSDgpKzgpLDgpY3gpLciLHl5OiIlZCDgpKzgpLDgpY3gpLcifSx3ZWVrOntkb3c6MCxkb3k6Nn19KTtyZXR1cm4gaX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT0iamFuLl9mZWIuX21ydC5fYXByLl9tZWlfanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSxuPSJqYW5fZmViX21ydF9hcHJfbWVpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKSxpPXQuZGVmaW5lTG9jYWxlKCJubCIse21vbnRoczoiamFudWFyaV9mZWJydWFyaV9tYWFydF9hcHJpbF9tZWlfanVuaV9qdWxpX2F1Z3VzdHVzX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OmZ1bmN0aW9uKHQsaSl7cmV0dXJuLy1NTU0tLy50ZXN0KGkpP25bdC5tb250aCgpXTplW3QubW9udGgoKV19LHdlZWtkYXlzOiJ6b25kYWdfbWFhbmRhZ19kaW5zZGFnX3dvZW5zZGFnX2RvbmRlcmRhZ192cmlqZGFnX3phdGVyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InpvLl9tYS5fZGkuX3dvLl9kby5fdnIuX3phLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiWm9fTWFfRGlfV29fRG9fVnJfWmEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQtTU0tWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilt2YW5kYWFnIG9tXSBMVCIsbmV4dERheToiW21vcmdlbiBvbV0gTFQiLG5leHRXZWVrOiJkZGRkIFtvbV0gTFQiLGxhc3REYXk6IltnaXN0ZXJlbiBvbV0gTFQiLGxhc3RXZWVrOiJbYWZnZWxvcGVuXSBkZGRkIFtvbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im92ZXIgJXMiLHBhc3Q6IiVzIGdlbGVkZW4iLHM6ImVlbiBwYWFyIHNlY29uZGVuIixtOiLDqcOpbiBtaW51dXQiLG1tOiIlZCBtaW51dGVuIixoOiLDqcOpbiB1dXIiLGhoOiIlZCB1dXIiLGQ6IsOpw6luIGRhZyIsZGQ6IiVkIGRhZ2VuIixNOiLDqcOpbiBtYWFuZCIsTU06IiVkIG1hYW5kZW4iLHk6IsOpw6luIGphYXIiLHl5OiIlZCBqYWFyIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0ZXxkZSkvLG9yZGluYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHQrKDE9PT10fHw4PT09dHx8dD49MjA/InN0ZSI6ImRlIil9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJubiIse21vbnRoczoiamFudWFyX2ZlYnJ1YXJfbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bmRhZ19tw6VuZGFnX3R5c2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbGF1cmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzdW5fbcOlbl90eXNfb25zX3Rvcl9mcmVfbGF1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzdV9tw6VfdHlfb25fdG9fZnJfbMO4Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltJIGRhZyBrbG9ra2FdIExUIixuZXh0RGF5OiJbSSBtb3Jnb24ga2xva2thXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2tsb2trYV0gTFQiLGxhc3REYXk6IltJIGfDpXIga2xva2thXSBMVCIsbGFzdFdlZWs6IltGw7hyZWfDpWFuZGVdIGRkZGQgW2tsb2trYV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9tICVzIixwYXN0OiJmb3IgJXMgc2lkYW4iLHM6Im5va3JlIHNla3VuZCIsbToiZWl0IG1pbnV0dCIsbW06IiVkIG1pbnV0dCIsaDoiZWluIHRpbWUiLGhoOiIlZCB0aW1hciIsZDoiZWluIGRhZyIsZGQ6IiVkIGRhZ2FyIixNOiJlaW4gbcOlbmFkIixNTToiJWQgbcOlbmFkZXIiLHk6ImVpdCDDpXIiLHl5OiIlZCDDpXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT17MToi4KmnIiwyOiLgqagiLDM6IuCpqSIsNDoi4KmqIiw1OiLgqasiLDY6IuCprCIsNzoi4KmtIiw4OiLgqa4iLDk6IuCpryIsMDoi4KmmIn0sbj17IuCppyI6IjEiLAoJIuCpqCI6IjIiLCLgqakiOiIzIiwi4KmqIjoiNCIsIuCpqyI6IjUiLCLgqawiOiI2Iiwi4KmtIjoiNyIsIuCpriI6IjgiLCLgqa8iOiI5Iiwi4KmmIjoiMCJ9LGk9dC5kZWZpbmVMb2NhbGUoInBhLWluIix7bW9udGhzOiLgqJzgqKjgqLXgqLDgqYBf4Kir4Ki84Kiw4Ki14Kiw4KmAX+CoruCovuCosOComl/gqIXgqKrgqY3gqLDgqYjgqLJf4Kiu4KiIX+ConOCpguCoqF/gqJzgqYHgqLLgqL7gqIhf4KiF4KiX4Ki44KikX+CouOCopOCpsOCorOCosF/gqIXgqJXgqKTgqYLgqKzgqLBf4Kio4Ki14Kmw4Kis4KiwX+CopuCouOCpsOCorOCosCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Kic4Kio4Ki14Kiw4KmAX+Coq+CovOCosOCoteCosOCpgF/gqK7gqL7gqLDgqJpf4KiF4Kiq4KmN4Kiw4KmI4KiyX+CoruCoiF/gqJzgqYLgqKhf4Kic4KmB4Kiy4Ki+4KiIX+CoheCol+CouOCopF/gqLjgqKTgqbDgqKzgqLBf4KiF4KiV4Kik4KmC4Kis4KiwX+CoqOCoteCpsOCorOCosF/gqKbgqLjgqbDgqKzgqLAiLnNwbGl0KCJfIiksd2Vla2RheXM6IuCokOCopOCoteCovuCosF/gqLjgqYvgqK7gqLXgqL7gqLBf4Kiu4Kmw4KiX4Kiy4Ki14Ki+4KiwX+CorOCpgeCop+CoteCovuCosF/gqLXgqYDgqLDgqLXgqL7gqLBf4Ki44Ki84KmB4Kmx4KiV4Kiw4Ki14Ki+4KiwX+CouOCovOCoqOCpgOComuCosOCoteCovuCosCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgqJDgqKRf4Ki44KmL4KiuX+CoruCpsOCol+Cosl/gqKzgqYHgqKdf4Ki14KmA4KiwX+CouOCovOCpgeColeCosF/gqLjgqLzgqKjgqYAiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuCokOCopF/gqLjgqYvgqK5f4Kiu4Kmw4KiX4KiyX+CorOCpgeCop1/gqLXgqYDgqLBf4Ki44Ki84KmB4KiV4KiwX+CouOCovOCoqOCpgCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSDgqLXgqJzgqYciLExUUzoiQSBoOm1tOnNzIOCoteConOCphyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0g4Ki14Kic4KmHIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCoteConOCphyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KiF4KicXSBMVCIsbmV4dERheToiW+ColeCosl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+ColeCosl0gTFQiLGxhc3RXZWVrOiJb4Kiq4Ki/4Kib4Kiy4KmHXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4Ki14Ki/4Kmx4KiaIixwYXN0OiIlcyDgqKrgqL/gqJvgqLLgqYciLHM6IuColeCpgeConSDgqLjgqJXgqL/gqbDgqJ8iLG06IuCoh+ColSDgqK7gqL/gqbDgqJ8iLG1tOiIlZCDgqK7gqL/gqbDgqJ8iLGg6IuCoh+CpseColSDgqJjgqbDgqJ/gqL4iLGhoOiIlZCDgqJjgqbDgqJ/gqYciLGQ6IuCoh+CpseColSDgqKbgqL/gqKgiLGRkOiIlZCDgqKbgqL/gqKgiLE06IuCoh+CpseColSDgqK7gqLngqYDgqKjgqL4iLE1NOiIlZCDgqK7gqLngqYDgqKjgqYciLHk6IuCoh+CpseColSDgqLjgqL7gqLIiLHl5OiIlZCDgqLjgqL7gqLIifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4Kmn4Kmo4Kmp4Kmq4Kmr4Kms4Kmt4Kmu4Kmv4KmmXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSxtZXJpZGllbVBhcnNlOi/gqLDgqL7gqKR84Ki44Ki14KmH4KiwfOCopuCpgeCoquCoueCov+CosHzgqLjgqLzgqL7gqK4vLG1lcmlkaWVtSG91cjpmdW5jdGlvbih0LGUpe3JldHVybiAxMj09PXQmJih0PTApLCLgqLDgqL7gqKQiPT09ZT90PDQ/dDp0KzEyOiLgqLjgqLXgqYfgqLAiPT09ZT90OiLgqKbgqYHgqKrgqLngqL/gqLAiPT09ZT90Pj0xMD90OnQrMTI6IuCouOCovOCovuCoriI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i4Kiw4Ki+4KikIjp0PDEwPyLgqLjgqLXgqYfgqLAiOnQ8MTc/IuCopuCpgeCoquCoueCov+CosCI6dDwyMD8i4Ki44Ki84Ki+4KiuIjoi4Kiw4Ki+4KikIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSk7cmV0dXJuIGl9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdCUxMDw1JiZ0JTEwPjEmJn5+KHQvMTApJTEwIT09MX1mdW5jdGlvbiBuKHQsbixpKXt2YXIgcj10KyIgIjtzd2l0Y2goaSl7Y2FzZSJtIjpyZXR1cm4gbj8ibWludXRhIjoibWludXTEmSI7Y2FzZSJtbSI6cmV0dXJuIHIrKGUodCk/Im1pbnV0eSI6Im1pbnV0Iik7Y2FzZSJoIjpyZXR1cm4gbj8iZ29kemluYSI6ImdvZHppbsSZIjtjYXNlImhoIjpyZXR1cm4gcisoZSh0KT8iZ29kemlueSI6ImdvZHppbiIpO2Nhc2UiTU0iOnJldHVybiByKyhlKHQpPyJtaWVzacSFY2UiOiJtaWVzacSZY3kiKTtjYXNlInl5IjpyZXR1cm4gcisoZSh0KT8ibGF0YSI6ImxhdCIpfX12YXIgaT0ic3R5Y3plxYRfbHV0eV9tYXJ6ZWNfa3dpZWNpZcWEX21hal9jemVyd2llY19saXBpZWNfc2llcnBpZcWEX3dyemVzaWXFhF9wYcW6ZHppZXJuaWtfbGlzdG9wYWRfZ3J1ZHppZcWEIi5zcGxpdCgiXyIpLHI9InN0eWN6bmlhX2x1dGVnb19tYXJjYV9rd2lldG5pYV9tYWphX2N6ZXJ3Y2FfbGlwY2Ffc2llcnBuaWFfd3J6ZcWbbmlhX3Bhxbpkemllcm5pa2FfbGlzdG9wYWRhX2dydWRuaWEiLnNwbGl0KCJfIiksbz10LmRlZmluZUxvY2FsZSgicGwiLHttb250aHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4iIj09PWU/IigiK3JbdC5tb250aCgpXSsifCIraVt0Lm1vbnRoKCldKyIpIjovRCBNTU1NLy50ZXN0KGUpP3JbdC5tb250aCgpXTppW3QubW9udGgoKV19LG1vbnRoc1Nob3J0OiJzdHlfbHV0X21hcl9rd2lfbWFqX2N6ZV9saXBfc2llX3dyel9wYcW6X2xpc19ncnUiLnNwbGl0KCJfIiksd2Vla2RheXM6Im5pZWR6aWVsYV9wb25pZWR6aWHFgmVrX3d0b3Jla1/Fm3JvZGFfY3p3YXJ0ZWtfcGnEhXRla19zb2JvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmllX3Bvbl93dF/Fm3JfY3p3X3B0X3NiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJOZF9Qbl9XdF/FmnJfQ3pfUHRfU28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRHppxZsgb10gTFQiLG5leHREYXk6IltKdXRybyBvXSBMVCIsbmV4dFdlZWs6IltXXSBkZGRkIFtvXSBMVCIsbGFzdERheToiW1djem9yYWogb10gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW1cgemVzesWCxIUgbmllZHppZWzEmSBvXSBMVCI7Y2FzZSAzOnJldHVybiJbVyB6ZXN6xYLEhSDFm3JvZMSZIG9dIExUIjtjYXNlIDY6cmV0dXJuIltXIHplc3rFgsSFIHNvYm90xJkgb10gTFQiO2RlZmF1bHQ6cmV0dXJuIltXIHplc3rFgnldIGRkZGQgW29dIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiIlcyB0ZW11IixzOiJraWxrYSBzZWt1bmQiLG06bixtbTpuLGg6bixoaDpuLGQ6IjEgZHppZcWEIixkZDoiJWQgZG5pIixNOiJtaWVzacSFYyIsTU06bix5OiJyb2siLHl5Om59LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBvfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJwdCIse21vbnRoczoiSmFuZWlyb19GZXZlcmVpcm9fTWFyw6dvX0FicmlsX01haW9fSnVuaG9fSnVsaG9fQWdvc3RvX1NldGVtYnJvX091dHVicm9fTm92ZW1icm9fRGV6ZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZXZfTWFyX0Ficl9NYWlfSnVuX0p1bF9BZ29fU2V0X091dF9Ob3ZfRGV6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEb21pbmdvX1NlZ3VuZGEtRmVpcmFfVGVyw6dhLUZlaXJhX1F1YXJ0YS1GZWlyYV9RdWludGEtRmVpcmFfU2V4dGEtRmVpcmFfU8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb21fU2VnX1Rlcl9RdWFfUXVpX1NleF9Tw6FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb21fMsKqXzPCql80wqpfNcKqXzbCql9Tw6FiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hvamUgw6BzXSBMVCIsbmV4dERheToiW0FtYW5ow6Mgw6BzXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8Ogc10gTFQiLGxhc3REYXk6IltPbnRlbSDDoHNdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5kYXkoKXx8Nj09PXRoaXMuZGF5KCk/IlvDmmx0aW1vXSBkZGRkIFvDoHNdIExUIjoiW8OabHRpbWFdIGRkZGQgW8Ogc10gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbSAlcyIscGFzdDoiaMOhICVzIixzOiJzZWd1bmRvcyIsbToidW0gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW1hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW0gZGlhIixkZDoiJWQgZGlhcyIsTToidW0gbcOqcyIsTU06IiVkIG1lc2VzIix5OiJ1bSBhbm8iLHl5OiIlZCBhbm9zIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJwdC1iciIse21vbnRoczoiSmFuZWlyb19GZXZlcmVpcm9fTWFyw6dvX0FicmlsX01haW9fSnVuaG9fSnVsaG9fQWdvc3RvX1NldGVtYnJvX091dHVicm9fTm92ZW1icm9fRGV6ZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZXZfTWFyX0Ficl9NYWlfSnVuX0p1bF9BZ29fU2V0X091dF9Ob3ZfRGV6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEb21pbmdvX1NlZ3VuZGEtZmVpcmFfVGVyw6dhLWZlaXJhX1F1YXJ0YS1mZWlyYV9RdWludGEtZmVpcmFfU2V4dGEtZmVpcmFfU8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb21fU2VnX1Rlcl9RdWFfUXVpX1NleF9Tw6FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb21fMsKqXzPCql80wqpfNcKqXzbCql9Tw6FiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIFvDoHNdIEhIOm1tIixMTExMOiJkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgW8Ogc10gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hvamUgw6BzXSBMVCIsbmV4dERheToiW0FtYW5ow6Mgw6BzXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8Ogc10gTFQiLGxhc3REYXk6IltPbnRlbSDDoHNdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5kYXkoKXx8Nj09PXRoaXMuZGF5KCk/IlvDmmx0aW1vXSBkZGRkIFvDoHNdIExUIjoiW8OabHRpbWFdIGRkZGQgW8Ogc10gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbSAlcyIscGFzdDoiJXMgYXRyw6FzIixzOiJwb3Vjb3Mgc2VndW5kb3MiLG06InVtIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVtYSBob3JhIixoaDoiJWQgaG9yYXMiLGQ6InVtIGRpYSIsZGQ6IiVkIGRpYXMiLE06InVtIG3DqnMiLE1NOiIlZCBtZXNlcyIseToidW0gYW5vIix5eToiJWQgYW5vcyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6In0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUodCxlLG4pe3ZhciBpPXttbToibWludXRlIixoaDoib3JlIixkZDoiemlsZSIsTU06Imx1bmkiLHl5OiJhbmkifSxyPSIgIjtyZXR1cm4odCUxMDA+PTIwfHx0Pj0xMDAmJnQlMTAwPT09MCkmJihyPSIgZGUgIiksdCtyK2lbbl19dmFyIG49dC5kZWZpbmVMb2NhbGUoInJvIix7bW9udGhzOiJpYW51YXJpZV9mZWJydWFyaWVfbWFydGllX2FwcmlsaWVfbWFpX2l1bmllX2l1bGllX2F1Z3VzdF9zZXB0ZW1icmllX29jdG9tYnJpZV9ub2llbWJyaWVfZGVjZW1icmllIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJpYW4uX2ZlYnIuX21hcnQuX2Fwci5fbWFpX2l1bi5faXVsLl9hdWcuX3NlcHQuX29jdC5fbm92Ll9kZWMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkdW1pbmljxINfbHVuaV9tYXLIm2lfbWllcmN1cmlfam9pX3ZpbmVyaV9zw6JtYsSDdMSDIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkR1bV9MdW5fTWFyX01pZV9Kb2lfVmluX1PDom0iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkR1X0x1X01hX01pX0pvX1ZpX1PDoiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2F6aSBsYV0gTFQiLG5leHREYXk6Ilttw6JpbmUgbGFdIExUIixuZXh0V2VlazoiZGRkZCBbbGFdIExUIixsYXN0RGF5OiJbaWVyaSBsYV0gTFQiLGxhc3RXZWVrOiJbZm9zdGFdIGRkZGQgW2xhXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToicGVzdGUgJXMiLHBhc3Q6IiVzIMOubiB1cm3EgyIsczoiY8OidGV2YSBzZWN1bmRlIixtOiJ1biBtaW51dCIsbW06ZSxoOiJvIG9yxIMiLGhoOmUsZDoibyB6aSIsZGQ6ZSxNOiJvIGx1bsSDIixNTTplLHk6InVuIGFuIix5eTplfSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQsZSl7dmFyIG49dC5zcGxpdCgiXyIpO3JldHVybiBlJTEwPT09MSYmZSUxMDAhPT0xMT9uWzBdOmUlMTA+PTImJmUlMTA8PTQmJihlJTEwMDwxMHx8ZSUxMDA+PTIwKT9uWzFdOm5bMl19ZnVuY3Rpb24gbih0LG4saSl7dmFyIHI9e21tOm4/ItC80LjQvdGD0YLQsF/QvNC40L3Rg9GC0Ytf0LzQuNC90YPRgiI6ItC80LjQvdGD0YLRg1/QvNC40L3Rg9GC0Ytf0LzQuNC90YPRgiIsaGg6ItGH0LDRgV/Rh9Cw0YHQsF/Rh9Cw0YHQvtCyIixkZDoi0LTQtdC90Yxf0LTQvdGPX9C00L3QtdC5IixNTToi0LzQtdGB0Y/Rhl/QvNC10YHRj9GG0LBf0LzQtdGB0Y/RhtC10LIiLHl5OiLQs9C+0LRf0LPQvtC00LBf0LvQtdGCIn07cmV0dXJuIm0iPT09aT9uPyLQvNC40L3Rg9GC0LAiOiLQvNC40L3Rg9GC0YMiOnQrIiAiK2UocltpXSwrdCl9dmFyIGk9Wy9e0Y/QvdCyL2ksLw==", "base64"));
  res.write(new Buffer("XtGE0LXQsi9pLC9e0LzQsNGAL2ksL17QsNC/0YAvaSwvXtC80LBb0Ll80Y9dL2ksL17QuNGO0L0vaSwvXtC40Y7Quy9pLC9e0LDQstCzL2ksL17RgdC10L0vaSwvXtC+0LrRgi9pLC9e0L3QvtGPL2ksL17QtNC10LovaV0scj10LmRlZmluZUxvY2FsZSgicnUiLHttb250aHM6e2Zvcm1hdDoi0Y/QvdCy0LDRgNGPX9GE0LXQstGA0LDQu9GPX9C80LDRgNGC0LBf0LDQv9GA0LXQu9GPX9C80LDRj1/QuNGO0L3Rj1/QuNGO0LvRj1/QsNCy0LPRg9GB0YLQsF/RgdC10L3RgtGP0LHRgNGPX9C+0LrRgtGP0LHRgNGPX9C90L7Rj9Cx0YDRj1/QtNC10LrQsNCx0YDRjyIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiLRj9C90LLQsNGA0Yxf0YTQtdCy0YDQsNC70Yxf0LzQsNGA0YJf0LDQv9GA0LXQu9GMX9C80LDQuV/QuNGO0L3RjF/QuNGO0LvRjF/QsNCy0LPRg9GB0YJf0YHQtdC90YLRj9Cx0YDRjF/QvtC60YLRj9Cx0YDRjF/QvdC+0Y/QsdGA0Yxf0LTQtdC60LDQsdGA0YwiLnNwbGl0KCJfIil9LG1vbnRoc1Nob3J0Ontmb3JtYXQ6ItGP0L3Qsl/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Y9f0LjRjtC90Y9f0LjRjtC70Y9f0LDQstCzX9GB0LXQvV/QvtC60YJf0L3QvtGPX9C00LXQuiIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiLRj9C90LJf0YTQtdCyX9C80LDRgNGCX9Cw0L/RgF/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCzX9GB0LXQvV/QvtC60YJf0L3QvtGPX9C00LXQuiIuc3BsaXQoIl8iKX0sd2Vla2RheXM6e3N0YW5kYWxvbmU6ItCy0L7RgdC60YDQtdGB0LXQvdGM0LVf0L/QvtC90LXQtNC10LvRjNC90LjQul/QstGC0L7RgNC90LjQul/RgdGA0LXQtNCwX9GH0LXRgtCy0LXRgNCzX9C/0Y/RgtC90LjRhtCwX9GB0YPQsdCx0L7RgtCwIi5zcGxpdCgiXyIpLGZvcm1hdDoi0LLQvtGB0LrRgNC10YHQtdC90YzQtV/Qv9C+0L3QtdC00LXQu9GM0L3QuNC6X9Cy0YLQvtGA0L3QuNC6X9GB0YDQtdC00YNf0YfQtdGC0LLQtdGA0LNf0L/Rj9GC0L3QuNGG0YNf0YHRg9Cx0LHQvtGC0YMiLnNwbGl0KCJfIiksaXNGb3JtYXQ6L1xbID9b0JLQsl0gPyg/OtC/0YDQvtGI0LvRg9GOfNGB0LvQtdC00YPRjtGJ0YPRjnzRjdGC0YMpPyA/XF0gP2RkZGQvfSx3ZWVrZGF5c1Nob3J0OiLQstGBX9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQstGBX9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlOmksbG9uZ01vbnRoc1BhcnNlOmksc2hvcnRNb250aHNQYXJzZTppLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSDQsy4iLExMTDoiRCBNTU1NIFlZWVkg0LMuLCBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkg0LMuLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0KHQtdCz0L7QtNC90Y8g0LJdIExUIixuZXh0RGF5OiJb0JfQsNCy0YLRgNCwINCyXSBMVCIsbGFzdERheToiW9CS0YfQtdGA0LAg0LJdIExUIixuZXh0V2VlazpmdW5jdGlvbih0KXtpZih0LndlZWsoKT09PXRoaXMud2VlaygpKXJldHVybiAyPT09dGhpcy5kYXkoKT8iW9CS0L5dIGRkZGQgW9CyXSBMVCI6IlvQkl0gZGRkZCBb0LJdIExUIjtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJb0JIg0YHQu9C10LTRg9GO0YnQtdC1XSBkZGRkIFvQsl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OnJldHVybiJb0JIg0YHQu9C10LTRg9GO0YnQuNC5XSBkZGRkIFvQsl0gTFQiO2Nhc2UgMzpjYXNlIDU6Y2FzZSA2OnJldHVybiJb0JIg0YHQu9C10LTRg9GO0YnRg9GOXSBkZGRkIFvQsl0gTFQifX0sbGFzdFdlZWs6ZnVuY3Rpb24odCl7aWYodC53ZWVrKCk9PT10aGlzLndlZWsoKSlyZXR1cm4gMj09PXRoaXMuZGF5KCk/IlvQktC+XSBkZGRkIFvQsl0gTFQiOiJb0JJdIGRkZGQgW9CyXSBMVCI7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW9CSINC/0YDQvtGI0LvQvtC1XSBkZGRkIFvQsl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OnJldHVybiJb0JIg0L/RgNC+0YjQu9GL0LldIGRkZGQgW9CyXSBMVCI7Y2FzZSAzOmNhc2UgNTpjYXNlIDY6cmV0dXJuIlvQkiDQv9GA0L7RiNC70YPRjl0gZGRkZCBb0LJdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItGH0LXRgNC10LcgJXMiLHBhc3Q6IiVzINC90LDQt9Cw0LQiLHM6ItC90LXRgdC60L7Qu9GM0LrQviDRgdC10LrRg9C90LQiLG06bixtbTpuLGg6ItGH0LDRgSIsaGg6bixkOiLQtNC10L3RjCIsZGQ6bixNOiLQvNC10YHRj9GGIixNTTpuLHk6ItCz0L7QtCIseXk6bn0sbWVyaWRpZW1QYXJzZTov0L3QvtGH0Lh80YPRgtGA0LB80LTQvdGPfNCy0LXRh9C10YDQsC9pLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuL14o0LTQvdGPfNCy0LXRh9C10YDQsCkkLy50ZXN0KHQpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i0L3QvtGH0LgiOnQ8MTI/ItGD0YLRgNCwIjp0PDE3PyLQtNC90Y8iOiLQstC10YfQtdGA0LAifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC5fNCz0L580Y8pLyxvcmRpbmFsOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UiTSI6Y2FzZSJkIjpjYXNlIkRERCI6cmV0dXJuIHQrIi3QuSI7Y2FzZSJEIjpyZXR1cm4gdCsiLdCz0L4iO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gdCsiLdGPIjtkZWZhdWx0OnJldHVybiB0fX0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoInNlIix7bW9udGhzOiJvxJHEkWFqYWdlbcOhbm51X2d1b3Z2YW3DoW5udV9uanVrxI1hbcOhbm51X2N1b8WLb23DoW5udV9taWVzc2Vtw6FubnVfZ2Vhc3NlbcOhbm51X3N1b2lkbmVtw6FubnVfYm9yZ2Vtw6FubnVfxI1ha8SNYW3DoW5udV9nb2xnZ290bcOhbm51X3Nrw6FibWFtw6FubnVfanVvdmxhbcOhbm51Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJvxJHEkWpfZ3Vvdl9uanVrX2N1b19taWVzX2dlYXNfc3VvaV9ib3JnX8SNYWvEjV9nb2xnX3Nrw6FiX2p1b3YiLnNwbGl0KCJfIiksd2Vla2RheXM6InNvdG5hYmVhaXZpX3Z1b3Nzw6FyZ2FfbWHFi8WLZWLDoXJnYV9nYXNrYXZhaGtrdV9kdW9yYXN0YXRfYmVhcmphZGF0X2zDoXZ2YXJkYXQiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic290bl92dW9zX21hxYtfZ2Fza19kdW9yX2JlYXJfbMOhdiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic192X21fZ19kX2JfTCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiTU1NTSBELiBbYi5dIFlZWVkiLExMTDoiTU1NTSBELiBbYi5dIFlZWVkgW3RpLl0gSEg6bW0iLExMTEw6ImRkZGQsIE1NTU0gRC4gW2IuXSBZWVlZIFt0aS5dIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltvdG5lIHRpXSBMVCIsbmV4dERheToiW2lodHRpbiB0aV0gTFQiLG5leHRXZWVrOiJkZGRkIFt0aV0gTFQiLGxhc3REYXk6Iltpa3RlIHRpXSBMVCIsbGFzdFdlZWs6IltvdmRkaXRdIGRkZGQgW3RpXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgZ2Vhxb5lcyIscGFzdDoibWHFi2l0ICVzIixzOiJtb2FkZGUgc2VrdW5kZGF0IixtOiJva3RhIG1pbnVodGEiLG1tOiIlZCBtaW51aHRhdCIsaDoib2t0YSBkaWltbXUiLGhoOiIlZCBkaWltbXV0IixkOiJva3RhIGJlYWl2aSIsZGQ6IiVkIGJlYWl2dml0IixNOiJva3RhIG3DoW5udSIsTU06IiVkIG3DoW51dCIseToib2t0YSBqYWhraSIseXk6IiVkIGphZ2l0In0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoInNpIix7bW9udGhzOiLgtqLgtrHgt4Dgt4/gtrvgt5Jf4La04LeZ4La24La74LeA4LeP4La74LeSX+C2uOC3j+C2u+C3iuC2reC3lF/gtoXgtrTgt4rigI3gtrvgt5rgtr3gt4pf4La44LeQ4La64LeSX+C2ouC3luC2seC3kl/gtqLgt5bgtr3gt5Jf4LaF4Lac4Led4LeD4LeK4Lat4LeUX+C3g+C3kOC2tOC3iuC2reC3kOC2uOC3iuC2tuC2u+C3il/gtpTgtprgt4rgtq3gt53gtrbgtrvgt4pf4Lax4Lec4LeA4LeQ4La44LeK4La24La74LeKX+C2r+C3meC3g+C3kOC2uOC3iuC2tuC2u+C3iiIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Lai4LaxX+C2tOC3meC2tl/gtrjgt4/gtrvgt4pf4LaF4La04LeKX+C2uOC3kOC2uuC3kl/gtqLgt5bgtrHgt5Jf4Lai4LeW4La94LeSX+C2heC2nOC3nV/gt4Pgt5DgtrTgt4pf4LaU4Laa4LeKX+C2seC3nOC3gOC3kF/gtq/gt5ngt4Pgt5AiLnNwbGl0KCJfIiksd2Vla2RheXM6IuC2ieC2u+C3kuC2r+C3j1/gt4PgtrPgt5Tgtq/gt49f4LaF4Laf4LeE4La74LeU4LeA4LeP4Lav4LePX+C2tuC2r+C3j+C2r+C3j1/gtrbgt4rigI3gtrvgt4Tgt4Pgt4rgtrTgtq3gt5LgtrHgt4rgtq/gt49f4LeD4LeS4Laa4LeU4La74LeP4Lav4LePX+C3g+C3meC2seC3g+C3lOC2u+C3j+C2r+C3jyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgtongtrvgt5Jf4LeD4Laz4LeUX+C2heC2n1/gtrbgtq/gt49f4La24LeK4oCN4La74LeEX+C3g+C3kuC2muC3lF/gt4Pgt5ngtrEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuC2iV/gt4Nf4LaFX+C2tl/gtrbgt4rigI3gtrtf4LeD4LeSX+C3g+C3mSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6ImEgaDptbSIsTFRTOiJhIGg6bW06c3MiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZIE1NTU0gRCIsTExMOiJZWVlZIE1NTU0gRCwgYSBoOm1tIixMTExMOiJZWVlZIE1NTU0gRCBb4LeA4LeQ4Lax4LeSXSBkZGRkLCBhIGg6bW06c3MifSxjYWxlbmRhcjp7c2FtZURheToiW+C2heC2r10gTFRb4LanXSIsbmV4dERheToiW+C3hOC3meC2p10gTFRb4LanXSIsbmV4dFdlZWs6ImRkZGQgTFRb4LanXSIsbGFzdERheToiW+C2iuC2uuC3ml0gTFRb4LanXSIsbGFzdFdlZWs6IlvgtrTgt4Pgt5Tgtpzgt5LgtrpdIGRkZGQgTFRb4LanXSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXPgtprgt5LgtrHgt4oiLHBhc3Q6IiVz4Laa4LanIOC2tOC3meC2uyIsczoi4Lat4Lat4LeK4La04La7IOC2muC3kuC3hOC3kuC2tOC2uiIsbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeU4LeAIixtbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeUICVkIixoOiLgtrTgt5DgtroiLGhoOiLgtrTgt5DgtrogJWQiLGQ6IuC2r+C3kuC2seC2uiIsZGQ6IuC2r+C3kuC2sSAlZCIsTToi4La44LeP4LeD4La6IixNTToi4La44LeP4LeDICVkIix5OiLgt4Dgt4PgtrsiLHl5OiLgt4Dgt4PgtrsgJWQifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0g4LeA4LeQ4Lax4LeSLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3JldHVybiB0KyIg4LeA4LeQ4Lax4LeSIn0sbWVyaWRpZW1QYXJzZTov4La04LeZ4La7IOC3gOC2u+C3lHzgtrTgt4Pgt4og4LeA4La74LeUfOC2tOC3mS7gt4B84La0LuC3gC4vLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuIuC2tC7gt4AuIj09PXR8fCLgtrTgt4Pgt4og4LeA4La74LeUIj09PXR9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD4xMT9uPyLgtrQu4LeALiI6IuC2tOC3g+C3iiDgt4Dgtrvgt5QiOm4/IuC2tOC3mS7gt4AuIjoi4La04LeZ4La7IOC3gOC2u+C3lCJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdD4xJiZ0PDV9ZnVuY3Rpb24gbih0LG4saSxyKXt2YXIgbz10KyIgIjtzd2l0Y2goaSl7Y2FzZSJzIjpyZXR1cm4gbnx8cj8icMOhciBzZWvDum5kIjoicMOhciBzZWt1bmRhbWkiO2Nhc2UibSI6cmV0dXJuIG4/Im1pbsO6dGEiOnI/Im1pbsO6dHUiOiJtaW7DunRvdSI7Y2FzZSJtbSI6cmV0dXJuIG58fHI/bysoZSh0KT8ibWluw7p0eSI6Im1pbsO6dCIpOm8rIm1pbsO6dGFtaSI7Y2FzZSJoIjpyZXR1cm4gbj8iaG9kaW5hIjpyPyJob2RpbnUiOiJob2Rpbm91IjtjYXNlImhoIjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJob2RpbnkiOiJob2TDrW4iKTpvKyJob2RpbmFtaSI7Y2FzZSJkIjpyZXR1cm4gbnx8cj8iZGXFiCI6ImTFiG9tIjtjYXNlImRkIjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJkbmkiOiJkbsOtIik6bysiZMWIYW1pIjtjYXNlIk0iOnJldHVybiBufHxyPyJtZXNpYWMiOiJtZXNpYWNvbSI7Y2FzZSJNTSI6cmV0dXJuIG58fHI/bysoZSh0KT8ibWVzaWFjZSI6Im1lc2lhY292Iik6bysibWVzaWFjbWkiO2Nhc2UieSI6cmV0dXJuIG58fHI/InJvayI6InJva29tIjtjYXNlInl5IjpyZXR1cm4gbnx8cj9vKyhlKHQpPyJyb2t5Ijoicm9rb3YiKTpvKyJyb2ttaSJ9fXZhciBpPSJqYW51w6FyX2ZlYnJ1w6FyX21hcmVjX2FwcsOtbF9tw6FqX2rDum5fasO6bF9hdWd1c3Rfc2VwdGVtYmVyX29rdMOzYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLHI9Imphbl9mZWJfbWFyX2Fwcl9tw6FqX2rDum5fasO6bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLG89dC5kZWZpbmVMb2NhbGUoInNrIix7bW9udGhzOmksbW9udGhzU2hvcnQ6cix3ZWVrZGF5czoibmVkZcS+YV9wb25kZWxva191dG9yb2tfc3RyZWRhX8WhdHZydG9rX3BpYXRva19zb2JvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVfcG9fdXRfc3RfxaF0X3BpX3NvIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zdF/FoXRfcGlfc28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RuZXMgb10gTFQiLG5leHREYXk6Ilt6YWp0cmEgb10gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3YgbmVkZcS+dSBvXSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW3ZdIGRkZGQgW29dIExUIjtjYXNlIDM6cmV0dXJuIlt2IHN0cmVkdSBvXSBMVCI7Y2FzZSA0OnJldHVybiJbdm8gxaF0dnJ0b2sgb10gTFQiO2Nhc2UgNTpyZXR1cm4iW3YgcGlhdG9rIG9dIExUIjtjYXNlIDY6cmV0dXJuIlt2IHNvYm90dSBvXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhIG9dIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlttaW51bMO6IG5lZGXEvnUgb10gTFQiO2Nhc2UgMTpjYXNlIDI6cmV0dXJuIlttaW51bMO9XSBkZGRkIFtvXSBMVCI7Y2FzZSAzOnJldHVybiJbbWludWzDuiBzdHJlZHUgb10gTFQiO2Nhc2UgNDpjYXNlIDU6cmV0dXJuIlttaW51bMO9XSBkZGRkIFtvXSBMVCI7Y2FzZSA2OnJldHVybiJbbWludWzDuiBzb2JvdHUgb10gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByZWQgJXMiLHM6bixtOm4sbW06bixoOm4saGg6bixkOm4sZGQ6bixNOm4sTU06bix5Om4seXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsbixpKXt2YXIgcj10KyIgIjtzd2l0Y2gobil7Y2FzZSJzIjpyZXR1cm4gZXx8aT8ibmVrYWogc2VrdW5kIjoibmVrYWogc2VrdW5kYW1pIjtjYXNlIm0iOnJldHVybiBlPyJlbmEgbWludXRhIjoiZW5vIG1pbnV0byI7Y2FzZSJtbSI6cmV0dXJuIHIrPTE9PT10P2U/Im1pbnV0YSI6Im1pbnV0byI6Mj09PXQ/ZXx8aT8ibWludXRpIjoibWludXRhbWEiOnQ8NT9lfHxpPyJtaW51dGUiOiJtaW51dGFtaSI6ZXx8aT8ibWludXQiOiJtaW51dGFtaSI7Y2FzZSJoIjpyZXR1cm4gZT8iZW5hIHVyYSI6ImVubyB1cm8iO2Nhc2UiaGgiOnJldHVybiByKz0xPT09dD9lPyJ1cmEiOiJ1cm8iOjI9PT10P2V8fGk/InVyaSI6InVyYW1hIjp0PDU/ZXx8aT8idXJlIjoidXJhbWkiOmV8fGk/InVyIjoidXJhbWkiO2Nhc2UiZCI6cmV0dXJuIGV8fGk/ImVuIGRhbiI6ImVuaW0gZG5lbSI7Y2FzZSJkZCI6cmV0dXJuIHIrPTE9PT10P2V8fGk/ImRhbiI6ImRuZW0iOjI9PT10P2V8fGk/ImRuaSI6ImRuZXZvbWEiOmV8fGk/ImRuaSI6ImRuZXZpIjtjYXNlIk0iOnJldHVybiBlfHxpPyJlbiBtZXNlYyI6ImVuaW0gbWVzZWNlbSI7Y2FzZSJNTSI6cmV0dXJuIHIrPTE9PT10P2V8fGk/Im1lc2VjIjoibWVzZWNlbSI6Mj09PXQ/ZXx8aT8ibWVzZWNhIjoibWVzZWNlbWEiOnQ8NT9lfHxpPyJtZXNlY2UiOiJtZXNlY2kiOmV8fGk/Im1lc2VjZXYiOiJtZXNlY2kiO2Nhc2UieSI6cmV0dXJuIGV8fGk/ImVubyBsZXRvIjoiZW5pbSBsZXRvbSI7Y2FzZSJ5eSI6cmV0dXJuIHIrPTE9PT10P2V8fGk/ImxldG8iOiJsZXRvbSI6Mj09PXQ/ZXx8aT8ibGV0aSI6ImxldG9tYSI6dDw1P2V8fGk/ImxldGEiOiJsZXRpIjplfHxpPyJsZXQiOiJsZXRpIn19dmFyIG49dC5kZWZpbmVMb2NhbGUoInNsIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJlY19hcHJpbF9tYWpfanVuaWpfanVsaWpfYXZndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyLl9hcHIuX21hai5fanVuLl9qdWwuX2F2Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoibmVkZWxqYV9wb25lZGVsamVrX3RvcmVrX3NyZWRhX8SNZXRydGVrX3BldGVrX3NvYm90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZWQuX3Bvbi5fdG9yLl9zcmUuX8SNZXQuX3BldC5fc29iLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fdG9fc3JfxI1lX3BlX3NvIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC4gTU0uIFlZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5lcyBvYl0gTFQiLG5leHREYXk6IltqdXRyaSBvYl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ZdIFtuZWRlbGpvXSBbb2JdIExUIjtjYXNlIDM6cmV0dXJuIlt2XSBbc3JlZG9dIFtvYl0gTFQiO2Nhc2UgNjpyZXR1cm4iW3ZdIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ZdIGRkZGQgW29iXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhaiBvYl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ByZWrFoW5qb10gW25lZGVsam9dIFtvYl0gTFQiO2Nhc2UgMzpyZXR1cm4iW3ByZWrFoW5qb10gW3NyZWRvXSBbb2JdIExUIjtjYXNlIDY6cmV0dXJuIltwcmVqxaFuam9dIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ByZWrFoW5qaV0gZGRkZCBbb2JdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IsSNZXogJXMiLHBhc3Q6InByZWQgJXMiLHM6ZSxtOmUsbW06ZSxoOmUsaGg6ZSxkOmUsZGQ6ZSxNOmUsTU06ZSx5OmUseXk6ZX0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoInNxIix7bW9udGhzOiJKYW5hcl9TaGt1cnRfTWFyc19QcmlsbF9NYWpfUWVyc2hvcl9Lb3JyaWtfR3VzaHRfU2h0YXRvcl9UZXRvcl9Ow6tudG9yX0RoamV0b3IiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9TaGtfTWFyX1ByaV9NYWpfUWVyX0tvcl9HdXNfU2h0X1RldF9Ow6tuX0RoaiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRSBEaWVsX0UgSMOrbsOrX0UgTWFydMOrX0UgTcOrcmt1csOrX0UgRW5qdGVfRSBQcmVtdGVfRSBTaHR1bsOrIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkRpZV9Iw6tuX01hcl9Nw6tyX0Vual9QcmVfU2h0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEX0hfTWFfTcOrX0VfUF9TaCIuc3BsaXQoIl8iKSxtZXJpZGllbVBhcnNlOi9QRHxNRC8saXNQTTpmdW5jdGlvbih0KXtyZXR1cm4iTSI9PT10LmNoYXJBdCgwKX0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDEyPyJQRCI6Ik1EIn0sbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbU290IG7Dq10gTFQiLG5leHREYXk6IltOZXPDq3IgbsOrXSBMVCIsbmV4dFdlZWs6ImRkZGQgW27Dq10gTFQiLGxhc3REYXk6IltEamUgbsOrXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Uga2FsdWFyIG7Dq10gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im7DqyAlcyIscGFzdDoiJXMgbcOrIHBhcsOrIixzOiJkaXNhIHNla29uZGEiLG06Im5qw6sgbWludXTDqyIsbW06IiVkIG1pbnV0YSIsaDoibmrDqyBvcsOrIixoaDoiJWQgb3LDqyIsZDoibmrDqyBkaXTDqyIsZGQ6IiVkIGRpdMOrIixNOiJuasOrIG11YWoiLE1NOiIlZCBtdWFqIix5OiJuasOrIHZpdCIseXk6IiVkIHZpdGUifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT17d29yZHM6e206WyJqZWRhbiBtaW51dCIsImplZG5lIG1pbnV0ZSJdLG1tOlsibWludXQiLCJtaW51dGUiLCJtaW51dGEiXSxoOlsiamVkYW4gc2F0IiwiamVkbm9nIHNhdGEiXSxoaDpbInNhdCIsInNhdGEiLCJzYXRpIl0sZGQ6WyJkYW4iLCJkYW5hIiwiZGFuYSJdLE1NOlsibWVzZWMiLCJtZXNlY2EiLCJtZXNlY2kiXSx5eTpbImdvZGluYSIsImdvZGluZSIsImdvZGluYSJdfSxjb3JyZWN0R3JhbW1hdGljYWxDYXNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDE9PT10P2VbMF06dD49MiYmdDw9ND9lWzFdOmVbMl19LHRyYW5zbGF0ZTpmdW5jdGlvbih0LG4saSl7dmFyIHI9ZS53b3Jkc1tpXTtyZXR1cm4gMT09PWkubGVuZ3RoP24/clswXTpyWzFdOnQrIiAiK2UuY29ycmVjdEdyYW1tYXRpY2FsQ2FzZSh0LHIpfX0sbj10LmRlZmluZUxvY2FsZSgic3IiLHttb250aHM6WyJqYW51YXIiLCJmZWJydWFyIiwibWFydCIsImFwcmlsIiwibWFqIiwianVuIiwianVsIiwiYXZndXN0Iiwic2VwdGVtYmFyIiwib2t0b2JhciIsIm5vdmVtYmFyIiwiZGVjZW1iYXIiXSxtb250aHNTaG9ydDpbImphbi4iLCJmZWIuIiwibWFyLiIsImFwci4iLCJtYWoiLCJqdW4iLCJqdWwiLCJhdmcuIiwic2VwLiIsIm9rdC4iLCJub3YuIiwiZGVjLiJdLHdlZWtkYXlzOlsibmVkZWxqYSIsInBvbmVkZWxqYWsiLCJ1dG9yYWsiLCJzcmVkYSIsIsSNZXR2cnRhayIsInBldGFrIiwic3Vib3RhIl0sd2Vla2RheXNTaG9ydDpbIm5lZC4iLCJwb24uIiwidXRvLiIsInNyZS4iLCLEjWV0LiIsInBldC4iLCJzdWIuIl0sd2Vla2RheXNNaW46WyJuZSIsInBvIiwidXQiLCJzciIsIsSNZSIsInBlIiwic3UiXSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGVsanVdIFt1XSBMVCI7Y2FzZSAzOnJldHVybiJbdV0gW3NyZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lIHVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3ZhciB0PVsiW3Byb8WhbGVdIFtuZWRlbGplXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFtwb25lZGVsamthXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFt1dG9ya2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3JlZGVdIFt1XSBMVCIsIltwcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbcGV0a2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiXTtyZXR1cm4gdFt0aGlzLmRheSgpXX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByZSAlcyIsczoibmVrb2xpa28gc2VrdW5kaSIsbTplLnRyYW5zbGF0ZSxtbTplLnRyYW5zbGF0ZSxoOmUudHJhbnNsYXRlLGhoOmUudHJhbnNsYXRlLGQ6ImRhbiIsZGQ6ZS50cmFuc2xhdGUsTToibWVzZWMiLE1NOmUudHJhbnNsYXRlLHk6ImdvZGludSIseXk6ZS50cmFuc2xhdGV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXt3b3Jkczp7bTpbItGY0LXQtNCw0L0g0LzQuNC90YPRgiIsItGY0LXQtNC90LUg0LzQuNC90YPRgtC1Il0sbW06WyLQvNC40L3Rg9GCIiwi0LzQuNC90YPRgtC1Iiwi0LzQuNC90YPRgtCwIl0saDpbItGY0LXQtNCw0L0g0YHQsNGCIiwi0ZjQtdC00L3QvtCzINGB0LDRgtCwIl0saGg6WyLRgdCw0YIiLCLRgdCw0YLQsCIsItGB0LDRgtC4Il0sZGQ6WyLQtNCw0L0iLCLQtNCw0L3QsCIsItC00LDQvdCwIl0sTU06WyLQvNC10YHQtdGGIiwi0LzQtdGB0LXRhtCwIiwi0LzQtdGB0LXRhtC4Il0seXk6WyLQs9C+0LTQuNC90LAiLCLQs9C+0LTQuNC90LUiLCLQs9C+0LTQuNC90LAiXX0sY29ycmVjdEdyYW1tYXRpY2FsQ2FzZTpmdW5jdGlvbih0LGUpe3JldHVybiAxPT09dD9lWzBdOnQ+PTImJnQ8PTQ/ZVsxXTplWzJdfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxuLGkpe3ZhciByPWUud29yZHNbaV07cmV0dXJuIDE9PT1pLmxlbmd0aD9uP3JbMF06clsxXTp0KyIgIitlLmNvcnJlY3RHcmFtbWF0aWNhbENhc2UodCxyKX19LG49dC5kZWZpbmVMb2NhbGUoInNyLWN5cmwiLHttb250aHM6WyLRmNCw0L3Rg9Cw0YAiLCLRhNC10LHRgNGD0LDRgCIsItC80LDRgNGCIiwi0LDQv9GA0LjQuyIsItC80LDRmCIsItGY0YPQvSIsItGY0YPQuyIsItCw0LLQs9GD0YHRgiIsItGB0LXQv9GC0LXQvNCx0LDRgCIsItC+0LrRgtC+0LHQsNGAIiwi0L3QvtCy0LXQvNCx0LDRgCIsItC00LXRhtC10LzQsdCw0YAiXSxtb250aHNTaG9ydDpbItGY0LDQvS4iLCLRhNC10LEuIiwi0LzQsNGALiIsItCw0L/RgC4iLCLQvNCw0ZgiLCLRmNGD0L0iLCLRmNGD0LsiLCLQsNCy0LMuIiwi0YHQtdC/LiIsItC+0LrRgi4iLCLQvdC+0LIuIiwi0LTQtdGGLiJdLHdlZWtkYXlzOlsi0L3QtdC00LXRmdCwIiwi0L/QvtC90LXQtNC10ZnQsNC6Iiwi0YPRgtC+0YDQsNC6Iiwi0YHRgNC10LTQsCIsItGH0LXRgtCy0YDRgtCw0LoiLCLQv9C10YLQsNC6Iiwi0YHRg9Cx0L7RgtCwIl0sd2Vla2RheXNTaG9ydDpbItC90LXQtC4iLCLQv9C+0L0uIiwi0YPRgtC+LiIsItGB0YDQtS4iLCLRh9C10YIuIiwi0L/QtdGCLiIsItGB0YPQsS4iXSx3ZWVrZGF5c01pbjpbItC90LUiLCLQv9C+Iiwi0YPRgiIsItGB0YAiLCLRh9C1Iiwi0L/QtSIsItGB0YMiXSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0LTQsNC90LDRgSDRg10gTFQiLG5leHREYXk6IlvRgdGD0YLRgNCwINGDXSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJb0YNdIFvQvdC10LTQtdGZ0YNdIFvRg10gTFQiO2Nhc2UgMzpyZXR1cm4iW9GDXSBb0YHRgNC10LTRg10gW9GDXSBMVCI7Y2FzZSA2OnJldHVybiJb0YNdIFvRgdGD0LHQvtGC0YNdIFvRg10gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9GDXSBkZGRkIFvRg10gTFQifX0sbGFzdERheToiW9GY0YPRh9C1INGDXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXt2YXIgdD1bIlvQv9GA0L7RiNC70LVdIFvQvdC10LTQtdGZ0LVdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C+0L3QtdC00LXRmdC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvRg9GC0L7RgNC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C1XSBb0YHRgNC10LTQtV0gW9GDXSBMVCIsIlvQv9GA0L7RiNC70L7Qs10gW9GH0LXRgtCy0YDRgtC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C10YLQutCwXSBb0YNdIExUIiwiW9C/0YDQvtGI0LvQtV0gW9GB0YPQsdC+0YLQtV0gW9GDXSBMVCJdO3JldHVybiB0W3RoaXMuZGF5KCldfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQt9CwICVzIixwYXN0OiLQv9GA0LUgJXMiLHM6ItC90LXQutC+0LvQuNC60L4g0YHQtdC60YPQvdC00LgiLG06ZS50cmFuc2xhdGUsbW06ZS50cmFuc2xhdGUsaDplLnRyYW5zbGF0ZSxoaDplLnRyYW5zbGF0ZSxkOiLQtNCw0L0iLGRkOmUudHJhbnNsYXRlLE06ItC80LXRgdC10YYiLE1NOmUudHJhbnNsYXRlLHk6ItCz0L7QtNC40L3RgyIseXk6ZS50cmFuc2xhdGV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJzdiIse21vbnRoczoiamFudWFyaV9mZWJydWFyaV9tYXJzX2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0aV9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6InPDtm5kYWdfbcOlbmRhZ190aXNkYWdfb25zZGFnX3RvcnNkYWdfZnJlZGFnX2zDtnJkYWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic8O2bl9tw6VuX3Rpc19vbnNfdG9yX2ZyZV9sw7ZyIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzw7ZfbcOlX3RpX29uX3RvX2ZyX2zDtiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJZWVlZLU1NLUREIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0lkYWddIExUIixuZXh0RGF5OiJbSW1vcmdvbl0gTFQiLGxhc3REYXk6IltJZ8Olcl0gTFQiLG5leHRXZWVrOiJbUMOlXSBkZGRkIExUIixsYXN0V2VlazoiW0ldIGRkZGRbc10gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9tICVzIixwYXN0OiJmw7ZyICVzIHNlZGFuIixzOiJuw6VncmEgc2VrdW5kZXIiLG06ImVuIG1pbnV0IixtbToiJWQgbWludXRlciIsaDoiZW4gdGltbWUiLGhoOiIlZCB0aW1tYXIiLGQ6ImVuIGRhZyIsZGQ6IiVkIGRhZ2FyIixNOiJlbiBtw6VuYWQiLE1NOiIlZCBtw6VuYWRlciIseToiZXR0IMOlciIseXk6IiVkIMOlciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShlfGEpLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBlPXQlMTAsbj0xPT09fn4odCUxMDAvMTApPyJlIjoxPT09ZT8iYSI6Mj09PWU/ImEiOiJlIjtyZXR1cm4gdCtufSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgic3ciLHttb250aHM6IkphbnVhcmlfRmVicnVhcmlfTWFjaGlfQXByaWxpX01laV9KdW5pX0p1bGFpX0Fnb3N0aV9TZXB0ZW1iYV9Pa3RvYmFfTm92ZW1iYV9EZXNlbWJhIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hY19BcHJfTWVpX0p1bl9KdWxfQWdvX1NlcF9Pa3RfTm92X0RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiSnVtYXBpbGlfSnVtYXRhdHVfSnVtYW5uZV9KdW1hdGFub19BbGhhbWlzaV9JanVtYWFfSnVtYW1vc2kiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiSnBsX0p0YXRfSm5uZV9KdGFuX0FsaF9Jam1fSm1vcyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiSjJfSjNfSjRfSjVfQWxfSWpfSjEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbbGVvIHNhYV0gTFQiLG5leHREYXk6IltrZXNobyBzYWFdIExUIixuZXh0V2VlazoiW3dpa2kgaWpheW9dIGRkZGQgW3NhYXRdIExUIixsYXN0RGF5OiJbamFuYV0gTFQiLGxhc3RXZWVrOiJbd2lraSBpbGl5b3BpdGFdIGRkZGQgW3NhYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBiYWFkYXllIixwYXN0OiJ0b2tlYSAlcyIsczoiaGl2aSBwdW5kZSIsbToiZGFraWthIG1vamEiLG1tOiJkYWtpa2EgJWQiLGg6InNhYSBsaW1vamEiLGhoOiJtYXNhYSAlZCIsZDoic2lrdSBtb2phIixkZDoibWFzaWt1ICVkIixNOiJtd2V6aSBtbW9qYSIsTU06Im1pZXppICVkIix5OiJtd2FrYSBtbW9qYSIseXk6Im1pYWthICVkIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6IuCvpyIsMjoi4K+oIiwzOiLgr6kiLDQ6IuCvqiIsNToi4K+rIiw2OiLgr6wiLDc6IuCvrSIsODoi4K+uIiw5OiLgr68iLDA6IuCvpiJ9LG49eyLgr6ciOiIxIiwi4K+oIjoiMiIsIuCvqSI6IjMiLCLgr6oiOiI0Iiwi4K+rIjoiNSIsIuCvrCI6IjYiLCLgr60iOiI3Iiwi4K+uIjoiOCIsIuCvryI6IjkiLCLgr6YiOiIwIn0saT10LmRlZmluZUxvY2FsZSgidGEiLHttb250aHM6IuCunOCuqeCuteCusOCuv1/grqrgrr/grqrgr43grrDgrrXgrrDgrr9f4K6u4K6+4K6w4K+N4K6a4K+NX+Cuj+CuquCvjeCusOCusuCvjV/grq7gr4df4K6c4K+C4K6p4K+NX+CunOCvguCusuCviF/grobgrpXgrrjgr43grp/gr41f4K6a4K+G4K6q4K+N4K6f4K+G4K6u4K+N4K6q4K6w4K+NX+CuheCuleCvjeCun+Cvh+CuvuCuquCusOCvjV/grqjgrrXgrq7gr43grqrgrrDgr41f4K6f4K6/4K6a4K6u4K+N4K6q4K6w4K+NIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgrpzgrqngrrXgrrDgrr9f4K6q4K6/4K6q4K+N4K6w4K614K6w4K6/X+CuruCuvuCusOCvjeCumuCvjV/gro/grqrgr43grrDgrrLgr41f4K6u4K+HX+CunOCvguCuqeCvjV/grpzgr4LgrrLgr4hf4K6G4K6V4K644K+N4K6f4K+NX+CumuCvhuCuquCvjeCun+CvhuCuruCvjeCuquCusOCvjV/groXgrpXgr43grp/gr4fgrr7grqrgrrDgr41f4K6o4K614K6u4K+N4K6q4K6w4K+NX+Cun+Cuv+CumuCuruCvjeCuquCusOCvjSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4K6e4K6+4K6v4K6/4K6x4K+N4K6x4K+B4K6V4K+N4K6V4K6/4K604K6u4K+IX+CupOCuv+CumeCvjeCuleCun+CvjeCuleCuv+CutOCuruCviF/grprgr4bgrrXgr43grrXgrr7grq/gr43grpXgrr/grrTgrq7gr4hf4K6q4K+B4K6k4K6p4K+N4K6V4K6/4K604K6u4K+IX+CuteCuv+Cur+CuvuCutOCuleCvjeCuleCuv+CutOCuruCviF/grrXgr4bgrrPgr43grrPgrr/grpXgr43grpXgrr/grrTgrq7gr4hf4K6a4K6p4K6/4K6V4K+N4K6V4K6/4K604K6u4K+IIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCunuCuvuCur+Cuv+CuseCvgV/grqTgrr/grpngr43grpXgrrPgr41f4K6a4K+G4K614K+N4K614K6+4K6v4K+NX+CuquCvgeCupOCuqeCvjV/grrXgrr/grq/grr7grrTgrqngr41f4K614K+G4K6z4K+N4K6z4K6/X+CumuCuqeCuvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4K6e4K6+X+CupOCuv1/grprgr4Zf4K6q4K+BX+CuteCuv1/grrXgr4Zf4K6aIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4K6H4K6p4K+N4K6x4K+BXSBMVCIsbmV4dERheToiW+CuqOCuvuCus+CviF0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+CuqOCvh+CuseCvjeCuseCvgV0gTFQiLGxhc3RXZWVrOiJb4K6V4K6f4K6o4K+N4K6kIOCuteCuvuCusOCuruCvjV0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCuh+CusuCvjSIscGFzdDoiJXMg4K6u4K+B4K6p4K+NIixzOiLgrpLgrrDgr4Eg4K6a4K6/4K6yIOCuteCuv+CuqOCuvuCun+Cuv+CuleCus+CvjSIsbToi4K6S4K6w4K+BIOCuqOCuv+CuruCuv+Cun+CuruCvjSIsbW06IiVkIOCuqOCuv+CuruCuv+Cun+CumeCvjeCuleCus+CvjSIsaDoi4K6S4K6w4K+BIOCuruCuo+CuvyDgrqjgr4fgrrDgrq7gr40iLGhoOiIlZCDgrq7grqPgrr8g4K6o4K+H4K6w4K6u4K+NIixkOiLgrpLgrrDgr4Eg4K6o4K6+4K6z4K+NIixkZDoiJWQg4K6o4K6+4K6f4K+N4K6V4K6z4K+NIixNOiLgrpLgrrDgr4Eg4K6u4K6+4K6k4K6u4K+NIixNTToiJWQg4K6u4K6+4K6k4K6Z4K+N4K6V4K6z4K+NIix5OiLgrpLgrrDgr4Eg4K614K6w4K+B4K6f4K6u4K+NIix5eToiJWQg4K6G4K6j4K+N4K6f4K+B4K6V4K6z4K+NIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ94K614K6k4K+BLyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3JldHVybiB0KyLgrrXgrqTgr4EifSxwcmVwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9b4K+n4K+o4K+p4K+q4K+r4K+s4K+t4K+u4K+v4K+mXS9nLGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXGQvZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSxtZXJpZGllbVBhcnNlOi/grq/grr7grq7grq7gr4184K614K+I4K6V4K6x4K+IfOCuleCuvuCusuCviHzgrqjgrqPgr43grqrgrpXgrrLgr4184K6O4K6x4K+N4K6q4K6+4K6f4K+BfOCuruCuvuCusuCviC8sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDI/IiDgrq/grr7grq7grq7gr40iOnQ8Nj8iIOCuteCviOCuleCuseCviCI6dDwxMD8iIOCuleCuvuCusuCviCI6dDwxND8iIOCuqOCuo+CvjeCuquCuleCusuCvjSI6dDwxOD8iIOCujuCuseCvjeCuquCuvuCun+CvgSI6dDwyMj8iIOCuruCuvuCusuCviCI6IiDgrq/grr7grq7grq7gr40ifSxtZXJpZGllbUhvdXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMTI9PT10JiYodD0wKSwi4K6v4K6+4K6u4K6u4K+NIj09PWU/dDwyP3Q6dCsxMjoi4K614K+I4K6V4K6x4K+IIj09PWV8fCLgrpXgrr7grrLgr4giPT09ZT90OiLgrqjgrqPgr43grqrgrpXgrrLgr40iPT09ZSYmdD49MTA/dDp0KzEyfSx3ZWVrOntkb3c6MCxkb3k6Nn19KTtyZXR1cm4gaX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgidGUiLHttb250aHM6IuCwnOCwqOCwteCwsOCwv1/gsKvgsL/gsKzgsY3gsLDgsLXgsLDgsL9f4LCu4LC+4LCw4LGN4LCa4LC/X+Cwj+CwquCxjeCwsOCwv+CwsuCxjV/gsK7gsYdf4LCc4LGC4LCo4LGNX+CwnOCxguCwsuCxhuCxll/gsIbgsJfgsLjgsY3gsJ/gsYFf4LC44LGG4LCq4LGN4LCf4LGG4LCC4LCs4LCw4LGNX+CwheCwleCxjeCwn+Cxi+CwrOCwsOCxjV/gsKjgsLXgsILgsKzgsLDgsY1f4LCh4LC/4LC44LGG4LCC4LCs4LCw4LGNIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgsJzgsKguX+Cwq+Cwv+CwrOCxjeCwsC5f4LCu4LC+4LCw4LGN4LCa4LC/X+Cwj+CwquCxjeCwsOCwvy5f4LCu4LGHX+CwnOCxguCwqOCxjV/gsJzgsYLgsLLgsYbgsZZf4LCG4LCXLl/gsLjgsYbgsKrgsY0uX+CwheCwleCxjeCwn+Cxiy5f4LCo4LC1Ll/gsKHgsL/gsLjgsYYuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLgsIbgsKbgsL/gsLXgsL7gsLDgsIJf4LC44LGL4LCu4LC14LC+4LCw4LCCX+CwruCwguCwl+Cws+CwteCwvuCwsOCwgl/gsKzgsYHgsKfgsLXgsL7gsLDgsIJf4LCX4LGB4LCw4LGB4LC14LC+4LCw4LCCX+CwtuCxgeCwleCxjeCwsOCwteCwvuCwsOCwgl/gsLbgsKjgsL/gsLXgsL7gsLDgsIIiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4LCG4LCm4LC/X+CwuOCxi+Cwrl/gsK7gsILgsJfgsLNf4LCs4LGB4LCnX+Cwl+CxgeCwsOCxgV/gsLbgsYHgsJXgsY3gsLBf4LC24LCo4LC/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgsIZf4LC44LGLX+CwruCwgl/gsKzgsYFf4LCX4LGBX+CwtuCxgV/gsLYiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0iLExUUzoiQSBoOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4LCo4LGH4LCh4LGBXSBMVCIsbmV4dERheToiW+CwsOCxh+CwquCxgV0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+CwqOCwv+CwqOCxjeCwqF0gTFQiLGxhc3RXZWVrOiJb4LCX4LCkXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4LCy4LGLIixwYXN0OiIlcyDgsJXgsY3gsLDgsL/gsKTgsIIiLHM6IuCwleCxiuCwqOCxjeCwqOCwvyDgsJXgsY3gsLfgsKPgsL7gsLLgsYEiLG06IuCwkuCwlSDgsKjgsL/gsK7gsL/gsLfgsIIiLG1tOiIlZCDgsKjgsL/gsK7gsL/gsLfgsL7gsLLgsYEiLGg6IuCwkuCwlSDgsJfgsILgsJ8iLGhoOiIlZCDgsJfgsILgsJ/gsLLgsYEiLGQ6IuCwkuCwlSDgsLDgsYvgsJzgsYEiLGRkOiIlZCDgsLDgsYvgsJzgsYHgsLLgsYEiLE06IuCwkuCwlSDgsKjgsYbgsLIiLE1NOiIlZCDgsKjgsYbgsLLgsLLgsYEiLHk6IuCwkuCwlSDgsLjgsILgsLXgsKTgsY3gsLjgsLDgsIIiLHl5OiIlZCDgsLjgsILgsLXgsKTgsY3gsLjgsLDgsL7gsLLgsYEifSxvcmRpbmFsUGFyc2U6L1xkezEsMn3gsLUvLG9yZGluYWw6IiVk4LC1IixtZXJpZGllbVBhcnNlOi/gsLDgsL7gsKTgsY3gsLDgsL984LCJ4LCm4LCv4LCCfOCwruCwp+CxjeCwr+CwvuCwueCxjeCwqOCwgnzgsLjgsL7gsK/gsILgsKTgsY3gsLDgsIIvLG1lcmlkaWVtSG91cjpmdW5jdGlvbih0LGUpe3JldHVybiAxMj09PXQmJih0PTApLCLgsLDgsL7gsKTgsY3gsLDgsL8iPT09ZT90PDQ/dDp0KzEyOiLgsIngsKbgsK/gsIIiPT09ZT90OiLgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIIiPT09ZT90Pj0xMD90OnQrMTI6IuCwuOCwvuCwr+CwguCwpOCxjeCwsOCwgiI9PT1lP3QrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i4LCw4LC+4LCk4LGN4LCw4LC/Ijp0PDEwPyLgsIngsKbgsK/gsIIiOnQ8MTc/IuCwruCwp+CxjeCwr+CwvuCwueCxjeCwqOCwgiI6dDwyMD8i4LC44LC+4LCv4LCC4LCk4LGN4LCw4LCCIjoi4LCw4LC+4LCk4LGN4LCw4LC/In0sd2Vlazp7ZG93OjAsZG95OjZ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoInRoIix7bW9udGhzOiLguKHguIHguKPguLLguITguKFf4LiB4Li44Lih4Lig4Liy4Lie4Lix4LiZ4LiY4LmMX+C4oeC4teC4meC4suC4hOC4oV/guYDguKHguKnguLLguKLguJlf4Lie4Lik4Lip4Lig4Liy4LiE4LihX+C4oeC4tOC4luC4uOC4meC4suC4ouC4mV/guIHguKPguIHguI7guLLguITguKFf4Liq4Li04LiH4Lir4Liy4LiE4LihX+C4geC4seC4meC4ouC4suC4ouC4mV/guJXguLjguKXguLLguITguKFf4Lie4Lik4Lio4LiI4Li04LiB4Liy4Lii4LiZX+C4mOC4seC4meC4p+C4suC4hOC4oSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Lih4LiB4Lij4LiyX+C4geC4uOC4oeC4oOC4sl/guKHguLXguJnguLJf4LmA4Lih4Lip4LiyX+C4nuC4pOC4qeC4oOC4sl/guKHguLTguJbguLjguJnguLJf4LiB4Lij4LiB4LiO4LiyX+C4quC4tOC4h+C4q+C4sl/guIHguLHguJnguKLguLJf4LiV4Li44Lil4LiyX+C4nuC4pOC4qOC4iOC4tOC4geC4sl/guJjguLHguJnguKfguLIiLnNwbGl0KCJfIiksd2Vla2RheXM6IuC4reC4suC4l+C4tOC4leC4ouC5jF/guIjguLHguJnguJfguKPguYxf4Lit4Lix4LiH4LiE4Liy4LijX+C4nuC4uOC4mF/guJ7guKTguKvguLHguKrguJrguJTguLVf4Lio4Li44LiB4Lij4LmMX+C5gOC4quC4suC4o+C5jCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLguK3guLLguJfguLTguJXguKLguYxf4LiI4Lix4LiZ4LiX4Lij4LmMX+C4reC4seC4h+C4hOC4suC4o1/guJ7guLjguJhf4Lie4Lik4Lir4Lix4LiqX+C4qOC4uOC4geC4o+C5jF/guYDguKrguLLguKPguYwiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuC4reC4si5f4LiILl/guK0uX+C4ni5f4Lie4LikLl/guKguX+C4qi4iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIIOC4meC4suC4rOC4tOC4geC4siBtIOC4meC4suC4l+C4tSIsTFRTOiJIIOC4meC4suC4rOC4tOC4geC4siBtIOC4meC4suC4l+C4tSBzIOC4p+C4tOC4meC4suC4l+C4tSIsTDoiWVlZWS9NTS9ERCIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIOC5gOC4p+C4peC4siBIIOC4meC4suC4rOC4tOC4geC4siBtIOC4meC4suC4l+C4tSIsTExMTDoi4Lin4Lix4LiZZGRkZOC4l+C4teC5iCBEIE1NTU0gWVlZWSDguYDguKfguKXguLIgSCDguJnguLLguKzguLTguIHguLIgbSDguJnguLLguJfguLUifSxtZXJpZGllbVBhcnNlOi/guIHguYjguK3guJnguYDguJfguLXguYjguKLguId84Lir4Lil4Lix4LiH4LmA4LiX4Li14LmI4Lii4LiHLyxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybiLguKvguKXguLHguIfguYDguJfguLXguYjguKLguIciPT09dH0sbWVyaWRpZW06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PDEyPyLguIHguYjguK3guJnguYDguJfguLXguYjguKLguIciOiLguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcifSxjYWxlbmRhcjp7c2FtZURheToiW+C4p+C4seC4meC4meC4teC5iSDguYDguKfguKXguLJdIExUIixuZXh0RGF5OiJb4Lie4Lij4Li44LmI4LiH4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQiLG5leHRXZWVrOiJkZGRkW+C4q+C4meC5ieC4siDguYDguKfguKXguLJdIExUIixsYXN0RGF5OiJb4LmA4Lih4Li34LmI4Lit4Lin4Liy4LiZ4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQiLGxhc3RXZWVrOiJb4Lin4Lix4LiZXWRkZGRb4LiX4Li14LmI4LmB4Lil4LmJ4LinIOC5gOC4p+C4peC4sl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuC4reC4teC4gSAlcyIscGFzdDoiJXPguJfguLXguYjguYHguKXguYnguKciLHM6IuC5hOC4oeC5iOC4geC4teC5iOC4p+C4tOC4meC4suC4l+C4tSIsbToiMSDguJnguLLguJfguLUiLG1tOiIlZCDguJnguLLguJfguLUiLGg6IjEg4LiK4Lix4LmI4Lin4LmC4Lih4LiHIixoaDoiJWQg4LiK4Lix4LmI4Lin4LmC4Lih4LiHIixkOiIxIOC4p+C4seC4mSIsZGQ6IiVkIOC4p+C4seC4mSIsTToiMSDguYDguJTguLfguK3guJkiLE1NOiIlZCDguYDguJTguLfguK3guJkiLHk6IjEg4Lib4Li1Iix5eToiJWQg4Lib4Li1In19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgidGwtcGgiLHttb250aHM6IkVuZXJvX1BlYnJlcm9fTWFyc29fQWJyaWxfTWF5b19IdW55b19IdWx5b19BZ29zdG9fU2V0eWVtYnJlX09rdHVicmVfTm9ieWVtYnJlX0Rpc3llbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiRW5lX1BlYl9NYXJfQWJyX01heV9IdW5fSHVsX0Fnb19TZXRfT2t0X05vYl9EaXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ikxpbmdnb19MdW5lc19NYXJ0ZXNfTWl5ZXJrdWxlc19IdXdlYmVzX0JpeWVybmVzX1NhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJMaW5fTHVuX01hcl9NaXlfSHV3X0JpeV9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkxpX0x1X01hX01pX0h1X0JpX1NhYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJNTS9EL1lZWVkiLExMOiJNTU1NIEQsIFlZWVkiLExMTDoiTU1NTSBELCBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBNTU1NIERELCBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltOZ2F5b24gc2FdIExUIixuZXh0RGF5OiJbQnVrYXMgc2FdIExUIixuZXh0V2VlazoiZGRkZCBbc2FdIExUIixsYXN0RGF5OiJbS2FoYXBvbiBzYV0gTFQiLGxhc3RXZWVrOiJkZGRkIFtodWxpbmcgbGluZ2dvXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToic2EgbG9vYiBuZyAlcyIscGFzdDoiJXMgYW5nIG5ha2FsaXBhcyIsczoiaWxhbmcgc2VndW5kbyIsbToiaXNhbmcgbWludXRvIixtbToiJWQgbWludXRvIixoOiJpc2FuZyBvcmFzIixoaDoiJWQgb3JhcyIsZDoiaXNhbmcgYXJhdyIsZGQ6IiVkIGFyYXciLE06ImlzYW5nIGJ1d2FuIixNTToiJWQgYnV3YW4iLHk6ImlzYW5nIHRhb24iLHl5OiIlZCB0YW9uIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LyxvcmRpbmFsOmZ1bmN0aW9uKHQpe3JldHVybiB0fSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3ZhciBlPXQ7cmV0dXJuIGU9dC5pbmRleE9mKCJqYWoiKSE9PS0xP2Uuc2xpY2UoMCwtMykrImxlUyI6dC5pbmRleE9mKCJqYXIiKSE9PS0xP2Uuc2xpY2UoMCwtMykrIndhUSI6dC5pbmRleE9mKCJESVMiKSE9PS0xP2Uuc2xpY2UoMCwtMykrIm5lbSI6ZSsiIHBJcSJ9ZnVuY3Rpb24gbih0KXt2YXIgZT10O3JldHVybiBlPXQuaW5kZXhPZigiamFqIikhPT0tMT9lLnNsaWNlKDAsLTMpKyJIdeKAmSI6dC5pbmRleE9mKCJqYXIiKSE9PS0xP2Uuc2xpY2UoMCwtMykrIndlbiI6dC5pbmRleE9mKCJESVMiKSE9PS0xP2Uuc2xpY2UoMCwtMykrImJlbiI6ZSsiIHJldCJ9ZnVuY3Rpb24gaSh0LGUsbixpKXt2YXIgbz1yKHQpO3N3aXRjaChuKXtjYXNlIm1tIjpyZXR1cm4gbysiIHR1cCI7Y2FzZSJoaCI6cmV0dXJuIG8rIiByZXAiO2Nhc2UiZGQiOnJldHVybiBvKyIgamFqIjtjYXNlIk1NIjpyZXR1cm4gbysiIGphciI7Y2FzZSJ5eSI6cmV0dXJuIG8rIiBESVMifX1mdW5jdGlvbiByKHQpe3ZhciBlPU1hdGguZmxvb3IodCUxZTMvMTAwKSxuPU1hdGguZmxvb3IodCUxMDAvMTApLGk9dCUxMCxyPSIiO3JldHVybiBlPjAmJihyKz1vW2VdKyJ2YXRsaCIpLG4+MCYmKHIrPSgiIiE9PXI/IiAiOiIiKStvW25dKyJtYUgiKSxpPjAmJihyKz0oIiIhPT1yPyIgIjoiIikrb1tpXSksIiI9PT1yPyJwYWdoIjpyfXZhciBvPSJwYWdoX3dh4oCZX2NoYeKAmV93ZWpfbG9TX3ZhZ2hfamF2X1NvY2hfY2hvcmdoX0h1dCIuc3BsaXQoIl8iKSxzPXQuZGVmaW5lTG9jYWxlKCJ0bGgiLHttb250aHM6InRlcmHigJkgamFyIHdh4oCZX3RlcmHigJkgamFyIGNoYeKAmV90ZXJh4oCZIGphciB3ZWpfdGVyYeKAmSBqYXIgbG9TX3RlcmHigJkgamFyIHZhZ2hfdGVyYeKAmSBqYXIgamF2X3RlcmHigJkgamFyIFNvY2hfdGVyYeKAmSBqYXIgY2hvcmdoX3RlcmHigJkgamFyIEh1dF90ZXJh4oCZIGphciB3YeKAmW1hSF90ZXJh4oCZIGphciB3YeKAmW1hSCB3YeKAmV90ZXJh4oCZIGphciB3YeKAmW1hSCBjaGHigJkiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImphciB3YeKAmV9qYXIgY2hh4oCZX2phciB3ZWpfamFyIGxvU19qYXIgdmFnaF9qYXIgamF2X2phciBTb2NoX2phciBjaG9yZ2hfamFyIEh1dF9qYXIgd2HigJltYUhfamFyIHdh4oCZbWFIIHdh4oCZX2phciB3YeKAmW1hSCBjaGHigJkiLnNwbGl0KCJfIiksd2Vla2RheXM6Imxvam1JdGphal9EYVNqYWpfcG92amFqX2doSXRsaGphal9sb2doamFqX2J1cWphal9naEluamFqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Imxvam1JdGphal9EYVNqYWpfcG92amFqX2doSXRsaGphal9sb2doamFqX2J1cWphal9naEluamFqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltEYUhqYWpdIExUIixuZXh0RGF5OiJbd2HigJlsZVNdIExUIixuZXh0V2VlazoiTExMIixsYXN0RGF5OiJbd2HigJlIdeKAmV0gTFQiLGxhc3RXZWVrOiJMTEwiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ZSxwYXN0Om4sczoicHVTIGx1cCIsbToid2HigJkgdHVwIixtbTppLGg6Indh4oCZIHJlcCIsaGg6aSxkOiJ3YeKAmSBqYWoiLGRkOmksTToid2HigJkgamFyIixNTTppLHk6Indh4oCZIERJUyIseXk6aX0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHN9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9ezE6IidpbmNpIiw1OiInaW5jaSIsODoiJ2luY2kiLDcwOiInaW5jaSIsODA6IidpbmNpIiwyOiInbmNpIiw3OiInbmNpIiwyMDoiJ25jaSIsNTA6IiduY2kiLDM6IifDvG5jw7wiLDQ6IifDvG5jw7wiLDEwMDoiJ8O8bmPDvCIsNjoiJ25jxLEiLDk6Iid1bmN1IiwxMDoiJ3VuY3UiLDMwOiIndW5jdSIsNjA6IifEsW5jxLEiLDkwOiInxLFuY8SxIn0sbj10LmRlZmluZUxvY2FsZSgidHIiLHttb250aHM6Ik9jYWtfxZ51YmF0X01hcnRfTmlzYW5fTWF5xLFzX0hhemlyYW5fVGVtbXV6X0HEn3VzdG9zX0V5bMO8bF9Fa2ltX0thc8SxbV9BcmFsxLFrIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJPY2FfxZ51Yl9NYXJfTmlzX01heV9IYXpfVGVtX0HEn3VfRXlsX0VraV9LYXNfQXJhIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJQYXphcl9QYXphcnRlc2lfU2FsxLFfw4dhcsWfYW1iYV9QZXLFn2VtYmVfQ3VtYV9DdW1hcnRlc2kiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiUGF6X1B0c19TYWxfw4dhcl9QZXJfQ3VtX0N0cyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiUHpfUHRfU2Ffw4dhX1BlX0N1X0N0Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2J1Z8O8biBzYWF0XSBMVCIsbmV4dERheToiW3lhcsSxbiBzYWF0XSBMVCIsbmV4dFdlZWs6IltoYWZ0YXlhXSBkZGRkIFtzYWF0XSBMVCIsbGFzdERheToiW2TDvG5dIExUIixsYXN0V2VlazoiW2dlw6dlbiBoYWZ0YV0gZGRkZCBbc2FhdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIHNvbnJhIixwYXN0OiIlcyDDtm5jZSIsczoiYmlya2HDpyBzYW5peWUiLG06ImJpciBkYWtpa2EiLG1tOiIlZCBkYWtpa2EiLGg6ImJpciBzYWF0IixoaDoiJWQgc2FhdCIsZDoiYmlyIGfDvG4iLGRkOiIlZCBnw7xuIixNOiJiaXIgYXkiLE1NOiIlZCBheSIseToiYmlyIHnEsWwiLHl5OiIlZCB5xLFsIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9JyhpbmNpfG5jaXzDvG5jw7x8bmPEsXx1bmN1fMSxbmPEsSkvLG9yZGluYWw6ZnVuY3Rpb24odCl7aWYoMD09PXQpcmV0dXJuIHQrIifEsW5jxLEiO3ZhciBuPXQlMTAsaT10JTEwMC1uLHI9dD49MTAwPzEwMDpudWxsO3JldHVybiB0KyhlW25dfHxlW2ldfHxlW3JdKX0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUsbixpKXt2YXIgcj17czpbInZpZW5zYXMgc2VjdW5kcyIsIidpZW5zYXMgc2VjdW5kcyJdLG06WyInbiBtw611dCIsIidpZW5zIG3DrXV0Il0sbW06W3QrIiBtw611dHMiLCIiK3QrIiBtw611dHMiXSxoOlsiJ24gw75vcmEiLCInaWVuc2Egw75vcmEiXSxoaDpbdCsiIMO+b3JhcyIsIiIrdCsiIMO+b3JhcyJdLGQ6WyInbiB6aXVhIiwiJ2llbnNhIHppdWEiXSxkZDpbdCsiIHppdWFzIiwiIit0KyIgeml1YXMiXSxNOlsiJ24gbWVzIiwiJ2llbnMgbWVzIl0sTU06W3QrIiBtZXNlbiIsIiIrdCsiIG1lc2VuIl0seTpbIiduIGFyIiwiJ2llbnMgYXIiXSx5eTpbdCsiIGFycyIsIiIrdCsiIGFycyJdfTtyZXR1cm4gaT9yW25dWzBdOmU/cltuXVswXTpyW25dWzFdfXZhciBuPXQuZGVmaW5lTG9jYWxlKCJ0emwiLHttb250aHM6IkphbnVhcl9GZXZyYWdsaF9NYXLDp19BdnLDr3VfTWFpX0fDvG5fSnVsaWFfR3VzY2h0X1NldGVtdmFyX0xpc3RvcMOkdHNfTm9lbXZhcl9aZWNlbXZhciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0Zldl9NYXJfQXZyX01haV9Hw7xuX0p1bF9HdXNfU2V0X0xpc19Ob2VfWmVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTw7psYWRpX0zDum5lw6dpX01haXR6aV9Nw6FyY3VyaV9YaMO6YWRpX1Zpw6luZXLDp2lfU8OhdHVyaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTw7psX0zDum5fTWFpX03DoXJfWGjDul9WacOpX1PDoXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlPDul9Mw7pfTWFfTcOhX1hoX1ZpX1PDoSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBbZGFsbGFzXSBZWVlZIixMTEw6IkQuIE1NTU0gW2RhbGxhc10gWVlZWSBISC5tbSIsTExMTDoiZGRkZCwgW2xpXSBELiBNTU1NIFtkYWxsYXNdIFlZWVkgSEgubW0ifSxtZXJpZGllbVBhcnNlOi9kXCdvfGRcJ2EvaSxpc1BNOmZ1bmN0aW9uKHQpe3JldHVybiJkJ28iPT09dC50b0xvd2VyQ2FzZSgpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ+MTE/bj8iZCdvIjoiRCdPIjpuPyJkJ2EiOiJEJ0EiOwoJfSxjYWxlbmRhcjp7c2FtZURheToiW294aGkgw6BdIExUIixuZXh0RGF5OiJbZGVtw6Agw6BdIExUIixuZXh0V2VlazoiZGRkZCBbw6BdIExUIixsYXN0RGF5OiJbaWVpcmkgw6BdIExUIixsYXN0V2VlazoiW3PDvHIgZWxdIGRkZGQgW2xhc3RldSDDoF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9zcHJlaSAlcyIscGFzdDoiamElcyIsczplLG06ZSxtbTplLGg6ZSxoaDplLGQ6ZSxkZDplLE06ZSxNTTplLHk6ZSx5eTplfSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gbn0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgidHptIix7bW9udGhzOiLitYnitY/itY/itLDitaLitZRf4rSx4rWV4rSw4rWi4rWVX+K1juK0sOK1leK1ml/itYnitLHitZTitYnitZRf4rWO4rSw4rWi4rWi4rWTX+K1ouK1k+K1j+K1ouK1k1/itaLitZPitY3itaLitZPitaNf4rWW4rWT4rWb4rWcX+K1m+K1k+K1nOK0sOK1j+K0seK1ieK1lF/itL3itZ/itZPitLHitZVf4rWP4rWT4rWh4rSw4rWP4rSx4rWJ4rWUX+K0t+K1k+K1iuK1j+K0seK1ieK1lCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4rWJ4rWP4rWP4rSw4rWi4rWUX+K0seK1leK0sOK1ouK1lV/itY7itLDitZXitZpf4rWJ4rSx4rWU4rWJ4rWUX+K1juK0sOK1ouK1ouK1k1/itaLitZPitY/itaLitZNf4rWi4rWT4rWN4rWi4rWT4rWjX+K1luK1k+K1m+K1nF/itZvitZPitZzitLDitY/itLHitYnitZRf4rS94rWf4rWT4rSx4rWVX+K1j+K1k+K1oeK0sOK1j+K0seK1ieK1lF/itLfitZPitYritY/itLHitYnitZQiLnNwbGl0KCJfIiksd2Vla2RheXM6IuK0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLitLDitZnitLDitY7itLDitZlf4rSw4rWi4rWP4rSw4rWZX+K0sOK1meK1ieK1j+K0sOK1mV/itLDitL3itZTitLDitZlf4rSw4rS94rWh4rSw4rWZX+K0sOK1meK1ieK1juK1oeK0sOK1mV/itLDitZnitYnitLnitaLitLDitZkiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuK0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+K0sOK1meK0t+K1hSDitLRdIExUIixuZXh0RGF5OiJb4rSw4rWZ4rS94rSwIOK0tF0gTFQiLG5leHRXZWVrOiJkZGRkIFvitLRdIExUIixsYXN0RGF5OiJb4rSw4rWa4rSw4rWP4rWcIOK0tF0gTFQiLGxhc3RXZWVrOiJkZGRkIFvitLRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLitLfitLDitLfitYUg4rWZIOK1ouK0sOK1jyAlcyIscGFzdDoi4rWi4rSw4rWPICVzIixzOiLitYnitY7itYnitL0iLG06IuK1juK1ieK1j+K1k+K0uiIsbW06IiVkIOK1juK1ieK1j+K1k+K0uiIsaDoi4rWZ4rSw4rWE4rSwIixoaDoiJWQg4rWc4rSw4rWZ4rWZ4rSw4rWE4rWJ4rWPIixkOiLitLDitZnitZkiLGRkOiIlZCBv4rWZ4rWZ4rSw4rWPIixNOiLitLDitaJv4rWT4rWUIixNTToiJWQg4rWJ4rWi4rWi4rWJ4rWU4rWPIix5OiLitLDitZnitLPitLDitZkiLHl5OiIlZCDitYnitZnitLPitLDitZnitY8ifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9dC5kZWZpbmVMb2NhbGUoInR6bS1sYXRuIix7bW9udGhzOiJpbm5heXJfYnLLpGF5csukX21hcsukc8ukX2licmlyX21heXl3X3l3bnl3X3l3bHl3el/Jo3fFoXRfxaF3dGFuYmlyX2t0y6R3YnLLpF9ud3dhbmJpcl9kd2puYmlyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJpbm5heXJfYnLLpGF5csukX21hcsukc8ukX2licmlyX21heXl3X3l3bnl3X3l3bHl3el/Jo3fFoXRfxaF3dGFuYmlyX2t0y6R3YnLLpF9ud3dhbmJpcl9kd2puYmlyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJhc2FtYXNfYXluYXNfYXNpbmFzX2FrcmFzX2Frd2FzX2FzaW13YXNfYXNp4biNeWFzIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImFzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImFzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilthc2RraCBnXSBMVCIsbmV4dERheToiW2Fza2EgZ10gTFQiLG5leHRXZWVrOiJkZGRkIFtnXSBMVCIsbGFzdERheToiW2Fzc2FudCBnXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2ddIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYWRraCBzIHlhbiAlcyIscGFzdDoieWFuICVzIixzOiJpbWlrIixtOiJtaW514biNIixtbToiJWQgbWludeG4jSIsaDoic2HJm2EiLGhoOiIlZCB0YXNzYcmbaW4iLGQ6ImFzcyIsZGQ6IiVkIG9zc2FuIixNOiJheW93ciIsTU06IiVkIGl5eWlybiIseToiYXNnYXMiLHl5OiIlZCBpc2dhc24ifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIGV9KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbih0LGUpe2UobigzNjEpKX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUpe3ZhciBuPXQuc3BsaXQoIl8iKTtyZXR1cm4gZSUxMD09PTEmJmUlMTAwIT09MTE/blswXTplJTEwPj0yJiZlJTEwPD00JiYoZSUxMDA8MTB8fGUlMTAwPj0yMCk/blsxXTpuWzJdfWZ1bmN0aW9uIG4odCxuLGkpe3ZhciByPXttbTpuPyLRhdCy0LjQu9C40L3QsF/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iOiLRhdCy0LjQu9C40L3Rg1/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iLGhoOm4/ItCz0L7QtNC40L3QsF/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSI6ItCz0L7QtNC40L3Rg1/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSIsZGQ6ItC00LXQvdGMX9C00L3Rll/QtNC90ZbQsiIsTU06ItC80ZbRgdGP0YbRjF/QvNGW0YHRj9GG0ZZf0LzRltGB0Y/RhtGW0LIiLHl5OiLRgNGW0Lpf0YDQvtC60Lhf0YDQvtC60ZbQsiJ9O3JldHVybiJtIj09PWk/bj8i0YXQstC40LvQuNC90LAiOiLRhdCy0LjQu9C40L3RgyI6ImgiPT09aT9uPyLQs9C+0LTQuNC90LAiOiLQs9C+0LTQuNC90YMiOnQrIiAiK2UocltpXSwrdCl9ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPXtub21pbmF0aXZlOiLQvdC10LTRltC70Y9f0L/QvtC90LXQtNGW0LvQvtC6X9Cy0ZbQstGC0L7RgNC+0Lpf0YHQtdGA0LXQtNCwX9GH0LXRgtCy0LXRgF/Qv+KAmdGP0YLQvdC40YbRj1/RgdGD0LHQvtGC0LAiLnNwbGl0KCJfIiksYWNjdXNhdGl2ZToi0L3QtdC00ZbQu9GOX9C/0L7QvdC10LTRltC70L7Qul/QstGW0LLRgtC+0YDQvtC6X9GB0LXRgNC10LTRg1/Rh9C10YLQstC10YBf0L/igJnRj9GC0L3QuNGG0Y5f0YHRg9Cx0L7RgtGDIi5zcGxpdCgiXyIpLGdlbml0aXZlOiLQvdC10LTRltC70ZZf0L/QvtC90LXQtNGW0LvQutCwX9Cy0ZbQstGC0L7RgNC60LBf0YHQtdGA0LXQtNC4X9GH0LXRgtCy0LXRgNCz0LBf0L/igJnRj9GC0L3QuNGG0ZZf0YHRg9Cx0L7RgtC4Ii5zcGxpdCgiXyIpfSxpPS8oXFtb0JLQstCj0YNdXF0pID9kZGRkLy50ZXN0KGUpPyJhY2N1c2F0aXZlIjovXFs/KD860LzQuNC90YPQu9C+0Zd80L3QsNGB0YLRg9C/0L3QvtGXKT8gP1xdID9kZGRkLy50ZXN0KGUpPyJnZW5pdGl2ZSI6Im5vbWluYXRpdmUiO3JldHVybiBuW2ldW3QuZGF5KCldfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQrItC+IisoMTE9PT10aGlzLmhvdXJzKCk/ItCxIjoiIikrIl0gTFQifX12YXIgbz10LmRlZmluZUxvY2FsZSgidWsiLHttb250aHM6e2Zvcm1hdDoi0YHRltGH0L3Rj1/Qu9GO0YLQvtCz0L5f0LHQtdGA0LXQt9C90Y9f0LrQstGW0YLQvdGPX9GC0YDQsNCy0L3Rj1/Rh9C10YDQstC90Y9f0LvQuNC/0L3Rj1/RgdC10YDQv9C90Y9f0LLQtdGA0LXRgdC90Y9f0LbQvtCy0YLQvdGPX9C70LjRgdGC0L7Qv9Cw0LTQsF/Qs9GA0YPQtNC90Y8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0YHRltGH0LXQvdGMX9C70Y7RgtC40Llf0LHQtdGA0LXQt9C10L3RjF/QutCy0ZbRgtC10L3RjF/RgtGA0LDQstC10L3RjF/Rh9C10YDQstC10L3RjF/Qu9C40L/QtdC90Yxf0YHQtdGA0L/QtdC90Yxf0LLQtdGA0LXRgdC10L3RjF/QttC+0LLRgtC10L3RjF/Qu9C40YHRgtC+0L/QsNC0X9Cz0YDRg9C00LXQvdGMIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi0YHRltGHX9C70Y7Rgl/QsdC10YBf0LrQstGW0YJf0YLRgNCw0LJf0YfQtdGA0LJf0LvQuNC/X9GB0LXRgNC/X9Cy0LXRgF/QttC+0LLRgl/Qu9C40YHRgl/Qs9GA0YPQtCIuc3BsaXQoIl8iKSx3ZWVrZGF5czppLHdlZWtkYXlzU2hvcnQ6ItC90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItC90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZINGALiIsTExMOiJEIE1NTU0gWVlZWSDRgC4sIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSDRgC4sIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6cigiW9Ch0YzQvtCz0L7QtNC90ZYgIiksbmV4dERheTpyKCJb0JfQsNCy0YLRgNCwICIpLGxhc3REYXk6cigiW9CS0YfQvtGA0LAgIiksbmV4dFdlZWs6cigiW9CjXSBkZGRkIFsiKSxsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6Y2FzZSAzOmNhc2UgNTpjYXNlIDY6cmV0dXJuIHIoIlvQnNC40L3Rg9C70L7Rl10gZGRkZCBbIikuY2FsbCh0aGlzKTtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4gcigiW9Cc0LjQvdGD0LvQvtCz0L5dIGRkZGQgWyIpLmNhbGwodGhpcyl9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQt9CwICVzIixwYXN0OiIlcyDRgtC+0LzRgyIsczoi0LTQtdC60ZbQu9GM0LrQsCDRgdC10LrRg9C90LQiLG06bixtbTpuLGg6ItCz0L7QtNC40L3RgyIsaGg6bixkOiLQtNC10L3RjCIsZGQ6bixNOiLQvNGW0YHRj9GG0YwiLE1NOm4seToi0YDRltC6Iix5eTpufSxtZXJpZGllbVBhcnNlOi/QvdC+0YfRlnzRgNCw0L3QutGDfNC00L3Rj3zQstC10YfQvtGA0LAvLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuL14o0LTQvdGPfNCy0LXRh9C+0YDQsCkkLy50ZXN0KHQpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ND8i0L3QvtGH0ZYiOnQ8MTI/ItGA0LDQvdC60YMiOnQ8MTc/ItC00L3RjyI6ItCy0LXRh9C+0YDQsCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfS0o0Ll80LPQvikvLG9yZGluYWw6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJNIjpjYXNlImQiOmNhc2UiREREIjpjYXNlInciOmNhc2UiVyI6cmV0dXJuIHQrIi3QuSI7Y2FzZSJEIjpyZXR1cm4gdCsiLdCz0L4iO2RlZmF1bHQ6cmV0dXJuIHR9fSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gb30pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgidXoiLHttb250aHM6ItGP0L3QstCw0YBf0YTQtdCy0YDQsNC7X9C80LDRgNGCX9Cw0L/RgNC10Ltf0LzQsNC5X9C40Y7QvV/QuNGO0Ltf0LDQstCz0YPRgdGCX9GB0LXQvdGC0Y/QsdGAX9C+0LrRgtGP0LHRgF/QvdC+0Y/QsdGAX9C00LXQutCw0LHRgCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi0Y/QvdCyX9GE0LXQsl/QvNCw0YBf0LDQv9GAX9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LoiLnNwbGl0KCJfIiksd2Vla2RheXM6ItCv0LrRiNCw0L3QsdCwX9CU0YPRiNCw0L3QsdCwX9Ch0LXRiNCw0L3QsdCwX9Cn0L7RgNGI0LDQvdCx0LBf0J/QsNC50YjQsNC90LHQsF/QltGD0LzQsF/QqNCw0L3QsdCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItCv0LrRiF/QlNGD0Yhf0KHQtdGIX9Cn0L7RgF/Qn9Cw0Llf0JbRg9C8X9Co0LDQvSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0K/Qul/QlNGDX9Ch0LVf0KfQvl/Qn9CwX9CW0YNf0KjQsCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6IkQgTU1NTSBZWVlZLCBkZGRkIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQkdGD0LPRg9C9INGB0L7QsNGCXSBMVCBb0LTQsF0iLG5leHREYXk6IlvQrdGA0YLQsNCz0LBdIExUIFvQtNCwXSIsbmV4dFdlZWs6ImRkZGQgW9C60YPQvdC4INGB0L7QsNGCXSBMVCBb0LTQsF0iLGxhc3REYXk6IlvQmtC10YfQsCDRgdC+0LDRgl0gTFQgW9C00LBdIixsYXN0V2VlazoiW9Cj0YLQs9Cw0L1dIGRkZGQgW9C60YPQvdC4INGB0L7QsNGCXSBMVCBb0LTQsF0iLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItCv0LrQuNC9ICVzINC40YfQuNC00LAiLHBhc3Q6ItCR0LjRgCDQvdC10YfQsCAlcyDQvtC70LTQuNC9IixzOiLRhNGD0YDRgdCw0YIiLG06ItCx0LjRgCDQtNCw0LrQuNC60LAiLG1tOiIlZCDQtNCw0LrQuNC60LAiLGg6ItCx0LjRgCDRgdC+0LDRgiIsaGg6IiVkINGB0L7QsNGCIixkOiLQsdC40YAg0LrRg9C9IixkZDoiJWQg0LrRg9C9IixNOiLQsdC40YAg0L7QuSIsTU06IiVkINC+0LkiLHk6ItCx0LjRgCDQudC40LsiLHl5OiIlZCDQudC40LsifSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgidmkiLHttb250aHM6InRow6FuZyAxX3Row6FuZyAyX3Row6FuZyAzX3Row6FuZyA0X3Row6FuZyA1X3Row6FuZyA2X3Row6FuZyA3X3Row6FuZyA4X3Row6FuZyA5X3Row6FuZyAxMF90aMOhbmcgMTFfdGjDoW5nIDEyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJUaDAxX1RoMDJfVGgwM19UaDA0X1RoMDVfVGgwNl9UaDA3X1RoMDhfVGgwOV9UaDEwX1RoMTFfVGgxMiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiY2jhu6cgbmjhuq10X3Ro4bupIGhhaV90aOG7qSBiYV90aOG7qSB0xrBfdGjhu6kgbsSDbV90aOG7qSBzw6F1X3Ro4bupIGLhuqN5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkNOX1QyX1QzX1Q0X1Q1X1Q2X1Q3Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJDTl9UMl9UM19UNF9UNV9UNl9UNyIuc3BsaXQoIl8iKSxtZXJpZGllbVBhcnNlOi9zYXxjaC9pLGlzUE06ZnVuY3Rpb24odCl7cmV0dXJuL15jaCQvaS50ZXN0KHQpfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8MTI/bj8ic2EiOiJTQSI6bj8iY2giOiJDSCJ9LGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gW27Eg21dIFlZWVkiLExMTDoiRCBNTU1NIFtuxINtXSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gW27Eg21dIFlZWVkgSEg6bW0iLGw6IkREL00vWVlZWSIsbGw6IkQgTU1NIFlZWVkiLGxsbDoiRCBNTU0gWVlZWSBISDptbSIsbGxsbDoiZGRkLCBEIE1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIw7RtIG5heSBsw7pjXSBMVCIsbmV4dERheToiW05nw6B5IG1haSBsw7pjXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3R14bqnbiB04bubaSBsw7pjXSBMVCIsbGFzdERheToiW0jDtG0gcXVhIGzDumNdIExUIixsYXN0V2VlazoiZGRkZCBbdHXhuqduIHLhu5NpIGzDumNdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyB04bubaSIscGFzdDoiJXMgdHLGsOG7m2MiLHM6InbDoGkgZ2nDonkiLG06Im3hu5l0IHBow7p0IixtbToiJWQgcGjDunQiLGg6Im3hu5l0IGdp4budIixoaDoiJWQgZ2nhu50iLGQ6Im3hu5l0IG5nw6B5IixkZDoiJWQgbmfDoHkiLE06Im3hu5l0IHRow6FuZyIsTU06IiVkIHRow6FuZyIseToibeG7mXQgbsSDbSIseXk6IiVkIG7Eg20ifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0vLG9yZGluYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24odCxlKXtlKG4oMzYxKSl9KHRoaXMsZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBlPXQuZGVmaW5lTG9jYWxlKCJ6aC1jbiIse21vbnRoczoi5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi5ZGo5pelX+WRqOS4gF/lkajkuoxf5ZGo5LiJX+WRqOWbm1/lkajkupRf5ZGo5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBaOeCuW1t5YiGIixMVFM6IkFo54K5beWIhnPnp5IiLEw6IllZWVktTU0tREQiLExMOiJZWVlZ5bm0TU1NROaXpSIsTExMOiJZWVlZ5bm0TU1NROaXpUFo54K5bW3liIYiLExMTEw6IllZWVnlubRNTU1E5pelZGRkZEFo54K5bW3liIYiLGw6IllZWVktTU0tREQiLGxsOiJZWVlZ5bm0TU1NROaXpSIsbGxsOiJZWVlZ5bm0TU1NROaXpUFo54K5bW3liIYiLGxsbGw6IllZWVnlubRNTU1E5pelZGRkZEFo54K5bW3liIYifSxtZXJpZGllbVBhcnNlOi/lh4zmmah85pep5LiKfOS4iuWNiHzkuK3ljYh85LiL5Y2IfOaZmuS4ii8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDEyPT09dCYmKHQ9MCksIuWHjOaZqCI9PT1lfHwi5pep5LiKIj09PWV8fCLkuIrljYgiPT09ZT90OiLkuIvljYgiPT09ZXx8IuaZmuS4iiI9PT1lP3QrMTI6dD49MTE/dDp0KzEyfSxtZXJpZGllbTpmdW5jdGlvbih0LGUsbil7dmFyIGk9MTAwKnQrZTtyZXR1cm4gaTw2MDA/IuWHjOaZqCI6aTw5MDA/IuaXqeS4iiI6aTwxMTMwPyLkuIrljYgiOmk8MTIzMD8i5Lit5Y2IIjppPDE4MDA/IuS4i+WNiCI6IuaZmuS4iiJ9LGNhbGVuZGFyOntzYW1lRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLm1pbnV0ZXMoKT8iW+S7iuWkqV1BaFvngrnmlbRdIjoiW+S7iuWkqV1MVCJ9LG5leHREYXk6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubWludXRlcygpPyJb5piO5aSpXUFoW+eCueaVtF0iOiJb5piO5aSpXUxUIn0sbGFzdERheTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5taW51dGVzKCk/IlvmmKjlpKldQWhb54K55pW0XSI6IlvmmKjlpKldTFQifSxuZXh0V2VlazpmdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIGU9dCgpLnN0YXJ0T2YoIndlZWsiKSxuPXRoaXMudW5peCgpLWUudW5peCgpPj02MDQ4MDA/IlvkuItdIjoiW+acrF0iLDA9PT10aGlzLm1pbnV0ZXMoKT9uKyJkZGRBaOeCueaVtCI6bisiZGRkQWjngrltbSJ9LGxhc3RXZWVrOmZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gZT10KCkuc3RhcnRPZigid2VlayIpLG49dGhpcy51bml4KCk8ZS51bml4KCk/IlvkuIpdIjoiW+acrF0iLDA9PT10aGlzLm1pbnV0ZXMoKT9uKyJkZGRBaOeCueaVtCI6bisiZGRkQWjngrltbSJ9LHNhbWVFbHNlOiJMTCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfSjml6V85pyIfOWRqCkvLG9yZGluYWw6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJkIjpjYXNlIkQiOmNhc2UiREREIjpyZXR1cm4gdCsi5pelIjtjYXNlIk0iOnJldHVybiB0KyLmnIgiO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gdCsi5ZGoIjtkZWZhdWx0OnJldHVybiB0fX0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz5YaFIixwYXN0OiIlc+WJjSIsczoi5Yeg56eSIixtOiIxIOWIhumSnyIsbW06IiVkIOWIhumSnyIsaDoiMSDlsI/ml7YiLGhoOiIlZCDlsI/ml7YiLGQ6IjEg5aSpIixkZDoiJWQg5aSpIixNOiIxIOS4quaciCIsTU06IiVkIOS4quaciCIseToiMSDlubQiLHl5OiIlZCDlubQifSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gZX0pfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKHQsZSl7ZShuKDM2MSkpfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT10LmRlZmluZUxvY2FsZSgiemgtdHciLHttb250aHM6IuS4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi5pif5pyf5pelX+aYn+acn+S4gF/mmJ/mnJ/kuoxf5pif5pyf5LiJX+aYn+acn+Wbm1/mmJ/mnJ/kupRf5pif5pyf5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IumAseaXpV/pgLHkuIBf6YCx5LqMX+mAseS4iV/pgLHlm5tf6YCx5LqUX+mAseWFrSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQWjpu55tbeWIhiIsTFRTOiJBaOm7nm3liIZz56eSIixMOiJZWVlZ5bm0TU1NROaXpSIsTEw6IllZWVnlubRNTU1E5pelIixMTEw6IllZWVnlubRNTU1E5pelQWjpu55tbeWIhiIsTExMTDoiWVlZWeW5tE1NTUTml6VkZGRkQWjpu55tbeWIhiIsbDoiWVlZWeW5tE1NTUTml6UiLGxsOiJZWVlZ5bm0TU1NROaXpSIsbGxsOiJZWVlZ5bm0TU1NROaXpUFo6buebW3liIYiLGxsbGw6IllZWVnlubRNTU1E5pelZGRkZEFo6buebW3liIYifSxtZXJpZGllbVBhcnNlOi/ml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMTI9PT10JiYodD0wKSwi5pep5LiKIj09PWV8fCLkuIrljYgiPT09ZT90OiLkuK3ljYgiPT09ZT90Pj0xMT90OnQrMTI6IuS4i+WNiCI9PT1lfHwi5pma5LiKIj09PWU/dCsxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0xMDAqdCtlO3JldHVybiBpPDkwMD8i5pep5LiKIjppPDExMzA/IuS4iuWNiCI6aTwxMjMwPyLkuK3ljYgiOmk8MTgwMD8i5LiL5Y2IIjoi5pma5LiKIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilvku4rlpKldTFQiLG5leHREYXk6IlvmmI7lpKldTFQiLG5leHRXZWVrOiJb5LiLXWRkZGRMVCIsbGFzdERheToiW+aYqOWkqV1MVCIsbGFzdFdlZWs6IlvkuIpdZGRkZExUIixzYW1lRWxzZToiTCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfSjml6V85pyIfOmAsSkvLG9yZGluYWw6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSJkIjpjYXNlIkQiOmNhc2UiREREIjpyZXR1cm4gdCsi5pelIjtjYXNlIk0iOnJldHVybiB0KyLmnIgiO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gdCsi6YCxIjtkZWZhdWx0OnJldHVybiB0fX0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz5YWnIixwYXN0OiIlc+WJjSIsczoi5bm+56eSIixtOiLkuIDliIbpkJgiLG1tOiIlZOWIhumQmCIsaDoi5LiA5bCP5pmCIixoaDoiJWTlsI/mmYIiLGQ6IuS4gOWkqSIsZGQ6IiVk5aSpIixNOiLkuIDlgIvmnIgiLE1NOiIlZOWAi+aciCIseToi5LiA5bm0Iix5eToiJWTlubQifX0pO3JldHVybiBlfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG87ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9OwoJLy8hIG1vbWVudC10aW1lem9uZS5qcwoJLy8hIHZlcnNpb24gOiAwLjUuMwoJLy8hIGF1dGhvciA6IFRpbSBXb29kCgkvLyEgbGljZW5zZSA6IE1JVAoJLy8hIGdpdGh1Yi5jb20vbW9tZW50L21vbWVudC10aW1lem9uZQoJIWZ1bmN0aW9uKHMsYSl7InVzZSBzdHJpY3QiO3I9W24oMzYxKV0saT1hLG89ImZ1bmN0aW9uIj09dHlwZW9mIGk/aS5hcHBseShlLHIpOmksISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0odm9pZCAwLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3JldHVybiB0Pjk2P3QtODc6dD42ND90LTI5OnQtNDh9ZnVuY3Rpb24gbih0KXt2YXIgbixpPTAscj10LnNwbGl0KCIuIiksbz1yWzBdLHM9clsxXXx8IiIsYT0xLGw9MCxjPTE7Zm9yKDQ1PT09dC5jaGFyQ29kZUF0KDApJiYoaT0xLGM9LTEpLGk7aTxvLmxlbmd0aDtpKyspbj1lKG8uY2hhckNvZGVBdChpKSksbD02MCpsK247Zm9yKGk9MDtpPHMubGVuZ3RoO2krKylhLz02MCxuPWUocy5jaGFyQ29kZUF0KGkpKSxsKz1uKmE7cmV0dXJuIGwqY31mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09bih0W2VdKX1mdW5jdGlvbiByKHQsZSl7Zm9yKHZhciBuPTA7bjxlO24rKyl0W25dPU1hdGgucm91bmQoKHRbbi0xXXx8MCkrNmU0KnRbbl0pO3RbZS0xXT0xLzB9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuLGk9W107Zm9yKG49MDtuPGUubGVuZ3RoO24rKylpW25dPXRbZVtuXV07cmV0dXJuIGl9ZnVuY3Rpb24gcyh0KXt2YXIgZT10LnNwbGl0KCJ8Iiksbj1lWzJdLnNwbGl0KCIgIikscz1lWzNdLnNwbGl0KCIiKSxhPWVbNF0uc3BsaXQoIiAiKTtyZXR1cm4gaShuKSxpKHMpLGkoYSkscihhLHMubGVuZ3RoKSx7bmFtZTplWzBdLGFiYnJzOm8oZVsxXS5zcGxpdCgiICIpLHMpLG9mZnNldHM6byhuLHMpLHVudGlsczphLHBvcHVsYXRpb246MHxlWzVdfX1mdW5jdGlvbiBhKHQpe3QmJnRoaXMuX3NldChzKHQpKX1mdW5jdGlvbiBsKHQpe3ZhciBlPXQudG9UaW1lU3RyaW5nKCksbj1lLm1hdGNoKC9cKFthLXogXStcKS9pKTtuJiZuWzBdPyhuPW5bMF0ubWF0Y2goL1tBLVpdL2cpLG49bj9uLmpvaW4oIiIpOnZvaWQgMCk6KG49ZS5tYXRjaCgvW0EtWl17Myw1fS9nKSxuPW4/blswXTp2b2lkIDApLCJHTVQiPT09biYmKG49dm9pZCAwKSx0aGlzLmF0PSt0LHRoaXMuYWJicj1uLHRoaXMub2Zmc2V0PXQuZ2V0VGltZXpvbmVPZmZzZXQoKX1mdW5jdGlvbiBjKHQpe3RoaXMuem9uZT10LHRoaXMub2Zmc2V0U2NvcmU9MCx0aGlzLmFiYnJTY29yZT0wfWZ1bmN0aW9uIHUodCxlKXtmb3IodmFyIG4saTtpPTZlNCooKGUuYXQtdC5hdCkvMTJlNHwwKTspbj1uZXcgbChuZXcgRGF0ZSh0LmF0K2kpKSxuLm9mZnNldD09PXQub2Zmc2V0P3Q9bjplPW47cmV0dXJuIHR9ZnVuY3Rpb24gZCgpe3ZhciB0LGUsbixpPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKS0yLHI9bmV3IGwobmV3IERhdGUoaSwwLDEpKSxvPVtyXTtmb3Iobj0xO248NDg7bisrKWU9bmV3IGwobmV3IERhdGUoaSxuLDEpKSxlLm9mZnNldCE9PXIub2Zmc2V0JiYodD11KHIsZSksby5wdXNoKHQpLG8ucHVzaChuZXcgbChuZXcgRGF0ZSh0LmF0KzZlNCkpKSkscj1lO2ZvcihuPTA7bjw0O24rKylvLnB1c2gobmV3IGwobmV3IERhdGUoaStuLDAsMSkpKSxvLnB1c2gobmV3IGwobmV3IERhdGUoaStuLDYsMSkpKTtyZXR1cm4gb31mdW5jdGlvbiBoKHQsZSl7cmV0dXJuIHQub2Zmc2V0U2NvcmUhPT1lLm9mZnNldFNjb3JlP3Qub2Zmc2V0U2NvcmUtZS5vZmZzZXRTY29yZTp0LmFiYnJTY29yZSE9PWUuYWJiclNjb3JlP3QuYWJiclNjb3JlLWUuYWJiclNjb3JlOmUuem9uZS5wb3B1bGF0aW9uLXQuem9uZS5wb3B1bGF0aW9ufWZ1bmN0aW9uIHAodCxlKXt2YXIgbixyO2ZvcihpKGUpLG49MDtuPGUubGVuZ3RoO24rKylyPWVbbl0sUFtyXT1QW3JdfHx7fSxQW3JdW3RdPSEwfWZ1bmN0aW9uIGYodCl7dmFyIGUsbixpLHI9dC5sZW5ndGgsbz17fSxzPVtdO2ZvcihlPTA7ZTxyO2UrKyl7aT1QW3RbZV0ub2Zmc2V0XXx8e307Zm9yKG4gaW4gaSlpLmhhc093blByb3BlcnR5KG4pJiYob1tuXT0hMCl9Zm9yKGUgaW4gbylvLmhhc093blByb3BlcnR5KGUpJiZzLnB1c2goT1tlXSk7cmV0dXJuIHN9ZnVuY3Rpb24gbSgpe3RyeXt2YXIgdD1JbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmUsZT1PW2codCldO2lmKGUpcmV0dXJuIGU7aygiTW9tZW50IFRpbWV6b25lIGZvdW5kICIrdCsiIGZyb20gdGhlIEludGwgYXBpLCBidXQgZGlkIG5vdCBoYXZlIHRoYXQgZGF0YSBsb2FkZWQuIil9Y2F0Y2gobil7fXZhciBpLHIsbyxzPWQoKSxhPXMubGVuZ3RoLGw9ZihzKSx1PVtdO2ZvcihyPTA7cjxsLmxlbmd0aDtyKyspe2ZvcihpPW5ldyBjKHkobFtyXSksYSksbz0wO288YTtvKyspaS5zY29yZU9mZnNldEF0KHNbb10pO3UucHVzaChpKX1yZXR1cm4gdS5zb3J0KGgpLHUubGVuZ3RoPjA/dVswXS56b25lLm5hbWU6dm9pZCAwfWZ1bmN0aW9uIF8odCl7cmV0dXJuIEUmJiF0fHwoRT1tKCkpLEV9ZnVuY3Rpb24gZyh0KXtyZXR1cm4odHx8IiIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXC8vZywiXyIpfWZ1bmN0aW9uIHYodCl7dmFyIGUsbixpLHI7Zm9yKCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9W3RdKSxlPTA7ZTx0Lmxlbmd0aDtlKyspaT10W2VdLnNwbGl0KCJ8Iiksbj1pWzBdLHI9ZyhuKSxDW3JdPXRbZV0sT1tyXT1uLGlbNV0mJnAocixpWzJdLnNwbGl0KCIgIikpfWZ1bmN0aW9uIHkodCxlKXt0PWcodCk7dmFyIG4saT1DW3RdO3JldHVybiBpIGluc3RhbmNlb2YgYT9pOiJzdHJpbmciPT10eXBlb2YgaT8oaT1uZXcgYShpKSxDW3RdPWksaSk6WVt0XSYmZSE9PXkmJihuPXkoWVt0XSx5KSk/KGk9Q1t0XT1uZXcgYSxpLl9zZXQobiksaS5uYW1lPU9bdF0saSk6bnVsbH1mdW5jdGlvbiBiKCl7dmFyIHQsZT1bXTtmb3IodCBpbiBPKU8uaGFzT3duUHJvcGVydHkodCkmJihDW3RdfHxDW1lbdF1dKSYmT1t0XSYmZS5wdXNoKE9bdF0pO3JldHVybiBlLnNvcnQoKX1mdW5jdGlvbiB3KHQpe3ZhciBlLG4saSxyO2Zvcigic3RyaW5nIj09dHlwZW9mIHQmJih0PVt0XSksZT0wO2U8dC5sZW5ndGg7ZSsrKW49dFtlXS5zcGxpdCgifCIpLGk9ZyhuWzBdKSxyPWcoblsxXSksWVtpXT1yLE9baV09blswXSxZW3JdPWksT1tyXT1uWzFdfWZ1bmN0aW9uIE0odCl7dih0LnpvbmVzKSx3KHQubGlua3MpLEwuZGF0YVZlcnNpb249dC52ZXJzaW9ufWZ1bmN0aW9uIFModCl7cmV0dXJuIFMuZGlkU2hvd0Vycm9yfHwoUy5kaWRTaG93RXJyb3I9ITAsaygibW9tZW50LnR6LnpvbmVFeGlzdHMoJyIrdCsiJykgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiBmYXZvciBvZiAhbW9tZW50LnR6LnpvbmUoJyIrdCsiJykiKSksISF5KHQpfWZ1bmN0aW9uIFQodCl7cmV0dXJuISghdC5fYXx8dm9pZCAwIT09dC5fdHptKX1mdW5jdGlvbiBrKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmImZ1bmN0aW9uIj09dHlwZW9mIGNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IodCl9ZnVuY3Rpb24gTChlKXt2YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCwtMSksaT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSxyPXkoaSksbz10LnV0Yy5hcHBseShudWxsLG4pO3JldHVybiByJiYhdC5pc01vbWVudChlKSYmVChvKSYmby5hZGQoci5wYXJzZShvKSwibWludXRlcyIpLG8udHooaSksb31mdW5jdGlvbiB4KHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLl96P3RoaXMuX3ouYWJicih0aGlzKTp0LmNhbGwodGhpcyl9fWZ1bmN0aW9uIEEodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3o9bnVsbCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19aWYodm9pZCAwIT09dC50eilyZXR1cm4gaygiTW9tZW50IFRpbWV6b25lICIrdC50ei52ZXJzaW9uKyIgd2FzIGFscmVhZHkgbG9hZGVkICIrKHQudHouZGF0YVZlcnNpb24/IndpdGggZGF0YSBmcm9tICI6IndpdGhvdXQgYW55IGRhdGEiKSt0LnR6LmRhdGFWZXJzaW9uKSx0O3ZhciBFLEQ9IjAuNS4zIixDPXt9LFk9e30sTz17fSxQPXt9LE49dC52ZXJzaW9uLnNwbGl0KCIuIiksST0rTlswXSxSPStOWzFdOyhJPDJ8fDI9PT1JJiZSPDYpJiZrKCJNb21lbnQgVGltZXpvbmUgcmVxdWlyZXMgTW9tZW50LmpzID49IDIuNi4wLiBZb3UgYXJlIHVzaW5nIE1vbWVudC5qcyAiK3QudmVyc2lvbisiLiBTZWUgbW9tZW50anMuY29tIiksYS5wcm90b3R5cGU9e19zZXQ6ZnVuY3Rpb24odCl7dGhpcy5uYW1lPXQubmFtZSx0aGlzLmFiYnJzPXQuYWJicnMsdGhpcy51bnRpbHM9dC51bnRpbHMsdGhpcy5vZmZzZXRzPXQub2Zmc2V0cyx0aGlzLnBvcHVsYXRpb249dC5wb3B1bGF0aW9ufSxfaW5kZXg6ZnVuY3Rpb24odCl7dmFyIGUsbj0rdCxpPXRoaXMudW50aWxzO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspaWYobjxpW2VdKXJldHVybiBlfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZSxuLGkscixvPSt0LHM9dGhpcy5vZmZzZXRzLGE9dGhpcy51bnRpbHMsbD1hLmxlbmd0aC0xO2ZvcihyPTA7cjxsO3IrKylpZihlPXNbcl0sbj1zW3IrMV0saT1zW3I/ci0xOnJdLGU8biYmTC5tb3ZlQW1iaWd1b3VzRm9yd2FyZD9lPW46ZT5pJiZMLm1vdmVJbnZhbGlkRm9yd2FyZCYmKGU9aSksbzxhW3JdLTZlNCplKXJldHVybiBzW3JdO3JldHVybiBzW2xdfSxhYmJyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFiYnJzW3RoaXMuX2luZGV4KHQpXX0sb2Zmc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9mZnNldHNbdGhpcy5faW5kZXgodCldfX0sYy5wcm90b3R5cGUuc2NvcmVPZmZzZXRBdD1mdW5jdGlvbih0KXt0aGlzLm9mZnNldFNjb3JlKz1NYXRoLmFicyh0aGlzLnpvbmUub2Zmc2V0KHQuYXQpLXQub2Zmc2V0KSx0aGlzLnpvbmUuYWJicih0LmF0KS5tYXRjaCgvW0EtWl0vZykuam9pbigiIikhPT10LmFiYnImJnRoaXMuYWJiclNjb3JlKyt9LEwudmVyc2lvbj1ELEwuZGF0YVZlcnNpb249IiIsTC5fem9uZXM9QyxMLl9saW5rcz1ZLEwuX25hbWVzPU8sTC5hZGQ9dixMLmxpbms9dyxMLmxvYWQ9TSxMLnpvbmU9eSxMLnpvbmVFeGlzdHM9UyxMLmd1ZXNzPV8sTC5uYW1lcz1iLEwuWm9uZT1hLEwudW5wYWNrPXMsTC51bnBhY2tCYXNlNjA9bixMLm5lZWRzT2Zmc2V0PVQsTC5tb3ZlSW52YWxpZEZvcndhcmQ9ITAsTC5tb3ZlQW1iaWd1b3VzRm9yd2FyZD0hMTt2YXIgaj10LmZuO3QudHo9TCx0LmRlZmF1bHRab25lPW51bGwsdC51cGRhdGVPZmZzZXQ9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXQuZGVmYXVsdFpvbmU7dm9pZCAwPT09ZS5feiYmKHImJlQoZSkmJiFlLl9pc1VUQyYmKGUuX2Q9dC51dGMoZS5fYSkuX2QsZS51dGMoKS5hZGQoci5wYXJzZShlKSwibWludXRlcyIpKSxlLl96PXIpLGUuX3omJihpPWUuX3oub2Zmc2V0KGUpLE1hdGguYWJzKGkpPDE2JiYoaS89NjApLHZvaWQgMCE9PWUudXRjT2Zmc2V0P2UudXRjT2Zmc2V0KC1pLG4pOmUuem9uZShpLG4pKX0sai50ej1mdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5fej15KGUpLHRoaXMuX3o/dC51cGRhdGVPZmZzZXQodGhpcyk6aygiTW9tZW50IFRpbWV6b25lIGhhcyBubyBkYXRhIGZvciAiK2UrIi4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vdGltZXpvbmUvZG9jcy8jL2RhdGEtbG9hZGluZy8uIiksdGhpcyk6dGhpcy5fej90aGlzLl96Lm5hbWU6dm9pZCAwfSxqLnpvbmVOYW1lPXgoai56b25lTmFtZSksai56b25lQWJicj14KGouem9uZUFiYnIpLGoudXRjPUEoai51dGMpLHQudHouc2V0RGVmYXVsdD1mdW5jdGlvbihlKXtyZXR1cm4oSTwyfHwyPT09SSYmUjw5KSYmaygiTW9tZW50IFRpbWV6b25lIHNldERlZmF1bHQoKSByZXF1aXJlcyBNb21lbnQuanMgPj0gMi45LjAuIFlvdSBhcmUgdXNpbmcgTW9tZW50LmpzICIrdC52ZXJzaW9uKyIuIiksdC5kZWZhdWx0Wm9uZT1lP3koZSk6bnVsbCx0fTt2YXIgSD10Lm1vbWVudFByb3BlcnRpZXM7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChIKT8oSC5wdXNoKCJfeiIpLEgucHVzaCgiX2EiKSk6SCYmKEguX3o9bnVsbCksTSh7dmVyc2lvbjoiMjAxNmMiLHpvbmVzOlsiQWZyaWNhL0FiaWRqYW58R01UfDB8MHx8NDhlNSIsIkFmcmljYS9LaGFydG91bXxFQVR8LTMwfDB8fDUxZTUiLCJBZnJpY2EvQWxnaWVyc3xDRVR8LTEwfDB8fDI2ZTUiLCJBZnJpY2EvTGFnb3N8V0FUfC0xMHwwfHwxN2U2IiwiQWZyaWNhL01hcHV0b3xDQVR8LTIwfDB8fDI2ZTUiLCJBZnJpY2EvQ2Fpcm98RUVUIEVFU1R8LTIwIC0zMHwwMTAxMDEwMTB8MUNieTAgRmIwIGMxMCA4bjAgOE5kMCBnTDAgZTEwIG1uMHwxNWU2IiwiQWZyaWNhL0Nhc2FibGFuY2F8V0VUIFdFU1R8MCAtMTB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUNjbzAgRGIwIDF6ZDAgTHowIDFOZjAgd00wIGNvMCBnbzAgMW8wMCBzMDAgZEEwIHZjMCAxMUEwIEEwMCBlMDAgeTAwIDExQTAgdU0wIGUwMCBEYzAgMTFBMCBzMDAgZTAwIElNMCBXTTAgbW8wIGdNMCBMQTAgV00wIGpBMCBlMDAgUmMwIDExQTAgZTAwIGUwMCBVMDAgMTFBMCA4bzAgZTAwIDExQTB8MzJlNSIsIkV1cm9wZS9QYXJpc3xDRVQgQ0VTVHwtMTAgLTIwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8MTFlNiIsIkFmcmljYS9Kb2hhbm5lc2J1cmd8U0FTVHwtMjB8MHx8ODRlNSIsIkFmcmljYS9Ucmlwb2xpfEVFVCBDRVQgQ0VTVHwtMjAgLTEwIC0yMHwwMTIwfDFJbEEwIFRBMCAxbzAwfDExZTUiLCJBZnJpY2EvV2luZGhvZWt8V0FTVCBXQVR8LTIwIC0xMHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQzFjMCAxMUIwIDFuWDAgMTFCMCAxblgwIDExQjAgMXFMMCBXTjAgMXFMMCAxMUIwIDFuWDAgMTFCMCAxblgwIDExQjAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxcUwwIFdOMCAxcUwwIDExQjB8MzJlNCIsIkFtZXJpY2EvQWRha3xIU1QgSERUfGEwIDkwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCUjAwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgUmQwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjB8MzI2IiwiQW1lcmljYS9BbmNob3JhZ2V8QUtTVCBBS0RUfDkwIDgwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCUVgwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgUmQwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjB8MzBlNCIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBU1R8NDB8MHx8MjllNSIsIkFtZXJpY2EvQXJhZ3VhaW5hfEJSVCBCUlNUfDMwIDIwfDAxMHwxSWREMCBMejB8MTRlNCIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBUlR8MzB8MHwiLCJBbWVyaWNhL0FzdW5jaW9ufFBZU1QgUFlUfDMwIDQwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDNDMwIDFhMTAgMWZ6MCAxYTEwIDFmejAgMWNOMCAxN2IwIDFpcDAgMTdiMCAxaXAwIDE3YjAgMWlwMCAxOVgwIDFmQjAgMTlYMCAxZkIwIDE5WDAgMWlwMCAxN2IwIDFpcDAgMTdiMCAxaXAwfDI4ZTUiLCJBbWVyaWNhL1BhbmFtYXxFU1R8NTB8MHx8MTVlNSIsIkFtZXJpY2EvQmFoaWF8QlJUIEJSU1R8MzAgMjB8MDEwfDFGSmYwIFJiMHwyN2U1IiwiQW1lcmljYS9CYWhpYV9CYW5kZXJhc3xNU1QgQ0RUIENTVHw3MCA1MCA2MHwwMTIxMjEyMTIxMjEyMTIxMjEyMTIxMnwxQzFsMCAxblcwIDExQjAgMW5YMCAxMUIwIDFuWDAgMTRwMCAxbGIwIDE0cDAgMWxiMCAxNHAwIDFsYjAgMTRwMCAxblgwIDExQjAgMW5YMCAxMUIwIDFuWDAgMTRwMCAxbGIwIDE0cDAgMWxiMHw4NGUzIiwiQW1lcmljYS9Gb3J0YWxlemF8QlJUfDMwfDB8fDM0ZTUiLCJBbWVyaWNhL01hbmFndWF8Q1NUfDYwfDB8fDIyZTUiLCJBbWVyaWNhL01hbmF1c3xBTVR8NDB8MHx8MTllNSIsIkFtZXJpY2EvQm9nb3RhfENPVHw1MHwwfHw5MGU1IiwiQW1lcmljYS9EZW52ZXJ8TVNUIE1EVHw3MCA2MHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQlFWMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIFJkMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwfDI2ZTUiLCJBbWVyaWNhL0NhbXBvX0dyYW5kZXxBTVNUIEFNVHwzMCA0MHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQklyMCAxemQwIE9uMCAxemQwIFJiMCAxemQwIEx6MCAxQzEwIEx6MCAxQzEwIE9uMCAxemQwIE9uMCAxemQwIE9uMCAxemQwIE9uMCAxQzEwIEx6MCAxQzEwIEx6MCAxQzEwfDc3ZTQiLCJBbWVyaWNhL0NhbmN1bnxDU1QgQ0RUIEVTVHw2MCA1MCA1MHwwMTAxMDEwMTAxMDJ8MUMxazAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxblgwIDE0cDAgMWxiMCAxNHAwIDFsYjAgRGQwfDYzZTQiLCJBbWVyaWNhL0NhcmFjYXN8VkVUfDR1fDB8fDI5ZTUiLCJBbWVyaWNhL0NheWVubmV8R0ZUfDMwfDB8fDU4ZTMiLCJBbWVyaWNhL0NoaWNhZ298Q1NUIENEVHw2MCA1MHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQlFVMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIFJkMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwfDkyZTUiLCJBbWVyaWNhL0NoaWh1YWh1YXxNU1QgTURUfDcwIDYwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMWwwIDFuWDAgMTFCMCAxblgwIDExQjAgMW5YMCAxNHAwIDFsYjAgMTRwMCAxbGIwIDE0cDAgMWxiMCAxNHAwIDFuWDAgMTFCMCAxblgwIDExQjAgMW5YMCAxNHAwIDFsYjAgMTRwMCAxbGIwfDgxZTQiLCJBbWVyaWNhL1Bob2VuaXh8TVNUfDcwfDB8fDQyZTUiLCJBbWVyaWNhL0xvc19BbmdlbGVzfFBTVCBQRFR8ODAgNzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRVzAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHwxNWU2IiwiQW1lcmljYS9OZXdfWW9ya3xFU1QgRURUfDUwIDQwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCUVQwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgUmQwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjB8MjFlNiIsIkFtZXJpY2EvUmlvX0JyYW5jb3xBTVQgQUNUfDQwIDUwfDAxfDFLTEUwfDMxZTQiLCJBbWVyaWNhL0ZvcnRfTmVsc29ufFBTVCBQRFQgTVNUfDgwIDcwIDcwfDAxMDEwMTAxMDEwMnwxQlFXMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMCAxemIwIE9wMHwzOWUyIiwiQW1lcmljYS9IYWxpZmF4fEFTVCBBRFR8NDAgMzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRUzAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHwzOWU0IiwiQW1lcmljYS9Hb2R0aGFifFdHVCBXR1NUfDMwIDIwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8MTdlMyIsIkFtZXJpY2EvR29vc2VfQmF5fEFTVCBBRFR8NDAgMzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRUTEgMXpiMCBPcDAgMXpjWCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHw3NmUyIiwiQW1lcmljYS9HcmFuZF9UdXJrfEVTVCBFRFQgQVNUfDUwIDQwIDQwfDAxMDEwMTAxMDEwMTJ8MUJRVDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHwzN2UyIiwiQW1lcmljYS9HdWF5YXF1aWx8RUNUfDUwfDB8fDI3ZTUiLCJBbWVyaWNhL0d1eWFuYXxHWVR8NDB8MHx8ODBlNCIsIkFtZXJpY2EvSGF2YW5hfENTVCBDRFR8NTAgNDB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRUjAgMXdvMCBVMDAgMXpjMCBVMDAgMXFNMCBPbzAgMXpjMCBPbzAgMXpjMCBPbzAgMXpjMCBSYzAgMXpjMCBPbzAgMXpjMCBPbzAgMXpjMCBPbzAgMXpjMCBPbzAgMXpjMHwyMWU1IiwiQW1lcmljYS9MYV9QYXp8Qk9UfDQwfDB8fDE5ZTUiLCJBbWVyaWNhL0xpbWF8UEVUfDUwfDB8fDExZTYiLCJBbWVyaWNhL01leGljb19DaXR5fENTVCBDRFR8NjAgNTB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUMxazAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxblgwIDE0cDAgMWxiMCAxNHAwIDFsYjAgMTRwMCAxbGIwIDE0cDAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxblgwIDE0cDAgMWxiMCAxNHAwIDFsYjB8MjBlNiIsIkFtZXJpY2EvTWV0bGFrYXRsYXxQU1QgQUtTVCBBS0RUfDgwIDkwIDgwfDAxMjEyMTIxMjEyMXwxUEFhMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHwxNGUyIiwiQW1lcmljYS9NaXF1ZWxvbnxQTVNUIFBNRFR8MzAgMjB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRUjAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHw2MWUyIiwiQW1lcmljYS9Nb250ZXZpZGVvfFVZU1QgVVlUfDIwIDMwfDAxMDEwMTAxMDEwMXwxQlFRMCAxbGQwIDE0bjAgMWxkMCAxNG4wIDFvMTAgMTF6MCAxbzEwIDExejAgMW8xMCAxMXowfDE3ZTUiLCJBbWVyaWNhL05vcm9uaGF8Rk5UfDIwfDB8fDMwZTIiLCJBbWVyaWNhL05vcnRoX0Rha290YS9CZXVsYWh8TVNUIE1EVCBDU1QgQ0RUfDcwIDYwIDYwIDUwfDAxMjMyMzIzMjMyMzIzMjMyMzIzMjMyfDFCUVYwIDF6YjAgT28wIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgUmQwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAiLCJBbWVyaWNhL1BhcmFtYXJpYm98U1JUfDMwfDB8fDI0ZTQiLCJBbWVyaWNhL1BvcnQtYXUtUHJpbmNlfEVTVCBFRFR8NTAgNDB8MDEwMTAxMDEwfDFHSTcwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjAgT3AwIDF6YjB8MjNlNSIsIkFtZXJpY2EvU2FudGlhZ298Q0xTVCBDTFR8MzAgNDB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMWYwIDFmQjAgMW5YMCBHMTAgMUVMMCBPcDAgMXpiMCBSZDAgMXduMCBSZDAgNDZuMCBBcDAgMU5iMCBBcDAgMU5iMCBBcDAgMU5iMCBBcDAgMU5iMCBBcDB8NjJlNSIsIkFtZXJpY2EvU2FvX1BhdWxvfEJSU1QgQlJUfDIwIDMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCSXEwIDF6ZDAgT24wIDF6ZDAgUmIwIDF6ZDAgTHowIDFDMTAgTHowIDFDMTAgT24wIDF6ZDAgT24wIDF6ZDAgT24wIDF6ZDAgT24wIDFDMTAgTHowIDFDMTAgTHowIDFDMTB8MjBlNiIsIkFtZXJpY2EvU2NvcmVzYnlzdW5kfEVHVCBFR1NUfDEwIDB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJXcDAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMHw0NTIiLCJBbWVyaWNhL1N0X0pvaG5zfE5TVCBORFR8M3UgMnV8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJRUHYgMXpiMCBPcDAgMXpjWCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBSZDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMCBPcDAgMXpiMHwxMWU0IiwiQW50YXJjdGljYS9DYXNleXxDQVNUIEFXU1R8LWIwIC04MHwwMTAxfDFCTjMwIDQwUDAgS0wwfDEwIiwiQW50YXJjdGljYS9EYXZpc3xEQVZUIERBVlR8LTUwIC03MHwwMTAxfDFCUHcwIDNXbjAgS04wfDcwIiwiQW50YXJjdGljYS9EdW1vbnREVXJ2aWxsZXxERFVUfC1hMHwwfHw4MCIsIkFudGFyY3RpY2EvTWFjcXVhcmllfEFFRFQgTUlTVHwtYjAgLWIwfDAxfDFDMTQwfDEiLCJBbnRhcmN0aWNhL01hd3NvbnxNQVdUfC01MHwwfHw2MCIsIlBhY2lmaWMvQXVja2xhbmR8TlpEVCBOWlNUfC1kMCAtYzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUMxMjAgMWEwMCAxZkEwIDFhMDAgMWZBMCAxY00wIDFmQTAgMWEwMCAxZkEwIDFhMDAgMWZBMCAxYTAwIDFmQTAgMWEwMCAxZkEwIDFhMDAgMWZBMCAxY00wIDFmQTAgMWEwMCAxZkEwIDFhMDB8MTRlNSIsIkFudGFyY3RpY2EvUm90aGVyYXxST1RUfDMwfDB8fDEzMCIsIkFudGFyY3RpY2EvU3lvd2F8U1lPVHwtMzB8MHx8MjAiLCJBbnRhcmN0aWNhL1Ryb2xsfFVUQyBDRVNUfDAgLTIwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8NDAiLCJBbnRhcmN0aWNhL1Zvc3Rva3xWT1NUfC02MHwwfHwyNSIsIkFzaWEvQmFnaGRhZHxBU1R8LTMwfDB8fDY2ZTUiLCJBc2lhL0FsbWF0eXxBTE1UfC02MHwwfHwxNWU1IiwiQXNpYS9BbW1hbnxFRVQgRUVTVHwtMjAgLTMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQlZ5MCAxcU0wIDExQTAgMW8wMCAxMUEwIDRiWDAgRGQwIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMXFNMHwyNWU1IiwiQXNpYS9BbmFkeXJ8QU5BVCBBTkFTVCBBTkFUfC1jMCAtYzAgLWIwfDAxMjB8MUJXZTAgMXFOMCBXTTB8MTNlMyIsIkFzaWEvQXF0b2JlfEFRVFR8LTUwfDB8fDI3ZTQiLCJBc2lhL0FzaGdhYmF0fFRNVHwtNTB8MHx8NDFlNCIsIkFzaWEvQmFrdXxBWlQgQVpTVHwtNDAgLTUwfDAxMDEwMTAxMDEwMTB8MUJXbzAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMW8wMHwyN2U1IiwiQXNpYS9CYW5na29rfElDVHwtNzB8MHx8MTVlNiIsIkFzaWEvQmFybmF1bHwrMDYgKzA3fC02MCAtNzB8MDEwMTAxfDFCV2swIDFxTTAgV00wIDhIejAgM3JkMCIsIkFzaWEvQmVpcnV0fEVFVCBFRVNUfC0yMCAtMzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJXbTAgMXFMMCBXTjAgMXFMMCBXTjAgMXFMMCAxMUIwIDFuWDAgMTFCMCAxblgwIDExQjAgMW5YMCAxMUIwIDFxTDAgV04wIDFxTDAgV04wIDFxTDAgMTFCMCAxblgwIDExQjAgMW5YMHwyMmU1IiwiQXNpYS9CaXNoa2VrfEtHVHwtNjB8MHx8ODdlNCIsIkFzaWEvQnJ1bmVpfEJOVHwtODB8MHx8NDJlNCIsIkFzaWEvS29sa2F0YXxJU1R8LTV1fDB8fDE1ZTYiLCJBc2lhL0NoaXRhfFlBS1QgWUFLU1QgWUFLVCBJUktUfC05MCAtYTAgLWEwIC04MHwwMTAyMzB8MUJXaDAgMXFNMCBXTTAgOEh6MCAzcmUwfDMzZTQiLCJBc2lhL0Nob2liYWxzYW58Q0hPVCBDSE9TVHwtODAgLTkwfDAxMDEwMTAxMDEwMTB8MU84RzAgMWNKMCAxY1AwIDFjSjAgMWNQMCAxZngwIDFjUDAgMWNKMCAxY1AwIDFjSjAgMWNQMCAxY0owfDM4ZTMiLCJBc2lhL1NoYW5naGFpfENTVHwtODB8MHx8MjNlNiIsIkFzaWEvRGhha2F8QkRUfC02MHwwfHwxNmU2IiwiQXNpYS9EYW1hc2N1c3xFRVQgRUVTVHwtMjAgLTMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMG0wIDFuWDAgMTFCMCAxblgwIDExQjAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxcUwwIFdOMCAxcUwwIFdOMCAxcUwwIDExQjAgMW5YMCAxMUIwIDFuWDAgMTFCMCAxblgwIDExQjAgMXFMMHwyNmU1IiwiQXNpYS9EaWxpfFRMVHwtOTB8MHx8MTllNCIsIkFzaWEvRHViYWl8R1NUfC00MHwwfHwzOWU1IiwiQXNpYS9EdXNoYW5iZXxUSlR8LTUwfDB8fDc2ZTQiLCJBc2lhL0dhemF8RUVUIEVFU1R8LTIwIC0zMHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQlZXMSBTS1ggMXhkMSBNS1ggMUFOMCAxYTAwIDFmQTAgMWNMMCAxY04wIDFuWDAgMTIxMCAxbnowIDEyMjAgMW55MCAxMjIwIDFxbTAgMTIyMCAxbnkwIDEyMjAgMW55MCAxMg==", "base64"));
  res.write(new Buffer("MjAgMW55MHwxOGU1IiwiQXNpYS9IZWJyb258RUVUIEVFU1R8LTIwIC0zMHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCVnkwIFRiMCAxeGQxIE1LWCBiQjAgY24wIDFjTjAgMWEwMCAxZkEwIDFjTDAgMWNOMCAxblgwIDEyMTAgMW56MCAxMjIwIDFueTAgMTIyMCAxcW0wIDEyMjAgMW55MCAxMjIwIDFueTAgMTIyMCAxbnkwfDI1ZTQiLCJBc2lhL0hvbmdfS29uZ3xIS1R8LTgwfDB8fDczZTUiLCJBc2lhL0hvdmR8SE9WVCBIT1ZTVHwtNzAgLTgwfDAxMDEwMTAxMDEwMTB8MU84SDAgMWNKMCAxY1AwIDFjSjAgMWNQMCAxZngwIDFjUDAgMWNKMCAxY1AwIDFjSjAgMWNQMCAxY0owfDgxZTMiLCJBc2lhL0lya3V0c2t8SVJLVCBJUktTVCBJUktUfC04MCAtOTAgLTkwfDAxMDIwfDFCV2kwIDFxTTAgV00wIDhIejB8NjBlNCIsIkV1cm9wZS9Jc3RhbmJ1bHxFRVQgRUVTVHwtMjAgLTMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgWGMwIDFxbzAgV00wIDFxTTAgMTFBMCAxbzAwIDEyMDAgMW5BMCAxMUEwIDF0QTAgVTAwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMHwxM2U2IiwiQXNpYS9KYWthcnRhfFdJQnwtNzB8MHx8MzFlNiIsIkFzaWEvSmF5YXB1cmF8V0lUfC05MHwwfHwyNmU0IiwiQXNpYS9KZXJ1c2FsZW18SVNUIElEVHwtMjAgLTMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCVkEwIDE3WDAgMWtwMCAxZHowIDFjMTAgMWFMMCAxZU4wIDFvTDAgMTBOMCAxb0wwIDEwTjAgMW9MMCAxME4wIDFyejAgVzEwIDFyejAgVzEwIDFyejAgMTBOMCAxb0wwIDEwTjAgMW9MMHw4MWU0IiwiQXNpYS9LYWJ1bHxBRlR8LTR1fDB8fDQ2ZTUiLCJBc2lhL0thbWNoYXRrYXxQRVRUIFBFVFNUIFBFVFR8LWMwIC1jMCAtYjB8MDEyMHwxQldlMCAxcU4wIFdNMHwxOGU0IiwiQXNpYS9LYXJhY2hpfFBLVHwtNTB8MHx8MjRlNiIsIkFzaWEvVXJ1bXFpfFhKVHwtNjB8MHx8MzJlNSIsIkFzaWEvS2F0aG1hbmR1fE5QVHwtNUp8MHx8MTJlNSIsIkFzaWEvS2hhbmR5Z2F8VkxBVCBWTEFTVCBWTEFUIFlBS1QgWUFLVHwtYTAgLWIwIC1iMCAtYTAgLTkwfDAxMDIzNHwxQldnMCAxcU0wIFdNMCAxN1YwIDd6RDB8NjZlMiIsIkFzaWEvS3Jhc25veWFyc2t8S1JBVCBLUkFTVCBLUkFUfC03MCAtODAgLTgwfDAxMDIwfDFCV2owIDFxTTAgV00wIDhIejB8MTBlNSIsIkFzaWEvS3VhbGFfTHVtcHVyfE1ZVHwtODB8MHx8NzFlNSIsIkFzaWEvTWFnYWRhbnxNQUdUIE1BR1NUIE1BR1QgTUFHVHwtYjAgLWMwIC1jMCAtYTB8MDEwMjN8MUJXZjAgMXFNMCBXTTAgOEh6MHw5NWUzIiwiQXNpYS9NYWthc3NhcnxXSVRBfC04MHwwfHwxNWU1IiwiQXNpYS9NYW5pbGF8UEhUfC04MHwwfHwyNGU2IiwiRXVyb3BlL0F0aGVuc3xFRVQgRUVTVHwtMjAgLTMwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8MzVlNSIsIkFzaWEvTm92b2t1em5ldHNrfEtSQVQgTk9WU1QgTk9WVCBOT1ZUfC03MCAtNzAgLTYwIC03MHwwMTIzMHwxQldqMCAxcU4wIFdNMCA4SHowfDU1ZTQiLCJBc2lhL05vdm9zaWJpcnNrfE5PVlQgTk9WU1QgTk9WVHwtNjAgLTcwIC03MHwwMTAyMHwxQldrMCAxcU0wIFdNMCA4SHowfDE1ZTUiLCJBc2lhL09tc2t8T01TVCBPTVNTVCBPTVNUfC02MCAtNzAgLTcwfDAxMDIwfDFCV2swIDFxTTAgV00wIDhIejB8MTJlNSIsIkFzaWEvT3JhbHxPUkFUfC01MHwwfHwyN2U0IiwiQXNpYS9QeW9uZ3lhbmd8S1NUIEtTVHwtOTAgLTh1fDAxfDFQNEQwfDI5ZTUiLCJBc2lhL1F5enlsb3JkYXxRWVpUfC02MHwwfHw3M2U0IiwiQXNpYS9SYW5nb29ufE1NVHwtNnV8MHx8NDhlNSIsIkFzaWEvU2FraGFsaW58U0FLVCBTQUtTVCBTQUtUfC1hMCAtYjAgLWIwfDAxMDIwMnwxQldnMCAxcU0wIFdNMCA4SHowIDNyZDB8NThlNCIsIkFzaWEvVGFzaGtlbnR8VVpUfC01MHwwfHwyM2U1IiwiQXNpYS9TZW91bHxLU1R8LTkwfDB8fDIzZTYiLCJBc2lhL1NpbmdhcG9yZXxTR1R8LTgwfDB8fDU2ZTUiLCJBc2lhL1NyZWRuZWtvbHltc2t8TUFHVCBNQUdTVCBNQUdUIFNSRVR8LWIwIC1jMCAtYzAgLWIwfDAxMDIzfDFCV2YwIDFxTTAgV00wIDhIejB8MzVlMiIsIkFzaWEvVGJpbGlzaXxHRVR8LTQwfDB8fDExZTUiLCJBc2lhL1RlaHJhbnxJUlNUIElSRFR8LTN1IC00dXwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQlRVdSAxZHowIDFjcDAgMWR6MCAxY3AwIDFkejAgMWNOMCAxZHowIDFjcDAgMWR6MCAxY3AwIDFkejAgMWNwMCAxZHowIDFjTjAgMWR6MCAxY3AwIDFkejAgMWNwMCAxZHowIDFjcDAgMWR6MHwxNGU2IiwiQXNpYS9UaGltcGh1fEJUVHwtNjB8MHx8NzllMyIsIkFzaWEvVG9reW98SlNUfC05MHwwfHwzOGU2IiwiQXNpYS9VbGFhbmJhYXRhcnxVTEFUIFVMQVNUfC04MCAtOTB8MDEwMTAxMDEwMTAxMHwxTzhHMCAxY0owIDFjUDAgMWNKMCAxY1AwIDFmeDAgMWNQMCAxY0owIDFjUDAgMWNKMCAxY1AwIDFjSjB8MTJlNSIsIkFzaWEvVXN0LU5lcmF8TUFHVCBNQUdTVCBNQUdUIFZMQVQgVkxBVHwtYjAgLWMwIC1jMCAtYjAgLWEwfDAxMDIzNHwxQldmMCAxcU0wIFdNMCAxN1YwIDd6RDB8NjVlMiIsIkFzaWEvVmxhZGl2b3N0b2t8VkxBVCBWTEFTVCBWTEFUfC1hMCAtYjAgLWIwfDAxMDIwfDFCV2cwIDFxTTAgV00wIDhIejB8NjBlNCIsIkFzaWEvWWFrdXRza3xZQUtUIFlBS1NUIFlBS1R8LTkwIC1hMCAtYTB8MDEwMjB8MUJXaDAgMXFNMCBXTTAgOEh6MHwyOGU0IiwiQXNpYS9ZZWthdGVyaW5idXJnfFlFS1QgWUVLU1QgWUVLVHwtNTAgLTYwIC02MHwwMTAyMHwxQldsMCAxcU0wIFdNMCA4SHowfDE0ZTUiLCJBc2lhL1llcmV2YW58QU1UIEFNU1R8LTQwIC01MHwwMTAxMHwxQldtMCAxcU0wIFdNMCAxcU0wfDEzZTUiLCJBdGxhbnRpYy9Bem9yZXN8QVpPVCBBWk9TVHwxMCAwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8MjVlNCIsIkV1cm9wZS9MaXNib258V0VUIFdFU1R8MCAtMTB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJXcDAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMHwyN2U1IiwiQXRsYW50aWMvQ2FwZV9WZXJkZXxDVlR8MTB8MHx8NTBlNCIsIkF0bGFudGljL1NvdXRoX0dlb3JnaWF8R1NUfDIwfDB8fDMwIiwiQXRsYW50aWMvU3RhbmxleXxGS1NUIEZLVHwzMCA0MHwwMTB8MUM2UjAgVTEwfDIxZTIiLCJBdXN0cmFsaWEvU3lkbmV5fEFFRFQgQUVTVHwtYjAgLWEwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMTQwIDFjTTAgMWNNMCAxY00wIDFjTTAgMWZBMCAxY00wIDFjTTAgMWNNMCAxY00wIDFjTTAgMWNNMCAxY00wIDFjTTAgMWNNMCAxY00wIDFjTTAgMWZBMCAxY00wIDFjTTAgMWNNMCAxY00wfDQwZTUiLCJBdXN0cmFsaWEvQWRlbGFpZGV8QUNEVCBBQ1NUfC1hdSAtOXV8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUMxNHUgMWNNMCAxY00wIDFjTTAgMWNNMCAxZkEwIDFjTTAgMWNNMCAxY00wIDFjTTAgMWNNMCAxY00wIDFjTTAgMWNNMCAxY00wIDFjTTAgMWNNMCAxZkEwIDFjTTAgMWNNMCAxY00wIDFjTTB8MTFlNSIsIkF1c3RyYWxpYS9CcmlzYmFuZXxBRVNUfC1hMHwwfHwyMGU1IiwiQXVzdHJhbGlhL0RhcndpbnxBQ1NUfC05dXwwfHwxMmU0IiwiQXVzdHJhbGlhL0V1Y2xhfEFDV1NUfC04SnwwfHwzNjgiLCJBdXN0cmFsaWEvTG9yZF9Ib3dlfExIRFQgTEhTVHwtYjAgLWF1fDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMTMwIDFjTXUgMWNMdSAxY011IDFjTHUgMWZBdSAxY0x1IDFjTXUgMWNMdSAxY011IDFjTHUgMWNNdSAxY0x1IDFjTXUgMWNMdSAxY011IDFjTHUgMWZBdSAxY0x1IDFjTXUgMWNMdSAxY011fDM0NyIsIkF1c3RyYWxpYS9QZXJ0aHxBV1NUfC04MHwwfHwxOGU1IiwiUGFjaWZpYy9FYXN0ZXJ8RUFTU1QgRUFTVHw1MCA2MHwwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUMxZjAgMWZCMCAxblgwIEcxMCAxRUwwIE9wMCAxemIwIFJkMCAxd24wIFJkMCA0Nm4wIEFwMCAxTmIwIEFwMCAxTmIwIEFwMCAxTmIwIEFwMCAxTmIwIEFwMHwzMGUyIiwiRXVyb3BlL0R1YmxpbnxHTVQgSVNUfDAgLTEwfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDB8MTJlNSIsIkV0Yy9HTVQrMXxHTVQrMXwxMHwwfCIsIkV0Yy9HTVQrMTB8R01UKzEwfGEwfDB8IiwiRXRjL0dNVCsxMXxHTVQrMTF8YjB8MHwiLCJFdGMvR01UKzEyfEdNVCsxMnxjMHwwfCIsIkV0Yy9HTVQrMnxHTVQrMnwyMHwwfCIsIkV0Yy9HTVQrM3xHTVQrM3wzMHwwfCIsIkV0Yy9HTVQrNHxHTVQrNHw0MHwwfCIsIkV0Yy9HTVQrNXxHTVQrNXw1MHwwfCIsIkV0Yy9HTVQrNnxHTVQrNnw2MHwwfCIsIkV0Yy9HTVQrN3xHTVQrN3w3MHwwfCIsIkV0Yy9HTVQrOHxHTVQrOHw4MHwwfCIsIkV0Yy9HTVQrOXxHTVQrOXw5MHwwfCIsIkV0Yy9HTVQtMXxHTVQtMXwtMTB8MHwiLCJFdGMvR01ULTEwfEdNVC0xMHwtYTB8MHwiLCJFdGMvR01ULTExfEdNVC0xMXwtYjB8MHwiLCJFdGMvR01ULTEyfEdNVC0xMnwtYzB8MHwiLCJFdGMvR01ULTEzfEdNVC0xM3wtZDB8MHwiLCJFdGMvR01ULTE0fEdNVC0xNHwtZTB8MHwiLCJFdGMvR01ULTJ8R01ULTJ8LTIwfDB8IiwiRXRjL0dNVC0zfEdNVC0zfC0zMHwwfCIsIkV0Yy9HTVQtNHxHTVQtNHwtNDB8MHwiLCJFdGMvR01ULTV8R01ULTV8LTUwfDB8IiwiRXRjL0dNVC02fEdNVC02fC02MHwwfCIsIkV0Yy9HTVQtN3xHTVQtN3wtNzB8MHwiLCJFdGMvR01ULTh8R01ULTh8LTgwfDB8IiwiRXRjL0dNVC05fEdNVC05fC05MHwwfCIsIkV0Yy9VQ1R8VUNUfDB8MHwiLCJFdGMvVVRDfFVUQ3wwfDB8IiwiRXVyb3BlL0FzdHJha2hhbnwrMDMgKzA0fC0zMCAtNDB8MDEwMTAxfDFCV24wIDFxTTAgV00wIDhIejAgM3JkMCIsIkV1cm9wZS9Mb25kb258R01UIEJTVHwwIC0xMHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQldwMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwfDEwZTYiLCJFdXJvcGUvQ2hpc2luYXV8RUVUIEVFU1R8LTIwIC0zMHwwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMHwxQldvMCAxcU0wIFdNMCAxcU0wIFdNMCAxcU0wIDExQTAgMW8wMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwfDY3ZTQiLCJFdXJvcGUvS2FsaW5pbmdyYWR8RUVUIEVFU1QgRkVUfC0yMCAtMzAgLTMwfDAxMDIwfDFCV28wIDFxTTAgV00wIDhIejB8NDRlNCIsIkV1cm9wZS9NaW5za3xFRVQgRUVTVCBGRVQgTVNLfC0yMCAtMzAgLTMwIC0zMHwwMTAyM3wxQldvMCAxcU0wIFdNMCA4SHkwfDE5ZTUiLCJFdXJvcGUvTW9zY293fE1TSyBNU0QgTVNLfC0zMCAtNDAgLTQwfDAxMDIwfDFCV24wIDFxTTAgV00wIDhIejB8MTZlNiIsIkV1cm9wZS9TYW1hcmF8U0FNVCBTQU1TVCBTQU1UfC00MCAtNDAgLTMwfDAxMjB8MUJXbTAgMXFOMCBXTTB8MTJlNSIsIkV1cm9wZS9TaW1mZXJvcG9sfEVFVCBFRVNUIE1TSyBNU0t8LTIwIC0zMCAtNDAgLTMwfDAxMDEwMTAxMDIzfDFCV3AwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExejAgMW5XMHwzM2U0IiwiUGFjaWZpYy9Ib25vbHVsdXxIU1R8YTB8MHx8MzdlNCIsIkluZGlhbi9DaGFnb3N8SU9UfC02MHwwfHwzMGUyIiwiSW5kaWFuL0NocmlzdG1hc3xDWFR8LTcwfDB8fDIxZTIiLCJJbmRpYW4vQ29jb3N8Q0NUfC02dXwwfHw1OTYiLCJJbmRpYW4vS2VyZ3VlbGVufFRGVHwtNTB8MHx8MTMwIiwiSW5kaWFuL01haGV8U0NUfC00MHwwfHw3OWUzIiwiSW5kaWFuL01hbGRpdmVzfE1WVHwtNTB8MHx8MzVlNCIsIkluZGlhbi9NYXVyaXRpdXN8TVVUfC00MHwwfHwxNWU0IiwiSW5kaWFuL1JldW5pb258UkVUfC00MHwwfHw4NGU0IiwiUGFjaWZpYy9NYWp1cm98TUhUfC1jMHwwfHwyOGUzIiwiTUVUfE1FVCBNRVNUfC0xMCAtMjB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJXcDAgMXFNMCBXTTAgMXFNMCBXTTAgMXFNMCAxMUEwIDFvMDAgMTFBMCAxbzAwIDExQTAgMW8wMCAxMUEwIDFxTTAgV00wIDFxTTAgV00wIDFxTTAgMTFBMCAxbzAwIDExQTAgMW8wMCIsIlBhY2lmaWMvQ2hhdGhhbXxDSEFEVCBDSEFTVHwtZEogLWNKfDAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwfDFDMTIwIDFhMDAgMWZBMCAxYTAwIDFmQTAgMWNNMCAxZkEwIDFhMDAgMWZBMCAxYTAwIDFmQTAgMWEwMCAxZkEwIDFhMDAgMWZBMCAxYTAwIDFmQTAgMWNNMCAxZkEwIDFhMDAgMWZBMCAxYTAwfDYwMCIsIlBhY2lmaWMvQXBpYXxTU1QgU0RUIFdTRFQgV1NTVHxiMCBhMCAtZTAgLWQwfDAxMDEyMzIzMjMyMzIzMjMyMzIzMjMyfDFEYm4wIDFmZjAgMWEwMCBDSTAgQVEwIDFjTTAgMWZBMCAxYTAwIDFmQTAgMWEwMCAxZkEwIDFhMDAgMWZBMCAxYTAwIDFmQTAgMWEwMCAxZkEwIDFjTTAgMWZBMCAxYTAwIDFmQTAgMWEwMHwzN2UzIiwiUGFjaWZpYy9Cb3VnYWludmlsbGV8UEdUIEJTVHwtYTAgLWIwfDAxfDFOd0UwfDE4ZTQiLCJQYWNpZmljL0NodXVrfENIVVR8LWEwfDB8fDQ5ZTMiLCJQYWNpZmljL0VmYXRlfFZVVHwtYjB8MHx8NjZlMyIsIlBhY2lmaWMvRW5kZXJidXJ5fFBIT1R8LWQwfDB8fDEiLCJQYWNpZmljL0Zha2FvZm98VEtUIFRLVHxiMCAtZDB8MDF8MUdmbjB8NDgzIiwiUGFjaWZpYy9GaWppfEZKU1QgRkpUfC1kMCAtYzB8MDEwMTAxMDEwMTAxMDEwMTAxMDEwMTB8MUJXZTAgMW8wMCBSYzAgMXdvMCBBbzAgMU5jMCBBbzAgMVEwMCB4ejAgMVNOMCB1TTAgMVNNMCB1TTAgMVZBMCBzMDAgMVZBMCB1TTAgMVNNMCB1TTAgMVNNMCB1TTAgMVNNMHw4OGU0IiwiUGFjaWZpYy9GdW5hZnV0aXxUVlR8LWMwfDB8fDQ1ZTIiLCJQYWNpZmljL0dhbGFwYWdvc3xHQUxUfDYwfDB8fDI1ZTMiLCJQYWNpZmljL0dhbWJpZXJ8R0FNVHw5MHwwfHwxMjUiLCJQYWNpZmljL0d1YWRhbGNhbmFsfFNCVHwtYjB8MHx8MTFlNCIsIlBhY2lmaWMvR3VhbXxDaFNUfC1hMHwwfHwxN2U0IiwiUGFjaWZpYy9LaXJpdGltYXRpfExJTlR8LWUwfDB8fDUxZTIiLCJQYWNpZmljL0tvc3JhZXxLT1NUfC1iMHwwfHw2NmUyIiwiUGFjaWZpYy9NYXJxdWVzYXN8TUFSVHw5dXwwfHw4NmUyIiwiUGFjaWZpYy9QYWdvX1BhZ298U1NUfGIwfDB8fDM3ZTIiLCJQYWNpZmljL05hdXJ1fE5SVHwtYzB8MHx8MTBlMyIsIlBhY2lmaWMvTml1ZXxOVVR8YjB8MHx8MTJlMiIsIlBhY2lmaWMvTm9yZm9sa3xORlQgTkZUfC1idSAtYjB8MDF8MVBvQ3V8MjVlNCIsIlBhY2lmaWMvTm91bWVhfE5DVHwtYjB8MHx8OThlMyIsIlBhY2lmaWMvUGFsYXV8UFdUfC05MHwwfHwyMWUzIiwiUGFjaWZpYy9QaXRjYWlybnxQU1R8ODB8MHx8NTYiLCJQYWNpZmljL1BvaG5wZWl8UE9OVHwtYjB8MHx8MzRlMyIsIlBhY2lmaWMvUG9ydF9Nb3Jlc2J5fFBHVHwtYTB8MHx8MjVlNCIsIlBhY2lmaWMvUmFyb3RvbmdhfENLVHxhMHwwfHwxM2UzIiwiUGFjaWZpYy9UYWhpdGl8VEFIVHxhMHwwfHwxOGU0IiwiUGFjaWZpYy9UYXJhd2F8R0lMVHwtYzB8MHx8MjllMyIsIlBhY2lmaWMvVG9uZ2F0YXB1fFRPVHwtZDB8MHx8NzVlMyIsIlBhY2lmaWMvV2FrZXxXQUtUfC1jMHwwfHwxNmUzIiwiUGFjaWZpYy9XYWxsaXN8V0ZUfC1jMHwwfHw5NCJdLGxpbmtzOlsiQWZyaWNhL0FiaWRqYW58QWZyaWNhL0FjY3JhIiwiQWZyaWNhL0FiaWRqYW58QWZyaWNhL0JhbWFrbyIsIkFmcmljYS9BYmlkamFufEFmcmljYS9CYW5qdWwiLCJBZnJpY2EvQWJpZGphbnxBZnJpY2EvQmlzc2F1IiwiQWZyaWNhL0FiaWRqYW58QWZyaWNhL0NvbmFrcnkiLCJBZnJpY2EvQWJpZGphbnxBZnJpY2EvRGFrYXIiLCJBZnJpY2EvQWJpZGphbnxBZnJpY2EvRnJlZXRvd24iLCJBZnJpY2EvQWJpZGphbnxBZnJpY2EvTG9tZSIsIkFmcmljYS9BYmlkamFufEFmcmljYS9Nb25yb3ZpYSIsIkFmcmljYS9BYmlkamFufEFmcmljYS9Ob3Vha2Nob3R0IiwiQWZyaWNhL0FiaWRqYW58QWZyaWNhL091YWdhZG91Z291IiwiQWZyaWNhL0FiaWRqYW58QWZyaWNhL1Nhb19Ub21lIiwiQWZyaWNhL0FiaWRqYW58QWZyaWNhL1RpbWJ1a3R1IiwiQWZyaWNhL0FiaWRqYW58QW1lcmljYS9EYW5tYXJrc2hhdm4iLCJBZnJpY2EvQWJpZGphbnxBdGxhbnRpYy9SZXlramF2aWsiLCJBZnJpY2EvQWJpZGphbnxBdGxhbnRpYy9TdF9IZWxlbmEiLCJBZnJpY2EvQWJpZGphbnxFdGMvR01UIiwiQWZyaWNhL0FiaWRqYW58RXRjL0dNVCswIiwiQWZyaWNhL0FiaWRqYW58RXRjL0dNVC0wIiwiQWZyaWNhL0FiaWRqYW58RXRjL0dNVDAiLCJBZnJpY2EvQWJpZGphbnxFdGMvR3JlZW53aWNoIiwiQWZyaWNhL0FiaWRqYW58R01UIiwiQWZyaWNhL0FiaWRqYW58R01UKzAiLCJBZnJpY2EvQWJpZGphbnxHTVQtMCIsIkFmcmljYS9BYmlkamFufEdNVDAiLCJBZnJpY2EvQWJpZGphbnxHcmVlbndpY2giLCJBZnJpY2EvQWJpZGphbnxJY2VsYW5kIiwiQWZyaWNhL0FsZ2llcnN8QWZyaWNhL1R1bmlzIiwiQWZyaWNhL0NhaXJvfEVneXB0IiwiQWZyaWNhL0Nhc2FibGFuY2F8QWZyaWNhL0VsX0FhaXVuIiwiQWZyaWNhL0pvaGFubmVzYnVyZ3xBZnJpY2EvTWFzZXJ1IiwiQWZyaWNhL0pvaGFubmVzYnVyZ3xBZnJpY2EvTWJhYmFuZSIsIkFmcmljYS9LaGFydG91bXxBZnJpY2EvQWRkaXNfQWJhYmEiLCJBZnJpY2EvS2hhcnRvdW18QWZyaWNhL0FzbWFyYSIsIkFmcmljYS9LaGFydG91bXxBZnJpY2EvQXNtZXJhIiwiQWZyaWNhL0toYXJ0b3VtfEFmcmljYS9EYXJfZXNfU2FsYWFtIiwiQWZyaWNhL0toYXJ0b3VtfEFmcmljYS9Eamlib3V0aSIsIkFmcmljYS9LaGFydG91bXxBZnJpY2EvSnViYSIsIkFmcmljYS9LaGFydG91bXxBZnJpY2EvS2FtcGFsYSIsIkFmcmljYS9LaGFydG91bXxBZnJpY2EvTW9nYWRpc2h1IiwiQWZyaWNhL0toYXJ0b3VtfEFmcmljYS9OYWlyb2JpIiwiQWZyaWNhL0toYXJ0b3VtfEluZGlhbi9BbnRhbmFuYXJpdm8iLCJBZnJpY2EvS2hhcnRvdW18SW5kaWFuL0NvbW9ybyIsIkFmcmljYS9LaGFydG91bXxJbmRpYW4vTWF5b3R0ZSIsIkFmcmljYS9MYWdvc3xBZnJpY2EvQmFuZ3VpIiwiQWZyaWNhL0xhZ29zfEFmcmljYS9CcmF6emF2aWxsZSIsIkFmcmljYS9MYWdvc3xBZnJpY2EvRG91YWxhIiwiQWZyaWNhL0xhZ29zfEFmcmljYS9LaW5zaGFzYSIsIkFmcmljYS9MYWdvc3xBZnJpY2EvTGlicmV2aWxsZSIsIkFmcmljYS9MYWdvc3xBZnJpY2EvTHVhbmRhIiwiQWZyaWNhL0xhZ29zfEFmcmljYS9NYWxhYm8iLCJBZnJpY2EvTGFnb3N8QWZyaWNhL05kamFtZW5hIiwiQWZyaWNhL0xhZ29zfEFmcmljYS9OaWFtZXkiLCJBZnJpY2EvTGFnb3N8QWZyaWNhL1BvcnRvLU5vdm8iLCJBZnJpY2EvTWFwdXRvfEFmcmljYS9CbGFudHlyZSIsIkFmcmljYS9NYXB1dG98QWZyaWNhL0J1anVtYnVyYSIsIkFmcmljYS9NYXB1dG98QWZyaWNhL0dhYm9yb25lIiwiQWZyaWNhL01hcHV0b3xBZnJpY2EvSGFyYXJlIiwiQWZyaWNhL01hcHV0b3xBZnJpY2EvS2lnYWxpIiwiQWZyaWNhL01hcHV0b3xBZnJpY2EvTHVidW1iYXNoaSIsIkFmcmljYS9NYXB1dG98QWZyaWNhL0x1c2FrYSIsIkFmcmljYS9Ucmlwb2xpfExpYnlhIiwiQW1lcmljYS9BZGFrfEFtZXJpY2EvQXRrYSIsIkFtZXJpY2EvQWRha3xVUy9BbGV1dGlhbiIsIkFtZXJpY2EvQW5jaG9yYWdlfEFtZXJpY2EvSnVuZWF1IiwiQW1lcmljYS9BbmNob3JhZ2V8QW1lcmljYS9Ob21lIiwiQW1lcmljYS9BbmNob3JhZ2V8QW1lcmljYS9TaXRrYSIsIkFtZXJpY2EvQW5jaG9yYWdlfEFtZXJpY2EvWWFrdXRhdCIsIkFtZXJpY2EvQW5jaG9yYWdlfFVTL0FsYXNrYSIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9DYXRhbWFyY2EiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9BcmdlbnRpbmEvQ29tb2RSaXZhZGF2aWEiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9BcmdlbnRpbmEvQ29yZG9iYSIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9KdWp1eSIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9MYV9SaW9qYSIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9NZW5kb3phIiwiQW1lcmljYS9BcmdlbnRpbmEvQnVlbm9zX0FpcmVzfEFtZXJpY2EvQXJnZW50aW5hL1Jpb19HYWxsZWdvcyIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9TYWx0YSIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9TYW5fSnVhbiIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9TYW5fTHVpcyIsIkFtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlc3xBbWVyaWNhL0FyZ2VudGluYS9UdWN1bWFuIiwiQW1lcmljYS9BcmdlbnRpbmEvQnVlbm9zX0FpcmVzfEFtZXJpY2EvQXJnZW50aW5hL1VzaHVhaWEiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9CdWVub3NfQWlyZXMiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9DYXRhbWFyY2EiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9Db3Jkb2JhIiwiQW1lcmljYS9BcmdlbnRpbmEvQnVlbm9zX0FpcmVzfEFtZXJpY2EvSnVqdXkiLCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXN8QW1lcmljYS9NZW5kb3phIiwiQW1lcmljYS9BcmdlbnRpbmEvQnVlbm9zX0FpcmVzfEFtZXJpY2EvUm9zYXJpbyIsIkFtZXJpY2EvQ2FtcG9fR3JhbmRlfEFtZXJpY2EvQ3VpYWJhIiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvSW5kaWFuYS9Lbm94IiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvSW5kaWFuYS9UZWxsX0NpdHkiLCJBbWVyaWNhL0NoaWNhZ298QW1lcmljYS9Lbm94X0lOIiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvTWF0YW1vcm9zIiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvTWVub21pbmVlIiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvTm9ydGhfRGFrb3RhL0NlbnRlciIsIkFtZXJpY2EvQ2hpY2Fnb3xBbWVyaWNhL05vcnRoX0Rha290YS9OZXdfU2FsZW0iLCJBbWVyaWNhL0NoaWNhZ298QW1lcmljYS9SYWlueV9SaXZlciIsIkFtZXJpY2EvQ2hpY2Fnb3xBbWVyaWNhL1Jhbmtpbl9JbmxldCIsIkFtZXJpY2EvQ2hpY2Fnb3xBbWVyaWNhL1Jlc29sdXRlIiwiQW1lcmljYS9DaGljYWdvfEFtZXJpY2EvV2lubmlwZWciLCJBbWVyaWNhL0NoaWNhZ298Q1NUNkNEVCIsIkFtZXJpY2EvQ2hpY2Fnb3xDYW5hZGEvQ2VudHJhbCIsIkFtZXJpY2EvQ2hpY2Fnb3xVUy9DZW50cmFsIiwiQW1lcmljYS9DaGljYWdvfFVTL0luZGlhbmEtU3RhcmtlIiwiQW1lcmljYS9DaGlodWFodWF8QW1lcmljYS9NYXphdGxhbiIsIkFtZXJpY2EvQ2hpaHVhaHVhfE1leGljby9CYWphU3VyIiwiQW1lcmljYS9EZW52ZXJ8QW1lcmljYS9Cb2lzZSIsIkFtZXJpY2EvRGVudmVyfEFtZXJpY2EvQ2FtYnJpZGdlX0JheSIsIkFtZXJpY2EvRGVudmVyfEFtZXJpY2EvRWRtb250b24iLCJBbWVyaWNhL0RlbnZlcnxBbWVyaWNhL0ludXZpayIsIkFtZXJpY2EvRGVudmVyfEFtZXJpY2EvT2ppbmFnYSIsIkFtZXJpY2EvRGVudmVyfEFtZXJpY2EvU2hpcHJvY2siLCJBbWVyaWNhL0RlbnZlcnxBbWVyaWNhL1llbGxvd2tuaWZlIiwiQW1lcmljYS9EZW52ZXJ8Q2FuYWRhL01vdW50YWluIiwiQW1lcmljYS9EZW52ZXJ8TVNUN01EVCIsIkFtZXJpY2EvRGVudmVyfE5hdmFqbyIsIkFtZXJpY2EvRGVudmVyfFVTL01vdW50YWluIiwiQW1lcmljYS9Gb3J0YWxlemF8QW1lcmljYS9CZWxlbSIsIkFtZXJpY2EvRm9ydGFsZXphfEFtZXJpY2EvTWFjZWlvIiwiQW1lcmljYS9Gb3J0YWxlemF8QW1lcmljYS9SZWNpZmUiLCJBbWVyaWNhL0ZvcnRhbGV6YXxBbWVyaWNhL1NhbnRhcmVtIiwiQW1lcmljYS9IYWxpZmF4fEFtZXJpY2EvR2xhY2VfQmF5IiwiQW1lcmljYS9IYWxpZmF4fEFtZXJpY2EvTW9uY3RvbiIsIkFtZXJpY2EvSGFsaWZheHxBbWVyaWNhL1RodWxlIiwiQW1lcmljYS9IYWxpZmF4fEF0bGFudGljL0Jlcm11ZGEiLCJBbWVyaWNhL0hhbGlmYXh8Q2FuYWRhL0F0bGFudGljIiwiQW1lcmljYS9IYXZhbmF8Q3ViYSIsIkFtZXJpY2EvTG9zX0FuZ2VsZXN8QW1lcmljYS9EYXdzb24iLCJBbWVyaWNhL0xvc19BbmdlbGVzfEFtZXJpY2EvRW5zZW5hZGEiLCJBbWVyaWNhL0xvc19BbmdlbGVzfEFtZXJpY2EvU2FudGFfSXNhYmVsIiwiQW1lcmljYS9Mb3NfQW5nZWxlc3xBbWVyaWNhL1RpanVhbmEiLCJBbWVyaWNhL0xvc19BbmdlbGVzfEFtZXJpY2EvVmFuY291dmVyIiwiQW1lcmljYS9Mb3NfQW5nZWxlc3xBbWVyaWNhL1doaXRlaG9yc2UiLCJBbWVyaWNhL0xvc19BbmdlbGVzfENhbmFkYS9QYWNpZmljIiwiQW1lcmljYS9Mb3NfQW5nZWxlc3xDYW5hZGEvWXVrb24iLCJBbWVyaWNhL0xvc19BbmdlbGVzfE1leGljby9CYWphTm9ydGUiLCJBbWVyaWNhL0xvc19BbmdlbGVzfFBTVDhQRFQiLCJBbWVyaWNhL0xvc19BbmdlbGVzfFVTL1BhY2lmaWMiLCJBbWVyaWNhL0xvc19BbmdlbGVzfFVTL1BhY2lmaWMtTmV3IiwiQW1lcmljYS9NYW5hZ3VhfEFtZXJpY2EvQmVsaXplIiwiQW1lcmljYS9NYW5hZ3VhfEFtZXJpY2EvQ29zdGFfUmljYSIsIkFtZXJpY2EvTWFuYWd1YXxBbWVyaWNhL0VsX1NhbHZhZG9yIiwiQW1lcmljYS9NYW5hZ3VhfEFtZXJpY2EvR3VhdGVtYWxhIiwiQW1lcmljYS9NYW5hZ3VhfEFtZXJpY2EvUmVnaW5hIiwiQW1lcmljYS9NYW5hZ3VhfEFtZXJpY2EvU3dpZnRfQ3VycmVudCIsIkFtZXJpY2EvTWFuYWd1YXxBbWVyaWNhL1RlZ3VjaWdhbHBhIiwiQW1lcmljYS9NYW5hZ3VhfENhbmFkYS9FYXN0LVNhc2thdGNoZXdhbiIsIkFtZXJpY2EvTWFuYWd1YXxDYW5hZGEvU2Fza2F0Y2hld2FuIiwiQW1lcmljYS9NYW5hdXN8QW1lcmljYS9Cb2FfVmlzdGEiLCJBbWVyaWNhL01hbmF1c3xBbWVyaWNhL1BvcnRvX1ZlbGhvIiwiQW1lcmljYS9NYW5hdXN8QnJhemlsL1dlc3QiLCJBbWVyaWNhL01leGljb19DaXR5fEFtZXJpY2EvTWVyaWRhIiwiQW1lcmljYS9NZXhpY29fQ2l0eXxBbWVyaWNhL01vbnRlcnJleSIsIkFtZXJpY2EvTWV4aWNvX0NpdHl8TWV4aWNvL0dlbmVyYWwiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvRGV0cm9pdCIsIkFtZXJpY2EvTmV3X1lvcmt8QW1lcmljYS9Gb3J0X1dheW5lIiwiQW1lcmljYS9OZXdfWW9ya3xBbWVyaWNhL0luZGlhbmEvSW5kaWFuYXBvbGlzIiwiQW1lcmljYS9OZXdfWW9ya3xBbWVyaWNhL0luZGlhbmEvTWFyZW5nbyIsIkFtZXJpY2EvTmV3X1lvcmt8QW1lcmljYS9JbmRpYW5hL1BldGVyc2J1cmciLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvSW5kaWFuYS9WZXZheSIsIkFtZXJpY2EvTmV3X1lvcmt8QW1lcmljYS9JbmRpYW5hL1ZpbmNlbm5lcyIsIkFtZXJpY2EvTmV3X1lvcmt8QW1lcmljYS9JbmRpYW5hL1dpbmFtYWMiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvSW5kaWFuYXBvbGlzIiwiQW1lcmljYS9OZXdfWW9ya3xBbWVyaWNhL0lxYWx1aXQiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvS2VudHVja3kvTG91aXN2aWxsZSIsIkFtZXJpY2EvTmV3X1lvcmt8QW1lcmljYS9LZW50dWNreS9Nb250aWNlbGxvIiwiQW1lcmljYS9OZXdfWW9ya3xBbWVyaWNhL0xvdWlzdmlsbGUiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvTW9udHJlYWwiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvTmFzc2F1IiwiQW1lcmljYS9OZXdfWW9ya3xBbWVyaWNhL05pcGlnb24iLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvUGFuZ25pcnR1bmciLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvVGh1bmRlcl9CYXkiLCJBbWVyaWNhL05ld19Zb3JrfEFtZXJpY2EvVG9yb250byIsIkFtZXJpY2EvTmV3X1lvcmt8Q2FuYWRhL0Vhc3Rlcm4iLCJBbWVyaWNhL05ld19Zb3JrfEVTVDVFRFQiLCJBbWVyaWNhL05ld19Zb3JrfFVTL0Vhc3QtSW5kaWFuYSIsIkFtZXJpY2EvTmV3X1lvcmt8VVMvRWFzdGVybiIsIkFtZXJpY2EvTmV3X1lvcmt8VVMvTWljaGlnYW4iLCJBbWVyaWNhL05vcm9uaGF8QnJhemlsL0RlTm9yb25oYSIsIkFtZXJpY2EvUGFuYW1hfEFtZXJpY2EvQXRpa29rYW4iLCJBbWVyaWNhL1BhbmFtYXxBbWVyaWNhL0NheW1hbiIsIkFtZXJpY2EvUGFuYW1hfEFtZXJpY2EvQ29yYWxfSGFyYm91ciIsIkFtZXJpY2EvUGFuYW1hfEFtZXJpY2EvSmFtYWljYSIsIkFtZXJpY2EvUGFuYW1hfEVTVCIsIkFtZXJpY2EvUGFuYW1hfEphbWFpY2EiLCJBbWVyaWNhL1Bob2VuaXh8QW1lcmljYS9DcmVzdG9uIiwiQW1lcmljYS9QaG9lbml4fEFtZXJpY2EvRGF3c29uX0NyZWVrIiwiQW1lcmljYS9QaG9lbml4fEFtZXJpY2EvSGVybW9zaWxsbyIsIkFtZXJpY2EvUGhvZW5peHxNU1QiLCJBbWVyaWNhL1Bob2VuaXh8VVMvQXJpem9uYSIsIkFtZXJpY2EvUmlvX0JyYW5jb3xBbWVyaWNhL0VpcnVuZXBlIiwiQW1lcmljYS9SaW9fQnJhbmNvfEFtZXJpY2EvUG9ydG9fQWNyZSIsIkFtZXJpY2EvUmlvX0JyYW5jb3xCcmF6aWwvQWNyZSIsIkFtZXJpY2EvU2FudGlhZ298QW50YXJjdGljYS9QYWxtZXIiLCJBbWVyaWNhL1NhbnRpYWdvfENoaWxlL0NvbnRpbmVudGFsIiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvQW5ndWlsbGEiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9BbnRpZ3VhIiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvQXJ1YmEiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9CYXJiYWRvcyIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL0JsYW5jLVNhYmxvbiIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL0N1cmFjYW8iLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9Eb21pbmljYSIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL0dyZW5hZGEiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9HdWFkZWxvdXBlIiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvS3JhbGVuZGlqayIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL0xvd2VyX1ByaW5jZXMiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9NYXJpZ290IiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvTWFydGluaXF1ZSIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL01vbnRzZXJyYXQiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9Qb3J0X29mX1NwYWluIiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvUHVlcnRvX1JpY28iLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9TdF9CYXJ0aGVsZW15IiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvU3RfS2l0dHMiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9TdF9MdWNpYSIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL1N0X1Rob21hcyIsIkFtZXJpY2EvU2FudG9fRG9taW5nb3xBbWVyaWNhL1N0X1ZpbmNlbnQiLCJBbWVyaWNhL1NhbnRvX0RvbWluZ298QW1lcmljYS9Ub3J0b2xhIiwiQW1lcmljYS9TYW50b19Eb21pbmdvfEFtZXJpY2EvVmlyZ2luIiwiQW1lcmljYS9TYW9fUGF1bG98Qg==", "base64"));
  res.write(new Buffer("cmF6aWwvRWFzdCIsIkFtZXJpY2EvU3RfSm9obnN8Q2FuYWRhL05ld2ZvdW5kbGFuZCIsIkFzaWEvQXF0b2JlfEFzaWEvQXF0YXUiLCJBc2lhL0FzaGdhYmF0fEFzaWEvQXNoa2hhYmFkIiwiQXNpYS9CYWdoZGFkfEFzaWEvQWRlbiIsIkFzaWEvQmFnaGRhZHxBc2lhL0JhaHJhaW4iLCJBc2lhL0JhZ2hkYWR8QXNpYS9LdXdhaXQiLCJBc2lhL0JhZ2hkYWR8QXNpYS9RYXRhciIsIkFzaWEvQmFnaGRhZHxBc2lhL1JpeWFkaCIsIkFzaWEvQmFuZ2tva3xBc2lhL0hvX0NoaV9NaW5oIiwiQXNpYS9CYW5na29rfEFzaWEvUGhub21fUGVuaCIsIkFzaWEvQmFuZ2tva3xBc2lhL1NhaWdvbiIsIkFzaWEvQmFuZ2tva3xBc2lhL1ZpZW50aWFuZSIsIkFzaWEvRGhha2F8QXNpYS9EYWNjYSIsIkFzaWEvRHViYWl8QXNpYS9NdXNjYXQiLCJBc2lhL0hvbmdfS29uZ3xIb25na29uZyIsIkFzaWEvSmFrYXJ0YXxBc2lhL1BvbnRpYW5hayIsIkFzaWEvSmVydXNhbGVtfEFzaWEvVGVsX0F2aXYiLCJBc2lhL0plcnVzYWxlbXxJc3JhZWwiLCJBc2lhL0thdGhtYW5kdXxBc2lhL0thdG1hbmR1IiwiQXNpYS9Lb2xrYXRhfEFzaWEvQ2FsY3V0dGEiLCJBc2lhL0tvbGthdGF8QXNpYS9Db2xvbWJvIiwiQXNpYS9LdWFsYV9MdW1wdXJ8QXNpYS9LdWNoaW5nIiwiQXNpYS9NYWthc3NhcnxBc2lhL1VqdW5nX1BhbmRhbmciLCJBc2lhL1Nlb3VsfFJPSyIsIkFzaWEvU2hhbmdoYWl8QXNpYS9DaG9uZ3FpbmciLCJBc2lhL1NoYW5naGFpfEFzaWEvQ2h1bmdraW5nIiwiQXNpYS9TaGFuZ2hhaXxBc2lhL0hhcmJpbiIsIkFzaWEvU2hhbmdoYWl8QXNpYS9NYWNhbyIsIkFzaWEvU2hhbmdoYWl8QXNpYS9NYWNhdSIsIkFzaWEvU2hhbmdoYWl8QXNpYS9UYWlwZWkiLCJBc2lhL1NoYW5naGFpfFBSQyIsIkFzaWEvU2hhbmdoYWl8Uk9DIiwiQXNpYS9TaW5nYXBvcmV8U2luZ2Fwb3JlIiwiQXNpYS9UYXNoa2VudHxBc2lhL1NhbWFya2FuZCIsIkFzaWEvVGVocmFufElyYW4iLCJBc2lhL1RoaW1waHV8QXNpYS9UaGltYnUiLCJBc2lhL1Rva3lvfEphcGFuIiwiQXNpYS9VbGFhbmJhYXRhcnxBc2lhL1VsYW5fQmF0b3IiLCJBc2lhL1VydW1xaXxBc2lhL0thc2hnYXIiLCJBdXN0cmFsaWEvQWRlbGFpZGV8QXVzdHJhbGlhL0Jyb2tlbl9IaWxsIiwiQXVzdHJhbGlhL0FkZWxhaWRlfEF1c3RyYWxpYS9Tb3V0aCIsIkF1c3RyYWxpYS9BZGVsYWlkZXxBdXN0cmFsaWEvWWFuY293aW5uYSIsIkF1c3RyYWxpYS9CcmlzYmFuZXxBdXN0cmFsaWEvTGluZGVtYW4iLCJBdXN0cmFsaWEvQnJpc2JhbmV8QXVzdHJhbGlhL1F1ZWVuc2xhbmQiLCJBdXN0cmFsaWEvRGFyd2lufEF1c3RyYWxpYS9Ob3J0aCIsIkF1c3RyYWxpYS9Mb3JkX0hvd2V8QXVzdHJhbGlhL0xISSIsIkF1c3RyYWxpYS9QZXJ0aHxBdXN0cmFsaWEvV2VzdCIsIkF1c3RyYWxpYS9TeWRuZXl8QXVzdHJhbGlhL0FDVCIsIkF1c3RyYWxpYS9TeWRuZXl8QXVzdHJhbGlhL0NhbmJlcnJhIiwiQXVzdHJhbGlhL1N5ZG5leXxBdXN0cmFsaWEvQ3VycmllIiwiQXVzdHJhbGlhL1N5ZG5leXxBdXN0cmFsaWEvSG9iYXJ0IiwiQXVzdHJhbGlhL1N5ZG5leXxBdXN0cmFsaWEvTWVsYm91cm5lIiwiQXVzdHJhbGlhL1N5ZG5leXxBdXN0cmFsaWEvTlNXIiwiQXVzdHJhbGlhL1N5ZG5leXxBdXN0cmFsaWEvVGFzbWFuaWEiLCJBdXN0cmFsaWEvU3lkbmV5fEF1c3RyYWxpYS9WaWN0b3JpYSIsIkV0Yy9VQ1R8VUNUIiwiRXRjL1VUQ3xFdGMvVW5pdmVyc2FsIiwiRXRjL1VUQ3xFdGMvWnVsdSIsIkV0Yy9VVEN8VVRDIiwiRXRjL1VUQ3xVbml2ZXJzYWwiLCJFdGMvVVRDfFp1bHUiLCJFdXJvcGUvQXN0cmFraGFufEV1cm9wZS9VbHlh", "base64"));
  res.write(new Buffer("bm92c2siLCJFdXJvcGUvQXRoZW5zfEFzaWEvTmljb3NpYSIsIkV1cm9wZS9BdGhlbnN8RUVUIiwiRXVyb3BlL0F0aGVuc3xFdXJvcGUvQnVjaGFyZXN0IiwiRXVyb3BlL0F0aGVuc3xFdXJvcGUvSGVsc2lua2kiLCJFdXJvcGUvQXRoZW5zfEV1cm9wZS9LaWV2IiwiRXVyb3BlL0F0aGVuc3xFdXJvcGUvTWFyaWVoYW1uIiwiRXVyb3BlL0F0aGVuc3xFdXJvcGUvTmljb3NpYSIsIkV1cm9wZS9BdGhlbnN8RXVyb3BlL1JpZ2EiLCJFdXJvcGUvQXRoZW5zfEV1cm9wZS9Tb2ZpYSIsIkV1cm9wZS9BdGhlbnN8RXVyb3BlL1RhbGxpbm4iLCJFdXJvcGUvQXRoZW5zfEV1cm9wZS9Vemhnb3JvZCIsIkV1cm9wZS9BdGhlbnN8RXVyb3BlL1ZpbG5pdXMiLCJFdXJvcGUvQXRoZW5zfEV1cm9wZS9aYXBvcm96aHllIiwiRXVyb3BlL0NoaXNpbmF1fEV1cm9wZS9UaXJhc3BvbCIsIkV1cm9wZS9EdWJsaW58RWlyZSIsIkV1cm9wZS9Jc3RhbmJ1bHxBc2lhL0lzdGFuYnVsIiwiRXVyb3BlL0lzdGFuYnVsfFR1cmtleSIsIkV1cm9wZS9MaXNib258QXRsYW50aWMvQ2FuYXJ5IiwiRXVyb3BlL0xpc2JvbnxBdGxhbnRpYy9GYWVyb2UiLCJFdXJvcGUvTGlzYm9ufEF0bGFudGljL0Zhcm9lIiwiRXVyb3BlL0xpc2JvbnxBdGxhbnRpYy9NYWRlaXJhIiwiRXVyb3BlL0xpc2JvbnxQb3J0dWdhbCIsIkV1cm9wZS9MaXNib258V0VUIiwiRXVyb3BlL0xvbmRvbnxFdXJvcGUvQmVsZmFzdCIsIkV1cm9wZS9Mb25kb258RXVyb3BlL0d1ZXJuc2V5IiwiRXVyb3BlL0xvbmRvbnxFdXJvcGUvSXNsZV9vZl9NYW4iLCJFdXJvcGUvTG9uZG9ufEV1cm9wZS9KZXJzZXkiLCJFdXJvcGUvTG9uZG9ufEdCIiwiRXVyb3BlL0xvbmRvbnxHQi1FaXJlIiwiRXVyb3BlL01vc2Nvd3xFdXJvcGUvVm9sZ29ncmFkIiwiRXVyb3BlL01vc2Nvd3xXLVNVIiwiRXVyb3BlL1BhcmlzfEFmcmljYS9DZXV0YSIsIkV1cm9wZS9QYXJpc3xBcmN0aWMvTG9uZ3llYXJieWVuIiwiRXVyb3BlL1BhcmlzfEF0bGFudGljL0phbl9NYXllbiIsIkV1cm9wZS9QYXJpc3xDRVQiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL0Ftc3RlcmRhbSIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvQW5kb3JyYSIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvQmVsZ3JhZGUiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL0JlcmxpbiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvQnJhdGlzbGF2YSIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvQnJ1c3NlbHMiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL0J1ZGFwZXN0IiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9CdXNpbmdlbiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvQ29wZW5oYWdlbiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvR2licmFsdGFyIiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9ManVibGphbmEiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL0x1eGVtYm91cmciLCJFdXJvcGUvUGFyaXN8RXVyb3BlL01hZHJpZCIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvTWFsdGEiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL01vbmFjbyIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvT3NsbyIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvUG9kZ29yaWNhIiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9QcmFndWUiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL1JvbWUiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL1Nhbl9NYXJpbm8iLCJFdXJvcGUvUGFyaXN8RXVyb3BlL1NhcmFqZXZvIiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9Ta29wamUiLCJFdXJvcGUvUGFyaXN8RXVyb3BlL1N0b2NraG9sbSIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvVGlyYW5lIiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9WYWR1eiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvVmF0aWNhbiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvVmllbm5hIiwiRXVyb3BlL1BhcmlzfEV1cm9wZS9XYXJzYXciLCJFdXJvcGUvUGFyaXN8RXVyb3BlL1phZ3JlYiIsIkV1cm9wZS9QYXJpc3xFdXJvcGUvWnVyaWNoIiwiRXVyb3BlL1BhcmlzfFBvbGFuZCIsIlBhY2lmaWMvQXVja2xhbmR8QW50YXJjdGljYS9NY011cmRvIiwiUGFjaWZpYy9BdWNrbGFuZHxBbnRhcmN0aWNhL1NvdXRoX1BvbGUiLCJQYWNpZmljL0F1Y2tsYW5kfE5aIiwiUGFjaWZpYy9DaGF0aGFtfE5aLUNIQVQiLCJQYWNpZmljL0NodXVrfFBhY2lmaWMvVHJ1ayIsIlBhY2lmaWMvQ2h1dWt8UGFjaWZpYy9ZYXAiLCJQYWNpZmljL0Vhc3RlcnxDaGlsZS9FYXN0ZXJJc2xhbmQiLCJQYWNpZmljL0d1YW18UGFjaWZpYy9TYWlwYW4iLCJQYWNpZmljL0hvbm9sdWx1fEhTVCIsIlBhY2lmaWMvSG9ub2x1bHV8UGFjaWZpYy9Kb2huc3RvbiIsIlBhY2lmaWMvSG9ub2x1bHV8VVMvSGF3YWlpIiwiUGFjaWZpYy9NYWp1cm98S3dhamFsZWluIiwiUGFjaWZpYy9NYWp1cm98UGFjaWZpYy9Ld2FqYWxlaW4iLCJQYWNpZmljL1BhZ29fUGFnb3xQYWNpZmljL01pZHdheSIsIlBhY2lmaWMvUGFnb19QYWdvfFBhY2lmaWMvU2Ftb2EiLCJQYWNpZmljL1BhZ29fUGFnb3xVUy9TYW1vYSIsIlBhY2lmaWMvUG9obnBlaXxQYWNpZmljL1BvbmFwZSJdCgl9KSx0fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ2MyldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe3NlY3VyZUpTT046ITEsX2J1aWx0SW5Mb2NhbFByb3BzOntfX2VkaXRfXzoiYm9vbGVhbiIsX19wZW5kaW5nX186ImJvb2xlYW4ifSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMubG9jYWw9dC5kZWZhdWx0cyh7fSx0LnJlc3VsdCh0aGlzLCJsb2NhbCIpLHRoaXMuX2J1aWx0SW5Mb2NhbFByb3BzKSx0LnJlc3VsdCh0aGlzLCJzZWN1cmVKU09OIikmJih0aGlzLnN5bmM9dC53cmFwKHRoaXMuc3luYyxmdW5jdGlvbihlLG4saSxyKXtyZXR1cm4gZS5jYWxsKHRoaXMsbixpLHQuZXh0ZW5kKHtkYXRhVHlwZToic2VjdXJlSlNPTiJ9LHIpKX0pKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHM9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9OyFmdW5jdGlvbihzLGEpe3I9W24oMzI4KSxuKDM2MCksbig0NjQpXSxpPWEsbz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KGUscik6aSwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpfSh2b2lkIDAsZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkoZSxuLHIsbyl7dmFyIHM9dC5jb250YWlucyhuLHIpO3JldHVybiBvfHwobz17fSksc3x8IXQuaXNPYmplY3QoZSl8fHQuaXNBcnJheShlKXx8dC5pc0Z1bmN0aW9uKGUpP3ZvaWQgMCE9PXImJihvW3JdPWUpOnQuZWFjaChlLGZ1bmN0aW9uKHQsZSl7aSh0LG4scj9yKyIuIitlOmUsbyl9KSxvfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIHQuZWFjaChlLGZ1bmN0aW9uKHQsZSxuKXtpZihlLmluZGV4T2YoIi4iKSE9LTEpe2Zvcih2YXIgaSxyPW4sbz1lLnNwbGl0KCIuIik7dm9pZCAwIT09KGk9by5zaGlmdCgpKTspcltpXXx8KHJbaV09by5sZW5ndGg/e306dCkscj1yW2ldO2RlbGV0ZSBuW2VdfX0pLGV9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPXt9O3JldHVybiBuW3QubmFtZV09ZSxufWZ1bmN0aW9uIGEoZSxuKXt2YXIgaTtyZXR1cm4gaT10LmlzU3RyaW5nKGUpP3t0eXBlOmV9OnQuaXNBcnJheShlKT97dHlwZTplWzBdLHJlcXVpcmVkOmVbMV0sdmFsdWU6ZVsyXX06dC5jbG9uZShlKSx0LmRlZmF1bHRzKGkse3JlcXVpcmVkOiExLG5hbWU6bn0pLGl9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbih0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSl9ZnVuY3Rpb24gYyh0LGUsbil7aWYoIWUudGVzdCh0KSlyZXR1cm4gbn1mdW5jdGlvbiB1KHQsZSl7dmFyIG49bVt0LmZvcm1hdF07aWYodC5mb3JtYXQmJiFuKXRocm93IG5ldyBUeXBlRXJyb3IodC5mb3JtYXQrIiBpcyBub3QgYSBzdXBwb3J0ZWQgc3RyaW5nIGZvcm1hdCIpO3JldHVybiBuJiZuKGUpfWZ1bmN0aW9uIGQoZSxuKXt2YXIgaT10LnBhcnRpYWwobyxlKSxyPXUoZSxuKTtyZXR1cm4gcj9pKHIpOm4mJmUubWluTGVuZ3RoJiZuLmxlbmd0aDxlLm1pbkxlbmd0aD9pKGYuRVJST1JfU1RSSU5HX1NUUklOR19NSU5fTEVOR1RILG4ubGVuZ3RoKTpuJiZlLm1heExlbmd0aCYmbi5sZW5ndGg+ZS5tYXhMZW5ndGg/aShmLkVSUk9SX1NUUklOR19TVFJJTkdfTUFYX0xFTkdUSCxuLmxlbmd0aCk6dm9pZCAwfWZ1bmN0aW9uIGgoZSxuKXt2YXIgaSxyLHM9dC5wYXJ0aWFsKG8sZSksYT0hdC5pc1VuZGVmaW5lZChuKSYmIXQuaXNOdWxsKG4pO2lmKGUucmVxdWlyZWQmJighYXx8dC5pc051bGwobil8fCIiPT09bikpcmV0dXJuIHMoZi5FUlJPUl9CTEFOSyk7aWYoaT10WyJpcyIrbChlLnR5cGUpXSxhJiYiYW55IiE9ZS50eXBlJiYoIXQuaXNGdW5jdGlvbihpKXx8IWkobikpKXJldHVybiBzKGYuRVJST1JfV1JPTkdfVFlQRSk7aWYobiYmInN0cmluZyI9PWUudHlwZSl7dmFyIGM9ZChlLG4pO2lmKGMpcmV0dXJuIGN9aWYoYSYmZS52YWx1ZXMmJiF0LmNvbnRhaW5zKGUudmFsdWVzLG4pKXJldHVybiBzKGYuRVJST1JfTk9UX0FMTE9XRUQpO2lmKHQuaXNGdW5jdGlvbihlLnZhbGlkYXRlKSl7dmFyIHU9ZS52YWxpZGF0ZShuKTtpZih0LmlzU3RyaW5nKHUpJiZ1KXJldHVybiBzKHUpO2lmKHU9PT0hMSlyZXR1cm4gcyhmLkVSUk9SX0lOVkFMSUQpfXJldHVybiBhJiYiYXJyYXkiPT1lLnR5cGUmJihyPXAoZSxuKSk/cyhyKTp2b2lkIDB9ZnVuY3Rpb24gcChlLG4pe2lmKGUubWluSXRlbXMmJm4ubGVuZ3RoPGUubWluSXRlbXMpcmV0dXJuIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuYXJyYXkubWluSXRlbXMiO2lmKGUubWF4SXRlbXMmJm4ubGVuZ3RoPmUubWF4SXRlbXMpcmV0dXJuIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuYXJyYXkubWF4SXRlbXMiO2lmKGUudW5pcXVlSXRlbXMmJm4ubGVuZ3RoPnQudW5pcShuKS5sZW5ndGgpcmV0dXJuIGYuRVJST1JfSUFSUkFZX1VOSVFVRTtpZihlLml0ZW1zKWZvcih2YXIgaT1hKGUuaXRlbXMsInBsYWNlaG9sZGVyIikscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdLHM9aChpLG8pO2lmKHMpcmV0dXJuIHMucGxhY2Vob2xkZXJ9fXZhciBmLG09e2VtYWlsOmZ1bmN0aW9uKHQpe3ZhciBlPS9eKChbXjw+KClcW1xdXFwuLDs6XHNAIl0rKFwuW148PigpXFtcXVxcLiw7OlxzQCJdKykqKXwoIi4rIikpQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvO3JldHVybiBjKHQsZSxmLkVSUk9SX0lOVkFMSURfRk9STUFUX0VNQUlMKX0sdXJpOmZ1bmN0aW9uKHQpe3ZhciBlPS9eKD86KD86aHR0cHM/fGZ0cCk6XC9cLykoPzpcUysoPzo6XFMqKT9AKT8oPzooPyEoPzoxMHwxMjcpKD86XC5cZHsxLDN9KXszfSkoPyEoPzoxNjlcLjI1NHwxOTJcLjE2OCkoPzpcLlxkezEsM30pezJ9KSg/ITE3MlwuKD86MVs2LTldfDJcZHwzWzAtMV0pKD86XC5cZHsxLDN9KXsyfSkoPzpbMS05XVxkP3wxXGRcZHwyWzAxXVxkfDIyWzAtM10pKD86XC4oPzoxP1xkezEsMn18MlswLTRdXGR8MjVbMC01XSkpezJ9KD86XC4oPzpbMS05XVxkP3wxXGRcZHwyWzAtNF1cZHwyNVswLTRdKSl8KD86KD86W2Etelx1MDBhMS1cdWZmZmYwLTldLSopKlthLXpcdTAwYTEtXHVmZmZmMC05XSspKD86XC4oPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykqKD86XC4oPzpbYS16XHUwMGExLVx1ZmZmZl17Mix9KSlcLj8pKD86OlxkezIsNX0pPyg/OltcLz8jXVxTKik/JC9pO3JldHVybiBjKHQsZSxmLkVSUk9SX0lOVkFMSURfRk9STUFUX1VSSSl9LGlwdjQ6ZnVuY3Rpb24odCl7dmFyIGU9L14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KSQvO3JldHVybiBjKHQsZSxmLkVSUk9SX0lOVkFMSURfRk9STUFUX0lQVjQpfSxob3N0bmFtZTpmdW5jdGlvbih0KXt2YXIgZT0vXigoW2EtekEtWjAtOV18W2EtekEtWjAtOV1bYS16QS1aMC05XC1dKlthLXpBLVowLTldKVwuKSooW0EtWmEtejAtOV18W0EtWmEtejAtOV1bQS1aYS16MC05XC1dKltBLVphLXowLTldKSQvO3JldHVybiBjKHQsZSxmLkVSUk9SX0lOVkFMSURfRk9STUFUX0hPU1ROQU1FKX19O3JldHVybiBmPWUuTW9kZWwuZXh0ZW5kKHtwcm9wczp7fSxkZXJpdmVkOnt9LGxvY2FsOnt9LGZsYXQ6ITAsZGVmYXVsdHM6e30sY29uc3RydWN0b3I6ZnVuY3Rpb24obil7dGhpcy5vcHRpb25zPW58fHt9O3ZhciByPXRoaXMuX19zY2hlbWFfXz17fSxvPVtdO3IuY29tcHV0ZWRQcm9wZXJ0aWVzPXt9LHIucHJvcHM9dC5jbG9uZSh0LnJlc3VsdCh0aGlzLCJwcm9wcyIpfHx7fSksci5kZXJpdmVkPXQuY2xvbmUodC5yZXN1bHQodGhpcywiZGVyaXZlZCIpfHx7fSksci5sb2NhbD10LmNsb25lKHQucmVzdWx0KHRoaXMsImxvY2FsIil8fHt9KTt2YXIgcz17fTtpZih0LmVhY2godC5leHRlbmQoe30sci5wcm9wcyxyLmxvY2FsKSxmdW5jdGlvbihlLG4pe3ZhciBpPWEoZSxuKTt0LmlzVW5kZWZpbmVkKGkudmFsdWUpfHwoc1tuXT1pLnZhbHVlKSwib2JqZWN0Ij09PWkudHlwZSYmby5wdXNoKG4pfSx0aGlzKSx0LnNpemUocykpe3ZhciBsPXQucmVzdWx0KHRoaXMsImRlZmF1bHRzIik7dGhpcy5kZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHRzKHt9LHMsbCl9fXRoaXMudmFsaWRhdGU9dC53cmFwKHRoaXMudmFsaWRhdGUsZnVuY3Rpb24oZSl7dmFyIG49dC5yZXN0KGFyZ3VtZW50cyksaT10LmV4dGVuZCh0aGlzLl92YWxpZGF0ZVNjaGVtYS5hcHBseSh0aGlzLG4pLGUuYXBwbHkodGhpcyxuKSk7cmV0dXJuIHQuc2l6ZShpKSYmaXx8dm9pZCAwfSksdGhpcy5wYXJzZT10LndyYXAodGhpcy5wYXJzZSxmdW5jdGlvbihlKXt2YXIgbj1lLmFwcGx5KHRoaXMsdC5yZXN0KGFyZ3VtZW50cykpO3JldHVybiB0aGlzLmZsYXQmJihuPWkobixvKSksbn0pLGUuTW9kZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQuZWFjaChyLmRlcml2ZWQsZnVuY3Rpb24odCxlKXtyLmNvbXB1dGVkUHJvcGVydGllc1tlXT10aGlzLl9fZ2V0RGVyaXZlZFZhbHVlKGUpO3ZhciBuPXQuZGVwc3x8W107bi5sZW5ndGgmJnRoaXMub24oImNhY2hlOmNsZWFyIGNoYW5nZToiK24uam9pbigiIGNoYW5nZToiKSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX19nZXREZXJpdmVkVmFsdWUoZSk7dCE9PXIuY29tcHV0ZWRQcm9wZXJ0aWVzW2VdJiYoci5jb21wdXRlZFByb3BlcnRpZXNbZV09dCx0aGlzLnRyaWdnZXIoImNoYW5nZToiK2UsdGhpcyx0KSl9LHRoaXMpfSx0aGlzKSx0aGlzLm9uKCJzeW5jIixmdW5jdGlvbigpe3RoaXMuX19zeW5jZWREYXRhPXRoaXMudG9KU09OKCl9LHRoaXMpfSx2YWxpZGF0ZTpmdW5jdGlvbigpe30sYWxsb3dzOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuX19zY2hlbWFfXyxyPXQuZXh0ZW5kKHt9LGkucHJvcHMsaS5sb2NhbCk7cmV0dXJuIHQuaGFzKHIsZSl8fG4ud2FybigiRmllbGQgbm90IGRlZmluZWQgaW4gc2NoZW1hIixlKSwhMH0sZ2V0UHJvcGVydHlTY2hlbWE6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5fX3NjaGVtYV9fO3JldHVybiB0LnJlZHVjZShbbi5wcm9wcyxuLmxvY2FsXSxmdW5jdGlvbih0LG4pe3JldHVybiB0fHxhKG5bZV0sZSl9LG51bGwpfSxzZXQ6ZnVuY3Rpb24obixpKXt2YXIgcjsib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIG4/InVuZGVmaW5lZCI6cyhuKSk/cj1uOihyPXt9KVtuXT1pLHQuZWFjaChyLGZ1bmN0aW9uKGUsbil7aWYodC5oYXModGhpcy5fX3NjaGVtYV9fLmRlcml2ZWQsbikpdGhyb3cib3ZlcnJpZGluZyBkZXJpdmVkIHByb3BlcnRpZXMgaXMgbm90IHN1cHBvcnRlZDogIitufSx0aGlzKTt2YXIgbz1bXTtpZih0LmVhY2gocixmdW5jdGlvbih0LGUpe3RoaXMuYWxsb3dzKGUpfHxvLnB1c2goZSl9LHRoaXMpLG8ubGVuZ3RoKXRocm93ImZpZWxkIG5vdCBhbGxvd2VkOiAiK28uam9pbigiLCAiKTtyZXR1cm4gZS5Nb2RlbC5wcm90b3R5cGUuc2V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMuX19zY2hlbWFfXztyZXR1cm4gdC5oYXMoaS5kZXJpdmVkLG4pP2kuZGVyaXZlZFtuXS5jYWNoZSE9PSExP2kuY29tcHV0ZWRQcm9wZXJ0aWVzW25dOnRoaXMuX19nZXREZXJpdmVkVmFsdWUobik6ZS5Nb2RlbC5wcm90b3R5cGUuZ2V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdG9KU09OOmZ1bmN0aW9uKG4pe258fChuPXt9KTt2YXIgaT10LmNsb25lKGUuTW9kZWwucHJvdG90eXBlLnRvSlNPTi5hcHBseSh0aGlzLGFyZ3VtZW50cykpLG89dGhpcy5fX3NjaGVtYV9fO3JldHVybiBuLnZlcmJvc2U/dC5lYWNoKG8uZGVyaXZlZCxmdW5jdGlvbih0LGUpe2lbZV09dGhpcy5nZXQoZSl9LHRoaXMpOmk9dC5vbWl0KGksdC5rZXlzKG8ubG9jYWwpKSx0aGlzLmZsYXQmJihpPXIoaSkpLGl9LHJlc2V0OmZ1bmN0aW9uKGUpe3RoaXMuY2xlYXIoZSksdGhpcy5zZXQodC5yZXN1bHQodGhpcywiZGVmYXVsdHMiKSxlKX0saXNTeW5jZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5pc0VxdWFsKHRoaXMuX19zeW5jZWREYXRhLHRoaXMudG9KU09OKCkpfSx2YWxpZGF0ZUZpZWxkOmZ1bmN0aW9uKHQpe3ZhciBlPXQmJnRoaXMuZ2V0UHJvcGVydHlTY2hlbWEodCk7cmV0dXJuIGUmJmgoZSx0aGlzLmdldCh0KSl9LF92YWxpZGF0ZVNjaGVtYTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX19zY2hlbWFfXztyZXR1cm4gdC5yZWR1Y2UodC5leHRlbmQoe30sZS5wcm9wcyxlLmxvY2FsKSxmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQuZXh0ZW5kKGUsdGhpcy52YWxpZGF0ZUZpZWxkKGkpfHx7fSl9LHt9LHRoaXMpfSxfX2dldERlcml2ZWRWYWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLl9fc2NoZW1hX18uZGVyaXZlZFtlXTtpZih0LmlzU3RyaW5nKG4pKXt2YXIgaT1uO249e2RlcHM6W2ldLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KGkpfX19dmFyIHI9bi5kZXBzfHxbXTtyZXR1cm4gbi5mbi5hcHBseSh0aGlzLHQubWFwKHIsdGhpcy5nZXQsdGhpcykpfX0se0VSUk9SX0JMQU5LOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmJsYW5rIixFUlJPUl9XUk9OR19UWVBFOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLndyb25nLnR5cGUiLEVSUk9SX05PVF9BTExPV0VEOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLnZhbHVlLm5vdC5hbGxvd2VkIixFUlJPUl9JTlZBTElEOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmludmFsaWQiLEVSUk9SX0lBUlJBWV9VTklRVUU6Im1vZGVsLnZhbGlkYXRpb24uZmllbGQuYXJyYXkudW5pcXVlIixFUlJPUl9JTlZBTElEX0ZPUk1BVF9FTUFJTDoibW9kZWwudmFsaWRhdGlvbi5maWVsZC5pbnZhbGlkLmZvcm1hdC5lbWFpbCIsRVJST1JfSU5WQUxJRF9GT1JNQVRfVVJJOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmludmFsaWQuZm9ybWF0LnVyaSIsRVJST1JfSU5WQUxJRF9GT1JNQVRfSVBWNDoibW9kZWwudmFsaWRhdGlvbi5maWVsZC5pbnZhbGlkLmZvcm1hdC5pcHY0IixFUlJPUl9JTlZBTElEX0ZPUk1BVF9IT1NUTkFNRToibW9kZWwudmFsaWRhdGlvbi5maWVsZC5pbnZhbGlkLmZvcm1hdC5ob3N0bmFtZSIsRVJST1JfU1RSSU5HX1NUUklOR19NSU5fTEVOR1RIOiJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLnN0cmluZy5taW5MZW5ndGgiLEVSUk9SX1NUUklOR19TVFJJTkdfTUFYX0xFTkdUSDoibW9kZWwudmFsaWRhdGlvbi5maWVsZC5zdHJpbmcubWF4TGVuZ3RoIn0pfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaTtpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3dpbmRvdy5jb25zb2xlJiZ3aW5kb3cub2t0YSYmd2luZG93Lm9rdGEuZGVidWcmJndpbmRvdy5jb25zb2xlW3RdLmFwcGx5KHdpbmRvdy5jb25zb2xlLGUpfXJldHVybnt0cmFjZTpmdW5jdGlvbigpe3JldHVybiB0KCJ0cmFjZSIsYXJndW1lbnRzKX0sZGlyOmZ1bmN0aW9uKCl7cmV0dXJuIHQoImRpciIsYXJndW1lbnRzKX0sdGltZTpmdW5jdGlvbigpe3JldHVybiB0KCJ0aW1lIixhcmd1bWVudHMpfSx0aW1lRW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHQoInRpbWVFbmQiLGFyZ3VtZW50cyl9LGdyb3VwOmZ1bmN0aW9uKCl7cmV0dXJuIHQoImdyb3VwIixhcmd1bWVudHMpfSxncm91cEVuZDpmdW5jdGlvbigpe3JldHVybiB0KCJncm91cEVuZCIsYXJndW1lbnRzKX0sYXNzZXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHQoImFzc2VydCIsYXJndW1lbnRzKX0sbG9nOmZ1bmN0aW9uKCl7cmV0dXJuIHQoImxvZyIsYXJndW1lbnRzKX0saW5mbzpmdW5jdGlvbigpe3JldHVybiB0KCJpbmZvIixhcmd1bWVudHMpfSx3YXJuOmZ1bmN0aW9uKCl7cmV0dXJuIHQoIndhcm4iLGFyZ3VtZW50cyl9LGVycm9yOmZ1bmN0aW9uKCl7cmV0dXJuIHQoImVycm9yIixhcmd1bWVudHMpfX19LmNhbGwoZSxuLGUsdCksISh2b2lkIDAhPT1pJiYodC5leHBvcnRzPWkpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07aT1bbigzMjgpLG4oNDYyKV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKGUpe3ZhciBuPXQub21pdChlLmxvY2FsLHQua2V5cyhlLl9idWlsdEluTG9jYWxQcm9wcykpO3JldHVybiB0LnNpemUoZS5wcm9wcykrdC5zaXplKG4pPjB9LGk9ZS5leHRlbmQoe2ZsYXQ6ITEsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLm9uKCJzeW5jIix0aGlzLl9zZXRTeW5jZWQpfSxhbGxvd3M6ZnVuY3Rpb24oKXtyZXR1cm4hbih0aGlzKXx8ZS5wcm90b3R5cGUuYWxsb3dzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0OmZ1bmN0aW9uKG4saSl7dmFyIHI7cmV0dXJuIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBuPyJ1bmRlZmluZWQiOm8obikpP3I9bjoocj17fSlbbl09aSx0KHIpLmVhY2goZnVuY3Rpb24oZSxuKXtlJiZ0LmlzQXJyYXkoZS5fX2F0dHJpYnV0ZXMpJiZ0aGlzLm9uKCJjaGFuZ2U6IitlLl9fYXR0cmlidXRlcy5qb2luKCIgY2hhbmdlOiIpLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQobik7dCE9PXRoaXMuX19zY2hlbWFfXy5jb21wdXRlZFByb3BlcnRpZXNbbl0mJih0aGlzLl9fc2NoZW1hX18uY29tcHV0ZWRQcm9wZXJ0aWVzW25dPXQsdGhpcy50cmlnZ2VyKCJjaGFuZ2U6IituLHQpKX0sdGhpcyl9LHRoaXMpLGUucHJvdG90eXBlLnNldC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldDpmdW5jdGlvbigpe3ZhciBuPWUucHJvdG90eXBlLmdldC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuaXNGdW5jdGlvbihuKT9uLmFwcGx5KHRoaXMsdC5tYXAobi5fX2F0dHJpYnV0ZXN8fFtdLHRoaXMuZ2V0LHRoaXMpKTpufSx0b0pTT046ZnVuY3Rpb24obil7bnx8KG49e30pO3ZhciBpPWUucHJvdG90eXBlLnRvSlNPTi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQoaSkuZWFjaChmdW5jdGlvbih0LGUpeyJmdW5jdGlvbiI9PXR5cGVvZiB0JiYobi52ZXJib3NlP2lbZV09dGhpcy5nZXQoZSk6ZGVsZXRlIGlbZV0pfSx0aGlzKSxuLnZlcmJvc2V8fHQoaSkuZWFjaChmdW5jdGlvbih0LGUpey9eX19cdytfXyQvLnRlc3QoZSkmJmRlbGV0ZSBpW2VdfSksaX0sc2FuaXRpemVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3ZhciBuPXt9O3JldHVybiB0LmVhY2goZSxmdW5jdGlvbihlLGkpe3QuaXNGdW5jdGlvbihlKXx8KG5baV09ZSl9KSxufSxyZXNldDpmdW5jdGlvbih0KXt0aGlzLmNsZWFyKHQpLHRoaXMuc2V0KHRoaXMuc2FuaXRpemVBdHRyaWJ1dGVzKHRoaXMuZGVmYXVsdHMpLHQpfSxjbGVhcjpmdW5jdGlvbihlKXt2YXIgbj17fTtyZXR1cm4gdC5lYWNoKHRoaXMuc2FuaXRpemVBdHRyaWJ1dGVzKHRoaXMuYXR0cmlidXRlcyksZnVuY3Rpb24odCxlKXtuW2VdPXZvaWQgMH0pLHRoaXMuc2V0KG4sdC5leHRlbmQoe30sZSx7dW5zZXQ6ITB9KSl9LF9zZXRTeW5jZWQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3luY2VkRGF0YT1lJiZ0LmlzRnVuY3Rpb24oZS50b0pTT04pP2UudG9KU09OKCk6e319LF9nZXRTeW5jZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkRGF0YX0saXNTeW5jZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5pc0VxdWFsKHRoaXMuX2dldFN5bmNlZCgpLHRoaXMudG9KU09OKCkpfX0se0NvbXB1dGVkUHJvcGVydHk6ZnVuY3Rpb24oKXt2YXIgZT10LnRvQXJyYXkoYXJndW1lbnRzKSxuPWUucG9wKCk7cmV0dXJuIG4uX19hdHRyaWJ1dGVzPWUucG9wKCksbn19KTtyZXR1cm4gaX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk7aT1mdW5jdGlvbigpe30uY2FsbChlLG4sZSx0KSwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDQ2OSksbig0NzUpLG4oNDc3KSxuKDQ3OCksbig0ODEpLG4oNDgyKSxuKDQ5MCksbig0OTIpLG4oNDkzKSxuKDQ5NCksbig0OTUpLG4oNDk2KSxuKDQ5Nyksbig0NjQpLG4oNDY4KSxuKDQ5OCksbig0OTkpLG4oNDc0KSxuKDQ3Myksbig1MDApLG4oNTA3KSxuKDQ3MSksbig1MTEpLG4oNTEyKSxuKDUxMyksbig1MTQpLG4oNDgwKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEsbCxjLHUsZCxoLHAsZixtLF8sZyx2LHksYix3LE0sUyxULGssTCl7cmV0dXJue0Jhc2VDb250cm9sbGVyOnQsQmFzZVJvdXRlcjplLEJhdGNoQWpheFV0aWw6bixCdXR0b25GYWN0b3J5OmksQ2xhc3M6cixDbGlwYm9hcmQ6byxDb29raWU6cyxEYXRhTGlzdENvbnRyb2xsZXI6YSxFcnJvclBhcnNlcjpsLEV2ZW50czpjLGZvcm1hdFhtbDp1LEZ4OmQsS2V5czpoLExvZ2dlcjpwLE1ldHJpY3M6ZixOdW1iZXJVdGlsOm0sU2NoZW1hVXRpbDpfLFNldHRpbmdzTW9kZWw6ZyxTdGF0ZU1hY2hpbmU6dixTdHJpbmdVdGlsOnksVGFiYmVkUm91dGVyOmIsVGVtcGxhdGVVdGlsOncsVGltZTpNLFRpbWVVdGlsOlMsVGltZXpvbmVVdGlsOlQsVXRpbDprLFZpZXdVdGlsOkx9fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbigzMjgpLG4oNDcwKSxuKDQ3Myksbig0NzQpLG4oNDc1KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyl7ZnVuY3Rpb24gcyh0KXt2YXIgbj17fTtyZXR1cm4gZS5lYWNoKHQsZnVuY3Rpb24odCxpKXtlLmlzTnVsbCh0KXx8KG5baV09dCl9KSxufXJldHVybiBuLmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24odCl7dHx8KHQ9e30pO3ZhciBhPWUuZGVmYXVsdHMocyh0LnN0YXRlKSx0aGlzLnN0YXRlfHx7fSk7dGhpcy5zdGF0ZT1uZXcgaShhKSxkZWxldGUgdC5zdGF0ZSx0LnNldHRpbmdzP3RoaXMuc2V0dGluZ3M9dC5zZXR0aW5nczoodGhpcy5zZXR0aW5ncz10LnNldHRpbmdzPW5ldyByKGUub21pdCh0fHx7fSwiZWwiKSksdGhpcy5saXN0ZW4oIm5vdGlmaWNhdGlvbiIsby5wcm90b3R5cGUuX25vdGlmeSksdGhpcy5saXN0ZW4oImNvbmZpcm1hdGlvbiIsby5wcm90b3R5cGUuX2NvbmZpcm0pKSxuLmNhbGwodGhpcyx0KSx0aGlzLmxpc3RlblRvKHRoaXMuc3RhdGUsIl9faW52b2tlX18iLGZ1bmN0aW9uKCl7dmFyIHQ9ZS50b0FycmF5KGFyZ3VtZW50cyksbj10LnNoaWZ0KCk7ZS5pc0Z1bmN0aW9uKHRoaXNbbl0pJiZ0aGlzW25dLmFwcGx5KHRoaXMsdCl9KSx0aGlzLlZpZXcmJnRoaXMuYWRkKG5ldyB0aGlzLlZpZXcodGhpcy50b0pTT04oKSkpfSxzdGF0ZTp7fSxWaWV3Om51bGwscmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLGk9dGhpcztyZXR1cm4gdChmdW5jdGlvbigpe24ucHJvdG90eXBlLnJlbmRlci5hcHBseShpLGUpfSksdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe3JldHVybiBlLmV4dGVuZChlLnBpY2sodGhpcywic3RhdGUiLCJzZXR0aW5ncyIsImNvbGxlY3Rpb24iLCJtb2RlbCIpLHR8fHt9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQ2hpbGRyZW4oKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKSx0aGlzLiRlbC5lbXB0eSgpLHRoaXN9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07aT1bbigzMjgpLG4oMzYwKSxuKDQ3MSksbig0NzIpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQuY2xvbmUoZS5FdmVudHMpLHM9e2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5tb2R1bGUmJnRoaXMuJGVsLmF0dHIoImRhdGEtdmlldyIsdGhpcy5tb2R1bGUuaWQpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUNoaWxkcmVuKCl9LGNvbXBpbGVUZW1wbGF0ZTpuLnRwbCxicm9hZGNhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gci50cmlnZ2VyLmFwcGx5KHIsYXJndW1lbnRzKSx0aGlzfSxsaXN0ZW46ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5saXN0ZW5UbyhyLHQsZSksdGhpc30sbm90aWZ5OmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdGhpcy5icm9hZGNhc3QoIm5vdGlmaWNhdGlvbiIsdC5kZWZhdWx0cyh7bWVzc2FnZTpuLGxldmVsOmV9LGkpKSx0aGlzfSxjb25maXJtOmZ1bmN0aW9uKGUsbixpLHIpe3ZhciBzO3JldHVybiBzPSJvYmplY3QiPT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOm8oZSkpP2U6Mj09YXJndW1lbnRzLmxlbmd0aCYmdC5pc0Z1bmN0aW9uKG4pP3t0aXRsZToiT2t0YSIsc3VidGl0bGU6ZSxvazpufTp7dGl0bGU6ZSxzdWJ0aXRsZTpuLG9rOmksY2FuY2VsRm46cn0sdC5pc0Z1bmN0aW9uKHMub2spJiYocy5vaz10LmJpbmQocy5vayx0aGlzKSksdC5pc0Z1bmN0aW9uKHMuY2FuY2VsRm4pJiYocy5jYW5jZWxGbj10LmJpbmQocy5jYW5jZWxGbix0aGlzKSksdGhpcy5icm9hZGNhc3QoImNvbmZpcm1hdGlvbiIscyksdGhpc30sYWxlcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNTdHJpbmcoZSkmJihlPXtzdWJ0aXRsZTplfSksdGhpcy5jb25maXJtKHQuZXh0ZW5kKHt9LGUse25vQ2FuY2VsQnV0dG9uOiEwfSkpLHRoaXN9fTtyZXR1cm4gaS5leHRlbmQocyx7ZGVjb3JhdGU6ZnVuY3Rpb24oZSl7dmFyIG49ZS5leHRlbmQoe30pO3JldHVybiB0LmRlZmF1bHRzKG4ucHJvdG90eXBlLHMpLG59fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oMzMwKV0scj1mdW5jdGlvbih0LGUpe3JldHVybnt0cGw6dC5tZW1vaXplKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNvbXBpbGUodCl9KX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbzsiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKHMsYSl7cj1bbigzMjgpLG4oMzYwKV0saT1hLG89ImZ1bmN0aW9uIj09dHlwZW9mIGk/aS5hcHBseShlLHIpOmksISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0odm9pZCAwLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj0wO248dFtzXS5sZW5ndGg7bisrKWlmKGUuY2lkPT09dFtzXVtuXS5jaWQpcmV0dXJuIG59ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiByKHQpe3RbYV09ITA7dmFyIGU9dC5yZW5kZXJUZW1wbGF0ZSh0LnRlbXBsYXRlKTtlP3QuJGVsLmh0bWwoZSk6dC5sZW5ndGgmJnQuJGVsLmVtcHR5KCksdC5lYWNoKGZ1bmN0aW9uKHQpe3RbdV0oKX0pfWZ1bmN0aW9uIG8oZSl7dmFyIG49L14oPyEoPzpkZWxlZ2F0ZXx1bmRlbGVnYXRlfF8pKShbYS16QS1aMC05XSspKD86RXZlbnRzKSQvO3QuZWFjaCh0LmFsbEtleXMoZSksZnVuY3Rpb24oaSl7dmFyIHI9aS5tYXRjaChuKTtpZihyKXt2YXIgbz10LnJlc3VsdChlLGkpLHM9ZS5vcHRpb25zW3JbMV1dfHxlW3JbMV1dO3MmJnQuaXNPYmplY3QobykmJnQuaXNGdW5jdGlvbihzLnRyaWdnZXIpJiZ0LmVhY2gobyxmdW5jdGlvbihuLGkpe3ZhciByPXQuaXNGdW5jdGlvbihuKT9bbl06dC5yZWR1Y2Uobi5zcGxpdCgvXHMrLyksZnVuY3Rpb24obixpKXtyZXR1cm4gdC5pc0Z1bmN0aW9uKGVbaV0pJiZuLnB1c2goZVtpXSksbn0sW10pO3QuZWFjaChyLGZ1bmN0aW9uKHQpe2UubGlzdGVuVG8ocyxpLHQpfSl9KX19KX12YXIgcz0iX19jaGlsZHJlbl9fIixhPSJfX3JlbmRlcmVkX18iLGw9Il9fcGFyZW50X18iLGM9Il9fY2hpbGRyZW5fZGVmaW5pdGlvbnNfXyIsdT0iX19hZGRfdG9fY29udGFpbmVyX18iLGQ9ZS5WaWV3LmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24obil7dGhpcy5vcHRpb25zPW58fHt9LHQuZXh0ZW5kKHRoaXMsdC5waWNrKHRoaXMub3B0aW9ucywic3RhdGUiLCJzZXR0aW5ncyIpKSx0aGlzW3NdPVtdLHRoaXNbYV09ITEsdGhpc1tsXT1udWxsLHRoaXNbY109dGhpcy5jaGlsZHJlbjt2YXIgcj10aGlzLmluaXRpYWxpemU7aWYodGhpcy5pbml0aWFsaXplPWksZS5WaWV3LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0LmVhY2godC5yZXN1bHQodGhpcyxjKSxmdW5jdGlvbihlKXt0aGlzLmFkZC5hcHBseSh0aGlzLHQuaXNBcnJheShlKT9lOltlXSl9LHRoaXMpLGRlbGV0ZSB0aGlzW2NdLHRoaXMuYXV0b1JlbmRlciYmdGhpcy5tb2RlbCl7dmFyIHU9dC5pc0FycmF5KHRoaXMuYXV0b1JlbmRlcik/dC5tYXAodGhpcy5hdXRvUmVuZGVyLGZ1bmN0aW9uKHQpe3JldHVybiJjaGFuZ2U6Iit0fSkuam9pbigiICIpOiJjaGFuZ2UiO3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCx1LGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX0pfXRoaXMuaW5pdGlhbGl6ZT1yLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksbyh0aGlzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihlKXt0aGlzLnN0b3BMaXN0ZW5pbmcoZSk7dmFyIGk9bih0aGlzLGUpO3QuaXNOdW1iZXIoaSkmJnRoaXNbc10uc3BsaWNlKGksMSl9LGF1dG9SZW5kZXI6ITEsdGVtcGxhdGU6bnVsbCxjaGlsZHJlbjpbXSxhZGQ6ZnVuY3Rpb24oaSxyLG8sYSxjKXt2YXIgaD17fSxwPXQudG9BcnJheShhcmd1bWVudHMpO2lmKHQuaXNPYmplY3Qocik/KGg9cixyPWguc2VsZWN0b3Isbz1oLmJ1YmJsZSxhPWgucHJlcGVuZCxjPWgub3B0aW9ucyk6dC5pc09iamVjdChvKSYmKGg9byxvPWguYnViYmxlLGE9aC5wcmVwZW5kLGM9aC5vcHRpb25zKSx0LmlzU3RyaW5nKGkpJiYoaT1mdW5jdGlvbih0KXtyZXR1cm4gZC5leHRlbmQoe2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dHJ5e3ZhciBuPWUuJCh0KTtpZigxIT1uLmxlbmd0aCl0aHJvdyJpbnZhbGlkIEVsZW1lbnQiO3ZhciBpPS8mKFx3K3wjeFxkKyk7L2cscj1uLnByb3AoIm91dGVySFRNTCIpLnJlcGxhY2UoaSwiICIpLmxlbmd0aCxvPXQucmVwbGFjZShpLCIgIikubGVuZ3RoO2lmKHIhPT1vKXRocm93ImludmFsaWQgRWxlbWVudCI7dGhpcy50ZW1wbGF0ZT1uLmh0bWwoKSx0aGlzLmVsPW4uZW1wdHkoKVswXX1jYXRjaChzKXt0aGlzLnRlbXBsYXRlPXR9ZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9KGkpKSxpLnByb3RvdHlwZSYmaS5wcm90b3R5cGUgaW5zdGFuY2VvZiBkKXt2YXIgZj10Lm9taXQodC5leHRlbmQoe30sdGhpcy5vcHRpb25zLGMpLCJlbCIpO3JldHVybiBwWzBdPW5ldyBpKGYpLHRoaXMuYWRkLmFwcGx5KHRoaXMscCl9aWYodC5pc051bWJlcihuKHRoaXMsaSkpKXRocm93IG5ldyBFcnJvcigiRHVwbGljYXRlIGNoaWxkIik7cmV0dXJuIGlbbF09dGhpcyxpW3VdPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe2lmKHQmJjEhPWlbbF0uJCh0KS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNlbGVjdG9yOiAiK3QpO3ZhciBlPXQ/dGhpc1tsXS4kKHQpOnRoaXNbbF0uJGVsO3RoaXMucmVuZGVyKCksdGhpcy5kZWxlZ2F0ZUV2ZW50cygpLGE/ZS5wcmVwZW5kKHRoaXMuZWwpOmUuYXBwZW5kKHRoaXMuZWwpfX0uY2FsbChpLHIpLG8mJnRoaXMubGlzdGVuVG8oaSwiYWxsIixmdW5jdGlvbigpe3RoaXMudHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSx0aGlzLnJlbmRlcmVkKCkmJmlbdV0oKSx0aGlzW3NdLnB1c2goaSksdGhpc30scmVtb3ZlQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3QucmVtb3ZlKCl9KSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVDaGlsZHJlbigpLHRoaXNbbF0mJnRoaXNbbF0udW5yZWdpc3Rlcih0aGlzKSxlLlZpZXcucHJvdG90eXBlLnJlbW92ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbXBpbGVUZW1wbGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdC50ZW1wbGF0ZShlKX0scmVuZGVyVGVtcGxhdGU6ZnVuY3Rpb24oZSl7aWYodC5pc1N0cmluZyhlKSYmKGU9dGhpcy5jb21waWxlVGVtcGxhdGUoZSkpLHQuaXNGdW5jdGlvbihlKSlyZXR1cm4gZSh0aGlzLmdldFRlbXBsYXRlRGF0YSgpKX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb2RlbCYmdGhpcy5tb2RlbC50b0pTT04oe3ZlcmJvc2U6ITB9KXx8e30sbj10Lm9taXQodGhpcy5vcHRpb25zLFsic3RhdGUiLCJzZXR0aW5ncyIsIm1vZGVsIiwiY29sbGVjdGlvbiJdKTtyZXR1cm4gdC5kZWZhdWx0cyh7fSxlLG4pfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmVSZW5kZXIoKSxyKHRoaXMpLHRoaXMucG9zdFJlbmRlcigpLHRoaXN9LHByZVJlbmRlcjppLHBvc3RSZW5kZXI6aSxyZW5kZXJlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdfSxnZXRDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKX0sYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0Q2hpbGRyZW4oKVt0XX0saW52b2tlOmZ1bmN0aW9uKGUpe3ZhciBuPXQudG9BcnJheShhcmd1bWVudHMpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7aS5zaXplKCkmJmkuaW52b2tlLmFwcGx5KGksbiksdC5pc0Z1bmN0aW9uKGlbZV0pJiZpW2VdLmFwcGx5KGksbi5zbGljZSgxKSl9KSx0aGlzfX0pLGg9WyJlYWNoIiwibWFwIiwicmVkdWNlIiwicmVkdWNlUmlnaHQiLCJmaW5kIiwiZmlsdGVyIiwicmVqZWN0IiwiZXZlcnkiLCJzb21lIiwiY29udGFpbnMiLCJ0b0FycmF5Iiwic2l6ZSIsImZpcnN0IiwiaW5pdGlhbCIsInJlc3QiLCJsYXN0Iiwid2l0aG91dCIsImluZGV4T2YiLCJzaHVmZmxlIiwibGFzdEluZGV4T2YiLCJpc0VtcHR5IiwiY2hhaW4iLCJ3aGVyZSIsImZpbmRXaGVyZSJdO3JldHVybiB0LmVhY2goaCxmdW5jdGlvbihlKXtkLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBuPXQudG9BcnJheShhcmd1bWVudHMpO3JldHVybiBuLnVuc2hpZnQodC50b0FycmF5KHRoaXNbc10pKSx0W2VdLmFwcGx5KHQsbil9fSx0aGlzKSxkfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ2MildLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe2V4dHJhUHJvcGVydGllczohMCxpbnZva2U6ZnVuY3Rpb24oKXt2YXIgZT10LnRvQXJyYXkoYXJndW1lbnRzKTtlLnVuc2hpZnQoIl9faW52b2tlX18iKSx0aGlzLnRyaWdnZXIuYXBwbHkodGhpcyxlKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NjIpXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZXh0ZW5kKHtsb2NhbDpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5va3RhJiZ3aW5kb3cub2t0YS5zZXR0aW5nc3x8e307cmV0dXJue29yZ0lkOlsic3RyaW5nIiwhMSx0Lm9yZ0lkXSxvcmdOYW1lOlsic3RyaW5nIiwhMSx0Lm9yZ05hbWVdLGlzUHJldmlldzpbImJvb2xlYW4iLCExLHQuaXNQcmV2aWV3XSxzZXJ2ZXJTdGF0dXM6WyJzdHJpbmciLCExLHQuc2VydmVyU3RhdHVzXSxwZXJtaXNzaW9uczpbImFycmF5IiwhMCx0LnBlcm1pc3Npb25zfHxbXV19fSxleHRyYVByb3BlcnRpZXM6ITAsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmZlYXR1cmVzPXdpbmRvdy5fZmVhdHVyZXN8fFtdLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxoYXNGZWF0dXJlOmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbnRhaW5zKHRoaXMuZmVhdHVyZXMsZSl9LGhhc0FueUZlYXR1cmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc29tZShlLHRoaXMuaGFzRmVhdHVyZSx0aGlzKX0saGFzUGVybWlzc2lvbjpmdW5jdGlvbihlKXtyZXR1cm4gdC5jb250YWlucyh0aGlzLmdldCgicGVybWlzc2lvbnMiKSxlKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbigzMjgpLG4oMzYwKSxuKDQ3NCksbig0NjQpLG4oNDc2KSxuKDQ2NildLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7ZnVuY3Rpb24gYSh0LG4pe3ZhciBpPWUucmVzdWx0KHQsInJvb3QiKXx8IiI7cmV0dXJuIGkmJmUuaXNTdHJpbmcobik/W2ksbl0uam9pbigiLyIpLnJlcGxhY2UoL1wvezIsfS9nLCIvIik6bn1yZXR1cm4gbi5Sb3V0ZXIuZXh0ZW5kKHtyb290OiIiLGxpc3RlbjpvLnByb3RvdHlwZS5saXN0ZW4sY29uc3RydWN0b3I6ZnVuY3Rpb24odCl7dHx8KHQ9e30pLHRoaXMuZWw9dC5lbCx0aGlzLnNldHRpbmdzPW5ldyBpKGUub21pdCh0LCJlbCIpKSx0LnJvb3QmJih0aGlzLnJvb3Q9dC5yb290KSxuLlJvdXRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5saXN0ZW4oIm5vdGlmaWNhdGlvbiIsdGhpcy5fbm90aWZ5KSx0aGlzLmxpc3RlbigiY29uZmlybWF0aW9uIix0aGlzLl9jb25maXJtKX0sX2NvbmZpcm06ZnVuY3Rpb24odCl7dHx8KHQ9e30pO3ZhciBuPXMuZXh0ZW5kKGUucGljayh0LCJ0aXRsZSIsInN1YnRpdGxlIiwic2F2ZSIsIm9rIiwiY2FuY2VsIiwiY2FuY2VsRm4iLCJub0NhbmNlbEJ1dHRvbiIsImNvbnRlbnQiLCJkYW5nZXIiKSksaT1uZXcgbih7bW9kZWw6dGhpcy5zZXR0aW5nc30pO3JldHVybiBpLnJlbmRlcigpLGl9LF9ub3RpZnk6ZnVuY3Rpb24oZSl7dmFyIG49bmV3IG8oZSk7cmV0dXJuIHQoIiNjb250ZW50IikucHJlcGVuZChuLnJlbmRlcigpLmVsKSxufSxyZW5kZXI6ZnVuY3Rpb24odCxuKXt0aGlzLnVubG9hZCgpLG49ZS5leHRlbmQoZS5waWNrKHRoaXMsInNldHRpbmdzIiwiZWwiKSxufHx7fSksdGhpcy5jb250cm9sbGVyPW5ldyB0KG4pLHRoaXMuY29udHJvbGxlci5yZW5kZXIoKX0sc3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7dChmdW5jdGlvbigpe3JldHVybiBuLkhpc3Rvcnkuc3RhcnRlZD92b2lkIHIuZXJyb3IoIkhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIik6dm9pZCBuLmhpc3Rvcnkuc3RhcnQuYXBwbHkobi5oaXN0b3J5LGUpfSl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuY29udHJvbGxlciYmKHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLmNvbnRyb2xsZXIpLHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLmNvbnRyb2xsZXIuc3RhdGUpLHRoaXMuY29udHJvbGxlci5yZW1vdmUoKSl9LHJvdXRlOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbi5Sb3V0ZXIucHJvdG90eXBlLnJvdXRlLmNhbGwodGhpcyxhKHRoaXMsdCksZSxpKX0sbmF2aWdhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5Sb3V0ZXIucHJvdG90eXBlLm5hdmlnYXRlLmNhbGwodGhpcyxhKHRoaXMsdCksZSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oMzI4KSxuKDQ3MCldLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXtsZXZlbDoic3VjY2VzcyIsbWVzc2FnZToiR3JlYXQgU3VjY2VzcyEiLGhpZGU6ITAsZmFkZTo0MDAsZGVsYXk6M2UzLHdpZHRoOjAsZGlzbWlzc2FibGU6ITF9O3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJpbmZvYm94IGluZm9ib3gtY29uZmlybSBpbmZvYm94LWNvbmZpcm0tZml4ZWQiLGV2ZW50czp7ImNsaWNrIC5pbmZvYm94LWRpc21pc3MtbGluayI6ImZhZGVPdXQifSx0ZW1wbGF0ZTonXHQgICAgICB7eyNpZiBkaXNtaXNzYWJsZX19XHQgICAgICA8YSBjbGFzcz0iaW5mb2JveC1kaXNtaXNzLWxpbmsiIHRpdGxlPSJEaXNtaXNzIiBocmVmPSIjIj5cdCAgICAgICAgPHNwYW4gY2xhc3M9ImRpc21pc3MtaWNvbiI+PC9zcGFuPlx0ICAgICAgPC9hPlx0ICAgICAge3svaWZ9fVx0ICAgICAgPHNwYW4gY2xhc3M9Imljb24ge3tsZXZlbH19LTE2Ij48L3NwYW4+XHQgICAgICB7eyNpZiB0aXRsZX19PGgzPnt7dGl0bGV9fTwvaDM+e3svaWZ9fVx0ICAgICAgPHA+e3ttZXNzYWdlfX08L3A+XHQgICAgJyxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zPWUuZGVmYXVsdHMoe30sdGhpcy5vcHRpb25zLGkpLHRoaXMuJGVsLmFkZENsYXNzKCJpbmZvYm94LSIrdGhpcy5vcHRpb25zLmxldmVsKSx0aGlzLm9wdGlvbnMud2lkdGgmJnRoaXMuJGVsLndpZHRoKHRoaXMub3B0aW9ucy53aWR0aCkuY3NzKHsibWFyZ2luLWxlZnQiOiIwcHgiLGxlZnQ6TWF0aC5yb3VuZCgodCh3aW5kb3cpLndpZHRoKCktdGhpcy5vcHRpb25zLndpZHRoKS8yKX0pfSxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gZS5leHRlbmQoZS5waWNrKHRoaXMub3B0aW9ucywibGV2ZWwiLCJtZXNzYWdlIiwidGl0bGUiKSx7ZGlzbWlzc2FibGU6dGhpcy5vcHRpb25zLmhpZGU9PT0hMXx8dGhpcy5vcHRpb25zLmRpc21pc3NhYmxlPT09ITB9KX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5oaWRlJiZlLmRlbGF5KGUuYmluZCh0aGlzLmZhZGVPdXQsdGhpcyksdGhpcy5vcHRpb25zLmRlbGF5KX0sZmFkZU91dDpmdW5jdGlvbigpe3RoaXMuJGVsLmZhZGVPdXQodGhpcy5vcHRpb25zLmZhZGUsZS5iaW5kKHRoaXMucmVtb3ZlLHRoaXMpKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbigzMjgpXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49e3F1ZXJ5QnVpbGRGbjplLm5vb3AsYmF0Y2hTaXplOjIwfTtyZXR1cm57Z2V0QnlJZHM6ZnVuY3Rpb24oaSl7dmFyIHI9ZS5kZWZhdWx0cyh7fSxpLG4pLG89ci5pZHM7aWYoIWUuaXNTdHJpbmcoci51cmwpKXRocm93IG5ldyBFcnJvcigiRXhwZWN0aW5nIGFuIHN0cmluZyBVUkwgYnV0IGdldDogIityLnVybCk7aWYoIWUuaXNBcnJheShvKXx8ZS5pc0VtcHR5KG8pKXRocm93IG5ldyBFcnJvcigiRXhwZWN0aW5nIGFuIGxpc3Qgb2YgSURzIGJ1dCBnZXQ6ICIrbyk7aWYoIWUuaXNOdW1iZXIoci5iYXRjaFNpemUpfHwwPT09ci5iYXRjaFNpemV8fG8ubGVuZ3RoPD1yLmJhdGNoU2l6ZSlyZXR1cm4gdC5nZXQoci51cmwsci5xdWVyeUJ1aWxkRm4obykpO3ZhciBzPWUuY2hhaW4obykuZ3JvdXBCeShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmZsb29yKGUvci5iYXRjaFNpemUpfSkudmFsdWVzKCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChyLnVybCxyLnF1ZXJ5QnVpbGRGbihlKSl9LHRoaXMpLnZhbHVlKCk7cmV0dXJuIHQud2hlbi5hcHBseSh0LHMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5jaGFpbihhcmd1bWVudHMpLm1hcChlLmZpcnN0KS5mbGF0dGVuKCkudmFsdWUoKX0pfX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDc5KV0scj1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSl7dmFyIG49dC5leHRlbmQoZS5jbGljaz97Y2xpY2s6ZS5jbGlja306e30sZS5ldmVudHN8fHt9KSxpPXt9O3JldHVybiB0LmVhY2gobixmdW5jdGlvbih0LG4pe2lbbl09ZnVuY3Rpb24obil7ZS5ocmVmfHwobi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCkpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLGl9cmV0dXJue2NyZWF0ZTpmdW5jdGlvbihpKXtyZXR1cm4gaT10LmNsb25lKGkpLGUuZXh0ZW5kKHQuZXh0ZW5kKGkse2V2ZW50czpuKGkpfSkpfX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcwKSxuKDQ4MCldLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXtjbGljazpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKX19O3JldHVybiBlLmV4dGVuZCh7dGFnTmFtZToiYSIsdGVtcGxhdGU6J3t7I2lmIGljb259fTxzcGFuIGNsYXNzPSJpY29uIHt7aWNvbn19Ij48L3NwYW4+e3svaWZ9fXt7I2lmIHRpdGxlfX17e3RpdGxlfX17ey9pZn19Jyx2aXNpYmxlOiEwLGVuYWJsZWQ6ITAsZW5hYmxlV2hlbjp7fSxzaG93V2hlbjp7fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnM9dHx8e307dmFyIG49dGhpcy5nZXRUZW1wbGF0ZURhdGEoKTt0aGlzLmRpc2FibGVkPSExLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuJGVsLmFkZENsYXNzKCJsaW5rLWJ1dHRvbiIpLG4uaWNvbiYmKHRoaXMuJGVsLmFkZENsYXNzKCJsaW5rLWJ1dHRvbi1pY29uIiksbi50aXRsZXx8dGhpcy4kZWwuYWRkQ2xhc3MoImljb24tb25seSIpKX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2hyZWY6dGhpcy5fX2dldEF0dHJpYnV0ZSgiaHJlZiIpLHRpdGxlOnRoaXMuX19nZXRBdHRyaWJ1dGUoInRpdGxlIiksaWNvbjp0aGlzLl9fZ2V0QXR0cmlidXRlKCJpY29uIil9fSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7bi5hcHBseURvV2hlbih0aGlzLHQucmVzdWx0Q3R4KHRoaXMsImVuYWJsZVdoZW4iLHRoaXMpLHRoaXMudG9nZ2xlKSxuLmFwcGx5RG9XaGVuKHRoaXMsdC5yZXN1bHRDdHgodGhpcywic2hvd1doZW4iLHRoaXMpLHRoaXMudG9nZ2xlVmlzaWJsZSl9LHJlbmRlcjpmdW5jdGlvbigpe2UucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC5yZXN1bHQodGhpcywiZW5hYmxlZCIpfHx0aGlzLnRvZ2dsZSghMSksdC5yZXN1bHQodGhpcywidmlzaWJsZSIpfHx0aGlzLnRvZ2dsZVZpc2libGUoITEpO3ZhciBuPXRoaXMuZ2V0VGVtcGxhdGVEYXRhKCk7cmV0dXJuIHRoaXMuJGVsLmF0dHIoImhyZWYiLG4uaHJlZnx8IiMiKSx0aGlzfSxfX2dldEF0dHJpYnV0ZTpmdW5jdGlvbihlLG4pe3ZhciBpPXQucmVzdWx0Q3R4KHRoaXMub3B0aW9ucyxlLHRoaXMpO3JldHVybiB0LmlzVW5kZWZpbmVkKGkpJiYoaT10LnJlc3VsdCh0aGlzLGUpKSx0LmlzVW5kZWZpbmVkKGkpP246aX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGUoITApfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGUoITEpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy50b2dnbGVWaXNpYmxlKCEwKX0saGlkZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlVmlzaWJsZSghMSl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgbj0hIWUmJnQucmVzdWx0KHRoaXMsImVuYWJsZWQiKTt0aGlzLmRpc2FibGVkPSFuLHRoaXMuJGVsLnRvZ2dsZUNsYXNzKCJsaW5rLWJ1dHRvbi1kaXNhYmxlZCBidG4tZGlzYWJsZWQgZGlzYWJsZWQiLHRoaXMuZGlzYWJsZWQpLHQuZGVmZXIodC5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5kZWxlZ2F0ZUV2ZW50cyh0aGlzLmRpc2FibGVkP2k6bnVsbCl9LHRoaXMpKX0sdG9nZ2xlVmlzaWJsZTpmdW5jdGlvbihlKXt2YXIgbj0hZXx8IXQucmVzdWx0KHRoaXMsInZpc2libGUiKTt0aGlzLiRlbC50b2dnbGVDbGFzcygiaGlkZSIsbil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpXSxyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuImNoYW5nZToiK3Qua2V5cyhlKS5qb2luKCIgY2hhbmdlOiIpfWZ1bmN0aW9uIG4oZSxuKXt2YXIgaT10aGlzLm1vZGVsLmdldChuKTtyZXR1cm4gdC5pc0Z1bmN0aW9uKGUpP2UuY2FsbCh0aGlzLGkpOmU9PWl9ZnVuY3Rpb24gaShuLGkscil7dmFyIG89dC5iaW5kKHIsbixuLGkpO24ucmVuZGVyPXQud3JhcChuLnJlbmRlcixmdW5jdGlvbih0KXt2YXIgZT10LmNhbGwobik7cmV0dXJuIG8oe2FuaW1hdGU6ITF9KSxlfSksbi5saXN0ZW5UbyhuLm1vZGVsLGUoaSksZnVuY3Rpb24oKXtvKHthbmltYXRlOiEwfSl9KX1yZXR1cm57YXBwbHlEb1doZW46ZnVuY3Rpb24oZSxyLG8pe2UubW9kZWwmJnQuaXNPYmplY3QocikmJnQuc2l6ZShyKSYmdC5pc0Z1bmN0aW9uKG8pJiZpKGUscixmdW5jdGlvbihlLGkscil7dmFyIHM9dC5ldmVyeSh0Lm1hcChpLG4sZSkpO28uY2FsbChlLHMscil9KX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDM2MCldLHI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKGUpe3RoaXMub3B0aW9ucz10LmNsb25lKGV8fHt9KSx0aGlzLmNpZD10LnVuaXF1ZUlkKCJjbGFzcyIpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQuZXh0ZW5kKG4ucHJvdG90eXBlLGUuRXZlbnRzLHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7fX0pLG4uZXh0ZW5kPWUuTW9kZWwuZXh0ZW5kLG59LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oMzI4KSxuKDQ4MSksbig0ODMpLG4oNDcyKV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPWkscz1bInN1Y2Nlc3MiLCJlcnJvciIsInRhcmdldCIsInRleHQiXSxhPW4uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKG4saSl7aT1lLnBpY2soaXx8e30scyk7dmFyIGEsbCxjO2UuaXNTdHJpbmcobikmJihhPW4pLGUuaXNFbGVtZW50KG4pJiYoYT1uKSxuIGluc3RhbmNlb2YgdCYmKGE9bi5zZWxlY3RvciksbiBpbnN0YW5jZW9mIHImJihhPW4uZWwpLGUuaXNGdW5jdGlvbihpLnRhcmdldCkmJihsPWkudGFyZ2V0KSxlLmlzRWxlbWVudChpLnRhcmdldCkmJihsPWUuY29uc3RhbnQoaS50YXJnZXQpKSxlLmlzU3RyaW5nKGkudGV4dCk/Yz1lLmNvbnN0YW50KGkudGV4dCk6ZS5pc0Z1bmN0aW9uKGkudGV4dCkmJihjPWkudGV4dCksdGhpcy5fX2luc3RhbmNlPW5ldyBvKGEse3RhcmdldDpsLHRleHQ6Y30pLHRoaXMuZG9uZT1lLnBhcnRpYWwodGhpcy5fX3NldENhbGxiYWNrLCJzdWNjZXNzIiksdGhpcy5lcnJvcj1lLnBhcnRpYWwodGhpcy5fX3NldENhbGxiYWNrLCJlcnJvciIpLHRoaXMuZG9uZShpLnN1Y2Nlc3MpLHRoaXMuZXJyb3IoaS5lcnJvcil9LF9fc2V0Q2FsbGJhY2s6ZnVuY3Rpb24odCxuKXtpZihlLmlzRnVuY3Rpb24obikpcmV0dXJuIHRoaXMuX19pbnN0YW5jZS5vbih0LG4pLHRoaXMuX19pbnN0YW5jZX19KTtyZXR1cm57YXR0YWNoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBhKHQsZSl9fX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvOyFmdW5jdGlvbihzLGEpe3I9W3Qsbig0ODQpLG4oMzU1KSxuKDQ4NildLGk9YSxvPSJmdW5jdGlvbiI9PXR5cGVvZiBpP2kuYXBwbHkoZSxyKTppLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSl9KHRoaXMsZnVuY3Rpb24odCxlLG4saSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIHModCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBsKHQsZSl7dmFyIG49ImRhdGEtY2xpcGJvYXJkLSIrdDtpZihlLmhhc0F0dHJpYnV0ZShuKSlyZXR1cm4gZS5nZXRBdHRyaWJ1dGUobil9dmFyIGM9cihlKSx1PXIobiksZD1yKGkpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsInZhbHVlImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpO3ZhciBpPXModGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIGkucmVzb2x2ZU9wdGlvbnMobiksaS5saXN0ZW5DbGljayh0KSxpfXJldHVybiBhKGUsdCksaChlLFt7a2V5OiJyZXNvbHZlT3B0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5hY3Rpb249ImZ1bmN0aW9uIj09dHlwZW9mIHQuYWN0aW9uP3QuYWN0aW9uOnRoaXMuZGVmYXVsdEFjdGlvbix0aGlzLnRhcmdldD0iZnVuY3Rpb24iPT10eXBlb2YgdC50YXJnZXQ/dC50YXJnZXQ6dGhpcy5kZWZhdWx0VGFyZ2V0LHRoaXMudGV4dD0iZnVuY3Rpb24iPT10eXBlb2YgdC50ZXh0P3QudGV4dDp0aGlzLmRlZmF1bHRUZXh0fX0se2tleToibGlzdGVuQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5saXN0ZW5lcj0oMCxkWyJkZWZhdWx0Il0pKHQsImNsaWNrIixmdW5jdGlvbih0KXtyZXR1cm4gZS5vbkNsaWNrKHQpfSl9fSx7a2V5OiJvbkNsaWNrIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmRlbGVnYXRlVGFyZ2V0fHx0LmN1cnJlbnRUYXJnZXQ7dGhpcy5jbGlwYm9hcmRBY3Rpb24mJih0aGlzLmNsaXBib2FyZEFjdGlvbj1udWxsKSx0aGlzLmNsaXBib2FyZEFjdGlvbj1uZXcgY1siZGVmYXVsdCJdKHthY3Rpb246dGhpcy5hY3Rpb24oZSksdGFyZ2V0OnRoaXMudGFyZ2V0KGUpLHRleHQ6dGhpcy50ZXh0KGUpLHRyaWdnZXI6ZSxlbWl0dGVyOnRoaXN9KX19LHtrZXk6ImRlZmF1bHRBY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKCJhY3Rpb24iLHQpfX0se2tleToiZGVmYXVsdFRhcmdldCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bCgidGFyZ2V0Iix0KTtpZihlKXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpfX0se2tleToiZGVmYXVsdFRleHQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKCJ0ZXh0Iix0KX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5lci5kZXN0cm95KCksdGhpcy5jbGlwYm9hcmRBY3Rpb24mJih0aGlzLmNsaXBib2FyZEFjdGlvbi5kZXN0cm95KCksdGhpcy5jbGlwYm9hcmRBY3Rpb249bnVsbCl9fV0sW3trZXk6ImlzU3VwcG9ydGVkIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbImNvcHkiLCJjdXQiXSxlPSJzdHJpbmciPT10eXBlb2YgdD9bdF06dCxuPSEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7bj1uJiYhIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCh0KX0pLG59fV0pLGV9KHVbImRlZmF1bHQiXSk7dC5leHBvcnRzPXB9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbzshZnVuY3Rpb24ocyxhKXtyPVt0LG4oNDg1KV0saT1hLG89ImZ1bmN0aW9uIj09dHlwZW9mIGk/aS5hcHBseShlLHIpOmksISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0odGhpcyxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX12YXIgcj1uKGUpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsInZhbHVlImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aSh0aGlzLHQpLHRoaXMucmVzb2x2ZU9wdGlvbnMoZSksdGhpcy5pbml0U2VsZWN0aW9uKCl9cmV0dXJuIHModCxbe2tleToicmVzb2x2ZU9wdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuYWN0aW9uPXQuYWN0aW9uLHRoaXMuZW1pdHRlcj10LmVtaXR0ZXIsdGhpcy50YXJnZXQ9dC50YXJnZXQsdGhpcy50ZXh0PXQudGV4dCx0aGlzLnRyaWdnZXI9dC50cmlnZ2VyLHRoaXMuc2VsZWN0ZWRUZXh0PSIifX0se2tleToiaW5pdFNlbGVjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRleHQ/dGhpcy5zZWxlY3RGYWtlKCk6dGhpcy50YXJnZXQmJnRoaXMuc2VsZWN0VGFyZ2V0KCl9fSx7a2V5OiJzZWxlY3RGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT0icnRsIj09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGlyIik7dGhpcy5yZW1vdmVGYWtlKCksdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQucmVtb3ZlRmFrZSgpfSx0aGlzLmZha2VIYW5kbGVyPWRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayl8fCEwLHRoaXMuZmFrZUVsZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKSx0aGlzLmZha2VFbGVtLnN0eWxlLmZvbnRTaXplPSIxMnB0Iix0aGlzLmZha2VFbGVtLnN0eWxlLmJvcmRlcj0iMCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5wYWRkaW5nPSIwIix0aGlzLmZha2VFbGVtLnN0eWxlLm1hcmdpbj0iMCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLHRoaXMuZmFrZUVsZW0uc3R5bGVbZT8icmlnaHQiOiJsZWZ0Il09Ii05OTk5cHgiO3ZhciBuPXdpbmRvdy5wYWdlWU9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDt0aGlzLmZha2VFbGVtLnN0eWxlLnRvcD1uKyJweCIsdGhpcy5mYWtlRWxlbS5zZXRBdHRyaWJ1dGUoInJlYWRvbmx5IiwiIiksdGhpcy5mYWtlRWxlbS52YWx1ZT10aGlzLnRleHQsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLnNlbGVjdGVkVGV4dD0oMCxyWyJkZWZhdWx0Il0pKHRoaXMuZmFrZUVsZW0pLHRoaXMuY29weVRleHQoKX19LHtrZXk6InJlbW92ZUZha2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5mYWtlSGFuZGxlciYmKGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayksdGhpcy5mYWtlSGFuZGxlcj1udWxsLHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaz1udWxsKSx0aGlzLmZha2VFbGVtJiYoZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLmZha2VFbGVtPW51bGwpfX0se2tleToic2VsZWN0VGFyZ2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRUZXh0PSgwLHJbImRlZmF1bHQiXSkodGhpcy50YXJnZXQpLHRoaXMuY29weVRleHQoKX19LHtrZXk6ImNvcHlUZXh0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXZvaWQgMDt0cnl7dD1kb2N1bWVudC5leGVjQ29tbWFuZCh0aGlzLmFjdGlvbil9Y2F0Y2goZSl7dD0hMX10aGlzLmhhbmRsZVJlc3VsdCh0KX19LHtrZXk6ImhhbmRsZVJlc3VsdCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbWl0dGVyLmVtaXQodD8ic3VjY2VzcyI6ImVycm9yIix7YWN0aW9uOnRoaXMuYWN0aW9uLHRleHQ6dGhpcy5zZWxlY3RlZFRleHQsdHJpZ2dlcjp0aGlzLnRyaWdnZXIsY2xlYXJTZWxlY3Rpb246dGhpcy5jbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpfSl9fSx7a2V5OiJjbGVhclNlbGVjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRhcmdldCYmdGhpcy50YXJnZXQuYmx1cigpLHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVGYWtlKCl9fSx7a2V5OiJhY3Rpb24iLHNldDpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiY29weSI7aWYodGhpcy5fYWN0aW9uPXQsImNvcHkiIT09dGhpcy5fYWN0aW9uJiYiY3V0IiE9PXRoaXMuX2FjdGlvbil0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgImFjdGlvbiIgdmFsdWUsIHVzZSBlaXRoZXIgImNvcHkiIG9yICJjdXQiJyl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3Rpb259fSx7a2V5OiJ0YXJnZXQiLHNldDpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10KXtpZighdHx8Im9iamVjdCIhPT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfHwxIT09dC5ub2RlVHlwZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtpZigiY29weSI9PT10aGlzLmFjdGlvbiYmdC5oYXNBdHRyaWJ1dGUoImRpc2FibGVkIikpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSAicmVhZG9ubHkiIGluc3RlYWQgb2YgImRpc2FibGVkIiBhdHRyaWJ1dGUnKTtpZigiY3V0Ij09PXRoaXMuYWN0aW9uJiYodC5oYXNBdHRyaWJ1dGUoInJlYWRvbmx5Iil8fHQuaGFzQXR0cmlidXRlKCJkaXNhYmxlZCIpKSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgYXR0cmlidXRlLiBZb3UgY2FuXCd0IGN1dCB0ZXh0IGZyb20gZWxlbWVudHMgd2l0aCAicmVhZG9ubHkiIG9yICJkaXNhYmxlZCIgYXR0cmlidXRlcycpO3RoaXMuX3RhcmdldD10fX0sZ2V0OmZ1bmN0aW9uKCl7CglyZXR1cm4gdGhpcy5fdGFyZ2V0fX1dKSx0fSgpO3QuZXhwb3J0cz1hfSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgZTtpZigiU0VMRUNUIj09PXQubm9kZU5hbWUpdC5mb2N1cygpLGU9dC52YWx1ZTtlbHNlIGlmKCJJTlBVVCI9PT10Lm5vZGVOYW1lfHwiVEVYVEFSRUEiPT09dC5ub2RlTmFtZSl7dmFyIG49dC5oYXNBdHRyaWJ1dGUoInJlYWRvbmx5Iik7bnx8dC5zZXRBdHRyaWJ1dGUoInJlYWRvbmx5IiwiIiksdC5zZWxl", "base64"));
  res.write(new Buffer("Y3QoKSx0LnNldFNlbGVjdGlvblJhbmdlKDAsdC52YWx1ZS5sZW5ndGgpLG58fHQucmVtb3ZlQXR0cmlidXRlKCJyZWFkb25seSIpLGU9dC52YWx1ZX1lbHNle3QuaGFzQXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiKSYmdC5mb2N1cygpO3ZhciBpPXdpbmRvdy5nZXRTZWxlY3Rpb24oKSxyPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7ci5zZWxlY3ROb2RlQ29udGVudHModCksaS5yZW1vdmVBbGxSYW5nZXMoKSxpLmFkZFJhbmdlKHIpLGU9aS50b1N0cmluZygpfXJldHVybiBlfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7aWYoIXQmJiFlJiYhbil0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzIik7aWYoIWEuc3RyaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nIik7aWYoIWEuZm4obikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uIik7aWYoYS5ub2RlKHQpKXJldHVybiByKHQsZSxuKTtpZihhLm5vZGVMaXN0KHQpKXJldHVybiBvKHQsZSxuKTtpZihhLnN0cmluZyh0KSlyZXR1cm4gcyh0LGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZywgSFRNTEVsZW1lbnQsIEhUTUxDb2xsZWN0aW9uLCBvciBOb2RlTGlzdCIpfWZ1bmN0aW9uIHIodCxlLG4pe3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoZSxuKSx7ZGVzdHJveTpmdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4pfX19ZnVuY3Rpb24gbyh0LGUsbil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCxmdW5jdGlvbih0KXt0LmFkZEV2ZW50TGlzdGVuZXIoZSxuKX0pLHtkZXN0cm95OmZ1bmN0aW9uKCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0LGZ1bmN0aW9uKHQpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4pfSl9fX1mdW5jdGlvbiBzKHQsZSxuKXtyZXR1cm4gbChkb2N1bWVudC5ib2R5LHQsZSxuKX12YXIgYT1uKDQ4NyksbD1uKDQ4OCk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiZ0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJjE9PT10Lm5vZGVUeXBlfSxlLm5vZGVMaXN0PWZ1bmN0aW9uKHQpe3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTtyZXR1cm4gdm9pZCAwIT09dCYmKCJbb2JqZWN0IE5vZGVMaXN0XSI9PT1ufHwiW29iamVjdCBIVE1MQ29sbGVjdGlvbl0iPT09bikmJiJsZW5ndGgiaW4gdCYmKDA9PT10Lmxlbmd0aHx8ZS5ub2RlKHRbMF0pKX0sZS5zdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgU3RyaW5nfSxlLmZuPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09ZX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuLGksbyl7dmFyIHM9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihuLHMsbykse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIobixzLG8pfX19ZnVuY3Rpb24gcih0LGUsbixpKXtyZXR1cm4gZnVuY3Rpb24obil7bi5kZWxlZ2F0ZVRhcmdldD1vKG4udGFyZ2V0LGUpLG4uZGVsZWdhdGVUYXJnZXQmJmkuY2FsbCh0LG4pfX12YXIgbz1uKDQ4OSk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2Zvcig7dCYmdC5ub2RlVHlwZSE9PWk7KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdC5tYXRjaGVzJiZ0Lm1hdGNoZXMoZSkpcmV0dXJuIHQ7dD10LnBhcmVudE5vZGV9fXZhciBpPTk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBFbGVtZW50JiYhRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyl7dmFyIHI9RWxlbWVudC5wcm90b3R5cGU7ci5tYXRjaGVzPXIubWF0Y2hlc1NlbGVjdG9yfHxyLm1vek1hdGNoZXNTZWxlY3Rvcnx8ci5tc01hdGNoZXNTZWxlY3Rvcnx8ci5vTWF0Y2hlc1NlbGVjdG9yfHxyLndlYmtpdE1hdGNoZXNTZWxlY3Rvcn10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDkxKV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPS9eaHR0cHMvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpO3JldHVybntzZXRDb29raWU6ZnVuY3Rpb24oaSxyLG8pe2Uuc2V0KGkscix0LmRlZmF1bHRzKG98fHt9LHtzZWN1cmU6bixwYXRoOiIvIn0pKX0sZ2V0Q29va2llOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0LmFwcGx5KGUsYXJndW1lbnRzKX0scmVtb3ZlQ29va2llOmZ1bmN0aW9uKCl7cmV0dXJuIGUucmVtb3ZlLmFwcGx5KGUsYXJndW1lbnRzKX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyOyJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fTsvKiEKCQkgKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4xLjAKCQkgKiBodHRwczovL2dpdGh1Yi5jb20vanMtY29va2llL2pzLWNvb2tpZQoJCSAqCgkJICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2sKCQkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKCQkgKi8KCSFmdW5jdGlvbihvKXtpPW8scj0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmNhbGwoZSxuLGUsdCk6aSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfShmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtmb3IodmFyIHQ9MCxlPXt9O3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIGkgaW4gbillW2ldPW5baV19cmV0dXJuIGV9ZnVuY3Rpb24gZShuKXtmdW5jdGlvbiBpKGUscixvKXt2YXIgcztpZihhcmd1bWVudHMubGVuZ3RoPjEpe2lmKG89dCh7cGF0aDoiLyJ9LGkuZGVmYXVsdHMsbyksIm51bWJlciI9PXR5cGVvZiBvLmV4cGlyZXMpe3ZhciBhPW5ldyBEYXRlO2Euc2V0TWlsbGlzZWNvbmRzKGEuZ2V0TWlsbGlzZWNvbmRzKCkrODY0ZTUqby5leHBpcmVzKSxvLmV4cGlyZXM9YX10cnl7cz1KU09OLnN0cmluZ2lmeShyKSwvXltce1xbXS8udGVzdChzKSYmKHI9cyl9Y2F0Y2gobCl7fXJldHVybiByPW4ud3JpdGU/bi53cml0ZShyLGUpOmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocikpLnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8M0F8M0N8M0V8M0R8MkZ8M0Z8NDB8NUJ8NUR8NUV8NjB8N0J8N0R8N0MpL2csZGVjb2RlVVJJQ29tcG9uZW50KSxlPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZSkpLGU9ZS5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDVFfDYwfDdDKS9nLGRlY29kZVVSSUNvbXBvbmVudCksZT1lLnJlcGxhY2UoL1tcKFwpXS9nLGVzY2FwZSksZG9jdW1lbnQuY29va2llPVtlLCI9IixyLG8uZXhwaXJlcyYmIjsgZXhwaXJlcz0iK28uZXhwaXJlcy50b1VUQ1N0cmluZygpLG8ucGF0aCYmIjsgcGF0aD0iK28ucGF0aCxvLmRvbWFpbiYmIjsgZG9tYWluPSIrby5kb21haW4sby5zZWN1cmU/Ijsgc2VjdXJlIjoiIl0uam9pbigiIil9ZXx8KHM9e30pO2Zvcih2YXIgYz1kb2N1bWVudC5jb29raWU/ZG9jdW1lbnQuY29va2llLnNwbGl0KCI7ICIpOltdLHU9LyglWzAtOUEtWl17Mn0pKy9nLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGg9Y1tkXS5zcGxpdCgiPSIpLHA9aFswXS5yZXBsYWNlKHUsZGVjb2RlVVJJQ29tcG9uZW50KSxmPWguc2xpY2UoMSkuam9pbigiPSIpOyciJz09PWYuY2hhckF0KDApJiYoZj1mLnNsaWNlKDEsLTEpKTt0cnl7aWYoZj1uLnJlYWQ/bi5yZWFkKGYscCk6bihmLHApfHxmLnJlcGxhY2UodSxkZWNvZGVVUklDb21wb25lbnQpLHRoaXMuanNvbil0cnl7Zj1KU09OLnBhcnNlKGYpfWNhdGNoKGwpe31pZihlPT09cCl7cz1mO2JyZWFrfWV8fChzW3BdPWYpfWNhdGNoKGwpe319cmV0dXJuIHN9cmV0dXJuIGkuZ2V0PWkuc2V0PWksaS5nZXRKU09OPWZ1bmN0aW9uKCl7cmV0dXJuIGkuYXBwbHkoe2pzb246ITB9LFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9LGkuZGVmYXVsdHM9e30saS5yZW1vdmU9ZnVuY3Rpb24oZSxuKXtpKGUsIiIsdChuLHtleHBpcmVzOi0xfSkpfSxpLndpdGhDb252ZXJ0ZXI9ZSxpfXJldHVybiBlKGZ1bmN0aW9uKCl7fSl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDY5KV0scj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmV4dGVuZCh7ZmV0Y2hFdmVudHM6ImNoYW5nZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmZldGNoPXQuZGVib3VuY2UodGhpcy5mZXRjaCw1MCksdGhpcy5Db2xsZWN0aW9uJiYodGhpcy5jb2xsZWN0aW9uPW5ldyB0aGlzLkNvbGxlY3Rpb24pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMubGlzdGVuVG8odGhpcy5zdGF0ZSx0LnJlc3VsdCh0aGlzLCJmZXRjaEV2ZW50cyIpLGZ1bmN0aW9uKCl7dGhpcy5mZXRjaCh7cmVzZXQ6ITB9KX0pLHRoaXMuY29sbGVjdGlvbiYmdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sImVycm9yIixmdW5jdGlvbih0KXt0PT09dGhpcy5jb2xsZWN0aW9uJiZ0aGlzLmNvbGxlY3Rpb24ucmVzZXQoKX0pLHRoaXMuZmV0Y2goe3Jlc2V0OiEwfSl9LGZldGNoOmZ1bmN0aW9uKGUpe3RoaXMuY29sbGVjdGlvbiYmKHRoaXMudHJpZ2dlcigiZmV0Y2giLHRoaXMuc3RhdGUpLHRoaXMuY29sbGVjdGlvbi5mZXRjaCh0LmV4dGVuZCh0LnBpY2soZXx8e30sWyJyZXNldCIsInJlbW92ZSIsInN1Y2Nlc3MiLCJlcnJvciIsImRhdGEiXSkse2RhdGE6dGhpcy5nZXRGZXRjaERhdGEoKX0pKSl9LGdldEZldGNoRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLnRvSlNPTigpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KV0scj1mdW5jdGlvbih0KXtyZXR1cm57Y3JlYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmVycm9yT2JqJiYodC5pc0VtcHR5KGUuZXJyb3JPYmouZXJyb3JDYXVzZXMpP2UuZXJyb3JzPVt7ZXJyb3JTdW1tYXJ5OmUuZXJyb3JPYmouZXJyb3JTdW1tYXJ5fV06ZS5lcnJvcnM9ZS5lcnJvck9iai5lcnJvckNhdXNlcykse2dldEZpZWxkTmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbmRleE9mKCI6Iik+LTE/dC5zcGxpdCgiOiIpWzBdOm51bGx9LGdldE1lc3NhZ2VzOmZ1bmN0aW9uKCl7dmFyIG49W107cmV0dXJuIHQuZWFjaChlLmVycm9ycyxmdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldEZpZWxkTmFtZSh0LmVycm9yU3VtbWFyeSk7aWYoaSYmZS5pbnB1dE1hcFtpXSl7dmFyIHI9bmV3IFJlZ0V4cCgiXiIraSk7bi5wdXNoKHtlcnJvclN1bW1hcnk6dC5lcnJvclN1bW1hcnkucmVwbGFjZShyLGUuaW5wdXRNYXBbaV0pfSl9ZWxzZSBuLnB1c2godCl9LHRoaXMpLG59LGdldElucHV0czpmdW5jdGlvbigpe3ZhciBuPVtdO3JldHVybiB0LmVhY2goZS5lcnJvcnMsZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRGaWVsZE5hbWUodC5lcnJvclN1bW1hcnkpO2UuaW5wdXRNYXAuaGFzT3duUHJvcGVydHkoaSkmJm4ucHVzaChpKX0sdGhpcyksbn0sZ2V0UmVmb3JtYXR0ZWRNZXNzYWdlczpmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiB0LmVhY2goZS5lcnJvcnMsZnVuY3Rpb24oZSl7aWYodC5pc1VuZGVmaW5lZChlLmVycm9yU3VtbWFyeSkpbi5lcnJvclN1bW1hcnk9ZTtlbHNle3ZhciBpPWUuZXJyb3JTdW1tYXJ5LmluZGV4T2YoIjoiKT4tMT9lLmVycm9yU3VtbWFyeS5zcGxpdCgiOiAiKTpudWxsO2k/bltpWzBdXT1pWzFdOm4uZXJyb3JTdW1tYXJ5PWUuZXJyb3JTdW1tYXJ5fX0sdGhpcyksbn19fX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjshKHQuZXhwb3J0cz17RkVUQ0hfTU9SRToiRkVUQ0hfTU9SRSIsU0hPV19NT1JFOiJTSE9XX01PUkUiLERFTEVURToiREVMRVRFIixBQ1RJVkFURToiQUNUSVZBVEUiLERFQUNUSVZBVEU6IkRFQUNUSVZBVEUiLENIRUNLX0FMTDoiQ0hFQ0tfQUxMIixVUExPQURfRE9ORToiVVBMT0FEX0RPTkUiLFVQTE9BRF9FTVBUWV9DT05URU5UOiJVUExPQURfRU1QVFlfQ09OVEVOVCIsRE9XTkxPQURfRE9ORToiRE9XTkxPQURfRE9ORSIsQ0xPU0U6IkNMT1NFIixET05FOiJET05FIixTVUJNSVQ6IlNVQk1JVCJ9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0NjYpXSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3JldHVybiB0PXZrYmVhdXRpZnkueG1sKHQpLGUmJih0PXQucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7IikpLHR9cmV0dXJuIHR9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpXSxyPWZ1bmN0aW9uKHQpe3ZhciBlPXtOT05FOiJub25lIixTTElERToic2xpZGUiLEZBREU6ImZhZGUifTtyZXR1cm57REVGQVVMVF9EVVJBVElPTjo0MDAsRUZGRUNUUzplLGFuaW1hdGU6ZnVuY3Rpb24obixpKXtzd2l0Y2goaXx8KGk9e30pLHQuaXNTdHJpbmcoaSkmJihpPXtlZmZlY3Q6aX0pLGkuZWZmZWN0KXtjYXNlIGUuU0xJREU6Y2FzZSBlLkZBREU6bi5oaWRlKCksbi50b2dnbGUoaSk7YnJlYWs7Y2FzZSBlLk5PTkU6fX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ISh0LmV4cG9ydHM9e1VQOjM4LERPV046NDAsREVMOjQ2LFRBQjo5LFJFVFVSTjoxMyxFTlRFUjoxMyxFU0M6MjcsQ09NTUE6MTg4LFBBR0VVUDozMyxQQUdFRE9XTjozNCxTUEFDRTozMixCQUNLU1BBQ0U6OCxfX2lzS2V5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQud2hpY2h8fHQua2V5Q29kZSk9PXRoaXNbZV19LGlzRW50ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19pc0tleSh0LCJFTlRFUiIpfSxpc0VzYzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2lzS2V5KHQsIkVTQyIpfSxpc1NwYWNlQmFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9faXNLZXkodCwiU1BBQ0UiKX19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpXSxyPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBSZWdFeHAoIihcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkiLCJnIik7cmV0dXJue251bWJlclRvU3RyaW5nOmZ1bmN0aW9uKG4saSl7dmFyIHI9aXx8IiwiO3JldHVybiB0LmlzTnVtYmVyKG4pP1N0cmluZyhuKS5yZXBsYWNlKGUsIiQxIityKToiMCJ9fX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig1MDApXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5sb2NhbGl6ZSxpPXtTVFJJTkc6InN0cmluZyIsTlVNQkVSOiJudW1iZXIiLElOVEVHRVI6ImludGVnZXIiLEJPT0xFQU46ImJvb2xlYW4iLE9CSkVDVDoib2JqZWN0IixGT1JNQVRESVNQTEFZVFlQRTp7ImRhdGUtdGltZSI6ImRhdGUiLHVyaToidXJpIixlbWFpbDoiZW1haWwiLCJjb3VudHJ5LWNvZGUiOiJjb3VudHJ5LWNvZGUiLCJsYW5ndWFnZS1jb2RlIjoibGFuZ3VhZ2UtY29kZSIsbG9jYWxlOiJsb2NhbGUiLHRpbWV6b25lOiJ0aW1lem9uZSIsInJlZi1pZCI6InJlZmVyZW5jZSJ9LEFSUkFZRElTUExBWVRZUEU6e2FycmF5b2ZvYmplY3Q6ImFycmF5b2ZvYmplY3QiLGFycmF5b2ZzdHJpbmc6ImFycmF5b2ZzdHJpbmciLGFycmF5b2ZudW1iZXI6ImFycmF5b2ZudW1iZXIiLGFycmF5b2ZpbnRlZ2VyOiJhcnJheW9maW50ZWdlciJ9LERJU1BMQVlUWVBFUzp7ZGF0ZTp7dHlwZToic3RyaW5nIixmb3JtYXQ6ImRhdGUtdGltZSJ9LHVyaTp7dHlwZToic3RyaW5nIixmb3JtYXQ6InVyaSJ9LGVtYWlsOnt0eXBlOiJzdHJpbmciLGZvcm1hdDoiZW1haWwifSwiY291bnRyeS1jb2RlIjp7dHlwZToic3RyaW5nIixmb3JtYXQ6ImNvdW50cnktY29kZSJ9LCJsYW5ndWFnZS1jb2RlIjp7dHlwZToic3RyaW5nIixmb3JtYXQ6Imxhbmd1YWdlLWNvZGUifSxsb2NhbGU6e3R5cGU6InN0cmluZyIsZm9ybWF0OiJsb2NhbGUifSx0aW1lem9uZTp7dHlwZToic3RyaW5nIixmb3JtYXQ6InRpbWV6b25lIn0sc3RyaW5nOnt0eXBlOiJzdHJpbmcifSxudW1iZXI6e3R5cGU6Im51bWJlciJ9LCJib29sZWFuIjp7dHlwZToiYm9vbGVhbiJ9LGludGVnZXI6e3R5cGU6ImludGVnZXIifSxyZWZlcmVuY2U6e3R5cGU6InN0cmluZyIsZm9ybWF0OiJyZWYtaWQifSxhcnJheW9mb2JqZWN0Ont0eXBlOiJhcnJheSIsaXRlbXM6e3R5cGU6Im9iamVjdCJ9fSxhcnJheW9mc3RyaW5nOnt0eXBlOiJhcnJheSIsaXRlbXM6e3R5cGU6InN0cmluZyJ9fSxhcnJheW9mbnVtYmVyOnt0eXBlOiJhcnJheSIsaXRlbXM6e3R5cGU6Im51bWJlciJ9fSxhcnJheW9maW50ZWdlcjp7dHlwZToiYXJyYXkiLGl0ZW1zOnt0eXBlOiJpbnRlZ2VyIn19LGltYWdlOnt0eXBlOiJpbWFnZSJ9LHBhc3N3b3JkOnt0eXBlOiJzdHJpbmcifX0sU1VQUE9SVFNNSU5NQVg6WyJzdHJpbmciLCJudW1iZXIiLCJpbnRlZ2VyIiwicGFzc3dvcmQiXSxTVVBQT1JURU5VTTpbInN0cmluZyIsIm51bWJlciIsImludGVnZXIiLCJhcnJheW9mc3RyaW5nIiwiYXJyYXlvZm51bWJlciIsImFycmF5b2ZpbnRlZ2VyIl0sREFUQVRZUEU6e3N0cmluZzoic3RyaW5nIixudW1iZXI6Im51bWJlciIsImJvb2xlYW4iOiJib29sZWFuIixpbnRlZ2VyOiJpbnRlZ2VyIixkYXRlOiJkYXRldGltZSIsb2JqZWN0OiJvYmplY3QiLGFycmF5b2ZvYmplY3Q6Im9iamVjdCBhcnJheSIsYXJyYXlvZnN0cmluZzoic3RyaW5nIGFycmF5IixhcnJheW9mbnVtYmVyOiJudW1iZXIgYXJyYXkiLGFycmF5b2ZpbnRlZ2VyOiJpbnRlZ2VyIGFycmF5IiwiY291bnRyeS1jb2RlIjoiY291bnRyeSBjb2RlIiwibGFuZ3VhZ2UtY29kZSI6Imxhbmd1YWdlIGNvZGUiLHJlZmVyZW5jZToicmVmZXJlbmNlIix0aW1lem9uZToidGltZXpvbmUiLGltYWdlOiJpbWFnZSJ9LE1VVEFCSUxJVFk6e1JFQURPTkxZOiJSRUFEX09OTFkiLFdSSVRFT05MWToiV1JJVEVfT05MWSIsUkVBRFdSSVRFOiJSRUFEX1dSSVRFIixJTU1VVEFCTEU6IklNTVVUQUJMRSJ9LFNDT1BFOntOT05FOiJOT05FIixTRUxGOiJTRUxGIixTWVNURU06IlNZU1RFTSJ9LERJU1BMQVlTQ09QRTp7U0VMRjoiVXNlciBwZXJzb25hbCIsU1lTVEVNOiJTeXN0ZW0iLE5BOiJOb25lIn0sVU5JT046e0RJU0FCTEU6IkRJU0FCTEUiLEVOQUJMRToiRU5BQkxFIn0sVU5JT05fT1BUSU9OUzp7RElTQUJMRTpuKCJ1bml2ZXJzYWwtZGlyZWN0b3J5LnByb2ZpbGVzLmF0dHJpYnV0ZS5mb3JtLnVuaW9uLmVuYWJsZS5kaXNwbGF5IiwiY291cmFnZSIpLEVOQUJMRTpuKCJ1bml2ZXJzYWwtZGlyZWN0b3J5LnByb2ZpbGVzLmF0dHJpYnV0ZS5mb3JtLnVuaW9uLmRpc2FibGUuZGlzcGxheSIsImNvdXJhZ2UiKX0sUEVSTUlTU0lPTjp7SElERToiSElERSIsUkVBRF9PTkxZOiJSRUFEX09OTFkiLFdSSVRFX09OTFk6IldSSVRFX09OTFkiLFJFQURfV1JJVEU6IlJFQURfV1JJVEUifSxFTkRVU0VSX0FUVFJJQlVURV9QRVJNSVNTSU9OX09QVElPTlM6e0hJREU6bigidW5pdmVyc2FsLWRpcmVjdG9yeS5wcm9maWxlcy5hdHRyaWJ1dGUuZW5kdXNlci5wZXJtaXNzaW9uLmhpZGUiLCJjb3VyYWdlIiksUkVBRF9PTkxZOm4oInVuaXZlcnNhbC1kaXJlY3RvcnkucHJvZmlsZXMuYXR0cmlidXRlLmVuZHVzZXIucGVybWlzc2lvbi5yZWFkb25seSIsImNvdXJhZ2UiKSxSRUFEX1dSSVRFOm4oInVuaXZlcnNhbC1kaXJlY3RvcnkucHJvZmlsZXMuYXR0cmlidXRlLmVuZHVzZXIucGVybWlzc2lvbi5yZWFkd3JpdGUiLCJjb3VyYWdlIil9LEFUVFJJQlVURV9MRVZFTF9NQVNURVJJTkdfT1BUSU9OUzp7SU5IRVJJVDpuKCJ1bml2ZXJzYWwtZGlyZWN0b3J5LnByb2ZpbGVzLmF0dHJpYnV0ZS5tYXN0ZXIuaW5oZXJpdCIsImNvdXJhZ2UiKSxPS1RBX01BU1RFUkVEOm4oInVuaXZlcnNhbC1kaXJlY3RvcnkucHJvZmlsZXMuYXR0cmlidXRlLm1hc3Rlci5va3RhbWFzdGVyZWQiLCJjb3VyYWdlIiksT1ZFUlJJREU6bigidW5pdmVyc2FsLWRpcmVjdG9yeS5wcm9maWxlcy5hdHRyaWJ1dGUubWFzdGVyLm92ZXJyaWRlIiwiY291cmFnZSIpfSxVU0VSTkFNRVRZUEU6e05PTkU6Im5vbi11c2VybmFtZSIsT0tUQV9UT19BUFA6Im9rdGEtdG8tYXBwLXVzZXJuYW1lIixPS1RBX1RPX0FEOiJva3RhLXRvLWFkLXVzZXJuYW1lIixBUFBfVE9fT0tUQToiYXBwLXRvLW9rdGEtdXNlcm5hbWUiLElEUF9UT19PS1RBOiJpZHAtdG8tb2t0YS11c2VybmFtZSJ9LGdldERpc3BsYXlUeXBlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByO3JldHVybiB0JiYocj1lP3RoaXMuRk9STUFURElTUExBWVRZUEVbZV06bj90aGlzLkFSUkFZRElTUExBWVRZUEVbdCsib2YiK25dOnQpLHJ8fChyPSJ1bmRlZmluZWQiPT10eXBlb2YgaT8iIjppKSxyfSxnZXRTb3VyY2VVc2VybmFtZVR5cGU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuVVNFUk5BTUVUWVBFLk5PTkU7cmV0dXJuIm9rdGFUb0FwcCI9PT10PyJ1c2VyTmFtZSI9PT1lP2k9dGhpcy5VU0VSTkFNRVRZUEUuT0tUQV9UT19BUFA6ImNuIj09PWUmJihpPXRoaXMuVVNFUk5BTUVUWVBFLk9LVEFfVE9fQUQpOiJhcHBUb09rdGEiPT09dCYmImxvZ2luIj09PWUmJihpPSJzYW1sX2lkcCI9PT1uP3RoaXMuVVNFUk5BTUVUWVBFLklEUF9UT19PS1RBOnRoaXMuVVNFUk5BTUVUWVBFLkFQUF9UT19PS1RBKSxpfSxpc0FycmF5RGF0YVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29udGFpbnModC52YWx1ZXModGhpcy5BUlJBWURJU1BMQVlUWVBFKSxlKX0saXNPYmplY3REYXRhVHlwZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5EQVRBVFlQRS5vYmplY3Q9PT10fX07cmV0dXJuIGl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oMzMxKSxuKDUwMSksbig1MDYpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT17IiZhbXA7IjoiJiIsIiZsdDsiOiI8IiwiJmd0OyI6Ij4iLCImcXVvdDsiOiciJywiJiMzOTsiOiInIiwiJiMwMzk7IjoiJyIsIiYjeDJGOyI6Ii8ifSxyPS9eKChbXjw+KClbXF1cXC4sOzpcc0BcIl0rKFwuW148PigpW1xdXFwuLDs6XHNAXCJdKykqKXwoXCIuK1wiKSlAKD8hLSkoKFxbP1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cXT8pfCgoW2EtekEtWlwtMC05XStcLikrW2EtekEtWl17Mix9KSkkLyxvPXtzcHJpbnRmOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3Rocm93IG5ldyBFcnJvcigiTWlzbWF0Y2ggbnVtYmVyIG9mIHZhcmlhYmxlczogIithcmd1bWVudHNbMF0rIiwgIitKU09OLnN0cmluZ2lmeShlKSl9Zm9yKHZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpLG49ZS5zaGlmdCgpLGk9bixyPTAsbz1lLmxlbmd0aDtyPG87cisrKXt2YXIgcz1lW3JdO249bi5yZXBsYWNlKCJ7IityKyJ9IixzKSx2b2lkIDAhPT1zJiZudWxsIT09cyYmbiE9PWl8fHQoKSxpPW59cmV0dXJuL1x7W1xkK11cfS8udGVzdChuKSYmdCgpLG59LHBhcnNlUXVlcnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LG49ZGVjb2RlVVJJQ29tcG9uZW50KHQucmVwbGFjZSgvXCsvZywiICIpKS5zcGxpdCgiJiIpLGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIHI9bltpXSxvPXIuc3BsaXQoIj0iKTtlW28uc2hpZnQoKV09by5qb2luKCI9Iil9cmV0dXJuIGV9LGVuY29kZUpTT2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodCkpfSxkZWNvZGVKU09iamVjdDpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHQpKX1jYXRjaChlKXtyZXR1cm4gbnVsbH19LHVuZXNjYXBlSHRtbDpmdW5jdGlvbih0KXtyZXR1cm4gU3RyaW5nKHQpLnJlcGxhY2UoLyZbXHdcI1xkXXsyLH07L2csZnVuY3Rpb24odCl7cmV0dXJuIGlbdF18fHR9KX0sbG9jYWxpemU6ZnVuY3Rpb24oZSxpLHIpe3ZhciBzPWk/bltpXTpuW3Qua2V5cyhuKVswXV07aWYoIXMpcmV0dXJuIkwxME5fRVJST1JbIitpKyJdIjt2YXIgYT1zW2VdO3RyeXtyPXImJnIuc2xpY2U/ci5zbGljZSgwKTpbXSxyLnVuc2hpZnQoYSksYT1vLnNwcmludGYuYXBwbHkobnVsbCxyKX1jYXRjaChsKXthPW51bGx9cmV0dXJuIGF8fCJMMTBOX0VSUk9SWyIrZSsiXSJ9LHBhcnNlRmxvYXQ6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdC50b1N0cmluZygpfSxlfShmdW5jdGlvbih0KXt2YXIgZT0rdDtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJmU9PT1wYXJzZUZsb2F0KHQpP2U6dH0pLHBhcnNlSW50OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHQudG9TdHJpbmcoKX0sZX0oZnVuY3Rpb24oZSl7dmFyIG49K2U7cmV0dXJuIHQuaXNTdHJpbmcoZSkmJm49PT1wYXJzZUludChlLDEwKT9uOmV9KSxyYW5kb21TdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIG49IjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hUWmFiY2RlZmdoaWtsbW5vcHFyc3R1dnd4eXoiO2lmKHZvaWQgMD09PWUpZT10LnJhbmRvbShuLmxlbmd0aCk7ZWxzZSBpZigwPT09ZSlyZXR1cm4iIjtmb3IodmFyIGk9W107ZS0tOylpLnB1c2goblt0LnJhbmRvbShuLmxlbmd0aC0xKV0pO3JldHVybiBpLmpvaW4oIiIpfSxlbmRzV2l0aDpmdW5jdGlvbih0LGUpe3JldHVybiB0Kz0iIixlKz0iIix0Lmxlbmd0aD49ZS5sZW5ndGgmJnQuc3Vic3RyaW5nKHQubGVuZ3RoLWUubGVuZ3RoKT09PWV9LGlzRW1haWw6ZnVuY3Rpb24obil7dmFyIGk9ZS50cmltKG4pO3JldHVybiF0LmlzRW1wdHkoaSkmJnIudGVzdChpKX19O3JldHVybiBvfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDM0NiksbigzMzEpLG4oNTAyKSxuKDUwMyksbig1MDQpLG4oMzI3KSxuKDUwNSldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhKXtmdW5jdGlvbiBsKGUpe2lmKCFlKXJldHVybnt9O3ZhciBuPXt9O3JldHVybiB0LmVhY2godC5rZXlzKGUpLGZ1bmN0aW9uKHQpe25bdC50b0xvd2VyQ2FzZSgpXT1lW3RdfSksdC5tYXBPYmplY3QobixmdW5jdGlvbihlKXt2YXIgbj17bG9naW46e30sY291bnRyeTp7fX07aWYoIXQuaXNPYmplY3QoZSkpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZvcm1hdCBmb3IgImkxOG4iJyk7cmV0dXJuIHQuZWFjaChlLGZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5zcGxpdCgvXmNvdW50cnlcLi8pO2kubGVuZ3RoPjE/bi5jb3VudHJ5W2lbMV1dPXQ6bi5sb2dpbltpWzBdXT10fSksbn0pfWZ1bmN0aW9uIGMoKXt2YXIgdD1KU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHApKTtyZXR1cm4gdCYmdC52ZXJzaW9uPT09cy52ZXJzaW9ufHwodD17dmVyc2lvbjpzLnZlcnNpb259KSx0fWZ1bmN0aW9uIHUodCxlLG4pe3ZhciBpPWMoKTtpW3RdPXtsb2dpbjplLGNvdW50cnk6bn0sbG9jYWxTdG9yYWdlLnNldEl0ZW0ocCxKU09OLnN0cmluZ2lmeShpKSl9ZnVuY3Rpb24gZCh0LGUsaSl7dmFyIHIsbztyZXR1cm4gcj1lLnJlcGxhY2UoIi0iLCJfIiksbz1pLnJld3JpdGUoZih7YnVuZGxlOnQsbGFuZ3VhZ2VDb2RlOnJ9KSksbi5hamF4KHt1cmw6aS5iYXNlVXJsK28sZGF0YVR5cGU6Impzb25wIixjYWNoZTohMCx0aW1lb3V0OjVlMyxqc29ucENhbGxiYWNrOiJqc29ucF8iK3R9KX1mdW5jdGlvbiBoKG4saSl7aWYoImVuIj09PW58fCF0LmNvbnRhaW5zKHMuc3VwcG9ydGVkTGFuZ3VhZ2VzLG4pKXJldHVybiBlKHt9KTt2YXIgcj0hYS5sb2NhbFN0b3JhZ2VJc05vdFN1cHBvcnRlZCgpO2lmKHIpe3ZhciBsPWMoKTtpZihsW25dKXJldHVybiBlKGxbbl0pfXJldHVybiBlLmFsbChbZCgibG9naW4iLG4saSksZCgiY291bnRyeSIsbixpKV0pLnNwcmVhZChmdW5jdGlvbih0LGUpe3JldHVybiByJiZ1KG4sdCxlKSx7bG9naW46dCxjb3VudHJ5OmV9fSkuZmFpbChmdW5jdGlvbigpe3JldHVybiBvLndhcm4oIlVuYWJsZSB0byBsb2FkIGxhbmd1YWdlOiAiK24pLHt9fSl9dmFyIHA9Im9zdy5sYW5ndWFnZXMiLGY9dC50ZW1wbGF0ZSgiL2xhYmVscy9qc29ucC97e2J1bmRsZX19X3t7bGFuZ3VhZ2VDb2RlfX0uanNvbnAiKTtyZXR1cm57bG9naW46aSxjb3VudHJ5OnIsY291cmFnZTppLGN1cnJlbnRMYW5ndWFnZTpudWxsLGlzTG9hZGVkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmN1cnJlbnRMYW5ndWFnZT09PXR9LGxvYWRMYW5ndWFnZTpmdW5jdGlvbihlLG4sbyl7dmFyIHM9bChuKSxhPWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gaChlLG8pLnRoZW4odC5iaW5kKGZ1bmN0aW9uKG4pe3RoaXMubG9naW49dC5leHRlbmQoe30saSxuLmxvZ2luKSx0aGlzLmNvdW50cnk9dC5leHRlbmQoe30scixuLmNvdW50cnkpLHRoaXMuY291cmFnZT10LmV4dGVuZCh7fSxpLG4ubG9naW4pLHNbYV0mJih0LmV4dGVuZCh0aGlzLmxvZ2luLHNbYV0ubG9naW4pLHQuZXh0ZW5kKHRoaXMuY291bnRyeSxzW2FdLmNvdW50cnkpLHQuZXh0ZW5kKHRoaXMuY291cmFnZSxzW2FdLmxvZ2luKSksdGhpcy5jdXJyZW50TGFuZ3VhZ2U9ZX0sdGhpcykpfX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e3NpZ25vdXQ6IlNpZ24gT3V0IixyZW1lbWJlcjoiUmVtZW1iZXIgbWUiLHJlbWVtYmVyRGV2aWNlOiJUcnVzdCB0aGlzIGRldmljZSIsInJlbWVtYmVyRGV2aWNlLnRpbWViYXNlZCI6IkRvIG5vdCBjaGFsbGVuZ2UgbWUgb24gdGhpcyBkZXZpY2UgZm9yIHRoZSBuZXh0IHswfSIsInJlbWVtYmVyRGV2aWNlLmRldmljZWJhc2VkIjoiRG8gbm90IGNoYWxsZW5nZSBtZSBvbiB0aGlzIGRldmljZSBhZ2FpbiIsYXV0b1B1c2g6IlNlbmQgcHVzaCBhdXRvbWF0aWNhbGx5Iix1bmxvY2thY2NvdW50OiJVbmxvY2sgYWNjb3VudD8iLG5lZWRoZWxwOiJOZWVkIGhlbHAgc2lnbmluZyBpbj8iLGdvYmFjazoiQmFjayB0byBTaWduIEluIixmb3Jnb3RwYXNzd29yZDoiRm9yZ290IHBhc3N3b3JkPyIsaGVscDoiSGVscCIscmV0cnk6IlJldHJ5IiwibWludXRlcy5vbmVNaW51dGUiOiJtaW51dGUiLG1pbnV0ZXM6InswfSBtaW51dGVzIixob3VyczoiezB9IGhvdXJzIixkYXlzOiJ7MH0gZGF5cyIsImVycm9yLmNvbmZpZyI6IlRoZXJlIHdhcyBhIGNvbmZpZ3VyYXRpb24gZXJyb3IiLCJlcnJvci5yZXF1aXJlZC5hdXRoUGFyYW1zIjonTWlzc2luZyBwYXJhbWV0ZXJzIGZvciB0aGUgY29uZmlndXJlZCBhdXRoZW50aWNhdGlvbiBzY2hlbWUgLSAiT0FVVEgyIicsImVycm9yLnJlcXVpcmVkLmJhc2VVcmwiOiciYmFzZVVybCIgaXMgYSByZXF1aXJlZCB3aWRnZXQgcGFyYW1ldGVyJywiZXJyb3IucmVxdWlyZWQuc3VjY2VzcyI6IkEgc3VjY2VzcyBoYW5kbGVyIGlzIHJlcXVpcmVkIiwiZXJyb3IucmVxdWlyZWQuZWwiOiciZWwiIGlzIGEgcmVxdWlyZWQgd2lkZ2V0IHBhcmFtZXRlcicsImVycm9yLnVuc3VwcG9ydGVkLmJyb3dzZXIiOiJVbnN1cHBvcnRlZCBicm93c2VyIiwiZXJyb3IudW5zdXBwb3J0ZWQuY29ycyI6IlVuc3VwcG9ydGVkIGJyb3dzZXIgLSBtaXNzaW5nIENPUlMgc3VwcG9ydCIsImVycm9yLnVuc3VwcG9ydGVkLmxvY2FsU3RvcmFnZSI6IlVuc3VwcG9ydGVkIGJyb3dzZXIgLSBtaXNzaW5nIGxvY2FsU3RvcmFnZSBzdXBwb3J0IiwiZXJyb3IuZW5hYmxlZC5jb3JzIjoiVGhlcmUgd2FzIGFuIGVycm9yIHNlbmRpbmcgdGhlIHJlcXVlc3QgLSBoYXZlIHlvdSBlbmFibGVkIENPUlM/IiwiZXJyb3IuZXhwaXJlZC5zZXNzaW9uIjoiWW91ciBzZXNzaW9uIGhhcyBleHBpcmVkLiBQbGVhc2UgdHJ5IHRvIGxvZyBpbiBhZ2Fpbi4iLCJlcnJvci5hdXRoLmxvY2tlZE91dCI6IllvdXIgYWNjb3VudCBpcyBsb2NrZWQuIFBsZWFzZSBjb250YWN0IHlvdXIgYWRtaW5pc3RyYXRvci4iLCJlcnJvci5vYXV0aC5pZFRva2VuIjoiVGhlcmUgd2FzIGEgcHJvYmxlbSBnZW5lcmF0aW5nIHRoZSBpZF90b2tlbiBmb3IgdGhlIHVzZXIuIFBsZWFzZSB0cnkgYWdhaW4uIiwiZXJyb3IubmV0d29yay5jb25uZWN0aW9uIjoiVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlci4gUGxlYXNlIGNoZWNrIHlvdXIgbmV0d29yayBjb25uZWN0aW9uLiIsImVycm9yLnVzZXJuYW1lLnJlcXVpcmVkIjoiUGxlYXNlIGVudGVyIGEgdXNlcm5hbWUiLCJlcnJvci5wYXNzd29yZC5yZXF1aXJlZCI6IlBsZWFzZSBlbnRlciBhIHBhc3N3b3JkIiwiZXJyb3JzLkUwMDAwMDA0IjoiU2lnbiBpbiBmYWlsZWQhIiwiZXJyb3JzLkUwMDAwMDY5IjoiWW91ciBhY2NvdW50IHdhcyBsb2NrZWQgZHVlIHRvIGV4Y2Vzc2l2ZSBNRkEgYXR0ZW1wdHMuIiwiZXJyb3JzLkUwMDAwMDQ3IjoiWW91IGV4Y2VlZGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiByZXF1ZXN0cy4gVHJ5IGFnYWluIGluIGEgd2hpbGUuIiwiZXJyb3JzLkUwMDAwMDAxIjoiQXBpIHZhbGlkYXRpb24gZmFpbGVkOiB7MH0iLCJlcnJvcnMuRTAwMDAwMDIiOiJUaGUgcmVxdWVzdCB3YXMgbm90IHZhbGlkOiB7MH0iLCJlcnJvcnMuRTAwMDAwMDMiOiJUaGUgcmVxdWVzdCBib2R5IHdhcyBub3Qgd2VsbC1mb3JtZWQuIiwiZXJyb3JzLkUwMDAwMDA1IjoiSW52YWxpZCBzZXNzaW9uIiwiZXJyb3JzLkUwMDAwMDA2IjoiWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gcGVyZm9ybSB0aGUgcmVxdWVzdGVkIGFjdGlvbiIsImVycm9ycy5FMDAwMDAwNyI6Ik5vdCBmb3VuZDogezB9IiwiZXJyb3JzLkUwMDAwMDA4IjoiVGhlIHJlcXVlc3RlZCBwYXRoIHdhcyBub3QgZm91bmQiLCJlcnJvcnMuRTAwMDAwMDkiOiJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLCJlcnJvcnMuRTAwMDAwMTAiOiJTZXJ2aWNlIGlzIGluIHJlYWQgb25seSBtb2RlIiwiZXJyb3JzLkUwMDAwMDExIjoiSW52YWxpZCB0b2tlbiBwcm92aWRlZCIsImVycm9ycy5FMDAwMDAxMiI6IlVuc3VwcG9ydGVkIG1lZGlhIHR5cGUiLCJlcnJvcnMuRTAwMDAwMTMiOiJJbnZhbGlkIGNsaWVudCBhcHAgaWQiLCJlcnJvcnMuRTAwMDAwMTUiOiJZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIGZlYXR1cmUgeW91IGFyZSByZXF1ZXN0aW5nIiwiZXJyb3JzLkUwMDAwMDE2IjoiQWN0aXZhdGlvbiBmYWlsZWQgYmVjYXVzZSB0aGUgdXNlciBpcyBhbHJlYWR5IGFjdGl2ZSIsImVycm9ycy5FMDAwMDAxNyI6IlBhc3N3b3JkIHJlc2V0IGZhaWxlZCIsImVycm9ycy5FMDAwMDAxOCI6IkJhZCByZXF1ZXN0LiAgQWNjZXB0IGFuZC9vciBDb250ZW50LVR5cGUgaGVhZGVycyBhcmUgbGlrZWx5IG5vdCBzZXQuIiwiZXJyb3JzLkUwMDAwMDE5IjoiQmFkIHJlcXVlc3QuICBBY2NlcHQgYW5kL29yIENvbnRlbnQtVHlwZSBoZWFkZXJzIGxpa2VseSBkbyBub3QgbWF0Y2ggc3VwcG9ydGVkIHZhbHVlcy4iLCJlcnJvcnMuRTAwMDAwMjAiOiJCYWQgcmVxdWVzdC4iLCJlcnJvcnMuRTAwMDAwMjEiOiJCYWQgcmVxdWVzdC4gIEFjY2VwdCBhbmQvb3IgQ29udGVudC1UeXBlIGhlYWRlcnMgbGlrZWx5IGRvIG5vdCBtYXRjaCBzdXBwb3J0ZWQgdmFsdWVzLiIsImVycm9ycy5FMDAwMDAyMiI6IlRoZSBlbmRwb2ludCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBwcm92aWRlZCBIVFRQIG1ldGhvZCIsImVycm9ycy5FMDAwMDAyMyI6Ik9wZXJhdGlvbiBmYWlsZWQgYmVjYXVzZSB1c2VyIHByb2ZpbGUgaXMgbWFzdGVyZWQgdW5kZXIgYW5vdGhlciBzeXN0ZW0iLCJlcnJvcnMuRTAwMDAwMjQiOiJCYWQgcmVxdWVzdC4gIFRoaXMgb3BlcmF0aW9uIG9uIGFwcCBtZXRhZGF0YSBpcyBub3QgeWV0IHN1cHBvcnRlZC4iLCJlcnJvcnMuRTAwMDAwMjUiOiJBcHAgdmVyc2lvbiBhc3NpZ25tZW50IGZhaWxlZC4iLCJlcnJvcnMuRTAwMDAwMjYiOiJUaGlzIGVuZHBvaW50IGhhcyBiZWVuIGRlcHJlY2F0ZWQuIiwiZXJyb3JzLkUwMDAwMDI3IjoiR3JvdXAgcHVzaCBiYWQgcmVxdWVzdCA6IHswfSIsImVycm9ycy5FMDAwMDAyOCI6IlRoZSByZXF1ZXN0IGlzIG1pc3NpbmcgYSByZXF1aXJlZCBwYXJhbWV0ZXIuIiwiZXJyb3JzLkUwMDAwMDI5IjoiSW52YWxpZCBwYWdpbmcgcmVxdWVzdC4iLCJlcnJvcnMuRTAwMDAwMzAiOiJCYWQgcmVxdWVzdC4gSW52YWxpZCBkYXRlLiBEYXRlcyBtdXN0IGJlIG9mIHRoZSBmb3JtIHl5eXktTU0tZGQnJ1QnJ0hIOm1tOnNzLlNTU1paLCBlLmcuIDIwMTMtMDEtMDFUMTI6MDA6MDAuMDAwLTA3OjAwLiIsImVycm9ycy5FMDAwMDAzMSI6IkludmFsaWQgc2VhcmNoIGNyaXRlcmlhLiIsImVycm9ycy5FMDAwMDAzMiI6IlVubG9jayBpcyBub3QgYWxsb3dlZCBmb3IgdGhpcyB1c2VyLiIsImVycm9ycy5FMDAwMDAzMyI6IkJhZCByZXF1ZXN0LiBDYW4ndCBzcGVjaWZ5IGEgc2VhcmNoIHF1ZXJ5IGFuZCBmaWx0ZXIgaW4gdGhlIHNhbWUgcmVxdWVzdC4iLCJlcnJvcnMuRTAwMDAwMzQiOiJGb3Jnb3QgcGFzc3dvcmQgbm90IGFsbG93ZWQgb24gc3BlY2lmaWVkIHVzZXIuIiwiZXJyb3JzLkUwMDAwMDM1IjoiQ2hhbmdlIHBhc3N3b3JkIG5vdCBhbGxvd2VkIG9uIHNwZWNpZmllZCB1c2VyLiIsImVycm9ycy5FMDAwMDAzNiI6IkNoYW5nZSByZWNvdmVyeSBxdWVzdGlvbiBub3QgYWxsb3dlZCBvbiBzcGVjaWZpZWQgdXNlci4iLCJlcnJvcnMuRTAwMDAwMzciOiJUeXBlIG1pc21hdGNoIGV4Y2VwdGlvbi4iLCJlcnJvcnMuRTAwMDAwMzgiOiJUaGlzIG9wZXJhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiB0aGUgdXNlcicncyBjdXJyZW50IHN0YXR1cy4iLCJlcnJvcnMuRTAwMDAwMzkiOiJPcGVyYXRpb24gb24gYXBwbGljYXRpb24gc2V0dGluZ3MgZmFpbGVkLiIsImVycm9ycy5FMDAwMDA0MCI6IkFwcGxpY2F0aW9uIGxhYmVsIG11c3Qgbm90IGJlIHRoZSBzYW1lIGFzIGFuIGV4aXN0aW5nIGFwcGxpY2F0aW9uIGxhYmVsLiIsImVycm9ycy5FMDAwMDA0MSI6IkNyZWRlbnRpYWxzIHNob3VsZCBub3QgYmUgc2V0IG9uIHRoaXMgcmVzb3VyY2UgYmFzZWQgb24gdGhlIHNjaGVtZS4iLCJlcnJvcnMuRTAwMDAwNDIiOiJTZXR0aW5nIHRoZSBlcnJvciBwYWdlIHJlZGlyZWN0IFVSTCBmYWlsZWQuIiwiZXJyb3JzLkUwMDAwMDQzIjoiU2VsZiBzZXJ2aWNlIGFwcGxpY2F0aW9uIGFzc2lnbm1lbnQgaXMgbm90IGVuYWJsZWQuIiwiZXJyb3JzLkUwMDAwMDQ0IjoiU2VsZiBzZXJ2aWNlIGFwcGxpY2F0aW9uIGFzc2lnbm1lbnQgaXMgbm90IHN1cHBvcnRlZC4iLCJlcnJvcnMuRTAwMDAwNDUiOiJGaWVsZCBtYXBwaW5nIGJhZCByZXF1ZXN0LiIsImVycm9ycy5FMDAwMDA0NiI6IkRlYWN0aXZhdGUgYXBwbGljYXRpb24gZm9yIHVzZXIgZm9yYmlkZGVuLiIsImVycm9ycy5FMDAwMDA0OCI6IkVudGl0eSBub3QgZm91bmQgZXhjZXB0aW9uLiIsImVycm9ycy5FMDAwMDA0OSI6IkludmFsaWQgU0NJTSBkYXRhIGZyb20gU0NJTSBpbXBsZW1lbnRhdGlvbi4iLCJlcnJvcnMuRTAwMDAwNTAiOiJJbnZhbGlkIFNDSU0gZGF0YSBmcm9tIGNsaWVudC4iLCJlcnJvcnMuRTAwMDAwNTEiOiJObyByZXNwb25zZSBmcm9tIFNDSU0gaW1wbGVtZW50YXRpb24uIiwiZXJyb3JzLkUwMDAwMDUyIjoiRW5kcG9pbnQgbm90IGltcGxlbWVudGVkLiIsImVycm9ycy5FMDAwMDA1MyI6IkludmFsaWQgU0NJTSBmaWx0ZXIuIiwiZXJyb3JzLkUwMDAwMDU0IjoiSW52YWxpZCBwYWdpbmF0aW9uIHByb3BlcnRpZXMuIiwiZXJyb3JzLkUwMDAwMDU1IjoiRHVwbGljYXRlIGdyb3VwLiIsImVycm9ycy5FMDAwMDA1NiI6IkRlbGV0ZSBhcHBsaWNhdGlvbiBmb3JiaWRkZW4uIiwiZXJyb3JzLkUwMDAwMDU3IjoiQWNjZXNzIHRvIHRoaXMgYXBwbGljYXRpb24gaXMgZGVuaWVkIGR1ZSB0byBhIHBvbGljeS4iLCJlcnJvcnMuRTAwMDAwNTgiOiJBY2Nlc3MgdG8gdGhpcyBhcHBsaWNhdGlvbiByZXF1aXJlcyBNRkE6IHswfSIsImVycm9ycy5FMDAwMDA1OSI6IlRoZSBjb25uZWN0b3IgY29uZmlndXJhdGlvbiBjb3VsZCBub3QgYmUgdGVzdGVkLiBNYWtlIHN1cmUgdGhhdCB0aGUgVVJMLCBBdXRoZW50aWNhdGlvbiBQYXJhbWV0ZXJzIGFyZSBjb3JyZWN0IGFuZCB0aGF0IHRoZXJlIGlzIGFuIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZSBhdCB0aGUgVVJMIHByb3ZpZGVkLiIsImVycm9ycy5FMDAwMDA2MCI6IlVuc3VwcG9ydGVkIG9wZXJhdGlvbi4iLCJlcnJvcnMuRTAwMDAwNjEiOiJUYWIgZXJyb3I6IHswfSIsImVycm9ycy5FMDAwMDA2MiI6IlRoZSBzcGVjaWZpZWQgdXNlciBpcyBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoZSBhcHBsaWNhdGlvbi4iLCJlcnJvcnMuRTAwMDAwNjMiOiJJbnZhbGlkIGNvbWJpbmF0aW9uIG9mIHBhcmFtZXRlcnMgc3BlY2lmaWVkLiIsImVycm9ycy5FMDAwMDA2NCI6IlBhc3N3b3JkIGlzIGV4cGlyZWQgYW5kIG11c3QgYmUgY2hhbmdlZC4iLCJlcnJvcnMuRTAwMDAwNjUiOiJJbnRlcm5hbCBlcnJvciBwcm9jZXNzaW5nIGFwcCBtZXRhZGF0YS4iLCJlcnJvcnMuRTAwMDAwNjYiOiJBUE5TIGlzIG5vdCBjb25maWd1cmVkLCBjb250YWN0IHlvdXIgYWRtaW4iLCJlcnJvcnMuRTAwMDAwNjciOiJGYWN0b3JzIFNlcnZpY2UgRXJyb3IuIiwiZXJyb3JzLkUwMDAwMDcwIjoiV2FpdGluZyBmb3IgQUNLIiwiZXJyb3JzLkUwMDAwMDcxIjoiVW5zdXBwb3J0ZWQgT1MgVmVyc2lvbjogezB9IiwiZXJyb3JzLkUwMDAwMDcyIjoiTUlNIHBvbGljeSBzZXR0aW5ncyBoYXZlIGRpc2FsbG93ZWQgZW5yb2xsbWVudCBmb3IgdGhpcyB1c2VyIiwiZXJyb3JzLkUwMDAwMDczIjoiVXNlciByZWplY3RlZCBhdXRoZW50aWNhdGlvbiIsImVycm9ycy5FMDAwMDA3NCI6IkZhY3RvciBTZXJ2aWNlIEVycm9yIiwiZXJyb3JzLkUwMDAwMDc1IjoiQ2Fubm90IG1vZGlmeSB0aGUgezB9IGF0dHJpYnV0ZSBiZWNhdXNlIGl0IGhhcyBhIGZpZWxkIG1hcHBpbmcgYW5kIHByb2ZpbGUgcHVzaCBpcyBlbmFibGVkLiIsImVycm9ycy5FMDAwMDA3NiI6IkNhbm5vdCBtb2RpZnkgdGhlIGFwcCB1c2VyIGJlY2F1c2UgaXQgaXMgbWFzdGVyZWQgYnkgYW4gZXh0ZXJuYWwgYXBwLiIsImVycm9ycy5FMDAwMDA3NyI6IkNhbm5vdCBtb2RpZnkgdGhlIHswfSBhdHRyaWJ1dGUgYmVjYXVzZSBpdCBpcyByZWFkLW9ubHkuIiwiZXJyb3JzLkUwMDAwMDc4IjoiQ2Fubm90IG1vZGlmeSB0aGUgezB9IGF0dHJpYnV0ZSBiZWNhdXNlIGl0IGlzIGltbXV0YWJsZS4iLCJlcnJvcnMuRTAwMDAwNzkiOiJUaGlzIG9wZXJhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiB0aGUgY3VycmVudCBhdXRoZW50aWNhdGlvbiBzdGF0ZS4iLCJlcnJvcnMuRTAwMDAwODEiOiJDYW5ub3QgbW9kaWZ5IHRoZSB7MH0gYXR0cmlidXRlIGJlY2F1c2UgaXQgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUgZm9yIHRoaXMgYXBwbGljYXRpb24uIiwiZXJyb3JzLkUwMDAwMDgyIjoiRWFjaCBjb2RlIGNhbiBvbmx5IGJlIHVzZWQgb25jZS4gUGxlYXNlIHdhaXQgZm9yIGEgbmV3IGNvZGUgYW5kIHRyeSBhZ2Fpbi4iLCJlcnJvcnMuRTAwMDAwODMiOiJQYXNzQ29kZSBpcyB2YWxpZCBidXQgZXhjZWVkZWQgdGltZSB3aW5kb3cuIiwiZXJyb3JzLkUwMDAwMDg0IjoiQXBwIGV2YWx1YXRpb24gZXJyb3IuIiwiZXJyb3JzLkUwMDAwMDg1IjoiWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHlvdXIgYWNjb3VudCBhdCB0aGlzIHRpbWUuIiwiZXJyb3JzLkUwMDAwMDg2IjoiVGhpcyBwb2xpY3kgY2Fubm90IGJlIGFjdGl2YXRlZCBhdCB0aGlzIHRpbWUuIiwiZXJyb3JzLkUwMDAwMDg3IjoiVGhlIHJlY292ZXJ5IHF1ZXN0aW9uIGFuc3dlciBkaWQgbm90IG1hdGNoIG91ciByZWNvcmRzLiIsImVycm9ycy5FMDAwMDA5MCI6IlRoZSByb2xlIHNwZWNpZmllZCBpcyBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoZSB1c2VyLiIsImVycm9ycy5FMDAwMDA5MSI6IlRoZSBwcm92aWRlZCByb2xlIHR5cGUgd2FzIG5vdCB0aGUgc2FtZSBhcyByZXF1aXJlZCByb2xlIHR5cGUuIiwiZXJyb3JzLkUwMDAwMDkyIjoiQWNjZXNzIHRvIHRoaXMgYXBwbGljYXRpb24gcmVxdWlyZXMgcmUtYXV0aGVudGljYXRpb246IHswfSIsImVycm9ycy5FMDAwMDA5MyI6IlRhcmdldCBjb3VudCBsaW1pdCBleGNlZWRlZCIsImVycm9ycy5FMDAwMDA5NCI6IlRoZSBwcm92aWRlZCBmaWx0ZXIgaXMgdW5zdXBwb3J0ZWQuIiwiZXJyb3JzLkUwMDAwMDk1IjoiUmVjb3Zlcnkgbm90IGFsbG93ZWQgZm9yIHVua25vd24gdXNlci4iLCJlcnJvcnMuRTAwMDAwOTYiOiJUaGlzIGNlcnRpZmljYXRlIGhhcyBhbHJlYWR5IGJlZW4gdXBsb2FkZWQgd2l0aCBraWQ9ezB9LiIsImVycm9ycy5FMDAwMDA5NyI6IlRoZXJlIGlzIG5vIHZlcmlmaWVkIHBob25lIG51bWJlciBvbiBmaWxlLiIsImVycm9ycy5FMDAwMDA5OCI6IlRoaXMgcGhvbmUgbnVtYmVyIGlzIGludmFsaWQuIiwiZXJyb3JzLkUwMDAwMDk5IjoiT25seSBudW1iZXJzIGxvY2F0ZWQgaW4gVVMgYW5kIENhbmFkYSBhcmUgYWxsb3dlZC4gIENvbnRhY3QgeW91ciBhZG1pbmlzdHJhdG9yIGlmIHRoaXMgaXMgYSBwcm9ibGVtLiIsImVycm9ycy5FMDAwMDEwMCI6IlVuYWJsZSB0byBwZXJmb3JtIHNlYXJjaCBxdWVyeS4iLCJlcnJvcnMuRTAwMDAxMDEiOiJVcGxvYWQgZmFpbGVkIGJlY2F1c2Ugb2YgYSBwcm9ibGVtIHdpdGggeW91ciBpcGEgZmlsZSwgezB9IiwiZXJyb3JzLkUwMDAwMTAyIjoiWXViaUtleSBjYW5ub3QgYmUgZGVsZXRlZCB3aGlsZSBhc3NpZ25lZCB0byBhbiB1c2VyLiBQbGVhc2UgZGVhY3RpdmF0ZSBZdWJpS2V5IHVzaW5nIHJlc2V0IE1GQSBhbmQgdHJ5IGFnYWluIiwiZXJyb3JzLkUwMDAwMTAzIjoiQWN0aW9uIG9uIGRldmljZSBhbHJlYWR5IGluIHF1ZXVlIG9yIGluIHByb2dyZXNzIiwiZXJyb3JzLkUwMDAwMTA0IjoiRGV2aWNlIGlzIGFscmVhZHkgbG9ja2VkIGFuZCBjYW5ub3QgYmUgbG9ja2VkIGFnYWluIiwiZXJyb3JzLkUwMDAwMTA1IjoiWW91IGhhdmUgYWNjZXNzZWQgYW4gYWNjb3VudCByZWNvdmVyeSBsaW5rIHRoYXQgaGFzIGV4cGlyZWQgb3IgYmVlbiBwcmV2aW91c2x5IHVzZWQuIiwiZXJyb3JzLkUwMDAwMTA2IjoiV2FpdCBmb3IgdG9rZW4gdG8gY2hhbmdlLCB0aGVuIGVudGVyIHRoZSBuZXcgdG9rZW5jb2RlLiIsImVycm9ycy5FMDAwMDEwNyI6IlRoZSBlbnRpdHkgaXMgbm90IGluIHRoZSBleHBlY3RlZCBzdGF0ZSBmb3IgdGhlIHJlcXVlc3RlZCB0cmFuc2l0aW9uLiIsImVycm9ycy5FMDAwMDEwOSI6IkFuIFNNUyBtZXNzYWdlIHdhcyByZWNlbnRseSBzZW50LiBQbGVhc2Ugd2FpdCAzMCBzZWNvbmRzIGJlZm9yZSB0cnlpbmcgYWdhaW4uIiwiZXJyb3JzLkUwMDAwMTEwIjoiWW91IGhhdmUgYWNjZXNzZWQgYSBsaW5rIHRoYXQgaGFzIGV4cGlyZWQgb3IgaGFzIGJlZW4gcHJldmlvdXNseSB1c2VkLiIsImVycm9ycy5FMDAwMDExMSI6IkNhbm5vdCBtb2RpZnkgdGhlIHswfSBvYmplY3QgYmVjYXVzZSBpdCBpcyByZWFkLW9ubHkuIiwiZXJyb3JzLkUwMDAwMTEyIjoiQ2Fubm90IHVwZGF0ZSB0aGlzIHVzZXIgYmVjYXVzZSB0aGV5IGFyZSBzdGlsbCBiZWluZyBhY3RpdmF0ZWQuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBmZXcgbWludXRlcy4iLCJlcnJvcnMuRTAwMDAxMTMiOiJ7MH0uIiwiZXJyb3JzLkUwMDAwMTE0IjoiQSB1c2VyIHdpdGggdGhpcyBsb2dpbiBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgY3VycmVudCBvcmdhbml6YXRpb24uIiwiZXJyb3JzLkUwMDAwMTE1IjoiVXBsb2FkIGZhaWxlZCwgezB9IiwiZXJyb3JzLkUwMDAwMTE2IjoiezB9Iiwib2Zvcm0ubmV4dCI6Ik5leHQiLCJvZm9ybS52ZXJpZnkiOiJWZXJpZnkiLCJvZm9ybS5zZW5kIjoiU2VuZCIsIm9mb3JtLmJhY2siOiJCYWNrIiwib2Zvcm0uc2F2ZSI6IlNhdmUiLCJvZm9ybS5jYW5jZWwiOiJDYW5jZWwiLCJvZm9ybS5lZGl0IjoiRWRpdCIsIm9mb3JtLnByZXZpb3VzIjoiUHJldmlvdXMiLCJvZm9ybS5lcnJvcmJhbm5lci50aXRsZSI6IldlIGZvdW5kIHNvbWUgZXJyb3JzLiBQbGVhc2UgcmV2aWV3IHRoZSBmb3JtIGFuZCBtYWtlIGNvcnJlY3Rpb25zLiIsIm9mb3JtLmVycm9ybXNnLnRpdGxlIjoiUGxlYXNlIHJldmlldyB0aGUgZm9ybSB0byBjb3JyZWN0IHRoZSBmb2xsb3dpbmcgZXJyb3JzOiIsIm9mb3JtLmVycm9yLnVuZXhwZWN0ZWQiOiJUaGVyZSB3YXMgYW4gdW5leHBlY3RlZCBpbnRlcm5hbCBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbg==", "base64"));
  res.write(new Buffer("LiIsIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuYmxhbmsiOiJUaGUgZmllbGQgY2Fubm90IGJlIGxlZnQgYmxhbmsiLCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmFzY2lpIjoiVGhlIGZpZWxkIGNhbm5vdCBjb250YWluIE5vbi1BU0NJSSBjaGFyYWN0ZXJzIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC53cm9uZy50eXBlIjoiVGhlIGZpZWxkIGlzIG9mIHRoZSB3cm9uZyB0eXBlIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC5pbnZhbGlkIjoiVGhlIGZpZWxkIGhhcyBhbiBpbnZhbGlkIHZhbHVlIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC52YWx1ZS5ub3QuYWxsb3dlZCI6IlRoZSBmaWVsZCB2YWx1ZSBpcyBub3QgYWxsb3dlZCIsIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuYXJyYXkubWluSXRlbXMiOiJUaGUgYXJyYXkgZG9lcyBub3QgaGF2ZSBlbm91Z2ggaXRlbXMiLCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmFycmF5Lm1heEl0ZW1zIjoiVGhlIGFycmF5IGNvbnRhaW5zIHRvbyBtYW55IGl0ZW1zIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC5hcnJheS51bmlxdWUiOiJUaGUgYXJyYXkgY2FuIG9ubHkgaGF2ZSB1bmlxdWUgdmFsdWVzIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC50b28ubG9uZyI6IlRoZSBmaWVsZCBjYW5ub3QgZXhjZWVkIHswfSBjaGFyYWN0ZXJzIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC50b28uc21hbGwiOiJUaGUgZmllbGQgY2Fubm90IGJlIGxlc3MgdGhhbiB7MH0gY2hhcmFjdGVycyIsIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuc3RyaW5nLm1pbkxlbmd0aCI6IlRoaXMgZmllbGQgY2Fubm90IGJlIGxlc3MgdGhhbiB0aGUgbWluaW11bSByZXF1aXJlZCBjaGFyYWN0ZXJzIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC5zdHJpbmcubWF4TGVuZ3RoIjoiVGhpcyBmaWVsZCBjYW5ub3QgZXhjZWVkIHRoZSBtYXhpbXVtIGFsbG93ZWQgY2hhcmFjdGVycyIsIm1vZGVsLnZhbGlkYXRpb24uZmllbGQuaW52YWxpZC5mb3JtYXQuZW1haWwiOiJUaGlzIHZhbHVlIGlzIG5vdCBhIHZhbGlkIGVtYWlsIGFkZHJlc3MiLCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmludmFsaWQuZm9ybWF0LnVyaSI6IlRoaXMgdmFsdWUgaXMgbm90IGEgdmFsaWQgVVJJIiwibW9kZWwudmFsaWRhdGlvbi5maWVsZC5pbnZhbGlkLmZvcm1hdC5pcHY0IjoiVGhpcyB2YWx1ZSBpcyBub3QgYSB2YWxpZCBJUHY0IGFkZHJlc3MiLCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmludmFsaWQuZm9ybWF0Lmhvc3RuYW1lIjoiVGhpcyB2YWx1ZSBpcyBub3QgYSB2YWxpZCBob3N0bmFtZSIsIm1vZGVsLnZhbGlkYXRpb24uZmllbGQudXNlcm5hbWUiOiJQbGVhc2UgY2hlY2sgeW91ciB1c2VybmFtZSIsImZhY3Rvci50b3RwU29mdC5va3RhVmVyaWZ5IjoiT2t0YSBWZXJpZnkiLCJmYWN0b3IudG90cFNvZnQuZ29vZ2xlQXV0aGVudGljYXRvciI6Ikdvb2dsZSBBdXRoZW50aWNhdG9yIiwiZmFjdG9yLnRvdHBTb2Z0LmRlc2NyaXB0aW9uIjoiRW50ZXIgc2luZ2xlLXVzZSBjb2RlIGZyb20gdGhlIG1vYmlsZSBhcHAuIiwiZmFjdG9yLnRvdHBIYXJkLnJzYVNlY3VySWQiOiJSU0EgU2VjdXJJRCIsImZhY3Rvci50b3RwSGFyZC5zeW1hbnRlY1ZpcCI6IlN5bWFudGVjIFZJUCIsImZhY3Rvci50b3RwSGFyZC5kZXNjcmlwdGlvbiI6IkVudGVyIGEgc2luZ2xlLXVzZSBjb2RlIGZyb20gYSBoYXJkd2FyZSB0b2tlbi4iLCJmYWN0b3IudG90cEhhcmQueXViaWtleSI6Ill1YmlrZXkiLCJmYWN0b3IudG90cEhhcmQueXViaWtleS5kZXNjcmlwdGlvbiI6Ikluc2VydCB5b3VyIFl1YmlrZXkgYW5kIHRhcCBpdCB0byBnZXQgYSB2ZXJpZmljYXRpb24gY29kZS4iLCJmYWN0b3IudG90cEhhcmQueXViaWtleS5wbGFjZWhvbGRlciI6IkNsaWNrIGhlcmUsIHRoZW4gdGFwIHlvdXIgWXViaWtleSIsImZhY3Rvci5va3RhVmVyaWZ5UHVzaCI6Ik9rdGEgVmVyaWZ5IiwiZmFjdG9yLnB1c2guZGVzY3JpcHRpb24iOiJVc2UgYSBwdXNoIG5vdGlmaWNhdGlvbiBzZW50IHRvIHRoZSBtb2JpbGUgYXBwLiIsImZhY3Rvci5kdW8iOiJEdW8gU2VjdXJpdHkiLCJmYWN0b3IuZHVvLmRlc2NyaXB0aW9uIjoiVXNlIFB1c2ggTm90aWZpY2F0aW9uLCBTTVMsIG9yIFZvaWNlIGNhbGwgdG8gYXV0aGVudGljYXRlLiIsImZhY3Rvci5zbXMiOiJTTVMgQXV0aGVudGljYXRpb24iLCJmYWN0b3Iuc21zLmRlc2NyaXB0aW9uIjoiRW50ZXIgYSBzaW5nbGUtdXNlIGNvZGUgc2VudCB0byB5b3VyIG1vYmlsZSBwaG9uZS4iLCJmYWN0b3IuY2FsbCI6IlZvaWNlIENhbGwgQXV0aGVudGljYXRpb24iLCJmYWN0b3IuY2FsbC5kZXNjcmlwdGlvbiI6IlVzZSBhIHBob25lIHRvIGF1dGhlbnRpY2F0ZSBieSBmb2xsb3dpbmcgdm9pY2UgaW5zdHJ1Y3Rpb25zLiIsImZhY3Rvci5zZWN1cml0eVF1ZXN0aW9uIjoiU2VjdXJpdHkgUXVlc3Rpb24iLCJmYWN0b3Iuc2VjdXJpdHlRdWVzdGlvbi5kZXNjcmlwdGlvbiI6IlVzZSB0aGUgYW5zd2VyIHRvIGEgc2VjdXJpdHkgcXVlc3Rpb24gdG8gYXV0aGVudGljYXRlLiIsImZhY3Rvci53aW5kb3dzSGVsbG8iOiJXaW5kb3dzIEhlbGxvIiwiZmFjdG9yLndpbmRvd3NIZWxsby5zaWduaW4uZGVzY3JpcHRpb24iOiJTaWduIGluIHRvIE9rdGEgdXNpbmcgV2luZG93cyBIZWxsby4iLCJmYWN0b3IudTJmIjoiU2VjdXJpdHkgS2V5IChVMkYpIiwiZmFjdG9yLnUyZi5kZXNjcmlwdGlvbiI6IlVzZSBhIFVuaXZlcnNhbCAybmQgRmFjdG9yIChVMkYpIHNlY3VyaXR5IGtleSB0byBzaWduIG9uIHRvIE9rdGEuIiwiZmFjdG9yLmVtYWlsIjoiRW1haWwgQXV0aGVudGljYXRpb24iLCJtZmEuY2hhbGxlbmdlLnZlcmlmeSI6IlZlcmlmeSIsIm1mYS5jaGFsbGVuZ2UuYW5zd2VyLnBsYWNlaG9sZGVyIjoiQW5zd2VyIiwibWZhLmNoYWxsZW5nZS5hbnN3ZXIudG9vbHRpcCI6IkFuc3dlciIsIm1mYS5jaGFsbGVuZ2UuYW5zd2VyLnNob3dBbnN3ZXIiOiJTaG93IiwibWZhLmNoYWxsZW5nZS5hbnN3ZXIuaGlkZUFuc3dlciI6IkhpZGUiLCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS5wbGFjZWhvbGRlciI6IkVudGVyIENvZGUiLCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS50b29sdGlwIjoiRW50ZXIgQ29kZSIsIm1mYS5iYWNrVG9GYWN0b3JzIjoiQmFjayB0byBmYWN0b3IgbGlzdCIsIm1mYS5waG9uZU51bWJlci5wbGFjZWhvbGRlciI6IlBob25lIG51bWJlciIsIm1mYS5waG9uZU51bWJlci5leHQucGxhY2Vob2xkZXIiOiJFeHRlbnNpb24iLCJtZmEuc2VuZENvZGUiOiJTZW5kIGNvZGUiLCJtZmEuc2VudCI6IlNlbnQiLCJtZmEucmVzZW5kQ29kZSI6IlJlLXNlbmQgY29kZSIsIm1mYS5jYWxsIjoiQ2FsbCIsIm1mYS5jYWxsaW5nIjoiQ2FsbGluZyIsIm1mYS5yZWRpYWwiOiJSZWRpYWwiLCJtZmEuc2VuZEVtYWlsIjoiU2VuZCBlbWFpbCIsIm1mYS5yZXNlbmRFbWFpbCI6IlJlLXNlbmQgZW1haWwiLCJtZmEuc2NhbkJhcmNvZGUiOiJTY2FuIGJhcmNvZGUiLCJtZmEubm9BY2Nlc3NUb0VtYWlsIjoiQ2FuJ3QgYWNjZXNzIGVtYWlsIiwicGFzc3dvcmQucmVzZXQiOiJSZXNldCBQYXNzd29yZCIsInBhc3N3b3JkLm9sZFBhc3N3b3JkLnBsYWNlaG9sZGVyIjoiT2xkIHBhc3N3b3JkIiwicGFzc3dvcmQub2xkUGFzc3dvcmQudG9vbHRpcCI6Ik9sZCBwYXNzd29yZCIsInBhc3N3b3JkLm5ld1Bhc3N3b3JkLnBsYWNlaG9sZGVyIjoiTmV3IHBhc3N3b3JkIiwicGFzc3dvcmQubmV3UGFzc3dvcmQudG9vbHRpcCI6Ik5ldyBwYXNzd29yZCIsInBhc3N3b3JkLmNvbmZpcm1QYXNzd29yZC5wbGFjZWhvbGRlciI6IlJlcGVhdCBwYXNzd29yZCIsInBhc3N3b3JkLmNvbmZpcm1QYXNzd29yZC50b29sdGlwIjoiUmVwZWF0IHBhc3N3b3JkIiwicGFzc3dvcmQuZXJyb3IubWF0Y2giOiJOZXcgcGFzc3dvcmRzIG11c3QgbWF0Y2giLCJyZWNvdmVyeS5zbXMuaGludCI6IlNNUyBjYW4gb25seSBiZSB1c2VkIGlmIGEgbW9iaWxlIHBob25lIG51bWJlciBoYXMgYmVlbiBjb25maWd1cmVkLiIsInJlY292ZXJ5Lm1vYmlsZS5oaW50IjoiezB9IGNhbiBvbmx5IGJlIHVzZWQgaWYgYSBtb2JpbGUgcGhvbmUgbnVtYmVyIGhhcyBiZWVuIGNvbmZpZ3VyZWQuIiwicmVjb3Zlcnkuc21zIjoiU01TIiwicmVjb3ZlcnkuY2FsbCI6IlZvaWNlIENhbGwiLCJyZWNvdmVyeS5zbXNPckNhbGwiOiJTTVMgb3IgVm9pY2UgQ2FsbCIsImVucm9sbC5jaG9pY2VzLnRpdGxlIjoiU2V0IHVwIG11bHRpZmFjdG9yIGF1dGhlbnRpY2F0aW9uIiwiZW5yb2xsLmNob2ljZXMuZGVzY3JpcHRpb24iOiJZb3VyIGNvbXBhbnkgcmVxdWlyZXMgbXVsdGlmYWN0b3IgYXV0aGVudGljYXRpb24gdG8gYWRkIGFuIGFkZGl0aW9uYWwgbGF5ZXIgb2Ygc2VjdXJpdHkgd2hlbiBzaWduaW5nIGludG8geW91ciBPa3RhIGFjY291bnQiLCJlbnJvbGwuY2hvaWNlcy5vcHRpb25hbCI6IllvdSBjYW4gY29uZmlndXJlIGFueSBhZGRpdGlvbmFsIG9wdGlvbmFsIGZhY3RvciBvciBjbGljayBmaW5pc2giLCJlbnJvbGwuY2hvaWNlcy5saXN0LnNldHVwIjoiU2V0dXAgcmVxdWlyZWQiLCJlbnJvbGwuY2hvaWNlcy5saXN0LmVucm9sbGVkIjoiRW5yb2xsZWQgZmFjdG9ycyIsImVucm9sbC5jaG9pY2VzLmxpc3Qub3B0aW9uYWwiOiJBZGRpdGlvbmFsIG9wdGlvbmFsIGZhY3RvcnMiLCJlbnJvbGwuY2hvaWNlcy5zdGVwIjoiezB9IG9mIHsxfSIsImVucm9sbC5jaG9pY2VzLnNldHVwIjoiU2V0dXAiLCJlbnJvbGwuY2hvaWNlcy5zdWJtaXQuZmluaXNoIjoiRmluaXNoIiwiZW5yb2xsLmNob2ljZXMuc3VibWl0LmNvbmZpZ3VyZSI6IkNvbmZpZ3VyZSBmYWN0b3IiLCJlbnJvbGwuY2hvaWNlcy5zdWJtaXQubmV4dCI6IkNvbmZpZ3VyZSBuZXh0IGZhY3RvciIsImVucm9sbC5zZWN1cml0eVF1ZXN0aW9uLnNldHVwIjoiU2V0dXAgc2VjcmV0IHF1ZXN0aW9uIGF1dGhlbnRpY2F0aW9uIiwic2VjdXJpdHkuZGlzbGlrZWRfZm9vZCI6IldoYXQgaXMgdGhlIGZvb2QgeW91IGxlYXN0IGxpa2VkIGFzIGEgY2hpbGQ/Iiwic2VjdXJpdHkubmFtZV9vZl9maXJzdF9wbHVzaF90b3kiOiJXaGF0IGlzIHRoZSBuYW1lIG9mIHlvdXIgZmlyc3Qgc3R1ZmZlZCBhbmltYWw/Iiwic2VjdXJpdHkuZmlyc3RfYXdhcmQiOiJXaGF0IGRpZCB5b3UgZWFybiB5b3VyIGZpcnN0IG1lZGFsIG9yIGF3YXJkIGZvcj8iLCJzZWN1cml0eS5mYXZvcml0ZV9zZWN1cml0eV9xdWVzdGlvbiI6IldoYXQgaXMgeW91ciBmYXZvcml0ZSBzZWN1cml0eSBxdWVzdGlvbj8iLCJzZWN1cml0eS5mYXZvcml0ZV90b3kiOiJXaGF0IGlzIHRoZSB0b3kvc3R1ZmZlZCBhbmltYWwgeW91IGxpa2VkIHRoZSBtb3N0IGFzIGEga2lkPyIsInNlY3VyaXR5LmZpcnN0X2NvbXB1dGVyX2dhbWUiOiJXaGF0IHdhcyB0aGUgZmlyc3QgY29tcHV0ZXIgZ2FtZSB5b3UgcGxheWVkPyIsInNlY3VyaXR5LmZhdm9yaXRlX21vdmllX3F1b3RlIjoiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIG1vdmllIHF1b3RlPyIsInNlY3VyaXR5LmZpcnN0X3Nwb3J0c190ZWFtX21hc2NvdCI6IldoYXQgd2FzIHRoZSBtYXNjb3Qgb2YgdGhlIGZpcnN0IHNwb3J0cyB0ZWFtIHlvdSBwbGF5ZWQgb24/Iiwic2VjdXJpdHkuZmlyc3RfbXVzaWNfcHVyY2hhc2UiOiJXaGF0IG11c2ljIGFsYnVtIG9yIHNvbmcgZGlkIHlvdSBmaXJzdCBwdXJjaGFzZT8iLCJzZWN1cml0eS5mYXZvcml0ZV9hcnRfcGllY2UiOiJXaGF0IGlzIHlvdXIgZmF2b3JpdGUgcGllY2Ugb2YgYXJ0PyIsInNlY3VyaXR5LmdyYW5kbW90aGVyX2Zhdm9yaXRlX2Rlc2VydCI6IldoYXQgd2FzIHlvdXIgZ3JhbmRtb3RoZXIncyBmYXZvcml0ZSBkZXNzZXJ0PyIsInNlY3VyaXR5LmZpcnN0X3RoaW5nX2Nvb2tlZCI6IldoYXQgd2FzIHRoZSBmaXJzdCB0aGluZyB5b3UgbGVhcm5lZCB0byBjb29rPyIsInNlY3VyaXR5LmNoaWxkaG9vZF9kcmVhbV9qb2IiOiJXaGF0IHdhcyB5b3VyIGRyZWFtIGpvYiBhcyBhIGNoaWxkPyIsInNlY3VyaXR5LmZpcnN0X2tpc3NfbG9jYXRpb24iOiJXaGVyZSBkaWQgeW91IGhhdmUgeW91ciBmaXJzdCBraXNzPyIsInNlY3VyaXR5LnBsYWNlX3doZXJlX3NpZ25pZmljYW50X290aGVyX3dhc19tZXQiOiJXaGVyZSBkaWQgeW91IG1lZXQgeW91ciBzcG91c2Uvc2lnbmlmaWNhbnQgb3RoZXI/Iiwic2VjdXJpdHkuZmF2b3JpdGVfdmFjYXRpb25fbG9jYXRpb24iOiJXaGVyZSBkaWQgeW91IGdv", "base64"));
  res.write(new Buffer("IGZvciB5b3VyIGZhdm9yaXRlIHZhY2F0aW9uPyIsInNlY3VyaXR5Lm5ld195ZWFyc190d29fdGhvdXNhbmQiOiJXaGVyZSB3ZXJlIHlvdSBvbiBOZXcgWWVhcidzIEV2ZSBpbiB0aGUgeWVhciAyMDAwPyIsInNlY3VyaXR5LmZhdm9yaXRlX3NwZWFrZXJfYWN0b3IiOiJXaG8gaXMgeW91ciBmYXZvcml0ZSBzcGVha2VyL29yYXRvcj8iLCJzZWN1cml0eS5mYXZvcml0ZV9ib29rX21vdmllX2NoYXJhY3RlciI6IldobyBpcyB5b3VyIGZhdm9yaXRlIGJvb2svbW92aWUgY2hhcmFjdGVyPyIsInNlY3VyaXR5LmZhdm9yaXRlX3Nwb3J0c19wbGF5ZXIiOiJXaG8gaXMgeW91ciBmYXZvcml0ZSBzcG9ydHMgcGxheWVyPyIsImVucm9sbC5zbXMuc2V0dXAiOiJSZWNlaXZlIGEgY29kZSB2aWEgU01TIHRvIGF1dGhlbnRpY2F0ZSIsImVucm9sbC5zbXMudHJ5X2FnYWluIjoiVGhlIG51bWJlciB5b3UgZW50ZXJlZCBzZWVtcyBpbnZhbGlkLiBJZiB0aGUgbnVtYmVyIGlzIGNvcnJlY3QsIHBsZWFzZSB0cnkgYWdhaW4uIiwiZW5yb2xsLmNhbGwuc2V0dXAiOiJGb2xsb3cgcGhvbmUgY2FsbCBpbnN0cnVjdGlvbnMgdG8gYXV0aGVudGljYXRlIiwiZW5yb2xsLm9ucHJlbS51c2VybmFtZS5wbGFjZWhvbGRlciI6IkVudGVyIHswfSB1c2VybmFtZSIsImVucm9sbC5vbnByZW0udXNlcm5hbWUudG9vbHRpcCI6IkVudGVyIHswfSB1c2VybmFtZSIsImVucm9sbC5vbnByZW0ucGFzc2NvZGUucGxhY2Vob2xkZXIiOiJFbnRlciB7MH0gcGFzc2NvZGUiLCJlbnJvbGwub25wcmVtLnBhc3Njb2RlLnRvb2x0aXAiOiJFbnRlciB7MH0gcGFzc2NvZGUiLCJlbnJvbGwuc3ltYW50ZWNWaXAuc3VidGl0bGUiOiJFbnRlciBDcmVkZW50aWFsIElEIGFuZCB0d28gY29uc2VjdXRpdmUgZ2VuZXJhdGVkIGNvZGVzIiwiZW5yb2xsLnN5bWFudGVjVmlwLmNyZWRlbnRpYWxJZC5wbGFjZWhvbGRlciI6IkVudGVyIGNyZWRlbnRpYWwgSUQiLCJlbnJvbGwuc3ltYW50ZWNWaXAuY3JlZGVudGlhbElkLnRvb2x0aXAiOiJFbnRlciBjcmVkZW50aWFsIElEIiwiZW5yb2xsLnN5bWFudGVjVmlwLnBhc3Njb2RlMS5wbGFjZWhvbGRlciI6IlNlY3VyaXR5IGNvZGUgMSIsImVucm9sbC5zeW1hbnRlY1ZpcC5wYXNzY29kZTEudG9vbHRpcCI6IlNlY3VyaXR5IGNvZGUgMSIsImVucm9sbC5zeW1hbnRlY1ZpcC5wYXNzY29kZTIucGxhY2Vob2xkZXIiOiJTZWN1cml0eSBjb2RlIDIiLCJlbnJvbGwuc3ltYW50ZWNWaXAucGFzc2NvZGUyLnRvb2x0aXAiOiJTZWN1cml0eSBjb2RlIDIiLCJlbnJvbGwueXViaWtleS50aXRsZSI6IlNldHVwIFl1YmlrZXkiLCJlbnJvbGwueXViaWtleS5zdWJ0aXRsZSI6Ikluc2VydCB5b3VyIFl1YmlrZXkgaW50byBhIFVTQiBwb3J0IGFuZCB0YXAgaXQgdG8gZ2VuZXJhdGUgYSB2ZXJpZmljYXRpb24gY29kZSIsImVucm9sbC50b3RwLnRpdGxlIjoiU2V0dXAgezB9IiwiZW5yb2xsLnRvdHAuc2VsZWN0RGV2aWNlIjoiU2VsZWN0IHlvdXIgZGV2aWNlIHR5cGUiLCJlbnJvbGwudG90cC5kb3dubG9hZEFwcCI6J0Rvd25sb2FkIDxhIGhyZWY9InswfSIgY2xhc3M9ImlubGluZS1saW5rIj57MX0gZnJvbSB0aGUgezJ9PC9hPiBvbnRvIHlvdXIgbW9iaWxlIGRldmljZS4nLCJlbnJvbGwudG90cC5pbnN0YWxsQXBwIjoiSW5zdGFsbCB7MH0iLCJlbnJvbGwuZHVvLnRpdGxlIjoiU2V0dXAgRHVvIFNlY3VyaXR5IiwiZW5yb2xsLndpbmRvd3NIZWxsby50aXRsZSI6IkVucm9sbCBXaW5kb3dzIEhlbGxvIiwiZW5yb2xsLndpbmRvd3NIZWxsby5zdWJ0aXRsZSI6IkNsaWNrIGJlbG93IHRvIGVucm9sbCBXaW5kb3dzIEhlbGxvIGFzIGEgc2Vjb25kIGZvcm0gb2YgYXV0aGVudGljYXRpb24iLCJlbnJvbGwud2luZG93c0hlbGxvLnN1YnRpdGxlLmxvYWRpbmciOiJQbGVhc2Ugd2FpdCB3aGlsZSBXaW5kb3dzIEhlbGxvIGlzIGxvYWRpbmcuLi4iLCJlbnJvbGwud2luZG93c0hlbGxvLnNhdmUiOiJFbnJvbGwgV2luZG93cyBIZWxsbyIsImVucm9sbC53aW5kb3dzSGVsbG8uZXJyb3Iubm90V2luZG93cyI6IldpbmRvd3MgSGVsbG8gY2FuIG9ubHkgYmUgdXNlZCBvbiBXaW5kb3dzIEVkZ2Ugd2l0aCBXaW5kb3dzIDEwLiBDb250YWN0IHlvdXIgYWRtaW4gZm9yIGFzc2lzdGFuY2UuIiwiZW5yb2xsLndpbmRvd3NIZWxsby5lcnJvci5ub3RDb25maWd1cmVkSHRtbCI6IldpbmRvd3MgSGVsbG8gaXMgbm90IGNvbmZpZ3VyZWQuIFNlbGVjdCB0aGUgPGI+U3RhcnQ8L2I+IGJ1dHRvbiwgdGhlbiBzZWxlY3QgPGI+U2V0dGluZ3M8L2I+ICZndDsgPGI+QWNjb3VudHM8L2I+ICZndDsgPGI+U2lnbi1pbjwvYj4gdG8gY29uZmlndXJlIFdpbmRvd3MgSGVsbG8uIiwidmVyaWZ5LndpbmRvd3NIZWxsby5zdWJ0aXRsZSI6IlZlcmlmeSB5b3VyIGlkZW50aXR5IHdpdGggV2luZG93cyBIZWxsbyIsInZlcmlmeS53aW5kb3dzSGVsbG8uc3VidGl0bGUubG9hZGluZyI6IlBsZWFzZSB3YWl0IHdoaWxlIFdpbmRvd3MgSGVsbG8gaXMgbG9hZGluZy4uLiIsInZlcmlmeS53aW5kb3dzSGVsbG8uc3VidGl0bGUuc2lnbmluZ0luIjoiU2lnbmluZyBpbnRvIE9rdGEuLi4iLCJ2ZXJpZnkud2luZG93c0hlbGxvLnNhdmUiOiJWZXJpZnkgd2l0aCBXaW5kb3dzIEhlbGxvIiwidmVyaWZ5LndpbmRvd3NIZWxsby5lcnJvci5ub3RGb3VuZCI6IllvdXIgV2luZG93cyBIZWxsbyBlbnJvbGxtZW50IGRvZXMgbm90IG1hdGNoIG91ciByZWNvcmRzLiBDb250YWN0IHlvdXIgYWRtaW5pc3RyYXRvciBmb3IgYXNzaXN0YW5jZS4iLCJ2ZXJpZnkud2luZG93c0hlbGxvLmVycm9yLm5vdEZvdW5kLnNlbGVjdEFub3RoZXIiOiJZb3VyIFdpbmRvd3MgSGVsbG8gZW5yb2xsbWVudCBkb2VzIG5vdCBtYXRjaCBvdXIgcmVjb3Jkcy4gU2VsZWN0IGFub3RoZXIgZmFjdG9yIG9yIGNvbnRhY3QgeW91ciBhZG1pbmlzdHJhdG9yIGZvciBhc3Npc3RhbmNlLiIsImVucm9sbC51MmYudGl0bGUiOiJTZXR1cCBTZWN1cml0eSBLZXkgKFUyRikiLCJlbnJvbGwudTJmLnNhdmUiOiJSZWdpc3RlciBTZWN1cml0eSBLZXkiLCJlbnJvbGwudTJmLmdlbmVyYWwxIjoiSWYgdXNpbmcgRmlyZWZveCBkb3dubG9hZCBhbmQgaW5zdGFsbCB0aGUgVTJGIGJyb3dzZXIgZXh0ZW5zaW9uLiIsImVucm9sbC51MmYuZ2VuZXJhbDIiOiJNYWtlIHN1cmUgeW91IGhhdmUgYSBTZWN1cml0eSBLZXkuIElmIGFscmVhZHkgaW5zZXJ0ZWQsIHJlbW92ZSBpdCBub3cuPGJyPklmIHlvdSBoYXZlIGEgQmx1ZXRvb3RoIFNlY3VyaXR5IEtleSwgdHVybiBvbiB5b3VyIGNvbXB1dGVyJ3MgQmx1ZXRvb3RoLiIsImVucm9sbC51MmYuZ2VuZXJhbDMiOiJDbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIHJlZ2lzdGVyIiwiZW5yb2xsLnUyZi5pbnN0cnVjdGlvbnMiOiJJbnNlcnQgeW91ciBTZWN1cml0eSBLZXkgaW50byBhIFVTQiBwb3J0IG9uIHRoaXMgY29tcHV0ZXIuIElmIGl0IGhhcyBhIGJ1dHRvbiBvciBnb2xkIGRpc2ssIHRhcCBpdC4iLCJlbnJvbGwudTJmLmluc3RydWN0aW9uc0JsdWV0b290aCI6IklmIHlvdSBhcmUgdXNpbmcgYSBCbHVldG9vdGggU2VjdXJpdHkgS2V5LCBwcmVzcyB0aGUgYnV0dG9uLiIsInUyZi5lcnJvci5ub3RTdXBwb3J0ZWRCcm93c2VyIjoiVGhlIFNlY3VyaXR5IEtleSBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgQ2hyb21lIG9yIEZpcmVmb3ggYnJvd3NlcnMuIFNlbGVjdCBhbm90aGVyIGZhY3RvciBvciBjb250YWN0IHlvdXIgYWRtaW4gZm9yIGFzc2lzdGFuY2UuIiwidTJmLmVycm9yLm5vdFN1cHBvcnRlZEJyb3dzZXIub25lRmFjdG9yIjoiVGhlIFNlY3VyaXR5IEtleSBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgQ2hyb21lIG9yIEZpcmVmb3ggYnJvd3NlcnMuIENvbnRhY3QgeW91ciBhZG1pbiBmb3IgYXNzaXN0YW5jZS4iLCJ1MmYuZXJyb3Iubm9GaXJlZm94RXh0ZW5zaW9uIjonPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vYWRkb25zLm1vemlsbGEub3JnL2VuLVVTL2ZpcmVmb3gvYWRkb24vdTJmLXN1cHBvcnQtYWRkLW9uLyI+RG93bmxvYWQ8L2E+IGFuZCBpbnN0YWxsIHRoZSBGaXJlZm94IFUyRiBicm93c2VyIGV4dGVuc2lvbiBiZWZvcmUgcHJvY2VlZGluZy4gWW91IG1heSBiZSByZXF1aXJlZCB0byByZXN0YXJ0IHlvdXIgYnJvd3NlciBhZnRlciBpbnN0YWxsYXRpb24uJywKCSJ1MmYuZXJyb3Iub3RoZXIiOiJBbiB1bmtub3duIGVycm9yIGhhcyBvY2N1cmVkLiBUcnkgYWdhaW4gb3Igc2VsZWN0IGFub3RoZXIgZmFjdG9yLiIsInUyZi5lcnJvci5vdGhlci5vbmVGYWN0b3IiOiJBbiB1bmtub3duIGVycm9yIGhhcyBvY2N1cmVkLiBUcnkgYWdhaW4gb3IgY29udGFjdCB5b3VyIGFkbWluIGZvciBhc3Npc3RhbmNlLiIsInUyZi5lcnJvci5iYWRSZXF1ZXN0IjoiVGhlcmUgd2FzIGFuIGVycm9yIHdpdGggdGhlIFUyRiByZXF1ZXN0LiBUcnkgYWdhaW4gb3Igc2VsZWN0IGFub3RoZXIgZmFjdG9yLiIsInUyZi5lcnJvci5iYWRSZXF1ZXN0Lm9uZUZhY3RvciI6IlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBVMkYgcmVxdWVzdC4gVHJ5IGFnYWluIG9yIGNvbnRhY3QgeW91ciBhZG1pbiBmb3IgYXNzaXN0YW5jZS4iLCJ1MmYuZXJyb3IudW5zdXBwb3J0ZWQiOiJUaGUgc2VjdXJpdHkga2V5IGlzIHVuc3VwcG9ydGVkLiBTZWxlY3QgYW5vdGhlciBmYWN0b3IuIiwidTJmLmVycm9yLnVuc3VwcG9ydGVkLm9uZUZhY3RvciI6IlRoZSBzZWN1cml0eSBrZXkgaXMgdW5zdXBwb3J0ZWQuIENvbnRhY3QgeW91ciBhZG1pbiBmb3IgYXNzaXN0YW5jZS4iLCJ1MmYuZXJyb3IudGltZW91dCI6IllvdSBoYXZlIHRpbWVkIG91dCBvZiB0aGUgYXV0aGVudGljYXRpb24gcGVyaW9kLiBQbGVhc2UgdHJ5IGFnYWluLiIsInZlcmlmeS51MmYuaW5zdHJ1Y3Rpb25zIjoiSW5zZXJ0IHlvdXIgU2VjdXJpdHkgS2V5LiBJZiBpdCBoYXMgYSBidXR0b24gb3IgZ29sZCBkaXNrLCB0YXDCoGl0LiIsInZlcmlmeS51MmYuaW5zdHJ1Y3Rpb25zQmx1ZXRvb3RoIjoiSWYgeW91IGFyZSB1c2luZyBhIEJsdWV0b290aCBTZWN1cml0eSBLZXksIHR1cm4gb24geW91ciBjb21wdXRlcidzIEJsdWV0b290aCBhbmQgcHJlc3MgdGhlIGJ1dHRvbi4iLCJ2ZXJpZnkudTJmLnJldHJ5IjoiUmV0cnkiLCJlbnJvbGwudG90cC5lbnRlckNvZGUiOiJFbnRlciBjb2RlIGRpc3BsYXllZCBmcm9tIHRoZSBhcHBsaWNhdGlvbiIsImVucm9sbC50b3RwLnNldHVwQXBwIjoiTGF1bmNoIHswfSBhcHBsaWNhdGlvbiBvbiB5b3VyIG1vYmlsZSBkZXZpY2UgYW5kIHNlbGVjdCBBZGQgYW4gYWNjb3VudC4iLCJlbnJvbGwudG90cC5zZXR1cEdvb2dsZUF1dGhBcHAiOidMYXVuY2ggezB9LCB0YXAgdGhlICIrIiBpY29uLCB0aGVuIHNlbGVjdCAiU2NhbiBiYXJjb2RlIi4nLCJlbnJvbGwudG90cC5jYW5ub3RTY2FuIjoiQ2FuJ3Qgc2Nhbj8iLCJlbnJvbGwudG90cC5yZWZyZXNoQmFyY29kZSI6IlJlZnJlc2ggY29kZSIsImVucm9sbC50b3RwLmNhbm5vdFNjYW5CYXJjb2RlIjoiQ2FuJ3Qgc2NhbiBiYXJjb2RlPyIsImVucm9sbC50b3RwLm1hbnVhbFNldHVwSW5zdHJ1Y3Rpb25zIjoiVG8gc2V0IHVwIG1hbnVhbGx5IGVudGVyIHlvdXIgT2t0YSBBY2NvdW50IHVzZXJuYW1lIGFuZCB0aGVuIGlucHV0IHRoZSBmb2xsb3dpbmcgaW4gdGhlIFNlY3JldCBLZXkgRmllbGQiLCJlbnJvbGwudG90cC5zaGFyZWRTZWNyZXRJbnN0cnVjdGlvbnMiOiJFbnRlciB5b3VyIE9rdGEgQWNjb3VudCB1c2VybmFtZSBhbmQgZW50ZXIgdGhlIGZvbGxvd2luZyBpbiB0aGUgU2VjcmV0IEtleSBGaWVsZCIsImVucm9sbC50b3RwLnNlbmRTbXMiOiJTZW5kIGFjdGl2YXRpb24gbGluayB2aWEgU01TIiwiZW5yb2xsLnRvdHAuc2VuZEVtYWlsIjoiU2VuZCBhY3RpdmF0aW9uIGxpbmsgdmlhIGVtYWlsIiwiZW5yb2xsLnRvdHAuc2V0dXBNYW51YWxseSI6IlNldHVwIG1hbnVhbGx5IHdpdGhvdXQgcHVzaCBub3RpZmljYXRpb24iLCJlbnJvbGwudG90cC5lbnJvbGxWaWFFbWFpbC50aXRsZSI6IkFjdGl2YXRpb24gZW1haWwgc2VudCEiLCJlbnJvbGwudG90cC5lbnJvbGxWaWFFbWFpbC5tc2ciOiJPcGVuIHRoZSBlbWFpbCBmcm9tIHlvdXIgbW9iaWxlIGRldmljZS4iLCJlbnJvbGwudG90cC5lbnJvbGxWaWFTbXMudGl0bGUiOiJTTVMgc2VudCEiLCJlbnJvbGwudG90cC5lbnJvbGxWaWFTbXMubXNnIjoiVmlldyB0aGUgU01TIG9uIHlvdXIgbW9iaWxlIGRldmljZS4iLCJyZWNvdmVyeUNoYWxsZW5nZS5zbXMudGl0bGUiOiJFbnRlciB2ZXJpZmljYXRpb24gY29kZSBzZW50IHZpYSBTTVMiLCJyZWNvdmVyeUNoYWxsZW5nZS5jYWxsLnRpdGxlIjoiRW50ZXIgdmVyaWZpY2F0aW9uIGNvZGUgcmVjZWl2ZWQgdmlhIFZvaWNlIENhbGwiLCJtZmEuZmFjdG9ycy5kcm9wZG93bi50aXRsZSI6IlNlbGVjdCBhbiBhdXRoZW50aWNhdGlvbiBmYWN0b3IiLCJtZmEuZHVvU2VjdXJpdHkucHVzaCI6IlB1c2gg4oCUIHswfSIsIm1mYS5kdW9TZWN1cml0eS5zbXMiOiJTTVMg4oCUIHswfSIsIm1mYS5kdW9TZWN1cml0eS5jYWxsIjoiQ2FsbCDigJQgezB9IiwibWZhLmNoYWxsZW5nZS50aXRsZSI6IkVudGVyIHlvdXIgezB9IHBhc3Njb2RlIiwibWZhLmNoYWxsZW5nZS5vckVudGVyQ29kZSI6Ik9yIGVudGVyIGNvZGUiLCJva3RhdmVyaWZ5LnNlbmQiOiJTZW5kIFB1c2giLCJva3RhdmVyaWZ5LnJlc2VuZCI6IlJlLXNlbmQgUHVzaCIsIm9rdGF2ZXJpZnkuc2VudCI6IlB1c2ggc2VudCEiLCJva3RhdmVyaWZ5LnJlamVjdGVkIjoiWW91IGhhdmUgY2hvc2VuIHRvIHJlamVjdCB0aGlzIGxvZ2luLiIsIm9rdGF2ZXJpZnkudGltZW91dCI6IllvdXIgcHVzaCBub3RpZmljYXRpb24gaGFzIGV4cGlyZWQuIiwib2t0YXZlcmlmeS53YXJuaW5nIjoiSGF2ZW4ndCByZWNlaXZlZCBhIHB1c2ggbm90aWZpY2F0aW9uIHlldD8gVHJ5IG9wZW5pbmcgdGhlIE9rdGEgVmVyaWZ5IEFwcCBvbiB5b3VyIHBob25lLiIsInByaW1hcnlhdXRoLnRpdGxlIjoiU2lnbiBJbiIsInByaW1hcnlhdXRoLnVzZXJuYW1lLnBsYWNlaG9sZGVyIjoiVXNlcm5hbWUiLCJwcmltYXJ5YXV0aC51c2VybmFtZS50b29sdGlwIjoiVXNlcm5hbWUiLCJwcmltYXJ5YXV0aC5wYXNzd29yZC5wbGFjZWhvbGRlciI6IlBhc3N3b3JkIiwicHJpbWFyeWF1dGgucGFzc3dvcmQudG9vbHRpcCI6IlBhc3N3b3JkIiwicHJpbWFyeWF1dGguc3VibWl0IjoiU2lnbiBJbiIsInByaW1hcnlhdXRoLm5ld1VzZXIudG9vbHRpcCI6IlRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgeW91IGFyZSBjb25uZWN0aQ==", "base64"));
  res.write(new Buffer("bmcgdG8gezB9IGZyb20gdGhpcyBicm93c2VyIiwicHJpbWFyeWF1dGgubmV3VXNlci50b29sdGlwLmNsb3NlIjoiQ2xvc2UiLCJwYXNzd29yZC5mb3Jnb3QuZW1haWwub3IudXNlcm5hbWUucGxhY2Vob2xkZXIiOiJFbWFpbCBvciBVc2VybmFtZSIsInBhc3N3b3JkLmZvcmdvdC5lbWFpbC5vci51c2VybmFtZS50b29sdGlwIjoiRW1haWwgb3IgVXNlcm5hbWUiLCJwYXNzd29yZC5mb3Jnb3Quc2VuZFRleHQiOiJSZXNldCB2aWEgU01TIiwicGFzc3dvcmQuZm9yZ290LnNlbmRFbWFpbCI6IlJlc2V0IHZpYSBFbWFpbCIsInBhc3N3b3JkLmZvcmdvdC5jYWxsIjoiUmVzZXQgdmlhIFZvaWNlIENhbGwiLCJwYXNzd29yZC5mb3Jnb3QuZW1haWxTZW50LnRpdGxlIjoiRW1haWwgc2VudCEiLCJwYXNzd29yZC5mb3Jnb3QuZW1haWxTZW50LmRlc2MiOiJFbWFpbCBoYXMgYmVlbiBzZW50IHRvIHswfSB3aXRoIGluc3RydWN0aW9ucyBvbiByZXNldHRpbmcgeW91ciBwYXNzd29yZC4iLCJwYXNzd29yZC5mb3Jnb3QucXVlc3Rpb24udGl0bGUiOiJBbnN3ZXIgRm9yZ290dGVuIFBhc3N3b3JkIENoYWxsZW5nZSIsInBhc3N3b3JkLmZvcmdvdC5xdWVzdGlvbi5zdWJtaXQiOiJSZXNldCBQYXNzd29yZCIsInBhc3N3b3JkLmZvcmdvdC5zbXMubm90UmVjZWl2ZWQiOiJEaWRuJ3QgcmVjZWl2ZSBhbiBTTVM/IFJlc2V0IHZpYSBlbWFpbCIsInBhc3N3b3JkLmZvcmdvdC5jb2RlLm5vdFJlY2VpdmVkIjoiRGlkbid0IHJlY2VpdmUgYSBjb2RlPyBSZXNldCB2aWEgZW1haWwiLCJwYXNzd29yZC5mb3Jnb3Qubm9GYWN0b3JzRW5hYmxlZCI6Ik5vIHBhc3N3b3JkIHJlc2V0IG9wdGlvbnMgYXZhaWxhYmxlLiBQbGVhc2UgY29udGFjdCB5b3VyIGFkbWluaXN0cmF0b3IuIiwicGFzc3dvcmQucmVzZXQudGl0bGUiOiJSZXNldCB5b3VyIE9rdGEgcGFzc3dvcmQiLCJwYXNzd29yZC5jb21wbGV4aXR5LnJlcXVpcmVtZW50cyI6IlBhc3N3b3JkIHJlcXVpcmVtZW50czogezB9LiIsInBhc3N3b3JkLmNvbXBsZXhpdHkuaGlzdG9yeSI6IllvdXIgcGFzc3dvcmQgY2Fubm90IGJlIGFueSBvZiB5b3VyIGxhc3QgezB9IHBhc3N3b3Jkcy4iLCJwYXNzd29yZC5jb21wbGV4aXR5Lm1pbkFnZU1pbnV0ZXMiOiJBdCBsZWFzdCB7MH0gbWludXRlKHMpIG11c3QgaGF2ZSBlbGFwc2VkIHNpbmNlIHlvdSBsYXN0IGNoYW5nZWQgeW91ciBwYXNzd29yZC4iLCJwYXNzd29yZC5jb21wbGV4aXR5Lm1pbkFnZUhvdXJzIjoiQXQgbGVhc3QgezB9IGhvdXIocykgbXVzdCBoYXZlIGVsYXBzZWQgc2luY2UgeW91IGxhc3QgY2hhbmdlZCB5b3VyIHBhc3N3b3JkLiIsInBhc3N3b3JkLmNvbXBsZXhpdHkubWluQWdlRGF5cyI6IkF0IGxlYXN0IHswfSBkYXkocykgbXVzdCBoYXZlIGVsYXBzZWQgc2luY2UgeW91IGxhc3QgY2hhbmdlZCB5b3VyIHBhc3N3b3JkLiIsInBhc3N3b3JkLmNvbXBsZXhpdHkubGVuZ3RoIjoiYXQgbGVhc3QgezB9IGNoYXJhY3RlcnMiLCJwYXNzd29yZC5jb21wbGV4aXR5Lmxpc3QuZWxlbWVudCI6IiwgezB9IiwicGFzc3dvcmQuY29tcGxleGl0eS5sb3dlcmNhc2UiOiJhIGxvd2VyY2FzZSBsZXR0ZXIiLCJwYXNzd29yZC5jb21wbGV4aXR5LnVwcGVyY2FzZSI6ImFuIHVwcGVyY2FzZSBsZXR0ZXIiLCJwYXNzd29yZC5jb21wbGV4aXR5Lm51bWJlciI6ImEgbnVtYmVyIiwicGFzc3dvcmQuY29tcGxleGl0eS5zeW1ib2wiOiJhIHN5bWJvbCIsInBhc3N3b3JkLmNvbXBsZXhpdHkubm9fdXNlcm5hbWUiOiJubyBwYXJ0cyBvZiB5b3VyIHVzZXJuYW1lIiwicGFzc3dvcmQuY29tcGxleGl0eS5ub19maXJzdF9uYW1lIjoiZG9lcyBub3QgaW5jbHVkZSB5b3VyIGZpcnN0IG5hbWUiLCJwYXNzd29yZC5jb21wbGV4aXR5Lm5vX2xhc3RfbmFtZSI6ImRvZXMgbm90IGluY2x1ZGUgeW91ciBsYXN0IG5hbWUiLCJwYXNzd29yZC5leHBpcmVkLnN1Ym1pdCI6IkNoYW5nZSBQYXNzd29yZCIsInBhc3N3b3JkLmV4cGlyZWQudGl0bGUiOiJZb3VyIE9rdGEgcGFzc3dvcmQgaGFzIGV4cGlyZWQiLCJwYXNzd29yZC5leHBpcmluZy5sYXRlciI6IlJlbWluZCBtZSBsYXRlciIsInBhc3N3b3JkLmV4cGlyaW5nLnRpdGxlIjoiWW91ciBwYXNzd29yZCB3aWxsIGV4cGlyZSBpbiB7MH0gZGF5cyIsInBhc3N3b3JkLmV4cGlyaW5nLnRvZGF5IjoiWW91ciBwYXNzd29yZCB3aWxsIGV4cGlyZSBsYXRlciB0b2RheSIsInBhc3N3b3JkLmV4cGlyaW5nLnNvb24iOiJZb3VyIHBhc3N3b3JkIGlzIGV4cGlyaW5nIHNvb24iLCJwYXNzd29yZC5leHBpcmluZy5zdWJ0aXRsZSI6IldoZW4gcGFzc3dvcmQgZXhwaXJlcyB5b3UgbWF5IGJlIGxvY2tlZCBvdXQgb2YgT2t0YSBNb2JpbGUsIG1vYmlsZSBlbWFpbCwgYW5kIG90aGVyIHNlcnZpY2VzLiIsInBhc3N3b3JkLmV4cGlyZWQuY3VzdG9tLnN1Ym1pdCI6IkdvIHRvIHswfSIsInBhc3N3b3JkLmV4cGlyZWQuY3VzdG9tLnN1YnRpdGxlIjoiVGhpcyBwYXNzd29yZCBpcyBzZXQgb24gYW5vdGhlciB3ZWJzaXRlLiBDbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIGdvIHRoZXJlIGFuZCBzZXQgYSBuZXcgcGFzc3dvcmQuIiwiYWNjb3VudC51bmxvY2sudGl0bGUiOiJVbmxvY2sgYWNjb3VudCIsImFjY291bnQudW5sb2NrLmVtYWlsLm9yLnVzZXJuYW1lLnBsYWNlaG9sZGVyIjoiRW1haWwgb3IgdXNlcm5hbWUiLCJhY2NvdW50LnVubG9jay5lbWFpbC5vci51c2VybmFtZS50b29sdGlwIjoiRW1haWwgb3IgdXNlcm5hbWUiLCJhY2NvdW50LnVubG9jay5zZW5kVGV4dCI6IlNlbmQgU01TIiwiYWNjb3VudC51bmxvY2suc2VuZEVtYWlsIjoiU2VuZCBFbWFpbCIsImFjY291bnQudW5sb2NrLmVtYWlsU2VudC50aXRsZSI6IkVtYWlsIHNlbnQhIiwiYWNjb3VudC51bmxvY2suZW1haWxTZW50LmRlc2MiOiJFbWFpbCBoYXMgYmVlbiBzZW50IHRvIHswfSB3aXRoIGluc3RydWN0aW9ucyBvbiB1bmxvY2tpbmcgeW91ciBhY2NvdW50LiIsImFjY291bnQudW5sb2NrLnF1ZXN0aW9uLnRpdGxlIjoiQW5zd2VyIFVubG9jayBBY2NvdW50IENoYWxsZW5nZSIsImFjY291bnQudW5sb2NrLnF1ZXN0aW9uLnN1Ym1pdCI6IlVubG9jayBBY2NvdW50IiwiYWNjb3VudC51bmxvY2sudW5sb2NrZWQudGl0bGUiOiJBY2NvdW50IHN1Y2Nlc3NmdWxseSB1bmxvY2tlZCEiLCJhY2NvdW50LnVubG9jay51bmxvY2tlZC5kZXNjIjoiWW91IGNhbiBsb2cgaW4gdXNpbmcgeW91ciBleGlzdGluZyB1c2VybmFtZSBhbmQgcGFzc3dvcmQuIiwiYWNjb3VudC51bmxvY2suc21zLm5vdFJlY2VpdmVkIjoiRGlkbid0IHJlY2VpdmUgYW4gU01TPyBVbmxvY2sgdmlhIGVtYWlsIiwiYWNjb3VudC51bmxvY2subm9GYWN0b3JzRW5hYmxlZCI6Ik5vIHVubG9jayBvcHRpb25zIGF2YWlsYWJsZS4gUGxlYXNlIGNvbnRhY3QgeW91ciBhZG1pbmlzdHJhdG9yLiIsImNvbnRhY3Quc3VwcG9ydCI6IklmIHlvdSBkaWRuJ3QgcHJvdmlkZSBhIHNlY29uZGFyeSBlbWFpbCBhZGRyZXNzIG9yIGRvbid0IGhhdmUgYWNjZXNzIHRvIGVtYWlsLCBwbGVhc2UgY29udGFjdCB5b3VyIGFkbWluaXN0cmF0b3IgYXQgezB9Iiwic29jaWFsYXV0aC5kaXZpZGVyLnRleHQiOiJPUiIsInNvY2lhbGF1dGguZmFjZWJvb2subGFiZWwiOiJTaWduIGluIHdpdGggRmFjZWJvb2siLCJzb2NpYWxhdXRoLmdvb2dsZS5sYWJlbCI6IlNpZ24gaW4gd2l0aCBHb29nbGUiLCJzb2NpYWxhdXRoLmxpbmtlZGluLmxhYmVsIjoiU2lnbiBpbiB3aXRoIExpbmtlZEluIiwic29jaWFsYXV0aC5taWNyb3NvZnQubGFiZWwiOiJTaWduIGluIHdpdGggTWljcm9zb2Z0Iiwic29jaWFsYXV0aC5wb3B1cC50aXRsZSI6IkV4dGVybmFsIElkZW50aXR5IFByb3ZpZGVyIFVzZXIgQXV0aGVudGljYXRpb24iLCJhdXRoYnV0dG9uLmRpdmlkZXIudGV4dCI6Im9yIiwicmVnaXN0cmF0aW9uLnNpZ251cC5sYWJlbCI6IkRvbid0IGhhdmUgYW4gYWNjb3VudD8iLCJyZWdpc3RyYXRpb24uc2lnbnVwLnRleHQiOiJTaWduIHVwIiwicmVnaXN0cmF0aW9uLmNvbXBsZXRlLnRpdGxlIjoiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnQiLCJyZWdpc3RyYXRpb24uY29tcGxldGUuZGVzYyI6IldlIGp1c3Qgc2VudCBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byB7MH0uIFBsZWFzZSBjaGVjayB5b3VyIGVtYWlsIGFuZCB2ZXJpZnkgeW91ciBhY2NvdW50IHRvIGNvbnRpbnVlLiIsInJlZ2lzdHJhdGlvbi5mb3JtLnRpdGxlIjoiQ3JlYXRlIEFjY291bnQiLCJyZWdpc3RyYXRpb24uZm9ybS5zdWJtaXQiOiJSZWdpc3RlciIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkubWluTGVuZ3RoIjoiQXQgbGVhc3QgezB9IGNoYXJhY3RlcihzKSIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkubWluTG93ZXIiOiJBdCBsZWFzdCB7MH0gbG93ZXJjYXNlIGxldHRlcihzKSIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkubWluVXBwZXIiOiJBdCBsZWFzdCB7MH0gdXBwZXJjYXNlIGxldHRlcihzKSIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkubWluTnVtYmVyIjoiQXQgbGVhc3QgezB9IG51bWJlcihzKSIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkubWluU3ltYm9sIjoiQXQgbGVhc3QgezB9IHN5bWJvbChzKSIsInJlZ2lzdHJhdGlvbi5wYXNzd29yZENvbXBsZXhpdHkuZXhjbHVkZVVzZXJuYW1lIjoiRG9lcyBub3QgY29udGFpbiBwYXJ0IG9mIHVzZXJuYW1lIiwicmVnaXN0cmF0aW9uLmVycm9yLnVzZXJOYW1lLmludmFsaWRFbWFpbCI6IkludmFsaWQgZW1haWwgYWRkcmVzcyIsInJlZ2lzdHJhdGlvbi5lcnJvci5wYXNzd29yZC5wYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCI6IlBhc3N3b3JkIHJlcXVpcmVtZW50cyB3ZXJlIG5vdCBtZXQiLCJyZWdpc3RyYXRpb24uZXJyb3IudXNlck5hbWUubm90VW5pcXVlV2l0aGluT3JnIjoiQW4gYWNjb3VudCB3aXRoIHRoYXQgZW1haWwgYWxyZWFkeSBleGlzdHMiLCJwaXYuY2FyZCI6IlBJViBDYXJkIiwicGl2LmNhcmQuaW5zZXJ0IjoiUGxlYXNlIGluc2VydCB5b3VyIFBJViBjYXJkIGFuZCBzZWxlY3QgdGhlIHVzZXIgY2VydGlmaWNhdGUuIiwicGl2LmNhcmQuZXJyb3IiOiJDZXJ0aWZpY2F0ZSBhdXRoZW50aWNhdGlvbiBmYWlsZWQuIENvbnRhY3QgeW91ciBhZG1pbi4iLCJwaXYuY2FyZC5lcnJvci5lbXB0eSI6Ik5vIGNlcnRpZmljYXRlIHNlbGVjdGVkLiBDaG9vc2UgYSBjZXJ0aWZpY2F0ZSBhbmQgdHJ5IGFnYWluLiIsInBpdi5jYXJkLmVycm9yLmludmFsaWQiOiJDZXJ0aWZpY2F0ZSB2YWxpZGF0aW9uIGZhaWxlZC4gQ2hvb3NlIGFub3RoZXIgY2VydGlmaWNhdGUgYW5kIHRyeSBhZ2Fpbi4iLCJ1bnN1cHBvcnRlZC5vbmVEcml2ZS50aXRsZSI6IllvdXIgT25lRHJpdmUgdmVyc2lvbiBpcyBub3Qgc3VwcG9ydGVkIiwidW5zdXBwb3J0ZWQub25lRHJpdmUuZGVzYyI6IlVwZ3JhZGUgbm93IGJ5IGluc3RhbGxpbmcgdGhlIE9uZURyaXZlIGZvciBCdXNpbmVzcyBOZXh0IEdlbmVyYXRpb24gU3luYyBDbGllbnQgdG8gbG9naW4gdG8gT2t0YSIsInVuc3VwcG9ydGVkLm9uZURyaXZlLmFjdGlvbiI6IkxlYXJuIGhvdyB0byB1cGdyYWRlIiwidW5zdXBwb3J0ZWQuY29va2llcy50aXRsZSI6IkNvb2tpZXMgYXJlIHJlcXVpcmVkIiwidW5zdXBwb3J0ZWQuY29va2llcy5kZXNjIjoiQ29va2llcyBhcmUgZGlzYWJsZWQgb24geW91ciBicm93c2VyLiBQbGVhc2UgZW5hYmxlIENvb2tpZXMgYW5kIHJlZnJlc2ggdGhpcyBwYWdlLiIsInVuc3VwcG9ydGVkLmNvb2tpZXMuYWN0aW9uIjoiUmVmcmVzaCAiLCJkZXZpY2VUcnVzdC5zc28udGV4dCI6IlNpZ24gaW4gdG8gYWNjZXNzIGNvbXBhbnkgcmVzb3VyY2VzIiwiZGV2aWNlVHJ1c3Quc3NvLmhpbnQyIjoiT2t0YSBNb2JpbGUgd2lsbCBjaGVjayB0aGF0IHlvdXIgZGV2aWNlIGlzIHNlY3VyZSBhbmQgbWFrZSBpdCBlYXN5IHRvIHNpZ24gaW4gdG8gdGhpcyBhcHAuIiwiZGV2aWNlVHJ1c3Quc3NvLmJ1dHRvbjIiOiJTaWduIGluIHdpdGggT2t0YSIsImRldmljZVRydXN0LnNzby5leHBpcmUudGl0bGUiOiJPb3BzIGxldCdzIGdldCB5b3UgYmFjayBvbiB0cmFjayIsImRldmljZVRydXN0LnNzby5leHBpcmUuc3VidGl0bGUiOiJVbmZvcnR1bmF0ZWx5IHRoZSBzdGVwcyByZXF1aXJlZCB0byBzaWduIGluIHRvb2sgbG9uZ2VyIHRoYW4gZXhwZWN0ZWQgYW5kIHlvdXIgYXR0ZW1wdCB0aW1lZCBvdXQuIiwiZGV2aWNlVHJ1c3Quc3NvLmV4cGlyZS5idXR0b24iOiJTaWduIGluIHVzaW5nIE9rdGEgTW9iaWxlIiwiZGV2aWNlVHJ1c3QudW5pdmVyc2FsTGluay5mYWxsYmFjay5nZXRPa3RhTW9iaWxlLnRpdGxlIjoiR2V0IE9rdGEgTW9iaWxlIiwiZGV2aWNlVHJ1c3QudW5pdmVyc2FsTGluay5mYWxsYmFjay5nZXRPa3RhTW9iaWxlLnN1YnRpdGxlIjoiR28gdG8gdGhlIHswfUFwcFN0b3JlezF9LCB7MH1zZWFyY2h7MX0gZm9yIHswfU9rdGEgTW9iaWxlezF9IGFuZCB0YXAgb24gezB9R0VUezF9IE9rdGEgTW9iaWxlLiBPbmNlIGluc3RhbGxlZCwgc2lnbiBpbiB0byBPa3RhIE1vYmlsZSBhbmQgZm9sbG93IHRoZSBpbnN0cnVjdGlvbnMgdG8gc2VjdXJlIHlvdXIgZGV2aWNlLiIsImNvbnNlbnQucmVxdWlyZWQuaGVhZGxpbmUiOiI8Yj57MH08L2I+IGlzIHJlcXVlc3RpbmcgcGVybWlzc2lvbnMgdG86IiwiY29uc2VudC5yZXF1aXJlZC5sYWJlbCI6IjxiPnswfTwvYj4gd2FudHMgdG8gYWNjZXNzIHlvdXIgYWNjb3VudCAoPGI+ezF9PC9iPikgaW4gb3JkZXIgdG86IiwiY29uc2VudC5yZXF1aXJlZC5kZXNjcmlwdGlvbiI6IkJ5IGNsaWNraW5nIEFsbG93IEFjY2VzcywgeW91IGFsbG93IHRoaXMgYXBwIGFjY2VzcyB0byB0aGUgYWN0aW9ucyBsaXN0ZWQgYWJvdmUuIiwiY29uc2VudC5yZXF1aXJlZC50ZXJtc09mU2VydmljZSI6IlRlcm1zIG9mIFNlcnZpY2UiLCJjb25zZW50LnJlcXVpcmVkLnByaXZhY3lQb2xpY3kiOiJQcml2YWN5IFBvbGljeSIsImNvbnNlbnQucmVxdWlyZWQuY29uc2VudEJ1dHRvbiI6IkFsbG93IEFjY2VzcyIsImNvbnNlbnQucmVxdWlyZWQuY2FuY2VsQnV0dG9uIjoiRG9uJ3QgQWxsb3ciLCJjb25zZW50LnJlcXVpcmVkLnRpdGxlIjoiezB9IGlzIHJlcXVlc3RpbmcgcGVybWlzc2lvbnMgdG86IiwicGFzc3dvcmQuY29tcGxleGl0eS5kZXNjcmlwdGlvbiI6IllvdXIgcGFzc3dvcmQgbXVzdCBoYXZlIHswfS4iLCJwYXNzd29yZC5jb21wbGV4aXR5Lm5vX2ZpcnN0X29yX2xhc3RfbmFtZSI6ImRvIG5vdCBpbmNsdWRlIHlvdXIgZmlyc3Qgb3IgbGFzdCBuYW1lIn19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtBRjoiQWZnaGFuaXN0YW4iLEFYOiLDhWxhbmQgSXNsYW5kcyIsQUw6IkFsYmFuaWEiLERaOiJBbGdlcmlhIixBUzoiQW1lcmljYW4gU2Ftb2EiLEFEOiJBbmRvcnJhIixBTzoiQW5nb2xhIixBSToiQW5ndWlsbGEiLEFROiJBbnRhcmN0aWNhIixBRzoiQW50aWd1YSBhbmQgQmFyYnVkYSIsQVI6IkFyZ2VudGluYSIsQU06IkFybWVuaWEiLEFXOiJBcnViYSIsQVU6IkF1c3RyYWxpYSIsQVQ6IkF1c3RyaWEiLEFaOiJBemVyYmFpamFuIixCUzoiQmFoYW1hcyIsQkg6IkJhaHJhaW4iLEJEOiJCYW5nbGFkZXNoIixCQjoiQmFyYmFkb3MiLEJZOiJCZWxhcnVzIixCRToiQmVsZ2l1bSIsQlo6IkJlbGl6ZSIsQko6IkJlbmluIixCTToiQmVybXVkYSIsQlQ6IkJodXRhbiIsQk86IkJvbGl2aWEsIFBsdXJpbmF0aW9uYWwgU3RhdGUgb2YiLEJBOiJCb3NuaWEgYW5kIEhlcnplZ292aW5hIixCVzoiQm90c3dhbmEiLEJWOiJCb3V2ZXQgSXNsYW5kIixCUjoiQnJhemlsIixJTzoiQnJpdGlzaCBJbmRpYW4gT2NlYW4gVGVycml0b3J5IixWRzoiVmlyZ2luIElzbGFuZHMsIEJyaXRpc2giLEJOOiJCcnVuZWkgRGFydXNzYWxhbSIsQkc6IkJ1bGdhcmlhIixCRjoiQnVya2luYSBGYXNvIixCSToiQnVydW5kaSIsS0g6IkNhbWJvZGlhIixDTToiQ2FtZXJvb24iLENBOiJDYW5hZGEiLENWOiJDYXBlIFZlcmRlIixLWToiQ2F5bWFuIElzbGFuZHMiLENGOiJDZW50cmFsIEFmcmljYW4gUmVwdWJsaWMiLFREOiJDaGFkIixDTDoiQ2hpbGUiLENOOiJDaGluYSIsQ1g6IkNocmlzdG1hcyBJc2xhbmQiLENPOiJDb2xvbWJpYSIsS006IkNvbW9yb3MiLENHOiJDb25nbyIsQ0s6IkNvb2sgSXNsYW5kcyIsQ1I6IkNvc3RhIFJpY2EiLENJOiJDw7R0ZSBkJ0l2b2lyZSIsSFI6IkNyb2F0aWEiLENVOiJDdWJhIixDWToiQ3lwcnVzIixDWjoiQ3plY2ggUmVwdWJsaWMiLENEOiJDb25nbywgdGhlIERlbW9jcmF0aWMgUmVwdWJsaWMgb2YgdGhlIixESzoiRGVubWFyayIsREo6IkRqaWJvdXRpIixETToiRG9taW5pY2EiLERPOiJEb21pbmljYW4gUmVwdWJsaWMiLFRMOiJUaW1vci1MZXN0ZSIsRUM6IkVjdWFkb3IiLEVHOiJFZ3lwdCIsU1Y6IkVsIFNhbHZhZG9yIixHUToiRXF1YXRvcmlhbCBHdWluZWEiLEVSOiJFcml0cmVhIixFRToiRXN0b25pYSIsRVQ6IkV0aGlvcGlhIixGSzoiRmFsa2xhbmQgSXNsYW5kcyAoTWFsdmluYXMpIixGTzoiRmFyb2UgSXNsYW5kcyIsRko6IkZpamkiLEZJOiJGaW5sYW5kIixGUjoiRnJhbmNlIixHRjoiRnJlbmNoIEd1aWFuYSIsUEY6IkZyZW5jaCBQb2x5bmVzaWEiLFRGOiJGcmVuY2ggU291dGhlcm4gVGVycml0b3JpZXMiLEdBOiJHYWJvbiIsR006IkdhbWJpYSIsR0U6Ikdlb3JnaWEiLERFOiJHZXJtYW55IixHSDoiR2hhbmEiLEdJOiJHaWJyYWx0YXIiLEdSOiJHcmVlY2UiLEdMOiJHcmVlbmxhbmQiLEdEOiJHcmVuYWRhIixHUDoiR3VhZGVsb3VwZSIsR1U6Ikd1YW0iLEdUOiJHdWF0ZW1hbGEiLEdHOiJHdWVybnNleSIsR046Ikd1aW5lYSIsR1c6Ikd1aW5lYS1CaXNzYXUiLEdZOiJHdXlhbmEiLEhUOiJIYWl0aSIsSE06IkhlYXJkIElzbGFuZCBhbmQgTWNEb25hbGQgSXNsYW5kcyIsSE46IkhvbmR1cmFzIixISzoiSG9uZyBLb25nIixIVToiSHVuZ2FyeSIsSVM6IkljZWxhbmQiLElOOiJJbmRpYSIsSUQ6IkluZG9uZXNpYSIsSVI6IklyYW4sIElzbGFtaWMgUmVwdWJsaWMgb2YiLElROiJJcmFxIixJRToiSXJlbGFuZCIsSUw6IklzcmFlbCIsSVQ6Ikl0YWx5IixKTToiSmFtYWljYSIsSlA6IkphcGFuIixKRToiSmVyc2V5IixKTzoiSm9yZGFuIixLWjoiS2F6YWtoc3RhbiIsS0U6IktlbnlhIixLSToiS2lyaWJhdGkiLEtSOiJLb3JlYSwgUmVwdWJsaWMgb2YiLEtXOiJLdXdhaXQiLEtHOiJLeXJneXpzdGFuIixMQToiTGFvIFBlb3BsZSdzIERlbW9jcmF0aWMgUmVwdWJsaWMiLExWOiJMYXR2aWEiLExCOiJMZWJhbm9uIixMUzoiTGVzb3RobyIsTFI6IkxpYmVyaWEiLExZOiJMaWJ5YSIsTEk6IkxpZWNodGVuc3RlaW4iLExUOiJMaXRodWFuaWEiLExVOiJMdXhlbWJvdXJnIixNTzoiTWFjYW8iLE1LOiJNYWNlZG9uaWEsIHRoZSBmb3JtZXIgWXVnb3NsYXYgUmVwdWJsaWMgb2YiLE1HOiJNYWRhZ2FzY2FyIixNVzoiTWFsYXdpIixNWToiTWFsYXlzaWEiLE1WOiJNYWxkaXZlcyIsTUw6Ik1hbGkiLE1UOiJNYWx0YSIsTUg6Ik1hcnNoYWxsIElzbGFuZHMiLE1ROiJNYXJ0aW5pcXVlIixNUjoiTWF1cml0YW5pYSIsTVU6Ik1hdXJpdGl1cyIsWVQ6Ik1heW90dGUiLE1YOiJNZXhpY28iLEZNOiJNaWNyb25lc2lhLCBGZWRlcmF0ZWQgU3RhdGVzIG9mIixNRDoiTW9sZG92YSwgUmVwdWJsaWMgb2YiLE1DOiJNb25hY28iLE1OOiJNb25nb2xpYSIsTUU6Ik1vbnRlbmVncm8iLE1TOiJNb250c2VycmF0IixNQToiTW9yb2NjbyIsTVo6Ik1vemFtYmlxdWUiLE1NOiJNeWFubWFyIixOQToiTmFtaWJpYSIsTlI6Ik5hdXJ1IixOUDoiTmVwYWwiLE5MOiJOZXRoZXJsYW5kcyIsQU46Ik5ldGhlcmxhbmRzIEFudGlsbGVzIixOQzoiTmV3IENhbGVkb25pYSIsTlo6Ik5ldyBaZWFsYW5kIixOSToiTmljYXJhZ3VhIixORToiTmlnZXIiLE5HOiJOaWdlcmlhIixOVToiTml1ZSIsTkY6Ik5vcmZvbGsgSXNsYW5kIixLUDoiS29yZWEsIERlbW9jcmF0aWMgUGVvcGxlJ3MgUmVwdWJsaWMgb2YiLE1QOiJOb3J0aGVybiBNYXJpYW5hIElzbGFuZHMiLE5POiJOb3J3YXkiLE9NOiJPbWFuIixQSzoiUGFraXN0YW4iLFBXOiJQYWxhdSIsUFM6IlBhbGVzdGluZSwgU3RhdGUgb2YiLFBBOiJQYW5hbWEiLFBHOiJQYXB1YSBOZXcgR3VpbmVhIixQWToiUGFyYWd1YXkiLFBFOiJQZXJ1IixQSDoiUGhpbGlwcGluZXMiLFBOOiJQaXRjYWlybiIsUEw6IlBvbGFuZCIsUFQ6IlBvcnR1Z2FsIixQUjoiUHVlcnRvIFJpY28iLFFBOiJRYXRhciIsUkU6IlLDqXVuaW9uIixSTzoiUm9tYW5pYSIsUlU6IlJ1c3NpYW4gRmVkZXJhdGlvbiIsUlc6IlJ3YW5kYSIsU0g6IlNhaW50IEhlbGVuYSwgQXNjZW5zaW9uIGFuZCBUcmlzdGFuIGRhIEN1bmhhIixLTjoiU2FpbnQgS2l0dHMgYW5kIE5ldmlzIixMQzoiU2FpbnQgTHVjaWEiLFBNOiJTYWludCBQaWVycmUgYW5kIE1pcXVlbG9uIixWQzoiU2FpbnQgVmluY2VudCBhbmQgdGhlIEdyZW5hZGluZXMiLFdTOiJTYW1vYSIsU006IlNhbiBNYXJpbm8iLFNUOiJTw6NvIFRvbcOpIGFuZCBQcsOtbmNpcGUiLFNBOiJTYXVkaSBBcmFiaWEiLFNOOiJTZW5lZ2FsIixSUzoiU2VyYmlhIixTQzoiU2V5Y2hlbGxlcyIsU0w6IlNpZXJyYSBMZW9uZSIsU0c6IlNpbmdhcG9yZSIsU0s6IlNsb3Zha2lhIixTSToiU2xvdmVuaWEiLFNCOiJTb2xvbW9uIElzbGFuZHMiLFNPOiJTb21hbGlhIixaQToiU291dGggQWZyaWNhIixHUzoiU291dGggR2VvcmdpYSBhbmQgdGhlIFNvdXRoIFNhbmR3aWNoIElzbGFuZHMiLFNTOiJTb3V0aCBTdWRhbiIsRVM6IlNwYWluIixMSzoiU3JpIExhbmthIixTRDoiU3VkYW4iLFNSOiJTdXJpbmFtZSIsU0o6IlN2YWxiYXJkIGFuZCBKYW4gTWF5ZW4iLFNaOiJTd2F6aWxhbmQiLFNFOiJTd2VkZW4iLENIOiJTd2l0emVybGFuZCIsU1k6IlN5cmlhbiBBcmFiIFJlcHVibGljIixUVzoiVGFpd2FuIixUSjoiVGFqaWtpc3RhbiIsVFo6IlRhbnphbmlhLCBVbml0ZWQgUmVwdWJsaWMgb2YiLFRIOiJUaGFpbGFuZCIsVEc6IlRvZ28iLFRLOiJUb2tlbGF1IixUTzoiVG9uZ2EiLFRUOiJUcmluaWRhZCBhbmQgVG9iYWdvIixUTjoiVHVuaXNpYSIsVFI6IlR1cmtleSIsVE06IlR1cmttZW5pc3RhbiIsVEM6IlR1cmtzIGFuZCBDYWljb3MgSXNsYW5kcyIsVFY6IlR1dmFsdSIsVkk6IlZpcmdpbiBJc2xhbmRzLCBVLlMuIixVRzoiVWdhbmRhIixVQToiVWtyYWluZSIsQUU6IlVuaXRlZCBBcmFiIEVtaXJhdGVzIixHQjoiVW5pdGVkIEtpbmdkb20iLFVTOiJVbml0ZWQgU3RhdGVzIixVTToiVW5pdGVkIFN0YXRlcyBNaW5vciBPdXRseWluZyBJc2xhbmRzIixVWToiVXJ1Z3VheSIsVVo6IlV6YmVraXN0YW4iLFZVOiJWYW51YXR1IixWQToiSG9seSBTZWUgKFZhdGljYW4gQ2l0eSBTdGF0ZSkiLFZFOiJWZW5lenVlbGEsIEJvbGl2YXJpYW4gUmVwdWJsaWMgb2YiLFZOOiJWaWV0IE5hbSIsV0Y6IldhbGxpcyBhbmQgRnV0dW5hIixFSDoiV2VzdGVybiBTYWhhcmEiLFlFOiJZZW1lbiIsWk06IlphbWJpYSIsWlc6IlppbWJhYndlIn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ2NCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5leHRlbmQoZSx7ZGVwcmVjYXRlOmZ1bmN0aW9uKHQpe2Uud2FybigiW29rdGEtc2lnbmluLXdpZGdldF0gREVQUkVDQVRFRDoiLHQpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KV0scj1mdW5jdGlvbih0KXt2YXIgZT17fSxuPSJ3aXRoQ3JlZGVudGlhbHMiaW4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCxpPSJ1bmRlZmluZWQiIT10eXBlb2YgWERvbWFpblJlcXVlc3Q7cmV0dXJuIGUuY29yc0lzTm90U3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIShufHxpKX0sZS5jb3JzSXNOb3RFbmFibGVkPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC5zdGF0dXN9LGUubG9jYWxTdG9yYWdlSXNOb3RTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgdD0idGVzdCI7dHJ5e3JldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0LHQpLGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHQpLCExfWNhdGNoKGUpe3JldHVybiEwfX0sZS5zdXBwb3J0c1B1c2hTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10fHx3aW5kb3csISghdC5oaXN0b3J5fHwhdC5oaXN0b3J5LnB1c2hTdGF0ZSl9LGUuaXNJRT1mdW5jdGlvbigpe3JldHVybi8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGUuaXNGaXJlZm94PWZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJmaXJlZm94Iik+LTF9LGUuZ2V0VXNlckxhbmd1YWdlcz1mdW5jdGlvbigpe3ZhciBlLG47cmV0dXJuIG5hdmlnYXRvci5sYW5ndWFnZXM/bmF2aWdhdG9yLmxhbmd1YWdlczooZT1bXSxuPVsibGFuZ3VhZ2UiLCJ1c2VyTGFuZ3VhZ2UiLCJicm93c2VyTGFuZ3VhZ2UiLCJzeXN0ZW1MYW5ndWFnZSJdLHQuZWFjaChuLGZ1bmN0aW9uKHQpe25hdmlnYXRvclt0XSYmZS5wdXNoKG5hdmlnYXRvclt0XSl9KSxlKX0sZX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBfdHlwZW9mPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fTsib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIEpTT04/InVuZGVmaW5lZCI6X3R5cGVvZihKU09OKSkmJihKU09OPXt9KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGYodCl7cmV0dXJuIHQ8MTA/IjAiK3Q6dH1mdW5jdGlvbiBxdW90ZSh0KXtyZXR1cm4gZXNjYXBhYmxlLmxhc3RJbmRleD0wLGVzY2FwYWJsZS50ZXN0KHQpPyciJyt0LnJlcGxhY2UoZXNjYXBhYmxlLGZ1bmN0aW9uKHQpe3ZhciBlPW1ldGFbdF07cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP2U6IlxcdSIrKCIwMDAwIit0LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCl9KSsnIic6JyInK3QrJyInfWZ1bmN0aW9uIHN0cih0LGUpe3ZhciBuLGkscixvLHMsYT1nYXAsbD1lW3RdO3N3aXRjaChsJiYib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIGw/InVuZGVmaW5lZCI6X3R5cGVvZihsKSkmJiJmdW5jdGlvbiI9PXR5cGVvZiBsLnRvSlNPTiYmKGw9bC50b0pTT04odCkpLCJmdW5jdGlvbiI9PXR5cGVvZiByZXAmJihsPXJlcC5jYWxsKGUsdCxsKSksInVuZGVmaW5lZCI9PXR5cGVvZiBsPyJ1bmRlZmluZWQiOl90eXBlb2YobCkpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gcXVvdGUobCk7Y2FzZSJudW1iZXIiOnJldHVybiBpc0Zpbml0ZShsKT9TdHJpbmcobCk6Im51bGwiO2Nhc2UiYm9vbGVhbiI6Y2FzZSJudWxsIjpyZXR1cm4gU3RyaW5nKGwpO2Nhc2Uib2JqZWN0IjppZighbClyZXR1cm4ibnVsbCI7aWYoZ2FwKz1pbmRlbnQscz1bXSwiW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShsKSl7Zm9yKG89bC5sZW5ndGgsbj0wO248bztuKz0xKXNbbl09c3RyKG4sbCl8fCJudWxsIjtyZXR1cm4gcj0wPT09cy5sZW5ndGg/IltdIjpnYXA/IltcbiIrZ2FwK3Muam9pbigiLFxuIitnYXApKyJcbiIrYSsiXSI6IlsiK3Muam9pbigiLCIpKyJdIixnYXA9YSxyfWlmKHJlcCYmIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiByZXA/InVuZGVmaW5lZCI6X3R5cGVvZihyZXApKSlmb3Iobz1yZXAubGVuZ3RoLG49MDtuPG87bis9MSkic3RyaW5nIj09dHlwZW9mIHJlcFtuXSYmKGk9cmVwW25dLHI9c3RyKGksbCksciYmcy5wdXNoKHF1b3RlKGkpKyhnYXA/IjogIjoiOiIpK3IpKTtlbHNlIGZvcihpIGluIGwpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGwsaSkmJihyPXN0cihpLGwpLHImJnMucHVzaChxdW90ZShpKSsoZ2FwPyI6ICI6IjoiKStyKSk7cmV0dXJuIHI9MD09PXMubGVuZ3RoPyJ7fSI6Z2FwPyJ7XG4iK2dhcCtzLmpvaW4oIixcbiIrZ2FwKSsiXG4iK2ErIn0iOiJ7IitzLmpvaW4oIiwiKSsifSIsZ2FwPWEscn19ImZ1bmN0aW9uIiE9dHlwZW9mIERhdGUucHJvdG90eXBlLnRvSlNPTiYmKERhdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gaXNGaW5pdGUodGhpcy52YWx1ZU9mKCkpP3RoaXMuZ2V0VVRDRnVsbFllYXIoKSsiLSIrZih0aGlzLmdldFVUQ01vbnRoKCkrMSkrIi0iK2YodGhpcy5nZXRVVENEYXRlKCkpKyJUIitmKHRoaXMuZ2V0VVRDSG91cnMoKSkrIjoiK2YodGhpcy5nZXRVVENNaW51dGVzKCkpKyI6IitmKHRoaXMuZ2V0VVRDU2Vjb25kcygpKSsiWiI6bnVsbH0sU3RyaW5nLnByb3RvdHlwZS50b0pTT049TnVtYmVyLnByb3RvdHlwZS50b0pTT049Qm9vbGVhbi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0pO3ZhciBjeD0vW1x1MDAwMFx1MDBhZFx1MDYwMC1cdTA2MDRcdTA3MGZcdTE3YjRcdTE3YjVcdTIwMGMtXHUyMDBmXHUyMDI4LVx1MjAyZlx1MjA2MC1cdTIwNmZcdWZlZmZcdWZmZjAtXHVmZmZmXS9nLGVzY2FwYWJsZT0vW1xcXCJceDAwLVx4MWZceDdmLVx4OWZcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZl0vZyxnYXAsaW5kZW50LG1ldGE9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9LHJlcDsiZnVuY3Rpb24iIT10eXBlb2YgSlNPTi5zdHJpbmdpZnkmJihKU09OLnN0cmluZ2lmeT1mdW5jdGlvbih0LGUsbil7dmFyIGk7aWYoZ2FwPSIiLGluZGVudD0iIiwibnVtYmVyIj09dHlwZW9mIG4pZm9yKGk9MDtpPG47aSs9MSlpbmRlbnQrPSIgIjtlbHNlInN0cmluZyI9PXR5cGVvZiBuJiYoaW5kZW50PW4pO2lmKHJlcD1lLGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlJiYoIm9iamVjdCIhPT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOl90eXBlb2YoZSkpfHwibnVtYmVyIiE9dHlwZW9mIGUubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IoIkpTT04uc3RyaW5naWZ5Iik7cmV0dXJuIHN0cigiIix7IiI6dH0pfSksImZ1bmN0aW9uIiE9dHlwZW9mIEpTT04ucGFyc2UmJihKU09OLnBhcnNlPWZ1bmN0aW9uKHRleHQscmV2aXZlcil7ZnVuY3Rpb24gd2Fsayh0LGUpe3ZhciBuLGkscj10W2VdO2lmKHImJiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygcj8idW5kZWZpbmVkIjpfdHlwZW9mKHIpKSlmb3IobiBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG4pJiYoaT13YWxrKHIsbiksdm9pZCAwIT09aT9yW25dPWk6ZGVsZXRlIHJbbl0pO3JldHVybiByZXZpdmVyLmNhbGwodCxlLHIpfXZhciBqO2lmKHRleHQ9U3RyaW5nKHRleHQpLGN4Lmxhc3RJbmRleD0wLGN4LnRlc3QodGV4dCkmJih0ZXh0PXRleHQucmVwbGFjZShjeCxmdW5jdGlvbih0KXtyZXR1cm4iXFx1IisoIjAwMDAiK3QuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX0pKSwvXltcXSw6e31cc10qJC8udGVzdCh0ZXh0LnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKSkpcmV0dXJuIGo9ZXZhbCgiKCIrdGV4dCsiKSIpLCJmdW5jdGlvbiI9PXR5cGVvZiByZXZpdmVyP3dhbGsoeyIiOmp9LCIiKTpqO3Rocm93IG5ldyBTeQ==", "base64"));
  res.write(new Buffer("bnRheEVycm9yKCJKU09OLnBhcnNlIil9KX0oKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oMzI4KSxuKDUwOCksbig0NzUpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBpLmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZSl7dGhpcy5fX2hhc0RlZmF1bHRSb3V0ZT0hMTt2YXIgcj10aGlzLl9fdGFic1dpZGdldD1uZXcgbjtyLnJlbmRlcigpO3ZhciBvPXQoZS5lbCk7ZS5lbD1yLmNvbnRlbnQoKSx0KGZ1bmN0aW9uKCl7by5hcHBlbmQoci5lbCl9KSxpLmNhbGwodGhpcyxlKX0sdGFiOmZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvPWUuaXNBcnJheSh0KT90Olt0XTtyZXR1cm4gdGhpcy5fX2FkZFRhYih7cm91dGVzOm8sbWV0aG9kOm4sbGFiZWw6aSxzdWJ0YWJzOnJ9KSx0aGlzfSxfX2FkZFRhYjpmdW5jdGlvbih0KXt0aGlzLl9faGFzRGVmYXVsdFJvdXRlfHwodGhpcy5yb3V0ZSgiIix0Lm1ldGhvZCksdGhpcy5fX2hhc0RlZmF1bHRSb3V0ZT0hMCksdC5zdWJ0YWJzJiZ0LnN1YnRhYnMubGVuZ3RoJiZ0aGlzLl9fYWRkU3ViVGFicyhlLmV4dGVuZChlLnBpY2sodCwicm91dGVzIiwic3VidGFicyIpKSksZS5lYWNoKHQucm91dGVzLGZ1bmN0aW9uKGUpe3RoaXMucm91dGUoZSx0Lm1ldGhvZCl9LHRoaXMpO3ZhciBuPWUuZmlyc3QodC5yb3V0ZXMpO3RoaXMuX190YWJzV2lkZ2V0LmFkZFRhYihlLmV4dGVuZChlLnBpY2sodCwibGFiZWwiLCJtZXRob2QiLCJzdWJ0YWJzIikse3JvdXRlOm4scm91dGVyOnRoaXN9KSl9LF9fYWRkU3ViVGFiczpmdW5jdGlvbih0KXtlLmVhY2godC5zdWJ0YWJzLGZ1bmN0aW9uKG4pe3ZhciBpPXQucm91dGVzKyIvIituLnJvdXRlczt0aGlzLnJvdXRlKGksbi5tZXRob2QpLHRoaXMuX190YWJzV2lkZ2V0LmFkZFN1YlRhYihlLmV4dGVuZChlLnBpY2sobiwibGFiZWwiLCJtZXRob2QiKSx7cm91dGU6aSxyb3V0ZXI6dGhpc30pKX0sdGhpcyl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0NzApLG4oNTA5KSxuKDUxMCldLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LmV4dGVuZCh7Y2xhc3NOYW1lOiJjbGVhcmZpeCB1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIix0ZW1wbGF0ZTonPHVsIHJvbGU9InRhYmxpc3QiIGNsYXNzPSJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCB1aS10YWJzLW1hcmdpbiI+PC91bD48ZGl2IHJvbGU9InN1YnRhYnMiIGNsYXNzPSJ1aS1zdWJ0YWJzIHVpLWhlbHBlci1yZXNldCB1aS10YWJzLW1hcmdpbiI+PC9kaXY+PGRpdiByb2xlPSJ0YWJwYW5lbCIgY2xhc3M9InVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSI+PC9kaXY+Jyxjb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgiZGl2LnVpLXRhYnMtcGFuZWwiKX0sYWRkVGFiOmZ1bmN0aW9uKHQpe3RoaXMuYWRkKGUsInVsIix7b3B0aW9uczp0fSl9LGFkZFN1YlRhYjpmdW5jdGlvbih0KXt0aGlzLmFkZChuLCJkaXYudWktc3VidGFicyIse29wdGlvbnM6dH0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe3RhZ05hbWU6ImxpIixjbGFzc05hbWU6InVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIsYXR0cmlidXRlczp7cm9sZToidGFiIn0sdGVtcGxhdGU6JzxhIGNsYXNzPSJ1aS10YWJzLWFuY2hvciIgcm9sZT0icHJlc2VudGF0aW9uIiBocmVmPSJ7e3JvdXRlfX0iPnt7bGFiZWx9fTwvYT4nLGV2ZW50czp7ImNsaWNrIGEiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMucm91dGVyLm5hdmlnYXRlKHRoaXMucm91dGUse3RyaWdnZXI6ITB9KX19LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0LmV4dGVuZCh0aGlzLHQucGljayh0aGlzLm9wdGlvbnMsInJvdXRlIiwicm91dGVyIiwibWV0aG9kIikpLHRoaXMubGlzdGVuVG8odGhpcy5yb3V0ZXIsInJvdXRlIix0aGlzLnRvZ2dsZSl9LHRvZ2dsZTpmdW5jdGlvbihlKXtpZih0aGlzLiRlbC50b2dnbGVDbGFzcygidWktc3RhdGUtYWN0aXZlIHVpLXRhYnMtc2VsZWN0ZWQiLGU9PXRoaXMubWV0aG9kKSx0aGlzLm9wdGlvbnMuc3VidGFicyYmdGhpcy5vcHRpb25zLnN1YnRhYnMubGVuZ3RoKWlmKGUhPXRoaXMubWV0aG9kKXQuZWFjaCh0aGlzLm9wdGlvbnMuc3VidGFicyxmdW5jdGlvbih0KXt0Lm1ldGhvZD09ZSYmdGhpcy4kZWwuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSB1aS10YWJzLXNlbGVjdGVkIil9LHRoaXMpO2Vsc2V7dGhpcy4kZWwucGFyZW50KCkucGFyZW50KCkuZmluZCgiLnVpLXN1YnRhYnMgbGk6Zmlyc3QtY2hpbGQiKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIHVpLXRhYnMtc2VsZWN0ZWQiKTt2YXIgbj10aGlzLm9wdGlvbnMucm91dGUrIi8iK3RoaXMub3B0aW9ucy5zdWJ0YWJzWzBdLnJvdXRlczt0aGlzLnJvdXRlci5uYXZpZ2F0ZShuLHt0cmlnZ2VyOiEwfSl9ZWxzZSB0aGlzLiRlbC5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCIudWktc3VidGFicyIpLnRvZ2dsZShlIT10aGlzLm1ldGhvZCl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmV4dGVuZCh7dGFnTmFtZToibGkiLGNsYXNzTmFtZToic3VidGFiIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIsYXR0cmlidXRlczp7cm9sZToic3VidGFiIn0sdGVtcGxhdGU6JzxhIGNsYXNzPSJzdWItdGFiLWxpbmsgdWktdGFicy1hbmNob3IiIHJvbGU9InByZXNlbnRhdGlvbiIgaHJlZj0ie3tyb3V0ZX19Ij57e2xhYmVsfX08L2E+JyxldmVudHM6eyJjbGljayBhIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnJvdXRlci5uYXZpZ2F0ZSh0aGlzLnJvdXRlLHt0cmlnZ2VyOiEwfSl9fSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dC5leHRlbmQodGhpcyx0LnBpY2sodGhpcy5vcHRpb25zLCJyb3V0ZSIsInJvdXRlciIsIm1ldGhvZCIpKSx0aGlzLmxpc3RlblRvKHRoaXMucm91dGVyLCJyb3V0ZSIsdGhpcy50b2dnbGUpfSx0b2dnbGU6ZnVuY3Rpb24odCl7dGhpcy4kZWwudG9nZ2xlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSB1aS10YWJzLXNlbGVjdGVkIix0PT10aGlzLm1ldGhvZCksdGhpcy4kZWwucGFyZW50KCkucGFyZW50KCkuZmluZCgiLnVpLXRhYnMtcGFuZWwiKS5hZGRDbGFzcygic3VidGFiLWNvbnRlbnQiKSx0aGlzLiRlbC5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCIudWktc3VidGFicyIpLmFkZENsYXNzKCJzdWJ0YWJzLXBhbmVsIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjshKHQuZXhwb3J0cz17REVCT1VOQ0VfREVMQVk6MjAwLExPQURJTkdfRkFERTo0MDAsVU5MT0FESU5HX0ZBREU6NDAwLFJPV19FWFBBTkRFUl9UUkFOU0lUSU9OOjE1MCxISURFX0FERF9NQVBQSU5HX0ZPUk06MzAwfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzYxKV0scj1mdW5jdGlvbih0KXt2YXIgZT17TUlMTElTRUNPTkQ6Im1pbGxpc2Vjb25kcyIsU0VDT05EOiJzZWNvbmRzIixNSU5VVEU6Im1pbnV0ZXMiLEhPVVI6ImhvdXJzIixEQVk6ImRheXMifTtyZXR1cm57TUlOVVRFU19IT1VSU19EQVlTOntNSU5VVEU6Ik1pbnV0ZXMiLEhPVVI6IkhvdXJzIixEQVk6IkRheXMifSxNSUxMSVNFQ09ORFNfU0VDT05EU19NSU5VVEVTOntNSUxMSVNFQ09ORDoiTWlsbGlzZWNvbmRzIixTRUNPTkQ6IlNlY29uZHMiLE1JTlVURToiTWludXRlcyJ9LGNvbnZlcnRUb1BEVDpmdW5jdGlvbihlLG4saSl7cmV0dXJuIG58fChuPSJNTU0gREQsIFlZWVkgaDptbTpzcyBBIiksaXx8KGk9IiIpLGU/dChlKS51dGMoKS56b25lKCItMDc6MDAiKS5mb3JtYXQobik6aX0sZ2V0VGltZUluSGlnaGVzdFJlbGV2YW50VW5pdDpmdW5jdGlvbihuLGkpe3ZhciByLG89dC5kdXJhdGlvbihuLGVbaV18fGkpO3JldHVybiByPTAhPT1vLm1pbGxpc2Vjb25kcygpPyJtaWxsaXNlY29uZHMiOjAhPT1vLnNlY29uZHMoKT8ic2Vjb25kcyI6MCE9PW8ubWludXRlcygpPyJtaW51dGVzIjowIT09by5ob3VycygpPyJob3VycyI6ImRheXMiLHt0aW1lOm8uYXMociksdW5pdDp0aGlzLmNvbnZlcnRNb21lbnRVbml0cyhyKX19LGNvbnZlcnRNb21lbnRVbml0czpmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSJtaWxsaXNlY29uZHMiOnJldHVybiJNSUxMSVNFQ09ORCI7Y2FzZSJzZWNvbmRzIjpyZXR1cm4iU0VDT05EIjtjYXNlIm1pbnV0ZXMiOnJldHVybiJNSU5VVEUiO2Nhc2UiaG91cnMiOnJldHVybiJIT1VSIjtjYXNlImRheXMiOnJldHVybiJEQVkiO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJUaW1lIHVuaXQgbm90IHJlY29nbml6ZWQ6ICIrdCl9fSxjb252ZXJ0VGltZVVuaXQ6ZnVuY3Rpb24obixpLHIpe3JldHVybiBuPXBhcnNlSW50KG4sMTApLGk9ZVtpXXx8aSxyPWVbcl18fHIsdC5kdXJhdGlvbihuLGkpLmFzKHIpfSxjb252ZXJ0VGltZUZvcm1hdDpmdW5jdGlvbihlLG4saSl7cmV0dXJuIGl8fChpPSJNTU1NIERvLCBZWVlZIiksdChlLG4pLmZvcm1hdChpKX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzApXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3JlZGlyZWN0OmZ1bmN0aW9uKHQpe3dpbmRvdy5sb2NhdGlvbj10fSxyZWxvYWRQYWdlOmZ1bmN0aW9uKCl7d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfSxjb25zdGFudEVycm9yOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcih0KX19LGdldFVybFF1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGUpe3QuaXNPYmplY3QoZSl8fChlPXt9KTt2YXIgbj10LndpdGhvdXQodC5tYXAoZSxmdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PXQmJm51bGwhPT10KXJldHVybiBlKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9KSx2b2lkIDApLmpvaW4oIiYiKTtyZXR1cm4gdC5pc0VtcHR5KG4pPyIiOiI/IitufSxpc0FCYXNlVmlldzpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV8fHQucHJvdG90eXBlIGluc3RhbmNlb2YgZXx8dD09PWV9fX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDQ3MCksbig1MTYpLG4oNTE4KSxuKDUxOSksbig1NzMpLG4oNTk0KSxuKDYxMSksbig2MTIpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSl7cmV0dXJue0Jhc2VWaWV3OnQsTGlzdFZpZXc6ZSxUYWJsZVZpZXc6bixjb21wb25lbnRzOmksZGF0YWxpc3Q6cixmb3JtczpvLHRhYnM6cyx1cGxvYWRlcjphfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDQ3MCksbig1MTcpXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZGVjb3JhdGUoZSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbzsiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKHMsYSl7cj1bbigzMjgpLG4oNDcyKV0saT1hLG89ImZ1bmN0aW9uIj09dHlwZW9mIGk/aS5hcHBseShlLHIpOmksISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0odm9pZCAwLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2lmKGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLCF0aGlzLmNvbGxlY3Rpb24pdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIGNvbGxlY3Rpb24iKTt0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwicmVzZXQgc29ydCIsdGhpcy5yZXNldCksdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sImFkZCIsdGhpcy5hZGRJdGVtKSx0aGlzLmNvbGxlY3Rpb24uZWFjaCh0aGlzLmFkZEl0ZW0sdGhpcyl9LGl0ZW06bnVsbCxpdGVtU2VsZWN0b3I6bnVsbCxyZXNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUNoaWxkcmVuKCksdGhpcy5jb2xsZWN0aW9uLmVhY2godGhpcy5hZGRJdGVtLHRoaXMpLHRoaXN9LGFkZEl0ZW06ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hZGQodGhpcy5pdGVtLHRoaXMuaXRlbVNlbGVjdG9yLHtvcHRpb25zOnttb2RlbDp0fX0pLmxhc3QoKTtyZXR1cm4gZS5saXN0ZW5Ubyh0LCJkZXN0cm95IHJlbW92ZSIsZS5yZW1vdmUpLHRoaXN9fSl9KX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNDc5KSxuKDU2OCksbig1MjEpLG4oNTYzKSxuKDU2NSksbig1MjApLG4oNTY5KSxuKDU3MCksbig1NzEpLG4oNDc2KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEsbCxjKXtyZXR1cm57QmFzZUJ1dHRvbkxpbms6dCxCYXNlRHJvcERvd246ZSxCYXNlRm9ybURpYWxvZzpuLEJhc2VNb2RhbERpYWxvZzppLEJhc2VTcGlubmVyOnIsQ2FsbG91dDpvLENvbmZpcm1hdGlvbkRpYWxvZzpzLERyb3BEb3duOmEsTXVsdGlWaWV3TW9kYWxEaWFsb2c6bCxOb3RpZmljYXRpb246Y319LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcwKSxuKDUxMSldLHI9ZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkoZSxuKXtyZXR1cm4gdC5yZXN1bHRDdHgoZS5vcHRpb25zLG4sZSl8fHQucmVzdWx0KGUsbil9ZnVuY3Rpb24gcih0KXt2YXIgZT0iaW5mb2JveCBjbGVhcmZpeCBpbmZvYm94LSIraSh0LCJ0eXBlIik7c3dpdGNoKGkodCwic2l6ZSIpKXtjYXNlInN0YW5kYXJkIjplKz0iIjticmVhaztjYXNlImNvbXBhY3QiOmUrPSIgaW5mb2JveC1jb21wYWN0IjticmVhaztjYXNlImxhcmdlIjplKz0iIGluZm9ib3gtbWQifXJldHVybiBpKHQsImRpc21pc3NpYmxlIikmJihlKz0iIGluZm9ib3gtZGlzbWlzcyIpLGV9dmFyIG89eyJjbGljayAuaW5mb2JveC1kaXNtaXNzLWxpbmsiOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLiRlbC5mYWRlT3V0KG4uVU5MT0FESU5HX0ZBREUsdC5iaW5kKHRoaXMucmVtb3ZlLHRoaXMpKX19LHM9J1x0ICAgIHt7I2lmIGRpc21pc3NpYmxlfX1cdCAgICAgIDxhIGNsYXNzPSJpbmZvYm94LWRpc21pc3MtbGluayIgdGl0bGU9IkRpc21pc3MiIGhyZWY9IiMiPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iZGlzbWlzcy1pY29uIj48L3NwYW4+XHQgICAgICA8L2E+XHQgICAge3svaWZ9fVx0ICAgIDxzcGFuIGNsYXNzPSJpY29uIHt7aWNvbn19Ij48L3NwYW4+XHQgICAge3sjaWYgdGl0bGV9fTxoMz57e3RpdGxlfX08L2gzPnt7L2lmfX1cdCAgICB7eyNpZiBzdWJ0aXRsZX19PHA+e3tzdWJ0aXRsZX19PC9wPnt7L2lmfX1cdCAgICB7eyNpZiBidWxsZXRzfX1cdCAgICAgIDx1bCBjbGFzcz0iYnVsbGV0cyI+XHQgICAgICB7eyNlYWNoIGJ1bGxldHN9fTxsaT57e3RoaXN9fTwvbGk+e3svZWFjaH19XHQgICAgICA8L3VsPlx0ICAgIHt7L2lmfX1cdCAgJyxhPWUuZXh0ZW5kKHtjb250ZW50Om51bGwsc2l6ZToic3RhbmRhcmQiLHR5cGU6ImluZm8iLGRpc21pc3NpYmxlOiExLHRpdGxlOm51bGwsc3VidGl0bGU6bnVsbCxidWxsZXRzOm51bGwsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cz10LmRlZmF1bHRzKHRoaXMuZXZlbnRzfHx7fSxvKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLiRlbC5hZGRDbGFzcyhyKHRoaXMpKSx0aGlzLnRlbXBsYXRlPXM7dmFyIG49aSh0aGlzLCJjb250ZW50Iik7biYmdGhpcy5hZGQobil9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3ZhciB0PWkodGhpcywidHlwZSIpO3JldHVybiJ0aXAiPT10JiYodD0ibGlnaHQtYnVsYiIpLHtpY29uOnQrIi0iKygibGFyZ2UiPT1pKHRoaXMsInNpemUiKT8iMjQiOiIxNiIpLHRpdGxlOmkodGhpcywidGl0bGUiKSxzdWJ0aXRsZTppKHRoaXMsInN1YnRpdGxlIiksYnVsbGV0czppKHRoaXMsImJ1bGxldHMiKSxkaXNtaXNzaWJsZTppKHRoaXMsImRpc21pc3NpYmxlIil9fX0pO3JldHVybntjcmVhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBhKHQpfX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oMzI4KSxuKDQ3MCksbig0NjYpLG4oNTIyKV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPVsic2F2ZSIsIm5vQ2FuY2VsQnV0dG9uIiwiaW5wdXRzIiwic3VidGl0bGUiLCJhdXRvU2F2ZSIsImZvY3VzIiwiY2FuY2VsIiwiZGFuZ2VyIiwiaGFzU2F2aW5nU3RhdGUiLCJjdXN0b21TYXZpbmdTdGF0ZSIsInBhcnNlRXJyb3JNZXNzYWdlIl0scz17bGF5b3V0OiJvLWZvcm0td3JhcCIsc2Nyb2xsT25FcnJvcjohMX0sYT17bWluV2lkdGg6NjAwLG1heFdpZHRoOjk1MCxmb2N1czohMSxjbG9zZTohMSxhdXRvUmVzaXplOiExLGF1dG9Qb3NpdGlvbjohMH07cmV0dXJuIG4uZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihsKXt2YXIgYz1yLmV4dGVuZChlLmV4dGVuZCh7fSxzLGUucGljayh0aGlzLG8pKSk7dGhpcy5mb3JtPW5ldyBjKGUub21pdChsLCJ0aXRsZSIsInN1YnRpdGxlIikpLHRoaXMubGlzdGVuVG8odGhpcy5mb3JtLCJyZXNpemUiLGUuZGVib3VuY2UoZS5iaW5kKHRoaXMucmVzaXplTW9kYWwsdGhpcyksMTAwKSk7dmFyIHU9ZS5iaW5kKHRoaXMucmVtb3ZlLHRoaXMpO3RoaXMubGlzdGVuVG8odGhpcy5mb3JtLCJhbGwiLGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSwiY2FuY2VsIj09PWFyZ3VtZW50c1swXSYmdSgpfSksdCh3aW5kb3cpLnJlc2l6ZShlLmRlYm91bmNlKGUuYmluZCh0aGlzLnJlc2l6ZU1vZGFsLHRoaXMpLDEwMCkpO3ZhciBkPWkuZXh0ZW5kKHt0aXRsZTp0aGlzLnRpdGxlLGNsYXNzTmFtZTp0aGlzLmNsYXNzTmFtZSxwYXJhbXM6ZS5leHRlbmQoe30sYSx0aGlzLnBhcmFtcyl9KTt0aGlzLmRpYWxvZz1uZXcgZChsKSx0aGlzLmRpYWxvZy5hZGQodGhpcy5mb3JtKSx0aGlzLmVsPXRoaXMuZGlhbG9nLmVsLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZm9ybS5nZXRBdHRyaWJ1dGUoImF1dG9TYXZlIikmJnRoaXMubGlzdGVuVG8odGhpcywic2F2ZWQiLHRoaXMucmVtb3ZlKX0sZm9ybTp2b2lkIDAsZGlhbG9nOnZvaWQgMCxhZGRJbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm0uYWRkSW5wdXQuYXBwbHkodGhpcy5mb3JtLGFyZ3VtZW50cyl9LGFkZEJ1dHRvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm0uYWRkQnV0dG9uLmFwcGx5KHRoaXMuZm9ybSxhcmd1bWVudHMpfSxhZGREaXZpZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybS5hZGREaXZpZGVyLmFwcGx5KHRoaXMuZm9ybSxhcmd1bWVudHMpfSxhZGRTZWN0aW9uVGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3JtLmFkZFNlY3Rpb25UaXRsZS5hcHBseSh0aGlzLmZvcm0sYXJndW1lbnRzKX0sYWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybS5hZGQuYXBwbHkodGhpcy5mb3JtLGFyZ3VtZW50cyl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZVJlbmRlcigpLHRoaXMuZGlhbG9nLnJlbmRlci5hcHBseSh0aGlzLmRpYWxvZyxhcmd1bWVudHMpLGUuZGVmZXIoZS5iaW5kKHRoaXMucmVzaXplTW9kYWwsdGhpcykpLHRoaXMucG9zdFJlbmRlcigpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpYWxvZy5yZW1vdmUuYXBwbHkodGhpcy5kaWFsb2csYXJndW1lbnRzKSxuLnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXNpemVNb2RhbDpmdW5jdGlvbigpe3ZhciBuPXQoIi5zaW1wbGVtb2RhbC1jb250YWluZXItbmV3IiksaT10aGlzLmZvcm0scj1uLmhlaWdodCgpLG89ZS5pc051bWJlcih0aGlzLmRpYWxvZy5wYXJhbXMubWluSGVpZ2h0KT90aGlzLmRpYWxvZy5wYXJhbXMubWluSGVpZ2h0OjAscz10KHdpbmRvdykuaGVpZ2h0KCk7bzw9ciYmKHI+PXM/aS5jb250ZW50SGVpZ2h0KHMtdGhpcy5kaWFsb2cuJCgiaDIiKS5vdXRlckhlaWdodCgpLWkuJCgiLm8tZm9ybS1idXR0b24tYmFyIikub3V0ZXJIZWlnaHQoKS0obi5vdXRlckhlaWdodCghMCktaS4kZWwub3V0ZXJIZWlnaHQoITApKSk6aS5jb250ZW50SGVpZ2h0KGkuY29udGVudEhlaWdodCgpKyhzLXIpLShuLm91dGVySGVpZ2h0KCktcikpLHRoaXMuZGlhbG9nLnJlc2l6ZS5hcHBseSh0aGlzLmRpYWxvZyxhcmd1bWVudHMpKX0sY2xlYXJFcnJvcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3JtLmNsZWFyRXJyb3JzLmFwcGx5KHRoaXMuZm9ybSxhcmd1bWVudHMpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDMzMSksbig0NzEpLG4oNTAwKSxuKDQ3MCksbig1MjQpLG4oNTU2KSxuKDUyMyksbig1NTgpLG4oNTYwKSxuKDU0OSksbig1NTkpLG4oNTYxKSxuKDU2MildLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhLGwsYyx1LGQsaCxwKXtmdW5jdGlvbiBmKHQpe2lmKCFfJiZ0aGlzLiRlbC5oYXNDbGFzcygiby1mb3JtLXNhdmluZyIpKXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCk7bi5jc3MoImRpc3BsYXkiLCJub25lIik7dmFyIGk9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0LmNsaWVudFgsdC5jbGllbnRZKTtyZXR1cm4gbi5jc3MoImRpc3BsYXkiLCJibG9jayIpLHQudGFyZ2V0PWksZShpKS50cmlnZ2VyKHQpLCExfX12YXIgbT0nXHQgICAge3sjaWYgaGFzUmVhZE1vZGV9fVx0ICAgICAgPGgyIGNsYXNzPSJvLWZvcm0tdGl0bGUtYmFyIiBkYXRhLXNlPSJvLWZvcm0tdGl0bGUtYmFyIj5cdCAgICAgICAge3t0aXRsZX19XHQgICAgICA8L2gyPlx0ICAgIHt7L2lmfX1cdCAgICA8ZGl2IGRhdGEtc2U9Im8tZm9ybS1jb250ZW50IiBjbGFzcz0iby1mb3JtLWNvbnRlbnQge3tsYXlvdXR9fSBjbGVhcmZpeCI+XHQgICAgICB7eyN1bmxlc3MgaGFzUmVhZE1vZGV9fVx0ICAgICAgICB7eyNpZiB0aXRsZX19XHQgICAgICAgICAgPGgyIGRhdGEtc2U9Im8tZm9ybS1oZWFkIiBjbGFzcz0ib2t0YS1mb3JtLXRpdGxlIG8tZm9ybS1oZWFkIj57e3RpdGxlfX08L2gyPlx0ICAgICAgICB7ey9pZn19XHQgICAgICB7ey91bmxlc3N9fVx0ICAgICAge3sjaWYgc3VidGl0bGV9fVx0ICAgICAgICA8cCBjbGFzcz0ib2t0YS1mb3JtLXN1YnRpdGxlIG8tZm9ybS1leHBsYWluIiBkYXRhLXNlPSJvLWZvcm0tZXhwbGFpbiI+e3tzdWJ0aXRsZX19PC9wPlx0ICAgICAge3svaWZ9fVx0ICAgICAgPGRpdiBjbGFzcz0iby1mb3JtLWVycm9yLWNvbnRhaW5lciIgZGF0YS1zZT0iby1mb3JtLWVycm9yLWNvbnRhaW5lciI+PC9kaXY+XHQgICAgICA8ZGl2IGNsYXNzPSJvLWZvcm0tZmllbGRzZXQtY29udGFpbmVyIiBkYXRhLXNlPSJvLWZvcm0tZmllbGRzZXQtY29udGFpbmVyIj48L2Rpdj5cdCAgICA8L2Rpdj5cdCAgJyxfPSJhdXRvIj09PWUoIjxkaXY+IikuY3NzKHsicG9pbnRlci1ldmVudHMiOiJhdXRvIn0pWzBdLnN0eWxlLnBvaW50ZXJFdmVudHMsZz17c3VibWl0OmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLl9fc2F2ZSgpfX07dC5lYWNoKFsiY2xpY2siLCJkYmxjbGljayIsIm1vdXNlZG93biIsIm1vdXNldXAiXSxmdW5jdGlvbih0KXtnW3QrIiAuby1mb3JtLWlucHV0Il09Zn0pO3ZhciB2PWZ1bmN0aW9uKGUpe2V8fChlPXt9KTt2YXIgbj1lJiZlLmNvbGxlY3Rpb258fHt9O3JldHVybnttZXRob2Q6IlBPU1QiLGFjdGlvbjp0LnJlc3VsdChlLCJ1cmxSb290Iil8fHQucmVzdWx0KG4sInVybCIpfHx3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsImRhdGEtc2UiOiJvLWZvcm0ifX0seT1mdW5jdGlvbihlLG4pe2V8fChlPSIiKTt2YXIgaT1bXTtyZXR1cm4gdC5pc1N0cmluZyhlKSYmKGk9ZS5zcGxpdCgiICIpKSxpPXQudW5pb24oaSxuKSxpLmpvaW4oIiAiKX07cmV0dXJuIHIuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihlKXtlfHwoZT17fSksdGhpcy5vcHRpb25zPWUsdGhpcy5pZD10LnVuaXF1ZUlkKCJmb3JtIiksdGhpcy50YWdOYW1lPSJmb3JtIix0LmRlZmF1bHRzKHRoaXMuZXZlbnRzLGcpLHQuZGVmYXVsdHModGhpcy5hdHRyaWJ1dGVzLHYoZS5tb2RlbCkpLHRoaXMuX19idXR0b25zPVtdLHRoaXMuX19lcnJvckZpZWxkcz17fSx0aGlzLl9fc2F2ZU1vZGVsU3RhdGUoZS5tb2RlbCksdGhpcy5zdGVwJiYodGhpcy5zYXZlfHwodGhpcy5zYXZlPXRoaXMudG90YWxTdGVwcyYmdGhpcy5zdGVwIT09dGhpcy50b3RhbFN0ZXBzPyJOZXh0IjoiRmluaXNoIiksdGhpcy5jbGFzc05hbWUrPSIgd2l6YXJkIiksdGhpcy5jbGFzc05hbWUrPSIgby1mb3JtIix0aGlzLl9fdG9vbGJhcj10aGlzLl9fY3JlYXRlVG9vbGJhcihlKSxyLmNhbGwodGhpcyxlKSx0LmVhY2godC5yZXN1bHQodGhpcywiaW5wdXRzIil8fFtdLGZ1bmN0aW9uKHQpe3RoaXMuX19hZGRMYXlvdXRJdGVtKHQpfSx0aGlzKSx0aGlzLmFkZCh0aGlzLl9fdG9vbGJhciwiIiksCgl0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZTpfX2Vk", "base64"));
  res.write(new Buffer("aXRfXyIsdGhpcy5fX2FwcGx5TW9kZSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJpbnZhbGlkIGVycm9yIix0LnRocm90dGxlKGZ1bmN0aW9uKHQsZSxuKXt0aGlzLl9fc2hvd0Vycm9ycyh0LGUsbiE9PSExKX0sMTAwLHt0cmFpbGluZzohMX0pKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06cmVzaXplIixmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigicmVzaXplIil9KSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06Y2FuY2VsIix0LnRocm90dGxlKHRoaXMuX19jYW5jZWwsMTAwLHt0cmFpbGluZzohMX0pKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06cHJldmlvdXMiLHQudGhyb3R0bGUodGhpcy5fX3ByZXZpb3VzLDEwMCx7dHJhaWxpbmc6ITF9KSksdGhpcy5fX3NhdmU9dC50aHJvdHRsZSh0aGlzLl9fc2F2ZSwyMDAse3RyYWlsaW5nOiExfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJmb3JtOnNhdmUiLGZ1bmN0aW9uKCl7dGhpcy4kZWwuc3VibWl0KCl9KSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsInN5bmMiLGZ1bmN0aW9uKCl7dGhpcy5tb2RlbC5nZXQoIl9fZWRpdF9fIikmJnRoaXMubW9kZWwuc2V0KCJfX2VkaXRfXyIsITEse3NpbGVudDohMH0pLHRoaXMuX19zYXZlTW9kZWxTdGF0ZSh0aGlzLm1vZGVsKSx0aGlzLnJlbmRlcigpfSk7dmFyIG49dGhpcy5nZXRBdHRyaWJ1dGUoImhhc1NhdmluZ1N0YXRlIik7aWYodGhpcy5nZXRBdHRyaWJ1dGUoImF1dG9TYXZlIikmJih0aGlzLmxpc3RlblRvKHRoaXMsInNhdmUiLGZ1bmN0aW9uKGUpe3ZhciBuPWUuc2F2ZSgpO24mJm4uZG9uZSYmbi5kb25lKHQuYmluZChmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigic2F2ZWQiLGUpfSx0aGlzKSl9KSx0LmlzVW5kZWZpbmVkKG4pJiYobj0hMCkpLG4pe3ZhciBpPXRoaXMuZ2V0QXR0cmlidXRlKCJjdXN0b21TYXZpbmdTdGF0ZSIse30pO3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCx5KGkuc3RhcnR8fCIiLFsicmVxdWVzdCJdKSx0aGlzLl9fc2V0U2F2aW5nU3RhdGUpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCx5KGkuc3RvcHx8IiIsWyJlcnJvciIsInN5bmMiXSksdGhpcy5fX2NsZWFyU2F2aW5nU3RhdGUpfX0sX19jcmVhdGVUb29sYmFyOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuZ2V0QXR0cmlidXRlKCJkYW5nZXIiKSxyPW49PT0hMD8iYnV0dG9uLWVycm9yIjoiYnV0dG9uLXByaW1hcnkiLG89bmV3IHAodC5leHRlbmQoe3NhdmU6dGhpcy5zYXZlfHxpLmxvY2FsaXplKCJvZm9ybS5zYXZlIiwiY291cmFnZSIpLHNhdmVJZDp0aGlzLnNhdmVJZCxzYXZlQ2xhc3NOYW1lOnIsY2FuY2VsOnRoaXMuY2FuY2VsfHxpLmxvY2FsaXplKCJvZm9ybS5jYW5jZWwiLCJjb3VyYWdlIiksbm9DYW5jZWxCdXR0b246dGhpcy5ub0NhbmNlbEJ1dHRvbnx8ITEsaGFzUHJldlN0ZXA6dGhpcy5zdGVwJiZ0aGlzLnN0ZXA+MX0sZXx8dGhpcy5vcHRpb25zKSk7cmV0dXJuIHQuZWFjaCh0aGlzLl9fYnV0dG9ucyxmdW5jdGlvbih0KXtvLmFkZEJ1dHRvbi5hcHBseShvLHQpfSksb30sY2xhc3NOYW1lOiIiLGF0dHJpYnV0ZXM6e30sZXZlbnRzOnt9LGlucHV0czpbXSx0ZW1wbGF0ZTpudWxsLHJlYWQ6ITEscmVhZE9ubHk6ITEsbm9CdXR0b25CYXI6ITEsbm9DYW5jZWxCdXR0b246ITEsc2F2ZTpudWxsLGNhbmNlbDpudWxsLGRhbmdlcjohMSxsYXlvdXQ6IiIsc3RlcDp2b2lkIDAsdG90YWxTdGVwczp2b2lkIDAsdGl0bGU6bnVsbCxzdWJ0aXRsZTpudWxsLGF1dG9TYXZlOiExLHNjcm9sbE9uRXJyb3I6ITAsc2hvd0Vycm9yczohMCxyZXNpemVTZWxlY3RvcjoiLm8tZm9ybS1jb250ZW50IixnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsZSx0aGlzKTtyZXR1cm4gdC5pc1VuZGVmaW5lZChpKSYmKGk9dC5yZXN1bHQodGhpcyxlKSksdC5pc1VuZGVmaW5lZChpKT9uOml9LGhhc1JlYWRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmdldEF0dHJpYnV0ZSgicmVhZCIpfSxpc1JlYWRPbmx5OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmdldEF0dHJpYnV0ZSgicmVhZE9ubHkiKX0saGFzQnV0dG9uQmFyOmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLmdldEF0dHJpYnV0ZSgibm9CdXR0b25CYXIiKXx8dGhpcy5pc1JlYWRPbmx5KCkpfSxyZW5kZXI6ZnVuY3Rpb24oKXtpZih0aGlzLl9fcmVhZE1vZGVCYXImJnRoaXMuX19yZWFkTW9kZUJhci5yZW1vdmUoKSx0aGlzLmhhc1JlYWRNb2RlKCkmJiF0aGlzLmlzUmVhZE9ubHkoKSl7dmFyIHQ9aC5leHRlbmQoe2Zvcm1UaXRsZTp0aGlzLmdldEF0dHJpYnV0ZSgidGl0bGUiLCIiKX0pO3RoaXMuX19yZWFkTW9kZUJhcj10aGlzLmFkZCh0LCIuby1mb3JtLXRpdGxlLWJhciIpLmxhc3QoKX12YXIgZT1uLnRwbChtKSh7bGF5b3V0OnRoaXMuZ2V0QXR0cmlidXRlKCJsYXlvdXQiLCIiKSx0aXRsZTp0aGlzLmdldEF0dHJpYnV0ZSgidGl0bGUiLCIiLCEwKSxzdWJ0aXRsZTp0aGlzLmdldEF0dHJpYnV0ZSgic3VidGl0bGUiLCIiLCEwKSxoYXNSZWFkTW9kZTp0aGlzLmhhc1JlYWRNb2RlKCl9KTtyZXR1cm4gdGhpcy4kZWwuaHRtbChlKSxkZWxldGUgdGhpcy50ZW1wbGF0ZSxyLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX19hcHBseU1vZGUoKSx0aGlzfSxfX3NldFNhdmluZ1N0YXRlOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnNldC1zYXZpbmctc3RhdGUiKSx0aGlzLiRlbC5hZGRDbGFzcygiby1mb3JtLXNhdmluZyIpfSxfX2NsZWFyU2F2aW5nU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06Y2xlYXItc2F2aW5nLXN0YXRlIiksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm8tZm9ybS1zYXZpbmciKX0sX190bw==", "base64"));
  res.write(new Buffer("Z2dsZVRvb2xiYXI6ZnVuY3Rpb24oKXt0aGlzLl9fdG9vbGJhciYmdGhpcy5fX3Rvb2xiYXIucmVtb3ZlKCksdGhpcy5oYXNCdXR0b25CYXIoKSYmdGhpcy5fZWRpdE1vZGUoKSYmKHRoaXMuX190b29sYmFyPXRoaXMuX19jcmVhdGVUb29sYmFyKCksdGhpcy5hZGQodGhpcy5fX3Rvb2xiYXIsIiIpKSx0aGlzLnRyaWdnZXIoInJlc2l6ZSIpfSxfX2NhbmNlbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubW9kZWwuZ2V0KCJfX2VkaXRfXyIpO3RoaXMubW9kZWwuY2xlYXIoe3NpbGVudDohMH0pO3ZhciBuO249dGhpcy5tb2RlbC5zYW5pdGl6ZUF0dHJpYnV0ZXM/dGhpcy5tb2RlbC5zYW5pdGl6ZUF0dHJpYnV0ZXModGhpcy5fX29yaWdpbmFsTW9kZWwpOnQuY2xvbmUodGhpcy5fX29yaWdpbmFsTW9kZWwpLHRoaXMubW9kZWwuc2V0KG4se3NpbGVudDohMH0pLHRoaXMudHJpZ2dlcigiY2FuY2VsIix0aGlzLm1vZGVsKSx0aGlzLm1vZGVsLnRyaWdnZXIoImNhY2hlOmNsZWFyIiksZSYmKHRoaXMubW9kZWwuc2V0KCJfX2VkaXRfXyIsITEse3NpbGVudDohMH0pLHRoaXMubW9kZWwudHJpZ2dlcigiY2hhbmdlOl9fZWRpdF9fIix0aGlzLm1vZGVsLCExKSksdGhpcy5jbGVhckVycm9ycygpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5yZWR1Y2UoZSxmdW5jdGlvbihlLG4pe3JldHVybiB0LmV4dGVuZChlLGkubW9kZWwudmFsaWRhdGVGaWVsZChuKSl9LHt9KX12YXIgbixpPXRoaXM7cmV0dXJuIHQuaXNVbmRlZmluZWQodGhpcy52YWxpZGF0ZSk/dGhpcy5tb2RlbC5pc1ZhbGlkKCk6KHQuaXNGdW5jdGlvbih0aGlzLnZhbGlkYXRlKT9uPXRoaXMudmFsaWRhdGUoKTp0LmlzQXJyYXkodGhpcy52YWxpZGF0ZSk/bj1lKHRoaXMudmFsaWRhdGUpOiJsb2NhbCI9PT10aGlzLnZhbGlkYXRlJiYobj1lKHRoaXMuZ2V0SW5wdXRzKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm9wdGlvbnMubmFtZX0pKSksISF0LmlzRW1wdHkobil8fCh0aGlzLm1vZGVsLnRyaWdnZXIoImludmFsaWQiLHRoaXMubW9kZWwsbiksITEpKX0sX19zYXZlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhckVycm9ycygpLHRoaXMuaXNWYWxpZCgpJiZ0aGlzLnRyaWdnZXIoInNhdmUiLHRoaXMubW9kZWwpfSxfX3ByZXZpb3VzOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJwcmV2aW91cyIsdGhpcy5tb2RlbCl9LF9fYXBwbHlNb2RlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhckVycm9ycygpLHRoaXMuX190b2dnbGVUb29sYmFyKCksdGhpcy5fZWRpdE1vZGUoKT8odGhpcy4kZWwuYWRkQ2xhc3MoIm8tZm9ybS1lZGl0LW1vZGUiKSx0aGlzLiRlbC5yZW1vdmVDbGFzcygiby1mb3JtLXJlYWQtbW9kZSIpLHRoaXMuJCgiLm8tZm9ybS1jb250ZW50IikucmVtb3ZlQ2xhc3MoInJvdW5kZWQtYnRtLTQiKSx0aGlzLmZvY3VzKCkpOih0aGlzLiRlbC5yZW1vdmVDbGFzcygiby1mb3JtLWVkaXQtbW9kZSIpLHRoaXMuJGVsLmFkZENsYXNzKCJvLWZvcm0tcmVhZC1tb2RlIiksdGhpcy4kKCIuby1mb3JtLWNvbnRlbnQiKS5hZGRDbGFzcygicm91bmRlZC1idG0tNCIpKX0sX2VkaXRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJfX2VkaXRfXyIpfHwhdGhpcy5oYXNSZWFkTW9kZSgpfSxwYXJzZUVycm9yTWVzc2FnZTp0LmlkZW50aXR5LF9fc2hvd0Vycm9yczpmdW5jdGlvbihuLHIsbyl7aWYodGhpcy50cmlnZ2VyKCJlcnJvciIsbiksdGhpcy5nZXRBdHRyaWJ1dGUoInNob3dFcnJvcnMiKSl7dmFyIHMsYT11LmdldFJlc3BvbnNlSlNPTihyKSxsPXUucGFyc2VGaWVsZEVycm9ycyhyKTtpZih0LnNpemUobCk/dC5lYWNoKGwsZnVuY3Rpb24oZSxuKXt0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06ZmllbGQtZXJyb3IiLHRoaXMuX19lcnJvckZpZWxkc1tuXXx8bix0Lm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybi9ebW9kZWxcLnZhbGlkYXRpb24vLnRlc3QodCk/aS5sb2NhbGl6ZSh0LCJjb3VyYWdlIik6dH0pKX0sdGhpcyk6YSYmQXJyYXkuaXNBcnJheShhLmVycm9yQ2F1c2VzKSYmYS5lcnJvckNhdXNlcy5sZW5ndGg+MD9zPWEuZXJyb3JDYXVzZXNbMF0uZXJyb3JTdW1tYXJ5OihhPXRoaXMucGFyc2VFcnJvck1lc3NhZ2UoYSkscz1hJiZhLmVycm9yU3VtbWFyeSksbyYmKHRoaXMuJCgiLm8tZm9ybS1lcnJvci1jb250YWluZXIiKS5hZGRDbGFzcygiby1mb3JtLWhhcy1lcnJvcnMiKSx0aGlzLmFkZChjLCIuby1mb3JtLWVycm9yLWNvbnRhaW5lciIse29wdGlvbnM6e2Vycm9yU3VtbWFyeTpzfX0pKSx0aGlzLmdldEF0dHJpYnV0ZSgic2Nyb2xsT25FcnJvciIpKXt2YXIgZD1lKCIjIit0aGlzLmlkKyIgLm8tZm9ybS1lcnJvci1jb250YWluZXIiKTtkLmxlbmd0aCYmZSgiaHRtbCwgYm9keSIpLmFuaW1hdGUoe3Njcm9sbFRvcDpkLm9mZnNldCgpLnRvcH0sNDAwKX10aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06cmVzaXplIil9fSxjbGVhckVycm9yczpmdW5jdGlvbigpe3RoaXMuJCgiLm8tZm9ybS1lcnJvci1jb250YWluZXIiKS5yZW1vdmVDbGFzcygiby1mb3JtLWhhcy1lcnJvcnMiKSx0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06Y2xlYXItZXJyb3JzIiksdGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpfSx0b2dnbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5zZXQoIl9fZWRpdF9fIiwhdGhpcy5oYXNSZWFkTW9kZSgpfHwhdGhpcy5tb2RlbC5nZXQoIl9fZWRpdF9fIikpLHRoaXN9LF9fYWRkTGF5b3V0SXRlbTpmdW5jdGlvbih0KXtvLnN1cHBvcnRzKHQpP3RoaXMuYWRkSW5wdXQodCk6dGhpcy5fX2FkZE5vbklucHV0TGF5b3V0SXRlbSh0KX0sX19hZGROb25JbnB1dExheW91dEl0ZW06ZnVuY3Rpb24oZSl7dmFyIG49dC5vbWl0KGUsInR5cGUiKTtzd2l0Y2goZS50eXBlKXtjYXNlInNlY3Rpb25UaXRsZSI6dGhpcy5hZGRTZWN0aW9uVGl0bGUoZS50aXRsZSx0Lm9taXQobiwidGl0bGUiKSk7YnJlYWs7Y2FzZSJkaXZpZGVyIjp0aGlzLmFkZERpdmlkZXIobik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoInVua25vd24gaW5wdXQ6ICIrZS50eXBlKX19LGFkZEJ1dHRvbjpmdW5jdGlvbih0LGUpe3RoaXMuX190b29sYmFyJiZ0aGlzLl9fdG9vbGJhci5hZGRCdXR0b24odCxlKSx0aGlzLl9fYnV0dG9ucy5wdXNoKFt0LGVdKX0sYWRkRGl2aWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQoJzxkaXYgY2xhc3M9Im9rdGEtZm9ybS1kaXZpZGVyIGZvcm0tZGl2aWRlciI+PC9kaXY+JyksZC5hcHBseVNob3dXaGVuKHRoaXMubGFzdCgpLHQmJnQuc2hvd1doZW4pLHRoaXN9LGFkZFNlY3Rpb25UaXRsZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFkZChuLnRwbCgnPGgyIGNsYXNzPSJvLWZvcm0taGVhZCI+e3t0aXRsZX19PC9oMj4nKSh7dGl0bGU6dH0pKSxkLmFwcGx5U2hvd1doZW4odGhpcy5sYXN0KCksZSYmZS5zaG93V2hlbiksdGhpc30sYWRkSW5wdXQ6ZnVuY3Rpb24oZSl7ZT10LmNsb25lKGUpLGQudmFsaWRhdGVJbnB1dChlLHRoaXMubW9kZWwpO3ZhciBuPWQuZ2VuZXJhdGVJbnB1dE9wdGlvbnMoZSx0aGlzLHRoaXMuX19jcmVhdGVJbnB1dCkucmV2ZXJzZSgpO3QuaXNFbXB0eSh0aGlzLmdldElucHV0cygpLnRvQXJyYXkoKSkmJnQuZXh0ZW5kKG5bMF0se3ZhbGlkYXRlT25seUlmRGlydHk6ITB9KTt2YXIgaT10Lm1hcChuLHRoaXMuX19jcmVhdGVJbnB1dCx0aGlzKTt0LmVhY2gobixmdW5jdGlvbih0KXt0LmVycm9yRmllbGQmJih0aGlzLl9fZXJyb3JGaWVsZHNbdC5lcnJvckZpZWxkXT10Lm5hbWUpfSx0aGlzKTt2YXIgcj17aW5wdXRJZDp0Lmxhc3QoaSkub3B0aW9ucy5pbnB1dElkLGlucHV0OmksbXVsdGk6bi5sZW5ndGg+MT9uLmxlbmd0aDp2b2lkIDB9O3QuZXh0ZW5kKHIsdC5vbWl0KHRoaXMub3B0aW9ucywiaW5wdXQiKSx0Lm9taXQoZSwiaW5wdXQiKSk7dmFyIG89dGhpcy5fX2NyZWF0ZVdyYXBwZXIocik7ci5sYWJlbCE9PSExJiZvLmFkZCh0aGlzLl9fY3JlYXRlTGFiZWwocikpLG8uYWRkKHRoaXMuX2NyZWF0ZUNvbnRhaW5lcihyKSksby50eXBlPXIudHlwZXx8ci5pbnB1dC50eXBlfHwiY3VzdG9tIjt2YXIgcz1bb10uY29uY2F0KHQuZHJvcChhcmd1bWVudHMsMSkpO3JldHVybiB0aGlzLmFkZC5hcHBseSh0aGlzLHMpfSxfX2NyZWF0ZUlucHV0OmZ1bmN0aW9uKGUpe3JldHVybiBlPXQucGljayhlLGQuSU5QVVRfT1BUSU9OUyksby5jcmVhdGUoZSl9LF9fY3JlYXRlV3JhcHBlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT10LnBpY2soZSxkLldSQVBQRVJfT1BUSU9OUyksbmV3IGwoZSl9LF9fY3JlYXRlTGFiZWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5waWNrKGUsZC5MQUJFTF9PUFRJT05TKSxuZXcgcyhlKX0sX2NyZWF0ZUNvbnRhaW5lcjpmdW5jdGlvbihlKXtyZXR1cm4gZT10LnBpY2soZSxkLkNPTlRBSU5FUl9PUFRJT05TKSxuZXcgYShlKX0sX19zYXZlTW9kZWxTdGF0ZTpmdW5jdGlvbih0KXt0aGlzLl9fb3JpZ2luYWxNb2RlbD10LmNsb25lKCkuYXR0cmlidXRlc30sYWRkOmZ1bmN0aW9uKCl7dmFyIGU9dC50b0FycmF5KGFyZ3VtZW50cyk7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlWzFdJiYoZVsxXT0iPiBkaXYuby1mb3JtLWNvbnRlbnQgPiAuby1mb3JtLWZpZWxkc2V0LWNvbnRhaW5lciIpLHIucHJvdG90eXBlLmFkZC5hcHBseSh0aGlzLGUpfSxmb2N1czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0SW5wdXRzKCkuZmlyc3QoKTtyZXR1cm4gdCYmdC5mb2N1cyYmdC5mb2N1cygpLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZva2UoImRpc2FibGUiKSx0aGlzfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmludm9rZSgiZW5hYmxlIil9LGNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy4kKCIuby1mb3JtLWNvbnRlbnQiKTtyZXR1cm4gdC5pc051bWJlcihlKT92b2lkIG4uY3NzKCJtYXgtaGVpZ2h0IixlKTpuLmhlaWdodCgpfSxnZXRJbnB1dHM6ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGx9KSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcxKSxuKDQ2NCksbig0NzApLG4oNTE0KV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXIuaXNBQmFzZVZpZXc7cmV0dXJuIGkuZXh0ZW5kKHthdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJueyJkYXRhLXNlIjoiby1mb3JtLWlucHV0LWNvbnRhaW5lciJ9fSxjbGFzc05hbWU6ZnVuY3Rpb24gcygpe3ZhciBzPSJvLWZvcm0taW5wdXQiO2lmKHRoaXMub3B0aW9ucy53aWRlJiYocys9IiBvLWZvcm0td2lkZSIpLHQuY29udGFpbnMoWzEsMiwzLDRdLHRoaXMub3B0aW9ucy5tdWx0aSkmJihzKz0iIG8tZm9ybS1tdWx0aS1pbnB1dC0iK3RoaXMub3B0aW9ucy5tdWx0aSx0LmlzQXJyYXkodGhpcy5vcHRpb25zLmlucHV0KSkpe3ZhciBlPXQuZmluZCh0aGlzLm9wdGlvbnMuaW5wdXQsZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29udGFpbnMoWyJ0ZXh0K3NlbGVjdCIsInNlbGVjdCt0ZXh0Il0sZS5vcHRpb25zLnR5cGUpfSk7ZSYmKHMrPSIgby1mb3JtLW11bHRpLWlucHV0LWdyb3VwLSIrdGhpcy5vcHRpb25zLm11bHRpKX1yZXR1cm4gc30sX2dldE5hbWVzOmZ1bmN0aW9uKCl7dmFyIGU9dC5pc0FycmF5KHRoaXMub3B0aW9ucy5uYW1lKT90aGlzLm9wdGlvbnMubmFtZTpbdGhpcy5vcHRpb25zLm5hbWVdO3JldHVybiJncm91cCI9PXRoaXMub3B0aW9ucy50eXBlP2UucHVzaC5hcHBseShlLHQucGx1Y2sodGhpcy5vcHRpb25zLmlucHV0WzBdLm9wdGlvbnMucGFyYW1zLmlucHV0cywibmFtZSIpKTp0LmlzQXJyYXkodGhpcy5vcHRpb25zLm5hbWUpP3RoaXMub3B0aW9ucy5pbnB1dCYmdGhpcy5vcHRpb25zLmlucHV0Lm9wdGlvbnMmJnRoaXMub3B0aW9ucy5pbnB1dC5vcHRpb25zLm5hbWUmJmUucHVzaCh0aGlzLm9wdGlvbnMuaW5wdXQub3B0aW9ucy5uYW1lKTp0aGlzLm9wdGlvbnMuaW5wdXQmJih0LmlzQXJyYXkodGhpcy5vcHRpb25zLmlucHV0KT90LmVhY2godGhpcy5vcHRpb25zLmlucHV0LGZ1bmN0aW9uKHQpe2UucHVzaCh0Lm9wdGlvbnMubmFtZSl9KTplLnB1c2godGhpcy5vcHRpb25zLmlucHV0Lm9wdGlvbnMubmFtZSkpLHQudW5pcSh0LmNvbXBhY3QoZSkpfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2kuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMub3B0aW9ucy5pbnB1dCYmKHQuaXNBcnJheSh0aGlzLm9wdGlvbnMuaW5wdXQpP3QuZWFjaCh0aGlzLm9wdGlvbnMuaW5wdXQsZnVuY3Rpb24odCl7dGhpcy5hZGQodCx7cHJlcGVuZDohMH0pfSx0aGlzKTp0aGlzLmFkZCh0aGlzLm9wdGlvbnMuaW5wdXQse3ByZXBlbmQ6ITB9KSksdGhpcy5fX3NldEV4cGxhaW4odGhpcy5vcHRpb25zKTt2YXIgZT10aGlzLl9nZXROYW1lcygpO3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZm9ybTpmaWVsZC1lcnJvciIsZnVuY3Rpb24obixpKXt0LmNvbnRhaW5zKGUsbikmJnRoaXMuX19zZXRFcnJvcihpKX0pLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZm9ybTpjbGVhci1lcnJvcnMgY2hhbmdlOiIrZS5qb2luKCIgY2hhbmdlOiIpLHRoaXMuX19jbGVhckVycm9yKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06Y2xlYXItZXJyb3I6IitlLmpvaW4oIiBmb3JtOmNsZWFyLWVycm9yOiIpLHRoaXMuX19jbGVhckVycm9yKSx0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsImF1dG9SZW5kZXIiLHRoaXMpJiZ0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZToiK3RoaXMub3B0aW9ucy5uYW1lLHRoaXMucmVuZGVyKSx0aGlzLl9fZXJyb3JTdGF0ZT0hMX0sX19zZXRFeHBsYWluOmZ1bmN0aW9uKGUpe3ZhciBpO3JldHVybiBlLmN1c3RvbUV4cGxhaW4/KG4ud2FybigiRGVwcmVjYXRlZCAtIHVzZSBleHBsYWluIGluc3RlYWQgb2YgY3VzdG9tRXhwbGFpbiIpLHZvaWQgdGhpcy5hZGQodGhpcy5vcHRpb25zLmN1c3RvbUV4cGxhaW4pKTooaT1lLmV4cGxhaW4sdC5pc0Z1bmN0aW9uKGkpJiYhbyhpKSYmKGk9dC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLCJleHBsYWluIix0aGlzKSksdm9pZChpJiYobyhpKT8odGhpcy50ZW1wbGF0ZT0nPHAgY2xhc3M9Im8tZm9ybS1leHBsYWluIj48L3A+Jyx0aGlzLmFkZChpLCIuby1mb3JtLWV4cGxhaW4iKSk6dGhpcy50ZW1wbGF0ZT0nPHAgY2xhc3M9Im8tZm9ybS1leHBsYWluIj57e2V4cGxhaW59fTwvcD4nKSkpfSxfX3NldEVycm9yOmZ1bmN0aW9uKHQpe3RoaXMuX19lcnJvclN0YXRlPSEwLHRoaXMuJGVsLmFkZENsYXNzKCJvLWZvcm0taGFzLWVycm9ycyIpO3ZhciBuPVsnPHAgY2xhc3M9Im9rdGEtZm9ybS1pbnB1dC1lcnJvciBvLWZvcm0taW5wdXQtZXJyb3Igby1mb3JtLWV4cGxhaW4iIHJvbGU9ImFsZXJ0Ij4nLCc8c3BhbiBjbGFzcz0iaWNvbiBpY29uLTE2IGVycm9yLTE2LXNtYWxsIj48L3NwYW4+Jywie3t0ZXh0fX0iLCI8L3A+Il0uam9pbigiIiksaT1lLnRwbChuKSh7dGV4dDp0LmpvaW4oIiwgIil9KSxyPXRoaXMuJCgiLm8tZm9ybS1leHBsYWluIikubm90KCIuby1mb3JtLWlucHV0LWVycm9yIikuZmlyc3QoKTtyLmxlbmd0aD9yLmJlZm9yZShpKTp0aGlzLiRlbC5hcHBlbmQoaSl9LF9fY2xlYXJFcnJvcjpmdW5jdGlvbigpe3RoaXMuX19lcnJvclN0YXRlJiYodGhpcy4kKCIuby1mb3JtLWlucHV0LWVycm9yIikucmVtb3ZlKCksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm8tZm9ybS1oYXMtZXJyb3JzIiksdGhpcy5fX2Vycm9yU3RhdGU9ITEsdC5kZWZlcih0LmJpbmQoZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06cmVzaXplIil9LHRoaXMpKSl9LGZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXtpZih0LmZvY3VzKXJldHVybiB0LmZvY3VzKCl9KSx0aGlzfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDUyNyksbig1MjYpLG4oNTI5KSxuKDUzMCksbig1MzIpLG4oNTM0KSxuKDUzNSksbig1MzYpLG4oNTM3KSxuKDUzOCksbig1MzkpLG4oNTI1KSxuKDU0MCksbig1NDEpLG4oNTQyKSxuKDU0Myksbig1NDQpLG4oNTQ1KSxuKDU0Niksbig1NDcpLG4oNTUyKSxuKDU1Myksbig1NTUpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSxsLGMsdSxkLGgscCxmLG0sXyxnLHYseSxiLHcsTSxTKXtmdW5jdGlvbiBUKG4saSl7cmV0dXJuIG4ucHJvdG90eXBlIGluc3RhbmNlb2YgZT9uZXcgbih0Lm9taXQoaSwiaW5wdXQiKSk6bn1mdW5jdGlvbiBrKGUpe2lmKGU9dC5jbG9uZShlKSxlLmlucHV0KXJldHVybiBUKGUuaW5wdXQsZSk7dmFyIG47aWYoIURbZS50eXBlXSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gaW5wdXQ6ICIrZS50eXBlKTtyZXR1cm4gbj0ic2VsZWN0Ij09PWUudHlwZSYmKHgoZS5vcHRpb25zKXx8dC5zaXplKGUub3B0aW9ucyk+QSk/UzoiY2hlY2tib3hzZXQiPT09ZS50eXBlJiZ0LnNpemUoZS5vcHRpb25zKT5FP006RFtlLnR5cGVdLFQobixlKX1mdW5jdGlvbiBMKHQpe3JldHVybiEhdC5pbnB1dHx8dC50eXBlIGluIER9ZnVuY3Rpb24geChlKXtyZXR1cm4gdC5zaXplKGUpPjAmJnQuaXNPYmplY3QodC52YWx1ZXMoZSlbMF0pfXZhciBBPTFlMyxFPTE1MCxEPXsiZmlsZS9pbWFnZSI6YiwiZmlsZS9jZXJ0Ijp3LHNlbGVjdDpyLHRleHRhcmVhOmkscmFkaW86byxjaGVja2JveDpzLHRleHQ6bixwYXNzd29yZDpuLG51bWJlcjp1LHRleHRzZWxlY3Q6YSwidGV4dCtzZWxlY3QiOmwsInNlbGVjdCt0ZXh0IjpsLGRhdGU6Yyxncm91cHBpY2tlcjpkLHVzZXJwaWNrZXI6aCxhcHBwaWNrZXI6cCxhcHBpbnN0YW5jZXBpY2tlcjpmLCJzdS1vcmdzcGlja2VyIjptLHpvbmVwaWNrZXI6XyxsaXN0OmcsZ3JvdXA6dixtdWx0aXNlbGVjdDpNLGNoZWNrYm94c2V0Onl9O3JldHVybntjcmVhdGU6ayxzdXBwb3J0czpMfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0NzEpLG4oNTI3KSxuKDQ5Nyksbig1MjgpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0ib2t0YS1mb3JtLWlucHV0LWZpZWxkIGlucHV0LWZpeCI7cmV0dXJuIGUuZXh0ZW5kKHt0ZW1wbGF0ZTp0LnRwbCgnPGlucHV0IHR5cGU9Int7dHlwZX19IiBwbGFjZWhvbGRlcj0ie3twbGFjZWhvbGRlcn19Ilx0ICAgICAgbmFtZT0ie3tuYW1lfX0iIGlkPSJ7e2lucHV0SWR9fSIgdmFsdWU9Int7dmFsdWV9fSIvPicpLGV2ZW50czp7ImlucHV0IGlucHV0IjoidXBkYXRlIiwiY2hhbmdlIGlucHV0IjoidXBkYXRlIiwia2V5ZG93biBpbnB1dCI6InVwZGF0ZSIsImtleXVwIGlucHV0IjpmdW5jdGlvbih0KXtuLmlzRW50ZXIodCk/dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnNhdmUiKTpuLmlzRXNjKHQpJiZ0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06Y2FuY2VsIil9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuJGVsLmFkZENsYXNzKCJvLWZvcm0tY29udHJvbCIpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3RoaXMuJGVsLmFkZENsYXNzKGkpLGUucHJvdG90eXBlLmVkaXRNb2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLiQoImlucHV0IikucGxhY2Vob2xkZXIoKX0scmVhZE1vZGU6ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5yZWFkTW9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksInBhc3N3b3JkIj09dGhpcy5vcHRpb25zLnR5cGUmJnRoaXMuJGVsLnRleHQoIioqKioqKioqIiksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoaSl9LHZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQoJ2lucHV0W3R5cGU9IicrdGhpcy5vcHRpb25zLnR5cGUrJyJdJykudmFsKCl9LGZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgiaW5wdXQiKS5mb2N1cygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe3RhZ05hbWU6InNwYW4iLGF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm57ImRhdGEtc2UiOiJvLWZvcm0taW5wdXQtIit0aGlzLmdldE5hbWVTdHJpbmcoKX19LGRlZmF1bHRQbGFjZWhvbGRlcjoiIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihuKXtuPXQuZGVmYXVsdHMobnx8e30se2lucHV0SWQ6bi5pZHx8dC51bmlxdWVJZCgiaW5wdXQiKSxwbGFjZWhvbGRlcjp0aGlzLmRlZmF1bHRQbGFjZWhvbGRlcixpbmxpbmVWYWxpZGF0aW9uOiEwLHZhbGlkYXRlT25seUlmRGlydHk6ITF9KSxkZWxldGUgbi5pZDt2YXIgaT10aGlzO3QuZWFjaCh7ZW5hYmxlOiJyZW1vdmVDbGFzcyIsZGlzYWJsZToiYWRkQ2xhc3MifSxmdW5jdGlvbihlLG4pe2lbbl09dC53cmFwKGlbbl0sZnVuY3Rpb24odCl7dC5hcHBseShpLGFyZ3VtZW50cyksaS4kZWxbZV0oIm8tZm9ybS1kaXNhYmxlZCIpfSl9KSxlLmNhbGwodGhpcyxuKSx0LnJlc3VsdChuLCJyZWFkT25seSIpIT09ITAmJnQucmVzdWx0KG4sInJlYWQiKT09PSEwJiZ0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZTpfX2VkaXRfXyIsdGhpcy5yZW5kZXIpLHQuaXNGdW5jdGlvbih0aGlzLmZvY3VzKSYmKHRoaXMuZm9jdXM9dC5kZWJvdW5jZSh0LmJpbmQodGhpcy5mb2N1cyx0aGlzKSw1MCkpLHQucmVzdWx0KG4sInZhbGlkYXRlT25seUlmRGlydHkiKXx8dGhpcy5hZGRJbmxpbmVWYWxpZGF0aW9uKCksdGhpcy5hZGRNb2RlbExpc3RlbmVycygpLHRoaXMuJGVsLmFkZENsYXNzKCJvLWZvcm0taW5wdXQtbmFtZS0iK3RoaXMuZ2V0TmFtZVN0cmluZygpKX0sYWRkQXJpYUxhYmVsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmFyaWFMYWJlbDt0JiZ0aGlzLiQoIjppbnB1dCIpLmF0dHIoImFyaWEtbGFiZWwiLHQpfSxhZGRJbmxpbmVWYWxpZGF0aW9uOmZ1bmN0aW9uKCl7dC5yZXN1bHQodGhpcy5vcHRpb25zLCJpbmxpbmVWYWxpZGF0aW9uIikmJnRoaXMuJGVsLm9uKCJmb2N1c291dCIsIjppbnB1dCIsdC5iaW5kKHRoaXMudmFsaWRhdGUsdGhpcykpfSx0b01vZGVsVmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbCgpO3JldHVybiB0LmlzRnVuY3Rpb24odGhpcy50bykmJihlPXRoaXMudG8uY2FsbCh0aGlzLGUpKSx0LmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnRvKSYmKGU9dGhpcy5vcHRpb25zLnRvLmNhbGwodGhpcyxlKSksZX0sX2lzRWRpdGVkOiExLHVwZGF0ZTpmdW5jdGlvbigpeyF0aGlzLl9pc0VkaXRlZCYmdC5yZXN1bHQodGhpcy5vcHRpb25zLCJ2YWxpZGF0ZU9ubHlJZkRpcnR5IikmJih0aGlzLl9pc0VkaXRlZD0hMCx0aGlzLmFkZElubGluZVZhbGlkYXRpb24oKSksdGhpcy5tb2RlbC5zZXQodGhpcy5vcHRpb25zLm5hbWUsdGhpcy50b01vZGVsVmFsdWUoKSl9LGlzRWRpdE1vZGU6ZnVuY3Rpb24oKXt2YXIgZT0hdC5yZXN1bHQodGhpcy5vcHRpb25zLCJyZWFkT25seSIpJiYodC5yZXN1bHQodGhpcy5vcHRpb25zLCJyZWFkIikhPT0hMHx8dGhpcy5tb2RlbC5nZXQoIl9fZWRpdF9fIik9PT0hMCk7cmV0dXJuIGV9LHJlbmRlcjpmdW5jdGlvbigpe3RoaXMucHJlUmVuZGVyKCk7dmFyIGU9dGhpcy5vcHRpb25zLnBhcmFtcztyZXR1cm4gdGhpcy5vcHRpb25zLnBhcmFtcz10LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInBhcmFtcyIsdGhpcyksdGhpcy5pc0VkaXRNb2RlKCk/KHRoaXMuZWRpdE1vZGUoKSx0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsImRpc2FibGVkIix0aGlzKT90aGlzLmRpc2FibGUoKTp0aGlzLmVuYWJsZSgpKTp0aGlzLnJlYWRNb2RlKCksdGhpcy5vcHRpb25zLnBhcmFtcz1lLHRoaXMuYWRkQXJpYUxhYmVsKCksdGhpcy5wb3N0UmVuZGVyKCksdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5tb2RlbC5nZXQoIl9fcGVuZGluZ19fIikmJnRoaXMuaXNFZGl0TW9kZSgpJiZ0LmlzRnVuY3Rpb24odGhpcy5tb2RlbC52YWxpZGF0ZUZpZWxkKSl7dmFyIGU9dGhpcy5tb2RlbC52YWxpZGF0ZUZpZWxkKHRoaXMub3B0aW9ucy5uYW1lKTtlJiZ0LmRlbGF5KGZ1bmN0aW9uKCl7dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOmNsZWFyLWVycm9yOiIrdGhpcy5vcHRpb25zLm5hbWUpLHRoaXMubW9kZWwudHJpZ2dlcigiaW52YWxpZCIsdGhpcy5tb2RlbCxlLCExKX0uYmluZCh0aGlzKSwxMDApfX0sYWRkTW9kZWxMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06ZmllbGQtZXJyb3IiLGZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5uYW1lPT09dCYmdGhpcy5fX21hcmtFcnJvcigpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJmb3JtOmNsZWFyLWVycm9ycyBjaGFuZ2U6Iit0aGlzLm9wdGlvbnMubmFtZSx0aGlzLl9fY2xlYXJFcnJvciksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJmb3JtOmNsZWFyLWVycm9yOiIrdGhpcy5vcHRpb25zLm5hbWUsdGhpcy5fX2NsZWFyRXJyb3IpfSx2YWw6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoInZhbCgpIGlzIGFuIGFic3RyYWN0IG1ldGhvZCIpfSxmb2N1czpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiZm9jdXMoKSBpcyBhbiBhYnN0cmFjdCBtZXRob2QiKX0sZGVmYXVsdFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIiJ9LGVkaXRNb2RlOmZ1bmN0aW9uKCl7dmFyIGU9dC5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt2YWx1ZTp0aGlzLmdldE1vZGVsVmFsdWUoKX0pO3JldHVybiB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUoZSkpLHRoaXMub3B0aW9ucy5tdWx0aSYmdGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm1hcmdpbi1yIiksdGhpc30scmVhZE1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwudGV4dCh0aGlzLmdldFJlYWRNb2RlU3RyaW5nKCkpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJlcnJvci1maWVsZCIpLHRoaXMub3B0aW9ucy5tdWx0aSYmdGhpcy4kZWwuYWRkQ2xhc3MoIm1hcmdpbi1yIiksdGhpc30sZ2V0UmVhZE1vZGVTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT10LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInJlYWRNb2RlU3RyaW5nIix0aGlzKTtyZXR1cm4gZT9lOnRoaXMudG9TdHJpbmdWYWx1ZSgpfSxnZXRNb2RlbFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tb2RlbC5nZXQodGhpcy5vcHRpb25zLm5hbWUpO3JldHVybiB0LmlzRnVuY3Rpb24odGhpcy5mcm9tKSYmKGU9dGhpcy5mcm9tLmNhbGwodGhpcyxlKSksdC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5mcm9tKSYmKGU9dGhpcy5vcHRpb25zLmZyb20uY2FsbCh0aGlzLGUpKSxlfSx0b1N0cmluZ1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRNb2RlbFZhbHVlKCk7cmV0dXJuIHRoaXMub3B0aW9ucy5vcHRpb25zJiYodD10aGlzLm9wdGlvbnMub3B0aW9uc1t0XSksdHx8dGhpcy5kZWZhdWx0VmFsdWUoKX0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy4kKCI6aW5wdXQiKS5wcm9wKCJkaXNhYmxlZCIsITApfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLiQoIjppbnB1dCIpLnByb3AoImRpc2FibGVkIiwhMSl9LGNoYW5nZVR5cGU6ZnVuY3Rpb24odCl7dGhpcy4kKCI6aW5wdXQiKS5wcm9wKCJ0eXBlIix0KSx0aGlzLm9wdGlvbnMudHlwZT10fSxnZXROYW1lU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHQuaXNBcnJheSh0aGlzLm9wdGlvbnMubmFtZSk/dGhpcy5vcHRpb25zLm5hbWUuam9pbigiLSIpOnRoaXMub3B0aW9ucy5uYW1lfSxnZXRQYXJhbXM6ZnVuY3Rpb24oZSl7dmFyIG49ZXx8dGhpcy5vcHRpb25zfHx7fTtyZXR1cm4gdC5jbG9uZSh0LnJlc3VsdEN0eChuLCJwYXJhbXMiLHRoaXMpfHx7fSl9LGdldFBhcmFtOmZ1bmN0aW9uKGUsbil7dmFyIGk9dC5yZXN1bHRDdHgodGhpcy5nZXRQYXJhbXMoKSxlLHRoaXMpO3JldHVybiB0LmlzVW5kZWZpbmVkKGkpP246aX0sZ2V0UGFyYW1PckF0dHJpYnV0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRQYXJhbShlKXx8dC5yZXN1bHQodGhpcyxlKX0sX19tYXJrRXJyb3I6ZnVuY3Rpb24oKXt0aGlzLiRlbC5hZGRDbGFzcygiby1mb3JtLWhhcy1lcnJvcnMiKX0sX19jbGVhckVycm9yOmZ1bmN0aW9uKCl7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoIm8tZm9ybS1oYXMtZXJyb3JzIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbigpe3ZhciB0PW4oMzMyKTshZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU9e30saT0vXmpRdWVyeVxkKyQvO3JldHVybiBuLmVhY2godC5hdHRyaWJ1dGVzLGZ1bmN0aW9uKHQsbil7bi5zcGVjaWZpZWQmJiFpLnRlc3Qobi5uYW1lKSYmKGVbbi5uYW1lXT1uLnZhbHVlKX0pLGV9ZnVuY3Rpb24gcih0LGUpe3ZhciBpPXRoaXMscj1uKGkpO2lmKGkudmFsdWU9PXIuYXR0cigicGxhY2Vob2xkZXIiKSYmci5oYXNDbGFzcygicGxhY2Vob2xkZXIiKSlpZihyLmRhdGEoInBsYWNlaG9sZGVyLXBhc3N3b3JkIikpe2lmKHI9ci5oaWRlKCkubmV4dCgpLnNob3coKS5hdHRyKCJpZCIsci5yZW1vdmVBdHRyKCJpZCIpLmRhdGEoInBsYWNlaG9sZGVyLWlkIikpLHQ9PT0hMClyZXR1cm4gclswXS52YWx1ZT1lO3IuZm9jdXMoKX1lbHNlIGkudmFsdWU9IiIsci5yZW1vdmVDbGFzcygicGxhY2Vob2xkZXIiKSxpPT1zKCkmJmkuc2VsZWN0KCl9ZnVuY3Rpb24gbygpe3ZhciB0LGU9dGhpcyxvPW4oZSkscz10aGlzLmlkO2lmKCIiPT1lLnZhbHVlKXtpZigicGFzc3dvcmQiPT1lLnR5cGUpe2lmKCFvLmRhdGEoInBsYWNlaG9sZGVyLXRleHRpbnB1dCIpKXt0cnl7dD1vLmNsb25lKCkuYXR0cih7dHlwZToidGV4dCJ9KX1jYXRjaChhKXt0PW4oIjxpbnB1dD4iKS5hdHRyKG4uZXh0ZW5kKGkodGhpcykse3R5cGU6InRleHQifSkpfXQucmVtb3ZlQXR0cigibmFtZSIpLmRhdGEoeyJwbGFjZWhvbGRlci1wYXNzd29yZCI6bywicGxhY2Vob2xkZXItaWQiOnN9KS5iaW5kKCJmb2N1cy5wbGFjZWhvbGRlciIsciksby5kYXRhKHsicGxhY2Vob2xkZXItdGV4dGlucHV0Ijp0LCJwbGFjZWhvbGRlci1pZCI6c30pLmJlZm9yZSh0KX1vPW8ucmVtb3ZlQXR0cigiaWQiKS5oaWRlKCkucHJldigpLmF0dHIoImlkIixzKS5zaG93KCl9by5hZGRDbGFzcygicGxhY2Vob2xkZXIiKSxvWzBdLnZhbHVlPW8uYXR0cigicGxhY2Vob2xkZXIiKX1lbHNlIG8ucmVtb3ZlQ2xhc3MoInBsYWNlaG9sZGVyIil9ZnVuY3Rpb24gcygpe3RyeXtyZXR1cm4gZS5hY3RpdmVFbGVtZW50fWNhdGNoKHQpe319dmFyIGEsbCxjPSJwbGFjZWhvbGRlciJpbiBlLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksdT0icGxhY2Vob2xkZXIiaW4gZS5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpLGQ9bi5mbixoPW4udmFsSG9va3MscD1uLnByb3BIb29rcztjJiZ1PyhsPWQucGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sbC5pbnB1dD1sLnRleHRhcmVhPSEwKToobD1kLnBsYWNlaG9sZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdC5maWx0ZXIoKGM/InRleHRhcmVhIjoiOmlucHV0IikrIltwbGFjZWhvbGRlcl0iKS5ub3QoIi5wbGFjZWhvbGRlciIpLmJpbmQoeyJmb2N1cy5wbGFjZWhvbGRlciI6ciwiYmx1ci5wbGFjZWhvbGRlciI6b30pLmRhdGEoInBsYWNlaG9sZGVyLWVuYWJsZWQiLCEwKS50cmlnZ2VyKCJibHVyLnBsYWNlaG9sZGVyIiksdH0sbC5pbnB1dD1jLGwudGV4dGFyZWE9dSxhPXtnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9bih0KSxpPWUuZGF0YSgicGxhY2Vob2xkZXItcGFzc3dvcmQiKTtyZXR1cm4gaT9pWzBdLnZhbHVlOmUuZGF0YSgicGxhY2Vob2xkZXItZW5hYmxlZCIpJiZlLmhhc0NsYXNzKCJwbGFjZWhvbGRlciIpPyIiOnQudmFsdWV9LHNldDpmdW5jdGlvbih0LGUpe3ZhciBpPW4odCksYT1pLmRhdGEoInBsYWNlaG9sZGVyLXBhc3N3b3JkIik7cmV0dXJuIGE/YVswXS52YWx1ZT1lOmkuZGF0YSgicGxhY2Vob2xkZXItZW5hYmxlZCIpPygiIj09ZT8odC52YWx1ZT1lLHQhPXMoKSYmby5jYWxsKHQpKTppLmhhc0NsYXNzKCJwbGFjZWhvbGRlciIpP3IuY2FsbCh0LCEwLGUpfHwodC52YWx1ZT1lKTp0LnZhbHVlPWUsaSk6dC52YWx1ZT1lfX0sY3x8KGguaW5wdXQ9YSxwLnZhbHVlPWEpLHV8fChoLnRleHRhcmVhPWEscC52YWx1ZT1hKSxuKGZ1bmN0aW9uKCl7bihlKS5kZWxlZ2F0ZSgiZm9ybSIsInN1Ym1pdC5wbGFjZWhvbGRlciIsZnVuY3Rpb24oKXt2YXIgdD1uKCIucGxhY2Vob2xkZXIiLHRoaXMpLmVhY2gocik7c2V0VGltZW91dChmdW5jdGlvbigpe3QuZWFjaChvKX0sMTApfSl9KSxuKHQpLmJpbmQoImJlZm9yZXVubG9hZC5wbGFjZWhvbGRlciIsZnVuY3Rpb24oKXtuKCIucGxhY2Vob2xkZXIiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy52YWx1ZT0iIn0pfSkpfSh0aGlzLGRvY3VtZW50LHQpfSkuY2FsbCh3aW5kb3cpfSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oMzI4KSxuKDQ5Nyksbig0NzEpLG4oNTI3KSxuKDUzMSldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXtmdW5jdGlvbiBvKHQpe3JldHVybiB0aGlzLnBhcmFtcy5hdXRvV2lkdGg/dC5jYWxsKHRoaXMpOmUuZGVmZXIoZS5iaW5kKHQsdGhpcykpfWZ1bmN0aW9uIHMoZSl7ZS4kc2VsZWN0LmhpZGUoKTt2YXIgbj10KGUuJHNlbGVjdFswXSkuaGlkZSgpO3QoImJvZHkiKS5hcHBlbmQobik7dmFyIGk9ZS5wYXJhbXMud2lkdGg9MS4yKm4ud2lkdGgoKSsicHgiO3JldHVybiBlLiRlbC5hcHBlbmQobi5zaG93KCkpLGl9ZnVuY3Rpb24gYShlLG4saSl7dmFyIHI9aS5vZmZzZXQoKTtlLmNzcyh7bGVmdDpyLmxlZnQsdG9wOnIudG9wfSk7dmFyIG89dCh3aW5kb3cpLHM9bi5vdXRlckhlaWdodCgpLGE9cytuLm9mZnNldCgpLnRvcC1vLnNjcm9sbFRvcCgpLGw9by5oZWlnaHQoKS1kLGM9TWF0aC5taW4ocytsLWEsaCk7bi5jc3MoIm1heC1oZWlnaHQiLGMpfWZ1bmN0aW9uIGwobil7dmFyIGk9bi5uZXh0KCIuY2h6bi1jb250YWluZXIiKSxyPWkuY2xvbmUoKSxvPWkuZmluZCgiLmNoem4tcmVzdWx0cyIpO3IuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIiksci5yZW1vdmVBdHRyKCJpZCIpLHIuZmluZCgibGkiKS5yZW1vdmVBdHRyKCJpZCIpO3ZhciBzPXtsZWZ0OmkuY3NzKCJsZWZ0IiksdG9wOmkuY3NzKCJ0b3AiKSxwb3NpdGlvbjppLmNzcygicG9zaXRpb24iKSwiZmxvYXQiOmkuY3NzKCJmbG9hdCIpLCJ6LWluZGV4IjppLmNzcygiei1pbmRleCIpfTtvLmhpZGUoKTt2YXIgbD1lLmRlYm91bmNlKGZ1bmN0aW9uKCl7YShpLG8scil9LDEwKTtuLm9uKCJsaXN6dDpzaG93aW5nX2Ryb3Bkb3duIixmdW5jdGlvbigpe2kud2lkdGgoaS53aWR0aCgpKSxuLmFmdGVyKHIpLGkuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLCJmbG9hdCI6Im5vbmUiLCJ6LWluZGV4IjpwLHRvcDotOTk5OTk5fSksdCgiYm9keSIpLmFwcGVuZChpKSxvLnNob3coKSxhKGksbyxyKSxuLnBhcmVudHMoKS5zY3JvbGwobCksdCh3aW5kb3cpLm9uKCJyZXNpemUgc2Nyb2xsIixsKX0pLG4ub24oImxpc3p0OmhpZGluZ19kcm9wZG93biByZW1vdmUiLGZ1bmN0aW9uKCl7bi5wYXJlbnRzKCkub2ZmKCJzY3JvbGwiLGwpLHQod2luZG93KS5vZmYoInJlc2l6ZSBzY3JvbGwiLGwpLGkuY3NzKHMpLG8uaGlkZSgpLG8uY3NzKCJtYXgtaGVpZ2h0IixoKSxyLnJlbW92ZSgpLG4uYWZ0ZXIoaSl9KX12YXIgYz1pLnRwbCgnPHNlbGVjdCBpZD0ie3tpbnB1dElkfX0iIG5hbWU9Int7bmFtZX19Ij48L3NlbGVjdD4nKSx1PWkudHBsKCc8b3B0aW9uIHZhbHVlPSJ7e2tleX19Ij57e3ZhbHVlfX08L29wdGlvbj4nKSxkPTIwLGg9MjQwLHA9NWU0O3JldHVybiByLmV4dGVuZCh7Y2xhc3NOYW1lOiJvLWZvcm0tc2VsZWN0IixldmVudHM6eyJjaGFuZ2Ugc2VsZWN0IjoidXBkYXRlIiwia2V5dXAgLmNoem4tc2VhcmNoID4gOnRleHQiOmZ1bmN0aW9uKHQpe24uaXNFc2ModCkmJih0aGlzLiQoIi5jaHpuLXNlYXJjaCA+IDp0ZXh0IikudmFsKCIiKSx0LnN0b3BQcm9wYWdhdGlvbigpKX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5wYXJhbXM9dGhpcy5vcHRpb25zLnBhcmFtc3x8e319LGVkaXRNb2RlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuaHRtbChjKHRoaXMub3B0aW9ucykpLHRoaXMuJHNlbGVjdD10aGlzLiQoInNlbGVjdCIpO3ZhciB0PXRoaXMuZ2V0T3B0aW9ucygpO2UuZWFjaCh0LGZ1bmN0aW9uKHQsZSl7dGhpcy4kc2VsZWN0LmFwcGVuZCh1KHtrZXk6ZSx2YWx1ZTp0fSkpfSx0aGlzKTt2YXIgbj10aGlzLmdldE1vZGVsVmFsdWUoKTtyZXR1cm4gbj90aGlzLiRzZWxlY3QudmFsKG4pOnRoaXMuJCgib3B0aW9uOmZpcnN0LWNoaWxkIikucHJvcCgic2VsZWN0ZWQiLCEwKSx0aGlzLiRlbC5hZGRDbGFzcygiby1mb3JtLWNvbnRyb2wiKSx0aGlzLnBhcmFtcy5jaG9zZW4hPT0hMSYmdGhpcy5fX2FwcGx5Q2hvc2VuKCksdGhpc30sX19hcHBseUNob3NlbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy53aWRlPyIxMDAlIjp0aGlzLnBhcmFtcy53aWR0aHx8IjYyJSI7dGhpcy5wYXJhbXMuYXV0b1dpZHRoJiYodD1zKHRoaXMpKSxvLmNhbGwodGhpcyxmdW5jdGlvbigpe3ZhciBuPXRoaXMuZ2V0UGFyYW0oInNlYXJjaFRocmVzaG9sZCIsMTApO2UucmVzdWx0KHRoaXMub3B0aW9ucywiYXV0b1JlbmRlciIpfHw=", "base64"));
  res.write(new Buffer("dGhpcy51cGRhdGUoKSx0aGlzLiRzZWxlY3QuY2hvc2VuKHt3aWR0aDp0LGRpc2FibGVfc2VhcmNoX3RocmVzaG9sZDpuLHBsYWNlaG9sZGVyX3RleHQ6dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyfSksbCh0aGlzLiRzZWxlY3QpLHRoaXMucGFyYW1zLmF1dG9XaWR0aCYmdGhpcy4kZWwud2lkdGgoMCksdGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpfSl9LHZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRzZWxlY3QmJnRoaXMuJHNlbGVjdC52YWwoKX0sZm9jdXM6ZnVuY3Rpb24oKXtpZih0aGlzLiRzZWxlY3QpcmV0dXJuIHRoaXMuJHNlbGVjdC5mb2N1cygpfSx0b1N0cmluZ1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRNb2RlbFZhbHVlKCksbj10LGk9dGhpcy5nZXRPcHRpb25zKCk7cmV0dXJuIGUuaXNFbXB0eShpKXx8KG49aVt0XSksZS5pc1VuZGVmaW5lZChuKSYmKG49dGhpcy5kZWZhdWx0VmFsdWUoKSksbnx8IiJ9LGdldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMub3B0aW9ucztyZXR1cm4gZS5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwodGhpcykpLGUuaXNPYmplY3QodCk/dDp7fX0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNlbGVjdCYmdGhpcy4kc2VsZWN0LnRyaWdnZXIoInJlbW92ZSIpLHIucHJvdG90eXBlLnJlbW92ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzIpXSxyPWZ1bmN0aW9uKHQpeyhmdW5jdGlvbigpe3ZhciB0O3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5vcHRpb25zX2luZGV4PTAsdGhpcy5wYXJzZWQ9W119cmV0dXJuIHQucHJvdG90eXBlLmFkZF9ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiJPUFRHUk9VUCI9PT10Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk/dGhpcy5hZGRfZ3JvdXAodCk6dGhpcy5hZGRfb3B0aW9uKHQpfSx0LnByb3RvdHlwZS5hZGRfZ3JvdXA9ZnVuY3Rpb24odCl7dmFyIGUsbixpLHIsbyxzO2ZvcihlPXRoaXMucGFyc2VkLmxlbmd0aCx0aGlzLnBhcnNlZC5wdXNoKHthcnJheV9pbmRleDplLGdyb3VwOiEwLGxhYmVsOnQubGFiZWwsY2hpbGRyZW46MCxkaXNhYmxlZDp0LmRpc2FibGVkfSksbz10LmNoaWxkTm9kZXMscz1bXSxpPTAscj1vLmxlbmd0aDtpPHI7aSsrKW49b1tpXSxzLnB1c2godGhpcy5hZGRfb3B0aW9uKG4sZSx0LmRpc2FibGVkKSk7cmV0dXJuIHN9LHQucHJvdG90eXBlLmFkZF9vcHRpb249ZnVuY3Rpb24odCxlLG4pe2lmKCJPUFRJT04iPT09dC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKXJldHVybiIiIT09dC50ZXh0PyhudWxsIT1lJiYodGhpcy5wYXJzZWRbZV0uY2hpbGRyZW4rPTEpLHRoaXMucGFyc2VkLnB1c2goe2FycmF5X2luZGV4OnRoaXMucGFyc2VkLmxlbmd0aCxvcHQ=", "base64"));
  res.write(new Buffer("aW9uc19pbmRleDp0aGlzLm9wdGlvbnNfaW5kZXgsdmFsdWU6dC52YWx1ZSx0ZXh0OnQudGV4dCxodG1sOnQuaW5uZXJIVE1MLHNlbGVjdGVkOnQuc2VsZWN0ZWQsZGlzYWJsZWQ6bj09PSEwP246dC5kaXNhYmxlZCxncm91cF9hcnJheV9pbmRleDplLGNsYXNzZXM6dC5jbGFzc05hbWUsc3R5bGU6dC5zdHlsZS5jc3NUZXh0fSkpOnRoaXMucGFyc2VkLnB1c2goe2FycmF5X2luZGV4OnRoaXMucGFyc2VkLmxlbmd0aCxvcHRpb25zX2luZGV4OnRoaXMub3B0aW9uc19pbmRleCxlbXB0eTohMH0pLHRoaXMub3B0aW9uc19pbmRleCs9MX0sdH0oKSx0LnNlbGVjdF90b19hcnJheT1mdW5jdGlvbihlKXt2YXIgbixpLHIsbyxzO2ZvcihpPW5ldyB0LHM9ZS5jaGlsZE5vZGVzLHI9MCxvPXMubGVuZ3RoO3I8bztyKyspbj1zW3JdLGkuYWRkX25vZGUobik7cmV0dXJuIGkucGFyc2VkfSx0aGlzLlNlbGVjdFBhcnNlcj10fSkuY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciB0LGU7ZT10aGlzLHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7dGhpcy5mb3JtX2ZpZWxkPWUsdGhpcy5vcHRpb25zPW51bGwhPW4/bjp7fSx0LmJyb3dzZXJfaXNfc3VwcG9ydGVkKCkmJih0aGlzLmlzX211bHRpcGxlPXRoaXMuZm9ybV9maWVsZC5tdWx0aXBsZSx0aGlzLnNldF9kZWZhdWx0X3RleHQoKSx0aGlzLnNldF9kZWZhdWx0X3ZhbHVlcygpLHRoaXMuc2V0dXAoKSx0aGlzLnNldF91cF9odG1sKCksdGhpcy5yZWdpc3Rlcl9vYnNlcnZlcnMoKSx0aGlzLmZpbmlzaF9zZXR1cCgpKX1yZXR1cm4gdC5wcm90b3R5cGUuc2V0X2RlZmF1bHRfdmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5jbGlja190ZXN0X2FjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0X2FjdGl2ZV9jbGljayhlKX0sdGhpcy5hY3RpdmF0ZV9hY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHQuYWN0aXZhdGVfZmllbGQoZSl9LHRoaXMuYWN0aXZlX2ZpZWxkPSExLHRoaXMubW91c2Vfb25fY29udGFpbmVyPSExLHRoaXMucmVzdWx0c19zaG93aW5nPSExLHRoaXMucmVzdWx0X2hpZ2hsaWdodGVkPW51bGwsdGhpcy5yZXN1bHRfc2luZ2xlX3NlbGVjdGVkPW51bGwsdGhpcy5hbGxvd19zaW5nbGVfZGVzZWxlY3Q9bnVsbCE9dGhpcy5vcHRpb25zLmFsbG93X3NpbmdsZV9kZXNlbGVjdCYmbnVsbCE9dGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbMF0mJiIiPT09dGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbMF0udGV4dCYmdGhpcy5vcHRpb25zLmFsbG93X3NpbmdsZV9kZXNlbGVjdCx0aGlzLmRpc2FibGVfc2VhcmNoX3RocmVzaG9sZD10aGlzLm9wdGlvbnMuZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkfHwwLHRoaXMuZGlzYWJsZV9zZWFyY2g9dGhpcy5vcHRpb25zLmRpc2FibGVfc2VhcmNofHwhMSx0aGlzLmVuYWJsZV9zcGxpdF93b3JkX3NlYXJjaD1udWxsPT10aGlzLm9wdGlvbnMuZW5hYmxlX3NwbGl0X3dvcmRfc2VhcmNofHx0aGlzLm9wdGlvbnMuZW5hYmxlX3NwbGl0X3dvcmRfc2VhcmNoLHRoaXMuc2VhcmNoX2NvbnRhaW5zPXRoaXMub3B0aW9ucy5zZWFyY2hfY29udGFpbnN8fCExLHRoaXMuc2luZ2xlX2JhY2tzdHJva2VfZGVsZXRlPXRoaXMub3B0aW9ucy5zaW5nbGVfYmFja3N0cm9rZV9kZWxldGV8fCExLHRoaXMubWF4X3NlbGVjdGVkX29wdGlvbnM9dGhpcy5vcHRpb25zLm1heF9zZWxlY3RlZF9vcHRpb25zfHwxLzAsdGhpcy5pbmhlcml0X3NlbGVjdF9jbGFzc2VzPXRoaXMub3B0aW9ucy5pbmhlcml0X3NlbGVjdF9jbGFzc2VzfHwhMX0sdC5wcm90b3R5cGUuc2V0X2RlZmF1bHRfdGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1fZmllbGQuZ2V0QXR0cmlidXRlKCJkYXRhLXBsYWNlaG9sZGVyIik/dGhpcy5kZWZhdWx0X3RleHQ9dGhpcy5mb3JtX2ZpZWxkLmdldEF0dHJpYnV0ZSgiZGF0YS1wbGFjZWhvbGRlciIpOnRoaXMuaXNfbXVsdGlwbGU/dGhpcy5kZWZhdWx0X3RleHQ9dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyX3RleHRfbXVsdGlwbGV8fHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcl90ZXh0fHx0LmRlZmF1bHRfbXVsdGlwbGVfdGV4dDp0aGlzLmRlZmF1bHRfdGV4dD10aGlzLm9wdGlvbnMucGxhY2Vob2xkZXJfdGV4dF9zaW5nbGV8fHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcl90ZXh0fHx0LmRlZmF1bHRfc2luZ2xlX3RleHQsdGhpcy5yZXN1bHRzX25vbmVfZm91bmQ9dGhpcy5mb3JtX2ZpZWxkLmdldEF0dHJpYnV0ZSgiZGF0YS1ub19yZXN1bHRzX3RleHQiKXx8dGhpcy5vcHRpb25zLm5vX3Jlc3VsdHNfdGV4dHx8dC5kZWZhdWx0X25vX3Jlc3VsdF90ZXh0fSx0LnByb3RvdHlwZS5tb3VzZV9lbnRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlX29uX2NvbnRhaW5lcj0hMH0sdC5wcm90b3R5cGUubW91c2VfbGVhdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZV9vbl9jb250YWluZXI9ITF9LHQucHJvdG90eXBlLmlucHV0X2ZvY3VzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5pc19tdWx0aXBsZSl7aWYoIXRoaXMuYWN0aXZlX2ZpZWxkKXJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGUuY29udGFpbmVyX21vdXNlZG93bigpfSw1MCl9ZWxzZSBpZighdGhpcy5hY3RpdmVfZmllbGQpcmV0dXJuIHRoaXMuYWN0aXZhdGVfZmllbGQoKX0sdC5wcm90b3R5cGUuaW5wdXRfYmx1cj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCF0aGlzLm1vdXNlX29uX2NvbnRhaW5lcilyZXR1cm4gdGhpcy5hY3RpdmVfZmllbGQ9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLmJsdXJfdGVzdCgpfSwxMDApfSx0LnByb3RvdHlwZS5yZXN1bHRfYWRkX29wdGlvbj1mdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiB0LmRvbV9pZD10aGlzLmNvbnRhaW5lcl9pZCsiXw==", "base64"));
  res.write(new Buffer("b18iK3QuYXJyYXlfaW5kZXgsZT1bXSx0LmRpc2FibGVkfHx0LnNlbGVjdGVkJiZ0aGlzLmlzX211bHRpcGxlfHxlLnB1c2goImFjdGl2ZS1yZXN1bHQiKSwhdC5kaXNhYmxlZHx8dC5zZWxlY3RlZCYmdGhpcy5pc19tdWx0aXBsZXx8ZS5wdXNoKCJkaXNhYmxlZC1yZXN1bHQiKSx0LnNlbGVjdGVkJiZlLnB1c2goInJlc3VsdC1zZWxlY3RlZCIpLG51bGwhPXQuZ3JvdXBfYXJyYXlfaW5kZXgmJmUucHVzaCgiZ3JvdXAtb3B0aW9uIiksIiIhPT10LmNsYXNzZXMmJmUucHVzaCh0LmNsYXNzZXMpLG49IiIhPT10LnN0eWxlLmNzc1RleHQ/JyBzdHlsZT0iJyt0LnN0eWxlKyciJzoiIiwnPGxpIGlkPSInK3QuZG9tX2lkKyciIGNsYXNzPSInK2Uuam9pbigiICIpKyciJytuKyI+Iit0Lmh0bWwrIjwvbGk+In0sdC5wcm90b3R5cGUucmVzdWx0c191cGRhdGVfZmllbGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRfZGVmYXVsdF90ZXh0KCksdGhpcy5pc19tdWx0aXBsZXx8dGhpcy5yZXN1bHRzX3Jlc2V0X2NsZWFudXAoKSx0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKSx0aGlzLnJlc3VsdF9zaW5nbGVfc2VsZWN0ZWQ9bnVsbCx0aGlzLnJlc3VsdHNfYnVpbGQoKX0sdC5wcm90b3R5cGUucmVzdWx0c190b2dnbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHRzX3Nob3dpbmc/dGhpcy5yZXN1bHRzX2hpZGUoKTp0aGlzLnJlc3VsdHNfc2hvdygpfSx0LnByb3RvdHlwZS5yZXN1bHRzX3NlYXJjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXN1bHRzX3Nob3dpbmc/dGhpcy53aW5ub3dfcmVzdWx0cygpOnRoaXMucmVzdWx0c19zaG93KCl9LHQucHJvdG90eXBlLmNob2ljZXNfY291bnQ9ZnVuY3Rpb24oKXt2YXIgdCxlLG4saTtpZihudWxsIT10aGlzLnNlbGVjdGVkX29wdGlvbl9jb3VudClyZXR1cm4gdGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQ7Zm9yKHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50PTAsaT10aGlzLmZvcm1fZmllbGQub3B0aW9ucyxlPTAsbj1pLmxlbmd0aDtlPG47ZSsrKXQ9aVtlXSx0LnNlbGVjdGVkJiYodGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQrPTEpO3JldHVybiB0aGlzLnNlbGVjdGVkX29wdGlvbl9jb3VudH0sdC5wcm90b3R5cGUuY2hvaWNlc19jbGljaz1mdW5jdGlvbih0KXtpZih0LnByZXZlbnREZWZhdWx0KCksIXRoaXMucmVzdWx0c19zaG93aW5nJiYhdGhpcy5pc19kaXNhYmxlZClyZXR1cm4gdGhpcy5yZXN1bHRzX3Nob3coKX0sdC5wcm90b3R5cGUua2V5dXBfY2hlY2tlcj1mdW5jdGlvbih0KXt2YXIgZSxuO3N3aXRjaChlPW51bGwhPShuPXQud2hpY2gpP246dC5rZXlDb2RlLHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCksZSl7Y2FzZSA4OmlmKHRoaXMuaXNfbXVsdGlwbGUmJnRoaXMuYmFja3N0cm9rZV9sZW5ndGg8MSYmdGhpcy5jaG9pY2VzX2NvdW50KCk+MClyZXR1cm4gdGhpcy5rZXlkb3duX2JhY2tzdHJva2UoKTtpZighdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UpcmV0dXJuIHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpLHRoaXMucmVzdWx0c19zZWFyY2goKTticmVhaztjYXNlIDEzOmlmKHQucHJldmVudERlZmF1bHQoKSx0aGlzLnJlc3VsdHNfc2hvd2luZylyZXR1cm4gdGhpcy5yZXN1bHRfc2VsZWN0KHQpO2JyZWFrO2Nhc2UgMjc6cmV0dXJuIHRoaXMucmVzdWx0c19zaG93aW5nJiZ0aGlzLnJlc3VsdHNfaGlkZSgpLCEwO2Nhc2UgOTpjYXNlIDM4OmNhc2UgNDA6Y2FzZSAxNjpjYXNlIDkxOmNhc2UgMTc6YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdGhpcy5yZXN1bHRzX3NlYXJjaCgpfX0sdC5wcm90b3R5cGUuZ2VuZXJhdGVfZmllbGRfaWQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD10aGlzLmdlbmVyYXRlX3JhbmRvbV9pZCgpLHRoaXMuZm9ybV9maWVsZC5pZD10LHR9LHQucHJvdG90eXBlLmdlbmVyYXRlX3JhbmRvbV9jaGFyPWZ1bmN0aW9uKCl7dmFyIHQsZSxuO3JldHVybiB0PSIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoiLG49TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnQubGVuZ3RoKSxlPXQuc3Vic3RyaW5nKG4sbisxKX0sdC5wcm90b3R5cGUuY29udGFpbmVyX3dpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMub3B0aW9ucy53aWR0aD90aGlzLm9wdGlvbnMud2lkdGg6IiIrdGhpcy5mb3JtX2ZpZWxkLm9mZnNldFdpZHRoKyJweCJ9LHQuYnJvd3Nlcl9pc19zdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4iTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyIiE9PXdpbmRvdy5uYXZpZ2F0b3IuYXBwTmFtZXx8bnVsbCE9PSh0PWRvY3VtZW50LmRvY3VtZW50TW9kZSkmJnQ+PTh9LHQuZGVmYXVsdF9tdWx0aXBsZV90ZXh0PSJTZWxlY3QgU29tZSBPcHRpb25zIix0LmRlZmF1bHRfc2luZ2xlX3RleHQ9IlNlbGVjdCBhbiBPcHRpb24iLHQuZGVmYXVsdF9ub19yZXN1bHRfdGV4dD0iTm8gcmVzdWx0cyBtYXRjaCIsdH0oKSxlLkFic3RyYWN0Q2hvc2VuPXR9LmNhbGwodGhpcyksZnVuY3Rpb24oKXt2YXIgZSxuLGkscixvPXt9Lmhhc093blByb3BlcnR5LHM9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgaSBpbiBlKW8uY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gbi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IG4sdC5fX3N1cGVyX189ZS5wcm90b3R5cGUsdH07aT10aGlzO3ZhciBhPWkuQWJzdHJhY3RDaG9zZW47ZT10LGUuZm4uZXh0ZW5kKHtjaG9zZW46ZnVuY3Rpb24odCl7cmV0dXJuIGEuYnJvd3Nlcl9pc19zdXBwb3J0ZWQoKT90aGlzLmVhY2goZnVuY3Rpb24oaSl7dmFyIHI7aWYocj1lKHRoaXMpLCFyLmhhc0NsYXNzKCJjaHpuLWRvbmUiKSlyZXR1cm4gci5kYXRhKCJjaG9zZW4iLG5ldyBuKHRoaXMsdCkpfSk6dGhpc319KSxuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oKXtyZXR1cm4gcj1uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHMobix0KSxuLnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1fZmllbGRfanE9ZSh0aGlzLmZvcm1fZmllbGQpLHRoaXMuY3VycmVudF9zZWxlY3RlZEluZGV4PXRoaXMuZm9ybV9maWVsZC5zZWxlY3RlZEluZGV4LHRoaXMuaXNfcnRsPXRoaXMuZm9ybV9maWVsZF9qcS5oYXNDbGFzcygiY2h6bi1ydGwiKX0sbi5wcm90b3R5cGUuZmluaXNoX3NldHVwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybV9maWVsZF9qcS5hZGRDbGFzcygiY2h6bi1kb25lIil9LG4ucHJvdG90eXBlLnNldF91cF9odG1sPWZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gdGhpcy5jb250YWluZXJfaWQ9dGhpcy5mb3JtX2ZpZWxkLmlkLmxlbmd0aD90aGlzLmZvcm1fZmllbGQuaWQucmVwbGFjZSgvW15cd10vZywiXyIpOnRoaXMuZ2VuZXJhdGVfZmllbGRfaWQoKSx0aGlzLmNvbnRhaW5lcl9pZCs9Il9jaHpuIix0PVsiY2h6bi1jb250YWluZXIiXSx0LnB1c2goImNoem4tY29udGFpbmVyLSIrKHRoaXMuaXNfbXVsdGlwbGU/Im11bHRpIjoic2luZ2xlIikpLHRoaXMuaW5oZXJpdF9zZWxlY3RfY2xhc3NlcyYmdGhpcy5mb3JtX2ZpZWxkLmNsYXNzTmFtZSYmdC5wdXNoKHRoaXMuZm9ybV9maWVsZC5jbGFzc05hbWUpLHRoaXMuaXNfcnRsJiZ0LnB1c2goImNoem4tcnRsIiksbj17aWQ6dGhpcy5jb250YWluZXJfaWQsImNsYXNzIjp0LmpvaW4oIiAiKSxzdHlsZToid2lkdGg6ICIrdGhpcy5jb250YWluZXJfd2lkdGgoKSsiOyIsdGl0bGU6dGhpcy5mb3JtX2ZpZWxkLnRpdGxlfSx0aGlzLmNvbnRhaW5lcj1lKCI8ZGl2IC8+IixuKSx0aGlzLmlzX211bHRpcGxlP3RoaXMuY29udGFpbmVyLmh0bWwoJzx1bCBjbGFzcz0iY2h6bi1jaG9pY2VzIj48bGkgY2xhc3M9InNlYXJjaC1maWVsZCI+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSInK3RoaXMuZGVmYXVsdF90ZXh0KyciIGNsYXNzPSJkZWZhdWx0IiBhdXRvY29tcGxldGU9Im9mZiIgc3R5bGU9IndpZHRoOjI1cHg7IiAvPjwvbGk+PC91bD48ZGl2IGNsYXNzPSJjaHpuLWRyb3AiPjx1bCBjbGFzcz0iY2h6bi1yZXN1bHRzIj48L3VsPjwvZGl2PicpOnRoaXMuY29udGFpbmVyLmh0bWwoJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9ImNoem4tc2luZ2xlIGNoem4tZGVmYXVsdCIgdGFiaW5kZXg9Ii0xIj48c3Bhbj4nK3RoaXMuZGVmYXVsdF90ZXh0Kyc8L3NwYW4+PGRpdj48Yj48L2I+PC9kaXY+PC9hPjxkaXYgY2xhc3M9ImNoem4tZHJvcCI+PGRpdiBjbGFzcz0iY2h6bi1zZWFyY2giPjxpbnB1dCB0eXBlPSJ0ZXh0IiBhdXRvY29tcGxldGU9Im9mZiIgLz48L2Rpdj48dWwgY2xhc3M9ImNoem4tcmVzdWx0cyI+PC91bD48L2Rpdj4nKSx0aGlzLmZvcm1fZmllbGRfanEuaGlkZSgpLmFmdGVyKHRoaXMuY29udGFpbmVyKSx0aGlzLmRyb3Bkb3duPXRoaXMuY29udGFpbmVyLmZpbmQoImRpdi5jaHpuLWRyb3AiKS5maXJzdCgpLHRoaXMuc2VhcmNoX2ZpZWxkPXRoaXMuY29udGFpbmVyLmZpbmQoImlucHV0IikuZmlyc3QoKSx0aGlzLnNlYXJjaF9yZXN1bHRzPXRoaXMuY29udGFpbmVyLmZpbmQoInVsLmNoem4tcmVzdWx0cyIpLmZpcnN0KCksdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKSx0aGlzLnNlYXJjaF9ub19yZXN1bHRzPXRoaXMuY29udGFpbmVyLmZpbmQoImxpLm5vLXJlc3VsdHMiKS5maXJzdCgpLHRoaXMuaXNfbXVsdGlwbGU/KHRoaXMuc2VhcmNoX2Nob2ljZXM9dGhpcy5jb250YWluZXIuZmluZCgidWwuY2h6bi1jaG9pY2VzIikuZmlyc3QoKSx0aGlzLnNlYXJjaF9jb250YWluZXI9dGhpcy5jb250YWluZXIuZmluZCgibGkuc2VhcmNoLWZpZWxkIikuZmlyc3QoKSk6KHRoaXMuc2VhcmNoX2NvbnRhaW5lcj10aGlzLmNvbnRhaW5lci5maW5kKCJkaXYuY2h6bi1zZWFyY2giKS5maXJzdCgpLHRoaXMuc2VsZWN0ZWRfaXRlbT10aGlzLmNvbnRhaW5lci5maW5kKCIuY2h6bi1zaW5nbGUiKS5maXJzdCgpKSx0aGlzLnJlc3VsdHNfYnVpbGQoKSx0aGlzLnNldF90YWJfaW5kZXgoKSx0aGlzLnNldF9sYWJlbF9iZWhhdmlvcigpLHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKCJsaXN6dDpyZWFkeSIse2Nob3Nlbjp0aGlzfSl9LG4ucHJvdG90eXBlLnJlZ2lzdGVyX29ic2VydmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuY29udGFpbmVyLm1vdXNlZG93bihmdW5jdGlvbihlKXt0LmNvbnRhaW5lcl9tb3VzZWRvd24oZSl9KSx0aGlzLmNvbnRhaW5lci5tb3VzZXVwKGZ1bmN0aW9uKGUpe3QuY29udGFpbmVyX21vdXNldXAoZSl9KSx0aGlzLmNvbnRhaW5lci5tb3VzZWVudGVyKGZ1bmN0aW9uKGUpe3QubW91c2VfZW50ZXIoZSl9KSx0aGlzLmNvbnRhaW5lci5tb3VzZWxlYXZlKGZ1bmN0aW9uKGUpe3QubW91c2VfbGVhdmUoZSl9KSx0aGlzLnNlYXJjaF9yZXN1bHRzLm1vdXNldXAoZnVuY3Rpb24oZSl7dC5zZWFyY2hfcmVzdWx0c19tb3VzZXVwKGUpfSksdGhpcy5zZWFyY2hfcmVzdWx0cy5tb3VzZW92ZXIoZnVuY3Rpb24oZSl7dC5zZWFyY2hfcmVzdWx0c19tb3VzZW92ZXIoZSl9KSx0aGlzLnNlYXJjaF9yZXN1bHRzLm1vdXNlb3V0KGZ1bmN0aW9uKGUpe3Quc2VhcmNoX3Jlc3VsdHNfbW91c2VvdXQoZSl9KSx0aGlzLnNlYXJjaF9yZXN1bHRzLmJpbmQoIm1vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwiLGZ1bmN0aW9uKGUpe3Quc2VhcmNoX3Jlc3VsdHNfbW91c2V3aGVlbChlKX0pLHRoaXMuZm9ybV9maWVsZF9qcS5iaW5kKCJsaXN6dDp1cGRhdGVkIixmdW5jdGlvbihlKXt0LnJlc3VsdHNfdXBkYXRlX2ZpZWxkKGUpfSksdGhpcy5mb3JtX2ZpZWxkX2pxLmJpbmQoImxpc3p0OmFjdGl2YXRlIixmdW5jdGlvbihlKXt0LmFjdGl2YXRlX2ZpZWxkKGUpfSksdGhpcy5mb3JtX2ZpZWxkX2pxLmJpbmQoImxpc3p0Om9wZW4iLGZ1bmN0aW9uKGUpewoJdC5jb250YWluZXJfbW91c2Vkb3duKGUpfSksdGhpcy5zZWFyY2hfZmllbGQuYmx1cihmdW5jdGlvbihlKXt0LmlucHV0X2JsdXIoZSl9KSx0aGlzLnNlYXJjaF9maWVsZC5rZXl1cChmdW5jdGlvbihlKXt0LmtleXVwX2NoZWNrZXIoZSl9KSx0aGlzLnNlYXJjaF9maWVsZC5rZXlkb3duKGZ1bmN0aW9uKGUpe3Qua2V5ZG93bl9jaGVja2VyKGUpfSksdGhpcy5zZWFyY2hfZmllbGQuZm9jdXMoZnVuY3Rpb24oZSl7dC5pbnB1dF9mb2N1cyhlKX0pLHRoaXMuaXNfbXVsdGlwbGU/dGhpcy5zZWFyY2hfY2hvaWNlcy5jbGljayhmdW5jdGlvbihlKXt0LmNob2ljZXNfY2xpY2soZSl9KTp0aGlzLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCl9KX0sbi5wcm90b3R5cGUuc2VhcmNoX2ZpZWxkX2Rpc2FibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNfZGlzYWJsZWQ9dGhpcy5mb3JtX2ZpZWxkX2pxWzBdLmRpc2FibGVkLHRoaXMuaXNfZGlzYWJsZWQ/KHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJjaHpuLWRpc2FibGVkIiksdGhpcy5zZWFyY2hfZmllbGRbMF0uZGlzYWJsZWQ9ITAsdGhpcy5pc19tdWx0aXBsZXx8dGhpcy5zZWxlY3RlZF9pdGVtLnVuYmluZCgiZm9jdXMiLHRoaXMuYWN0aXZhdGVfYWN0aW9uKSx0aGlzLmNsb3NlX2ZpZWxkKCkpOih0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygiY2h6bi1kaXNhYmxlZCIpLHRoaXMuc2VhcmNoX2ZpZWxkWzBdLmRpc2FibGVkPSExLHRoaXMuaXNfbXVsdGlwbGU/dm9pZCAwOnRoaXMuc2VsZWN0ZWRfaXRlbS5iaW5kKCJmb2N1cyIsdGhpcy5hY3RpdmF0ZV9hY3Rpb24pKX0sbi5wcm90b3R5cGUuY29udGFpbmVyX21vdXNlZG93bj1mdW5jdGlvbih0KXtpZighdGhpcy5pc19kaXNhYmxlZCYmKHQmJiJtb3VzZWRvd24iPT09dC50eXBlJiYhdGhpcy5yZXN1bHRzX3Nob3dpbmcmJnQucHJldmVudERlZmF1bHQoKSxudWxsPT10fHwhZSh0LnRhcmdldCkuaGFzQ2xhc3MoInNlYXJjaC1jaG9pY2UtY2xvc2UiKSkpcmV0dXJuIHRoaXMuYWN0aXZlX2ZpZWxkP3RoaXMuaXNfbXVsdGlwbGV8fCF0fHxlKHQudGFyZ2V0KVswXSE9PXRoaXMuc2VsZWN0ZWRfaXRlbVswXSYmIWUodC50YXJnZXQpLnBhcmVudHMoImEuY2h6bi1zaW5nbGUiKS5sZW5ndGh8fCh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5yZXN1bHRzX3RvZ2dsZSgpKToodGhpcy5pc19tdWx0aXBsZSYmdGhpcy5zZWFyY2hfZmllbGQudmFsKCIiKSxlKGRvY3VtZW50KS5jbGljayh0aGlzLmNsaWNrX3Rlc3RfYWN0aW9uKSx0aGlzLnJlc3VsdHNfc2hvdygpKSx0aGlzLmFjdGl2YXRlX2ZpZWxkKCl9LG4ucHJvdG90eXBlLmNvbnRhaW5lcl9tb3VzZXVwPWZ1bmN0aW9uKHQpe2lmKCJBQkJSIj09PXQudGFyZ2V0Lm5vZGVOYW1lJiYhdGhpcy5pc19kaXNhYmxlZClyZXR1cm4gdGhpcy5yZXN1bHRzX3Jlc2V0KHQpfSxuLnByb3RvdHlwZS5zZWFyY2hfcmVzdWx0c19tb3VzZXdoZWVsPWZ1bmN0aW9uKHQpe3ZhciBlLG4saTtpZihlPS0obnVsbCE9KG49dC5vcmlnaW5hbEV2ZW50KT9uLndoZWVsRGVsdGE6dm9pZCAwKXx8KG51bGwhPShpPXQub3JpZ2luaWFsRXZlbnQpP2kuZGV0YWlsOnZvaWQgMCksbnVsbCE9ZSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLCJET01Nb3VzZVNjcm9sbCI9PT10LnR5cGUmJihlPTQwKmUpLHRoaXMuc2VhcmNoX3Jlc3VsdHMuc2Nyb2xsVG9wKGUrdGhpcy5zZWFyY2hfcmVzdWx0cy5zY3JvbGxUb3AoKSl9LG4ucHJvdG90eXBlLmJsdXJfdGVzdD1mdW5jdGlvbih0KXtpZighdGhpcy5hY3RpdmVfZmllbGQmJnRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJjaHpuLWNvbnRhaW5lci1hY3RpdmUiKSlyZXR1cm4gdGhpcy5jbG9zZV9maWVsZCgpfSxuLnByb3RvdHlwZS5jbG9zZV9maWVsZD1mdW5jdGlvbigpe3JldHVybiBlKGRvY3VtZW50KS51bmJpbmQoImNsaWNrIix0aGlzLmNsaWNrX3Rlc3RfYWN0aW9uKSx0aGlzLmFjdGl2ZV9maWVsZD0hMSx0aGlzLnJlc3VsdHNfaGlkZSgpLHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJjaHpuLWNvbnRhaW5lci1hY3RpdmUiKSx0aGlzLmNsZWFyX2JhY2tzdHJva2UoKSx0aGlzLnNob3dfc2VhcmNoX2ZpZWxkX2RlZmF1bHQoKSx0aGlzLnNlYXJjaF9maWVsZF9zY2FsZSgpfSxuLnByb3RvdHlwZS5hY3RpdmF0ZV9maWVsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygiY2h6bi1jb250YWluZXItYWN0aXZlIiksdGhpcy5hY3RpdmVfZmllbGQ9ITAsdGhpcy5zZWFyY2hfZmllbGQudmFsKHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpKSx0aGlzLnNlYXJjaF9maWVsZC5mb2N1cygpfSxuLnByb3RvdHlwZS50ZXN0X2FjdGl2ZV9jbGljaz1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LnRhcmdldCkucGFyZW50cygiIyIrdGhpcy5jb250YWluZXJfaWQpLmxlbmd0aD90aGlzLmFjdGl2ZV9maWVsZD0hMDp0aGlzLmNsb3NlX2ZpZWxkKCl9LG4ucHJvdG90eXBlLnJlc3VsdHNfYnVpbGQ9ZnVuY3Rpb24oKXt2YXIgdCxlLG4scixvO2Zvcih0aGlzLnBhcnNpbmc9ITAsdGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQ9bnVsbCx0aGlzLnJlc3VsdHNfZGF0YT1pLlNlbGVjdFBhcnNlci5zZWxlY3RfdG9fYXJyYXkodGhpcy5mb3JtX2ZpZWxkKSx0aGlzLmlzX211bHRpcGxlP3RoaXMuc2VhcmNoX2Nob2ljZXMuZmluZCgibGkuc2VhcmNoLWNob2ljZSIpLnJlbW92ZSgpOnRoaXMuaXNfbXVsdGlwbGV8fCh0aGlzLnNlbGVjdGVkX2l0ZW0uYWRkQ2xhc3MoImNoem4tZGVmYXVsdCIpLmZpbmQoInNwYW4iKS50ZXh0KHRoaXMuZGVmYXVsdF90ZXh0KSx0aGlzLmRpc2FibGVfc2VhcmNofHx0aGlzLmZvcm1fZmllbGQub3B0aW9ucy5sZW5ndGg8PXRoaXMuZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkPyh0aGlzLnNlYXJjaF9maWVsZFswXS5yZWFkT25seT0hMCx0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygiY2h6bi1jb250YWluZXItc2luZ2xlLW5vc2VhcmNoIikpOih0aGlzLnNlYXJjaF9maWVsZFswXS5yZWFkT25seT0hMSx0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygiY2h6bi1jb250YWluZXItc2luZ2xlLW5vc2VhcmNoIikpKSx0PSIiLG89dGhpcy5yZXN1bHRzX2RhdGEsbj0wLHI9by5sZW5ndGg7bjxyO24rKyllPW9bbl0sZS5ncm91cD90Kz10aGlzLnJlc3VsdF9hZGRfZ3JvdXAoZSk6ZS5lbXB0eXx8KHQrPXRoaXMucmVzdWx0X2FkZF9vcHRpb24oZSksZS5zZWxlY3RlZCYmdGhpcy5pc19tdWx0aXBsZT90aGlzLmNob2ljZV9idWlsZChlKTplLnNlbGVjdGVkJiYhdGhpcy5pc19tdWx0aXBsZSYmKHRoaXMuc2VsZWN0ZWRfaXRlbS5yZW1vdmVDbGFzcygiY2h6bi1kZWZhdWx0IikuZmluZCgic3BhbiIpLnRleHQoZS50ZXh0KSx0aGlzLmFsbG93X3NpbmdsZV9kZXNlbGVjdCYmdGhpcy5zaW5nbGVfZGVzZWxlY3RfY29udHJvbF9idWlsZCgpKSk7cmV0dXJuIHRoaXMuc2VhcmNoX2ZpZWxkX2Rpc2FibGVkKCksdGhpcy5zaG93X3NlYXJjaF9maWVsZF9kZWZhdWx0KCksdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKSx0aGlzLnNlYXJjaF9yZXN1bHRzLmh0bWwodCksdGhpcy5wYXJzaW5nPSExfSxuLnByb3RvdHlwZS5yZXN1bHRfYWRkX2dyb3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbV9pZD10aGlzLmNvbnRhaW5lcl9pZCsiX2dfIit0LmFycmF5X2luZGV4LCc8bGkgaWQ9IicrdC5kb21faWQrJyIgY2xhc3M9Imdyb3VwLXJlc3VsdCI+JytlKCI8ZGl2IC8+IikudGV4dCh0LmxhYmVsKS5odG1sKCkrIjwvbGk+In0sbi5wcm90b3R5cGUucmVzdWx0X2RvX2hpZ2hsaWdodD1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixvO2lmKHQubGVuZ3RoKXtpZih0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKSx0aGlzLnJlc3VsdF9oaWdobGlnaHQ9dCx0aGlzLnJlc3VsdF9oaWdobGlnaHQuYWRkQ2xhc3MoImhpZ2hsaWdodGVkIiksaT1wYXJzZUludCh0aGlzLnNlYXJjaF9yZXN1bHRzLmNzcygibWF4SGVpZ2h0IiksMTApLG89dGhpcy5zZWFyY2hfcmVzdWx0cy5zY3JvbGxUb3AoKSxyPWkrbyxuPXRoaXMucmVzdWx0X2hpZ2hsaWdodC5wb3NpdGlvbigpLnRvcCt0aGlzLnNlYXJjaF9yZXN1bHRzLnNjcm9sbFRvcCgpLGU9bit0aGlzLnJlc3VsdF9oaWdobGlnaHQub3V0ZXJIZWlnaHQoKSxlPj1yKXJldHVybiB0aGlzLnNlYXJjaF9yZXN1bHRzLnNjcm9sbFRvcChlLWk+MD9lLWk6MCk7aWYobjxvKXJldHVybiB0aGlzLnNlYXJjaF9yZXN1bHRzLnNjcm9sbFRvcChuKX19LG4ucHJvdG90eXBlLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHRfaGlnaGxpZ2h0JiZ0aGlzLnJlc3VsdF9oaWdobGlnaHQucmVtb3ZlQ2xhc3MoImhpZ2hsaWdodGVkIiksdGhpcy5yZXN1bHRfaGlnaGxpZ2h0PW51bGx9LG4ucHJvdG90eXBlLnJlc3VsdHNfc2hvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzX211bHRpcGxlJiZ0aGlzLm1heF9zZWxlY3RlZF9vcHRpb25zPD10aGlzLmNob2ljZXNfY291bnQoKT8odGhpcy5mb3JtX2ZpZWxkX2pxLnRyaWdnZXIoImxpc3p0Om1heHNlbGVjdGVkIix7Y2hvc2VuOnRoaXN9KSwhMSk6KHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJjaHpuLXdpdGgtZHJvcCIpLHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKCJsaXN6dDpzaG93aW5nX2Ryb3Bkb3duIix7Y2hvc2VuOnRoaXN9KSx0aGlzLnJlc3VsdHNfc2hvd2luZz0hMCx0aGlzLnNlYXJjaF9maWVsZC5mb2N1cygpLHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCh0aGlzLnNlYXJjaF9maWVsZC52YWwoKSksdGhpcy53aW5ub3dfcmVzdWx0cygpKX0sbi5wcm90b3R5cGUucmVzdWx0c19oaWRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdWx0c19zaG93aW5nJiYodGhpcy5yZXN1bHRfY2xlYXJfaGlnaGxpZ2h0KCksdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoImNoem4td2l0aC1kcm9wIiksdGhpcy5mb3JtX2ZpZWxkX2pxLnRyaWdnZXIoImxpc3p0OmhpZGluZ19kcm9wZG93biIse2Nob3Nlbjp0aGlzfSkpLHRoaXMucmVzdWx0c19zaG93aW5nPSExfSxuLnByb3RvdHlwZS5zZXRfdGFiX2luZGV4PWZ1bmN0aW9uKHQpe3ZhciBlO2lmKHRoaXMuZm9ybV9maWVsZF9qcS5hdHRyKCJ0YWJpbmRleCIpKXJldHVybiBlPXRoaXMuZm9ybV9maWVsZF9qcS5hdHRyKCJ0YWJpbmRleCIpLHRoaXMuZm9ybV9maWVsZF9qcS5hdHRyKCJ0YWJpbmRleCIsLTEpLHRoaXMuc2VhcmNoX2ZpZWxkLmF0dHIoInRhYmluZGV4IixlKX0sbi5wcm90b3R5cGUuc2V0X2xhYmVsX2JlaGF2aW9yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmZvcm1fZmllbGRfbGFiZWw9dGhpcy5mb3JtX2ZpZWxkX2pxLnBhcmVudHMoImxhYmVsIiksIXRoaXMuZm9ybV9maWVsZF9sYWJlbC5sZW5ndGgmJnRoaXMuZm9ybV9maWVsZC5pZC5sZW5ndGgmJih0aGlzLmZvcm1fZmllbGRfbGFiZWw9ZSgibGFiZWxbZm9yPSciK3RoaXMuZm9ybV9maWVsZC5pZCsiJ10iKSksdGhpcy5mb3JtX2ZpZWxkX2xhYmVsLmxlbmd0aD4wKXJldHVybiB0aGlzLmZvcm1fZmllbGRfbGFiZWwuY2xpY2soZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNfbXVsdGlwbGU/dC5jb250YWluZXJfbW91c2Vkb3duKGUpOnQuYWN0aXZhdGVfZmllbGQoKX0pfSxuLnByb3RvdHlwZS5zaG93X3NlYXJjaF9maWVsZF9kZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNfbXVsdGlwbGUmJnRoaXMuY2hvaWNlc19jb3VudCgpPDEmJiF0aGlzLmFjdGl2ZV9maWVsZD8odGhpcy5zZWFyY2hfZmllbGQudmFsKHRoaXMuZGVmYXVsdF90ZXh0KSx0aGlzLnNlYXJjaF9maWVsZC5hZGRDbGFzcygiZGVmYXVsdCIpKToodGhpcy5zZWFyY2hfZmllbGQudmFsKCIiKSx0aGlzLnNlYXJjaF9maWVsZC5yZW1vdmVDbGFzcygiZGVmYXVsdCIpKX0sbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfbW91c2V1cD1mdW5jdGlvbih0KXt2YXIgbjtpZihuPWUodC50YXJnZXQpLmhhc0NsYXNzKCJhY3RpdmUtcmVzdWx0Iik/ZSh0LnRhcmdldCk6ZSh0LnRhcmdldCkucGFyZW50cygiLmFjdGl2ZS1yZXN1bHQiKS5maXJzdCgpLG4ubGVuZ3RoKXJldHVybiB0aGlzLnJlc3VsdF9oaWdobGlnaHQ9bix0aGlzLnJlc3VsdF9zZWxlY3QodCksdGhpcy5zZWFyY2hfZmllbGQuZm9jdXMoKX0sbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfbW91c2VvdmVyPWZ1bmN0aW9uKHQpe3ZhciBuO2lmKG49ZSh0LnRhcmdldCkuaGFzQ2xhc3MoImFjdGl2ZS1yZXN1bHQiKT9lKHQudGFyZ2V0KTplKHQudGFyZ2V0KS5wYXJlbnRzKCIuYWN0aXZlLXJlc3VsdCIpLmZpcnN0KCkpcmV0dXJuIHRoaXMucmVzdWx0X2RvX2hpZ2hsaWdodChuKX0sbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfbW91c2VvdXQ9ZnVuY3Rpb24odCl7aWYoZSh0LnRhcmdldCkuaGFzQ2xhc3MoImFjdGl2ZS1yZXN1bHQiKSlyZXR1cm4gdGhpcy5yZXN1bHRfY2xlYXJfaGlnaGxpZ2h0KCl9LG4ucHJvdG90eXBlLmNob2ljZV9idWlsZD1mdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcztyZXR1cm4gbj1lKCI8bGkgLz4iLHsiY2xhc3MiOiJzZWFyY2gtY2hvaWNlIn0pLmh0bWwoIjxzcGFuPiIrdC5odG1sKyI8L3NwYW4+IiksdC5kaXNhYmxlZD9uLmFkZENsYXNzKCJzZWFyY2gtY2hvaWNlLWRpc2FibGVkIik6KGk9ZSgiPGEgLz4iLHtocmVmOiIjIiwiY2xhc3MiOiJzZWFyY2gtY2hvaWNlLWNsb3NlIixyZWw6dC5hcnJheV9pbmRleH0pLGkuY2xpY2soZnVuY3Rpb24odCl7cmV0dXJuIHIuY2hvaWNlX2Rlc3Ryb3lfbGlua19jbGljayh0KX0pLG4uYXBwZW5kKGkpKSx0aGlzLnNlYXJjaF9jb250YWluZXIuYmVmb3JlKG4pfSxuLnByb3RvdHlwZS5jaG9pY2VfZGVzdHJveV9saW5rX2NsaWNrPWZ1bmN0aW9uKHQpe2lmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLCF0aGlzLmlzX2Rpc2FibGVkKXJldHVybiB0aGlzLmNob2ljZV9kZXN0cm95KGUodC50YXJnZXQpKX0sbi5wcm90b3R5cGUuY2hvaWNlX2Rlc3Ryb3k9ZnVuY3Rpb24odCl7aWYodGhpcy5yZXN1bHRfZGVzZWxlY3QodC5hdHRyKCJyZWwiKSkpcmV0dXJuIHRoaXMuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCgpLHRoaXMuaXNfbXVsdGlwbGUmJnRoaXMuY2hvaWNlc19jb3VudCgpPjAmJnRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpLmxlbmd0aDwxJiZ0aGlzLnJlc3VsdHNfaGlkZSgpLHQucGFyZW50cygibGkiKS5maXJzdCgpLnJlbW92ZSgpLHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCl9LG4ucHJvdG90eXBlLnJlc3VsdHNfcmVzZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmZvcm1fZmllbGQub3B0aW9uc1swXS5zZWxlY3RlZD0hMCx0aGlzLnNlbGVjdGVkX29wdGlvbl9jb3VudD1udWxsLHRoaXMuc2VsZWN0ZWRfaXRlbS5maW5kKCJzcGFuIikudGV4dCh0aGlzLmRlZmF1bHRfdGV4dCksdGhpcy5pc19tdWx0aXBsZXx8dGhpcy5zZWxlY3RlZF9pdGVtLmFkZENsYXNzKCJjaHpuLWRlZmF1bHQiKSx0aGlzLnNob3dfc2VhcmNoX2ZpZWxkX2RlZmF1bHQoKSx0aGlzLnJlc3VsdHNfcmVzZXRfY2xlYW51cCgpLHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKCJjaGFuZ2UiKSx0aGlzLmFjdGl2ZV9maWVsZClyZXR1cm4gdGhpcy5yZXN1bHRzX2hpZGUoKX0sbi5wcm90b3R5cGUucmVzdWx0c19yZXNldF9jbGVhbnVwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudF9zZWxlY3RlZEluZGV4PXRoaXMuZm9ybV9maWVsZC5zZWxlY3RlZEluZGV4LHRoaXMuc2VsZWN0ZWRfaXRlbS5maW5kKCJhYmJyIikucmVtb3ZlKCl9LG4ucHJvdG90eXBlLnJlc3VsdF9zZWxlY3Q9ZnVuY3Rpb24odCl7dmFyIGUsbixpLHI7aWYodGhpcy5yZXN1bHRfaGlnaGxpZ2h0KXJldHVybiBlPXRoaXMucmVzdWx0X2hpZ2hsaWdodCxuPWUuYXR0cigiaWQiKSx0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKSx0aGlzLmlzX211bHRpcGxlJiZ0aGlzLm1heF9zZWxlY3RlZF9vcHRpb25zPD10aGlzLmNob2ljZXNfY291bnQoKT8odGhpcy5mb3JtX2ZpZWxkX2pxLnRyaWdnZXIoImxpc3p0Om1heHNlbGVjdGVkIix7Y2hvc2VuOnRoaXN9KSwhMSk6KHRoaXMuaXNfbXVsdGlwbGU/ZS5yZW1vdmVDbGFzcygiYWN0aXZlLXJlc3VsdCIpOih0aGlzLnNlYXJjaF9yZXN1bHRzLmZpbmQoIi5yZXN1bHQtc2VsZWN0ZWQiKS5yZW1vdmVDbGFzcygicmVzdWx0LXNlbGVjdGVkIiksdGhpcy5yZXN1bHRfc2luZ2xlX3NlbGVjdGVkPWUsdGhpcy5zZWxlY3RlZF9pdGVtLnJlbW92ZUNsYXNzKCJjaHpuLWRlZmF1bHQiKSksZS5hZGRDbGFzcygicmVzdWx0LXNlbGVjdGVkIikscj1uLnN1YnN0cihuLmxhc3RJbmRleE9mKCJfIikrMSksaT10aGlzLnJlc3VsdHNfZGF0YVtyXSxpLnNlbGVjdGVkPSEwLHRoaXMuZm9ybV9maWVsZC5vcHRpb25zW2kub3B0aW9uc19pbmRleF0uc2VsZWN0ZWQ9ITAsdGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQ9bnVsbCx0aGlzLmlzX211bHRpcGxlP3RoaXMuY2hvaWNlX2J1aWxkKGkpOih0aGlzLnNlbGVjdGVkX2l0ZW0uZmluZCgic3BhbiIpLmZpcnN0KCkudGV4dChpLnRleHQpLHRoaXMuYWxsb3dfc2luZ2xlX2Rlc2VsZWN0JiZ0aGlzLnNpbmdsZV9kZXNlbGVjdF9jb250cm9sX2J1aWxkKCkpLCh0Lm1ldGFLZXl8fHQuY3RybEtleSkmJnRoaXMuaXNfbXVsdGlwbGV8fHRoaXMucmVzdWx0c19oaWRlKCksdGhpcy5zZWFyY2hfZmllbGQudmFsKCIiKSwodGhpcy5pc19tdWx0aXBsZXx8dGhpcy5mb3JtX2ZpZWxkLnNlbGVjdGVkSW5kZXghPT10aGlzLmN1cnJlbnRfc2VsZWN0ZWRJbmRleCkmJnRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKCJjaGFuZ2UiLHtzZWxlY3RlZDp0aGlzLmZvcm1fZmllbGQub3B0aW9uc1tpLm9wdGlvbnNfaW5kZXhdLnZhbHVlfSksdGhpcy5jdXJyZW50X3NlbGVjdGVkSW5kZXg9dGhpcy5mb3JtX2ZpZWxkLnNlbGVjdGVkSW5kZXgsdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKSl9LG4ucHJvdG90eXBlLnJlc3VsdF9hY3RpdmF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmRpc2FibGVkP3QuYWRkQ2xhc3MoImRpc2FibGVkLXJlc3VsdCIpOnRoaXMuaXNfbXVsdGlwbGUmJmUuc2VsZWN0ZWQ/dC5hZGRDbGFzcygicmVzdWx0LXNlbGVjdGVkIik6dC5hZGRDbGFzcygiYWN0aXZlLXJlc3VsdCIpfSxuLnByb3RvdHlwZS5yZXN1bHRfZGVhY3RpdmF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5yZW1vdmVDbGFzcygiYWN0aXZlLXJlc3VsdCByZXN1bHQtc2VsZWN0ZWQgZGlzYWJsZWQtcmVzdWx0Iil9LG4ucHJvdG90eXBlLnJlc3VsdF9kZXNlbGVjdD1mdW5jdGlvbih0KXt2YXIgbixpO3JldHVybiBpPXRoaXMucmVzdWx0c19kYXRhW3RdLCF0aGlzLmZvcm1fZmllbGQub3B0aW9uc1tpLm9wdGlvbnNfaW5kZXhdLmRpc2FibGVkJiYoaS5zZWxlY3RlZD0hMSx0aGlzLmZvcm1fZmllbGQub3B0aW9uc1tpLm9wdGlvbnNfaW5kZXhdLnNlbGVjdGVkPSExLHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50PW51bGwsbj1lKCIjIit0aGlzLmNvbnRhaW5lcl9pZCsiX29fIit0KSxuLnJlbW92ZUNsYXNzKCJyZXN1bHQtc2VsZWN0ZWQiKS5hZGRDbGFzcygiYWN0aXZlLXJlc3VsdCIpLnNob3coKSx0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKSx0aGlzLndpbm5vd19yZXN1bHRzKCksdGhpcy5mb3JtX2ZpZWxkX2pxLnRyaWdnZXIoImNoYW5nZSIse2Rlc2VsZWN0ZWQ6dGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbaS5vcHRpb25zX2luZGV4XS52YWx1ZX0pLHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCksITApfSxuLnByb3RvdHlwZS5zaW5nbGVfZGVzZWxlY3RfY29udHJvbF9idWlsZD1mdW5jdGlvbigpe2lmKHRoaXMuYWxsb3dfc2luZ2xlX2Rlc2VsZWN0KXJldHVybiB0aGlzLnNlbGVjdGVkX2l0ZW0uZmluZCgiYWJiciIpLmxlbmd0aHx8dGhpcy5zZWxlY3RlZF9pdGVtLmZpbmQoInNwYW4iKS5maXJzdCgpLmFmdGVyKCc8YWJiciBjbGFzcz0ic2VhcmNoLWNob2ljZS1jbG9zZSI+PC9hYmJyPicpLHRoaXMuc2VsZWN0ZWRfaXRlbS5hZGRDbGFzcygiY2h6bi1zaW5nbGUtd2l0aC1kZXNlbGVjdCIpfSxuLnByb3RvdHlwZS53aW5ub3dfcmVzdWx0cz1mdW5jdGlvbigpe3ZhciB0LG4saSxyLG8scyxhLGwsYyx1LGQsaCxwLGYsbSxfLGcsdjtmb3IodGhpcy5ub19yZXN1bHRzX2NsZWFyKCksYz0wLHU9dGhpcy5zZWFyY2hfZmllbGQudmFsKCk9PT10aGlzLmRlZmF1bHRfdGV4dD8iIjplKCI8ZGl2Lz4iKS50ZXh0KGUudHJpbSh0aGlzLnNlYXJjaF9maWVsZC52YWwoKSkpLmh0bWwoKSxzPXRoaXMuc2VhcmNoX2NvbnRhaW5zPyIiOiJeIixvPW5ldyBSZWdFeHAocyt1LnJlcGxhY2UoL1stW1xde30oKSorPy4sXFxeJHwjXHNdL2csIlxcJCYiKSwiaSIpLHA9bmV3IFJlZ0V4cCh1LnJlcGxhY2UoL1stW1xde30oKSorPy4sXFxeJHwjXHNdL2csIlxcJCYiKSwiaSIpLHY9dGhpcy5yZXN1bHRzX2RhdGEsZj0wLF89di5sZW5ndGg7ZjxfO2YrKylpZihuPXZbZl0sIW4uZW1wdHkpaWYobi5ncm91cCllKCIjIituLmRvbV9pZCkuY3NzKCJkaXNwbGF5Iiwibm9uZSIpO2Vsc2V7aWYodD0hMSxsPW4uZG9tX2lkLGE9ZSgiIyIrbCksby50ZXN0KG4uaHRtbCkpdD0hMCxjKz0xO2Vsc2UgaWYodGhpcy5lbmFibGVfc3BsaXRfd29yZF9zZWFyY2gmJihuLmh0bWwuaW5kZXhPZigiICIpPj0wfHwwPT09bi5odG1sLmluZGV4T2YoIlsiKSkmJihyPW4uaHRtbC5yZXBsYWNlKC9cW3xcXS9nLCIiKS5zcGxpdCgiICIpLHIubGVuZ3RoKSlmb3IobT0wLGc9ci5sZW5ndGg7bTxnO20rKylpPXJbbV0sby50ZXN0KGkpJiYodD0hMCxjKz0xKTt0Pyh1Lmxlbmd0aD8oZD1uLmh0bWwuc2VhcmNoKHApLGg9bi5odG1sLnN1YnN0cigwLGQrdS5sZW5ndGgpKyI8L2VtPiIrbi5odG1sLnN1YnN0cihkK3UubGVuZ3RoKSxoPWguc3Vic3RyKDAsZCkrIjxlbT4iK2guc3Vic3RyKGQpKTpoPW4uaHRtbCxhLmh0bWwoaCksdGhpcy5yZXN1bHRfYWN0aXZhdGUoYSxuKSxudWxsIT1uLmdyb3VwX2FycmF5X2luZGV4JiZlKCIjIit0aGlzLnJlc3VsdHNfZGF0YVtuLmdyb3VwX2FycmF5X2luZGV4XS5kb21faWQpLmNzcygiZGlzcGxheSIsImxpc3QtaXRlbSIpKToodGhpcy5yZXN1bHRfaGlnaGxpZ2h0JiZsPT09dGhpcy5yZXN1bHRfaGlnaGxpZ2h0LmF0dHIoImlkIikmJnRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpLHRoaXMucmVzdWx0X2RlYWN0aXZhdGUoYSkpfXJldHVybiBjPDEmJnUubGVuZ3RoP3RoaXMubm9fcmVzdWx0cyh1KTp0aGlzLndpbm5vd19yZXN1bHRzX3NldF9oaWdobGlnaHQoKX0sbi5wcm90b3R5cGUud2lubm93X3Jlc3VsdHNfc2V0X2hpZ2hsaWdodD1mdW5jdGlvbigpe3ZhciB0LGU7aWYoIXRoaXMucmVzdWx0X2hpZ2hsaWdodCYmKGU9dGhpcy5pc19tdWx0aXBsZT9bXTp0aGlzLnNlYXJjaF9yZXN1bHRzLmZpbmQoIi5yZXN1bHQtc2VsZWN0ZWQuYWN0aXZlLXJlc3VsdCIpLHQ9ZS5sZW5ndGg/ZS5maXJzdCgpOnRoaXMuc2VhcmNoX3Jlc3VsdHMuZmluZCgiLmFjdGl2ZS1yZXN1bHQiKS5maXJzdCgpLG51bGwhPXQpKXJldHVybiB0aGlzLnJlc3VsdF9kb19oaWdobGlnaHQodCl9LG4ucHJvdG90eXBlLm5vX3Jlc3VsdHM9ZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIG49ZSgnPGxpIGNsYXNzPSJuby1yZXN1bHRzIj4nK3RoaXMucmVzdWx0c19ub25lX2ZvdW5kKycgIjxzcGFuPjwvc3Bhbj4iPC9saT4nKSxuLmZpbmQoInNwYW4iKS5maXJzdCgpLmh0bWwodCksdGhpcy5zZWFyY2hfcmVzdWx0cy5hcHBlbmQobil9LG4ucHJvdG90eXBlLm5vX3Jlc3VsdHNfY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWFyY2hfcmVzdWx0cy5maW5kKCIubm8tcmVzdWx0cyIpLnJlbW92ZSgpfSxuLnByb3RvdHlwZS5rZXlkb3duX2Fycm93PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMucmVzdWx0c19zaG93aW5nJiZ0aGlzLnJlc3VsdF9oaWdobGlnaHQ/KHQ9dGhpcy5yZXN1bHRfaGlnaGxpZ2h0Lm5leHRBbGwoImxpLmFjdGl2ZS1yZXN1bHQiKS5maXJzdCgpKT90aGlzLnJlc3VsdF9kb19oaWdobGlnaHQodCk6dm9pZCAwOnRoaXMucmVzdWx0c19zaG93KCl9LG4ucHJvdG90eXBlLmtleXVwX2Fycm93PWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMucmVzdWx0c19zaG93aW5nfHx0aGlzLmlzX211bHRpcGxlP3RoaXMucmVzdWx0X2hpZ2hsaWdodD8odD10aGlzLnJlc3VsdF9oaWdobGlnaHQucHJldkFsbCgibGkuYWN0aXZlLXJlc3VsdCIpLHQubGVuZ3RoP3RoaXMucmVzdWx0X2RvX2hpZ2hsaWdodCh0LmZpcnN0KCkpOih0aGlzLmNob2ljZXNfY291bnQoKT4wJiZ0aGlzLnJlc3VsdHNfaGlkZSgpLHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpKSk6dm9pZCAwOnRoaXMucmVzdWx0c19zaG93KCl9LG4ucHJvdG90eXBlLmtleWRvd25fYmFja3N0cm9rZT1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnBlbmRpbmdfYmFja3N0cm9rZT8odGhpcy5jaG9pY2VfZGVzdHJveSh0aGlzLnBlbmRpbmdfYmFja3N0cm9rZS5maW5kKCJhIikuZmlyc3QoKSksdGhpcy5jbGVhcl9iYWNrc3Ryb2tlKCkpOih0PXRoaXMuc2VhcmNoX2NvbnRhaW5lci5zaWJsaW5ncygibGkuc2VhcmNoLWNob2ljZSIpLmxhc3QoKSx0Lmxlbmd0aCYmIXQuaGFzQ2xhc3MoInNlYXJjaC1jaG9pY2UtZGlzYWJsZWQiKT8odGhpcy5wZW5kaW5nX2JhY2tzdHJva2U9dCx0aGlzLnNpbmdsZV9iYWNrc3Ryb2tlX2RlbGV0ZT90aGlzLmtleWRvd25fYmFja3N0cm9rZSgpOnRoaXMucGVuZGluZ19iYWNrc3Ryb2tlLmFkZENsYXNzKCJzZWFyY2gtY2hvaWNlLWZvY3VzIikpOnZvaWQgMCl9LG4ucHJvdG90eXBlLmNsZWFyX2JhY2tzdHJva2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UmJnRoaXMucGVuZGluZ19iYWNrc3Ryb2tlLnJlbW92ZUNsYXNzKCJzZWFyY2gtY2hvaWNlLWZvY3VzIiksdGhpcy5wZW5kaW5nX2JhY2tzdHJva2U9bnVsbH0sbi5wcm90b3R5cGUua2V5ZG93bl9jaGVja2VyPWZ1bmN0aW9uKHQpe3ZhciBlLG47c3dpdGNoKGU9bnVsbCE9KG49dC53aGljaCk/bjp0LmtleUNvZGUsdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKSw4IT09ZSYmdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UmJnRoaXMuY2xlYXJfYmFja3N0cm9rZSgpLGUpe2Nhc2UgODp0aGlzLmJhY2tzdHJva2VfbGVuZ3RoPXRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpLmxlbmd0aDticmVhaztjYXNlIDk6dGhpcy5yZXN1bHRzX3Nob3dpbmcmJiF0aGlzLmlzX211bHRpcGxlJiZ0aGlzLnJlc3VsdF9zZWxlY3QodCksdGhpcy5tb3VzZV9vbl9jb250YWluZXI9ITE7YnJlYWs7Y2FzZSAxMzp0LnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSAzODp0LnByZXZlbnREZWZhdWx0KCksdGhpcy5rZXl1cF9hcnJvdygpO2JyZWFrO2Nhc2UgNDA6dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMua2V5ZG93bl9hcnJvdygpfX0sbi5wcm90b3R5cGUuc2VhcmNoX2ZpZWxkX3NjYWxlPWZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxzLGEsbDtpZih0aGlzLmlzX211bHRpcGxlKXtmb3Iobj0wLHM9MCxyPSJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDogLTEwMDBweDsgdG9wOiAtMTAwMHB4OyBkaXNwbGF5Om5vbmU7IixvPVsiZm9udC1zaXplIiwiZm9udC1zdHlsZSIsImZvbnQtd2VpZ2h0IiwiZm9udC1mYW1pbHkiLCJsaW5lLWhlaWdodCIsInRleHQtdHJhbnNmb3JtIiwibGV0dGVyLXNwYWNpbmciXSxhPTAsbD1vLmxlbmd0aDthPGw7YSsrKWk9b1thXSxyKz1pKyI6Iit0aGlzLnNlYXJjaF9maWVsZC5jc3MoaSkrIjsiO3JldHVybiB0PWUoIjxkaXYgLz4iLHtzdHlsZTpyfSksdC50ZXh0KHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpKSxlKCJib2R5IikuYXBwZW5kKHQpLHM9dC53aWR0aCgpKzI1LHQucmVtb3ZlKCksdGhpcy5mX3dpZHRofHwodGhpcy5mX3dpZHRoPXRoaXMuY29udGFpbmVyLm91dGVyV2lkdGgoKSkscz50aGlzLmZfd2lkdGgtMTAmJihzPXRoaXMuZl93aWR0aC0xMCksdGhpcy5zZWFyY2hfZmllbGQuY3NzKHt3aWR0aDpzKyJweCJ9KX19LG4ucHJvdG90eXBlLmdlbmVyYXRlX3JhbmRvbV9pZD1mdW5jdGlvbigpe3ZhciB0O2Zvcih0PSJzZWwiK3RoaXMuZ2VuZXJhdGVfcmFuZG9tX2NoYXIoKSt0aGlzLmdlbmVyYXRlX3JhbmRvbV9jaGFyKCkrdGhpcy5nZW5lcmF0ZV9yYW5kb21fY2hhcigpO2UoIiMiK3QpLmxlbmd0aD4wOyl0Kz10aGlzLmdlbmVyYXRlX3JhbmRvbV9jaGFyKCk7cmV0dXJuIHR9LG59KGEpLGkuQ2hvc2VuPW59LmNhbGwodGhpcyl9LmFwcGx5KGUsaSksCgkvLyBDaG9zZW4sIGEgU2VsZWN0IEJveCBFbmhhbmNlciBmb3IgalF1ZXJ5IGFuZCBQcm90b3R5cGUKCS8vIGJ5IFBhdHJpY2sgRmlsbGVyIGZvciBIYXJ2ZXN0LCBodHRwOi8vZ2V0aGFydmVzdC5jb20KCS8vIFZlcnNpb24gMC4xMS4xCgkvLyBGdWxsIHNvdXJjZSBhdCBodHRwczovL2dpdGh1Yi5jb20vaGFydmVzdGhxL2Nob3NlbgoJLy8gQ29weXJpZ2h0IChjKSAyMDExIEhhcnZlc3QgaHR0cDovL2dldGhhcnZlc3QuY29tCgkvLyBNSVQgTGljZW5zZSwgaHR0cHM6Ly9naXRodWIuY29tL2hhcnZlc3RocS9jaG9zZW4vYmxvYi9tYXN0ZXIvTElDRU5TRS5tZAoJISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oMzMxKSxuKDQ5Nyksbig1MTQpLG4oNTI3KSxuKDQ3MCksbig1MzMpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvKXt2YXIgcz1pLmlzQUJhc2VWaWV3LGE9by5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ie3tuYW1lfX0iIGRhdGEtc2UtbmFtZT0ie3tyZWFsTmFtZX19IiB2YWx1ZT0ie3t2YWx1ZX19IiBpZD0ie3tvcHRpb25JZH19Ij5cdCAgICAgIDxsYWJlbCBmb3I9Int7b3B0aW9uSWR9fSIgZGF0YS1zZS1mb3ItbmFtZT0ie3tyZWFsTmFtZX19IiBjbGFzcz0icmFkaW8tbGFiZWwiPlx0ICAgICAgICB7e2xhYmVsfX1cdCAgICAgIDwvbGFiZWw+XHQgICAgJyxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3ZhciBuO249ZS5leHBsYWluLHQuaXNGdW5jdGlvbihuKSYmIXMobikmJihuPXQucmVzdWx0Q3R4KHRoaXMub3B0aW9ucywiZXhwbGFpbiIsdGhpcykpLG4mJihzKG4pPyh0aGlzLmFkZCgnPHAgY2xhc3M9Im8tZm9ybS1leHBsYWluIj48L3A+JywiLnJhZGlvLWxhYmVsIiksdGhpcy5hZGQobiwiLm8tZm9ybS1leHBsYWluIikpOnRoaXMuYWRkKCc8cCBjbGFzcz0iby1mb3JtLWV4cGxhaW4iPnt7ZXhwbGFpbn19PC9wPicsIi5yYWRpby1sYWJlbCIpKX19KTtyZXR1cm4gci5leHRlbmQoe2V2ZW50czp7ImNoYW5nZSA6cmFkaW8iOiJ1cGRhdGUiLGtleXVwOmZ1bmN0aW9uKHQpe24uaXNTcGFjZUJhcih0KT9lKHQudGFyZ2V0KS5jbGljaygpOm4uaXNFbnRlcih0KSYmdGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnNhdmUiKX19LGVkaXRNb2RlOmZ1bmN0aW9uKCl7dmFyIGU9W107dGhpcy4kZWwuZW1wdHkoKSx0LmVhY2godGhpcy5vcHRpb25zLm9wdGlvbnMsZnVuY3Rpb24obixpKXt2YXIgcj17b3B0aW9uSWQ6dC51bmlxdWVJZCgib3B0aW9uIiksbmFtZTp0aGlzLm9wdGlvbnMuaW5wdXRJZCxyZWFsTmFtZTp0aGlzLm9wdGlvbnMubmFtZSx2YWx1ZTppfTt0LmlzT2JqZWN0KG4pfHwobj17bGFiZWw6bn0pLHQuZXh0ZW5kKHIsbiksZS5wdXNoKG5ldyBhKHIpLnJlbmRlcigpLmVsKX0sdGhpcyksdGhpcy4kZWwuYXBwZW5kKGUpO3ZhciBuPXRoaXMuZ2V0TW9kZWxWYWx1ZSgpO3JldHVybiBuJiZ0aGlzLiQoIjpyYWRpb1t2YWx1ZT0iK24rIl0iKS5wcm9wKCJjaGVja2VkIiwhMCksdGhpcy4kKCJpbnB1dCIpLmN1c3RvbUlucHV0KCksdGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpLHRoaXMuZ2V0UGFyYW0oImlubGluZSIpPT09ITAmJnRoaXMuJCgiZGl2LmN1c3RvbS1yYWRpbyIpLmFkZENsYXNzKCJpbmxpbmUiKSx0aGlzfSxyZWFkTW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRNb2RlKCksdGhpcy4kKCI6cmFkaW8iKS5wcm9wKCJkaXNhYmxlZCIsITApLHRoaXN9LHZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQoIjpyYWRpbzpjaGVja2VkIikudmFsKCl9LGZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgibGFiZWw6ZXEoMCkiKS5mb2N1cygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMyKV0scj1mdW5jdGlvbih0KXt2YXIgZT10O3QuZm4uY3VzdG9tSW5wdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7aWYoZSh0aGlzKS5pcygiW3R5cGU9Y2hlY2tib3hdLFt0eXBlPXJhZGlvXSIpKXt2YXIgdD1lKHRoaXMpLG49dC5zaWJsaW5ncygnbGFiZWxbZm9yPSInK3QuYXR0cigiaWQiKSsnIl06Zmlyc3QnKTtuLmxlbmd0aHx8KG49dC5jbG9zZXN0KCdsYWJlbFtmb3I9IicrdC5hdHRyKCJpZCIpKyciXTpmaXJzdCcpKSx0LmFkZChuKS53cmFwQWxsKCc8ZGl2IGNsYXNzPSJjdXN0b20tJyt0LmF0dHIoInR5cGUiKSsnIj48L2Rpdj4nKSxuLmhvdmVyKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcygiaG92ZXIiKX0sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKCJob3ZlciIpfSksdC5iaW5kKCJ1cGRhdGVTdGF0ZSIsZnVuY3Rpb24oKXt0LmlzKCI6Y2hlY2tlZCIpP24uYWRkQ2xhc3MoImNoZWNrZWQiKTpuLnJlbW92ZUNsYXNzKCJjaGVja2VkIGNoZWNrZWRIb3ZlciBjaGVja2VkRm9jdXMiKX0pLnRyaWdnZXIoInVwZGF0ZVN0YXRlIikuY2xpY2soZnVuY3Rpb24oKXtlKCdpbnB1dFtuYW1lPSInK2UodGhpcykuYXR0cigibmFtZSIpKyciXScpLnRyaWdnZXIoInVwZGF0ZVN0YXRlIil9KS5mb2N1cyhmdW5jdGlvbigpe24uYWRkQ2xhc3MoImZvY3VzIiksdC5pcygiOmNoZWNrZWQiKSYmZSh0aGlzKS5hZGRDbGFzcygiY2hlY2tlZEZvY3VzIil9KS5ibHVyKGZ1bmN0aW9uKCl7bi5yZW1vdmVDbGFzcygiZm9jdXMgY2hlY2tlZEZvY3VzIil9KX19KX19LmFwcGx5KGUsaSksLyoqCgkJICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQkgKiBqUXVlcnkgY3VzdG9tSW5wdXQgcGx1Z2luCgkJICogQXV0aG9yOiBNYWdnaWUgQ29zdGVsbG8gV2FjaHMgbWFnZ2llQGZpbGFtZW50Z3JvdXAuY29tLCBTY290dCBKZWhsLCBzY290dEBmaWxhbWVudGdyb3VwLmNvbQoJCSAqIENvcHlyaWdodCAoYykgMjAwOSBGaWxhbWVudCBHcm91cAoJCSAqIGxpY2Vuc2VkIHVuZGVyIE1JVCAoZmlsYW1lbnRncm91cC5jb20vZXhhbXBsZXMvbWl0LWxpY2Vuc2UudHh0KQoJCSAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJKi8KCSEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ5Nyksbig0NzEpLG4oNTI3KSxuKDUzMyldLHI9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bi50cGwoJ1x0ICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0ie3tuYW1lfX0iIGlkPSJ7e2lucHV0SWR9fSIvPlx0ICAgIDxsYWJlbCBmb3I9Int7aW5wdXRJZH19IiBkYXRhLXNlLWZvci1uYW1lPSJ7e25hbWV9fSI+e3twbGFjZWhvbGRlcn19PC9sYWJlbD5cdCAgJyk7cmV0dXJuIGkuZXh0ZW5kKHt0ZW1wbGF0ZTpyLGV2ZW50czp7ImNoYW5nZSA6Y2hlY2tib3giOiJ1cGRhdGUiLGtleXVwOmZ1bmN0aW9uKHQpe2UuaXNTcGFjZUJhcih0KT90aGlzLiQoIjpjaGVja2JveCIpLmNsaWNrKCk6ZS5pc0VudGVyKHQpJiZ0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06c2F2ZSIpfX0sZWRpdE1vZGU6ZnVuY3Rpb24oKXt2YXIgZT10LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInBsYWNlaG9sZGVyIix0aGlzKTsiIj09PWU/ZT10LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsImxhYmVsIix0aGlzKTplPT09ITEmJihlPSIiKSx0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodC5leHRlbmQodC5vbWl0KHRoaXMub3B0aW9ucywicGxhY2Vob2xkZXIiKSx7cGxhY2Vob2xkZXI6ZX0pKSk7dmFyIG49dGhpcy4kKCI6Y2hlY2tib3giKTtyZXR1cm4gbi5wcm9wKCJjaGVja2VkIix0aGlzLmdldE1vZGVsVmFsdWUoKXx8ITEpLHRoaXMuJCgiaW5wdXQiKS5jdXN0b21JbnB1dCgpLHRoaXMubW9kZWwudHJpZ2dlcigiZm9ybTpyZXNpemUiKSx0aGlzfSxyZWFkTW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRNb2RlKCksdGhpcy4kKCI6Y2hlY2tib3giKS5wcm9wKCJkaXNhYmxlZCIsITApLHRoaXN9LHZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQoIjpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiKX0sZm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kKCI6Y2hlY2tib3giKS5mb2N1cygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig1MjcpLG4oNDcwKSxuKDQ3OCldLHI9ZnVuY3Rpb24odCxlLG4saSl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdC5maWx0ZXIoZXx8W10sZnVuY3Rpb24oZSl7cmV0dXJuIXQuY29udGFpbnMoWyJsYWJlbCIsImJ1dHRvbiIsInNlbGVjdCJdLGUudHlwZSl9KS5sZW5ndGh9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gaS5jcmVhdGUodC5kZWZhdWx0cyh7Z2V0UmVhZE1vZGVTdHJpbmc6dC5jb25zdGFudCgiICIpLGZvY3VzOnQubm9vcH0sdC5waWNrKGUsImNsaWNrIiwidGl0bGUiLCJocmVmIikpKX12YXIgcz1lLmV4dGVuZCh7dGFnTmFtZToic3BhbiIsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuJGVsLnRleHQodGhpcy5nZXRNb2RlbFZhbHVlKCkpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlKCEwKX0scmVhZE1vZGU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMSl9LGdldE1vZGVsVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmxhYmVsfSx0b2dnbGU6ZnVuY3Rpb24odCl7dGhpcy4kZWwudG9nZ2xlQ2xhc3MoIm8tZm9ybS1sYWJlbC1pbmxpbmUiLHQpLHRoaXMuJGVsLnRvZ2dsZUNsYXNzKCJvLWZvcm0tY29udHJvbCIsIXQpfSxmb2N1czp0Lm5vb3B9KSxhPW4uZXh0ZW5kKHtnZXRQYXJhbXM6ZS5wcm90b3R5cGUuZ2V0UGFyYW1zLGdldFBhcmFtOmUucHJvdG90eXBlLmdldFBhcmFtLGNsYXNzTmFtZTpmdW5jdGlvbiBsKCl7dmFyIGw7cmV0dXJuIGw9InRleHQiPT10aGlzLmdldFBhcmFtKCJkaXNwbGF5Iik/Im8tZm9ybS1pbnB1dC1ncm91cC1zdWJ0bGUiOiJvLWZvcm0taW5wdXQtZ3JvdXAiLHIodGhpcy5nZXRQYXJhbSgiaW5wdXRzIikpPjEmJihsKz0iIG8tZm9ybS1pbnB1dC1ncm91cC0yIiksbH0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3QuZWFjaCh0aGlzLmdldFBhcmFtKCJpbnB1dHMiKSxmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlImxhYmVsIjp0aGlzLmFkZChzLHtvcHRpb25zOmV9KTticmVhaztjYXNlImJ1dHRvbiI6dGhpcy5hZGQobyhlKSk7YnJlYWs7ZGVmYXVsdDplPXQuZGVmYXVsdHMoe21vZGVsOnRoaXMubW9kZWwscGFyYW1zOnQuZXh0ZW5kKHthdXRvV2lkdGg6ITB9LGUucGFyYW1zfHx7fSl9LGUpLHRoaXMuYWRkKHRoaXMuZ2V0UGFyYW1zKCkuY3JlYXRlKGUpKX19LHRoaXMpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZmlyc3QoKS5mb2N1cygpfX0pO3JldHVybiBlLmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24odCl7dGhpcy5pbnB1dEdyb3VwVmlldz1uZXcgYSh0KSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZWRpdE1vZGU6ZnVuY3Rpb24oKXt0aGlzLmlucHV0R3JvdXBWaWV3LnJlbW92ZSgpLHRoaXMuaW5wdXRHcm91cFZpZXc9bmV3IGEodGhpcy5vcHRpb25zKSx0aGlzLiRlbC5odG1sKHRoaXMuaW5wdXRHcm91cFZpZXcucmVuZGVyKCkuZWwpfSx0b1N0cmluZ1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbnB1dEdyb3VwVmlldy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0UmVhZE1vZGVTdHJpbmcoKX0pO3JldHVybiBlLmxlbmd0aCYmdC5ldmVyeShlKT9lLmpvaW4oIiAiKToiICJ9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5pbnB1dEdyb3VwVmlldy5mb2N1cygpfX0se0xhYmVsSW5wdXQ6cyxJbnB1dEdyb3VwVmlldzphfSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDU0OCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiaW1hZ2UtZmlsZS11cGxvYWQiLHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciBuPXQuY2xvbmUoZXx8e30pO3JldHVybiBuLnNpemUmJihuLmZpbGVTaXplS0I9TWF0aC5yb3VuZChuLnNpemUvMWUzKSksbn0scHJldmlld1RlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9ImltYWdlLWZpbGUtdGh1bWJuYWlsIGZsb2F0LWwiPlx0ICAgICAgICA8aW1nIHNyYz0ie3tpbWFnZVVybH19IiA+XHQgICAgICA8L2Rpdj5cdCAgICAgIDxkaXYgY2xhc3M9ImltYWdlLWZpbGUtaW5mbyBmbG9hdC1sIj5cdCAgICAgICAgPHVsPlx0ICAgICAgICAgIHt7I2lmIG5hbWVPckRvd25sb2FkfX08bGkgY2xhc3M9Int7ZG93bmxvYWRDbGFzc319Ij5cdCAgICAgICAgICAgIHt7I2lmIG5hbWV9fXt7bmFtZX19e3svaWZ9fVx0ICAgICAgICAgICAge3sjaWYgZG93bmxvYWRDbGFzc319PHNwYW4gY2xhc3M9ImRvd25sb2FkLWljb24gaWNvbiBpY29uLTE2IGljb24tb25seSBkb3dubG9hZC0xNiI+PC9zcGFuPnt7L2lmfX1cdCAgICAgICAgICA8L2xpPnt7L2lmfX1cdCAgICAgICAgICB7eyNpZiBmaWxlU2l6ZUtCfX08bGk+e3tmaWxlU2l6ZUtCfX0oS0IpPC9saT57ey9pZn19XHQgICAgICAgIDwvdWw+XHQgICAgICA8L2Rpdj4nLGZpbGVUeXBlczpbIi5wbmciLCIuZ2lmIiwiLmpwZWciLCIuanBnIl19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbigzMjgpLG4oNTI3KSxuKDQ2MiksbigzNTgpLG4oNTQ5KSxuKDUwMCksbig0NzEpLG4oNTUwKSxuKDU1MSldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhLGwsYyl7ZnVuY3Rpb24gdSh0KXtpZighZS5pc1N0cmluZyh0KSlyZXR1cm4gZS5jbG9uZSh0KTt0cnl7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2gobil7cmV0dXJufX1yZXR1cm4gbi5leHRlbmQoe2lkQXR0cmlidXRlOiJpZCIscHJldmlld1RlbXBsYXRlOm51bGwsZmlsZVR5cGVzOm51bGwscGFyc2U6ZS5pZGVudGl0eSxmaWxlRmllbGROYW1lOiJmaWxlIixmaWxlVXBsb2FkSW5wdXRFdmVudHM6e2NsZWFyOiJjbGVhckVycm9yIixzdWNjZXNzOiJhZGRGaWxlRGF0YSIsZXJyb3I6InNob3dFcnJvciJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKHQpe3ZhciBvPWUuZXh0ZW5kKHtmaWxlVHlwZXM6ZS5yZXN1bHQodGhpcywiZmlsZVR5cGVzIiksZmlsZUZpZWxkTmFtZTplLnJlc3VsdCh0LnBhcmFtcywiZmlsZUZpZWxkTmFtZSIpfHxlLnJlc3VsdCh0aGlzLCJmaWxlRmllbGROYW1lIiksZW5kcG9pbnQ6ZS5yZXN1bHQodGhpcywiZW5kcG9pbnQiKX0sdCx0aGlzLmdldFBhcmFtcyh0KSk7dGhpcy5maWxlVXBsb2FkSW5wdXQ9bmV3IGwobyksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHM9ci5leHRlbmQoe21vZGVsOmkuZXh0ZW5kKHtleHRyYVByb3BlcnRpZXM6ITAsaWRBdHRyaWJ1dGU6dGhpcy5nZXRQYXJhbU9yQXR0cmlidXRlKCJpZEF0dHJpYnV0ZSIpfSl9KTt0aGlzLmNvbGxlY3Rpb249bmV3IHMsdGhpcy5wcmV2aWV3TGlzdFZpZXc9bmV3IGMoe2NvbGxlY3Rpb246dGhpcy5jb2xsZWN0aW9uLHBhcmFtczp0LnBhcmFtcyxwYXJzZTp0aGlzLnBhcnNlLHByZXZpZXdUZW1wbGF0ZTp0aGlzLnByZXZpZXdUZW1wbGF0ZX0pLHRoaXMuZmlsZVVwbG9hZElucHV0LnNldENvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uKSx0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwidXBkYXRlIix0aGlzLnVwZGF0ZSksdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sInVwZGF0ZSIsdGhpcy5yZXNpemUpLHRoaXMuJGVsLmFwcGVuZCh0aGlzLmZpbGVVcGxvYWRJbnB1dC5yZW5kZXIoKS5lbCksdGhpcy4kZWwuYXBwZW5kKHRoaXMucHJldmlld0xpc3RWaWV3LnJlbmRlcigpLmVsKSx0aGlzLiRlbC5hZGRDbGFzcygiby1mb3JtLWNvbnRyb2wgZmlsZS11cGxvYWQgY2xlYXJmaXgiKX0scHJldmlld0Zyb21Nb2RlbDpmdW5jdGlvbigpe3RoaXMuY29sbGVjdGlvbi5yZXNldCgpO3ZhciBuPXRoaXMuZ2V0TW9kZWxWYWx1ZSgpLGk9dGhpcy5nZXRQYXJhbSgicHJldmlld0RhdGEiKSxyPXRoaXMuZ2V0UGFyYW0oInByZXZpZXdFbmRwb2ludCIpLG89dGhpcy5jb2xsZWN0aW9uO2lmKG4paWYoaSlvLnNldChpKTtlbHNlIGlmKHIpe3ZhciBzPWUuaXNTdHJpbmcocik/YS50cGwocik6cixsPWUubWFwKGUuaXNBcnJheShuKT9uOltuXSxmdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQocyh7aWQ6ZX0pKX0pO3Qud2hlbi5hcHBseSh0LGwpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD0xPT1sLmxlbmd0aD9hcmd1bWVudHNbMF06ZS5wbHVjayhhcmd1bWVudHMsMCk7by5zZXQodCl9KX19LGNsZWFyRXJyb3I6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06Y2xlYXItZXJyb3I6Iit0aGlzLm9wdGlvbnMubmFtZSl9LGFkZEZpbGVEYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXUodCk7ZSYmdGhpcy5jb2xsZWN0aW9uLmFkZChlKX0sc2hvd0Vycm9yOmZ1bmN0aW9uKHQpe2lmKHRoaXMuY2xlYXJFcnJvcigpLCF0fHwwIT09dC5zdGF0dXN8fCJhYm9ydCIhPXQuc3RhdHVzVGV4dCl7dmFyIG47aWYoZS5pc1N0cmluZyh0KSluPXQ7ZWxzZXt2YXIgaT1vLnBhcnNlRXJyb3JzKHQpO2lmKGkubGVuZ3RoKW49aS5qb2luKCIuICIpO2Vsc2V7dmFyIHI9by5nZXRSZXNwb25zZUpTT04odCk7bj1yJiZyLmVycm9yU3VtbWFyeXx8cy5sb2NhbGl6ZSgib2Zvcm0uZmlsZS51cGxvYWQuZXJyb3IiLCJjb3VyYWdlIil9fXZhciBhPXt9O2FbdGhpcy5vcHRpb25zLm5hbWVdPW4sdGhpcy5tb2RlbC50cmlnZ2VyKCJpbnZhbGlkIix0aGlzLm1vZGVsLGEsITEpfX0sZWRpdE1vZGU6ZnVuY3Rpb24oKXt0aGlzLnByZXZpZXdGcm9tTW9kZWwoKSx0aGlzLmZpbGVVcGxvYWRJbnB1dC50b2dnbGUoITApfSxyZWFkTW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRNb2RlKCl9LHZhbDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY29sbGVjdGlvbi5wbHVjayh0aGlzLmdldFBhcmFtT3JBdHRyaWJ1dGUoImlkQXR0cmlidXRlIikpO3JldHVybiB0aGlzLmdldFBhcmFtKCJtdWx0aSIpP3Q6dFswXX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmZpbGVVcGxvYWRJbnB1dC5mb2N1cygpfSx2YWxpZGF0ZTplLm5vb3B9LHtwYXJzZUpTT046dX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDUwMCldLHI9ZnVuY3Rpb24odCxlKXt2YXIgbj0vXihbXFNdKylcOiAoLispJC87cmV0dXJue2dldFJlc3BvbnNlSlNPTjpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIHQucmVzcG9uc2VKU09OfHxKU09OLnBhcnNlKHQucmVzcG9uc2VUZXh0KX1jYXRjaChlKXtyZXR1cm59fSxwYXJzZUVycm9yU3VtbWFyeTpmdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKG4pO2lmKGUpcmV0dXJuW2VbMV0sZVsyXV19LHBhcnNlRXJyb3JDYXVzZU9iamVjdDpmdW5jdGlvbih0KXtpZih0LnByb3BlcnR5JiZ0LmVycm9yU3VtbWFyeSl7dmFyIG49ZS5sb2NhbGl6ZSh0LnJlYXNvbiksaT10LmVycm9yU3VtbWFyeSxyPXQucHJvcGVydHksbz1uLmluZGV4T2YoIkwxME5fRVJST1JbIik9PT0tMT9uOmk7cmV0dXJuW3Isb119fSxwYXJzZUVycm9yczpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmdldFJlc3BvbnNlSlNPTihlKTtyZXR1cm4gdC5tYXAoaSYmaS5lcnJvckNhdXNlc3x8W10sZnVuY3Rpb24odCl7cmV0dXJuKCIiK3QuZXJyb3JTdW1tYXJ5KS5yZXBsYWNlKG4sIiQyIil9KX0scGFyc2VGaWVsZEVycm9yczpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmdldFJlc3BvbnNlSlNPTihlKSxpPXt9O3JldHVybiBuP3QuZWFjaChuLmVycm9yQ2F1c2VzfHxbXSxmdW5jdGlvbih0KXt2YXIgZT1bXTtpZihlPXQucHJvcGVydHkmJnQuZXJyb3JTdW1tYXJ5P3RoaXMucGFyc2VFcnJvckNhdXNlT2JqZWN0KHQpOnRoaXMucGFyc2VFcnJvclN1bW1hcnkodCYmdC5lcnJvclN1bW1hcnl8fCIiKSl7dmFyIG49ZVswXSxyPWVbMV07aVtuXXx8KGlbbl09W10pLGlbbl0ucHVzaChyKX19LHRoaXMpOnQuaXNPYmplY3QoZSkmJnQuc2l6ZShlKSYmdC5lYWNoKGUsZnVuY3Rpb24odCxlKXtpW2VdPVt0XX0pLHQuc2l6ZShpKT9pOnZvaWQgMH19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMxKSxuKDMyOCksbig0NzApLG4oNDY0KSxuKDUwMCldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXtmdW5jdGlvbiBvKHQpe3JldHVybih0fHxbXSkuam9pbigiLCIpfXJldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJmaWxlLXVwbG9hZC13cmFwIix0ZW1wbGF0ZTonXHQgICAgICA8c3BhbiBjbGFzcz0iZmlsZS11cGxvYWQtcHJvZ3Jlc3MtaW5kaWNhdG9yLXdyYXAgaW5wdXQtZml4IG8tZm9ybS1jb250cm9sIGhpZGUiPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iZmlsZS11cGxvYWQtcHJvZ3Jlc3MtaW5kaWNhdG9yIj48L3NwYW4+XHQgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtdXBsb2FkLWNhbmNlbCBmaWxlLXVwbG9hZC11cGxvYWRpbmciPjwvZGl2Plx0ICAgICAgPC9zcGFuPlx0ICAgICAgPGRpdiBjbGFzcz0iZmFjYWRlIj5cdCAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmaWxlLW5hbWUtdGV4dC1maWVsZCIgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSIgXHQgICAgICAgICAgICAgICB0aXRsZT0ie3ticm93c2VGaWxlc1RpdGxlfX0iIHJlYWRvbmx5Plx0ICAgICAgICA8YSB0aXRsZT0ie3ticm93c2VGaWxlc1RpdGxlfX0iIGNsYXNzPSJicm93c2UtZmlsZS1idXR0b24gbGluay1idXR0b24iIGhyZWY9IiMiPnt7YnJvd3NlRmlsZXNUaXRsZX19PC9hPlx0ICAgICAgPC9kaXY+XHQgICAgICA8ZGl2IGNsYXNzPSJvLWZvcm0tZXhwbGFpbiBoaWRlIj48L2Rpdj5cdCAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBjbGFzcz0ibS1maWxlIGhpZGUie3sjaWYgYWNjZXB0fX0gYWNjZXB0PSJ7e2FjY2VwdH19Int7L2lmfX1cdCAgICAgICAgICAgICB7eyNpZiBtdWx0aXBsZX19IG11bHRpcGxlPSJtdWx0aXBsZSJ7ey9pZn19Plx0ICAgICcsZXZlbnRzOnsiY2xpY2sgLmZpbGUtdXBsb2FkLWNhbmNlbCI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5hYm9ydFJlcXVlc3QoKSx0aGlzLnJlbmRlcigpfSwiY2xpY2sgLmZhY2FkZSI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5icm93c2VGaWxlcygpfSwiY2hhbmdlIC5tLWZpbGUiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMubWFrZVJlcXVlc3QodC50YXJnZXQuZmlsZXMpfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe2UuYmluZEFsbCh0aGlzLCJvblByb2dyZXNzIiwib25Qcm9ncmVzc0NvbXBsZXRlIiksdGhpcy5vblN1Y2Nlc3M9ZS5kZWJvdW5jZSh0aGlzLm9uU3VjY2VzcywxZTMpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlOl9fZWRpdF9fIix0aGlzLnJlbmRlcil9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybnticm93c2VGaWxlc1RpdGxlOnIubG9jYWxpemUoIm9mb3JtLmJyb3dzZS5maWxlcyIsImNvdXJhZ2UiKSxhY2NlcHQ6byh0aGlzLm9wdGlvbnMuZmlsZVR5cGVzKSxtdWx0aXBsZTp0aGlzLm9wdGlvbnMubXVsdGkscGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyfX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuZGVsZWdhdGVFdmVudHMoKX0sYnJvd3NlRmlsZXM6ZnVuY3Rpb24oKXt0aGlzLiQoIi5tLWZpbGUiKS52YWwoIiIpLmNsaWNrKCksZS5kZWxheShmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigiY2xlYXIiKX0uYmluZCh0aGlzKSwyZTMpfSxzZXRDb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe3RoaXMuY29sbGVjdGlvbj10aGlzLm9wdGlvbnMuY29sbGVjdGlvbj10LHRoaXMubGlzdGVuVG8odCwidXBkYXRlIixmdW5jdGlvbigpe3RoaXMudG9nZ2xlKDA9PT10Lmxlbmd0aCl9KX0sc2V0RmlsZU5hbWU6ZnVuY3Rpb24odCl7dGhpcy4kKCIuZmlsZS1uYW1lLXRleHQtZmllbGQiKS52YWwodHx8IiIpLHRoaXMuJCgiLmZpbGUtdXBsb2FkLXByb2dyZXNzLWluZGljYXRvciIpLmh0bWwodHx8IiIpfSxzdGFydFVwbG9hZGluZzpmdW5jdGlvbih0KXt0aGlzLiQoIi5maWxlLXVwbG9hZC1wcm9ncmVzcy1pbmRpY2F0b3Itd3JhcCIpLnJlbW92ZUNsYXNzKCJoaWRlIiksdGhpcy4kKCIuZmlsZS11cGxvYWQtcHJvZ3Jlc3MtaW5kaWNhdG9yIikuY3NzKCJ3aWR0aCIsIjBweCIpLHRoaXMuJCgiLmZhY2FkZSIpLmhpZGUoKSx0aGlzLiQoIi5maWxlLXVwbG9hZC1jYW5jZWwiKS5zaG93KCksdGhpcy5zZXRGaWxlTmFtZSh0KX0sbWFrZVJlcXVlc3Q6ZnVuY3Rpb24odCl7aWYoMD09PXQubGVuZ3RoKXJldHVybiB2b2lkIGkud2FybigiTm8gZmlsZXMgaGF2ZSBiZWVuIHNlbGVjdGVkLiIpO3ZhciBuPWUucGx1Y2sodCwibmFtZSIpLmpvaW4oIiwgIiksbz10aGlzLmdldE1heEl0ZW1zKCk7cmV0dXJuIHQubGVuZ3RoK3RoaXMuY29sbGVjdGlvbi5sZW5ndGg+bz92b2lkIHRoaXMudHJpZ2dlcigiZXJyb3IiLHIubG9jYWxpemUoIm9mb3JtLmZpbGUudXBsb2FkLnRvby5tYW55LmZpbGVzIiwiY291cmFnZSIsW29dKSk6KHRoaXMudHJpZ2dlcigiY2xlYXIiKSx0aGlzLnN0YXJ0VXBsb2FkaW5nKG4pLHZvaWQgdGhpcy5zZW5kVXBsb2FkUmVxdWVzdCh0KS5kb25lKGUuYmluZCh0aGlzLm9uU3VjY2Vzcyx0aGlzKSkuZmFpbChlLmJpbmQodGhpcy5vbkZhaWx1cmUsdGhpcykpKX0sc2VuZFVwbG9hZFJlcXVlc3Q6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPW5ldyBGb3JtRGF0YSxvPXRoaXMub3B0aW9ucy5maWxlRmllbGROYW1lO2UuZWFjaChuLGZ1bmN0aW9uKHQpe3IuYXBwZW5kKG8sdCl9KSxyLmFwcGVuZCgiX3hzcmZUb2tlbiIsdCgiI194c3JmVG9rZW4iKS50ZXh0KCkpO3ZhciBzPXt1cmw6dGhpcy5vcHRpb25zLmVuZHBvaW50LG1ldGhvZDoiUE9TVCIsZGF0YTpyLHhocjpmdW5jdGlvbiBhKCl7dmFyIGE9dC5hamF4U2V0dGluZ3MueGhyKCk7cmV0dXJuIGEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixpLm9uUHJvZ3Jlc3MsITEpLGEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGkub25Qcm9ncmVzc0NvbXBsZXRlLCExKSxhfSxwcm9jZXNzRGF0YTohMSxjb250ZW50VHlwZTohMX07cmV0dXJuIHRoaXMuX3hocj10LmFqYXgocyksdGhpcy5feGhyfSxhYm9ydFJlcXVlc3Q6ZnVuY3Rpb24oKXtpLndhcm4oIlVwbG9hZCBhYm9ydGVkLi4uIiksdGhpcy5feGhyJiZ0aGlzLl94aHIuYWJvcnQoKX0sb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZih0Lmxlbmd0aENvbXB1dGFibGUpe3ZhciBlPU1hdGgucm91bmQoMTAwKnQubG9hZGVkL3QudG90YWwpO3JldHVybiBpLmluZm8oIlVwbG9hZCBpbiBwcm9ncmVzcy4uLiIsZSsiJSIpLHRoaXMuJCgiLmZpbGUtdXBsb2FkLXByb2dyZXNzLWluZGljYXRvciIpLmNzcygid2lkdGgiLGUrIiUiKSxlfX0sb25Qcm9ncmVzc0NvbXBsZXRlOmZ1bmN0aW9uKCl7aS5pbmZvKCJVcGxvYWQgY29tcGxldGUsIHByb2Nlc3NpbmcuLi4iKSx0aGlzLiQoIi5maWxlLXVwbG9hZC1jYW5jZWwiKS5mYWRlT3V0KCl9LG9uU3VjY2VzczpmdW5jdGlvbih0KXtpLmluZm8oIlVwbG9hZCBwcm9jZXNzaW5nIGNvbXBsZXRlLi4uIiksdGhpcy4kKCIuZmlsZS11cGxvYWQtcHJvZ3Jlc3MtaW5kaWNhdG9yLXdyYXAiKS5hZGRDbGFzcygiaGlkZSIpLHRoaXMudG9nZ2xlKCExKSx0aGlzLnRyaWdnZXIoInN1Y2Nlc3MiLHQpfSxvbkZhaWx1cmU6ZnVuY3Rpb24odCl7aS53YXJuKCJVcGxvYWQgZmFpbGVkLi4uIiksdGhpcy5zZXRGaWxlTmFtZSgpLHRoaXMuJCgiLmZpbGUtdXBsb2FkLXByb2dyZXNzLWluZGljYXRvci13cmFwIikuYWRkQ2xhc3MoImhpZGUiKSx0aGlzLiQoIi5mYWNhZGUiKS5zaG93KCksdGhpcy50b2dnbGUoITApLHRoaXMudHJpZ2dlcigiZXJyb3IiLHQpfSx0b2dnbGU6ZnVuY3Rpb24odCl7dGhpcy4kZWwuYWRkQ2xhc3MoImhpZGUiKTt2YXIgZT10O3JldHVybiB0aGlzLm9wdGlvbnMubXVsdGk/ZT10aGlzLmNvbGxlY3Rpb24ubGVuZ3RoPHRoaXMuZ2V0TWF4SXRlbXMoKTp0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoPjAmJihlPSExKSxlJiZ0aGlzLnJlbmRlcigpLiRlbC5yZW1vdmVDbGFzcygiaGlkZSIpLGV9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy4kKCIuZmFjYWRlIikuZm9jdXMoKX0sZ2V0TWF4SXRlbXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1vZGVsLmdldFByb3BlcnR5U2NoZW1hKHRoaXMub3B0aW9ucy5uYW1lKXx8e307cmV0dXJuIHQubWF4SXRlbXN8fDEvMH19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzApLG4oNTE2KSxuKDQ3MSksbig1MTQpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7ZnVuY3Rpb24gbyhuKXtmdW5jdGlvbiBvKGUpe3ZhciBpPShuLnBhcmFtcyYmbi5wYXJhbXMucGFyc2V8fHQuaWRlbnRpdHkpLmNhbGwobnVsbCxlKTtyZXR1cm4obi5wYXJzZXx8dC5pZGVudGl0eSkuY2FsbChudWxsLGkpfXJldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJmaWxlLXVwbG9hZC1wcmV2aWV3IixldmVudHM6eyJjbGljayAuZmlsZS11cGxvYWQtY2FuY2VsIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmNvbGxlY3Rpb24ucmVtb3ZlKHRoaXMubW9kZWwpfSwiY2xpY2sgLmZpbGUtZG93bmxvYWQiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuZG93bmxvYWRGaWxlKCl9fSxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMubW9kZWwudG9KU09OKCkpLGk9W3Qub21pdChlLCJjaGFpbiIpXS5jb25jYXQoKGUuY2hhaW58fFtdKS5tYXAobykpLHI9dC5wbHVjayhpLCJjZXJ0TmFtZSIpLmpvaW4oIiA+ICIpLHM9Qm9vbGVhbihuLnBhcmFtcyYmbi5wYXJhbXMuZG93bmxvYWRFbmRwb2ludCk7cmV0dXJuIHQuZXh0ZW5kKHt9LGUse2NlcnROYW1lczpyLG5hbWVPckRvd25sb2FkOmUubmFtZXx8cnx8cyxkb3dubG9hZENsYXNzOnM/ImZpbGUtZG93bmxvYWQiOiIiLG11bHRpSXRlbXM6aS5sZW5ndGg+MSxpdGVtczppLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5leHRlbmQoe30sZSx7bXVsdGlJdGVtczppLmxlbmd0aD4xfSl9KX0pfSx0ZW1wbGF0ZTpuLnByZXZpZXdUZW1wbGF0ZSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy4kZWwucHJlcGVuZCgnPGRpdiBjbGFzcz0iZmlsZS11cGxvYWQtY2FuY2VsIj48L2Rpdj4nKSx0aGlzLmRlbGVnYXRlRXZlbnRzKCl9LGRvd25sb2FkRmlsZTpmdW5jdGlvbigpe3ZhciBlPXQucmVzdWx0KG4ucGFyYW1zLCJkb3dubG9hZEVuZHBvaW50Iiksbz10LmlzU3RyaW5nKGUpP2kudHBsKGUpOmU7ci5yZWRpcmVjdChvKHtpZDp0aGlzLm1vZGVsLmlkfSkpfX0pfXJldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJmaWxlLXVwbG9hZC1wcmV2aWV3LXdyYXAiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbT1vKHQpLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMxKSxuKDMyOCksbigzNjEpLG4oNTAwKSxuKDU0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXtyZXR1cm4gci5leHRlbmQoe2NsYXNzTmFtZToiY2VydC1maWxlLXVwbG9hZCIsZXZlbnRzOnsiY2xpY2sgLmNlcnQtZXhwYW5kLWRldGFpbHMiOmZ1bmN0aW9uKGUpe2UmJmUucHJldmVudERlZmF1bHQoKTt2YXIgbj10aGlzLHI9dChlLnRhcmdldCkuc2libGluZ3MoIi5jZXJ0LWRldGFpbHMiKSxvPTc1KnIubGVuZ3RoLHM9ZnVuY3Rpb24oKXtuLm1vZGVsLnRyaWdnZXIoImZvcm06cmVzaXplIil9O3IuaXMoIjpoaWRkZW4iKXx8ci5oYXNDbGFzcygiaGlkZSIpPyhyLnJlbW92ZUNsYXNzKCJoaWRlIikuaGlkZSgpLnNsaWRlRG93bihvLHMpLHQoZS50YXJnZXQpLnRleHQoaS5sb2NhbGl6ZSgib2Zvcm0uY2VydGlmaWNhdGUuaGlkZS5jaGFpbiIsImNvdXJhZ2UiKSkpOihyLnNsaWRlVXAobyxzKSx0KGUudGFyZ2V0KS50ZXh0KGkubG9jYWxpemUoIm9mb3JtLmNlcnRpZmljYXRlLnZpZXcuY2hhaW4iLCJjb3VyYWdlIikpKX19LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBpPWUuY2xvbmUodHx8e30pO2lmKGkubm90QWZ0ZXIpe3ZhciByPW4udXRjKGkubm90QWZ0ZXIpLmRpZmYobi51dGMoKSwiZGF5cyIpO3I+MCYmZS5leHRlbmQoaSx7ZXhwaXJlc0luRGF5czpyfSkscjwxNCYmKGkuZXhwaXJlQ2xhc3M9ImNlcnQtZXhwaXJlZCIpfXJldHVybiBpfSxwcmV2aWV3VGVtcGxhdGU6J1x0ICAgICAgPGRpdiBjbGFzcz0iY2VydC10aHVtYm5haWwiPjxzcGFuIGNsYXNzPSJpY29uIGljb24tMzIgaWNvbi1vbmx5IGZpbGUtY2VydC0zMiI+PC9zcGFuPjwvZGl2Plx0ICAgICAgPHVsIGNsYXNzPSJjZXJ0LWRldGFpbHMtaGVhZGVyIj5cdCAgICAgICAge3sjaWYgbmFtZU9yRG93bmxvYWR9fTxsaSBjbGFzcz0iY2VydC1uYW1lcyB7e2Rvd25sb2FkQ2xhc3N9fSI+XHQgICAgICAgICAge3sjaWYgY2VydE5hbWVzfX17e2NlcnROYW1lc319e3svaWZ9fVx0ICAgICAgICAgIHt7I2lmIGRvd25sb2FkQ2xhc3N9fTxzcGFuIGNsYXNzPSJkb3dubG9hZC1pY29uIGljb24gaWNvbi0xNiBpY29uLW9ubHkgZG93bmxvYWQtMTYiPjwvc3Bhbj57ey9pZn19XHQgICAgICAgIDwvbGk+e3svaWZ9fVx0ICAgICAgICB7eyNpZiB1cGxvYWRlZEJ5fX17eyNpZiB1cGxvYWRlZE9ufX1cdCAgICAgICAgPGxpIGNsYXNzPSJjZXJ0LXVwbG9hZC1pbmZvIj5cdCAgICAgICAgICB7e2kxOG4gY29kZT0ib2Zvcm0uY2VydGlmaWNhdGUudXBsb2FkZWQiIGJ1bmRsZT0iY291cmFnZSIgYXJndW1lbnRzPSJ1cGxvYWRlZEJ5O3VwbG9hZGVkT24ifX0gXHQgICAgICAgIDwvbGk+XHQgICAgICAgIHt7L2lmfX17ey9pZn19XHQgICAgICA8L3VsPlx0ICAgICAge3sjZWFjaCBpdGVtc319XHQgICAgICAgIDx1bCBjbGFzcz0iY2VydC1kZXRhaWxze3sjaWYgbXVsdGlJdGVtc319IGhpZGV7ey9pZn19Ij5cdCAgICAgICAgICB7eyNpZiBtdWx0aUl0ZW1zfX17eyNpZiBjZXJ0TmFtZX19XHQgICAgICAgICAgICA8bGkgY2xhc3M9ImNlcnQtbmFtZSI+e3tjZXJ0TmFtZX19PC9saT5cdCAgICAgICAgICB7ey9pZn19e3svaWZ9fVx0ICAgICAgICAgIHt7I2lmIGlzc3Vlcn19PGxpIGNsYXNzPSJjZXJ0LWlzc3VlciI+e3tpc3N1ZXJ9fTwvbGk+e3svaWZ9fVx0ICAgICAgICAgIHt7I2lmIG5vdEJlZm9yZX19e3sjaWYgbm90QWZ0ZXJ9fVx0ICAgICAgICAgICAgPGxpIGNsYXNzPSJjZXJ0LXZhbGlkLWRhdGUiPlx0ICAgICAgICAgICAgICB7e2kxOG4gY29kZT0ib2Zvcm0uY2VydGlmaWNhdGUudmFsaWQiIGJ1bmRsZT0iY291cmFnZSIgYXJndW1lbnRzPSJub3RCZWZvcmU7bm90QWZ0ZXIifX1cdCAgICAgICAgICAgIDwvbGk+XHQgICAgICAgICAge3svaWZ9fXt7L2lmfX1cdCAgICAgICAgICA8bGkgY2xhc3M9ImNlcnQtZXhwaXJhdGlvbiB7e2V4cGlyZUNsYXNzfX0iPlx0ICAgICAgICAgICAge3sjaWYgZXhwaXJlc0luRGF5c319XHQgICAgICAgICAgICB7e2kxOG4gY29kZT0ib2Zvcm0uY2VydGlmaWNhdGUuZXhwaXJlcyIgYnVuZGxlPSJjb3VyYWdlIiBhcmd1bWVudHM9ImV4cGlyZXNJbkRheXMifX1cdCAgICAgICAgICAgIHt7ZWxzZX19XHQgICAgICAgICAgICB7e2kxOG4gY29kZT0ib2Zvcm0uY2VydGlmaWNhdGUuZXhwaXJlZCIgYnVuZGxlPSJjb3VyYWdlIn19XHQgICAgICAgICAgICB7ey9pZn19XHQgICAgICAgICAgPC9saT5cdCAgICAgICAgPC91bD5cdCAgICAgIHt7L2VhY2h9fVx0ICAgICAge3sjaWYgbXVsdGlJdGVtc319XHQgICAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJjZXJ0LWV4cGFuZC1kZXRhaWxzIj57e2kxOG4gY29kZT0ib2Zvcm0uY2VydGlmaWNhdGUudmlldy5jaGFpbiIgYnVuZGxlPSJjb3VyYWdlIn19PC9hPlx0ICAgICAge3svaWZ9fVx0ICAgICAgJyxmaWxlVHlwZXM6WyIuY3J0IiwiLnBlbSJdfSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNTU0KV0scj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmV4dGVuZCh7Z2V0U2VsZWN0aXplT3B0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2RlbFZhbHVlKCksbj10aGlzLnNlbGVjdE9wdGlvbnMsaT10LmlzQXJyYXkoZSk/ZTpbXSxyPXRoaXMuY2FuQ3JlYXRlVmFsdWUoKTtpZihyKXt2YXIgbz10aGlzLl9fZ2V0T3B0aW9uc0ZvckNyZWF0ZWRJdGVtcyhpKTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShuLG8pfXJldHVybntvcHRpb25zOm4sY3JlYXRlOnIsaXRlbXM6aSxtYXhJdGVtczpudWxsLHBsdWdpbnM6WyJyZW1vdmVfYnV0dG9uIl0sb25JdGVtUmVtb3ZlOmZ1bmN0aW9uKCl7dC5kZWZlcih0aGlzLmNsb3NlLmJpbmQodGhpcykpfSxjbG9zZUFmdGVyU2VsZWN0OiExLG9wZW5PbkZvY3VzOiEwLG9uRHJvcGRvd25PcGVuOnRoaXMuaGFuZGxlRm9vdGVyLmJpbmQodGhpcyksb25JdGVtQWRkOnRoaXMuaGFuZGxlRm9vdGVyLmJpbmQodGhpcyksY3JlYXRlRmlsdGVyOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiExO3ZhciBpPXQuZmluZChuLGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleT09PWV9KTtyZXR1cm4haX19fSxjYW5DcmVhdGVWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0UGFyYW0oImNyZWF0ZSIpO3JldHVybiB0LmlzRnVuY3Rpb24oZSkmJihlPWUuY2FsbCh0aGlzKSksZX0sdG9TdHJpbmdWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kZWxWYWx1ZSgpLG49dC5pc0FycmF5KGUpP2U6W2VdO3JldHVybiBuPXQubWFwKG4sZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uU3RyaW5nKHQpfHx0fSx0aGlzKSxuLmpvaW4oIiwgIil8fHRoaXMuZGVmYXVsdFZhbHVlKCl9LF9fZ2V0T3B0aW9uc0ZvckNyZWF0ZWRJdGVtczpmdW5jdGlvbihlKXt2YXIgbj10aGlzLm9wdGlvbnMub3B0aW9ucyxpPXRoaXMub3B0R3JvdXBzLmxlbmd0aD4wLHI9dGhpcy5vcHRpb25zLnNlbGVjdE9wdGlvbnM7cmV0dXJuIHQucmVkdWNlKGUsZnVuY3Rpb24oZSxvKXt2YXIgcz1uW29dO3JldHVybiFzJiZpJiYocz10LmZpbmQocixmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXk9PT1vfSkpLHN8fGUucHVzaCh7a2V5Om8sdmFsdWU6b30pLGV9LFtdKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzEpLG4oNTE0KSxuKDUyNyksbig0NjYpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWUudHBsKCdcdCAgICA8cCBjbGFzcz0iZHJvcGRvd24tZm9vdGVyIj57e2kxOG4gY29kZT0ib2Zvcm0uc2VsZWN0LmRyb3Bkb3duLmZvb3RlciIgYnVuZGxlPSJjb3VyYWdlIiBhcmd1bWVudHM9Im51bSJ9fTwvcD5cdCAgJyksbz1lLnRwbCgnXHQgICAgPHAgY2xhc3M9ImRyb3Bkb3duLWZvb3RlciI+e3tpMThuIGNvZGU9Im9mb3JtLmJhc2VzZWxlY3Qubm9yZXN1bHRzIiBidW5kbGU9ImNvdXJhZ2UifX08L3A+XHQgICcpKCk7cmV0dXJuIGkuZXh0ZW5kKHtnZXRTZWxlY3RpemVPcHRpb246bi5jb25zdGFudEVycm9yKCJnZXRTZWxlY3RpemVPcHRpb24gaXMgYW4gYWJzdHJhY3QgdmFyaWFibGUiKSx0ZW1wbGF0ZTplLnRwbCgnPHNlbGVjdCBpZD0ie3tpbnB1dElkfX0iIG5hbWU9Int7bmFtZX19Ij48L3NlbGVjdD4nKSxjbGFzc05hbWU6Im8tZm9ybS1zZWFyY2hhYmxlLXNlbGVjdCIsbWF4T3B0aW9uczoxNTAsZXZlbnRzOnsiY2hhbmdlIHNlbGVjdCI6InVwZGF0ZSJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYoaS5hcHBseSh0aGlzLGFyZ3VtZW50cyksIXQuaXNPYmplY3QodGhpcy5vcHRpb25zLm9wdGlvbnMpKXRocm93IG5ldyBFcnJvcigib3B0aW9ucyBpcyBub3QgcHJvdmlkZWQgd2hlbiBpbml0aWFsaXplcyBTZWFyY2hhYmxlU2VsZWN0Iik7dmFyIGU9dGhpcy5fX2dldE9wdGlvbnModGhpcy5vcHRpb25zLm9wdGlvbnMpO3RoaXMuc2VsZWN0T3B0aW9ucz1lLm9wdGlvbnMsdGhpcy5vcHRHcm91cHM9ZS5ncm91cHMsdGhpcy5fYWRkRm9vdGVyTm90ZT10LmRlYm91bmNlKHRoaXMuX2FkZEZvb3Rlck5vdGUuYmluZCh0aGlzKSwxMDApfSxoYW5kbGVGb290ZXI6ZnVuY3Rpb24oKXt0aGlzLiQoIi5kcm9wZG93bi1mb290ZXIiKS5yZW1vdmUoKSx0aGlzLl9hZGRGb290ZXJOb3RlKCl9LF9hZGRGb290ZXJOb3RlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRQYXJhbU9yQXR0cmlidXRlKCJtYXhPcHRpb25zIiksZT10aGlzLiQoIi5zZWxlY3RpemUtZHJvcGRvd24tY29udGVudCAub3B0aW9uIikubGVuZ3RoO2U9PT10P3RoaXMuJCgiLnNlbGVjdGl6ZS1kcm9wZG93bi1jb250ZW50IikuYXBwZW5kKHIoe251bTp0fSkpOjA9PT1lJiYodGhpcy4kKCIuc2VsZWN0aXplLWRyb3Bkb3duLWNvbnRlbnQiKS5hcHBlbmQobyksdGhpcy4kKCIuc2VsZWN0aXplLWRyb3Bkb3duIikuc2hvdygpKX0sZ2V0RXh0cmFPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRQYXJhbU9yQXR0cmlidXRlKCJtYXhPcHRpb25zIiksbj10aGlzLnNlbGVjdE9wdGlvbnMsaT10aGlzLm9wdEdyb3VwcyxyPXtvcHRpb25zOm4scGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLHByZWxvYWQ6ITAsbWF4T3B0aW9uczplLGxhYmVsRmllbGQ6InZhbHVlIix2YWx1ZUZpZWxkOiJrZXkiLHNlYXJjaEZpZWxkOlsidmFsdWUiXSxvblR5cGU6dGhpcy5oYW5kbGVGb290ZXIuYmluZCh0aGlzKSxvcHRncm91cHM6aSxvcHRncm91cEZpZWxkOiJncm91cCJ9O3JldHVybiB0LmV4dGVuZChyLHRoaXMuZ2V0U2VsZWN0aXplT3B0aW9uKCkpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3JldHVybiBpLnByb3RvdHlwZS5lZGl0TW9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kc2VsZWN0PXRoaXMuJCgic2VsZWN0IiksdGhpcy4kc2VsZWN0LnNlbGVjdGl6ZSh0aGlzLmdldEV4dHJhT3B0aW9ucygpKSx0aGlzfSx2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2VsZWN0JiZ0aGlzLiRzZWxlY3QudmFsKCl9LGZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNlbGVjdCYmdGhpcy4kc2VsZWN0LmZvY3VzKCl9LGdldE9wdGlvblN0cmluZzpmdW5jdGlvbihlKXtpZighdC5zaXplKHRoaXMub3B0R3JvdXBzKSYmdGhpcy5vcHRpb25zLm9wdGlvbnMpcmV0dXJuIHRoaXMub3B0aW9ucy5vcHRpb25zW2VdO3ZhciBuPXQuZmluZCh0aGlzLnNlbGVjdE9wdGlvbnMsZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5PT09ZX0pO3JldHVybiBuP24udmFsdWU6dm9pZCAwfSxfX2dldE9wdGlvbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNGdW5jdGlvbihlKSYmKGU9ZS5jYWxsKHRoaXMpKSx0LnJlZHVjZSh0LmlzT2JqZWN0KGUpP2U6e30sZnVuY3Rpb24oZSxuLGkpe2lmKHQuaXNPYmplY3Qobikpe3ZhciByPWk7ZS5ncm91cHMucHVzaCh7dmFsdWU6cixsYWJlbDpyfSksdC5yZWR1Y2UobixmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQucHVzaCh7a2V5Om4sdmFsdWU6ZSxncm91cDpyfSksdH0sZS5vcHRpb25zKX1lbHNlIGUub3B0aW9ucy5wdXNoKHtrZXk6aSx2YWx1ZTpufSk7cmV0dXJuIGV9LHtvcHRpb25zOltdLGdyb3VwczpbXX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNTU0KV0scj1mdW5jdGlvbih0KXtyZXR1cm4gdC5leHRlbmQoe2dldFNlbGVjdGl6ZU9wdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0TW9kZWxWYWx1ZSgpO3JldHVybntpdGVtczp0P1t0XTpbXSxjcmVhdGU6ITEsbWF4SXRlbXM6MSxvbkRyb3Bkb3duT3Blbjp0aGlzLmhhbmRsZUZvb3Rlci5iaW5kKHRoaXMpfX0sdG9TdHJpbmdWYWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0TW9kZWxWYWx1ZSgpO3JldHVybiB0aGlzLmdldE9wdGlvblN0cmluZyh0KXx8dGhpcy5kZWZhdWx0VmFsdWUoKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzEpLG4oNDcwKSxuKDU1NyldLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJva3RhLWZvcm0tbGFiZWwgby1mb3JtLWxhYmVsIixhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6Im8tZm9ybS1sYWJlbCJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkpe3QuZGVmYXVsdHMoaSx7aW5wdXRJZDppLmlkfSksZGVsZXRlIGkuaWQsbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHI7cj10aGlzLl9pc0xhYmVsVmlldyhpLmxhYmVsKT8nPGxhYmVsIGZvcj0ie3tpbnB1dElkfX0iPjwvbGFiZWw+Jzp0LmNvbnRhaW5zKFsicmFkaW8iLCJjaGVja2JveCJdLGkudHlwZSl8fCFpLmxhYmVsPyJ7e2xhYmVsfX0iOic8bGFiZWwgZm9yPSJ7e2lucHV0SWR9fSI+e3tsYWJlbH19Jm5ic3A7PC9sYWJlbD4nLGkuc3VibGFiZWwmJihyKz0nPHNwYW4gY2xhc3M9Im8tZm9ybS1leHBsYWluIj57e3N1YmxhYmVsfX08L3NwYW4+JyksaS50b29sdGlwJiYodC5pc1N0cmluZyhpLnRvb2x0aXApJiYoaS50b29sdGlwPXt0ZXh0OmkudG9vbHRpcH0pLHIrPSc8c3BhbiBjbGFzcz0iby1mb3JtLXRvb2x0aXAgaWNvbi0xNiBpY29uLW9ubHkgZm9ybS1oZWxwLTE2IiB0aXRsZT0ie3t0b29sdGlwLnRleHR9fSI+PC9zcGFuPicpLHRoaXMudGVtcGxhdGU9ZS50cGwocil9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3ZhciBlPXtsYWJlbDoiIn07cmV0dXJuIHQuZWFjaChbImlucHV0SWQiLCJsYWJlbCIsInN1YmxhYmVsIiwidG9vbHRpcCJdLGZ1bmN0aW9uKG4pe2Vbbl09dC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLG4sdGhpcyl9LHRoaXMpLGV9LF9pc0xhYmVsVmlldzpmdW5jdGlvbihlKXtyZXR1cm4hdC5pc1VuZGVmaW5lZChlKSYmZSBpbnN0YW5jZW9mIG59LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFRlbXBsYXRlRGF0YSgpO3RoaXMuX2lzTGFiZWxWaWV3KGUubGFiZWwpJiYodGhpcy5yZW1vdmVDaGlsZHJlbigpLHRoaXMuYWRkKGUubGFiZWwsImxhYmVsIikpLGUudG9vbHRpcCYmdGhpcy4kKCIuby1mb3JtLXRvb2x0aXAiKS5xdGlwKHQuZXh0ZW5kKHtzdHlsZTp7Y2xhc3NlczoicXRpcC1jdXN0b20gcXRpcC1zaGFkb3cifSxwb3NpdGlvbjp7bXk6ImJvdHRvbSBsZWZ0IixhdDoidG9wIGNlbnRlciJ9LGhpZGU6e2ZpeGVkOiEwfSxzaG93OntkZWxheTowfX0sZS50b29sdGlwLm9wdGlvbnMpKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHM9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9Oy8qCgkJICogcVRpcDIgLSBQcmV0dHkgcG93ZXJmdWwgdG9vbHRpcHMgLSB2My4wLjMtNS1nCgkJICogaHR0cDovL3F0aXAyLmNvbQoJCSAqCgkJICogQ29weXJpZ2h0IChjKSAyMDE3IAoJCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZXMKCQkgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCgkJICoKCQkgKiBEYXRlOiBXZWQgTWF5IDI0IDIwMTcgMDE6MjIgVVRDKzAwMDAKCQkgKiBQbHVnaW5zOiB0aXBzIG1vZGFsIHZpZXdwb3J0IHN2ZyBpbWFnZW1hcCBpZTYKCQkgKiBTdHlsZXM6IGNvcmUgYmFzaWMgY3NzMwoJCSAqLwoJIWZ1bmN0aW9uKGEsbCxjKXshZnVuY3Rpb24ocyl7InVzZSBzdHJpY3QiO3I9W24oMzMyKV0saT1zLG89ImZ1bmN0aW9uIj09dHlwZW9mIGk/aS5hcHBseShlLHIpOmksIShvIT09YyYmKHQuZXhwb3J0cz1vKSl9KGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsbixpLHIpe3RoaXMuaWQ9aSx0aGlzLnRhcmdldD1lLHRoaXMudG9vbHRpcD1ZLHRoaXMuZWxlbWVudHM9e3RhcmdldDplfSx0aGlzLl9pZD1WKyItIitpLHRoaXMudGltZXJzPXtpbWc6e319LHRoaXMub3B0aW9ucz1uLHRoaXMucGx1Z2lucz17fSx0aGlzLmNhY2hlPXtldmVudDp7fSx0YXJnZXQ6dCgpLGRpc2FibGVkOkMsYXR0cjpyLG9uVG9vbHRpcDpDLGxhc3RDbGFzczoiIn0sdGhpcy5yZW5kZXJlZD10aGlzLmRlc3Ryb3llZD10aGlzLmRpc2FibGVkPXRoaXMud2FpdGluZz10aGlzLmhpZGRlbkR1cmluZ1dhaXQ9dGhpcy5wb3NpdGlvbmluZz10aGlzLnRyaWdnZXJpbmc9Q31mdW5jdGlvbiBuKGUpe3JldHVybiBlPT09WXx8Im9iamVjdCIhPT10LnR5cGUoZSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4hKHQuaXNGdW5jdGlvbihlKXx8ZSYmZS5hdHRyfHxlLmxlbmd0aHx8Im9iamVjdCI9PT10LnR5cGUoZSkmJihlLmpxdWVyeXx8ZS50aGVuKSl9ZnVuY3Rpb24gcihlKXt2YXIgcixvLHMsYTtyZXR1cm4gbihlKT9DOihuKGUubWV0YWRhdGEpJiYoZS5tZXRhZGF0YT17dHlwZTplLm1ldGFkYXRhfSksImNvbnRlbnQiaW4gZSYmKHI9ZS5jb250ZW50LG4ocil8fHIuanF1ZXJ5fHxyLmRvbmU/KG89aShyKT9DOnIscj1lLmNvbnRlbnQ9e3RleHQ6b30pOm89ci50ZXh0LCJhamF4ImluIHImJihzPXIuYWpheCxhPXMmJnMub25jZSE9PUMsZGVsZXRlIHIuYWpheCxyLnRleHQ9ZnVuY3Rpb24oZSxuKXt2YXIgaT1vfHx0KHRoaXMpLmF0dHIobi5vcHRpb25zLmNvbnRlbnQuYXR0cil8fCJMb2FkaW5nLi4uIixyPXQuYWpheCh0LmV4dGVuZCh7fSxzLHtjb250ZXh0Om59KSkudGhlbihzLnN1Y2Nlc3MsWSxzLmVycm9yKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZhJiZuLnNldCgiY29udGVudC50ZXh0Iix0KSx0fSxmdW5jdGlvbih0LGUsaSl7bi5kZXN0cm95ZWR8fDA9PT10LnN0YXR1c3x8bi5zZXQoImNvbnRlbnQudGV4dCIsZSsiOiAiK2kpfSk7cmV0dXJuIGE/aToobi5zZXQoImNvbnRlbnQudGV4dCIsaSkscil9KSwidGl0bGUiaW4gciYmKHQuaXNQbGFpbk9iamVjdChyLnRpdGxlKSYmKHIuYnV0dG9uPXIudGl0bGUuYnV0dG9uLHIudGl0bGU9ci50aXRsZS50ZXh0KSxpKHIudGl0bGV8fEMpJiYoci50aXRsZT1DKSkpLCJwb3NpdGlvbiJpbiBlJiZuKGUucG9zaXRpb24pJiYoZS5wb3NpdGlvbj17bXk6ZS5wb3NpdGlvbixhdDplLnBvc2l0aW9ufSksInNob3ciaW4gZSYmbihlLnNob3cpJiYoZS5zaG93PWUuc2hvdy5qcXVlcnk/e3RhcmdldDplLnNob3d9OmUuc2hvdz09PUQ/e3JlYWR5OkR9OntldmVudDplLnNob3d9KSwiaGlkZSJpbiBlJiZuKGUuaGlkZSkmJihlLmhpZGU9ZS5oaWRlLmpxdWVyeT97dGFyZ2V0OmUuaGlkZX06e2V2ZW50OmUuaGlkZX0pLCJzdHlsZSJpbiBlJiZuKGUuc3R5bGUpJiYoZS5zdHlsZT17Y2xhc3NlczplLnN0eWxlfSksdC5lYWNoKEIsZnVuY3Rpb24oKXt0aGlzLnNhbml0aXplJiZ0aGlzLnNhbml0aXplKGUpfSksZSl9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbixpPTAscj10LG89ZS5zcGxpdCgiLiIpO3I9cltvW2krK11dOylpPG8ubGVuZ3RoJiYobj1yKTtyZXR1cm5bbnx8dCxvLnBvcCgpXX1mdW5jdGlvbiB1KHQsZSl7dmFyIG4saSxyO2ZvcihuIGluIHRoaXMuY2hlY2tzKWlmKHRoaXMuY2hlY2tzLmhhc093blByb3BlcnR5KG4pKWZvcihpIGluIHRoaXMuY2hlY2tzW25dKXRoaXMuY2hlY2tzW25dLmhhc093blByb3BlcnR5KGkpJiYocj1uZXcgUmVnRXhwKGksImkiKS5leGVjKHQpKSYmKGUucHVzaChyKSwoImJ1aWx0aW4iPT09bnx8dGhpcy5wbHVnaW5zW25dKSYmdGhpcy5jaGVja3Nbbl1baV0uYXBwbHkodGhpcy5wbHVnaW5zW25dfHx0aGlzLGUpKX1mdW5jdGlvbiBkKHQpe3JldHVybiBHLmNvbmNhdCgiIikuam9pbih0PyItIit0KyIgIjoiICIpfWZ1bmN0aW9uIGgoZSxuKXtyZXR1cm4gbj4wP3NldFRpbWVvdXQodC5wcm94eShlLHRoaXMpLG4pOnZvaWQgZS5jYWxsKHRoaXMpfWZ1bmN0aW9uIHAodCl7dGhpcy50b29sdGlwLmhhc0NsYXNzKGV0KXx8KGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zaG93KSxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaGlkZSksdGhpcy50aW1lcnMuc2hvdz1oLmNhbGwodGhpcyxmdW5jdGlvbigpe3RoaXMudG9nZ2xlKEQsdCl9LHRoaXMub3B0aW9ucy5zaG93LmRlbGF5KSl9ZnVuY3Rpb24gZihlKXtpZighdGhpcy50b29sdGlwLmhhc0NsYXNzKGV0KSYmIXRoaXMuZGVzdHJveWVkKXt2YXIgbj10KGUucmVsYXRlZFRhcmdldCksaT1uLmNsb3Nlc3QoSylbMF09PT10aGlzLnRvb2x0aXBbMF0scj1uWzBdPT09dGhpcy5vcHRpb25zLnNob3cudGFyZ2V0WzBdO2lmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zaG93KSxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaGlkZSksdGhpcyE9PW5bMF0mJiJtb3VzZSI9PT10aGlzLm9wdGlvbnMucG9zaXRpb24udGFyZ2V0JiZpfHx0aGlzLm9wdGlvbnMuaGlkZS5maXhlZCYmL21vdXNlKG91dHxsZWF2ZXxtb3ZlKS8udGVzdChlLnR5cGUpJiYoaXx8cikpdHJ5e2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfWNhdGNoKG8pe31lbHNlIHRoaXMudGltZXJzLmhpZGU9aC5jYWxsKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZShDLGUpfSx0aGlzLm9wdGlvbnMuaGlkZS5kZWxheSx0aGlzKX19ZnVuY3Rpb24gbSh0KXshdGhpcy50b29sdGlwLmhhc0NsYXNzKGV0KSYmdGhpcy5vcHRpb25zLmhpZGUuaW5hY3RpdmUmJihjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaW5hY3RpdmUpLHRoaXMudGltZXJzLmluYWN0aXZlPWguY2FsbCh0aGlzLGZ1bmN0aW9uKCl7dGhpcy5oaWRlKHQpfSx0aGlzLm9wdGlvbnMuaGlkZS5pbmFjdGl2ZSkpfWZ1bmN0aW9uIF8odCl7dGhpcy5yZW5kZXJlZCYmdGhpcy50b29sdGlwWzBdLm9mZnNldFdpZHRoPjAmJnRoaXMucmVwb3NpdGlvbih0KX1mdW5jdGlvbiBnKGUsbixpKXt0KGwuYm9keSkuZGVsZWdhdGUoZSwobi5zcGxpdD9uOm4uam9pbigiLiIrVisiICIpKSsiLiIrVixmdW5jdGlvbigpe3ZhciBlPWsuYXBpW3QuYXR0cih0aGlzLCQpXTtlJiYhZS5kaXNhYmxlZCYmaS5hcHBseShlLGFyZ3VtZW50cyl9KX1mdW5jdGlvbiB2KG4saSxvKXt2YXIgYSxjLHUsZCxoLHA9dChsLmJvZHkpLGY9blswXT09PWw/cDpuLG09bi5tZXRhZGF0YT9uLm1ldGFkYXRhKG8ubWV0YWRhdGEpOlksXz0iaHRtbDUiPT09by5tZXRhZGF0YS50eXBlJiZtP21bby5tZXRhZGF0YS5uYW1lXTpZLGc9bi5kYXRhKG8ubWV0YWRhdGEubmFtZXx8InF0aXBvcHRzIik7dHJ5e2c9InN0cmluZyI9PXR5cGVvZiBnP3QucGFyc2VKU09OKGcpOmd9Y2F0Y2godil7fWlmKGQ9dC5leHRlbmQoRCx7fSxrLmRlZmF1bHRzLG8sIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBnPyJ1bmRlZmluZWQiOnMoZykpP3IoZyk6WSxyKF98fG0pKSxjPWQucG9zaXRpb24sZC5pZD1pLCJib29sZWFuIj09dHlwZW9mIGQuY29udGVudC50ZXh0KXtpZih1PW4uYXR0cihkLmNvbnRlbnQuYXR0ciksZC5jb250ZW50LmF0dHI9PT1DfHwhdSlyZXR1cm4gQztkLmNvbnRlbnQudGV4dD11fWlmKGMuY29udGFpbmVyLmxlbmd0aHx8KGMuY29udGFpbmVyPXApLGMudGFyZ2V0PT09QyYmKGMudGFyZ2V0PWYpLGQuc2hvdy50YXJnZXQ9PT1DJiYoZC5zaG93LnRhcmdldD1mKSxkLnNob3cuc29sbz09PUQmJihkLnNob3cuc29sbz1jLmNvbnRhaW5lci5jbG9zZXN0KCJib2R5IikpLGQuaGlkZS50YXJnZXQ9PT1DJiYoZC5oaWRlLnRhcmdldD1mKSxkLnBvc2l0aW9uLnZpZXdwb3J0PT09RCYmKGQucG9zaXRpb24udmlld3BvcnQ9Yy5jb250YWluZXIpLGMuY29udGFpbmVyPWMuY29udGFpbmVyLmVxKDApLGMuYXQ9bmV3IHgoYy5hdCxEKSxjLm15PW5ldyB4KGMubXkpLG4uZGF0YShWKSlpZihkLm92ZXJ3cml0ZSluLnF0aXAoImRlc3Ryb3kiLCEwKTtlbHNlIGlmKGQub3ZlcndyaXRlPT09QylyZXR1cm4gQztyZXR1cm4gbi5hdHRyKHEsaSksZC5zdXBwcmVzcyYmKGg9bi5hdHRyKCJ0aXRsZSIpKSYmbi5yZW1vdmVBdHRyKCJ0aXRsZSIpLmF0dHIoaXQsaCkuYXR0cigidGl0bGUiLCIiKSxhPW5ldyBlKG4sZCxpLCghIXUpKSxuLmRhdGEoVixhKSxhfWZ1bmN0aW9uIHkodCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX1mdW5jdGlvbiBiKHQsZSl7dmFyIG4saSxyPWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxvPShlKyIgIitNdC5qb2luKHIrIiAiKStyKS5zcGxpdCgiICIpLHM9MDtpZih3dFtlXSlyZXR1cm4gdC5jc3Mod3RbZV0pO2Zvcig7bj1vW3MrK107KWlmKChpPXQuY3NzKG4pKSE9PWMpcmV0dXJuIHd0W2VdPW4saX1mdW5jdGlvbiB3KHQsZSl7cmV0dXJuIE1hdGguY2VpbChwYXJzZUZsb2F0KGIodCxlKSkpfWZ1bmN0aW9uIE0odCxlKXt0aGlzLl9ucz0idGlwIix0aGlzLm9wdGlvbnM9ZSx0aGlzLm9mZnNldD1lLm9mZnNldCx0aGlzLnNpemU9W2Uud2lkdGgsZS5oZWlnaHRdLHRoaXMucXRpcD10LHRoaXMuaW5pdCh0KX1mdW5jdGlvbiBTKHQsZSl7dGhpcy5vcHRpb25zPWUsdGhpcy5fbnM9Ii1tb2RhbCIsdGhpcy5xdGlwPXQsdGhpcy5pbml0KHQpfWZ1bmN0aW9uIFQodCl7dGhpcy5fbnM9ImllNiIsdGhpcy5xdGlwPXQsdGhpcy5pbml0KHQpfXZhciBrLEwseCxBLEUsRD0hMCxDPSExLFk9bnVsbCxPPSJ4IixQPSJ5IixOPSJ3aWR0aCIsST0iaGVpZ2h0IixSPSJ0b3AiLGo9ImxlZnQiLEg9ImJvdHRvbSIsRj0icmlnaHQiLHo9ImNlbnRlciIsVT0iZmxpcGludmVydCIsVz0ic2hpZnQiLEI9e30sVj0icXRpcCIscT0iZGF0YS1oYXNxdGlwIiwkPSJkYXRhLXF0aXAtaWQiLEc9WyJ1aS13aWRnZXQiLCJ1aS10b29sdGlwIl0sSz0iLiIrVixKPSJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VsZWF2ZSBtb3VzZWVudGVyIi5zcGxpdCgiICIpLFg9VisiLWZpeGVkIixRPVYrIi1kZWZhdWx0IixaPVYrIi1mb2N1cyIsdHQ9VisiLWhvdmVyIixldD1WKyItZGlzYWJsZWQiLG50PSJfcmVwbGFjZWRCeXFUaXAiLGl0PSJvbGR0aXRsZSIscnQ9e2llOmZ1bmN0aW9uKCl7dmFyIHQsZTtmb3IodD00LGU9bC5jcmVhdGVFbGVtZW50KCJkaXYiKTsoZS5pbm5lckhUTUw9IjwhLS1baWYgZ3QgSUUgIit0KyJdPjxpPjwvaT48IVtlbmRpZl0tLT4iKSYmZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaSIpWzBdO3QrPTEpO3JldHVybiB0PjQ/dDpOYU59KCksaU9TOnBhcnNlRmxvYXQoKCIiKygvQ1BVLipPUyAoWzAtOV9dezEsNX0pfChDUFUgbGlrZSkuKkFwcGxlV2ViS2l0LipNb2JpbGUvaS5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwiIl0pWzFdKS5yZXBsYWNlKCJ1bmRlZmluZWQiLCIzXzIiKS5yZXBsYWNlKCJfIiwiLiIpLnJlcGxhY2UoIl8iLCIiKSl8fEN9O0w9ZS5wcm90b3R5cGUsTC5fd2hlbj1mdW5jdGlvbihlKXtyZXR1cm4gdC53aGVuLmFwcGx5KHQsZSl9LEwucmVuZGVyPWZ1bmN0aW9uKGUpe2lmKHRoaXMucmVuZGVyZWR8fHRoaXMuZGVzdHJveWVkKXJldHVybiB0aGlzO3ZhciBuPXRoaXMsaT10aGlzLm9wdGlvbnMscj10aGlzLmNhY2hlLG89dGhpcy5lbGVtZW50cyxzPWkuY29udGVudC50ZXh0LGE9aS5jb250ZW50LnRpdGxlLGw9aS5jb250ZW50LmJ1dHRvbixjPWkucG9zaXRpb24sdT1bXTtyZXR1cm4gdC5hdHRyKHRoaXMudGFyZ2V0WzBdLCJhcmlhLWRlc2NyaWJlZGJ5Iix0aGlzLl9pZCksci5wb3NDbGFzcz10aGlzLl9jcmVhdGVQb3NDbGFzcygodGhpcy5wb3NpdGlvbj17bXk6Yy5teSxhdDpjLmF0fSkubXkpLHRoaXMudG9vbHRpcD1vLnRvb2x0aXA9dCgiPGRpdi8+Iix7aWQ6dGhpcy5faWQsImNsYXNzIjpbVixRLGkuc3R5bGUuY2xhc3NlcyxyLnBvc0NsYXNzXS5qb2luKCIgIiksd2lkdGg6aS5zdHlsZS53aWR0aHx8IiIsaGVpZ2h0Omkuc3R5bGUuaGVpZ2h0fHwiIix0cmFja2luZzoibW91c2UiPT09Yy50YXJnZXQmJmMuYWRqdXN0Lm1vdXNlLHJvbGU6ImFsZXJ0IiwiYXJpYS1saXZlIjoicG9saXRlIiwiYXJpYS1hdG9taWMiOkMsImFyaWEtZGVzY3JpYmVkYnkiOnRoaXMuX2lkKyItY29udGVudCIsImFyaWEtaGlkZGVuIjpEfSkudG9nZ2xlQ2xhc3MoZXQsdGhpcy5kaXNhYmxlZCkuYXR0cigkLHRoaXMuaWQpLmRhdGEoVix0aGlzKS5hcHBlbmRUbyhjLmNvbnRhaW5lcikuYXBwZW5kKG8uY29udGVudD10KCI8ZGl2IC8+Iix7ImNsYXNzIjpWKyItY29udGVudCIsaWQ6dGhpcy5faWQrIi1jb250ZW50IiwiYXJpYS1hdG9taWMiOkR9KSksdGhpcy5yZW5kZXJlZD0tMSx0aGlzLnBvc2l0aW9uaW5nPUQsYSYmKHRoaXMuX2NyZWF0ZVRpdGxlKCksdC5pc0Z1bmN0aW9uKGEpfHx1LnB1c2godGhpcy5fdXBkYXRlVGl0bGUoYSxDKSkpLGwmJnRoaXMuX2NyZWF0ZUJ1dHRvbigpLHQuaXNGdW5jdGlvbihzKXx8dS5wdXNoKHRoaXMuX3VwZGF0ZUNvbnRlbnQocyxDKSksdGhpcy5yZW5kZXJlZD1ELHRoaXMuX3NldFdpZGdldCgpLHQuZWFjaChCLGZ1bmN0aW9uKHQpe3ZhciBlOyJyZW5kZXIiPT09dGhpcy5pbml0aWFsaXplJiYoZT10aGlzKG4pKSYmKG4ucGx1Z2luc1t0XT1lKX0pLHRoaXMuX3VuYXNzaWduRXZlbnRzKCksdGhpcy5fYXNzaWduRXZlbnRzKCksdGhpcy5fd2hlbih1KS50aGVuKGZ1bmN0aW9uKCl7bi5fdHJpZ2dlcigicmVuZGVyIiksbi5wb3NpdGlvbmluZz1DLG4uaGlkZGVuRHVyaW5nV2FpdHx8IWkuc2hvdy5yZWFkeSYmIWV8fG4udG9nZ2xlKEQsci5ldmVudCxDKSxuLmhpZGRlbkR1cmluZ1dhaXQ9Q30pLGsuYXBpW3RoaXMuaWRdPXRoaXMsdGhpc30sTC5kZXN0cm95PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oKXtpZighdGhpcy5kZXN0cm95ZWQpe3RoaXMuZGVzdHJveWVkPUQ7dmFyIGUsbj10aGlzLnRhcmdldCxpPW4uYXR0cihpdCk7dGhpcy5yZW5kZXJlZCYmdGhpcy50b29sdGlwLnN0b3AoMSwwKS5maW5kKCIqIikucmVtb3ZlKCkuZW5kKCkucmVtb3ZlKCksdC5lYWNoKHRoaXMucGx1Z2lucyxmdW5jdGlvbigpe3RoaXMuZGVzdHJveSYmdGhpcy5kZXN0cm95KCl9KTtmb3IoZSBpbiB0aGlzLnRpbWVycyl0aGlzLnRpbWVycy5oYXNPd25Qcm9wZXJ0eShlKSYmY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzW2VdKTtuLnJlbW92ZURhdGEoVikucmVtb3ZlQXR0cigkKS5yZW1vdmVBdHRyKHEpLnJlbW92ZUF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKSx0aGlzLm9wdGlvbnMuc3VwcHJlc3MmJmkmJm4uYXR0cigidGl0bGUiLGkpLnJlbW92ZUF0dHIoaXQpLHRoaXMuX3VuYXNzaWduRXZlbnRzKCksdGhpcy5vcHRpb25zPXRoaXMuZWxlbWVudHM9dGhpcy5jYWNoZT10aGlzLnRpbWVycz10aGlzLnBsdWdpbnM9dGhpcy5tb3VzZT1ZLGRlbGV0ZSBrLmFwaVt0aGlzLmlkXX19cmV0dXJuIHRoaXMuZGVzdHJveWVkP3RoaXMudGFyZ2V0OihlPT09RCYmImhpZGUiIT09dGhpcy50cmlnZ2VyaW5nfHwhdGhpcy5yZW5kZXJlZD9uLmNhbGwodGhpcyk6KHRoaXMudG9vbHRpcC5vbmUoInRvb2x0aXBoaWRkZW4iLHQucHJveHkobix0aGlzKSksIXRoaXMudHJpZ2dlcmluZyYmdGhpcy5oaWRlKCkpLHRoaXMudGFyZ2V0KX0sQT1MLmNoZWNrcz17YnVpbHRpbjp7Il5pZCQiOmZ1bmN0aW9uKGUsbixpLHIpe3ZhciBvPWk9PT1EP2submV4dGlkOmkscz1WKyItIitvO28hPT1DJiZvLmxlbmd0aD4wJiYhdCgiIyIrcykubGVuZ3RoPyh0aGlzLl9pZD1zLHRoaXMucmVuZGVyZWQmJih0aGlzLnRvb2x0aXBbMF0uaWQ9dGhpcy5faWQsdGhpcy5lbGVtZW50cy5jb250ZW50WzBdLmlkPXRoaXMuX2lkKyItY29udGVudCIsdGhpcy5lbGVtZW50cy50aXRsZVswXS5pZD10aGlzLl9pZCsiLXRpdGxlIikpOmVbbl09cn0sIl5wcmVyZW5kZXIiOmZ1bmN0aW9uKHQsZSxuKXtuJiYhdGhpcy5yZW5kZXJlZCYmdGhpcy5yZW5kZXIodGhpcy5vcHRpb25zLnNob3cucmVhZHkpfSwiXmNvbnRlbnQudGV4dCQiOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLl91cGRhdGVDb250ZW50KG4pfSwiXmNvbnRlbnQuYXR0ciQiOmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMub3B0aW9ucy5jb250ZW50LnRleHQ9PT10aGlzLnRhcmdldC5hdHRyKGkpJiZ0aGlzLl91cGRhdGVDb250ZW50KHRoaXMudGFyZ2V0LmF0dHIobikpfSwiXmNvbnRlbnQudGl0bGUkIjpmdW5jdGlvbih0LGUsbil7cmV0dXJuIG4/KG4mJiF0aGlzLmVsZW1lbnRzLnRpdGxlJiZ0aGlzLl9jcmVhdGVUaXRsZSgpLHZvaWQgdGhpcy5fdXBkYXRlVGl0bGUobikpOnRoaXMuX3JlbW92ZVRpdGxlKCl9LCJeY29udGVudC5idXR0b24kIjpmdW5jdGlvbih0LGUsbil7dGhpcy5fdXBkYXRlQnV0dG9uKG4pfSwiXmNvbnRlbnQudGl0bGUuKHRleHR8YnV0dG9uKSQiOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnNldCgiY29udGVudC4iK2Usbil9LCJecG9zaXRpb24uKG15fGF0KSQiOmZ1bmN0aW9uKHQsZSxuKXsic3RyaW5nIj09dHlwZW9mIG4mJih0aGlzLnBvc2l0aW9uW2VdPXRbZV09bmV3IHgobiwiYXQiPT09ZSkpfSwiXnBvc2l0aW9uLmNvbnRhaW5lciQiOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJlbmRlcmVkJiZ0aGlzLnRvb2x0aXAuYXBwZW5kVG8obil9LCJec2hvdy5yZWFkeSQiOmZ1bmN0aW9uKHQsZSxuKXtuJiYoIXRoaXMucmVuZGVyZWQmJnRoaXMucmVuZGVyKEQpfHx0aGlzLnRvZ2dsZShEKSl9LCJec3R5bGUuY2xhc3NlcyQiOmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMucmVuZGVyZWQmJnRoaXMudG9vbHRpcC5yZW1vdmVDbGFzcyhpKS5hZGRDbGFzcyhuKX0sIl5zdHlsZS4od2lkdGh8aGVpZ2h0KSI6ZnVuY3Rpb24odCxlLG4pe3RoaXMucmVuZGVyZWQmJnRoaXMudG9vbHRpcC5jc3MoZSxuKX0sIl5zdHlsZS53aWRnZXR8Y29udGVudC50aXRsZSI6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVkJiZ0aGlzLl9zZXRXaWRnZXQoKX0sIl5zdHlsZS5kZWYiOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJlbmRlcmVkJiZ0aGlzLnRvb2x0aXAudG9nZ2xlQ2xhc3MoUSwhIW4pfSwiXmV2ZW50cy4ocmVuZGVyfHNob3d8bW92ZXxoaWRlfGZvY3VzfGJsdXIpJCI6ZnVuY3Rpb24oZSxuLGkpe3RoaXMucmVuZGVyZWQmJnRoaXMudG9vbHRpcFsodC5pc0Z1bmN0aW9uKGkpPyIiOiJ1biIpKyJiaW5kIl0oInRvb2x0aXAiK24saSl9LCJeKHNob3d8aGlkZXxwb3NpdGlvbikuKGV2ZW50fHRhcmdldHxmaXhlZHxpbmFjdGl2ZXxsZWF2ZXxkaXN0YW5jZXx2aWV3cG9ydHxhZGp1c3QpIjpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciB0PXRoaXMub3B0aW9ucy5wb3NpdGlvbjt0aGlzLnRvb2x0aXAuYXR0cigidHJhY2tpbmciLCJtb3VzZSI9PT10LnRhcmdldCYmdC5hZGp1c3QubW91c2UpLHRoaXMuX3VuYXNzaWduRXZlbnRzKCksdGhpcy5fYXNzaWduRXZlbnRzKCl9fX19LEwuZ2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZGVzdHJveWVkKXJldHVybiB0aGlzO3ZhciBlPW8odGhpcy5vcHRpb25zLHQudG9Mb3dlckNhc2UoKSksbj1lWzBdW2VbMV1dO3JldHVybiBuLnByZWNlZGFuY2U/bi5zdHJpbmcoKTpufTt2YXIgb3Q9L15wb3NpdGlvblwuKG15fGF0fGFkanVzdHx0YXJnZXR8Y29udGFpbmVyfHZpZXdwb3J0KXxzdHlsZXxjb250ZW50fHNob3dcLnJlYWR5L2ksc3Q9L15wcmVyZW5kZXJ8c2hvd1wucmVhZHkvaTtMLnNldD1mdW5jdGlvbihlLG4pe2lmKHRoaXMuZGVzdHJveWVkKXJldHVybiB0aGlzO3ZhciBpLHM9dGhpcy5yZW5kZXJlZCxhPUMsbD10aGlzLm9wdGlvbnM7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlPyhpPWUsZT17fSxlW2ldPW4pOmU9dC5leHRlbmQoe30sZSksdC5lYWNoKGUsZnVuY3Rpb24obixpKXtpZihzJiZzdC50ZXN0KG4pKXJldHVybiB2b2lkIGRlbGV0ZSBlW25dO3ZhciByLGM9byhsLG4udG9Mb3dlckNhc2UoKSk7cj1jWzBdW2NbMV1dLGNbMF1bY1sxXV09aSYmaS5ub2RlVHlwZT90KGkpOmksYT1vdC50ZXN0KG4pfHxhLGVbbl09W2NbMF0sY1sxXSxpLHJdfSkscihsKSx0aGlzLnBvc2l0aW9uaW5nPUQsdC5lYWNoKGUsdC5wcm94eSh1LHRoaXMpKSx0aGlzLnBvc2l0aW9uaW5nPUMsdGhpcy5yZW5kZXJlZCYmdGhpcy50b29sdGlwWzBdLm9mZnNldFdpZHRoPjAmJmEmJnRoaXMucmVwb3NpdGlvbigibW91c2UiPT09bC5wb3NpdGlvbi50YXJnZXQ/WTp0aGlzLmNhY2hlLmV2ZW50KSx0aGlzfSxMLl91cGRhdGU9ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9dGhpcy5jYWNoZTtyZXR1cm4gdGhpcy5yZW5kZXJlZCYmZT8odC5pc0Z1bmN0aW9uKGUpJiYoZT1lLmNhbGwodGhpcy5lbGVtZW50cy50YXJnZXQsci5ldmVudCx0aGlzKXx8IiIpLHQuaXNGdW5jdGlvbihlLnRoZW4pPyhyLndhaXRpbmc9RCxlLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIud2FpdGluZz1DLGkuX3VwZGF0ZSh0LG4pfSxZLGZ1bmN0aW9uKHQpe3JldHVybiBpLl91cGRhdGUodCxuKX0pKTplPT09Q3x8IWUmJiIiIT09ZT9DOihlLmpxdWVyeSYmZS5sZW5ndGg+MD9uLmVtcHR5KCkuYXBwZW5kKGUuY3NzKHtkaXNwbGF5OiJibG9jayIsdmlzaWJpbGl0eToidmlzaWJsZSJ9KSk6bi5odG1sKGUpLHRoaXMuX3dhaXRGb3JDb250ZW50KG4pLnRoZW4oZnVuY3Rpb24odCl7aS5yZW5kZXJlZCYmaS50b29sdGlwWzBdLm9mZnNldFdpZHRoPjAmJmkucmVwb3NpdGlvbihyLmV2ZW50LCF0Lmxlbmd0aCl9KSkpOkN9LEwuX3dhaXRGb3JDb250ZW50PWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuY2FjaGU7cmV0dXJuIG4ud2FpdGluZz1ELCh0LmZuLmltYWdlc0xvYWRlZD9lLmltYWdlc0xvYWRlZCgpOihuZXcgdC5EZWZlcnJlZCkucmVzb2x2ZShbXSkpLmRvbmUoZnVuY3Rpb24oKXtuLndhaXRpbmc9Q30pLnByb21pc2UoKX0sTC5fdXBkYXRlQ29udGVudD1mdW5jdGlvbih0LGUpe3RoaXMuX3VwZGF0ZSh0LHRoaXMuZWxlbWVudHMuY29udGVudCxlKX0sTC5fdXBkYXRlVGl0bGU9ZnVuY3Rpb24odCxlKXt0aGlzLl91cGRhdGUodCx0aGlzLmVsZW1lbnRzLnRpdGxlLGUpPT09QyYmdGhpcy5fcmVtb3ZlVGl0bGUoQyl9LEwuX2NyZWF0ZVRpdGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50cyxuPXRoaXMuX2lkKyItdGl0bGUiO2UudGl0bGViYXImJnRoaXMuX3JlbW92ZVRpdGxlKCksZS50aXRsZWJhcj10KCI8ZGl2IC8+Iix7ImNsYXNzIjpWKyItdGl0bGViYXIgIisodGhpcy5vcHRpb25zLnN0eWxlLndpZGdldD9kKCJoZWFkZXIiKToiIil9KS5hcHBlbmQoZS50aXRsZT10KCI8ZGl2IC8+Iix7aWQ6biwiY2xhc3MiOlYrIi10aXRsZSIsImFyaWEtYXRvbWljIjpEfSkpLmluc2VydEJlZm9yZShlLmNvbnRlbnQpLmRlbGVnYXRlKCIucXRpcC1jbG9zZSIsIm1vdXNlZG93biBrZXlkb3duIG1vdXNldXAga2V5dXAgbW91c2VvdXQiLGZ1bmN0aW9uKGUpe3QodGhpcykudG9nZ2xlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1mb2N1cyIsImRvd24iPT09ZS50eXBlLnN1YnN0cigtNCkpfSkuZGVsZWdhdGUoIi5xdGlwLWNsb3NlIiwibW91c2VvdmVyIG1vdXNlb3V0IixmdW5jdGlvbihlKXt0KHRoaXMpLnRvZ2dsZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIsIm1vdXNlb3ZlciI9PT1lLnR5cGUpfSksdGhpcy5vcHRpb25zLmNvbnRlbnQuYnV0dG9uJiZ0aGlzLl9jcmVhdGVCdXR0b24oKX0sTC5fcmVtb3ZlVGl0bGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbGVtZW50cztlLnRpdGxlJiYoZS50aXRsZWJhci5yZW1vdmUoKSxlLnRpdGxlYmFyPWUudGl0bGU9ZS5idXR0b249WSx0IT09QyYmdGhpcy5yZXBvc2l0aW9uKCkpfSxMLl9jcmVhdGVQb3NDbGFzcz1mdW5jdGlvbih0KXtyZXR1cm4gVisiLXBvcy0iKyh0fHx0aGlzLm9wdGlvbnMucG9zaXRpb24ubXkpLmFiYnJldigpfSxMLnJlcG9zaXRpb249ZnVuY3Rpb24oZSxuKXtpZighdGhpcy5yZW5kZXJlZHx8dGhpcy5wb3NpdGlvbmluZ3x8dGhpcy5kZXN0cm95ZWQpcmV0dXJuIHRoaXM7dGhpcy5wb3NpdGlvbmluZz1EO3ZhciBpLHIsbyxzLGM9dGhpcy5jYWNoZSx1PXRoaXMudG9vbHRpcCxkPXRoaXMub3B0aW9ucy5wb3NpdGlvbixoPWQudGFyZ2V0LHA9ZC5teSxmPWQuYXQsbT1kLnZpZXdwb3J0LF89ZC5jb250YWluZXIsZz1kLmFkanVzdCx2PWcubWV0aG9kLnNwbGl0KCIgIikseT11Lm91dGVyV2lkdGgoQyksYj11Lm91dGVySGVpZ2h0KEMpLHc9MCxNPTAsUz11LmNzcygicG9zaXRpb24iKSxUPXtsZWZ0OjAsdG9wOjB9LGs9dVswXS5vZmZzZXRXaWR0aD4wLEw9ZSYmInNjcm9sbCI9PT1lLnR5cGUseD10KGEpLEE9X1swXS5vd25lckRvY3VtZW50LEU9dGhpcy5tb3VzZTtpZih0LmlzQXJyYXkoaCkmJjI9PT1oLmxlbmd0aClmPXt4OmoseTpSfSxUPXtsZWZ0OmhbMF0sdG9wOmhbMV19O2Vsc2UgaWYoIm1vdXNlIj09PWgpZj17eDpqLHk6Un0sKCFnLm1vdXNlfHx0aGlzLm9wdGlvbnMuaGlkZS5kaXN0YW5jZSkmJmMub3JpZ2luJiZjLm9yaWdpbi5wYWdlWD9lPWMub3JpZ2luOiFlfHxlJiYoInJlc2l6ZSI9PT1lLnR5cGV8fCJzY3JvbGwiPT09ZS50eXBlKT9lPWMuZXZlbnQ6RSYmRS5wYWdlWCYmKGU9RSksInN0YXRpYyIhPT1TJiYoVD1fLm9mZnNldCgpKSxBLmJvZHkub2Zmc2V0V2lkdGghPT0oYS5pbm5lcldpZHRofHxBLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkmJihyPXQobC5ib2R5KS5vZmZzZXQoKSksVD17bGVmdDplLnBhZ2VYLVQubGVmdCsociYmci5sZWZ0fHwwKSx0b3A6ZS5wYWdlWS1ULnRvcCsociYmci50b3B8fDApfSxnLm1vdXNlJiZMJiZFJiYoVC5sZWZ0LT0oRS5zY3JvbGxYfHwwKS14LnNjcm9sbExlZnQoKSxULnRvcC09KEUuc2Nyb2xsWXx8MCkteC5zY3JvbGxUb3AoKSk7ZWxzZXtpZigiZXZlbnQiPT09aD9lJiZlLnRhcmdldCYmInNjcm9sbCIhPT1lLnR5cGUmJiJyZXNpemUiIT09ZS50eXBlP2MudGFyZ2V0PXQoZS50YXJnZXQpOmUudGFyZ2V0fHwoYy50YXJnZXQ9dGhpcy5lbGVtZW50cy50YXJnZXQpOiJldmVudCIhPT1oJiYoYy50YXJnZXQ9dChoLmpxdWVyeT9oOnRoaXMuZWxlbWVudHMudGFyZ2V0KSksaD1jLnRhcmdldCxoPXQoaCkuZXEoMCksMD09PWgubGVuZ3RoKXJldHVybiB0aGlzO2hbMF09PT1sfHxoWzBdPT09YT8odz1ydC5pT1M/YS5pbm5lcldpZHRoOmgud2lkdGgoKSxNPXJ0LmlPUz9hLmlubmVySGVpZ2h0OmguaGVpZ2h0KCksaFswXT09PWEmJihUPXt0b3A6KG18fGgpLnNjcm9sbFRvcCgpLGxlZnQ6KG18fGgpLnNjcm9sbExlZnQoKX0pKTpCLmltYWdlbWFwJiZoLmlzKCJhcmVhIik/aT1CLmltYWdlbWFwKHRoaXMsaCxmLEIudmlld3BvcnQ/djpDKTpCLnN2ZyYmaCYmaFswXS5vd25lclNWR0VsZW1lbnQ/aT1CLnN2Zyh0aGlzLGgsZixCLnZpZXdwb3J0P3Y6Qyk6KHc9aC5vdXRlcldpZHRoKEMpLE09aC5vdXRlckhlaWdodChDKSxUPWgub2Zmc2V0KCkpLGkmJih3PWkud2lkdGgsTT1pLmhlaWdodCxyPWkub2Zmc2V0LFQ9aS5wb3NpdGlvbiksVD10aGlzLnJlcG9zaXRpb24ub2Zmc2V0KGgsVCxfKSwocnQuaU9TPjMuMSYmcnQuaU9TPDQuMXx8cnQuaU9TPj00LjMmJnJ0LmlPUzw0LjMzfHwhcnQuaU9TJiYiZml4ZWQiPT09UykmJihULmxlZnQtPXguc2Nyb2xsTGVmdCgpLFQudG9wLT14LnNjcm9sbFRvcCgpKSwoIWl8fGkmJmkuYWRqdXN0YWJsZSE9PUMpJiYoVC5sZWZ0Kz1mLng9PT1GP3c6Zi54PT09ej93LzI6MCxULnRvcCs9Zi55PT09SD9NOmYueT09PXo/TS8yOjApfXJldHVybiBULmxlZnQrPWcueCsocC54PT09Rj8teTpwLng9PT16Py15LzI6MCksVC50b3ArPWcueSsocC55PT09SD8tYjpwLnk9PT16Py1iLzI6MCksQi52aWV3cG9ydD8obz1ULmFkanVzdGVkPUIudmlld3BvcnQodGhpcyxULGQsdyxNLHksYiksciYmby5sZWZ0JiYoVC5sZWZ0Kz1yLmxlZnQpLHImJm8udG9wJiYoVC50b3ArPXIudG9wKSxvLm15JiYodGhpcy5wb3NpdGlvbi5teT1vLm15KSk6VC5hZGp1c3RlZD17bGVmdDowLHRvcDowfSxjLnBvc0NsYXNzIT09KHM9dGhpcy5fY3JlYXRlUG9zQ2xhc3ModGhpcy5wb3NpdGlvbi5teSkpJiYoYy5wb3NDbGFzcz1zLHUucmVtb3ZlQ2xhc3MoYy5wb3NDbGFzcykuYWRkQ2xhc3MocykpLHRoaXMuX3RyaWdnZXIoIm1vdmUiLFtULG0uZWxlbXx8bV0sZSk/KGRlbGV0ZSBULmFkanVzdGVkLG49PT1DfHwha3x8aXNOYU4oVC5sZWZ0KXx8aXNOYU4oVC50b3ApfHwibW91c2UiPT09aHx8IXQuaXNGdW5jdGlvbihkLmVmZmVjdCk/dS5jc3MoVCk6dC5pc0Z1bmN0aW9uKGQuZWZmZWN0KSYmKGQuZWZmZWN0LmNhbGwodSx0aGlzLHQuZXh0ZW5kKHt9LFQpKSx1LnF1ZXVlKGZ1bmN0aW9uKGUpe3QodGhpcykuY3NzKHtvcGFjaXR5OiIiLGhlaWdodDoiIn0pLHJ0LmllJiZ0aGlzLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIiksZSgpfSkpLHRoaXMucG9zaXRpb25pbmc9Qyx0aGlzKTp0aGlzfSxMLnJlcG9zaXRpb24ub2Zmc2V0PWZ1bmN0aW9uKGUsbixpKXtmdW5jdGlvbiByKHQsZSl7bi5sZWZ0Kz1lKnQuc2Nyb2xsTGVmdCgpLG4udG9wKz1lKnQuc2Nyb2xsVG9wKCl9aWYoIWlbMF0pcmV0dXJuIG47dmFyIG8scyxhLGMsdT10KGVbMF0ub3duZXJEb2N1bWVudCksZD0hIXJ0LmllJiYiQ1NTMUNvbXBhdCIhPT1sLmNvbXBhdE1vZGUsaD1pWzBdO2RvInN0YXRpYyIhPT0ocz10LmNzcyhoLCJwb3NpdGlvbiIpKSYmKCJmaXhlZCI9PT1zPyhhPWguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscih1LC0xKSk6KGE9dChoKS5wb3NpdGlvbigpLGEubGVmdCs9cGFyc2VGbG9hdCh0LmNzcyhoLCJib3JkZXJMZWZ0V2lkdGgiKSl8fDAsYS50b3ArPXBhcnNlRmxvYXQodC5jc3MoaCwiYm9yZGVyVG9wV2lkdGgiKSl8fDApLG4ubGVmdC09YS5sZWZ0KyhwYXJzZUZsb2F0KHQuY3NzKGgsIm1hcmdpbkxlZnQiKSl8fDApLG4udG9wLT1hLnRvcCsocGFyc2VGbG9hdCh0LmNzcyhoLCJtYXJnaW5Ub3AiKSl8fDApLG98fCJoaWRkZW4iPT09KGM9dC5jc3MoaCwib3ZlcmZsb3ciKSl8fCJ2aXNpYmxlIj09PWN8fCJCT0RZIj09PXQucHJvcChoLCJ0YWdOYW1lIil8fChvPXQoaCkpKTt3aGlsZShoPWgub2Zmc2V0UGFyZW50KTtyZXR1cm4gbyYmKG9bMF0hPT11WzBdfHxkKSYmcihvLDEpLG59O3ZhciBhdD0oeD1MLnJlcG9zaXRpb24uQ29ybmVyPWZ1bmN0aW9uKHQsZSl7dD0oIiIrdCkucmVwbGFjZSgvKFtBLVpdKS8sIiAkMSIpLnJlcGxhY2UoL21pZGRsZS9naSx6KS50b0xvd2VyQ2FzZSgpLHRoaXMueD0odC5tYXRjaCgvbGVmdHxyaWdodC9pKXx8dC5tYXRjaCgvY2VudGVyLyl8fFsiaW5oZXJpdCJdKVswXS50b0xvd2VyQ2FzZSgpLHRoaXMueT0odC5tYXRjaCgvdG9wfGJvdHRvbXxjZW50ZXIvaSl8fFsiaW5oZXJpdCJdKVswXS50b0xvd2VyQ2FzZSgpLHRoaXMuZm9yY2VZPSEhZTt2YXIgbj10LmNoYXJBdCgwKTt0aGlzLnByZWNlZGFuY2U9InQiPT09bnx8ImIiPT09bj9QOk99KS5wcm90b3R5cGU7YXQuaW52ZXJ0PWZ1bmN0aW9uKHQsZSl7dGhpc1t0XT10aGlzW3RdPT09aj9GOnRoaXNbdF09PT1GP2o6ZXx8dGhpc1t0XX0sYXQuc3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueCxuPXRoaXMueSxpPWUhPT1uPyJjZW50ZXIiPT09ZXx8ImNlbnRlciIhPT1uJiYodGhpcy5wcmVjZWRhbmNlPT09UHx8dGhpcy5mb3JjZVkpP1tuLGVdOltlLG5dOltlXTtyZXR1cm4gdCE9PSExP2kuam9pbigiICIpOml9LGF0LmFiYnJldj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RyaW5nKCExKTtyZXR1cm4gdFswXS5jaGFyQXQoMCkrKHRbMV0mJnRbMV0uY2hhckF0KDApfHwiIil9LGF0LmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4KHRoaXMuc3RyaW5nKCksdGhpcy5mb3JjZVkpfSxMLnRvZ2dsZT1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuY2FjaGUscj10aGlzLm9wdGlvbnMsbz10aGlzLnRvb2x0aXA7aWYobil7aWYoL292ZXJ8ZW50ZXIvLnRlc3Qobi50eXBlKSYmaS5ldmVudCYmL291dHxsZWF2ZS8udGVzdChpLmV2ZW50LnR5cGUpJiZyLnNob3cudGFyZ2V0LmFkZChuLnRhcmdldCkubGVuZ3RoPT09ci5zaG93LnRhcmdldC5sZW5ndGgmJm8uaGFzKG4ucmVsYXRlZFRhcmdldCkubGVuZ3RoKXJldHVybiB0aGlzO2kuZXZlbnQ9dC5ldmVudC5maXgobil9aWYodGhpcy53YWl0aW5nJiYhZSYmKHRoaXMuaGlkZGVuRHVyaW5nV2FpdD1EKSwhdGhpcy5yZW5kZXJlZClyZXR1cm4gZT90aGlzLnJlbmRlcigxKTp0aGlzO2lmKHRoaXMuZGVzdHJveWVkfHx0aGlzLmRpc2FibGVkKXJldHVybiB0aGlzO3ZhciBhLGMsdSxkPWU/InNob3ciOiJoaWRlIixoPXRoaXMub3B0aW9uc1tkXSxwPXRoaXMub3B0aW9ucy5wb3NpdGlvbixmPXRoaXMub3B0aW9ucy5jb250ZW50LG09dGhpcy50b29sdGlwLmNzcygid2lkdGgiKSxfPXRoaXMudG9vbHRpcC5pcygiOnZpc2libGUiKSxnPWV8fDE9PT1oLnRhcmdldC5sZW5ndGgsdj0hbnx8aC50YXJnZXQubGVuZ3RoPDJ8fGkudGFyZ2V0WzBdPT09bi50YXJnZXQ7cmV0dXJuKCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpzKGUpKS5zZWFyY2goImJvb2xlYW58bnVtYmVyIikmJihlPSFfKSxhPSFvLmlzKCI6YW5pbWF0ZWQiKSYmXz09PWUmJnYsYz1hP1k6ISF0aGlzLl90cmlnZ2VyKGQsWzkwXSksdGhpcy5kZXN0cm95ZWQ/dGhpczooYw==", "base64"));
  res.write(new Buffer("IT09QyYmZSYmdGhpcy5mb2N1cyhuKSwhY3x8YT90aGlzOih0LmF0dHIob1swXSwiYXJpYS1oaWRkZW4iLCFlKSxlPyh0aGlzLm1vdXNlJiYoaS5vcmlnaW49dC5ldmVudC5maXgodGhpcy5tb3VzZSkpLHQuaXNGdW5jdGlvbihmLnRleHQpJiZ0aGlzLl91cGRhdGVDb250ZW50KGYudGV4dCxDKSx0LmlzRnVuY3Rpb24oZi50aXRsZSkmJnRoaXMuX3VwZGF0ZVRpdGxlKGYudGl0bGUsQyksIUUmJiJtb3VzZSI9PT1wLnRhcmdldCYmcC5hZGp1c3QubW91c2UmJih0KGwpLmJpbmQoIm1vdXNlbW92ZS4iK1YsdGhpcy5fc3RvcmVNb3VzZSksRT1EKSxtfHxvLmNzcygid2lkdGgiLG8ub3V0ZXJXaWR0aChDKSksdGhpcy5yZXBvc2l0aW9uKG4sYXJndW1lbnRzWzJdKSxtfHxvLmNzcygid2lkdGgiLCIiKSxoLnNvbG8mJigic3RyaW5nIj09dHlwZW9mIGguc29sbz90KGguc29sbyk6dChLLGguc29sbykpLm5vdChvKS5ub3QoaC50YXJnZXQpLnF0aXAoImhpZGUiLG5ldyB0LkV2ZW50KCJ0b29sdGlwc29sbyIpKSk6KGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zaG93KSxkZWxldGUgaS5vcmlnaW4sRSYmIXQoSysnW3RyYWNraW5nPSJ0cnVlIl06dmlzaWJsZScsaC5zb2xvKS5ub3QobykubGVuZ3RoJiYodChsKS51bmJpbmQoIm1vdXNlbW92ZS4iK1YpLEU9QyksdGhpcy5ibHVyKG4pKSx1PXQucHJveHkoZnVuY3Rpb24oKXtlPyhydC5pZSYmb1swXS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLG8uY3NzKCJvdmVyZmxvdyIsIiIpLCJzdHJpbmciPT10eXBlb2YgaC5hdXRvZm9jdXMmJnQodGhpcy5vcHRpb25zLnNob3cuYXV0b2ZvY3VzLG8pLmZvY3VzKCksdGhpcy5vcHRpb25zLnNob3cudGFyZ2V0LnRyaWdnZXIoInF0aXAtIit0aGlzLmlkKyItaW5hY3RpdmUiKSk6by5jc3Moe2Rpc3BsYXk6IiIsdmlzaWJpbGl0eToiIixvcGFjaXR5OiIiLGxlZnQ6IiIsdG9wOiIifSksdGhpcy5fdHJpZ2dlcihlPyJ2aXNpYmxlIjoiaGlkZGVuIil9LHRoaXMpLGguZWZmZWN0PT09Q3x8Zz09PUM/KG9bZF0oKSx1KCkpOnQuaXNGdW5jdGlvbihoLmVmZmVjdCk/KG8uc3RvcCgxLDEpLGguZWZmZWN0LmNhbGwobyx0aGlzKSxvLnF1ZXVlKCJmeCIsZnVuY3Rpb24odCl7dSgpLHQoKX0pKTpvLmZhZGVUbyg5MCxlPzE6MCx1KSxlJiZoLnRhcmdldC50cmlnZ2VyKCJxdGlwLSIrdGhpcy5pZCsiLWluYWN0aXZlIiksdGhpcykpfSxMLnNob3c9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9nZ2xlKEQsdCl9LEwuaGlkZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50b2dnbGUoQyx0KX0sTC5mb2N1cz1mdW5jdGlvbihlKXtpZighdGhpcy5yZW5kZXJlZHx8dGhpcy5kZXN0cm95ZWQpcmV0dXJuIHRoaXM7dmFyIG49dChLKSxpPXRoaXMudG9vbHRpcCxyPXBhcnNlSW50KGlbMF0uc3R5bGUuekluZGV4LDEwKSxvPWsuemluZGV4K24ubGVuZ3RoO3JldHVybiBpLmhhc0NsYXNzKFopfHx0aGlzLl90cmlnZ2VyKCJmb2N1cyIsW29dLGUpJiYociE9PW8mJihuLmVhY2goZnVuY3Rpb24oKXt0aGlzLnN0eWxlLnpJbmRleD5yJiYodGhpcy5zdHlsZS56SW5kZXg9dGhpcy5zdHlsZS56SW5kZXgtMSl9KSxuLmZpbHRlcigiLiIrWikucXRpcCgiYmx1ciIsZSkpLGkuYWRkQ2xhc3MoWilbMF0uc3R5bGUuekluZGV4PW8pLHRoaXN9LEwuYmx1cj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5yZW5kZXJlZHx8dGhpcy5kZXN0cm95ZWQ/dGhpczoodGhpcy50b29sdGlwLnJlbW92ZUNsYXNzKFopLHRoaXMuX3RyaWdnZXIoImJsdXIiLFt0aGlzLnRvb2x0aXAuY3NzKCJ6SW5kZXgiKV0sdCksdGhpcyl9LEwuZGlzYWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZXN0cm95ZWQ/dGhpczooInRvZ2dsZSI9PT10P3Q9ISh0aGlzLnJlbmRlcmVkP3RoaXMudG9vbHRpcC5oYXNDbGFzcyhldCk6dGhpcy5kaXNhYmxlZCk6ImJvb2xlYW4iIT10eXBlb2YgdCYmKHQ9RCksdGhpcy5yZW5kZXJlZCYmdGhpcy50b29sdGlwLnRvZ2dsZUNsYXNzKGV0LHQpLmF0dHIoImFyaWEtZGlzYWJsZWQiLHQpLHRoaXMuZGlzYWJsZWQ9ISF0LHRoaXMpfSxMLmVuYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGUoQyl9LEwuX2NyZWF0ZUJ1dHRvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10aGlzLmVsZW1lbnRzLGk9bi50b29sdGlwLHI9dGhpcy5vcHRpb25zLmNvbnRlbnQuYnV0dG9uLG89InN0cmluZyI9PXR5cGVvZiByLHM9bz9yOiJDbG9zZSB0b29sdGlwIjtuLmJ1dHRvbiYmbi5idXR0b24ucmVtb3ZlKCksci5qcXVlcnk/bi5idXR0b249cjpuLmJ1dHRvbj10KCI8YSAvPiIseyJjbGFzcyI6InF0aXAtY2xvc2UgIisodGhpcy5vcHRpb25zLnN0eWxlLndpZGdldD8iIjpWKyItaWNvbiIpLHRpdGxlOnMsImFyaWEtbGFiZWwiOnN9KS5wcmVwZW5kKHQoIjxzcGFuIC8+Iix7ImNsYXNzIjoidWktaWNvbiB1aS1pY29uLWNsb3NlIixodG1sOiImdGltZXM7In0pKSxuLmJ1dHRvbi5hcHBlbmRUbyhuLnRpdGxlYmFyfHxpKS5hdHRyKCJyb2xlIiwiYnV0dG9uIikuY2xpY2soZnVuY3Rpb24odCl7cmV0dXJuIGkuaGFzQ2xhc3MoZXQpfHxlLmhpZGUodCksQ30pfSxMLl91cGRhdGVCdXR0b249ZnVuY3Rpb24odCl7aWYoIXRoaXMucmVuZGVyZWQpcmV0dXJuIEM7dmFyIGU9dGhpcy5lbGVtZW50cy5idXR0b247dD90aGlzLl9jcmVhdGVCdXR0b24oKTplLnJlbW92ZSgpfSxMLl9zZXRXaWRnZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuc3R5bGUud2lkZ2V0LGU9dGhpcy5lbGVtZW50cyxuPWUudG9vbHRpcCxpPW4uaGFzQ2xhc3MoZXQpO24ucmVtb3ZlQ2xhc3MoZXQpLGV0PXQ/InVpLXN0YXRlLWRpc2FibGVkIjoicXRpcC1kaXNhYmxlZCIsbi50b2dnbGVDbGFzcyhldCxpKSxuLnRvZ2dsZUNsYXNzKCJ1aS1oZWxwZXItcmVzZXQgIitkKCksdCkudG9nZ2xlQ2xhc3MoUSx0aGlzLm9wdGlvbnMuc3R5bGUuZGVmJiYhdCksZS5jb250ZW50JiZlLmNvbnRlbnQudG9nZ2xlQ2xhc3MoZCgiY29udGVudCIpLHQpLGUudGl0bGViYXImJmUudGl0bGViYXIudG9nZ2xlQ2xhc3MoZCgiaGVhZGVyIiksdCksZS5idXR0b24mJmUuYnV0dG9uLnRvZ2dsZUNsYXNzKFYrIi1pY29uIiwhdCl9LEwuX3N0b3JlTW91c2U9ZnVuY3Rpb24oZSl7cmV0dXJuKHRoaXMubW91c2U9dC5ldmVudC5maXgoZSkpLnR5cGU9Im1vdXNlbW92ZSIsdGhpc30sTC5fYmluZD1mdW5jdGlvbihlLG4saSxyLG8pe2lmKGUmJmkmJm4ubGVuZ3RoKXt2YXIgcz0iLiIrdGhpcy5faWQrKHI/Ii0iK3I6IiIpO3JldHVybiB0KGUpLmJpbmQoKG4uc3BsaXQ/bjpuLmpvaW4ocysiICIpKStzLHQucHJveHkoaSxvfHx0aGlzKSksdGhpc319LEwuX3VuYmluZD1mdW5jdGlvbihlLG4pe3JldHVybiBlJiZ0KGUpLnVuYmluZCgiLiIrdGhpcy5faWQrKG4/Ii0iK246IiIpKSx0aGlzfSxMLl90cmlnZ2VyPWZ1bmN0aW9uKGUsbixpKXt2YXIgcj1uZXcgdC5FdmVudCgidG9vbHRpcCIrZSk7cmV0dXJuIHIub3JpZ2luYWxFdmVudD1pJiZ0LmV4dGVuZCh7fSxpKXx8dGhpcy5jYWNoZS5ldmVudHx8WSx0aGlzLnRyaWdnZXJpbmc9ZSx0aGlzLnRvb2x0aXAudHJpZ2dlcihyLFt0aGlzXS5jb25jYXQobnx8W10pKSx0aGlzLnRyaWdnZXJpbmc9Qywhci5pc0RlZmF1bHRQcmV2ZW50ZWQoKX0sTC5fYmluZEV2ZW50cz1mdW5jdGlvbihlLG4saSxyLG8scyl7dmFyIGE9aS5maWx0ZXIocikuYWRkKHIuZmlsdGVyKGkpKSxsPVtdO2EubGVuZ3RoJiYodC5lYWNoKG4sZnVuY3Rpb24obixpKXt2YXIgcj10LmluQXJyYXkoaSxlKTtyPi0xJiZsLnB1c2goZS5zcGxpY2UociwxKVswXSl9KSxsLmxlbmd0aCYmKHRoaXMuX2JpbmQoYSxsLGZ1bmN0aW9uKHQpe3ZhciBlPSEhdGhpcy5yZW5kZXJlZCYmdGhpcy50b29sdGlwWzBdLm9mZnNldFdpZHRoPjA7KGU/czpvKS5jYWxsKHRoaXMsdCl9KSxpPWkubm90KGEpLHI9ci5ub3QoYSkpKSx0aGlzLl9iaW5kKGksZSxvKSx0aGlzLl9iaW5kKHIsbixzKX0sTC5fYXNzaWduSW5pdGlhbEV2ZW50cz1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUpe3JldHVybiB0aGlzLmRpc2FibGVkfHx0aGlzLmRlc3Ryb3llZD9DOih0aGlzLmNhY2hlLmV2ZW50PWUmJnQuZXZlbnQuZml4KGUpLHRoaXMuY2FjaGUudGFyZ2V0PWUmJnQoZS50YXJnZXQpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zaG93KSx2b2lkKHRoaXMudGltZXJzLnNob3c9aC5jYWxsKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6cyhlKSl8fGkuc2hvdy5yZWFkeSl9LGkucHJlcmVuZGVyPzA6aS5zaG93LmRlbGF5KSkpfXZhciBpPXRoaXMub3B0aW9ucyxyPWkuc2hvdy50YXJnZXQsbz1pLmhpZGUudGFyZ2V0LGE9aS5zaG93LmV2ZW50P3QudHJpbSgiIitpLnNob3cuZXZlbnQpLnNwbGl0KCIgIik6W10sbD1pLmhpZGUuZXZlbnQ/dC50cmltKCIiK2kuaGlkZS5ldmVudCkuc3BsaXQoIiAiKTpbXTt0aGlzLl9iaW5kKHRoaXMuZWxlbWVudHMudGFyZ2V0LFsicmVtb3ZlIiwicmVtb3ZlcXRpcCJdLGZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCEwKX0sImRlc3Ryb3kiKSwvbW91c2Uob3ZlcnxlbnRlcikvaS50ZXN0KGkuc2hvdy5ldmVudCkmJiEvbW91c2Uob3V0fGxlYXZlKS9pLnRlc3QoaS5oaWRlLmV2ZW50KSYmbC5wdXNoKCJtb3VzZWxlYXZlIiksdGhpcy5fYmluZChyLCJtb3VzZW1vdmUiLGZ1bmN0aW9uKHQpe3RoaXMuX3N0b3JlTW91c2UodCksdGhpcy5jYWNoZS5vblRhcmdldD1EfSksdGhpcy5fYmluZEV2ZW50cyhhLGwscixvLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aW1lcnM/dm9pZCBjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc2hvdyk6Q30pLChpLnNob3cucmVhZHl8fGkucHJlcmVuZGVyKSYmbi5jYWxsKHRoaXMsZSl9LEwuX2Fzc2lnbkV2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10aGlzLm9wdGlvbnMsaT1uLnBvc2l0aW9uLHI9dGhpcy50b29sdGlwLG89bi5zaG93LnRhcmdldCxzPW4uaGlkZS50YXJnZXQsYz1pLmNvbnRhaW5lcix1PWkudmlld3BvcnQsZD10KGwpLGg9dChhKSxnPW4uc2hvdy5ldmVudD90LnRyaW0oIiIrbi5zaG93LmV2ZW50KS5zcGxpdCgiICIpOltdLHY9bi5oaWRlLmV2ZW50P3QudHJpbSgiIituLmhpZGUuZXZlbnQpLnNwbGl0KCIgIik6W107dC5lYWNoKG4uZXZlbnRzLGZ1bmN0aW9uKHQsbil7ZS5fYmluZChyLCJ0b2dnbGUiPT09dD9bInRvb2x0aXBzaG93IiwidG9vbHRpcGhpZGUiXTpbInRvb2x0aXAiK3RdLG4sbnVsbCxyKX0pLC9tb3VzZShvdXR8bGVhdmUpL2kudGVzdChuLmhpZGUuZXZlbnQpJiYid2luZG93Ij09PW4uaGlkZS5sZWF2ZSYmdGhpcy5fYmluZChkLFsibW91c2VvdXQiLCJibHVyIl0sZnVuY3Rpb24odCl7L3NlbGVjdHxvcHRpb24vLnRlc3QodC50YXJnZXQubm9kZU5hbWUpfHx0LnJlbGF0ZWRUYXJnZXR8fHRoaXMuaGlkZSh0KX0pLG4uaGlkZS5maXhlZD9zPXMuYWRkKHIuYWRkQ2xhc3MoWCkpOi9tb3VzZShvdmVyfGVudGVyKS9pLnRlc3Qobi5zaG93LmV2ZW50KSYmdGhpcy5fYmluZChzLCJtb3VzZWxlYXZlIixmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zaG93KX0pLCgiIituLmhpZGUuZXZlbnQpLmluZGV4T2YoInVuZm9jdXMiKT4tMSYmdGhpcy5fYmluZChjLmNsb3Nlc3QoImh0bWwiKSxbIm1vdXNlZG93biIsInRvdWNoc3RhcnQiXSxmdW5jdGlvbihlKXt2YXIgbj10KGUudGFyZ2V0KSxpPXRoaXMucmVuZGVyZWQmJiF0aGlzLnRvb2x0aXAuaGFzQ2xhc3MoZXQpJiZ0aGlzLnRvb2x0aXBbMF0ub2Zmc2V0V2lkdGg+MCxyPW4ucGFyZW50cyhLKS5maWx0ZXIodGhpcy50b29sdGlwWzBdKS5sZW5ndGg+MDtuWzBdPT09dGhpcy50YXJnZXRbMF18fG5bMF09PT10aGlzLnRvb2x0aXBbMF18fHJ8fHRoaXMudGFyZ2V0LmhhcyhuWzBdKS5sZW5ndGh8fCFpfHx0aGlzLmhpZGUoZSl9KSwibnVtYmVyIj09dHlwZW9mIG4uaGlkZS5pbmFjdGl2ZSYmKHRoaXMuX2JpbmQobywicXRpcC0iK3RoaXMuaWQrIi1pbmFjdGl2ZSIsbSwiaW5hY3RpdmUiKSx0aGlzLl9iaW5kKHMuYWRkKHIpLGsuaW5hY3RpdmVFdmVudHMsbSkpLHRoaXMuX2JpbmRFdmVudHMoZyx2LG8scyxwLGYpLHRoaXMuX2JpbmQoby5hZGQociksIm1vdXNlbW92ZSIsZnVuY3Rpb24odCl7aWYoIm51bWJlciI9PXR5cGVvZiBuLmhpZGUuZGlzdGFuY2Upe3ZhciBlPXRoaXMuY2FjaGUub3JpZ2lufHx7fSxpPXRoaXMub3B0aW9ucy5oaWRlLmRpc3RhbmNlLHI9TWF0aC5hYnM7KHIodC5wYWdlWC1lLnBhZ2VYKT49aXx8cih0LnBhZ2VZLWUucGFnZVkpPj1pKSYmdGhpcy5oaWRlKHQpfXRoaXMuX3N0b3JlTW91c2UodCl9KSwibW91c2UiPT09aS50YXJnZXQmJmkuYWRqdXN0Lm1vdXNlJiYobi5oaWRlLmV2ZW50JiZ0aGlzLl9iaW5kKG8sWyJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSJdLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNhY2hlP3ZvaWQodGhpcy5jYWNoZS5vblRhcmdldD0ibW91c2VlbnRlciI9PT10LnR5cGUpOkN9KSx0aGlzLl9iaW5kKGQsIm1vdXNlbW92ZSIsZnVuY3Rpb24odCl7dGhpcy5yZW5kZXJlZCYmdGhpcy5jYWNoZS5vblRhcmdldCYmIXRoaXMudG9vbHRpcC5oYXNDbGFzcyhldCkmJnRoaXMudG9vbHRpcFswXS5vZmZzZXRXaWR0aD4wJiZ0aGlzLnJlcG9zaXRpb24odCl9KSksKGkuYWRqdXN0LnJlc2l6ZXx8dS5sZW5ndGgpJiZ0aGlzLl9iaW5kKHQuZXZlbnQuc3BlY2lhbC5yZXNpemU/dTpoLCJyZXNpemUiLF8pLGkuYWRqdXN0LnNjcm9sbCYmdGhpcy5fYmluZChoLmFkZChpLmNvbnRhaW5lciksInNjcm9sbCIsXyl9LEwuX3VuYXNzaWduRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLG49ZS5zaG93LnRhcmdldCxpPWUuaGlkZS50YXJnZXQscj10LmdyZXAoW3RoaXMuZWxlbWVudHMudGFyZ2V0WzBdLHRoaXMucmVuZGVyZWQmJnRoaXMudG9vbHRpcFswXSxlLnBvc2l0aW9uLmNvbnRhaW5lclswXSxlLnBvc2l0aW9uLnZpZXdwb3J0WzBdLGUucG9zaXRpb24uY29udGFpbmVyLmNsb3Nlc3QoImh0bWwiKVswXSxhLGxdLGZ1bmN0aW9uKHQpe3JldHVybiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjpzKHQpKX0pO24mJm4udG9BcnJheSYmKHI9ci5jb25jYXQobi50b0FycmF5KCkpKSxpJiZpLnRvQXJyYXkmJihyPXIuY29uY2F0KGkudG9BcnJheSgpKSksdGhpcy5fdW5iaW5kKHIpLl91bmJpbmQociwiZGVzdHJveSIpLl91bmJpbmQociwiaW5hY3RpdmUiKX0sdChmdW5jdGlvbigpe2coSyxbIm1vdXNlZW50ZXIiLCJtb3VzZWxlYXZlIl0sZnVuY3Rpb24oZSl7dmFyIG49Im1vdXNlZW50ZXIiPT09ZS50eXBlLGk9dChlLmN1cnJlbnRUYXJnZXQpLHI9dChlLnJlbGF0ZWRUYXJnZXR8fGUudGFyZ2V0KSxvPXRoaXMub3B0aW9ucztuPyh0aGlzLmZvY3VzKGUpLGkuaGFzQ2xhc3MoWCkmJiFpLmhhc0NsYXNzKGV0KSYmY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmhpZGUpKToibW91c2UiPT09by5wb3NpdGlvbi50YXJnZXQmJm8ucG9zaXRpb24uYWRqdXN0Lm1vdXNlJiZvLmhpZGUuZXZlbnQmJm8uc2hvdy50YXJnZXQmJiFyLmNsb3Nlc3Qoby5zaG93LnRhcmdldFswXSkubGVuZ3RoJiZ0aGlzLmhpZGUoZSksaS50b2dnbGVDbGFzcyh0dCxuKX0pLGcoIlsiKyQrIl0iLEosbSl9KSxrPXQuZm4ucXRpcD1mdW5jdGlvbihlLG4saSl7dmFyIG89KCIiK2UpLnRvTG93ZXJDYXNlKCksYT1ZLGw9dC5tYWtlQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKSx1PWxbbC5sZW5ndGgtMV0sZD10aGlzWzBdP3QuZGF0YSh0aGlzWzBdLFYpOlk7cmV0dXJuIWFyZ3VtZW50cy5sZW5ndGgmJmR8fCJhcGkiPT09bz9kOiJzdHJpbmciPT10eXBlb2YgZT8odGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dC5kYXRhKHRoaXMsVik7aWYoIWUpcmV0dXJuIEQ7aWYodSYmdS50aW1lU3RhbXAmJihlLmNhY2hlLmV2ZW50PXUpLCFufHwib3B0aW9uIiE9PW8mJiJvcHRpb25zIiE9PW8pZVtvXSYmZVtvXS5hcHBseShlLGwpO2Vsc2V7aWYoaT09PWMmJiF0LmlzUGxhaW5PYmplY3QobikpcmV0dXJuIGE9ZS5nZXQobiksQztlLnNldChuLGkpfX0pLGEhPT1ZP2E6dGhpcyk6Im9iamVjdCIhPT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOnMoZSkpJiZhcmd1bWVudHMubGVuZ3RoP3ZvaWQgMDooZD1yKHQuZXh0ZW5kKEQse30sZSkpLHRoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgbixpO3JldHVybiBpPXQuaXNBcnJheShkLmlkKT9kLmlkW2VdOmQuaWQsaT0haXx8aT09PUN8fGkubGVuZ3RoPDF8fGsuYXBpW2ldP2submV4dGlkKys6aSxuPXYodCh0aGlzKSxpLGQpLG49PT1DP0Q6KGsuYXBpW2ldPW4sdC5lYWNoKEIsZnVuY3Rpb24oKXsiaW5pdGlhbGl6ZSI9PT10aGlzLmluaXRpYWxpemUmJnRoaXMobil9KSx2b2lkIG4uX2Fzc2lnbkluaXRpYWxFdmVudHModSkpfSkpfSx0LnF0aXA9ZSxrLmFwaT17fSx0LmVhY2goe2F0dHI6ZnVuY3Rpb24oZSxuKXtpZih0aGlzLmxlbmd0aCl7dmFyIGk9dGhpc1swXSxyPSJ0aXRsZSIsbz10LmRhdGEoaSwicXRpcCIpO2lmKGU9PT1yJiZvJiZvLm9wdGlvbnMmJiJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygbz8idW5kZWZpbmVkIjpzKG8pKSYmIm9iamVjdCI9PT1zKG8ub3B0aW9ucykmJm8ub3B0aW9ucy5zdXBwcmVzcylyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP3QuYXR0cihpLGl0KToobyYmby5vcHRpb25zLmNvbnRlbnQuYXR0cj09PXImJm8uY2FjaGUuYXR0ciYmby5zZXQoImNvbnRlbnQudGV4dCIsbiksdGhpcy5hdHRyKGl0LG4pKX1yZXR1cm4gdC5mblsiYXR0ciIrbnRdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oZSl7dmFyIG49dC5mblsiY2xvbmUiK250XS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGV8fG4uZmlsdGVyKCJbIitpdCsiXSIpLmF0dHIoInRpdGxlIixmdW5jdGlvbigpe3JldHVybiB0LmF0dHIodGhpcyxpdCl9KS5yZW1vdmVBdHRyKGl0KSxufX0sZnVuY3Rpb24oZSxuKXtpZighbnx8dC5mbltlK250XSlyZXR1cm4gRDt2YXIgaT10LmZuW2UrbnRdPXQuZm5bZV07dC5mbltlXT1mdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksdC51aXx8KHRbImNsZWFuRGF0YSIrbnRdPXQuY2xlYW5EYXRhLHQuY2xlYW5EYXRhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbixpPTA7KG49dChlW2ldKSkubGVuZ3RoO2krKylpZihuLmF0dHIocSkpdHJ5e24udHJpZ2dlckhhbmRsZXIoInJlbW92ZXF0aXAiKX1jYXRjaChyKXt9dFsiY2xlYW5EYXRhIitudF0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSksay52ZXJzaW9uPSIzLjAuMy01LWciLGsubmV4dGlkPTAsay5pbmFjdGl2ZUV2ZW50cz1KLGsuemluZGV4PTE1ZTMsay5kZWZhdWx0cz17cHJlcmVuZGVyOkMsaWQ6QyxvdmVyd3JpdGU6RCxzdXBwcmVzczpELGNvbnRlbnQ6e3RleHQ6RCxhdHRyOiJ0aXRsZSIsdGl0bGU6QyxidXR0b246Q30scG9zaXRpb246e215OiJ0b3AgbGVmdCIsYXQ6ImJvdHRvbSByaWdodCIsdGFyZ2V0OkMsY29udGFpbmVyOkMsdmlld3BvcnQ6QyxhZGp1c3Q6e3g6MCx5OjAsbW91c2U6RCxzY3JvbGw6RCxyZXNpemU6RCxtZXRob2Q6ImZsaXBpbnZlcnQgZmxpcGludmVydCJ9LGVmZmVjdDpmdW5jdGlvbihlLG4pe3QodGhpcykuYW5pbWF0ZShuLHtkdXJhdGlvbjoyMDAscXVldWU6Q30pfX0sc2hvdzp7dGFyZ2V0OkMsZXZlbnQ6Im1vdXNlZW50ZXIiLGVmZmVjdDpELGRlbGF5OjkwLHNvbG86QyxyZWFkeTpDLGF1dG9mb2N1czpDfSxoaWRlOnt0YXJnZXQ6QyxldmVudDoibW91c2VsZWF2ZSIsZWZmZWN0OkQsZGVsYXk6MCxmaXhlZDpDLGluYWN0aXZlOkMsbGVhdmU6IndpbmRvdyIsZGlzdGFuY2U6Q30sc3R5bGU6e2NsYXNzZXM6IiIsd2lkZ2V0OkMsd2lkdGg6QyxoZWlnaHQ6QyxkZWY6RH0sZXZlbnRzOntyZW5kZXI6WSxtb3ZlOlksc2hvdzpZLGhpZGU6WSx0b2dnbGU6WSx2aXNpYmxlOlksaGlkZGVuOlksZm9jdXM6WSxibHVyOll9fTt2YXIgbHQsY3QsdXQsZHQsaHQscHQ9Im1hcmdpbiIsZnQ9ImJvcmRlciIsbXQ9ImNvbG9yIixfdD0iYmFja2dyb3VuZC1jb2xvciIsZ3Q9InRyYW5zcGFyZW50Iix2dD0iICFpbXBvcnRhbnQiLHl0PSEhbC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0LGJ0PS9yZ2JhP1woMCwgMCwgMCgsIDApP1wpfHRyYW5zcGFyZW50fCMxMjM0NTYvaSx3dD17fSxNdD1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO3l0PyhkdD1hLmRldmljZVBpeGVsUmF0aW98fDEsaHQ9ZnVuY3Rpb24oKXt2YXIgdD1sLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQoIjJkIik7cmV0dXJuIHQuYmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8dC53ZWJraXRCYWNraW5nU3RvcmVQaXhlbFJhdGlvfHx0Lm1vekJhY2tpbmdTdG9yZVBpeGVsUmF0aW98fHQubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvfHx0Lm9CYWNraW5nU3RvcmVQaXhlbFJhdGlvfHwxfSgpLHV0PWR0L2h0KTpjdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIjxxdGlwdm1sOiIrdCsnIHhtbG5zPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbCIgY2xhc3M9InF0aXAtdm1sIiAnKyhlfHwiIikrJyBzdHlsZT0iYmVoYXZpb3I6IHVybCgjZGVmYXVsdCNWTUwpOyAnKyhufHwiIikrJyIgLz4nfSx0LmV4dGVuZChNLnByb3RvdHlwZSx7aW5pdDpmdW5jdGlvbihlKXt2YXIgbixpO2k9dGhpcy5lbGVtZW50PWUuZWxlbWVudHMudGlwPXQoIjxkaXYgLz4iLHsiY2xhc3MiOlYrIi10aXAifSkucHJlcGVuZFRvKGUudG9vbHRpcCkseXQ/KG49dCgiPGNhbnZhcyAvPiIpLmFwcGVuZFRvKHRoaXMuZWxlbWVudClbMF0uZ2V0Q29udGV4dCgiMmQiKSxuLmxpbmVKb2luPSJtaXRlciIsbi5taXRlckxpbWl0PTFlNSxuLnNhdmUoKSk6KG49Y3QoInNoYXBlIiwnY29vcmRvcmlnaW49IjAsMCInLCJwb3NpdGlvbjphYnNvbHV0ZTsiKSx0aGlzLmVsZW1lbnQuaHRtbChuK24pLGUuX2JpbmQodCgiKiIsaSkuYWRkKGkpLFsiY2xpY2siLCJtb3VzZWRvd24iXSxmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfSx0aGlzLl9ucykpLGUuX2JpbmQoZS50b29sdGlwLCJ0b29sdGlwbW92ZSIsdGhpcy5yZXBvc2l0aW9uLHRoaXMuX25zLHRoaXMpLHRoaXMuY3JlYXRlKCl9LF9zd2FwRGltZW5zaW9uczpmdW5jdGlvbigpe3RoaXMuc2l6ZVswXT10aGlzLm9wdGlvbnMuaGVpZ2h0LHRoaXMuc2l6ZVsxXT10aGlzLm9wdGlvbnMud2lkdGh9LF9yZXNldERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt0aGlzLnNpemVbMF09dGhpcy5vcHRpb25zLndpZHRoLHRoaXMuc2l6ZVsxXT10aGlzLm9wdGlvbnMuaGVpZ2h0fSxfdXNlVGl0bGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5xdGlwLmVsZW1lbnRzLnRpdGxlYmFyO3JldHVybiBlJiYodC55PT09Unx8dC55PT09eiYmdGhpcy5lbGVtZW50LnBvc2l0aW9uKCkudG9wK3RoaXMuc2l6ZVsxXS8yK3RoaXMub3B0aW9ucy5vZmZzZXQ8ZS5vdXRlckhlaWdodChEKSl9LF9wYXJzZUNvcm5lcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnF0aXAub3B0aW9ucy5wb3NpdGlvbi5teTtyZXR1cm4gdD09PUN8fGU9PT1DP3Q9Qzp0PT09RD90PW5ldyB4KGUuc3RyaW5nKCkpOnQuc3RyaW5nfHwodD1uZXcgeCh0KSx0LmZpeGVkPUQpLHR9LF9wYXJzZVdpZHRoOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnF0aXAuZWxlbWVudHMscj1mdCt5KGUpKyJXaWR0aCI7cmV0dXJuKG4/dyhuLHIpOncoaS5jb250ZW50LHIpfHx3KHRoaXMuX3VzZVRpdGxlKHQpJiZpLnRpdGxlYmFyfHxpLmNvbnRlbnQscil8fHcoaS50b29sdGlwLHIpKXx8MH0sX3BhcnNlUmFkaXVzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucXRpcC5lbGVtZW50cyxuPWZ0K3kodC55KSt5KHQueCkrIlJhZGl1cyI7cmV0dXJuIHJ0LmllPDk/MDp3KHRoaXMuX3VzZVRpdGxlKHQpJiZlLnRpdGxlYmFyfHxlLmNvbnRlbnQsbil8fHcoZS50b29sdGlwLG4pfHwwfSxfaW52YWxpZENvbG91cjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5jc3MoZSk7cmV0dXJuIWl8fG4mJmk9PT10LmNzcyhuKXx8YnQudGVzdChpKT9DOml9LF9wYXJzZUNvbG91cnM6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5xdGlwLmVsZW1lbnRzLGk9dGhpcy5lbGVtZW50LmNzcygiY3NzVGV4dCIsIiIpLHI9ZnQreShlW2UucHJlY2VkYW5jZV0pK3kobXQpLG89dGhpcy5fdXNlVGl0bGUoZSkmJm4udGl0bGViYXJ8fG4uY29udGVudCxzPXRoaXMuX2ludmFsaWRDb2xvdXIsYT1bXTtyZXR1cm4gYVswXT1zKGksX3QpfHxzKG8sX3QpfHxzKG4uY29udGVudCxfdCl8fHMobi50b29sdGlwLF90KXx8aS5jc3MoX3QpLGFbMV09cyhpLHIsbXQpfHxzKG8scixtdCl8fHMobi5jb250ZW50LHIsbXQpfHxzKG4udG9vbHRpcCxyLG10KXx8bi50b29sdGlwLmNzcyhyKSx0KCIqIixpKS5hZGQoaSkuY3NzKCJjc3NUZXh0IixfdCsiOiIrZ3QrdnQrIjsiK2Z0KyI6MCIrdnQrIjsiKSxhfSxfY2FsY3VsYXRlU2l6ZTpmdW5jdGlvbih0KXt2YXIgZSxuLGkscj10LnByZWNlZGFuY2U9PT1QLG89dGhpcy5vcHRpb25zLndpZHRoLHM9dGhpcy5vcHRpb25zLmhlaWdodCxhPSJjIj09PXQuYWJicmV2KCksbD0ocj9vOnMpKihhPy41OjEpLGM9TWF0aC5wb3csdT1NYXRoLnJvdW5kLGQ9TWF0aC5zcXJ0KGMobCwyKStjKHMsMikpLGg9W3RoaXMuYm9yZGVyL2wqZCx0aGlzLmJvcmRlci9zKmRdO3JldHVybiBoWzJdPU1hdGguc3FydChjKGhbMF0sMiktYyh0aGlzLmJvcmRlciwyKSksaFszXT1NYXRoLnNxcnQoYyhoWzFdLDIpLWModGhpcy5ib3JkZXIsMikpLGU9ZCtoWzJdK2hbM10rKGE/MDpoWzBdKSxuPWUvZCxpPVt1KG4qbyksdShuKnMpXSxyP2k6aS5yZXZlcnNlKCl9LF9jYWxjdWxhdGVUaXA6ZnVuY3Rpb24odCxlLG4pe249bnx8MSxlPWV8fHRoaXMuc2l6ZTt2YXIgaT1lWzBdKm4scj1lWzFdKm4sbz1NYXRoLmNlaWwoaS8yKSxzPU1hdGguY2VpbChyLzIpLGE9e2JyOlswLDAsaSxyLGksMF0sYmw6WzAsMCxpLDAsMCxyXSx0cjpbMCxyLGksMCxpLHJd", "base64"));
  res.write(new Buffer("LHRsOlswLDAsMCxyLGkscl0sdGM6WzAscixvLDAsaSxyXSxiYzpbMCwwLGksMCxvLHJdLHJjOlswLDAsaSxzLDAscl0sbGM6W2ksMCxpLHIsMCxzXX07cmV0dXJuIGEubHQ9YS5icixhLnJ0PWEuYmwsYS5sYj1hLnRyLGEucmI9YS50bCxhW3QuYWJicmV2KCldfSxfZHJhd0Nvb3JkczpmdW5jdGlvbih0LGUpe3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8oZVswXSxlWzFdKSx0LmxpbmVUbyhlWzJdLGVbM10pLHQubGluZVRvKGVbNF0sZVs1XSksdC5jbG9zZVBhdGgoKX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb3JuZXI9KHl0fHxydC5pZSkmJnRoaXMuX3BhcnNlQ29ybmVyKHRoaXMub3B0aW9ucy5jb3JuZXIpO3JldHVybiB0aGlzLmVuYWJsZWQ9ISF0aGlzLmNvcm5lciYmImMiIT09dGhpcy5jb3JuZXIuYWJicmV2KCksdGhpcy5lbmFibGVkJiYodGhpcy5xdGlwLmNhY2hlLmNvcm5lcj10LmNsb25lKCksdGhpcy51cGRhdGUoKSksdGhpcy5lbGVtZW50LnRvZ2dsZSh0aGlzLmVuYWJsZWQpLHRoaXMuY29ybmVyfSx1cGRhdGU6ZnVuY3Rpb24oZSxuKXtpZighdGhpcy5lbmFibGVkKXJldHVybiB0aGlzO3ZhciBpLHIsbyxzLGwsYyx1LGQsaD10aGlzLnF0aXAuZWxlbWVudHMscD10aGlzLmVsZW1lbnQsZj1wLmNoaWxkcmVuKCksbT10aGlzLm9wdGlvbnMsXz10aGlzLnNpemUsZz1tLm1pbWljLHY9TWF0aC5yb3VuZDtlfHwoZT10aGlzLnF0aXAuY2FjaGUuY29ybmVyfHx0aGlzLmNvcm5lciksZz09PUM/Zz1lOihnPW5ldyB4KGcpLGcucHJlY2VkYW5jZT1lLnByZWNlZGFuY2UsImluaGVyaXQiPT09Zy54P2cueD1lLng6ImluaGVyaXQiPT09Zy55P2cueT1lLnk6Zy54PT09Zy55JiYoZ1tlLnByZWNlZGFuY2VdPWVbZS5wcmVjZWRhbmNlXSkpLHI9Zy5wcmVjZWRhbmNlLGUucHJlY2VkYW5jZT09PU8/dGhpcy5fc3dhcERpbWVuc2lvbnMoKTp0aGlzLl9yZXNldERpbWVuc2lvbnMoKSxpPXRoaXMuY29sb3I9dGhpcy5fcGFyc2VDb2xvdXJzKGUpLGlbMV0hPT1ndD8oZD10aGlzLmJvcmRlcj10aGlzLl9wYXJzZVdpZHRoKGUsZVtlLnByZWNlZGFuY2VdKSxtLmJvcmRlciYmZDwxJiYhYnQudGVzdChpWzFdKSYmKGlbMF09aVsxXSksdGhpcy5ib3JkZXI9ZD1tLmJvcmRlciE9PUQ/bS5ib3JkZXI6ZCk6dGhpcy5ib3JkZXI9ZD0wLHU9dGhpcy5zaXplPXRoaXMuX2NhbGN1bGF0ZVNpemUoZSkscC5jc3Moe3dpZHRoOnVbMF0saGVpZ2h0OnVbMV0sbGluZUhlaWdodDp1WzFdKyJweCJ9KSxjPWUucHJlY2VkYW5jZT09PVA/W3YoZy54PT09aj9kOmcueD09PUY/dVswXS1fWzBdLWQ6KHVbMF0tX1swXSkvMiksdihnLnk9PT1SP3VbMV0tX1sxXTowKV06W3YoZy54PT09aj91WzBdLV9bMF06MCksdihnLnk9PT1SP2Q6Zy55PT09SD91WzFdLV9bMV0tZDoodVsxXS1fWzFdKS8yKV0seXQ/KG89ZlswXS5nZXRDb250ZXh0KCIyZCIpLG8ucmVzdG9yZSgpLG8uc2F2ZSgpLG8uY2xlYXJSZWN0KDAsMCw2ZTMsNmUzKSxzPXRoaXMuX2NhbGN1bGF0ZVRpcChnLF8sdXQpLGw9dGhpcy5fY2FsY3VsYXRlVGlwKGcsdGhpcy5zaXplLHV0KSxmLmF0dHIoTix1WzBdKnV0KS5hdHRyKEksdVsxXSp1dCksZi5jc3MoTix1WzBdKS5jc3MoSSx1WzFdKSx0aGlzLl9kcmF3Q29vcmRzKG8sbCksby5maWxsU3R5bGU9aVsxXSxvLmZpbGwoKSxvLnRyYW5zbGF0ZShjWzBdKnV0LGNbMV0qdXQpLHRoaXMuX2RyYXdDb29yZHMobyxzKSxvLmZpbGxTdHlsZT1pWzBdLG8uZmlsbCgpKToocz10aGlzLl9jYWxjdWxhdGVUaXAoZykscz0ibSIrc1swXSsiLCIrc1sxXSsiIGwiK3NbMl0rIiwiK3NbM10rIiAiK3NbNF0rIiwiK3NbNV0rIiB4ZSIsY1syXT1kJiYvXihyfGIpL2kudGVzdChlLnN0cmluZygpKT84PT09cnQuaWU/MjoxOjAsZi5jc3Moe2Nvb3Jkc2l6ZTp1WzBdK2QrIiAiK3VbMV0rZCxhbnRpYWxpYXM6IiIrKGcuc3RyaW5nKCkuaW5kZXhPZih6KT4tMSksbGVmdDpjWzBdLWNbMl0qTnVtYmVyKHI9PT1PKSx0b3A6Y1sxXS1jWzJdKk51bWJlcihyPT09UCksd2lkdGg6dVswXStkLGhlaWdodDp1WzFdK2R9KS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXQodGhpcyk7bltuLnByb3A/InByb3AiOiJhdHRyIl0oe2Nvb3Jkc2l6ZTp1WzBdK2QrIiAiK3VbMV0rZCxwYXRoOnMsZmlsbGNvbG9yOmlbMF0sZmlsbGVkOiEhZSxzdHJva2VkOiFlfSkudG9nZ2xlKCEoIWQmJiFlKSksIWUmJm4uaHRtbChjdCgic3Ryb2tlIiwnd2VpZ2h0PSInKzIqZCsncHgiIGNvbG9yPSInK2lbMV0rJyIgbWl0ZXJsaW1pdD0iMTAwMCIgam9pbnN0eWxlPSJtaXRlciInKSk7Cgl9KSksYS5vcGVyYSYmc2V0VGltZW91dChmdW5jdGlvbigpe2gudGlwLmNzcyh7ZGlzcGxheToiaW5saW5lLWJsb2NrIix2aXNpYmlsaXR5OiJ2aXNpYmxlIn0pfSwxKSxuIT09QyYmdGhpcy5jYWxjdWxhdGUoZSx1KX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGUsbil7aWYoIXRoaXMuZW5hYmxlZClyZXR1cm4gQzt2YXIgaSxyLG89dGhpcyxzPXRoaXMucXRpcC5lbGVtZW50cyxhPXRoaXMuZWxlbWVudCxsPXRoaXMub3B0aW9ucy5vZmZzZXQsYz17fTtyZXR1cm4gZT1lfHx0aGlzLmNvcm5lcixpPWUucHJlY2VkYW5jZSxuPW58fHRoaXMuX2NhbGN1bGF0ZVNpemUoZSkscj1bZS54LGUueV0saT09PU8mJnIucmV2ZXJzZSgpLHQuZWFjaChyLGZ1bmN0aW9uKHQscil7dmFyIGEsdSxkO3I9PT16PyhhPWk9PT1QP2o6UixjW2FdPSI1MCUiLGNbcHQrIi0iK2FdPS1NYXRoLnJvdW5kKG5baT09PVA/MDoxXS8yKStsKTooYT1vLl9wYXJzZVdpZHRoKGUscixzLnRvb2x0aXApLHU9by5fcGFyc2VXaWR0aChlLHIscy5jb250ZW50KSxkPW8uX3BhcnNlUmFkaXVzKGUpLGNbcl09TWF0aC5tYXgoLW8uYm9yZGVyLHQ/dTpsKyhkPmE/ZDotYSkpKX0pLGNbZVtpXV0tPW5baT09PU8/MDoxXSxhLmNzcyh7bWFyZ2luOiIiLHRvcDoiIixib3R0b206IiIsbGVmdDoiIixyaWdodDoiIn0pLmNzcyhjKSxjfSxyZXBvc2l0aW9uOmZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuLGkscil7dD09PVcmJmwucHJlY2VkYW5jZT09PWUmJnVbaV0mJmxbbl0hPT16P2wucHJlY2VkYW5jZT1sLnByZWNlZGFuY2U9PT1PP1A6Tzp0IT09VyYmdVtpXSYmKGxbZV09bFtlXT09PXo/dVtpXT4wP2k6cjpsW2VdPT09aT9yOmkpfWZ1bmN0aW9uIHIodCxlLGkpe2xbdF09PT16P21bcHQrIi0iK2VdPWZbdF09b1twdCsiLSIrZV0tdVtlXToocz1vW2ldIT09Yz9bdVtlXSwtb1tlXV06Wy11W2VdLG9bZV1dLChmW3RdPU1hdGgubWF4KHNbMF0sc1sxXSkpPnNbMF0mJihuW2VdLT11W2VdLGZbZV09QyksbVtvW2ldIT09Yz9pOmVdPWZbdF0pfWlmKHRoaXMuZW5hYmxlZCl7dmFyIG8scyxhPWUuY2FjaGUsbD10aGlzLmNvcm5lci5jbG9uZSgpLHU9bi5hZGp1c3RlZCxkPWUub3B0aW9ucy5wb3NpdGlvbi5hZGp1c3QubWV0aG9kLnNwbGl0KCIgIiksaD1kWzBdLHA9ZFsxXXx8ZFswXSxmPXtsZWZ0OkMsdG9wOkMseDowLHk6MH0sbT17fTt0aGlzLmNvcm5lci5maXhlZCE9PUQmJihpKGgsTyxQLGosRiksaShwLFAsTyxSLEgpLGwuc3RyaW5nKCk9PT1hLmNvcm5lci5zdHJpbmcoKSYmYS5jb3JuZXJUb3A9PT11LnRvcCYmYS5jb3JuZXJMZWZ0PT09dS5sZWZ0fHx0aGlzLnVwZGF0ZShsLEMpKSxvPXRoaXMuY2FsY3VsYXRlKGwpLG8ucmlnaHQhPT1jJiYoby5sZWZ0PS1vLnJpZ2h0KSxvLmJvdHRvbSE9PWMmJihvLnRvcD0tby5ib3R0b20pLG8udXNlcj10aGlzLm9mZnNldCxmLmxlZnQ9aD09PVcmJiEhdS5sZWZ0LGYubGVmdCYmcihPLGosRiksZi50b3A9cD09PVcmJiEhdS50b3AsZi50b3AmJnIoUCxSLEgpLHRoaXMuZWxlbWVudC5jc3MobSkudG9nZ2xlKCEoZi54JiZmLnl8fGwueD09PXomJmYueXx8bC55PT09eiYmZi54KSksbi5sZWZ0LT1vLmxlZnQuY2hhckF0P28udXNlcjpoIT09V3x8Zi50b3B8fCFmLmxlZnQmJiFmLnRvcD9vLmxlZnQrdGhpcy5ib3JkZXI6MCxuLnRvcC09by50b3AuY2hhckF0P28udXNlcjpwIT09V3x8Zi5sZWZ0fHwhZi5sZWZ0JiYhZi50b3A/by50b3ArdGhpcy5ib3JkZXI6MCxhLmNvcm5lckxlZnQ9dS5sZWZ0LGEuY29ybmVyVG9wPXUudG9wLGEuY29ybmVyPWwuY2xvbmUoKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnF0aXAuX3VuYmluZCh0aGlzLnF0aXAudG9vbHRpcCx0aGlzLl9ucyksdGhpcy5xdGlwLmVsZW1lbnRzLnRpcCYmdGhpcy5xdGlwLmVsZW1lbnRzLnRpcC5maW5kKCIqIikucmVtb3ZlKCkuZW5kKCkucmVtb3ZlKCl9fSksbHQ9Qi50aXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBNKHQsdC5vcHRpb25zLnN0eWxlLnRpcCl9LGx0LmluaXRpYWxpemU9InJlbmRlciIsbHQuc2FuaXRpemU9ZnVuY3Rpb24odCl7aWYodC5zdHlsZSYmInRpcCJpbiB0LnN0eWxlKXt2YXIgZT10LnN0eWxlLnRpcDsib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6cyhlKSkmJihlPXQuc3R5bGUudGlwPXtjb3JuZXI6ZX0pLC9zdHJpbmd8Ym9vbGVhbi9pLnRlc3QocyhlLmNvcm5lcikpfHwoZS5jb3JuZXI9RCl9fSxBLnRpcD17Il5wb3NpdGlvbi5teXxzdHlsZS50aXAuKGNvcm5lcnxtaW1pY3xib3JkZXIpJCI6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZSgpLHRoaXMucXRpcC5yZXBvc2l0aW9uKCl9LCJec3R5bGUudGlwLihoZWlnaHR8d2lkdGgpJCI6ZnVuY3Rpb24odCl7dGhpcy5zaXplPVt0LndpZHRoLHQuaGVpZ2h0XSx0aGlzLnVwZGF0ZSgpLHRoaXMucXRpcC5yZXBvc2l0aW9uKCl9LCJeY29udGVudC50aXRsZXxzdHlsZS4oY2xhc3Nlc3x3aWRnZXQpJCI6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZSgpfX0sdC5leHRlbmQoRCxrLmRlZmF1bHRzLHtzdHlsZTp7dGlwOntjb3JuZXI6RCxtaW1pYzpDLHdpZHRoOjYsaGVpZ2h0OjYsYm9yZGVyOkQsb2Zmc2V0OjB9fX0pO3ZhciBTdCxUdCxrdD0icXRpcC1tb2RhbCIsTHQ9Ii4iK2t0O1R0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0LmV4cHJbIjoiXS5mb2N1c2FibGUpcmV0dXJuIHQuZXhwclsiOiJdLmZvY3VzYWJsZTt2YXIgbixpLHIsbz0haXNOYU4odC5hdHRyKGUsInRhYmluZGV4IikpLHM9ZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJhcmVhIj09PXM/KG49ZS5wYXJlbnROb2RlLGk9bi5uYW1lLCEoIWUuaHJlZnx8IWl8fCJtYXAiIT09bi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmKHI9dCgiaW1nW3VzZW1hcD0jIitpKyJdIilbMF0sISFyJiZyLmlzKCI6dmlzaWJsZSIpKSk6L2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KHMpPyFlLmRpc2FibGVkOiJhIj09PXM/ZS5ocmVmfHxvOm99ZnVuY3Rpb24gbih0KXtjLmxlbmd0aDwxJiZ0Lmxlbmd0aD90Lm5vdCgiYm9keSIpLmJsdXIoKTpjLmZpcnN0KCkuZm9jdXMoKX1mdW5jdGlvbiBpKGUpe2lmKHMuaXMoIjp2aXNpYmxlIikpe3ZhciBpLG89dChlLnRhcmdldCksYT1yLnRvb2x0aXAsbD1vLmNsb3Nlc3QoSyk7aT1sLmxlbmd0aDwxP0M6cGFyc2VJbnQobFswXS5zdHlsZS56SW5kZXgsMTApPnBhcnNlSW50KGFbMF0uc3R5bGUuekluZGV4LDEwKSxpfHxvLmNsb3Nlc3QoSylbMF09PT1hWzBdfHxuKG8pfX12YXIgcixvLHMsYT10aGlzLGM9e307dC5leHRlbmQoYSx7aW5pdDpmdW5jdGlvbigpe3JldHVybiBzPWEuZWxlbT10KCI8ZGl2IC8+Iix7aWQ6InF0aXAtb3ZlcmxheSIsaHRtbDoiPGRpdj48L2Rpdj4iLG1vdXNlZG93bjpmdW5jdGlvbigpe3JldHVybiBDfX0pLmhpZGUoKSx0KGwuYm9keSkuYmluZCgiZm9jdXNpbiIrTHQsaSksdChsKS5iaW5kKCJrZXlkb3duIitMdCxmdW5jdGlvbih0KXtyJiZyLm9wdGlvbnMuc2hvdy5tb2RhbC5lc2NhcGUmJjI3PT09dC5rZXlDb2RlJiZyLmhpZGUodCl9KSxzLmJpbmQoImNsaWNrIitMdCxmdW5jdGlvbih0KXtyJiZyLm9wdGlvbnMuc2hvdy5tb2RhbC5ibHVyJiZyLmhpZGUodCl9KSxhfSx1cGRhdGU6ZnVuY3Rpb24odCl7cj10LGM9dC5vcHRpb25zLnNob3cubW9kYWwuc3RlYWxmb2N1cyE9PUM/dC50b29sdGlwLmZpbmQoIioiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKX0pOltdfSx0b2dnbGU6ZnVuY3Rpb24oZSxpLGMpe3ZhciB1PWUudG9vbHRpcCxkPWUub3B0aW9ucy5zaG93Lm1vZGFsLGg9ZC5lZmZlY3QscD1pPyJzaG93IjoiaGlkZSIsZj1zLmlzKCI6dmlzaWJsZSIpLG09dChMdCkuZmlsdGVyKCI6dmlzaWJsZTpub3QoOmFuaW1hdGVkKSIpLm5vdCh1KTtyZXR1cm4gYS51cGRhdGUoZSksaSYmZC5zdGVhbGZvY3VzIT09QyYmbih0KCI6Zm9jdXMiKSkscy50b2dnbGVDbGFzcygiYmx1cnMiLGQuYmx1ciksaSYmcy5hcHBlbmRUbyhsLmJvZHkpLHMuaXMoIjphbmltYXRlZCIpJiZmPT09aSYmbyE9PUN8fCFpJiZtLmxlbmd0aD9hOihzLnN0b3AoRCxDKSx0LmlzRnVuY3Rpb24oaCk/aC5jYWxsKHMsaSk6aD09PUM/c1twXSgpOnMuZmFkZVRvKHBhcnNlSW50KGMsMTApfHw5MCxpPzE6MCxmdW5jdGlvbigpe2l8fHMuaGlkZSgpfSksaXx8cy5xdWV1ZShmdW5jdGlvbihlKXtzLmNzcyh7bGVmdDoiIix0b3A6IiJ9KSx0KEx0KS5sZW5ndGh8fHMuZGV0YWNoKCksZSgpfSksbz1pLHIuZGVzdHJveWVkJiYocj1ZKSxhKX19KSxhLmluaXQoKX0sVHQ9bmV3IFR0LHQuZXh0ZW5kKFMucHJvdG90eXBlLHtpbml0OmZ1bmN0aW9uKGUpe3ZhciBuPWUudG9vbHRpcDtyZXR1cm4gdGhpcy5vcHRpb25zLm9uPyhlLmVsZW1lbnRzLm92ZXJsYXk9VHQuZWxlbSxuLmFkZENsYXNzKGt0KS5jc3MoInotaW5kZXgiLGsubW9kYWxfemluZGV4K3QoTHQpLmxlbmd0aCksZS5fYmluZChuLFsidG9vbHRpcHNob3ciLCJ0b29sdGlwaGlkZSJdLGZ1bmN0aW9uKGUsaSxyKXt2YXIgbz1lLm9yaWdpbmFsRXZlbnQ7aWYoZS50YXJnZXQ9PT1uWzBdKWlmKG8mJiJ0b29sdGlwaGlkZSI9PT1lLnR5cGUmJi9tb3VzZShsZWF2ZXxlbnRlcikvLnRlc3Qoby50eXBlKSYmdChvLnJlbGF0ZWRUYXJnZXQpLmNsb3Nlc3QoVHQuZWxlbVswXSkubGVuZ3RoKXRyeXtlLnByZXZlbnREZWZhdWx0KCl9Y2F0Y2gocyl7fWVsc2UoIW98fG8mJiJ0b29sdGlwc29sbyIhPT1vLnR5cGUpJiZ0aGlzLnRvZ2dsZShlLCJ0b29sdGlwc2hvdyI9PT1lLnR5cGUscil9LHRoaXMuX25zLHRoaXMpLGUuX2JpbmQobiwidG9vbHRpcGZvY3VzIixmdW5jdGlvbihlLGkpe2lmKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZlLnRhcmdldD09PW5bMF0pe3ZhciByPXQoTHQpLG89ay5tb2RhbF96aW5kZXgrci5sZW5ndGgscz1wYXJzZUludChuWzBdLnN0eWxlLnpJbmRleCwxMCk7VHQuZWxlbVswXS5zdHlsZS56SW5kZXg9by0xLHIuZWFjaChmdW5jdGlvbigpe3RoaXMuc3R5bGUuekluZGV4PnMmJih0aGlzLnN0eWxlLnpJbmRleC09MSl9KSxyLmZpbHRlcigiLiIrWikucXRpcCgiYmx1ciIsZS5vcmlnaW5hbEV2ZW50KSxuLmFkZENsYXNzKFopWzBdLnN0eWxlLnpJbmRleD1vLFR0LnVwZGF0ZShpKTt0cnl7ZS5wcmV2ZW50RGVmYXVsdCgpfWNhdGNoKGEpe319fSx0aGlzLl9ucyx0aGlzKSx2b2lkIGUuX2JpbmQobiwidG9vbHRpcGhpZGUiLGZ1bmN0aW9uKGUpe2UudGFyZ2V0PT09blswXSYmdChMdCkuZmlsdGVyKCI6dmlzaWJsZSIpLm5vdChuKS5sYXN0KCkucXRpcCgiZm9jdXMiLGUpfSx0aGlzLl9ucyx0aGlzKSk6dGhpc30sdG9nZ2xlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCYmdC5pc0RlZmF1bHRQcmV2ZW50ZWQoKT90aGlzOnZvaWQgVHQudG9nZ2xlKHRoaXMucXRpcCwhIWUsbil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnF0aXAudG9vbHRpcC5yZW1vdmVDbGFzcyhrdCksdGhpcy5xdGlwLl91bmJpbmQodGhpcy5xdGlwLnRvb2x0aXAsdGhpcy5fbnMpLFR0LnRvZ2dsZSh0aGlzLnF0aXAsQyksZGVsZXRlIHRoaXMucXRpcC5lbGVtZW50cy5vdmVybGF5fX0pLFN0PUIubW9kYWw9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBTKHQsdC5vcHRpb25zLnNob3cubW9kYWwpfSxTdC5zYW5pdGl6ZT1mdW5jdGlvbih0KXt0LnNob3cmJigib2JqZWN0IiE9PXModC5zaG93Lm1vZGFsKT90LnNob3cubW9kYWw9e29uOiEhdC5zaG93Lm1vZGFsfToidW5kZWZpbmVkIj09dHlwZW9mIHQuc2hvdy5tb2RhbC5vbiYmKHQuc2hvdy5tb2RhbC5vbj1EKSl9LGsubW9kYWxfemluZGV4PWsuemluZGV4LTIwMCxTdC5pbml0aWFsaXplPSJyZW5kZXIiLEEubW9kYWw9eyJec2hvdy5tb2RhbC4ob258Ymx1cikkIjpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpLHRoaXMuaW5pdCgpLHRoaXMucXRpcC5lbGVtcy5vdmVybGF5LnRvZ2dsZSh0aGlzLnF0aXAudG9vbHRpcFswXS5vZmZzZXRXaWR0aD4wKX19LHQuZXh0ZW5kKEQsay5kZWZhdWx0cyx7c2hvdzp7bW9kYWw6e29uOkMsZWZmZWN0OkQsYmx1cjpELHN0ZWFsZm9jdXM6RCxlc2NhcGU6RH19fSksQi52aWV3cG9ydD1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXtmdW5jdGlvbiBjKHQsbixpLHIsbyxzLGEsbCxjKXt2YXIgdT1lW29dLHY9Ylt0XSx5PXdbdF0sTT1pPT09VyxTPXY9PT1vP2M6dj09PXM/LWM6LWMvMixUPXk9PT1vP2w6eT09PXM/LWw6LWwvMixrPV9bb10rZ1tvXS0ocD8wOmhbb10pLEw9ay11LHg9dStjLShhPT09Tj9mOm0pLWssQT1TLShiLnByZWNlZGFuY2U9PT10fHx2PT09YltuXT9UOjApLSh5PT09ej9sLzI6MCk7cmV0dXJuIE0/KEE9KHY9PT1vPzE6LTEpKlMsZVtvXSs9TD4wP0w6eD4wPy14OjAsZVtvXT1NYXRoLm1heCgtaFtvXStnW29dLHUtQSxNYXRoLm1pbihNYXRoLm1heCgtaFtvXStnW29dKyhhPT09Tj9mOm0pLHUrQSksZVtvXSwiY2VudGVyIj09PXY/dS1TOjFlOSkpKToocio9aT09PVU/MjowLEw+MCYmKHYhPT1vfHx4PjApPyhlW29dLT1BK3IsZC5pbnZlcnQodCxvKSk6eD4wJiYodiE9PXN8fEw+MCkmJihlW29dLT0odj09PXo/LUE6QSkrcixkLmludmVydCh0LHMpKSxlW29dPF9bb10mJi1lW29dPngmJihlW29dPXUsZD1iLmNsb25lKCkpKSxlW29dLXV9dmFyIHUsZCxoLHAsZixtLF8sZyx2PW4udGFyZ2V0LHk9dC5lbGVtZW50cy50b29sdGlwLGI9bi5teSx3PW4uYXQsTT1uLmFkanVzdCxTPU0ubWV0aG9kLnNwbGl0KCIgIiksVD1TWzBdLGs9U1sxXXx8U1swXSxMPW4udmlld3BvcnQseD1uLmNvbnRhaW5lcixBPXtsZWZ0OjAsdG9wOjB9O3JldHVybiBMLmpxdWVyeSYmdlswXSE9PWEmJnZbMF0hPT1sLmJvZHkmJiJub25lIiE9PU0ubWV0aG9kPyhoPXgub2Zmc2V0KCl8fEEscD0ic3RhdGljIj09PXguY3NzKCJwb3NpdGlvbiIpLHU9ImZpeGVkIj09PXkuY3NzKCJwb3NpdGlvbiIpLGY9TFswXT09PWE/TC53aWR0aCgpOkwub3V0ZXJXaWR0aChDKSxtPUxbMF09PT1hP0wuaGVpZ2h0KCk6TC5vdXRlckhlaWdodChDKSxfPXtsZWZ0OnU/MDpMLnNjcm9sbExlZnQoKSx0b3A6dT8wOkwuc2Nyb2xsVG9wKCl9LGc9TC5vZmZzZXQoKXx8QSwic2hpZnQiPT09VCYmInNoaWZ0Ij09PWt8fChkPWIuY2xvbmUoKSksQT17bGVmdDoibm9uZSIhPT1UP2MoTyxQLFQsTS54LGosRixOLGksbyk6MCx0b3A6Im5vbmUiIT09az9jKFAsTyxrLE0ueSxSLEgsSSxyLHMpOjAsbXk6ZH0pOkF9LEIucG9seXM9e3BvbHlnb246ZnVuY3Rpb24odCxlKXt2YXIgbixpLHIsbz17d2lkdGg6MCxoZWlnaHQ6MCxwb3NpdGlvbjp7dG9wOjFlMTAscmlnaHQ6MCxib3R0b206MCxsZWZ0OjFlMTB9LGFkanVzdGFibGU6Q30scz0wLGE9W10sbD0xLGM9MSx1PTAsZD0wO2ZvcihzPXQubGVuZ3RoO3MtLTspbj1bcGFyc2VJbnQodFstLXNdLDEwKSxwYXJzZUludCh0W3MrMV0sMTApXSxuWzBdPm8ucG9zaXRpb24ucmlnaHQmJihvLnBvc2l0aW9uLnJpZ2h0PW5bMF0pLG5bMF08by5wb3NpdGlvbi5sZWZ0JiYoby5wb3NpdGlvbi5sZWZ0PW5bMF0pLG5bMV0+by5wb3NpdGlvbi5ib3R0b20mJihvLnBvc2l0aW9uLmJvdHRvbT1uWzFdKSxuWzFdPG8ucG9zaXRpb24udG9wJiYoby5wb3NpdGlvbi50b3A9blsxXSksYS5wdXNoKG4pO2lmKGk9by53aWR0aD1NYXRoLmFicyhvLnBvc2l0aW9uLnJpZ2h0LW8ucG9zaXRpb24ubGVmdCkscj1vLmhlaWdodD1NYXRoLmFicyhvLnBvc2l0aW9uLmJvdHRvbS1vLnBvc2l0aW9uLnRvcCksImMiPT09ZS5hYmJyZXYoKSlvLnBvc2l0aW9uPXtsZWZ0Om8ucG9zaXRpb24ubGVmdCtvLndpZHRoLzIsdG9wOm8ucG9zaXRpb24udG9wK28uaGVpZ2h0LzJ9O2Vsc2V7Zm9yKDtpPjAmJnI+MCYmbD4wJiZjPjA7KWZvcig=", "base64"));
  res.write(new Buffer("aT1NYXRoLmZsb29yKGkvMikscj1NYXRoLmZsb29yKHIvMiksZS54PT09aj9sPWk6ZS54PT09Rj9sPW8ud2lkdGgtaTpsKz1NYXRoLmZsb29yKGkvMiksZS55PT09Uj9jPXI6ZS55PT09SD9jPW8uaGVpZ2h0LXI6Yys9TWF0aC5mbG9vcihyLzIpLHM9YS5sZW5ndGg7cy0tJiYhKGEubGVuZ3RoPDIpOyl1PWFbc11bMF0tby5wb3NpdGlvbi5sZWZ0LGQ9YVtzXVsxXS1vLnBvc2l0aW9uLnRvcCwoZS54PT09aiYmdT49bHx8ZS54PT09RiYmdTw9bHx8ZS54PT09eiYmKHU8bHx8dT5vLndpZHRoLWwpfHxlLnk9PT1SJiZkPj1jfHxlLnk9PT1IJiZkPD1jfHxlLnk9PT16JiYoZDxjfHxkPm8uaGVpZ2h0LWMpKSYmYS5zcGxpY2UocywxKTtvLnBvc2l0aW9uPXtsZWZ0OmFbMF1bMF0sdG9wOmFbMF1bMV19fXJldHVybiBvfSxyZWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybnt3aWR0aDpNYXRoLmFicyhuLXQpLGhlaWdodDpNYXRoLmFicyhpLWUpLHBvc2l0aW9uOntsZWZ0Ok1hdGgubWluKHQsbiksdG9wOk1hdGgubWluKGUsaSl9fX0sX2FuZ2xlczp7dGM6MS41LHRyOjcvNCx0bDo1LzQsYmM6LjUsYnI6LjI1LGJsOi43NSxyYzoyLGxjOjEsYzowfSxlbGxpcHNlOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89Qi5wb2x5cy5fYW5nbGVzW3IuYWJicmV2KCldLHM9MD09PW8/MDpuKk1hdGguY29zKG8qTWF0aC5QSSksYT1pKk1hdGguc2luKG8qTWF0aC5QSSk7cmV0dXJue3dpZHRoOjIqbi1NYXRoLmFicyhzKSxoZWlnaHQ6MippLU1hdGguYWJzKGEpLHBvc2l0aW9uOntsZWZ0OnQrcyx0b3A6ZSthfSxhZGp1c3RhYmxlOkN9fSxjaXJjbGU6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIEIucG9seXMuZWxsaXBzZSh0LGUsbixuLGkpfX0sQi5zdmc9ZnVuY3Rpb24oZSxuLGkpe2Zvcih2YXIgcixvLHMsYSxjLHUsZCxoLHAsZj1uWzBdLG09dChmLm93bmVyU1ZHRWxlbWVudCksXz1mLm93bmVyRG9jdW1lbnQsZz0ocGFyc2VJbnQobi5jc3MoInN0cm9rZS13aWR0aCIpLDEwKXx8MCkvMjshZi5nZXRCQm94OylmPWYucGFyZW50Tm9kZTtpZighZi5nZXRCQm94fHwhZi5wYXJlbnROb2RlKXJldHVybiBDO3N3aXRjaChmLm5vZGVOYW1lKXtjYXNlImVsbGlwc2UiOmNhc2UiY2lyY2xlIjpoPUIucG9seXMuZWxsaXBzZShmLmN4LmJhc2VWYWwudmFsdWUsZi5jeS5iYXNlVmFsLnZhbHVlLChmLnJ4fHxmLnIpLmJhc2VWYWwudmFsdWUrZywoZi5yeXx8Zi5yKS5iYXNlVmFsLnZhbHVlK2csaSk7YnJlYWs7Y2FzZSJsaW5lIjpjYXNlInBvbHlnb24iOmNhc2UicG9seWxpbmUiOmZvcihkPWYucG9pbnRzfHxbe3g6Zi54MS5iYXNlVmFsLnZhbHVlLHk6Zi55MS5iYXNlVmFsLnZhbHVlfSx7eDpmLngyLmJhc2VWYWwudmFsdWUseTpmLnkyLmJhc2VWYWwudmFsdWV9XSxoPVtdLHU9LTEsYT1kLm51bWJlck9mSXRlbXN8fGQubGVuZ3RoOysrdTxhOyljPWQuZ2V0SXRlbT9kLmdldEl0ZW0odSk6ZFt1XSxoLnB1c2guYXBwbHkoaCxbYy54LGMueV0pO2g9Qi5wb2x5cy5wb2x5Z29uKGgsaSk7YnJlYWs7ZGVmYXVsdDpoPWYuZ2V0QkJveCgpLGg9e3dpZHRoOmgud2lkdGgsaGVpZ2h0OmguaGVpZ2h0LHBvc2l0aW9uOntsZWZ0OmgueCx0b3A6aC55fX19cmV0dXJuIHA9aC5wb3NpdGlvbixtPW1bMF0sbS5jcmVhdGVTVkdQb2ludCYmKG89Zi5nZXRTY3JlZW5DVE0oKSxkPW0uY3JlYXRlU1ZHUG9pbnQoKSxkLng9cC5sZWZ0LGQueT1wLnRvcCxzPWQubWF0cml4VHJhbnNmb3JtKG8pLHAubGVmdD1zLngscC50b3A9cy55KSxfIT09bCYmIm1vdXNlIiE9PWUucG9zaXRpb24udGFyZ2V0JiYocj10KChfLmRlZmF1bHRWaWV3fHxfLnBhcmVudFdpbmRvdykuZnJhbWVFbGVtZW50KS5vZmZzZXQoKSxyJiYocC5sZWZ0Kz1yLmxlZnQscC50b3ArPXIudG9wKSksXz10KF8pLHAubGVmdCs9Xy5zY3JvbGxMZWZ0KCkscC50b3ArPV8uc2Nyb2xsVG9wKCksaH0sQi5pbWFnZW1hcD1mdW5jdGlvbihlLG4saSl7bi5qcXVlcnl8fChuPXQobikpO3ZhciByLG8scyxhLGwsYz0obi5hdHRyKCJzaGFwZSIpfHwicmVjdCIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgicG9seSIsInBvbHlnb24iKSx1PXQoJ2ltZ1t1c2VtYXA9IiMnK24ucGFyZW50KCJtYXAiKS5hdHRyKCJuYW1lIikrJyJdJyksZD10LnRyaW0obi5hdHRyKCJjb29yZHMiKSksaD1kLnJlcGxhY2UoLywkLywiIikuc3BsaXQoIiwiKTtpZighdS5sZW5ndGgpcmV0dXJuIEM7aWYoInBvbHlnb24iPT09YylhPUIucG9seXMucG9seWdvbihoLGkpO2Vsc2V7aWYoIUIucG9seXNbY10pcmV0dXJuIEM7Zm9yKHM9LTEsbD1oLmxlbmd0aCxvPVtdOysrczxsOylvLnB1c2gocGFyc2VJbnQoaFtzXSwxMCkpO2E9Qi5wb2x5c1tjXS5hcHBseSh0aGlzLG8uY29uY2F0KGkpKX1yZXR1cm4gcj11Lm9mZnNldCgpLHIubGVmdCs9TWF0aC5jZWlsKCh1Lm91dGVyV2lkdGgoQyktdS53aWR0aCgpKS8yKSxyLnRvcCs9TWF0aC5jZWlsKCh1Lm91dGVySGVpZ2h0KEMpLXUuaGVpZ2h0KCkpLzIpLGEucG9zaXRpb24ubGVmdCs9ci5sZWZ0LGEucG9zaXRpb24udG9wKz1yLnRvcCxhfTt2YXIgeHQsQXQ9JzxpZnJhbWUgY2xhc3M9InF0aXAtYmdpZnJhbWUiIGZyYW1lYm9yZGVyPSIwIiB0YWJpbmRleD0iLTEiIHNyYz0iamF2YXNjcmlwdDpcJ1wnOyIgIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyBwb3NpdGlvbjphYnNvbHV0ZTsgei1pbmRleDotMTsgZmlsdGVyOmFscGhhKG9wYWNpdHk9MCk7IC1tcy1maWx0ZXI6InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShPcGFjaXR5PTApIjsiPjwvaWZyYW1lPic7dC5leHRlbmQoVC5wcm90b3R5cGUse19zY3JvbGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnF0aXAuZWxlbWVudHMub3ZlcmxheTtlJiYoZVswXS5zdHlsZS50b3A9dChhKS5zY3JvbGxUb3AoKSsicHgiKX0saW5pdDpmdW5jdGlvbihlKXt2YXIgbj1lLnRvb2x0aXA7dCgic2VsZWN0LCBvYmplY3QiKS5sZW5ndGg8MSYmKHRoaXMuYmdpZnJhbWU9ZS5lbGVtZW50cy5iZ2lmcmFtZT10KEF0KS5hcHBlbmRUbyhuKSxlLl9iaW5kKG4sInRvb2x0aXBtb3ZlIix0aGlzLmFkanVzdEJHSUZyYW1lLHRoaXMuX25zLHRoaXMpKSx0aGlzLnJlZHJhd0NvbnRhaW5lcj10KCI8ZGl2Lz4iLHtpZDpWKyItcmNvbnRhaW5lciJ9KS5hcHBlbmRUbyhsLmJvZHkpLGUuZWxlbWVudHMub3ZlcmxheSYmZS5lbGVtZW50cy5vdmVybGF5LmFkZENsYXNzKCJxdGlwbW9kYWwtaWU2Zml4IikmJihlLl9iaW5kKGEsWyJzY3JvbGwiLCJyZXNpemUiXSx0aGlzLl9zY3JvbGwsdGhpcy5fbnMsdGhpcyksZS5fYmluZChuLFsidG9vbHRpcHNob3ciXSx0aGlzLl9zY3JvbGwsdGhpcy5fbnMsdGhpcykpLHRoaXMucmVkcmF3KCl9LGFkanVzdEJHSUZyYW1lOmZ1bmN0aW9uKCl7dmFyIHQsZSxuPXRoaXMucXRpcC50b29sdGlwLGk9e2hlaWdodDpuLm91dGVySGVpZ2h0KEMpLHdpZHRoOm4ub3V0ZXJXaWR0aChDKX0scj10aGlzLnF0aXAucGx1Z2lucy50aXAsbz10aGlzLnF0aXAuZWxlbWVudHMudGlwO2U9cGFyc2VJbnQobi5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCxlPXtsZWZ0Oi1lLHRvcDotZX0sciYmbyYmKHQ9IngiPT09ci5jb3JuZXIucHJlY2VkYW5jZT9bTixqXTpbSSxSXSxlW3RbMV1dLT1vW3RbMF1dKCkpLHRoaXMuYmdpZnJhbWUuY3NzKGUpLmNzcyhpKX0scmVkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5xdGlwLnJlbmRlcmVkPDF8fHRoaXMuZHJhd2luZylyZXR1cm4gdGhpczt2YXIgdCxlLG4saSxyPXRoaXMucXRpcC50b29sdGlwLG89dGhpcy5xdGlwLm9wdGlvbnMuc3R5bGUscz10aGlzLnF0aXAub3B0aW9ucy5wb3NpdGlvbi5jb250YWluZXI7cmV0dXJuIHRoaXMucXRpcC5kcmF3aW5nPTEsby5oZWlnaHQmJnIuY3NzKEksby5oZWlnaHQpLG8ud2lkdGg/ci5jc3MoTixvLndpZHRoKTooci5jc3MoTiwiIikuYXBwZW5kVG8odGhpcy5yZWRyYXdDb250YWluZXIpLGU9ci53aWR0aCgpLGUlMjwxJiYoZSs9MSksbj1yLmNzcygibWF4V2lkdGgiKXx8IiIsaT1yLmNzcygibWluV2lkdGgiKXx8IiIsdD0obitpKS5pbmRleE9mKCIlIik+LTE/cy53aWR0aCgpLzEwMDowLG49KG4uaW5kZXhPZigiJSIpPi0xP3Q6MSpwYXJzZUludChuLDEwKSl8fGUsaT0oaS5pbmRleE9mKCIlIik+LTE/dDoxKnBhcnNlSW50KGksMTApKXx8MCxlPW4raT9NYXRoLm1pbihNYXRoLm1heChlLGkpLG4pOmUsci5jc3MoTixNYXRoLnJvdW5kKGUpKS5hcHBlbmRUbyhzKSksdGhpcy5kcmF3aW5nPTAsdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYmdpZnJhbWUmJnRoaXMuYmdpZnJhbWUucmVtb3ZlKCksdGhpcy5xdGlwLl91bmJpbmQoW2EsdGhpcy5xdGlwLnRvb2x0aXBdLHRoaXMuX25zKX19KSx4dD1CLmllNj1mdW5jdGlvbih0KXtyZXR1cm4gNj09PXJ0LmllP25ldyBUKHQpOkN9LHh0LmluaXRpYWxpemU9InJlbmRlciIsQS5pZTY9eyJeY29udGVudHxzdHlsZSQiOmZ1bmN0aW9uKCl7dGhpcy5yZWRyYXcoKX19fSl9KHdpbmRvdyxkb2N1bWVudCl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCksbig1NTkpXSxyPWZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKGUsbil7ZS5hcHBseSh0aGlzLHQubWFwKG4uc3BsaXQoL1xzKy8pLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1vZGVsLmdldCh0KX0sdGhpcykpfWZ1bmN0aW9uIHIoZSxuKXt0LmlzRnVuY3Rpb24oZSkmJmUuY2FsbChuKX1yZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZTpmdW5jdGlvbiBvKCl7dmFyIG89Im8tZm9ybS1maWVsZHNldCI7cmV0dXJuIHRoaXMub3B0aW9uc1sibGFiZWwtdG9wIl0mJihvKz0iIG8tZm9ybS1sYWJlbC10b3AiKSx0aGlzLm9wdGlvbnMucmVhZE9ubHkmJihvKz0iIG8tZm9ybS1yZWFkLW1vZGUiKSxvfSxhdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJueyJkYXRhLXNlIjp0aGlzLm9wdGlvbnNbImRhdGEtc2UiXXx8Im8tZm9ybS1maWVsZHNldCJ9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXtvLmNsYXNzTmFtZSYmKHRoaXMuaW5wdXRXcmFwcGVyQ2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lLHRoaXMub3B0aW9uc0NsYXNzTmFtZT1vLmNsYXNzTmFtZSxvLmNsYXNzTmFtZT1mdW5jdGlvbigpe3JldHVybiB0LnJlc3VsdCh0aGlzLCJpbnB1dFdyYXBwZXJDbGFzc05hbWUiLCIiKSsiICIrdC5yZXN1bHQodGhpcywib3B0aW9uc0NsYXNzTmFtZSIpfSksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC5lYWNoKG8uZXZlbnRzfHx7fSxmdW5jdGlvbih0LGUpe3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCxlLHQpfSx0aGlzKSx0LmVhY2goby5iaW5kaW5nc3x8e30sZnVuY3Rpb24oZSxyKXt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsbi5jaGFuZ2VFdmVudFN0cmluZyhyLnNwbGl0KC9ccysvKSksdC5iaW5kKGksdGhpcyxlLHIpKX0sdGhpcyksbi5hcHBseVNob3dXaGVuKHRoaXMsby5zaG93V2hlbiksbi5hcHBseVRvZ2dsZVdoZW4odGhpcyxvLnRvZ2dsZVdoZW4pLHIoby5pbml0aWFsaXplLHRoaXMpfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dC5lYWNoKHRoaXMub3B0aW9ucy5iaW5kaW5nc3x8e30saSx0aGlzKSxyKHRoaXMub3B0aW9ucy5yZW5kZXIsdGhpcyl9LGdldExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZSgpPjE/dGhpcy5hdCgwKTpudWxsfSxnZXRJbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0Q29udGFpbmVyKCl9LGdldElucHV0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXQodGhpcy5zaXplKCk+MT8xOjApfSxnZXRJbnB1dHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dENvbnRhaW5lcigpLnRvQXJyYXkoKX0sZm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dCgpLmZvY3VzKCl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNTAwKSxuKDQ3MCksbig0OTcpLG4oNDY0KSxuKDQ4MCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8pe2Z1bmN0aW9uIHMoZSl7aWYoZSYmIWUuX19lZGl0X18pcmV0dXJuIHQuZXh0ZW5kKHtfX2VkaXRfXzp0LmNvbnN0YW50KCEwKX0sZSl9ZnVuY3Rpb24gYShlKXtlPXQucGljayhlfHx7fSwiYWN0aW9uIiwiaWQiLCJjbGFzc05hbWUiLCJ0ZXh0IiwidHlwZSIpO3ZhciByLG8scztyZXR1cm4gbi5leHRlbmQoe3RhZ05hbWU6ImlucHV0IixjbGFzc05hbWU6ImJ1dHRvbiIsZXZlbnRzOntjbGljazpmdW5jdGlvbigpe2UuYWN0aW9uJiYhdGhpcy5kaXNhYmxlZCgpJiZlLmFjdGlvbi5jYWxsKHRoaXMpfSxrZXl1cDpmdW5jdGlvbih0KXtpLmlzRW50ZXIodCkmJmUuYWN0aW9uJiYhdGhpcy5kaXNhYmxlZCgpJiZlLmFjdGlvbi5jYWxsKHRoaXMpfX0sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwucHJvcCgiZGlzYWJsZWQiKT09PSEwfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy4kZWwucHJvcCgiZGlzYWJsZWQiLCEwKSx0aGlzLiRlbC5hZGRDbGFzcygiYnRuLWRpc2FibGVkIil9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuJGVsLnByb3AoImRpc2FibGVkIiwhMSksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoImJ0bi1kaXNhYmxlZCIpfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLiRlbC5hdHRyKCJ0eXBlIiwic2F2ZSI9PWUudHlwZT8ic3VibWl0IjoiYnV0dG9uIiksdGhpcy4kZWwudmFsKGUudGV4dCksZS5pZCYmdGhpcy4kZWwuYXR0cigiaWQiLGUuaWQpLGUuY2xhc3NOYW1lJiZ0aGlzLiRlbC5hZGRDbGFzcyhlLmNsYXNzTmFtZSksZS50eXBlJiZ0aGlzLiRlbC5hdHRyKCJkYXRhLXR5cGUiLGUudHlwZSksdGhpcy4kZWwubW91c2Vkb3duKGZ1bmN0aW9uKCl7bi5tb2RlbC5zZXQoIl9fcGVuZGluZ19fIiwhMCl9KSx0aGlzLiRlbC5tb3VzZXVwKGZ1bmN0aW9uKCl7bi5tb2RlbC5zZXQoIl9fcGVuZGluZ19fIiwhMSl9KSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImZvcm06c2V0LXNhdmluZy1zdGF0ZSIsZnVuY3Rpb24oKXt0aGlzLmRpc2FibGUoKSwic2F2ZSI9PWUudHlwZSYmKHI9c2V0VGltZW91dCh0LmJpbmQodGhpcy5fX2NoYW5nZVNhdmVUZXh0LHRoaXMpLDFlMykpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJmb3JtOmNsZWFyLXNhdmluZy1zdGF0ZSIsZnVuY3Rpb24oKXt0aGlzLmVuYWJsZSgpLCJzYXZlIj09ZS50eXBlJiYoY2xlYXJUaW1lb3V0KHIpLGNsZWFySW50ZXJ2YWwobyksdGhpcy4kZWwudmFsKGUudGV4dCkpfSl9LF9fY2hhbmdlU2F2ZVRleHQ6ZnVuY3Rpb24oKXtzPTAsbz1zZXRJbnRlcnZhbCh0LmJpbmQodGhpcy5fX3Nob3dMb2FkaW5nVGV4dCx0aGlzKSwyMDApfSxfX3Nob3dMb2FkaW5nVGV4dDpmdW5jdGlvbigpe3RoaXMuJGVsLnZhbChfW3MrKyVfLmxlbmd0aF0pfX0pfWZ1bmN0aW9uIGwoZSxuKXtpZihlfHwoZT17fSksImxhYmVsIj09ZS50eXBlKXJldHVybiB2b2lkKGUubGFiZWx8fHIud2FybignQSBsYWJlbCBpbnB1dCBtdXN0IGhhdmUgYSAibGFiZWwiIHBhcmFtZXRlcicsZSkpO2lmKCJidXR0b24iPT1lLnR5cGUpcmV0dXJuIGUudGl0bGV8fGUuaWNvbnx8ci53YXJuKCdBIGJ1dHRvbiBpbnB1dCBtdXN0IGhhdmUgYSAidGl0bGUiIGFuZC9vciBhbiAiaWNvbiIgcGFyYW1ldGVyJyxlKSx2b2lkKGUuY2xpY2t8fGUuaHJlZnx8ci53YXJuKCdBIGJ1dHRvbiBpbnB1dCBtdXN0IGhhdmUgYSAiY2xpY2siIGFuZC9vciBhbiAiaHJlZiIgcGFyYW1ldGVyJyxlKSk7aWYoZS5uYW1lfHxlLmlucHV0fHxyLndhcm4oJ01pc3NpbmcgIm5hbWUiIG9yICJpbnB1dCIgcGFyYW1ldGVycycsZSksdC5pc0FycmF5KGUubmFtZSkmJnQuaXNBcnJheShlLmlucHV0KSl0aHJvdyBuZXcgRXJyb3IoJ05vdCBhbGxvd2VkIHRvIGhhdmUgYm90aCAibmFtZSIgYW5kICJpbnB1dCIgZGVmaW5lZCBhcyBhcnJheS4nKTtpZigibGlzdCIhPWUudHlwZSYmZS5uYW1lJiZuJiZuLmFsbG93cyl7dmFyIGk9W107dC5pc0FycmF5KGUubmFtZSk/aT1lLm5hbWU6aS5wdXNoKGUubmFtZSksdC5lYWNoKGksZnVuY3Rpb24odCl7aWYoIW4uYWxsb3dzKHQpKXRocm93IG5ldyBFcnJvcigiZmllbGQgbm90IGFsbG93ZWQ6ICIrZS5uYW1lKX0pfXQuaXNBcnJheShlLmlucHV0KSYmImxpc3QiIT1lLnR5cGUmJnQuZWFjaChlLmlucHV0LGZ1bmN0aW9uKHQpe2wodCxuKX0pO3ZhciBvPXQua2V5cyhlKSxzPXQuaW50ZXJzZWN0aW9uKG8sbSk7aWYodC5zaXplKHMpIT10LnNpemUoZSkpe3ZhciBhPXQuY2xvbmUobSk7YS51bnNoaWZ0KG8pLHIud2FybigiSW52YWxpZCBpbnB1dCBwYXJhbWV0ZXJzIix0LndpdGhvdXQuYXBwbHkobnVsbCxhKSxlKX19ZnVuY3Rpb24gYyhlLG4saSl7ZT10LmNsb25lKGUpLHQuY29udGFpbnMoWyJsaXN0IiwiZ3JvdXAiXSxlLnR5cGUpJiYoZS5wYXJhbXM9dC5kZWZhdWx0cyh7Y3JlYXRlOmksaW5wdXRzOnQubWFwKHQuaXNBcnJheShlLmlucHV0KT9lLmlucHV0OltlLmlucHV0XSxmdW5jdGlvbihlKXtyZXR1cm4gdC5maXJzdChjKGUsbixpKSl9KX0sZS5wYXJhbXN8fHt9KSxkZWxldGUgZS5pbnB1dCk7dmFyIHI9dC5pc0FycmF5KGUuaW5wdXQpP3QuY2xvbmUoZS5pbnB1dCk6W2VdO3JldHVybiB0Lm1hcChyLGZ1bmN0aW9uKGkpe3ZhciByPXQuZGVmYXVsdHMoe21vZGVsOm4ubW9kZWx9LGksdC5vbWl0KGUsImlucHV0IiwiaW5wdXRzIiksbi5vcHRpb25zLHtpZDp0LnVuaXF1ZUlkKCJpbnB1dCIpLHJlYWRPbmx5Om4uaXNSZWFkT25seSgpLHJlYWQ6bi5oYXNSZWFkTW9kZSgpfSk7cmV0dXJuIG4uaXNSZWFkT25seSgpJiYoci5yZWFkPXIucmVhZE9ubHk9ITApLHJ9KX12YXIgdT1bIm1vZGVsIiwiaWQiLCJpbnB1dElkIiwidHlwZSIsImxhYmVsIiwic3VibGFiZWwiLCJ0b29sdGlwIiwibmFtZSJdLGQ9WyJ3aWRlIiwibXVsdGkiLCJpbnB1dCIsImV4cGxhaW4iLCJjdXN0b21FeHBsYWluIiwibW9kZWwiLCJuYW1lIiwidHlwZSIsImF1dG9SZW5kZXIiXSxoPVsibW9kZWwiLCJuYW1lIiwibGFiZWwtdG9wIiwicmVhZE9ubHkiLCJldmVudHMiLCJpbml0aWFsaXplIiwic2hvd1doZW4iLCJiaW5kaW5ncyIsInJlbmRlciIsImNsYXNzTmFtZSIsImRhdGEtc2UiLCJ0b2dnbGVXaGVuIl0scD1bIm1vZGVsIiwibmFtZSIsImlucHV0SWQiLCJ0eXBlIiwiaW5wdXQiLCJwbGFjZWhvbGRlciIsImxhYmVsIiwicmVhZE9ubHkiLCJyZWFkIiwiZGlzYWJsZWQiLCJyZWFkTW9kZVN0cmluZyIsIm9wdGlvbnMiLCJmcm9tIiwidG8iLCJhdXRvUmVuZGVyIiwiaW5saW5lVmFsaWRhdGlvbiIsInZhbGlkYXRlT25seUlmRGlydHkiLCJhcmlhTGFiZWwiLCJwYXJhbXMiXSxmPVsiZXJyb3JGaWVsZCJdLG09dC51bmlxKHQudW5pb24odSxkLGgscCxmKSksXz1bIuKAoiAgICAgICAgICIsIuKAoiAg4oCiICAgICAgIiwi4oCiICDigKIgIOKAoiAgICIsIuKAoiAg4oCiICDigKIgIOKAoiIsIiAgIOKAoiAg4oCiICDigKIiLCIgICAgICDigKIgIOKAoiIsIiAgICAgICAgIOKAoiIsIiAgICAgICAgICAiLCIgICAgICAgICAgIiwiICAgICAgICAgICJdO3JldHVybntMQUJFTF9PUFRJT05TOnUsQ09OVEFJTkVSX09QVElPTlM6ZCxXUkFQUEVSX09QVElPTlM6aCxJTlBVVF9PUFRJT05TOnAsZ2VuZXJhdGVJbnB1dE9wdGlvbnM6YyxjaGFuZ2VFdmVudFN0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4iY2hhbmdlOiIrdC5qb2luKCIgY2hhbmdlOiIpfSxjcmVhdGVSZWFkRm9ybUJ1dHRvbjpmdW5jdGlvbihpKXt2YXIgcixvLHM7cmV0dXJuImNhbmNlbCI9PWkudHlwZT8obz1zPWUubG9jYWxpemUoIm9mb3JtLmNhbmNlbCIsImNvdXJhZ2UiKSxyPWZ1bmN0aW9uKCl7dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOmNhbmNlbCIpfSk6KG89ZS5sb2NhbGl6ZSgib2Zvcm0uZWRpdCIsImNvdXJhZ2UiKSxzPW8rIiAiK2kuZm9ybVRpdGxlLHI9ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnNldCgiX19lZGl0X18iLCEwKX0pLG4uZXh0ZW5kKHt0YWdOYW1lOiJhIixhdHRyaWJ1dGVzOntocmVmOiIjIiwiYXJpYS1sYWJlbCI6c30sdGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5lc2NhcGUobyl9LGV2ZW50czp7Y2xpY2s6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHIuY2FsbCh0aGlzKX19fSl9LGNyZWF0ZUJ1dHRvbjpmdW5jdGlvbihuKXtzd2l0Y2gobj10LmNsb25lKG4pLG4udHlwZSl7Y2FzZSJzYXZlIjp0LmRlZmF1bHRzKG4se2NsYXNzTmFtZToiYnV0dG9uLXByaW1hcnkifSk7YnJlYWs7Y2FzZSJjYW5jZWwiOnQuZGVmYXVsdHMobix7dGV4dDplLmxvY2FsaXplKCJvZm9ybS5jYW5jZWwiLCJjb3VyYWdlIiksYWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC50cmlnZ2VyKCJmb3JtOmNhbmNlbCIpfX0pO2JyZWFrO2Nhc2UicHJldmlvdXMiOnQuZGVmYXVsdHMobix7dGV4dDplLmxvY2FsaXplKCJvZm9ybS5wcmV2aW91cyIsImNvdXJhZ2UiKSxhY3Rpb246ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06cHJldmlvdXMiKX19KX1yZXR1cm4gYShuKX0sdmFsaWRhdGVJbnB1dDpsLGFwcGx5U2hvd1doZW46ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXt0LiRlbC50b2dnbGUoZSksdC5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpfX07by5hcHBseURvV2hlbih0LHMoZSksZnVuY3Rpb24oZSxpKXtpLmFuaW1hdGU/dC4kZWxbInNsaWRlIisoZT8iRG93biI6IlVwIildKDIwMCxuKGUpKTp0LiRlbC50b2dnbGUoZSl9KX0sYXBwbHlUb2dnbGVXaGVuOmZ1bmN0aW9uKHQsZSl7by5hcHBseURvV2hlbih0LHMoZSksZnVuY3Rpb24oZSxuKXt0LiRlbC50b2dnbGUoZSksdC5tb2RlbC50cmlnZ2VyKCJmb3JtOnJlc2l6ZSIpLG4uYW5pbWF0ZSYmdC5yZW5kZXIoKX0pfX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0NzApXSxyPWZ1bmN0aW9uKHQpe3ZhciBlPSdcdCAgICA8ZGl2IGNsYXNzPSJva3RhLWZvcm0taW5mb2JveC1lcnJvciBpbmZvYm94IGluZm9ib3gtZXJyb3IiIHJvbGU9ImFsZXJ0Ij5cdCAgICAgIDxzcGFuIGNsYXNzPSJpY29uIGVycm9yLTE2Ij48L3NwYW4+XHQgICAgICB7eyNpZiBlcnJvclN1bW1hcnl9fVx0ICAgICAgICA8cD57e2Vycm9yU3VtbWFyeX19PC9wPlx0ICAgICAge3tlbHNlfX1cdCAgICAgICAgPHA+e3tpMThuIGNvZGU9Im9mb3JtLmVycm9yYmFubmVyLnRpdGxlIiBidW5kbGU9ImNvdXJhZ2UifX08L3A+XHQgICAgICB7ey9pZn19XHQgICAgPC9kaXY+XHQgICc7cmV0dXJuIHQuZXh0ZW5kKHt0ZW1wbGF0ZTplLG1vZGVsRXZlbnRzOnsiZm9ybTpjbGVhci1lcnJvcnMiOiJyZW1vdmUifX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzApLG4oNTU5KV0scj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGUuZXh0ZW5kKHtjbGFzc05hbWU6Im8tZm9ybS1idXR0b24tYmFyIixpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMuYWRkQnV0dG9uKHt0eXBlOiJzYXZlIix0ZXh0OnQucmVzdWx0Q3R4KGUsInNhdmUiLHRoaXMpLGlkOnQucmVzdWx0Q3R4KGUsInNhdmVJZCIsdGhpcyksY2xhc3NOYW1lOnQucmVzdWx0Q3R4KGUsInNhdmVDbGFzc05hbWUiLHRoaXMpfSksZS5ub0NhbmNlbEJ1dHRvbnx8dGhpcy5hZGRCdXR0b24oe3R5cGU6ImNhbmNlbCIsdGV4dDp0LnJlc3VsdEN0eChlLCJjYW5jZWwiLHRoaXMpfSksZS5oYXNQcmV2U3RlcCYmdGhpcy5hZGRCdXR0b24oe3R5cGU6InByZXZpb3VzIn0se3ByZXBlbmQ6ITB9KX0sYWRkQnV0dG9uOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkKG4uY3JlYXRlQnV0dG9uKHQpLGUpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMxKSxuKDMyOCksbig0NzEpLG4oNDcwKSxuKDU2NCldLHI9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bi50cGw7cmV0dXJuIGkuZXh0ZW5kKHtwYXJhbXM6e30sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLiRlbC5hZGRDbGFzcygic2ltcGxlbW9kYWwtd3JhcCIpLHRoaXMucGFyYW1zPWUuZXh0ZW5kKHtvbkNsb3NlOmUuYmluZChlLnRocm90dGxlKHRoaXMucmVtb3ZlLDY0KSx0aGlzKX0sdGhpcy5wYXJhbXN8fHt9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5kZWxlZ2F0ZUV2ZW50cygpLGkucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG49ZS5leHRlbmQoe30sZS5waWNrKHRoaXMsInRpdGxlIiwic3VidGl0bGUiKSxlLnBpY2sodGhpcy5vcHRpb25zLCJ0aXRsZSIsInN1YnRpdGxlIikpO2lmKG4uc3VidGl0bGUpe3ZhciBvPWUucmVzdWx0Q3R4KG4sInN1YnRpdGxlIix0aGlzKTt0aGlzLiRlbC5wcmVwZW5kKHIoJzxwIGNsYXNzPSJtb2RhbC1zdWJ0aXRsZSB0ZXh0LWxpZ2h0IFx0ICAgICAgICAgIHBhZGRpbmctMjAgbWFyZ2luLWJ0bS0wIj57e3N1YnRpdGxlfX08L3A+Jykoe3N1YnRpdGxlOm99KSl9aWYobi50aXRsZSl7dmFyIHM9ZS5yZXN1bHRDdHgobiwidGl0bGUiLHRoaXMpO3RoaXMuJGVsLnByZXBlbmQocignPGgyIGNsYXNzPSJibG9jayBtb2RhbC10aXRsZSI+e3t0aXRsZX19PC9oMj4nKSh7dGl0bGU6c30pKX1yZXR1cm4gZS5kZWZlcihlLmJpbmQoZnVuY3Rpb24oKXt0aGlzLiRlbC5tb2RhbCh0aGlzLnBhcmFtcyksdGhpcy5yZXNpemUoKX0sdGhpcykpLHQoImJvZHkiKS5jc3MoIm92ZXJmbG93IiwiaGlkZGVuIiksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHQubW9kYWwuY2xvc2UoKSx0KCJib2R5IikuY3NzKCJvdmVyZmxvdyIsIiIpLGUuZGVmZXIoZnVuY3Rpb24oKXt0Lm1vZGFsLmNsb3NlKCl9KSxpLnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXNpemU6ZnVuY3Rpb24oKXt0Lm1vZGFsLnVwZGF0ZSh0aGlzLiRlbC5vdXRlckhlaWdodCgpKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHM9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9OyFmdW5jdGlvbihzKXtyPVtuKDMzMildLGk9cyxvPSJmdW5jdGlvbiI9PXR5cGVvZiBpP2kuYXBwbHkoZSxyKTppLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSl9KGZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49dChkb2N1bWVudCksaT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkscj10KHdpbmRvdyksbz1bXSxhPXtpZVF1aXJrczpudWxsLG1zaWU6L21zaWUvLnRlc3QoaSkmJiEvb3BlcmEvLnRlc3QoaSksb3BlcmE6L29wZXJhLy50ZXN0KGkpfTthLmllNj1hLm1zaWUmJi9tc2llIDYuLy50ZXN0KGkpJiYib2JqZWN0IiE9PXMod2luZG93LlhNTEh0dHBSZXF1ZXN0KSxhLmllNz1hLm1zaWUmJi9tc2llIDcuMC8udGVzdChpKSx0Lm1vZGFsPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQubW9kYWwuaW1wbC5pbml0KGUsbil9LHQubW9kYWwuY2xvc2U9ZnVuY3Rpb24oKXt0Lm1vZGFsLmltcGwuY2xvc2UoKX0sdC5tb2RhbC5mb2N1cz1mdW5jdGlvbihlKXt0Lm1vZGFsLmltcGwuZm9jdXMoZSl9LHQubW9kYWwuc2V0Q29udGFpbmVyRGltZW5zaW9ucz1mdW5jdGlvbigpe3QubW9kYWwuaW1wbC5zZXRDb250YWluZXJEaW1lbnNpb25zKCl9LHQubW9kYWwuc2V0UG9zaXRpb249ZnVuY3Rpb24oKXt0Lm1vZGFsLmltcGwuc2V0UG9zaXRpb24oKX0sdC5tb2RhbC51cGRhdGU9ZnVuY3Rpb24oZSxuKXt0Lm1vZGFsLmltcGwudXBkYXRlKGUsbil9LHQuZm4ubW9kYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHQubW9kYWwuaW1wbC5pbml0KHRoaXMsZSl9LHQubW9kYWwuZGVmYXVsdHM9e2FwcGVuZFRvOiJib2R5Iixmb2N1czohMCxvcGFjaXR5OjUwLG92ZXJsYXlJZDoic2ltcGxlbW9kYWwtb3ZlcmxheSIsb3ZlcmxheUNzczp7fSxjb250YWluZXJJZDoic2ltcGxlbW9kYWwtY29udGFpbmVyIixjb250YWluZXJDc3M6e30sZGF0YUlkOiJzaW1wbGVtb2RhbC1kYXRhIixkYXRhQ3NzOnt9LG1pbkhlaWdodDpudWxsLG1pbldpZHRoOm51bGwsbWF4SGVpZ2h0Om51bGwsbWF4V2lkdGg6bnVsbCxhdXRvUmVzaXplOiExLGF1dG9Qb3NpdGlvbjohMCx6SW5kZXg6MWUzLGNsb3NlOiEwLGNsb3NlSFRNTDonPGEgY2xhc3M9Im1vZGFsQ2xvc2VJbWciIHRpdGxlPSJDbG9zZSI+PC9hPicsY2xvc2VDbGFzczoic2ltcGxlbW9kYWwtY2xvc2UiLGVzY0Nsb3NlOiEwLG92ZXJsYXlDbG9zZTohMSxmaXhlZDohMCxwb3NpdGlvbjpudWxsLHBlcnNpc3Q6ITEsbW9kYWw6ITAsb25PcGVuOm51bGwsb25TaG93Om51bGwsb25DbG9zZTpudWxsfSx0Lm1vZGFsLmltcGw9e2Q6e30saW5pdDpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXM7aWYoaS5kLmRhdGEpcmV0dXJuITE7aWYoYS5pZVF1aXJrcz1hLm1zaWUmJiJ1bmRlZmluZWQiIT10eXBlb2YgdC5zdXBwb3J0LmJveE1vZGVsJiYhdC5zdXBwb3J0LmJveE1vZGVsLGkubz10LmV4dGVuZCh7fSx0Lm1vZGFsLmRlZmF1bHRzLG4pLGkuekluZGV4PWkuby56SW5kZXgsaS5vY2NiPSExLCJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpzKGUpKSllPWUgaW5zdGFuY2VvZiB0P2U6dChlKSxpLmQucGxhY2Vob2xkZXI9ITEsZS5wYXJlbnQoKS5wYXJlbnQoKS5zaXplKCk+MCYmKGUuYmVmb3JlKHQoIjxzcGFuPjwvc3Bhbj4iKS5hdHRyKCJpZCIsInNpbXBsZW1vZGFsLXBsYWNlaG9sZGVyIikuY3NzKHtkaXNwbGF5OiJub25lIn0pKSxpLmQucGxhY2Vob2xkZXI9ITAsaS5kaXNwbGF5PWUuY3NzKCJkaXNwbGF5IiksaS5vLnBlcnNpc3R8fChpLmQub3JpZz1lLmNsb25lKCEwKSkpO2Vsc2V7aWYoInN0cmluZyIhPXR5cGVvZiBlJiYibnVtYmVyIiE9dHlwZW9mIGUpcmV0dXJuIGFsZXJ0KCJTaW1wbGVNb2RhbCBFcnJvcjogVW5zdXBwb3J0ZWQgZGF0YSB0eXBlOiAiKygidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6cyhlKSkpLGk7ZT10KCI8ZGl2PjwvZGl2PiIpLmh0bWwoZSl9cmV0dXJuIGkuY3JlYXRlKGUpLGU9bnVsbCxpLm9wZW4oKSx0LmlzRnVuY3Rpb24oaS5vLm9uU2hvdykmJmkuby5vblNob3cuYXBwbHkoaSxbaS5kXSksaX0sY3JlYXRlOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7aS5nZXREaW1lbnNpb25zKCksaS5vLm1vZGFsJiZhLmllNiYmKGkuZC5pZnJhbWU9dCgnPGlmcmFtZSBzcmM9ImphdmFzY3JpcHQ6ZmFsc2U7Ij48L2lmcmFtZT4nKS5jc3ModC5leHRlbmQoaS5vLmlmcmFtZUNzcyx7ZGlzcGxheToibm9uZSIsb3BhY2l0eTowLHBvc2l0aW9uOiJmaXhlZCIsaGVpZ2h0Om9bMF0sd2lkdGg6b1sxXSx6SW5kZXg6aS5vLnpJbmRleCx0b3A6MCxsZWZ0OjB9KSkuYXBwZW5kVG8oaS5vLmFwcGVuZFRvKSksaS5kLm92ZXJsYXk9dCgiPGRpdj48L2Rpdj4iKS5hdHRyKCJpZCIsaS5vLm92ZXJsYXlJZCkuYWRkQ2xhc3MoInNpbXBsZW1vZGFsLW92ZXJsYXkiKS5jc3ModC5leHRlbmQoaS5vLm92ZXJsYXlDc3Mse2Rpc3BsYXk6Im5vbmUiLG9wYWNpdHk6aS5vLm9wYWNpdHkvMTAwLGhlaWdodDppLm8ubW9kYWw/ZVswXTowLHdpZHRoOmkuby5tb2RhbD9lWzFdOjAscG9zaXRpb246ImZpeGVkIixsZWZ0OjAsdG9wOjAsekluZGV4Omkuby56SW5kZXgrMX0pKS5hcHBlbmRUbyhpLm8uYXBwZW5kVG8pLGkuZC5jb250YWluZXI9dCgiPGRpdj48L2Rpdj4iKS5hdHRyKCJpZCIsaS5vLmNvbnRhaW5lcklkKS5hdHRyKCJyb2xlIiwiZGlhbG9nIikuYWRkQ2xhc3MoInNpbXBsZW1vZGFsLWNvbnRhaW5lci1uZXciKS5jc3ModC5leHRlbmQoe3Bvc2l0aW9uOmkuby5maXhlZD8iZml4ZWQiOiJhYnNvbHV0ZSJ9LGkuby5jb250YWluZXJDc3Mse2Rpc3BsYXk6Im5vbmUiLHpJbmRleDppLm8uekluZGV4KzJ9KSkuYXBwZW5kKGkuby5jbG9zZSYmaS5vLmNsb3NlSFRNTD90KGkuby5jbG9zZUhUTUwpLmFkZENsYXNzKGkuby5jbG9zZUNsYXNzKToiIikuYXBwZW5kVG8oaS5vLmFwcGVuZFRvKSxpLmQud3JhcD10KCI8ZGl2PjwvZGl2PiIpLmF0dHIoInRhYkluZGV4IiwtMSkuYWRkQ2xhc3MoInNpbXBsZW1vZGFsLXdyYXAiKS5jc3Moe2hlaWdodDoiMTAwJSIsb3V0bGluZTowLHdpZHRoOiIxMDAlIn0pLmFwcGVuZFRvKGkuZC5jb250YWluZXIpLGkuZC5kYXRhPW4uYXR0cigiaWQiLG4uYXR0cigiaWQiKXx8aS5vLmRhdGFJZCkuYWRkQ2xhc3MoInNpbXBsZW1vZGFsLWRhdGEiKS5jc3ModC5leHRlbmQoaS5vLmRhdGFDc3Mse2Rpc3BsYXk6Im5vbmUifSkpLmFwcGVuZFRvKCJib2R5Iiksbj1udWxsLGkuc2V0Q29udGFpbmVyRGltZW5zaW9ucygpLGkuZC5kYXRhLmFwcGVuZFRvKGkuZC53cmFwKSwoYS5pZTZ8fGEuaWVRdWlya3MpJiZpLmZpeElFKCl9LGJpbmRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgaT10aGlzO3QoIi4iK2kuby5jbG9zZUNsYXNzKS5iaW5kKCJjbGljay5zaW1wbGVtb2RhbCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLGkuY2xvc2UoKX0pLGkuby5tb2RhbCYmaS5vLmNsb3NlJiZpLm8ub3ZlcmxheUNsb3NlJiZpLmQub3ZlcmxheS5iaW5kKCJjbGljay5zaW1wbGVtb2RhbCIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLGkuY2xvc2UoKX0pLG4uYmluZCgia2V5ZG93bi5zaW1wbGVtb2RhbCIsZnVuY3Rpb24odCl7aS5vLm1vZGFsJiY5PT09dC5rZXlDb2RlP2kud2F0Y2hUYWIodCk6aS5vLmNsb3NlJiZpLm8uZXNjQ2xvc2UmJjI3PT09dC5rZXlDb2RlJiYodC5wcmV2ZW50RGVmYXVsdCgpLGkuY2xvc2UoKSl9KSxyLmJpbmQoInJlc2l6ZS5zaW1wbGVtb2RhbCBvcmllbnRhdGlvbmNoYW5nZS5zaW1wbGVtb2RhbCIsZnVuY3Rpb24oKXtpLmdldERpbWVuc2lvbnMoKSxpLm8uYXV0b1Jlc2l6ZT9pLnNldENvbnRhaW5lckRpbWVuc2lvbnMoKTppLm8uYXV0b1Bvc2l0aW9uJiZpLnNldFBvc2l0aW9uKCksYS5pZTZ8fGEuaWVRdWlya3M/aS5maXhJRSgpOmkuby5tb2RhbCYmKGkuZC5pZnJhbWUmJmkuZC5pZnJhbWUuY3NzKHtoZWlnaHQ6b1swXSx3aWR0aDpvWzFdfSksaS5kLm92ZXJsYXkuY3NzKHtoZWlnaHQ6ZVswXSx3aWR0aDplWzFdfSkpfSl9LHVuYmluZEV2ZW50czpmdW5jdGlvbigpe3QoIi4iK3RoaXMuby5jbG9zZUNsYXNzKS51bmJpbmQoImNsaWNrLnNpbXBsZW1vZGFsIiksbi51bmJpbmQoImtleWRvd24uc2ltcGxlbW9kYWwiKSxyLnVuYmluZCgiLnNpbXBsZW1vZGFsIiksdGhpcy5kLm92ZXJsYXkudW5iaW5kKCJjbGljay5zaW1wbGVtb2RhbCIpfSxmaXhJRTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLm8ucG9zaXRpb247dC5lYWNoKFtlLmQuaWZyYW1lfHxudWxsLGUuby5tb2RhbD9lLmQub3ZlcmxheTpudWxsLCJmaXhlZCI9PT1lLmQuY29udGFpbmVyLmNzcygicG9zaXRpb24iKT9lLmQuY29udGFpbmVyOm51bGxdLGZ1bmN0aW9uKHQsZSl7aWYoZSl7dmFyIGk9ImRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IixyPSJkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIixvPSJkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCIscz0iZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IixhPSJkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCIsbD0iZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCIsYz0iZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCIsdT0iZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIixkPSJkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCIsaD0iZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCIscD1lWzBdLnN0eWxlO2lmKHAucG9zaXRpb249ImFic29sdXRlIix0PDIpcC5yZW1vdmVFeHByZXNzaW9uKCJoZWlnaHQiKSxwLnJlbW92ZUV4cHJlc3Npb24oIndpZHRoIikscC5zZXRFeHByZXNzaW9uKCJoZWlnaHQiLCIiK28rIiA+ICIraSsiID8gIitvKyIgOiAiK2krJyArICJweCInKSxwLnNldEV4cHJlc3Npb24oIndpZHRoIiwiIitsKyIgPiAiK3IrIiA/ICIrbCsiIDogIityKycgKyAicHgiJyk7ZWxzZXt2YXIgZixtO2lmKG4mJm4uY29uc3RydWN0b3I9PT1BcnJheSl7dmFyIF89blswXT8ibnVtYmVyIj09dHlwZW9mIG5bMF0/blswXS50b1N0cmluZygpOm5bMF0ucmVwbGFjZSgvcHgvLCIiKTplLmNzcygidG9wIikucmVwbGFjZSgvcHgvLCIiKTtpZihmPV8uaW5kZXhPZigiJSIpPT09LTE/XysiICsgKHQgPSAiK2grIiA/ICIraCsiIDogIithKycpICsgInB4Iic6cGFyc2VJbnQoXy5yZXBsYWNlKC8lLywiIikpKyIgKiAoKCIrYysiIHx8ICIraSsiKSAvIDEwMCkgKyAodCA9ICIraCsiID8gIitoKyIgOiAiK2ErJykgKyAicHgiJyxuWzFdKXt2YXIgZz0ibnVtYmVyIj09dHlwZW9mIG5bMV0/blsxXS50b1N0cmluZygpOm5bMV0ucmVwbGFjZSgvcHgvLCIiKTttPWcuaW5kZXhPZigiJSIpPT09LTE/ZysiICsgKHQgPSAiK2QrIiA/ICIrZCsiIDogIitzKycpICsgInB4Iic6cGFyc2VJbnQoZy5yZXBsYWNlKC8lLywiIikpKyIgKiAoKCIrdSsiIHx8ICIrcisiKSAvIDEwMCkgKyAodCA9ICIrZCsiID8gIitkKyIgOiAiK3MrJykgKyAicHgiJ319ZWxzZSBmPSIoIitjKyIgfHwgIitpKyIpIC8gMiAtICh0aGlzLm9mZnNldEhlaWdodCAvIDIpICsgKHQgPSAiK2grIiA/ICIraCsiIDogIithKycpICsgInB4IicsbT0iKCIrdSsiIHx8ICIrcisiKSAvIDIgLSAodGhpcy5vZmZzZXRXaWR0aCAvIDIpICsgKHQgPSAiK2QrIiA/ICIrZCsiIDogIitzKycpICsgInB4Iic7cC5yZW1vdmVFeHByZXNzaW9uKCJ0b3AiKSxwLnJlbW92ZUV4cHJlc3Npb24oImxlZnQiKSxwLnNldEV4cHJlc3Npb24oInRvcCIsZikscC5zZXRFeHByZXNzaW9uKCJsZWZ0IixtKX19fSl9LGZvY3VzOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1lJiZ0LmluQXJyYXkoZSxbImZpcnN0IiwibGFzdCJdKSE9PS0xP2U6ImZpcnN0IixyPXQoIjppbnB1dDplbmFibGVkOnZpc2libGU6IitpLG4uZC53cmFwKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5sZW5ndGg+MD9yLmZvY3VzJiZyLmZvY3VzKCk6biYmbi5kJiZuLmQud3JhcCYmbi5kLndyYXAuZm9jdXMmJm4uZC53cmFwLmZvY3VzKCl9LDEwKX0sZ2V0RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PSJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93LmlubmVySGVpZ2h0P3IuaGVpZ2h0KCk6d2luZG93LmlubmVySGVpZ2h0O2U9W24uaGVpZ2h0KCksbi53aWR0aCgpXSxvPVt0LHIud2lkdGgoKV19LGdldFZhbDpmdW5jdGlvbih0LGUpe3JldHVybiB0PyJudW1iZXIiPT10eXBlb2YgdD90OiJhdXRvIj09PXQ/MDp0LmluZGV4T2YoIiUiKT4wP3BhcnNlSW50KHQucmVwbGFjZSgvJS8sIiIpKS8xMDAqKCJoIj09PWU/b1swXTpvWzFdKTpwYXJzZUludCh0LnJlcGxhY2UoL3B4LywiIikpOm51bGx9LHVwZGF0ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuISFuLmQuZGF0YSYmKG4uZC5vcmlnSGVpZ2h0PW4uZ2V0VmFsKHQsImgiKSxuLmQub3JpZ1dpZHRoPW4uZ2V0VmFsKGUsInciKSxuLmQuZGF0YS5oaWRlKCksdCYmbi5kLmNvbnRhaW5lci5jc3MoImhlaWdodCIsdCksZSYmbi5kLmNvbnRhaW5lci5jc3MoIndpZHRoIixlKSxuLnNldENvbnRhaW5lckRpbWVuc2lvbnMoKSxuLmQuZGF0YS5zaG93KCksbi5vLmZvY3VzJiZuLmZvY3VzKCksbi51bmJpbmRFdmVudHMoKSx2b2lkIG4uYmluZEV2ZW50cygpKX0sc2V0Q29udGFpbmVyRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hLmllNnx8YS5pZTcsbj10LmQub3JpZ0hlaWdodD90LmQub3JpZ0hlaWdodDphLm9wZXJhP3QuZC5jb250YWluZXIuaGVpZ2h0KCk6dC5nZXRWYWwoZT90LmQuY29udGFpbmVyWzBdLmN1cnJlbnRTdHlsZS5oZWlnaHQ6dC5kLmNvbnRhaW5lci5jc3MoImhlaWdodCIpLCJoIiksaT10LmQub3JpZ1dpZHRoP3QuZC5vcmlnV2lkdGg6YS5vcGVyYT90LmQuY29udGFpbmVyLndpZHRoKCk6dC5nZXRWYWwoZT90LmQuY29udGFpbmVyWzBdLmN1cnJlbnRTdHlsZS53aWR0aDp0LmQuY29udGFpbmVyLmNzcygid2lkdGgiKSwidyIpLHI9dC5kLmRhdGEub3V0ZXJIZWlnaHQoITApLHM9dC5kLmRhdGEub3V0ZXJXaWR0aCghMCk7dC5kLm9yaWdIZWlnaHQ9dC5kLm9yaWdIZWlnaHR8fG4sdC5kLm9yaWdXaWR0aD10LmQub3JpZ1dpZHRofHxpO3ZhciBsPXQuby5tYXhIZWlnaHQ/dC5nZXRWYWwodC5vLm1heEhlaWdodCwiaCIpOm51bGwsYz10Lm8ubWF4V2lkdGg/dC5nZXRWYWwodC5vLm1heFdpZHRoLCJ3Iik6bnVsbCx1PWwmJmw8b1swXT9sOm9bMF0sZD1jJiZjPG9bMV0/YzpvWzFdLGg9dC5vLm1pbkhlaWdodD90LmdldFZhbCh0Lm8ubWluSGVpZ2h0LCJoIik6ImF1dG8iO249bj90Lm8uYXV0b1Jlc2l6ZSYmbj51P3U6bjxoP2g6bjpyP3I+dT91OnQuby5taW5IZWlnaHQmJiJhdXRvIiE9PWgmJnI8aD9oOnI6aDt2YXIgcD10Lm8ubWluV2lkdGg/dC5nZXRWYWwodC5vLm1pbldpZHRoLCJ3Iik6ImF1dG8iO2k9aT90Lm8uYXV0b1Jlc2l6ZSYmaT5kP2Q6aTxwP3A6aTpzP3M+ZD9kOnQuby5taW5XaWR0aCYmImF1dG8iIT09cCYmczxwP3A6czpwLHQuZC5jb250YWluZXIuY3NzKHtoZWlnaHQ6bix3aWR0aDppfSksdC5kLndyYXAuY3NzKHtvdmVyZmxvdzpyPm58fHM+aT8iYXV0byI6InZpc2libGUifSksdC5vLmF1dG9Qb3NpdGlvbiYmdC5zZXRQb3NpdGlvbigpfSxzZXRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciB0LGUsbj10aGlzLGk9b1swXS8yLW4uZC5jb250YWluZXIub3V0ZXJIZWlnaHQoITApLzIscz1vWzFdLzItbi5kLmNvbnRhaW5lci5vdXRlcldpZHRoKCEwKS8yLGE9ImZpeGVkIiE9PW4uZC5jb250YWluZXIuY3NzKCJwb3NpdGlvbiIpP3Iuc2Nyb2xsVG9wKCk6MDtuLm8ucG9zaXRpb24mJiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobi5vLnBvc2l0aW9uKT8odD1hKyhuLm8ucG9zaXRpb25bMF18fGkpLGU9bi5vLnBvc2l0aW9uWzFdfHxzKToodD1hK2ksZT1zKSxuLmQuY29udGFpbmVyLmNzcyh7bGVmdDplLHRvcDp0fSl9LHdhdGNoVGFiOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7aWYodChlLnRhcmdldCkucGFyZW50cygiLnNpbXBsZW1vZGFsLWNvbnRhaW5lci1uZXciKS5sZW5ndGg+MCl7aWYobi5pbnB1dHM9dCgiOmlucHV0OmVuYWJsZWQ6dmlzaWJsZTpmaXJzdCwgOmlucHV0OmVuYWJsZWQ6dmlzaWJsZTpsYXN0IixuLmQuZGF0YVswXSksIWUuc2hpZnRLZXkmJmUudGFyZ2V0PT09bi5pbnB1dHNbbi5pbnB1dHMubGVuZ3RoLTFdfHxlLnNoaWZ0S2V5JiZlLnRhcmdldD09PW4uaW5wdXRzWzBdfHwwPT09bi5pbnB1dHMubGVuZ3RoKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGk9ZS5zaGlmdEtleT8ibGFzdCI6ImZpcnN0IjtuLmZvY3VzKGkpfX1lbHNlIGUucHJldmVudERlZmF1bHQoKSxuLmZvY3VzKCl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZC5pZnJhbWUmJmUuZC5pZnJhbWUuc2hvdygpLHQuaXNGdW5jdGlvbihlLm8ub25PcGVuKT9lLm8ub25PcGVuLmFwcGx5KGUsW2UuZF0pOihlLmQub3ZlcmxheS5zaG93KCksZS5kLmNvbnRhaW5lci5zaG93KCksZS5kLmRhdGEuc2hvdygpKSxlLm8uZm9jdXMmJmUuZm9jdXMoKSxlLmJpbmRFdmVudHMoKX0sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCFlLmQuZGF0YSlyZXR1cm4hMTtpZihlLnVuYmluZEV2ZW50cygpLHQuaXNGdW5jdGlvbihlLm8ub25DbG9zZSkmJiFlLm9jY2IpZS5vY2NiPSEwLGUuby5vbkNsb3NlLmFwcGx5KGUsW2UuZF0pO2Vsc2V7aWYoZS5kLnBsYWNlaG9sZGVyKXt2YXIgbj10KCIjc2ltcGxlbW9kYWwtcGxhY2Vob2xkZXIiKTtlLm8ucGVyc2lzdD9uLnJlcGxhY2VXaXRoKGUuZC5kYXRhLnJlbW92ZUNsYXNzKCJzaW1wbGVtb2RhbC1kYXRhIikuY3NzKCJkaXNwbGF5IixlLmRpc3BsYXkpKTooZS5kLmRhdGEuaGlkZSgpLnJlbW92ZSgpLG4ucmVwbGFjZVdpdGgoZS5kLm9yaWcpKX1lbHNlIGUuZC5kYXRhLmhpZGUoKS5yZW1vdmUoKTtlLmQuY29udGFpbmVyLmhpZGUoKS5yZW1vdmUoKSxlLmQub3ZlcmxheS5oaWRlKCksZS5kLmlmcmFtZSYmZS5kLmlmcmFtZS5oaWRlKCkucmVtb3ZlKCksZS5kLm92ZXJsYXkucmVtb3ZlKCksZS5kPXt9fX19fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCksbig1MTEpLG4oNTY2KV0scj1mdW5jdGlvbih0LGUsbil7dmFyIGk9e2xpbmVzOjksbGVuZ3RoOjAsd2lkdGg6OCxyYWRpdXM6MTIsY29ybmVyczoxLHJvdGF0ZToyMyxkaXJlY3Rpb246MSxjb2xvcjoiIzY2NiIsc3BlZWQ6LjgsdHJhaWw6NTAsc2hhZG93OiExLGh3YWNjZWw6ITEsY2xhc3NOYW1lOiIiLHpJbmRleDoyZTksdG9wOiJhdXRvIixsZWZ0OiJhdXRvIn07cmV0dXJuIGUuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuc3Bpbk9wdGlvbnN8fCh0aGlzLnNwaW5PcHRpb25zPXt9KSx0LmRlZmF1bHRzKHRoaXMuc3Bpbk9wdGlvbnMsaSksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNwaW5BdFJlbmRlcnx8dGhpcy4kZWwuaGlkZSgpLGUucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zcGluQXRSZW5kZXImJnRoaXMuc3BpbigpLHRoaXN9LHNwaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwuc3Bpbih0aGlzLnNwaW5PcHRpb25zKS5zaG93KCksdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRlbDt0LmZhZGVPdXQobi5MT0FESU5HX0ZBREUsZnVuY3Rpb24oKXt0LnNwaW4oITEpfSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzIpLG4oNTY3KV0scj1mdW5jdGlvbih0LGUpe3QuZm4uc3Bpbj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3ZhciBpPXQodGhpcykscj1pLmRhdGEoKTtyLnNwaW5uZXImJihyLnNwaW5uZXIuc3RvcCgpLGRlbGV0ZSByLnNwaW5uZXIpLG4hPT0hMSYmKHIuc3Bpbm5lcj1uZXcgZSh0LmV4dGVuZCh7Y29sb3I6aS5jc3MoImNvbG9yIil9LG4pKS5zcGluKHRoaXMpKX1jYXRjaChvKXt3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUuZXJyb3Iobyl9fSksdGhpc319LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7KGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKHMsYSl7Im9iamVjdCI9PW8odCkmJnQuZXhwb3J0cz90LmV4cG9ydHM9YSgpOihpPWEscj0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmNhbGwoZSxuLGUsdCk6aSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpKX0odm9pZCAwLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0fHwiZGl2Iik7Zm9yKG4gaW4gZSlpW25dPWVbbl07cmV0dXJuIGl9ZnVuY3Rpb24gZSh0KXtmb3IodmFyIGU9MSxuPWFyZ3VtZW50cy5sZW5ndGg7ZTxuO2UrKyl0LmFwcGVuZENoaWxkKGFyZ3VtZW50c1tlXSk7cmV0dXJuIHR9ZnVuY3Rpb24gbih0LGUsbixpKXt2YXIgcj1bIm9wYWNpdHkiLGUsfn4oMTAwKnQpLG4saV0uam9pbigiLSIpLG89LjAxK24vaSoxMDAscz1NYXRoLm1heCgxLSgxLXQpL2UqKDEwMC1vKSx0KSxhPWMuc3Vic3RyaW5nKDAsYy5pbmRleE9mKCJBbmltYXRpb24iKSkudG9Mb3dlckNhc2UoKSxsPWEmJiItIithKyItInx8IiI7cmV0dXJuIGhbcl18fCh1Lmluc2VydFJ1bGUoIkAiK2wrImtleWZyYW1lcyAiK3IrInswJXtvcGFjaXR5OiIrcysifSIrbysiJXtvcGFjaXR5OiIrdCsifSIrKG8rLjAxKSsiJXtvcGFjaXR5OjF9IisobytlKSUxMDArIiV7b3BhY2l0eToiK3QrIn0xMDAle29wYWNpdHk6IitzKyJ9fSIsdS5jc3NSdWxlcy5sZW5ndGgpLAoJaFtyXT0xKSxyfWZ1bmN0aW9uIGkodCxlKXt2YXIgbixpLHI9dC5zdHlsZTtpZihlPWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSx2b2lkIDAhPT1yW2VdKXJldHVybiBlO2ZvcihpPTA7aTxkLmxlbmd0aDtpKyspaWYobj1kW2ldK2Usdm9pZCAwIT09cltuXSlyZXR1cm4gbn1mdW5jdGlvbiByKHQsZSl7Zm9yKHZhciBuIGluIGUpdC5zdHlsZVtpKHQsbil8fG5dPWVbbl07cmV0dXJuIHR9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZQ==", "base64"));
  res.write(new Buffer("Kyspe3ZhciBuPWFyZ3VtZW50c1tlXTtmb3IodmFyIGkgaW4gbil2b2lkIDA9PT10W2ldJiYodFtpXT1uW2ldKX1yZXR1cm4gdH1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Q6dFtlJXQubGVuZ3RoXX1mdW5jdGlvbiBhKHQpe3RoaXMub3B0cz1vKHR8fHt9LGEuZGVmYXVsdHMscCl9ZnVuY3Rpb24gbCgpe2Z1bmN0aW9uIG4oZSxuKXtyZXR1cm4gdCgiPCIrZSsnIHhtbG5zPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbCIgY2xhc3M9InNwaW4tdm1sIj4nLG4pfXUuYWRkUnVsZSgiLnNwaW4tdm1sIiwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTCkiKSxhLnByb3RvdHlwZS5saW5lcz1mdW5jdGlvbih0LGkpe2Z1bmN0aW9uIG8oKXtyZXR1cm4gcihuKCJncm91cCIse2Nvb3Jkc2l6ZTp1KyIgIit1LGNvb3Jkb3JpZ2luOi1jKyIgIistY30pLHt3aWR0aDp1LGhlaWdodDp1fSl9ZnVuY3Rpb24gYSh0LGEsbCl7ZShoLGUocihvKCkse3JvdGF0aW9uOjM2MC9pLmxpbmVzKnQrImRlZyIsbGVmdDp+fmF9KSxlKHIobigicm91bmRyZWN0Iix7YXJjc2l6ZTppLmNvcm5lcnN9KSx7d2lkdGg6YyxoZWlnaHQ6aS5zY2FsZSppLndpZHRoLGxlZnQ6aS5zY2FsZSppLnJhZGl1cyx0b3A6LWkuc2NhbGUqaS53aWR0aD4+MSxmaWx0ZXI6bH0pLG4oImZpbGwiLHtjb2xvcjpzKGkuY29sb3IsdCksb3BhY2l0eTppLm9wYWNpdHl9KSxuKCJzdHJva2UiLHtvcGFjaXR5OjB9KSkpKX12YXIgbCxjPWkuc2NhbGUqKGkubGVuZ3RoK2kud2lkdGgpLHU9MippLnNjYWxlKmMsZD0tKGkud2lkdGgraS5sZW5ndGgpKmkuc2NhbGUqMisicHgiLGg9cihvKCkse3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOmQsbGVmdDpkfSk7aWYoaS5zaGFkb3cpZm9yKGw9MTtsPD1pLmxpbmVzO2wrKylhKGwsLTIsInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5CbHVyKHBpeGVscmFkaXVzPTIsbWFrZXNoYWRvdz0xLHNoYWRvd29wYWNpdHk9LjMpIik7Zm9yKGw9MTtsPD1pLmxpbmVzO2wrKylhKGwpO3JldHVybiBlKHQsaCl9LGEucHJvdG90eXBlLm9wYWNpdHk9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dC5maXJzdENoaWxkO2k9aS5zaGFkb3cmJmkubGluZXN8fDAsciYmZStpPHIuY2hpbGROb2Rlcy5sZW5ndGgmJihyPXIuY2hpbGROb2Rlc1tlK2ldLHI9ciYmci5maXJzdENoaWxkLHI9ciYmci5maXJzdENoaWxkLHImJihyLm9wYWNpdHk9bikpfX12YXIgYyx1LGQ9WyJ3ZWJraXQiLCJNb3oiLCJtcyIsIk8iXSxoPXt9LHA9e2xpbmVzOjEyLGxlbmd0aDo3LHdpZHRoOjUscmFkaXVzOjEwLHNjYWxlOjEsY29ybmVyczoxLGNvbG9yOiIjMDAwIixvcGFjaXR5Oi4yNSxyb3RhdGU6MCxkaXJlY3Rpb246MSxzcGVlZDoxLHRyYWlsOjEwMCxmcHM6MjAsekluZGV4OjJlOSxjbGFzc05hbWU6InNwaW5uZXIiLHRvcDoiNTAlIixsZWZ0OiI1MCUiLHNoYWRvdzohMSxod2FjY2VsOiExLHBvc2l0aW9uOiJhYnNvbHV0ZSJ9O2lmKGEuZGVmYXVsdHM9e30sbyhhLnByb3RvdHlwZSx7c3BpbjpmdW5jdGlvbihlKXt0aGlzLnN0b3AoKTt2YXIgbj10aGlzLGk9bi5vcHRzLG89bi5lbD10KG51bGwse2NsYXNzTmFtZTppLmNsYXNzTmFtZX0pO2lmKHIobyx7cG9zaXRpb246aS5wb3NpdGlvbix3aWR0aDowLHpJbmRleDppLnpJbmRleCxsZWZ0OmkubGVmdCx0b3A6aS50b3B9KSxlJiZlLmluc2VydEJlZm9yZShvLGUuZmlyc3RDaGlsZHx8bnVsbCksby5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcm9ncmVzc2JhciIpLG4ubGluZXMobyxuLm9wdHMpLCFjKXt2YXIgcyxhPTAsbD0oaS5saW5lcy0xKSooMS1pLmRpcmVjdGlvbikvMix1PWkuZnBzLGQ9dS9pLnNwZWVkLGg9KDEtaS5vcGFjaXR5KS8oZCppLnRyYWlsLzEwMCkscD1kL2kubGluZXM7IWZ1bmN0aW9uIGYoKXthKys7Zm9yKHZhciB0PTA7dDxpLmxpbmVzO3QrKylzPU1hdGgubWF4KDEtKGErKGkubGluZXMtdCkqcCklZCpoLGkub3BhY2l0eSksbi5vcGFjaXR5KG8sdCppLmRpcmVjdGlvbitsLHMsaSk7bi50aW1lb3V0PW4uZWwmJnNldFRpbWVvdXQoZix+figxZTMvdSkpfSgpfXJldHVybiBufSxzdG9wOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbDtyZXR1cm4gdCYmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHRoaXMuZWw9dm9pZCAwKSx0aGlzfSxsaW5lczpmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIGEoZSxuKXtyZXR1cm4gcih0KCkse3Bvc2l0aW9uOiJhYnNvbHV0ZSIsd2lkdGg6by5zY2FsZSooby5sZW5ndGgrby53aWR0aCkrInB4IixoZWlnaHQ6by5zY2FsZSpvLndpZHRoKyJweCIsYmFja2dyb3VuZDplLGJveFNoYWRvdzpuLHRyYW5zZm9ybU9yaWdpbjoibGVmdCIsdHJhbnNmb3JtOiJyb3RhdGUoIit+figzNjAvby5saW5lcyp1K28ucm90YXRlKSsiZGVnKSB0cmFuc2xhdGUoIitvLnNjYWxlKm8ucmFkaXVzKyJweCwwKSIsYm9yZGVyUmFkaXVzOihvLmNvcm5lcnMqby5zY2FsZSpvLndpZHRoPj4xKSsicHgifSl9Zm9yKHZhciBsLHU9MCxkPShvLmxpbmVzLTEpKigxLW8uZGlyZWN0aW9uKS8yO3U8by5saW5lczt1KyspbD1yKHQoKSx7cG9zaXRpb246ImFic29sdXRlIix0b3A6MSt+KG8uc2NhbGUqby53aWR0aC8yKSsicHgiLHRyYW5zZm9ybTpvLmh3YWNjZWw/InRyYW5zbGF0ZTNkKDAsMCwwKSI6IiIsb3BhY2l0eTpvLm9wYWNpdHksYW5pbWF0aW9uOmMmJm4oby5vcGFjaXR5LG8udHJhaWwsZCt1Km8uZGlyZWN0aW9uLG8ubGluZXMpKyIgIisxL28uc3BlZWQrInMgbGluZWFyIGluZmluaXRlIn0pLG8uc2hhZG93JiZlKGwscihhKCIjMDAwIiwiMCAwIDRweCAjMDAwIikse3RvcDoiMnB4In0pKSxlKGksZShsLGEocyhvLmNvbG9yLHUpLCIwIDAgMXB4IHJnYmEoMCwwLDAsLg==", "base64"));
  res.write(new Buffer("MSkiKSkpO3JldHVybiBpfSxvcGFjaXR5OmZ1bmN0aW9uKHQsZSxuKXtlPHQuY2hpbGROb2Rlcy5sZW5ndGgmJih0LmNoaWxkTm9kZXNbZV0uc3R5bGUub3BhY2l0eT1uKX19KSwidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50KXt1PWZ1bmN0aW9uKCl7dmFyIG49dCgic3R5bGUiLHt0eXBlOiJ0ZXh0L2NzcyJ9KTtyZXR1cm4gZShkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLG4pLG4uc2hlZXR8fG4uc3R5bGVTaGVldH0oKTt2YXIgZj1yKHQoImdyb3VwIikse2JlaGF2aW9yOiJ1cmwoI2RlZmF1bHQjVk1MKSJ9KTshaShmLCJ0cmFuc2Zvcm0iKSYmZi5hZGo/bCgpOmM9aShmLCJhbmltYXRpb24iKX1yZXR1cm4gYX0pfSkuY2FsbChlLG4oMzYyKSh0KSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDMzMSksbig0NzEpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1uLnRwbCgnXHQgICAgPGEgY2xhc3M9Imljb24tMTYge3tjbGFzc05hbWV9fSIgZGF0YS1zZT0ie3tzZWxlbml1bUlkfX0iPlx0ICAgICAge3sjaWYgaWNvbn19XHQgICAgICA8c3BhbiBjbGFzcz0iaWNvbiB7e2ljb259fSI+PC9zcGFuPlx0ICAgICAge3svaWZ9fVx0ICAgICAge3sjaWYgdGl0bGV9fVx0ICAgICAge3t0aXRsZX19XHQgICAgICB7ey9pZn19XHQgICAgICB7eyNpZiBzdWJ0aXRsZX19XHQgICAgICAgIDxwIGNsYXNzPSJvcHRpb24tc3VidGl0bGUiPnt7c3VidGl0bGV9fTwvcD5cdCAgICAgIHt7L2lmfX1cdCAgIDwvYT5cdCAgICcpLG89aS5leHRlbmQoe3RhZ05hbWU6ImxpIixldmVudHM6e2NsaWNrOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLmFjdGlvbiYmdGhpcy5hY3Rpb24uY2FsbCh0aGlzKX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kZWwuYWRkQ2xhc3MoIm9rdGEtZHJvcGRvd24tb3B0aW9uIG9wdGlvbiIpfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwuaHRtbChyKHtpY29uOnQucmVzdWx0KHRoaXMsImljb24iKSxjbGFzc05hbWU6dC5yZXN1bHQodGhpcywiY2xhc3NOYW1lIil8fCIiLHRpdGxlOnQucmVzdWx0KHRoaXMsInRpdGxlIiksc3VidGl0bGU6dC5yZXN1bHQodGhpcywic3VidGl0bGUiKSxzZWxlbml1bUlkOnQucmVzdWx0KHRoaXMsInNlbGVuaXVtSWQiKX0pKSx0aGlzfX0pO3JldHVybiBpLmV4dGVuZCh7ZXZlbnRzOnsiY2xpY2sgYS5vcHRpb24tc2VsZWN0ZWQiOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0LnJlc3VsdCh0aGlzLCJkaXNhYmxlZCIpJiZlLnN0b3BQcm9wYWdhdGlvbigpfSwiY2xpY2sgLmRyb3Bkb3duLWRpc2FibGVkIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKX19LGl0ZW1zOltdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jbGFzc05hbWU7dGhpcy5jbGFzc05hbWU9bnVsbCxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmNsYXNzTmFtZT1lLHRoaXMuJGVsLmFkZENsYXNzKCJkcm9wZG93biBtb3JlLWFjdGlvbnMgZmxvYXQtbCIpLHQuZWFjaCh0LnJlc3VsdCh0aGlzLCJpdGVtcyIpLGZ1bmN0aW9uKHQpe3RoaXMuYWRkT3B0aW9uKHQsdGhpcy5vcHRpb25zKX0sdGhpcyl9LHRlbXBsYXRlOidcdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rLWJ1dHRvbiB7e2NsYXNzTmFtZX19IGxpbmstYnV0dG9uLWljb24gb3B0aW9uLXNlbGVjdGVkIGNlbnRlciI+XHQgICAgICAgIHt7I2lmIGljb259fVx0ICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiB7e2ljb259fSI+PC9zcGFuPlx0ICAgICAgICB7ey9pZn19XHQgICAgICAgIDxzcGFuIGNsYXNzPSJvcHRpb24tc2VsZWN0ZWQtdGV4dCI+e3t0aXRsZX19PC9zcGFuPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbi1kbSI+PC9zcGFuPlx0ICAgICAgPC9hPlx0ICAgICAgPGRpdiBjbGFzcz0ib3B0aW9ucyBjbGVhcmZpeCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij5cdCAgICAgIDx1bCBjbGFzcz0ib2t0YS1kcm9wZG93bi1saXN0IG9wdGlvbnMtd3JhcCBjbGVhcmZpeCI+PC91bD5cdCAgICAgIDwvZGl2Plx0ICAgICcsZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIG49W3QucmVzdWx0KHRoaXMsImNsYXNzTmFtZSIpfHwiIix0LnJlc3VsdCh0aGlzLCJkaXNhYmxlZCIpPyJkcm9wZG93bi1kaXNhYmxlZCI6IiJdO3JldHVybntpY29uOnQucmVzdWx0KHRoaXMsImljb24iKSxjbGFzc05hbWU6ZS50cmltKG4uam9pbigiICIpKSx0aXRsZTp0LnJlc3VsdCh0aGlzLCJ0aXRsZSIpfX0sYWRkT3B0aW9uOmZ1bmN0aW9uKHQsZSl7dGhpcy5hZGQoby5leHRlbmQodCksInVsLm9wdGlvbnMtd3JhcCIse29wdGlvbnM6ZXx8e319KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDUyMSldLHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZXh0ZW5kKHtzYXZlOiJPSyIscGFyYW1zOnttaW5XaWR0aDo1MDAsbWF4V2lkdGg6NzAwLGNsb3NlOiEwfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuY29udGVudCYmdGhpcy5hZGQodGhpcy5jb250ZW50KSx0aGlzLmxpc3RlblRvKHRoaXMsInNhdmUiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5va3x8dGhpcy5vcHRpb25zLm9rO3QmJnQoKSx0aGlzLnJlbW92ZSgpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLCJjYW5jZWwiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYW5jZWxGbnx8dGhpcy5vcHRpb25zLmNhbmNlbEZuO3QmJnQoKX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDMzMSksbig0NzApLG4oNDgwKV0scj1mdW5jdGlvbih0LGUsbixpKXtlKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KSxpPShuLmhhc0NsYXNzKCJvcHRpb24tc2VsZWN0ZWQiKXx8bi5wYXJlbnRzKCkuaGFzQ2xhc3MoIm9wdGlvbi1zZWxlY3RlZCIpKSYmbi5jbG9zZXN0KCIuZHJvcGRvd24iKS5sZW5ndGg+MDtpfHxlKCIuZHJvcGRvd24gLm9wdGlvbnMiKS5mYWRlT3V0KDEwMCl9KTt2YXIgcj1uLmV4dGVuZCh7dGFnTmFtZToibGkiLHRlbXBsYXRlOidcdCAgICAgIDxhIGNsYXNzPSJpY29uLTE2e3sjdW5sZXNzIGljb259fSBuby1pY29ue3svdW5sZXNzfX0ie3sjaWYgc2VsZW5pdW1JZH19IGRhdGEtc2U9Int7c2VsZW5pdW1JZH19Int7L2lmfX0+XHQgICAgICAgIHt7I2lmIGljb259fTxzcGFuIGNsYXNzPSJpY29uIHt7aWNvbn19Ij48L3NwYW4+e3svaWZ9fVx0ICAgICAgICA8cCBjbGFzcz17eyNpZiB0aXRsZX19Im9wdGlvbi10aXRsZSJ7e2Vsc2V9fSJuby10aXRsZSJ7ey9pZn19Pnt7dGl0bGV9fTwvcD5cdCAgICAgICAge3sjaWYgc3VidGl0bGV9fTxwIGNsYXNzPSJvcHRpb24tc3VidGl0bGUiPnt7c3VidGl0bGV9fTwvcD57ey9pZn19XHQgICAgICA8L2E+XHQgICAgJyxjbGFzc05hbWU6Im9rdGEtZHJvcGRvd24tb3B0aW9uIG9wdGlvbiIsZXZlbnRzOntjbGljazpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy4kZWwuaGFzQ2xhc3MoIm9wdGlvbi1kaXNhYmxlZCIpP3Quc3RvcFByb3BhZ2F0aW9uKCk6dGhpcy5vcHRpb25zLmNsaWNrJiZ0aGlzLm9wdGlvbnMuY2xpY2suY2FsbCh0aGlzKX19LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtpLmFwcGx5RG9XaGVuKHRoaXMsdC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLCJlbmFibGVXaGVuIix0aGlzKSx0aGlzLnRvZ2dsZUVuYWJsZWQpLGkuYXBwbHlEb1doZW4odGhpcyx0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInNob3dXaGVuIix0aGlzKSx0aGlzLnRvZ2dsZVZpc2libGUpfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dC5zaXplKHQucmVzdWx0Q3R4KHRoaXMub3B0aW9ucywiZW5hYmxlV2hlbiIsdGhpcykpfHx0aGlzLnRvZ2dsZUVuYWJsZWQoITApLHQuc2l6ZSh0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInNob3dXaGVuIix0aGlzKSl8fHRoaXMudG9nZ2xlVmlzaWJsZSghMCl9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybntpY29uOnQucmVzdWx0Q3R4KHRoaXMub3B0aW9ucywiaWNvbiIsdGhpcyksdGl0bGU6dC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLCJ0aXRsZSIsdGhpcyksc3VidGl0bGU6dC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLCJzdWJ0aXRsZSIsdGhpcyksc2VsZW5pdW1JZDp0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInNlbGVuaXVtSWQiLHRoaXMpfX0sdG9nZ2xlRW5hYmxlZDpmdW5jdGlvbihlKXt2YXIgbj1lJiZ0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsImVuYWJsZWQiLHRoaXMpO3RoaXMuJGVsLnRvZ2dsZUNsYXNzKCJvcHRpb24tZGlzYWJsZWQiLCFuKX0sdG9nZ2xlVmlzaWJsZTpmdW5jdGlvbihlKXt2YXIgbj1lJiZ0LnJlc3VsdEN0eCh0aGlzLm9wdGlvbnMsInZpc2libGUiLHRoaXMpO3RoaXMuJGVsLnRvZ2dsZUNsYXNzKCJvcHRpb24taGlkZGVuIiwhbil9fSksbz17ImNsaWNrIGEub3B0aW9uLXNlbGVjdGVkIjpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdC5yZXN1bHQodGhpcywiZGlzYWJsZWQiKT9lLnN0b3BQcm9wYWdhdGlvbigpOnRoaXMuJCgiZGl2Lm9wdGlvbnMiKS50b2dnbGUoKX0sImNsaWNrIC5kcm9wZG93bi1kaXNhYmxlZCI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCl9fSxzPVsiaWNvbiIsInRpdGxlIiwic3VidGl0bGUiLCJjbGljayIsImVuYWJsZVdoZW4iLCJzaG93V2hlbiIsImVuYWJsZWQiLCJ2aXNpYmxlIiwiYXR0cmlidXRlcyIsInNlbGVuaXVtSWQiXTtyZXR1cm4gbi5leHRlbmQoe2l0ZW1zOltdLGl0ZW1XaWR0aDpudWxsLHdpZHRoOm51bGwsaWNvbjpudWxsLHRpdGxlOm51bGwsZGlzYWJsZWQ6ITEsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cz10LmRlZmF1bHRzKHRoaXMuZXZlbnRzfHx7fSxvKTt2YXIgZT10aGlzLmNsYXNzTmFtZTt0aGlzLmNsYXNzTmFtZT1udWxsLHRoaXMucG9zdFJlbmRlcj10LndyYXAodGhpcy5wb3N0UmVuZGVyLHQuYmluZChmdW5jdGlvbihlKXt2YXIgbj10LnJlc3VsdCh0aGlzLCJpdGVtV2lkdGgiKTtuJiZ0aGlzLiQoInVsLm9wdGlvbnMtd3JhcCIpLndpZHRoKG4pO3ZhciBpPXQucmVzdWx0KHRoaXMsIndpZHRoIik7aSYmdGhpcy4kKCJhLm9wdGlvbi1zZWxlY3RlZCIpLndpZHRoKGktMzApLHQucmVzdWx0KHRoaXMsImRpc2FibGVkIikmJnRoaXMuZGlzYWJsZSgpLGUuY2FsbCh0aGlzKX0sdGhpcykpLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuY2xhc3NOYW1lPWUsdGhpcy4kZWwuYWRkQ2xhc3MoImRyb3Bkb3duIG1vcmUtYWN0aW9ucyBmbG9hdC1sIiksdC5lYWNoKHQucmVzdWx0KHRoaXMsIml0ZW1zIil8fFtdLGZ1bmN0aW9uKHQpe3RoaXMuYWRkSXRlbSh0LHRoaXMub3B0aW9ucyl9LHRoaXMpfSx0ZW1wbGF0ZTonXHQgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluay1idXR0b24gbGluay1idXR0b24taWNvbiBvcHRpb24tc2VsZWN0ZWQgY2VudGVyIHt7Y2xhc3NOYW1lfX0iPlx0ICAgICAgICB7eyNpZiBpY29ufX08c3BhbiBjbGFzcz0iaWNvbiB7e2ljb259fSI+PC9zcGFuPnt7L2lmfX1cdCAgICAgICAge3sjaWYgdGl0bGV9fTxzcGFuIGNsYXNzPSJvcHRpb24tc2VsZWN0ZWQtdGV4dCI+e3t0aXRsZX19PC9zcGFuPnt7L2lmfX1cdCAgICAgICAgPHNwYW4gY2xhc3M9Imljb24tZG0iPjwvc3Bhbj5cdCAgICAgIDwvYT5cdCAgICAgIDxkaXYgY2xhc3M9Im9wdGlvbnMgY2xlYXJmaXgiPlx0ICAgICAgICA8dWwgY2xhc3M9Im9rdGEtZHJvcGRvd24tbGlzdCBvcHRpb25zLXdyYXAgY2xlYXJmaXgiPjwvdWw+XHQgICAgICA8L2Rpdj5cdCAgICAnLGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybntpY29uOnQucmVzdWx0KHRoaXMsImljb24iKSxjbGFzc05hbWU6dC5yZXN1bHQodGhpcywiY2xhc3NOYW1lIil8fCIiLHRpdGxlOnQucmVzdWx0KHRoaXMsInRpdGxlIil9fSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy4kKCIub3B0aW9uLXNlbGVjdGVkIikuYWRkQ2xhc3MoImRyb3Bkb3duLWRpc2FibGVkIil9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuJCgiLm9wdGlvbi1zZWxlY3RlZCIpLnJlbW92ZUNsYXNzKCJkcm9wZG93bi1kaXNhYmxlZCIpfSxhZGRJdGVtOmZ1bmN0aW9uKGUpe3JldHVybiBlPXQucGljayhlfHx7fSxzKSx0LmRlZmF1bHRzKGUse3Zpc2libGU6ITAsZW5hYmxlZDohMH0pLHRoaXMuYWRkKHIsInVsLm9wdGlvbnMtd3JhcCIse29wdGlvbnM6ZX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDMzMSksbig1NjMpLG4oNDk2KSxuKDU3MildLHI9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxuLGkpe3ZhciBvLHMsYT1lKHQpLmZpbmQobik7aWYoYSlyZXR1cm4gbz1hLm91dGVySGVpZ2h0KCEwKS1hLmhlaWdodCgpLHM9cihhLnNpYmxpbmdzKCkpK28saS1zfWZ1bmN0aW9uIGkoKXtyZXR1cm4gZSgiYm9keSIpLmFwcGVuZChhKSxlKCIubW9kYWwtc3RhZ2luZyIpfWZ1bmN0aW9uIHIobil7cmV0dXJuIHQucmVkdWNlKG4sZnVuY3Rpb24odCxuKXtyZXR1cm4gdCtlKG4pLm91dGVySGVpZ2h0KCEwKX0sMCl9ZnVuY3Rpb24gbyh0LGUpe3N8fChzPWkoKSkscy5odG1sKHQpO3ZhciBuPWUocyk7cmV0dXJuIHMuZW1wdHkoKSxufXZhciBzLGE9JzxkaXYgY2xhc3M9Im1vZGFsLXN0YWdpbmcgc2ltcGxlbW9kYWwtd3JhcCIgc3R5bGU9InZpc2liaWxpdHk6IGhpZGRlbjsgcG9zaXRpb246IGFic29sdXRlOyI+PC9kaXY+JztyZXR1cm57bWVhc3VyZTpmdW5jdGlvbih0KXtyZXR1cm4gbyh0LGZ1bmN0aW9uKHQpe3JldHVybiB0LmhlaWdodCgpfSl9LGZpdDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIG8odCxmdW5jdGlvbih0KXtyZXR1cm4gbih0LGUsaSl9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7cyYmcy5yZW1vdmUoKSxzPXZvaWQgMH19fSgpLHM9e21pbldpZHRoOjYwMCxtYXhXaWR0aDo5NTAsYXV0b1Jlc2l6ZTohMSxhdXRvUG9zaXRpb246ITB9O3JldHVybiBuLmV4dGVuZCh7cmVzaXplT25Td2l0Y2g6ITEsY29uc3RydWN0b3I6ZnVuY3Rpb24oZSl7aWYodC5kZWZhdWx0cyh0aGlzLnBhcmFtcyxzKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlfHwoZT17fSksdC5leHRlbmQodGhpcyx0LnBpY2soZSwiVmlldyIsImhlaWdodCIsInJlc2l6ZU9uU3dpdGNoIikpLCF0aGlzLlZpZXcpdGhyb3cgbmV3IEVycm9yKCJUaGUgTXVsdGlWaWV3TW9kYWxEaWFsb2cgbXVzdCBiZSBwcm92aWRlZCBhIFZpZXcgd2hlbiBpbml0aWFsaXplZCIpO3RoaXMuX3ByZWZldGNoRGV0ZWN0aW9uKGUsITEpLHRoaXMuU3RhZ2U9b30scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fc2V0SGVpZ2h0KCksdGhpcy5fc2V0Q29udGVudEhlaWdodCgpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe28ucmVtb3ZlKCksbi5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc3dpdGNoVmlldzpmdW5jdGlvbihlLG4pe258fChuPXt9KSxuPXQuY2xvbmUodC5leHRlbmQobix7Y3VycmVudFZpZXdIZWlnaHQ6dGhpcy5oZWlnaHR9KSksdC5leHRlbmQodGhpcyx0LnBpY2sobiwiaGVpZ2h0Iikse1ZpZXc6ZX0pLHRoaXMuX3ByZWZldGNoRGV0ZWN0aW9uKG4sITApfSx1cGRhdGVUaXRsZTpmdW5jdGlvbihlKXtlPWV8fHRoaXMuY3VycmVudFZpZXcudGl0bGUsZSYmKHQuaXNGdW5jdGlvbihlKSYmKGU9ZS5jYWxsKHRoaXMpKSx0aGlzLnJlbmRlcmVkKCk/KHRoaXMuJCgiaDIuYmxvY2siKS5odG1sKGUpLHRoaXMuY3VycmVudFZpZXcuJCgiaDIub2t0YS1mb3JtLXRpdGxlIikucmVtb3ZlKCkpOih0aGlzLnRpdGxlPWUsdGhpcy5jdXJyZW50Vmlldy50aXRsZT0iIikpfSxfYWRkVmlldzpmdW5jdGlvbihlLG4pe3RoaXMuY3VycmVudFZpZXcmJnRoaXMuY3VycmVudFZpZXcucmVtb3ZlKCksdGhpcy5jdXJyZW50Vmlldz10aGlzLmFkZChlKS5hdCgwKSx0aGlzLnJlc2l6ZVNlbGVjdG9yPXRoaXMuY3VycmVudFZpZXcucmVzaXplU2VsZWN0b3J8fHRoaXMuY3VycmVudFZpZXcuZWwsdGhpcy51cGRhdGVUaXRsZShuLnRpdGxlKSx0aGlzLmxpc3RlblRvKHRoaXMuY3VycmVudFZpZXcsInJlc2l6ZSIsdC5kZWJvdW5jZSh0LmJpbmQodGhpcy5fc2V0Q29udGVudEhlaWdodCx0aGlzKSwxMDApKX0sX2FkZFNjcm9sbGJhcnM6ZnVuY3Rpb24odCxlKXt0LmhlaWdodChlKSx0LmNzcygib3ZlcmZsb3ciLCJhdXRvIil9LF9nZXRNYXhIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yb3VuZCguOSplKHdpbmRvdykuaGVpZ2h0KCkpfSxfc2V0Q29udGVudEhlaWdodDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY3VycmVudFZpZXcsZT10LiQodGhpcy5yZXNpemVTZWxlY3Rvciksbj1vLmZpdCh0LiRlbC5odG1sKCksdGhpcy5yZXNpemVTZWxlY3Rvcix0aGlzLmhlaWdodCk7ZS5oZWlnaHQoKSE9PW4mJm4mJih0aGlzLl9hZGRTY3JvbGxiYXJzKGUsbiksdGhpcy5yZXNpemUoKSl9LF9zZXRIZWlnaHQ6ZnVuY3Rpb24odCl7dmFyIGUsbixpPXRoaXMuX2dldE1heEhlaWdodCgpLHI9dD92b2lkIDA6dGhpcy5oZWlnaHQ7cmV0dXJuIHI+aT92b2lkKHRoaXMuaGVpZ2h0PWkpOihuPW8uZml0KHRoaXMuJGVsLmh0bWwoKSx0aGlzLmN1cnJlbnRWaWV3LnJlc2l6ZVNlbGVjdG9yLHIpLHZvaWQobj4yMHx8KGU9by5tZWFzdXJlKHRoaXMuJGVsLmh0bWwoKSksdGhpcy5oZWlnaHQ9TWF0aC5taW4oZSxpKSkpKX0sX29uUHJlZmV0Y2hTdWNjZXNzOmZ1bmN0aW9uKGUsbixyKXt2YXIgbz0hIXRoaXMuY3VycmVudFZpZXc7cmV0dXJuIHRoaXMuX3NwaW5uZXJIaWRlKCksdGhpcy5fYWRkVmlldyhlLG4pLCEoIXImJiFvKSYmKCFyJiZvP3RoaXMuX3Jlc2l6ZURpYWxvZyh7aGVpZ2h0Om4uaGVpZ2h0LHRyYW5zaXRpb246aS5FRkZFQ1RTLk5PTkV9KTp0aGlzLl9yZXNpemVEaWFsb2cobiksdm9pZCh0LmlzRnVuY3Rpb24obi5wb3N0ZmV0Y2gpP3QuZGVmZXIobi5wb3N0ZmV0Y2gpOnQuaXNGdW5jdGlvbihlLnBvc3RmZXRjaCkmJnQuZGVmZXIodC5iaW5kKGUucG9zdGZldGNoLGUpKSkpfSxfcmVzaXplRGlhbG9nOmZ1bmN0aW9uKHQpe3QuaGVpZ2h0P3RoaXMuX3NldEhlaWdodCgpOnRoaXMucmVzaXplT25Td2l0Y2gmJnRoaXMuX3NldEhlaWdodCghMCksdGhpcy5fc2V0Q29udGVudEhlaWdodCgpLGkuYW5pbWF0ZSh0aGlzLmN1cnJlbnRWaWV3LiRlbCx0LnRyYW5zaXRpb258fGkuRUZGRUNUUy5TTElERSl9LF9nZXRJbnN0YW50aWF0ZWRWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiB0LmlzRnVuY3Rpb24oZSk/bmV3IGUodGhpcy5vcHRpb25zKTplfSxfcHJlZmV0Y2hFcnJvcjpmdW5jdGlvbih0KXt0aGlzLmhlaWdodD10LmN1cnJlbnRWaWV3SGVpZ2h0fHx0aGlzLmhlaWdodCx0aGlzLl9zZXRIZWlnaHQoKSx0aGlzLl9zZXRDb250ZW50SGVpZ2h0KCksdGhpcy5fc3Bpbm5lckhpZGUoKX0sX3NwaW5uZXJTaG93OmZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudFZpZXc/KHRoaXMuc3Bpbm5lclZpZXc9bmV3IHIoe2VsVG9BdHRhY2hUbzp0aGlzLmN1cnJlbnRWaWV3LiQodGhpcy5yZXNpemVTZWxlY3Rvcil9KSx0aGlzLmFkZCh0aGlzLnNwaW5uZXJWaWV3KSk6dGhpcy5fYWRkVmlldyhuZXcgcih7aGVpZ2h0OnRoaXMuaGVpZ2h0fSkse3RpdGxlOnQudGl0bGV9KX0sX3NwaW5uZXJIaWRlOmZ1bmN0aW9uKCl7dGhpcy5zcGlubmVyVmlldyYmdGhpcy5zcGlubmVyVmlldy5yZW1vdmUoKX0sX2dldFByZWZldGNoRnVuY3Rpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmlzVW5kZWZpbmVkKG4ucHJlZmV0Y2gpP2UucHJlZmV0Y2g6bi5wcmVmZXRjaDtyZXR1cm4hIWkmJih0LmlzRnVuY3Rpb24obi5wcmVmZXRjaCk/bi5wcmVmZXRjaDp0LmlzRnVuY3Rpb24oZS5wcmVmZXRjaCk/dC5iaW5kKGUucHJlZmV0Y2gsZSk6dC5iaW5kKGUubW9kZWwuZmV0Y2gsZS5tb2RlbCkpfSxfcHJlZmV0Y2hEZXRlY3Rpb246ZnVuY3Rpb24obixpKXt2YXIgcj10aGlzLG89dGhpcy5fZ2V0SW5zdGFudGlhdGVkVmlldyh0aGlzLlZpZXcpLHM9dC5iaW5kKHRoaXMuX29uUHJlZmV0Y2hTdWNjZXNzLHRoaXMsbyxuLGkpLGE9dGhpcy5fZ2V0UHJlZmV0Y2hGdW5jdGlvbihvLG4pO2E/KHRoaXMuX3NwaW5uZXJTaG93KG8pLGUud2hlbihhKCkpLmRvbmUocykuZmFpbChmdW5jdGlvbigpe3IuX3ByZWZldGNoRXJyb3Iobil9KSk6cygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDU2NSksbig0NzApXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0yMDtyZXR1cm4gbi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLl9pbml0aWFsU3R5bGUodGhpcy5vcHRpb25zKX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldFBvc2l0aW9uKCk7ZS5sZWZ0PDA/dC5kZWxheSh0LmJpbmQodGhpcy5zaG93U3Bpbm5lcix0aGlzKSwyMDApOnRoaXMuc2hvd1NwaW5uZXIoKX0sc2hvd1NwaW5uZXI6ZnVuY3Rpb24oKXt0aGlzLnNwaW5uZXImJnRoaXMuc3Bpbm5lci5yZW1vdmUoKTt2YXIgdCxuPXRoaXMuX2dldFBvc2l0aW9uKCk7dGhpcy5vcHRpb25zLmVsVG9BdHRhY2hUbyYmdGhpcy4kZWwuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUifSksdD1lLmV4dGVuZCh7c3BpbkF0UmVuZGVyOiEwLHNwaW5PcHRpb25zOntsZWZ0Om4ubGVmdCx0b3A6bi50b3B9fSksdGhpcy5zcGlubmVyPW5ldyB0LHRoaXMuYWRkKHRoaXMuc3Bpbm5lcil9LF9pbml0aWFsU3R5bGU6ZnVuY3Rpb24oZSl7dmFyIG49e307aWYoZS5lbFRvQXR0YWNoVG8pe3ZhciBpPWUuZWxUb0F0dGFjaFRvLnBvc2l0aW9uKCk7bi53aWR0aD1lLmVsVG9BdHRhY2hUby5vdXRlcldpZHRoKCksbi5oZWlnaHQ9ZS5lbFRvQXR0YWNoVG8ub3V0ZXJIZWlnaHQoKSxpJiYobi50b3A9aS50b3ApfXQuZXh0ZW5kKG4sdC5waWNrKGUsImhlaWdodCIsIndpZHRoIikpLHRoaXMuJGVsLmNzcyhuKX0sX2dldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue2xlZnQ6dGhpcy4kZWwub3V0ZXJXaWR0aCgpLzItaSx0b3A6dGhpcy4kZWwub3V0ZXJIZWlnaHQoKS8yLWl9fX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNTc1KSxuKDU5Miksbig1NzgpLG4oNTc3KSxuKDU4MSksbig1NzYpLG4oNTg5KSxuKDU5MCksbig1OTMpLG4oNTc0KSxuKDU4NSksbig1ODcpLG4oNTgyKSxuKDU4Niksbig1OTEpLG4oNTc5KSxuKDU4OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhLGwsYyx1LGQsaCxwLGYsbSxfKXtyZXR1cm57Q29udGVudDp0LERhdGFMaXN0OmUsRGVhZFNpbXBsZURhdGFMaXN0Om4sRW1wdHk6aSxGb290ZXI6cixMb2FkaW5nOm8sU2lkZWJhcjpzLFNpZGViYXJGaWx0ZXJTZXQ6YSxTaW1wbGVEYXRhTGlzdDpsLFRhYmxlOmMsVG9vbEJhcjp1LGNvbXBvbmVudHM6e0xldHRlcnNOYXY6ZCxMb2FkTW9yZTpoLFNlYXJjaEJveDpwLFNpZGViYXJGaWx0ZXI6Zn0sdXRpbDp7RGF0YWxpc3RGYWN0b3J5Om0sRmlsdGVyRmFjdG9yeTpffX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCksbig1NzYpLG4oNTc3KV0scj1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gZS5leHRlbmQoe0VtcHR5Om51bGwsTG9hZGluZzpudWxsLHRlbXBsYXRlOic8ZGl2IGNsYXNzPSJkYXRhLWxpc3QtY29udGVudCIgZGF0YS1zZT0iZGF0YS1saXN0LWNvbnRlbnQiPjwvZGl2PicsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtpZihlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSwhdGhpcy5jb2xsZWN0aW9uKXRocm93IG5ldyBFcnJvcigiTWlzc2luZyBBcmd1bWVudHM6IGNvbGxlY3Rpb24iKTt0aGlzLlRvb2xiYXImJnRoaXMuYWRkKHRoaXMuVG9vbGJhcix7cHJlcGVuZDohMH0pLHRoaXMuTWFpbiYmdGhpcy5hZGQodGhpcy5NYWluKTt2YXIgdD10aGlzLkVtcHR5fHxpLHI9dGhpcy5Mb2FkaW5nfHxuO3RoaXMuYWRkKHQpLHRoaXMuYWRkKHIpLHRoaXMuJGVsLmFkZENsYXNzKCJkYXRhLWxpc3QtY29udGVudC13cmFwIiksdGhpcy4kZWwuYXR0cigiZGF0YS1zZSIsImRhdGEtbGlzdC1jb250ZW50LXdyYXAiKX0sYWRkOmZ1bmN0aW9uKCl7dmFyIG49dC50b0FycmF5KGFyZ3VtZW50cyk7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBuWzFdJiYoblsxXT0iLmRhdGEtbGlzdC1jb250ZW50IiksZS5wcm90b3R5cGUuYWRkLmFwcGx5KHRoaXMsbil9LGhlaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gdD92b2lkIHRoaXMuJCgiLmRhdGEtbGlzdC1jb250ZW50IikuY3NzKCJtaW4taGVpZ2h0Iix0KTp0aGlzLiRlbC5oZWlnaHQoKX0sdHlwZToiY29udGVudCJ9KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDU2NSldLHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZXh0ZW5kKHtjbGFzc05hbWU6ImRhdGEtbGlzdC1sb2FkLXdyYXAiLHR5cGU6ImxvYWRpbmciLHRlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9ImRhdGEtbGlzdC1sb2FkLW1hc2siPjwvZGl2Plx0ICAgICAgPGg0IGNsYXNzPSJkYXRhLWxpc3QtaGVhZCI+TG9hZGluZy4uLjwvaDQ+XHQgICAgJyxzcGluT3B0aW9uczp7Y2xhc3NOYW1lOiJkYXRhLWxpc3Qtc3Bpbm5lciJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwicmVxdWVzdCIsdGhpcy5zcGluKSx0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwic3luYyBlcnJvciIsdGhpcy5lbXB0eSl9LHNwaW46ZnVuY3Rpb24oZSl7ZT09PXRoaXMuY29sbGVjdGlvbiYmdC5wcm90b3R5cGUuc3Bpbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcxKSxuKDQ3MCksbig1MDApXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe2Z1bmN0aW9uIHIoZSxuKXtyZXR1cm4gZS5zdGF0ZS5nZXQoImVtcHR5LmVzY2FwZSIpPT09ITF8fHQucmVzdWx0KGUsImVzY2FwZSIpPT09ITE/bjp0LmVzY2FwZShuKX1yZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZToiZGF0YS1saXN0LWVtcHR5LW1zZyIsdHlwZToiZW1wdHkiLGVzY2FwZTohMCx0aXRsZTp2b2lkIDAsc3VidGl0bGU6dm9pZCAwLHRlbXBsYXRlOidcdCAgICAgIDxwIGNsYXNzPSJkYXRhLWxpc3QtZW1wdHktYmluYXJ5Ij5cdCAgICAgICAgMDExMDExMTAwMTEwMTExMTAxMTEwMTAwMDExMDEwMDAwMTEwMTAwMTAxMTAxMTEwMDExMDAxMTFcdCAgICAgICAgPHNwYW4gY2xhc3M9ImRhdGEtbGlzdC1lbXB0eS1pbWciPjwvc3Bhbj5cdCAgICAgIDwvcD5cdCAgICAgIDxoNCBjbGFzcz0iZGF0YS1saXN0LWhlYWQgZGF0YS1saXN0LWVtcHR5LWhlYWQiPnt7dGl0bGV9fTwvaDQ+XHQgICAgICA8aDUgY2xhc3M9ImRhdGEtbGlzdC1oZWFkIGRhdGEtbGlzdC1lbXB0eS1oZWFkIGRhdGEtbGlzdC1lbXB0eS1zdWJoZWFkIj57e3tzdWJ0aXRsZX19fTwvaDU+XHQgICAgJyxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpKXt2YXIgcj1pJiZpLnRlbXBsYXRlfHx0aGlzLnRlbXBsYXRlO3RoaXMuX190ZW1wbGF0ZT10LmlzU3RyaW5nKHIpP2UudHBsKHIpOnIsbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG89dGhpcy5vcHRpb25zLmRlYm91bmNlVGltZXx8MjAwLHM9bysxMDt0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwic3luYyBhZGQgcmVtb3ZlIHJlc2V0Iix0LmRlYm91bmNlKHRoaXMudG9nZ2xlLG8pKSx0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwiZXJyb3IiLHQuZGVib3VuY2UodGhpcy5fc2hvd0Vycm9yLHMpKSx0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwicmVxdWVzdCIsdGhpcy5lbXB0eSl9LF9zaG93RXJyb3I6ZnVuY3Rpb24oZSxuLHIpe2lmKGU9PT10aGlzLmNvbGxlY3Rpb24pe2lmKCF0LmlzU3RyaW5nKHIpKXRyeXt2YXIgbz1uLnJlc3BvbnNlSlNPTnx8SlNPTi5wYXJzZShuLnJlc3BvbnNlVGV4dCk7cj1vLmVycm9yU3VtbWFyeX1jYXRjaChzKXt9dGhpcy5fX2RvUmVuZGVyKGkubG9jYWxpemUoImRhdGFsaXN0LmVycm9yX3RpdGxlIiwiY291cmFnZSIpLHQuaXNTdHJpbmcocik/cjppLmxvY2FsaXplKCJkYXRhbGlzdC5lcnJvcl9zdWJ0aXRsZSIsImNvdXJhZ2UiKSl9fSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sX19kb1JlbmRlcjpmdW5jdGlvbih0LGUpe3RoaXMuJGVsLmh0bWwodGhpcy5fX3RlbXBsYXRlKHt0aXRsZTp0LHN1YnRpdGxlOnIodGhpcyxlKX0pKS5zaG93KCl9LF9fZ2V0VmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dC5yZXN1bHQodGhpcyxlKTtyZXR1cm4gbj09PSExPyIiOnRoaXMuc3RhdGUuZ2V0KCJlbXB0eS4iK2UpfHxufHxpLmxvY2FsaXplKCJkYXRhbGlzdC5lbXB0eV8iK2UsImNvdXJhZ2UiKX0saXNFbXB0eVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmNvbGxlY3Rpb24uc2l6ZSgpfSx0b2dnbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5U3RhdGUoKT90aGlzLl9fZG9SZW5kZXIodGhpcy5fX2dldFZhbHVlKCJ0aXRsZSIpLHRoaXMuX19nZXRWYWx1ZSgic3VidGl0bGUiKSk6dGhpcy5lbXB0eSgpLHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dGhpcy4kZWwuZW1wdHkoKS5oaWRlKCl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNTc5KSxuKDU4NCksbig1ODgpLG4oNTkyKSxuKDU3NSksbig1NzQpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMpe2Z1bmN0aW9uIGEoZSxuLGkpe3QuaXNVbmRlZmluZWQoaSkmJihpPXRoaXNbZV0ubGVuZ3RoKSx0aGlzW2VdLnNwbGljZShpLDAsbil9cmV0dXJuIHIuZXh0ZW5kKHthdHRyaWJ1dGVzOnsiZGF0YS1zZSI6ImRhdGEtbGlzdCJ9LGVtcHR5U3RhdGU6e3RpdGxlOnZvaWQgMCxzdWJ0aXRsZTp2b2lkIDAsZXNjYXBlOnZvaWQgMH0sTG9hZE1vcmVWaWV3OnZvaWQgMCxjb2x1bW5zOltdLHRvb2xiYXI6W10saW5uZXJUb29sYmFyOiExLGZpbHRlcnM6W10sYWRkQ29sdW1uOnQucGFydGlhbChhLCJfX2NvbHVtbnMiKSxhZGRUb29sYmFyQ29tcG9uZW50OnQucGFydGlhbChhLCJfX3Rvb2xiYXIiKSxhZGRGaWx0ZXJTZXQ6dC5wYXJ0aWFsKGEsIl9fZmlsdGVycyIpLF9fcHJvY2Vzc0FjdGlvbnM6ZnVuY3Rpb24obil7aWYoIXQuaXNPYmplY3Qobil8fHQuaXNBcnJheShuKSlyZXR1cm4gbjt2YXIgaT10Lm9taXQobiwiYWN0aW9ucyIpLHI9dC5waWNrKG4sImRyb3Bkb3duIiwidGhyZXNob2xkIik7cmV0dXJuIG4uYWN0aW9ucyYmKGkudmlldz1lLmNyZWF0ZUFjdGlvbnModC5yZXN1bHQobiwiYWN0aW9ucyIpLHIpKSxpfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuX190b29sYmFyPXQuY2xvbmUodGhpcy50b29sYmFyfHxbXSksdGhpcy5fX2ZpbHRlcnM9dC5jbG9uZSh0aGlzLmZpbHRlcnN8fFtdKSx0aGlzLl9fY29sdW1ucz10LmNsb25lKHRoaXMuY29sdW1uc3x8W10pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNoaWxkcmVuKCksdGhpcy5fX3Rvb2xiYXIubGVuZ3RoJiYodGhpcy5Ub29sYmFyPW4uY3JlYXRlVG9vbGJhcih0aGlzLl9fdG9vbGJhcikpLHRoaXMuVG9vbGJhciYmIXRoaXMuaW5uZXJUb29sYmFyJiZ0aGlzLlRvb2xiYXImJnRoaXMuYWRkKHRoaXMuVG9vbGJhciksdGhpcy5fX2ZpbHRlcnMubGVuZ3RoJiYodGhpcy5TaWRlYmFyPWkuY3JlYXRlRmlsdGVycyh0aGlzLl9fZmlsdGVycykpLHRoaXMuU2lkZWJhciYmdGhpcy5hZGQodGhpcy5TaWRlYmFyKTt2YXIgYT10Lm1hcCh0aGlzLl9fY29sdW1ucyx0aGlzLl9fcHJvY2Vzc0FjdGlvbnMpO3JldHVybiF0aGlzLmZvb3RlciYmdGhpcy5Mb2FkTW9yZVZpZXcmJih0aGlzLmZvb3Rlcj1lLmNyZWF0ZUZvb3RlclZpZXcodGhpcy5Mb2FkTW9yZVZpZXcpKSx0aGlzLmFkZChvLmV4dGVuZCh7VG9vbGJhcjp0aGlzLmlubmVyVG9vbGJhciYmdGhpcy5Ub29sYmFyLE1haW46cy5leHRlbmQoe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiZGF0YS1saXN0LXRhYmxlIn0sY29sdW1uczphLGl0ZW06dGhpcy5pdGVtLGhlYWRlcjp0aGlzLmhlYWRlcixjYXB0aW9uOnRoaXMuY2FwdGlvbixmb290ZXI6dGhpcy5mb290ZXJ9KSxFbXB0eTp0aGlzLkVtcHR5fHxlLmNyZWF0ZUVtcHR5Vmlldyh0aGlzLmVtcHR5U3RhdGUpLExvYWRpbmc6dGhpcy5Mb2FkaW5nfSkpLHIucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpc319KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig1ODApLG4oNTc3KSxuKDU4MSksbig1ODMpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJue2NyZWF0ZUhlYWRlcjpmdW5jdGlvbigpe3JldHVybiBlLmNyZWF0ZUhlYWRlci5hcHBseShlLGFyZ3VtZW50cyl9LGNyZWF0ZVJvdzpmdW5jdGlvbigpe3JldHVybiBlLmNyZWF0ZVJvdy5hcHBseShlLGFyZ3VtZW50cyl9LGNyZWF0ZUFjdGlvbnM6ZnVuY3Rpb24oZSxuKXtpZihuPW58fHt9LCF0LmlzQXJyYXkoZSl8fCFlLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoZSsiIGhhcyB0byBiZSBhIG5vbi1lbXB0eSBhcnJheS4iKTtyZXR1cm4gbi5hY3Rpb25PcHRpb25zPXQubWFwKGUsdC5jbG9uZSksci5leHRlbmQobil9LGNyZWF0ZUVtcHR5VmlldzpmdW5jdGlvbihlKXtyZXR1cm4gbi5leHRlbmQodC5jbG9uZShlKXx8e30pfSxjcmVhdGVGb290ZXJWaWV3OmZ1bmN0aW9uKHQpe3JldHVybiBpLmV4dGVuZCh7TG9hZE1vcmVWaWV3OnR9KX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG87ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9OyFmdW5jdGlvbihzLGEpe3I9W24oMzI4KSxuKDQ3MildLGk9YSxvPSJmdW5jdGlvbiI9PXR5cGVvZiBpP2kuYXBwbHkoZSxyKTppLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSl9KHZvaWQgMCxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHQubWFwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNTdHJpbmcoZSkmJihlPXtuYW1lOmV9KSwhZS5uYW1lJiZlLmZpZWxkJiYoZT10LmV4dGVuZCh7bmFtZTplLmZpZWxkfSxlKSksZX0pfWZ1bmN0aW9uIGkoZSl7dmFyIG49e307cmV0dXJuIHQuZWFjaChlfHx7fSxmdW5jdGlvbihlLGkpe25baV09ZnVuY3Rpb24obil7bi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCksdC5pc0Z1bmN0aW9uKGUpJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRoaXMpLG59cmV0dXJue2NyZWF0ZUhlYWRlcjpmdW5jdGlvbihpKXtyZXR1cm4gZS5leHRlbmQoe3RhZ05hbWU6InRoZWFkIix0ZW1wbGF0ZToiPHRyPjwvdHI+Iixpbml0aWFsaXplOmZ1bmN0aW9uKCl7dC5lYWNoKG4oaSksZnVuY3Rpb24odCl7dGhpcy5hZGQoZS5leHRlbmQoe2VsOic8dGggcm9sZT0iY29sdW1uaGVhZGVyIj48L3RoPicsY2hpbGRyZW46dC5oZWFkZXJWaWV3JiZbdC5oZWFkZXJWaWV3XSx0ZW1wbGF0ZTp0LmhlYWRlclZpZXc/bnVsbDp0LmxhYmVsfHwiJm5ic3A7In0pLCJ0ciIpfSx0aGlzKX19KX0sY3JlYXRlUm93OmZ1bmN0aW9uKGkpe3ZhciByPXRoaXM7cmV0dXJuIGUuZXh0ZW5kKHt0YWdOYW1lOiJ0Ym9keSIsdGVtcGxhdGU6Jzx0ciByb2xlPSJyb3ciPjwvdHI+JyxjaGlsZHJlbjp0Lm1hcChuKGkpLGZ1bmN0aW9uKHQpe3JldHVybltyLmNyZWF0ZUNlbGwodCksInRyIl19KX0pfSxjcmVhdGVDZWxsOmZ1bmN0aW9uKG4pe3ZhciByPXQuZXh0ZW5kKHQucGljayhuLCJjbGFzc05hbWUiLCJhdHRyaWJ1dGVzIiwiaW5pdGlhbGl6ZSIpLHt0YWdOYW1lOiJ0ZCIsZXZlbnRzOmkobi5ldmVudHMpLGNoaWxkcmVuOm4udmlldyYmW24udmlld10sdGVtcGxhdGU6bi52aWV3P251bGw6bi50ZW1wbGF0ZXx8Int7IituLm5hbWUrIn19In0pO3JldHVybiBlLmV4dGVuZChyKX0sX19ub3JtYWxpemVGaWVsZHM6bixfX2NsZWFuRXZlbnRzOml9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MSksbig0NzApLG4oNTgyKV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1lLnRwbCgnXHQgICAgPHRyPlx0ICAgICAgPHRkIGNvbHNwYW49Int7Y29sc3Bhbn19Ij48L3RkPlx0ICAgIDwvdHI+XHQgICcpLG89bi5leHRlbmQoe3RhZ05hbWU6InRmb290IixjbGFzc04=", "base64"));
  res.write(new Buffer("YW1lOiJkYXRhLWxpc3QtcGFnZXItZm9vdGVyIixMb2FkTW9yZVZpZXc6dm9pZCAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sInJlcXVlc3QiLHRoaXMuZW1wdHkpLHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCJzeW5jIHJlc2V0Iix0LmRlYm91bmNlKHRoaXMucmVuZGVyLDUwKSl9LHJlbmRlcjpmdW5jdGlvbigpe2lmKHRoaXMuY29sbGVjdGlvbi5oYXNNb3JlKCkpe3ZhciB0PXRoaXMub3B0aW9ucy5jb2xzcGFufHx0aGlzLmNvbHNwYW58fDEwMDt0aGlzLiRlbC5odG1sKHIoe2NvbHNwYW46dH0pKTt2YXIgZT10aGlzLkxvYWRNb3JlVmlldz90aGlzLkxvYWRNb3JlVmlldzppO3RoaXMuJCgidGQiKS5odG1sKG5ldyBlKHRoaXMub3B0aW9ucykucmVuZGVyKCkuZWwpfWVsc2UgdGhpcy5lbXB0eSgpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3RoaXMuJGVsLmVtcHR5KCl9fSk7cmV0dXJuIG99LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzEpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPWUuZXh0ZW5kKHtlbDonPGEgaHJlZj0iIyIgY2xhc3M9ImRhdGEtbGlzdC1wYWdlci1mb290ZXItbGluayI+PC9hPicsdGVtcGxhdGU6J3t7aTE4biBjb2RlPSJkYXRhbGlzdC5zaG93X21vcmUiIGJ1bmRsZT0iY291cmFnZSJ9fScsZXZlbnRzOntjbGljazpmdW5jdGlvbihlKXtpZihlLnByZXZlbnREZWZhdWx0KCksdGhpcy5jb2xsZWN0aW9uLmZldGNoTW9yZSl7dmFyIG49dCgiYm9keSIpLmNzcygicG9zaXRpb24iKTt0KCJib2R5IikuY3NzKCJwb3NpdGlvbiIsInN0aWNreSIpLHRoaXMuY29sbGVjdGlvbi5mZXRjaE1vcmUoKSx0aGlzLmxpc3RlblRvT25jZSh0aGlzLmNvbGxlY3Rpb24sInN5bmMgZXJyb3IiLGZ1bmN0aW9uKCl7dCgiYm9keSIpLmNzcygicG9zaXRpb24iLG4pfSl9fX19KTtyZXR1cm4gbn0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzgpLG4oNDcwKSxuKDQ2Niksbig1MDApXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuIG4uZXh0ZW5kKHthY3Rpb25PcHRpb25zOltdLHRpdGxlOnIubG9jYWxpemUoImRhdGFsaXN0LmNvbHVtbi5hY3Rpb25zLmRlZmF1bHQudGl0bGUiLCJjb3VyYWdlIiksdGhyZXNob2xkOjIsX19jb3VudFZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5maWx0ZXIodGhpcy5hY3Rpb25PcHRpb25zLGZ1bmN0aW9uKGUpe3JldHVybiB0LmlzVW5kZWZpbmVkKGUudmlzaWJsZSl8fHQucmVzdWx0Q3R4KGUsInZpc2libGUiLHRoaXMpfSx0aGlzKS5sZW5ndGh9LF9fYWRkQnV0dG9uczpmdW5jdGlvbigpe3QuZWFjaCh0aGlzLmFjdGlvbk9wdGlvbnMsZnVuY3Rpb24odCl7dGhpcy5hZGQoZS5jcmVhdGUodCkpfSx0aGlzKX0sX19hZGREcm9wRG93bjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZHJvcGRvd258fHt9O3RoaXMuYWRkKGkuZXh0ZW5kKHt0aXRsZTp0LnRpdGxlfHx0aGlzLnRpdGxlLGljb246dC5pY29uLGRpc2FibGVkOnQuZGlzYWJsZWR8fCExLHdpZHRoOnQud2lkdGgsaXRlbVdpZHRoOnQuaXRlbVdpZHRofHwxODAsaXRlbXM6dGhpcy5hY3Rpb25PcHRpb25zfSkpfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVDaGlsZHJlbigpLHRoaXMuX19jb3VudFZpc2libGUoKTw9dGhpcy50aHJlc2hvbGQ/dGhpcy5fX2FkZEJ1dHRvbnMoKTp0aGlzLl9fYWRkRHJvcERvd24oKSxuLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDM2MCksbig0NzgpLG4oNTg1KSxuKDU4Niksbig1ODcpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvKXtyZXR1cm57Y3JlYXRlVG9vbGJhcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBpLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3QuZWFjaChlLGZ1bmN0aW9uKHQpe3RoaXMuYWRkKG4uX19jcmVhdGVDb21wb25lbnQodCkpfSx0aGlzKX19KX0sX19jcmVhdGVDb21wb25lbnQ6ZnVuY3Rpb24oaSl7aWYodC5pc0Z1bmN0aW9uKGkpfHx0LmlzT2JqZWN0KGkpJiZpIGluc3RhbmNlb2YgZS5WaWV3KXJldHVybiBpO3N3aXRjaChpLnR5cGUpe2Nhc2UiYnV0dG9uIjpyZXR1cm4gbi5jcmVhdGUoaSk7Y2FzZSJzZWFyY2giOnJldHVybiByLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3QuZXh0ZW5kKHRoaXMub3B0aW9ucyx0LnBpY2soaSwiZmllbGQiLCJtaW5DaGFycyIpLHsiZmxvYXQiOmkuYWxpZ259KX19KTtjYXNlImxldHRlcnMiOnJldHVybiBvLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3QuZXh0ZW5kKHRoaXMub3B0aW9ucyx0LnBpY2soaSwiZmllbGQiKSl9fSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe2F0dHJpYnV0ZXM6e30sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0LmRlZmF1bHRzKHRoaXMuYXR0cmlidXRlcyx7ImRhdGEtc2UiOiJkYXRhLWxpc3QtdG9vbGJhciJ9KSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLiRlbC5hZGRDbGFzcygiZGF0YS1saXN0LXRvb2xiYXIgY2xlYXJmaXgiKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig1MTEpLG4oNDk3KSxuKDQ3MCksbig1MjgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWkuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgPHNwYW4gY2xhc3M9InNlYXJjaC1ib3ggaW5wdXQtZml4Ij5cdCAgICAgIDxzcGFuIGNsYXNzPSJpY29uLW9ubHkgaWNvbi0xNiBtYWduaWZ5aW5nLWdsYXNzLTE2Ij48L3NwYW4+XHQgICAgICA8aW5wdXQgY2xhc3M9InRleHQtZmllbGQtZGVmYXVsdCIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSI+XHQgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluay1idXR0b24gYWxsb3ctaW4tcmVhZC1vbmx5IGNsZWFyLXNlYXJjaCBpY29uLTE2IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPlx0ICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIGNsZWFyLWlucHV0LTE2Ij48L3NwYW4+XHQgICAgICA8L2E+XHQgICAgPC9zcGFuPlx0ICAnLGV2ZW50czp7ImlucHV0IC50ZXh0LWZpZWxkLWRlZmF1bHQiOiJ1cGRhdGUiLCJjbGljayAuY2xlYXItc2VhcmNoIjoicmVzZXQiLCJrZXl1cCAudGV4dC1maWVsZC1kZWZhdWx0IjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC53aGljaD09PW4uRVNDP3RoaXMucmVzZXQoKTp0aGlzLnVwZGF0ZSgpfX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtpZihpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSwhdGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoIk5vIFN0YXRlIFByb3ZpZGVkIik7dGhpcy5vcHRpb25zLm1pbkNoYXJzfHwodGhpcy5vcHRpb25zLm1pbkNoYXJzPTIpLHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcnx8KHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcj0iU2VhcmNoLi4uIiksdGhpcy4kZWwuYWRkQ2xhc3MoInNlYXJjaC1ib3gtd3JhcCIpLHRoaXMuJGVsLmFkZENsYXNzKCJyaWdodCI9PT10aGlzLm9wdGlvbnNbImZsb2F0Il0/ImZsb2F0LXIiOiJmbG9hdC1sIiksdGhpcy5maWVsZD10aGlzLm9wdGlvbnMuZmllbGR8fCJzZWFyY2giLHRoaXMubGlzdGVuVG8odGhpcy5zdGF0ZSwiY2hhbmdlOiIrdGhpcy5maWVsZCx0aGlzLl91cGRhdGVWYWx1ZSksdGhpcy5fdXBkYXRlU3RhdGU9dC5kZWJvdW5jZSh0aGlzLl91cGRhdGVTdGF0ZSxlLkRFQk9VTkNFX0RFTEFZKSx0LmJpbmRBbGwodGhpcywiX3VwZGF0ZVN0YXRlIiwidXBkYXRlIil9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiBpLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyksdGhpcy5fdXBkYXRlVmFsdWUoKSx0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLiQoIi5jbGVhci1zZWFyY2giKS50b2dnbGUoISF0aGlzLnZhbCgpKSx0aGlzLl91cGRhdGVTdGF0ZSgpfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLiQoImlucHV0Iikub2ZmKCksaS5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scmVzZXQ6ZnVuY3Rpb24odCl7dCYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudmFsKCIiKSx0aGlzLnVwZGF0ZSgpfSx2YWw6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiQoImlucHV0Iik7cmV0dXJuIHQudmFsLmFwcGx5KHQsYXJndW1lbnRzKX0sX3N0YXRlVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5nZXQodGhpcy5maWVsZCl8fCIifSxfdXBkYXRlU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLl9jaGFuZ2VkKCkmJnRoaXMuc3RhdGUuc2V0KHRoaXMuZmllbGQsdGhpcy52YWwoKSl9LF91cGRhdGVWYWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NoYW5nZWQoKSYmdGhpcy52YWwodGhpcy5fc3RhdGVWYWx1ZSgpKSYmdGhpcy4kKCIuY2xlYXItc2VhcmNoIikudG9nZ2xlKCEhdGhpcy52YWwoKSl9LF9jaGFuZ2VkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWwoKXx8IiIsZT10Lmxlbmd0aDtyZXR1cm4oMD09PWV8fGU+PXRoaXMub3B0aW9ucy5taW5DaGFycykmJnRoaXMuX3N0YXRlVmFsdWUoKSE9dH19KTtyZXR1cm4gcn0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbig0NzEpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS50cGwoJ1x0ICAgIDxsaT5cdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJkYXRhLWxpc3QtbmF2LWxpbmsgZGF0YS1saXN0LXBhZ2VyLW5hdi1saW5rIiBkYXRhLXZhbHVlPSJ7e3ZhbHVlfX0iPnt7bGFiZWx9fTwvYT5cdCAgICA8L2xpPlx0ICAnKSxyPW4uZXh0ZW5kKHt0YWdOYW1lOiJ1bCIsY2xhc3NOYW1lOiJkYXRhLWxpc3QtcGFnZXItYWxwaGEgY2xlYXJmaXggZmxvYXQtciIsZXZlbnRzOnsiY2xpY2sgbGkgYSI6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYXV0b0JpbmQmJnRoaXMuc3RhdGUudW5zZXQoInNlYXJjaCIpO3ZhciBuPXQoZS50YXJnZXQpLmRhdGEoInZhbHVlIik7bj09PXIuREVGQVVMVF9WQUxVRT90aGlzLnN0YXRlLnVuc2V0KHRoaXMuZmllbGQpOnRoaXMuc3RhdGUuc2V0KHRoaXMuZmllbGQsbiksdGhpcy50b2dnbGUoKX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYobi5hcHBseSh0aGlzLGFyZ3VtZW50cyksIXRoaXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKCJObyBTdGF0ZSBQcm92aWRlZCIpO3RoaXMuYXV0b0JpbmQ9dGhpcy5vcHRpb25zLmF1dG9CaW5kIT09ITEsdGhpcy5maWVsZD10aGlzLm9wdGlvbnMuZmllbGR8fCJwcmVmaXgiLHRoaXMubGlzdGVuVG8odGhpcy5zdGF0ZSwiY2hhbmdlOiIrdGhpcy5maWVsZCx0aGlzLl90b2dnbGVDbGFzcyksdGhpcy5hdXRvQmluZCYmdGhpcy5saXN0ZW5Ubyh0aGlzLnN0YXRlLCJjaGFuZ2U6c2VhcmNoIix0aGlzLnRvZ2dsZSl9LHJlbmRlcjpmdW5jdGlvbigpe3RoaXMuJGVsLmh0bWwoaSh7dmFsdWU6ci5ERUZBVUxUX1ZBTFVFLGxhYmVsOnIuREVGQVVMVF9MQUJFTH0pKTtmb3IodmFyIHQ9NjU7dDw9OTA7dCsrKXt2YXIgZT1TdHJpbmcuZnJvbUNoYXJDb2RlKHQpO3RoaXMuJGVsLmFwcGVuZChpKHt2YWx1ZTplLGxhYmVsOmV9KSl9cmV0dXJuIHRoaXMuYXV0b0JpbmQmJnRoaXMudG9nZ2xlKCksdGhpc30sdmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgibGkgYS4iK3IuQUNUSVZFX0NMQVNTX05BTUUpLmRhdGEoInZhbHVlIil9LF90b2dnbGVDbGFzczpmdW5jdGlvbigpe2lmKHRoaXMuJCgibGkgYSIpLnJlbW92ZUNsYXNzKHIuQUNUSVZFX0NMQVNTX05BTUUpLCF0aGlzLl9kaXNhYmxlZCl7dmFyIHQ9dGhpcy5zdGF0ZS5nZXQodGhpcy5maWVsZCl8fHIuREVGQVVMVF9WQUxVRTt0aGlzLiQoJ2xpIGFbZGF0YS12YWx1ZT0iJyt0KyciXScpLmFkZENsYXNzKHIuQUNUSVZFX0NMQVNTX05BTUUpLHRoaXMudmFsKCl8fHRoaXMuc3RhdGUudW5zZXQodGhpcy5maWVsZCl9fSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzYWJsZWQ9ITEsdGhpcy5fdG9nZ2xlQ2xhc3MoKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkPSEwLHRoaXMuX3RvZ2dsZUNsYXNzKCksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuZ2V0KCJzZWFyY2giKT90aGlzLmRpc2FibGUoKTp0aGlzLmVuYWJsZSgpfX0se0RFRkFVTFRfVkFMVUU6ImFsbCIsREVGQVVMVF9MQUJFTDoiQWxsIixBQ1RJVkVfQ0xBU1NfTkFNRToiZGF0YS1saXN0LW5hdi1saW5rLWFjdGl2ZSJ9KTtyZXR1cm4gcn0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbigzNjApLG4oNDY0KSxuKDUwMCksbig1MjIpLG4oNTg5KSxuKDU5MCksbig1OTEpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSl7ZnVuY3Rpb24gbChlLG4pe3ZhciBpO2lmKHQuaXNBcnJheShlKSl7dmFyIHI9ZTtuPXJbMF0sZT1yWzFdLGk9clsyXX1yZXR1cm57bGFiZWw6ZSx2YWx1ZTpuLGNvdW50Oml9fXJldHVybntjcmVhdGVGaWx0ZXJzOmZ1bmN0aW9uKGkpe3ZhciByPXRoaXM7cmV0dXJuIG8uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dC5lYWNoKGksZnVuY3Rpb24oaSl7aWYodC5pc0Z1bmN0aW9uKGkpfHx0LmlzT2JqZWN0KGkpJiZpIGluc3RhbmNlb2YgZS5WaWV3KXJldHVybiB0aGlzLmFkZChpKTtzd2l0Y2goaS50eXBlKXtjYXNlImZvcm0iOnJldHVybiB0aGlzLmFkZChyLl9fY3JlYXRlRmlsdGVyRm9ybShpKSk7ZGVmYXVsdDpuLndhcm4oImEgdHlwZSBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBmaWx0ZXJzIik7Y2FzZSJmaWx0ZXJzZXQiOnJldHVybiB0aGlzLmFkZChyLl9fY3JlYXRlRmlsdGVyU2V0KGkpKX19LHRoaXMpfX0pfSxfX2NyZWF0ZUZpbHRlckZvcm06ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaXNVbmRlZmluZWQoZS51c2VBcHBseUJ1dHRvbil8fChlLm5vQnV0dG9uQmFyPSFlLnVzZUFwcGx5QnV0dG9uKSxlPXQuZXh0ZW5kKHtjbGFzc05hbWU6ImRhdGEtbGlzdC1zaWRlYmFyIGRhdGEtbGlzdC1zaWRlYmFyLWZpbHRlci1mb3JtIixub0NhbmNlbEJ1dHRvbjohMCxhdXRvQmluZDohMCxzYXZlOmkubG9jYWxpemUoImRhdGFsaXN0LmFwcGx5X2ZpbHRlciIsImNvdXJhZ2UiKSxub0J1dHRvbkJhcjohMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbih0KXt0Lm1vZGVsPXQuc3RhdGUuY2xvbmUoKSxyLmNhbGwodGhpcyx0KSx0aGlzLmF1dG9CaW5kJiZ0aGlzLmxpc3RlblRvKHRoaXMuc3RhdGUsImNoYW5nZTpzZWFyY2giLHRoaXMudG9nZ2xlKTt2YXIgbj1lLm5vQnV0dG9uQmFyPyJjaGFuZ2UiOiJzYXZlIixpPWUubm9CdXR0b25CYXI/dGhpcy5tb2RlbDp0aGlzO3RoaXMubGlzdGVuVG8oaSxuLGZ1bmN0aW9uKHQpe3RoaXMuc3RhdGUuc2V0KHQudG9KU09OKCkpfSl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiByLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYXV0b0JpbmQmJnRoaXMudG9nZ2xlKCksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuZ2V0KCJzZWFyY2giKT90aGlzLmRpc2FibGUoKTp0aGlzLmVuYWJsZSgpfX0sZSksZS5pbnB1dHM9dC5tYXAoZS5pbnB1dHMsZnVuY3Rpb24oZSl7cmV0dXJuIHQuZXh0ZW5kKHsibGFiZWwtdG9wIjohMH0sZSl9KSxyLmV4dGVuZChlKX0sX19jcmVhdGVGaWx0ZXJTZXQ6ZnVuY3Rpb24oZSl7dmFyIG49cy5wcm90b3R5cGUuY2xhc3NOYW1lO3QuaXNFbXB0eShlLmNsYXNzTmFtZSl8fChuPW4rIiAiK2UuY2xhc3NOYW1lKTt2YXIgaT10LmV4dGVuZCh7fSxzLnByb3RvdHlwZS5hdHRyaWJ1dGVzLGUuYXR0cmlidXRlcyk7cmV0dXJuIHMuZXh0ZW5kKHtjbGFzc05hbWU6bix0aXRsZTplLmxhYmVsLGF0dHJpYnV0ZXM6aSxhdXRvQmluZDp0LmlzVW5kZWZpbmVkKGUuYXV0b0JpbmQpP3MucHJvdG90eXBlLmF1dG9CaW5kOmUuYXV0b0JpbmQsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3QuZWFjaCh0LnJlc3VsdChlLCJvcHRpb25zIiksZnVuY3Rpb24odCxuKXt2YXIgaT1sKHQsbik7dGhpcy5hZGQoYSwidWwiLHtvcHRpb25zOntmaWVsZDplLmZpZWxkLGxhYmVsOmkubGFiZWwsdmFsdWU6aS52YWx1ZSxjb3VudDppLmNvdW50fX0pfSx0aGlzKX19KX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNDcwKV0scj1mdW5jdGlvbih0KXtyZXR1cm4gdC5leHRlbmQoe2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kZWwuYWRkQ2xhc3MoImRhdGEtbGlzdC1zaWRlYmFyLXdyYXAiKX0saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLmhlaWdodCgpfSx0eXBlOiJzaWRlYmFyIn0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MSksbig0NzApXSxyPWZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKGUpe3ZhciBuPWUucHJvdG90eXBlP3QucmVzdWx0KGUucHJvdG90eXBlLCJ0YWdOYW1lIik6dC5yZXN1bHQoZSwidGFnTmFtZSIpO3JldHVybiJsaSI9PT1uLnRvTG93ZXJDYXNlKCl9dmFyIHI9ZS50cGwoJ1x0ICAgIHt7I2lmIHRpdGxlfX1cdCAgICAgIDxoMyBjbGFzcz0iZGF0YS1saXN0LXNpZGViYXItaGVhZGluZyI+e3t0aXRsZX19PC9oMz5cdCAgICB7ey9pZn19XHQgICAgPHVsIGNsYXNzPSJkYXRhLWxpc3QtbmF2Ij48L3VsPlx0ICAnKTtyZXR1cm4gbi5leHRlbmQoe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiZGF0YS1saXN0LWZpbHRlcnNldCJ9LGNsYXNzTmFtZToiZGF0YS1saXN0LXNpZGViYXIiLGF1dG9CaW5kOiEwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hdXRvQmluZCYmdGhpcy5saXN0ZW5Ubyh0aGlzLnN0YXRlLCJjaGFuZ2U6c2VhcmNoIix0aGlzLnRvZ2dsZSksdC5pc1VuZGVmaW5lZCh0aGlzLnRpdGxlKSYmKHRoaXMudGl0bGU9IkZpbHRlcnMiKX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGU9cih7dGl0bGU6dGhpcy50aXRsZX0pLG4ucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hdXRvQmluZCYmdGhpcy50b2dnbGUoKSx0aGlzfSxhZGQ6ZnVuY3Rpb24oZSl7aWYoIWkoZSkpdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBUYWcgTmFtZSIpO2UuYXV0b0JpbmQ9dGhpcy5hdXRvQmluZDt2YXIgcj10LnRvQXJyYXkoYXJndW1lbnRzKTtyZXR1cm4gclsxXXx8KHJbMV09Ii5kYXRhLWxpc3QtbmF2Iiksbi5wcm90b3R5cGUuYWRkLmFwcGx5KHRoaXMscil9LHRvZ2dsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLmdldCgic2VhcmNoIik/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZSgiZGlzYWJsZSIpLHRoaXN9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZSgiZW5hYmxlIiksdGhpc30saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLmhlaWdodCgpfSx0eXBlOiJzaWRlYmFyIn0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXsKCXZhciBpLHI7aT1bbigzMjgpLG4oNDcxKSxuKDQ3MCldLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuLmV4dGVuZCh7dGFnTmFtZToibGkiLHRlbXBsYXRlOmUudHBsKCdcdCAgICAgIDxhIGNsYXNzPSJkYXRhLWxpc3QtbmF2LWxpbmsgZ3JhZGllbnQiIGhyZWY9IiMiIGRhdGEtc2U9Int7dmFsdWV9fSI+XHQgICAgICAgIHt7bGFiZWx9fVx0ICAgICAgICA8c3BhbiBjbGFzcz0iZGF0YS1saXN0LWZpbHRlci1jb3VudCI+e3tjb3VudH19PC9zcGFuPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iZGF0YS1saXN0LW5hdi1saW5rLWFycm93Ij48L3NwYW4+XHQgICAgICA8L2E+XHQgICAgJyksYXV0b0JpbmQ6ITAsZXZlbnRzOnsiY2xpY2sgYSI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYXV0b0JpbmQmJnRoaXMuc3RhdGUuZ2V0KCJzZWFyY2giKSYmdGhpcy5zdGF0ZS51bnNldCgic2VhcmNoIiksdGhpcy5zdGF0ZS5zZXQodGhpcy5maWVsZCx0aGlzLm9wdGlvbnMudmFsdWUpfX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtpZighdGhpcy5zdGF0ZXx8IXQubGFiZWx8fCJ1bmRlZmluZWQiPT10eXBlb2YgdC52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgQXJndW1lbnRzIik7dGhpcy5maWVsZD10JiZ0LmZpZWxkfHwiZmlsdGVyIix0aGlzLmxpc3RlblRvKHRoaXMuc3RhdGUsImNoYW5nZToiK3RoaXMuZmllbGQsdGhpcy5fdG9nZ2xlU2VsZWN0ZWQpLHRoaXMuZW5hYmxlKCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl90b2dnbGVFbmFibGVkKCExKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5fdG9nZ2xlRW5hYmxlZCghMCl9LF90b2dnbGVFbmFibGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc2FibGVkPSF0LHRoaXMuX3RvZ2dsZVNlbGVjdGVkKCl9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMudGVtcGxhdGUoe2xhYmVsOnRoaXMub3B0aW9ucy5sYWJlbCxjb3VudDp0LmlzVW5kZWZpbmVkKHRoaXMub3B0aW9ucy5jb3VudCk/IiI6dGhpcy5vcHRpb25zLmNvdW50LHZhbHVlOnRoaXMub3B0aW9ucy52YWx1ZX0pO3JldHVybiB0aGlzLiRlbC5odG1sKGUpLHRoaXMuZW5hYmxlKCksdGhpc30sX3RvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9IXRoaXMuX2Rpc2FibGVkJiZ0aGlzLnN0YXRlLmdldCh0aGlzLmZpZWxkKT09dGhpcy5vcHRpb25zLnZhbHVlO3RoaXMuJCgiYSIpLnRvZ2dsZUNsYXNzKCJkYXRhLWxpc3QtbmF2LWxpbmstYWN0aXZlIix0KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzApXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZXh0ZW5kKHtkZWJvdW5jZVRpbWU6MTAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kZWwuYWRkQ2xhc3MoImRhdGEtbGlzdCBkYXRhLWxpc3Qtc2lkZWJhci1sZWZ0IGNsZWFyZml4Iil9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiBlLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQuZGVmZXIodC5iaW5kKHRoaXMuYmFsYW5jZSx0aGlzKSksdGhpcy5maW5kV2hlcmUoe3R5cGU6InNpZGViYXIifSl8fHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJkYXRhLWxpc3Qtc2lkZWJhci1sZWZ0IiksdGhpc30sYmFsYW5jZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaWRlYmFyPXRoaXMuZmluZFdoZXJlKHt0eXBlOiJzaWRlYmFyIn0pLHRoaXMuY29udGVudD10aGlzLmZpbmRXaGVyZSh7dHlwZToiY29udGVudCJ9KSwhdGhpcy5zaWRlYmFyfHwhdGhpcy5jb250ZW50fHx0aGlzLnNpZGViYXIuaGVpZ2h0KCk8PXRoaXMuY29udGVudC5oZWlnaHQoKX0sYmFsYW5jZTp0LmRlYm91bmNlKGZ1bmN0aW9uKCl7dGhpcy5iYWxhbmNlZCgpfHx0aGlzLmNvbnRlbnQuaGVpZ2h0KHRoaXMuc2lkZWJhci5oZWlnaHQoKSszMCl9LHRoaXMuZGVib3VuY2VUaW1lKX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDUyMiksbig1MjcpLG4oNTk2KSxuKDU5Nyksbig1OTgpLG4oNTYwKSxuKDU0OSksbig1NTkpLG4oNTIzKSxuKDUyNCksbig1NTYpLG4oNTU4KSxuKDU5OSksbig1NDgpLG4oNjAzKSxuKDYwMCksbig1NTIpLG4oNTM0KSxuKDU5NSksbig1MzcpLG4oNjA0KSxuKDYwMiksbig1MzkpLG4oNjA1KSxuKDYwOCksbig1MzgpLG4oNTMyKSxuKDYwOSksbig1MzApLG4oNTQ2KSxuKDUyOSksbig1MjYpLG4oNjAxKSxuKDUzNSksbig2MTApXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSxsLGMsdSxkLGgscCxmLG0sXyxnLHYseSxiLHcsTSxTLFQsayxMLHgsQSxFLEQsQyxZLE8sUCl7cmV0dXJue0Jhc2VGb3JtOnQsQmFzZUlucHV0OmUsY29tcG9uZW50czp7VGV4dENvdW50ZXJFeHBsYWluOm4sV2l6YXJkVGl0bGU6aX0saGVscGVyczp7RW51bVR5cGVIZWxwZXI6cixFcnJvckJhbm5lcjpvLEVycm9yUGFyc2VyOnMsRm9ybVV0aWw6YSxJbnB1dENvbnRhaW5lcjpsLElucHV0RmFjdG9yeTpjLElucHV0TGFiZWw6dSxJbnB1dFdyYXBwZXI6ZCxTY2hlbWFGb3JtRmFjdG9yeTpofSxpbnB1dHM6e0Jhc2VGaWxlVXBsb2FkZXI6cCxCYXNlUGlja2VyOmYsQm9vbGVhblNlbGVjdDptLENlcnRpZmljYXRpb25GaWxlVXBsb2FkZXI6XyxDaGVja0JveDpnLENoZWNrQm94U2V0OnYsRGF0ZUJveDp5LERhdGVUaW1lUGlja2VyOmIsRGVsZXRhYmxlQm94OncsR3JvdXBQaWNrZXI6TSxHcm91cFNlbGVjdDpTLElkcFBpY2tlcjpULE51bWJlckJveDprLFJhZGlvOkwsU2NvcGVzUGlja2VyOngsU2VsZWN0OkEsU2ltcGxlQ2hlY2tCb3hTZXQ6RSxUZXh0QXJlYTpELFRleHRCb3g6QyxUZXh0Qm94U2V0OlksVGV4dFNlbGVjdDpPLEJhc2VTZWxlY3RpemU6UH19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDMzMSksbig0OTcpLG4oNDcxKSxuKDUyNyksbig1MzMpLG4oNTA2KV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPWkudHBsKCdcdCAgICA8c3BhbiBjbGFzcz0iYm9sZCBtYXJnaW4tbjEwIj57e3RpdGxlfX08L3NwYW4+XHQgICcpLHM9aS50cGwoJ1x0ICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0ie3tuYW1lfX0iIGlkPSJ7e2lkfX0iLz5cdCAgICA8bGFiZWwgZm9yPSJ7e2lkfX0iPnt7bGFiZWx9fTwvbGFiZWw+XHQgICcpLGE9aS50cGwoInt7c3VmZml4fX17e2lkfX0iKTtyZXR1cm4gci5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oZSl7aWYodGhpcy5hbGxPcHRpb25zPWUub3B0aW9ucy5hbGwsdGhpcy5zdWZmaXg9ZS5uYW1lLHRoaXMuZ3JvdXBlZE9wdGlvbnM9e30sZS5vcHRpb25zLm11bHRpQ29sdW1uKXt2YXIgbj1lLm9wdGlvbnMuZ3JvdXBCeUZpZWxkO3QuZWFjaCh0aGlzLmFsbE9wdGlvbnMsZnVuY3Rpb24odCl7dGhpcy5ncm91cGVkT3B0aW9uc1t0W25dXXx8KHRoaXMuZ3JvdXBlZE9wdGlvbnNbdC5jYXRlZ29yeV09W10pLHRoaXMuZ3JvdXBlZE9wdGlvbnNbdC5jYXRlZ29yeV0ucHVzaCh0KX0sdGhpcyl9fSxldmVudHM6eyJjaGFuZ2UgOmNoZWNrYm94IjoidXBkYXRlIixrZXl1cDpmdW5jdGlvbih0KXt2YXIgaT10LndoaWNofHx0LmtleUNvZGU7aT09PW4uU1BBQ0UmJmUodC50YXJnZXQpLmNsaWNrKCl9fSxwcmVSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLiRlbC5lbXB0eSgpO3ZhciBlPXQua2V5cyh0aGlzLmdyb3VwZWRPcHRpb25zKTt0aGlzLm9wdGlvbnMub3B0aW9ucy5tdWx0aUNvbHVtbiYmZS5sZW5ndGg+MT90aGlzLnJlbmRlck11bHRpQ29sdW1uKGUpOnRoaXMucmVuZGVyU2luZ2xlQ29sdW1uKCk7dmFyIG49dGhpcy4kKCJpbnB1dCIpO3QuZGVmZXIodC5iaW5kKG4uY3VzdG9tSW5wdXQsbikpfSxyZW5kZXJTaW5nbGVDb2x1bW46ZnVuY3Rpb24oKXt0LmVhY2godGhpcy5hbGxPcHRpb25zLGZ1bmN0aW9uKGUpe3RoaXMuJGVsLmFwcGVuZChzKHtuYW1lOmEodC5leHRlbmQodGhpcyxlKSksaWQ6YSh0LmV4dGVuZCh0aGlzLGUpKSxsYWJlbDplLmRpc3BsYXlOYW1lfHxlLm5hbWV9KSl9LHRoaXMpfSxyZW5kZXJNdWx0aUNvbHVtbjpmdW5jdGlvbihlKXt2YXIgbj0zPT1lLmxlbmd0aD8ic3UtY2hlY2tib3gtM2NvbHVtbnMiOiJzdS1jaGVja2JveC0yY29sdW1ucyI7dC5lYWNoKGUsZnVuY3Rpb24oZSxpKXt2YXIgcj0iY29sdW1uIitpO3RoaXMuJGVsLmFwcGVuZCgnPHNwYW4gY2xhc3M9IicrbisnIiBpZD0iJytyKyciPicpO3ZhciBsPXRoaXMuJGVsLmZpbmQoIiMiK3IpO2wuYXBwZW5kKG8oe3RpdGxlOmV9KSksdC5lYWNoKHRoaXMuZ3JvdXBlZE9wdGlvbnNbZV0sZnVuY3Rpb24oZSl7bC5hcHBlbmQocyh7bmFtZTphKHQuZXh0ZW5kKHRoaXMsZSkpLGlkOmEodC5leHRlbmQodGg=", "base64"));
  res.write(new Buffer("aXMsZSkpLGxhYmVsOmUuZGlzcGxheU5hbWV8fGUubmFtZX0pKX0sdGhpcyksdGhpcy4kZWwuYXBwZW5kKCI8L3NwYW4+Iil9LHRoaXMpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQoIjpjaGVja2JveCIpLnByb3AoImNoZWNrZWQiLCExKSx0LmVhY2godGhpcy5tb2RlbC5nZXQodGhpcy5vcHRpb25zLm5hbWUpLGZ1bmN0aW9uKGUpe3RoaXMuJCgiaW5wdXQjIithKHQuZXh0ZW5kKHRoaXMsZSkpKS5wcm9wKCJjaGVja2VkIixlLmVuYWJsZWQpfSx0aGlzKSx0aGlzLmdldE1vZGVsVmFsdWUoKSx0aGlzfSx2YWw6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdC5lYWNoKHRoaXMuYWxsT3B0aW9ucyxmdW5jdGlvbihuKXtuLmVuYWJsZWQ9dGhpcy4kKCI6aW5wdXQjIithKHQuZXh0ZW5kKHRoaXMsbikpKS5wcm9wKCJjaGVja2VkIiksZS5wdXNoKG4pfSx0aGlzKSxlfSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbCgpO3RoaXMubW9kZWwuc2V0KHRoaXMub3B0aW9ucy5uYW1lLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpKX0sZm9jdXM6ZnVuY3Rpb24oKXt9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgIHt7I2lmIGhhc1JlbWFpbmluZ319XHQgICAgICB7e2kxOG4gY29kZT0iY2hhcmFjdGVycy5yZW1haW5pbmciIGJ1bmRsZT0iY291cmFnZSIgYXJndW1lbnRzPSJjb3VudCJ9fVx0ICAgIHt7L2lmfX1cdCAgICB7eyN1bmxlc3MgaGFzUmVtYWluaW5nfX1cdCAgICAgIDxkaXYgY2xhc3M9Im8tZm9ybS10ZXh0LWNvdW50ZXItb3ZlciI+XHQgICAgICAgIHt7aTE4biBjb2RlPSJjaGFyYWN0ZXJzLm92ZXIiIGJ1bmRsZT0iY291cmFnZSIgYXJndW1lbnRzPSJjb3VudCJ9fVx0ICAgICAgPC9kaXY+XHQgICAge3svdW5sZXNzfX0nLG1vZGVsRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGVbImNoYW5nZToiK3RoaXMub3B0aW9ucy5maWVsZF09dC50aHJvdHRsZSh0aGlzLnJlbmRlciw1MCksZX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe2lmKCF0aGlzLm9wdGlvbnMubW9kZWx8fCF0aGlzLm9wdGlvbnMuZmllbGQpdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY3JlYXRlIFRleHRDb3VudGVyRXhwbGFpbi4gbWlzc2luZyBhcmd1bWVudHMgWyJtb2RlbCIsICJmaWVsZCJdJyk7dmFyIGU9dGhpcy5vcHRpb25zLm1vZGVsLmdldFByb3BlcnR5U2NoZW1hKHRoaXMub3B0aW9ucy5maWVsZCk7aWYoIWV8fCF0LmlzTnVtYmVyKGUubWF4TGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjcmVhdGUgVGV4dENvdW50ZXJFeHBsYWluLiBwcm9wZXJ0eSBtaXNzaW5nICJtYXhMZW5ndGgiIGRlZmluaXRpb24nKTt0aGlzLmZpZWxkPXRoaXMub3B0aW9ucy5maWVsZCx0aGlzLm1heExlbmd0aD1lLm1heExlbmd0aH0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5tb2RlbC5nZXQodGhpcy5maWVsZCl8fCIiLGU9dGhpcy5tYXhMZW5ndGgsbj1lLXQubGVuZ3RoLGk9bj49MDtyZXR1cm57aGFzUmVtYWluaW5nOmksY291bnQ6aT9uOk1hdGguYWJzKG4pfX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDQ3MCldLHI9ZnVuY3Rpb24odCl7dmFyIGU9dC5leHRlbmQoe3RhZ05hbWU6ImgyIixjbGFzc05hbWU6IndpemFyZC1oZWFkIix0ZW1wbGF0ZTonPHNwYW4gY2xhc3M9InN0ZXAtbnVtIj57e3N0ZXB9fTwvc3Bhbj57e3RpdGxlfX0nfSk7cmV0dXJuIGV9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oMzMxKSxuKDQ5OSldLHI9ZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU9cyh0LmVudW1WYWx1ZXMpLGk9e25hbWU6dC5uYW1lLGxhYmVsOnQudGl0bGUscmVhZE9ubHk6dC5yZWFkT25seSxjdXN0b21FeHBsYWluOnQuZXhwbGFpbixwYXJhbXM6e2VudW1PbmVPZjplfSxvcHRpb25zOm8oZSl9O3JldHVybiBuLmlzQXJyYXlEYXRhVHlwZSh0LmRpc3BsYXlUeXBlKT8oaS50eXBlPSJjaGVja2JveHNldCIsaS50bz1tLGkuZnJvbT1fKTooaS50eXBlPSJzZWxlY3QiLGkudG89ZixpLmZyb209cCksaS5pbnB1dD1udWxsLGl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gdC5pc0FycmF5KGUpP28ocyhlKSk6e319ZnVuY3Rpb24gbyhlKXtyZXR1cm4gYShlKT90LnJlZHVjZShlLGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtoKG4pXT1lLnRpdGxlLHR9LHt9KTp7fX1mdW5jdGlvbiBzKG4pe3JldHVybiB0LmFsbChuLGUuaXNQbGFpbk9iamVjdCk/YShuKT9uOmQobik6YyhuKX1mdW5jdGlvbiBhKGUpe3JldHVybiB0LmlzQXJyYXkoZSkmJnQuYWxsKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQuaGFzKGUsImNvbnN0IikmJnQuaGFzKGUsInRpdGxlIil9KX1mdW5jdGlvbiBsKG4pe3JldHVybiEhYShuKSYmdC5hbGwobixmdW5jdGlvbih0KXtyZXR1cm4iIiE9PWUudHJpbSh0WyJjb25zdCJdKSYmIiIhPT1lLnRyaW0odC50aXRsZSl9KX1mdW5jdGlvbiBjKGUpe3JldHVybiB0Lm1hcChlLGZ1bmN0aW9uKHQpe3JldHVybnsiY29uc3QiOnQsdGl0bGU6dSh0KX19KX1mdW5jdGlvbiB1KGUpe3JldHVybiB0LmlzT2JqZWN0KGUpP0pTT04uc3RyaW5naWZ5KGUpOnQuaXNOdW1iZXIoZSk/ZSsiIjplfWZ1bmN0aW9uIGQobil7dmFyIGk9dC5wYXJ0aWFsKHQuaGFzLHQsZyk7cmV0dXJuIHQuYWxsKG4saSk/dC5jaGFpbihuKS5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuIGUuaXNQbGFpbk9iamVjdChuKSYmdC5oYXMobixnKX0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm57ImNvbnN0Ijp0LHRpdGxlOnRbZ119fSkudmFsdWUoKTpjKG4pfWZ1bmN0aW9uIGgodCl7cmV0dXJuIiIrdit0fWZ1bmN0aW9uIHAoZSl7dmFyIG49dC5maW5kSW5kZXgodGhpcy5vcHRpb25zLnBhcmFtcy5lbnVtT25lT2YsZnVuY3Rpb24obil7cmV0dXJuIHQuaXNPYmplY3QoZSk/dC5pc0VxdWFsKG5bImNvbnN0Il0sZSk6blsiY29uc3QiXT09PWV9KTtyZXR1cm4gbj4tMT9oKG4pOmV9ZnVuY3Rpb24gZihlKXtpZighdC5pc1N0cmluZyhlKXx8MCE9PWUuaW5kZXhPZih2KSlyZXR1cm4gZTt2YXIgbj1lLnJlcGxhY2UodiwiIiksaT10aGlzLm9wdGlvbnMucGFyYW1zJiZ0LmlzQXJyYXkodGhpcy5vcHRpb25zLnBhcmFtcy5lbnVtT25lT2YpP3RoaXMub3B0aW9ucy5wYXJhbXMuZW51bU9uZU9mW25dOm51bGw7cmV0dXJuIHQuaGFzKGksImNvbnN0Iik/aVsiY29uc3QiXTppfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIHQubWFwKGUsZi5iaW5kKHRoaXMpKX1mdW5jdGlvbiBfKGUpe3JldHVybiB0Lm1hcChlLHAuYmluZCh0aGlzKSl9dmFyIGc9Im5hbWUiLHY9Il9lbnVtXyI7cmV0dXJue2dldEVudW1JbnB1dE9wdGlvbnM6aSxnZXREcm9wZG93bk9wdGlvbnM6cixpc09uZU9mRW51bUhhdmVDb250ZW50OmwsY29udmVydFRvT25lT2Y6c319LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNTAwKSxuKDYwMCksbig2MDEpLG4oNTk4KV0scj1mdW5jdGlvbih0LGUsbixpLHIpe2Z1bmN0aW9uIG8ocil7dmFyIG89ci5nZXQoIl9fZGlzcGxheVR5cGVfXyIpLHM9ci5nZXQoIl9fcG9zc2libGVWYWx1ZXNfXyIpLGw9ci5nZXQoIm5hbWUiKSx1PXIuZ2V0KCJ0aXRsZSIpLGQ9e3R5cGU6InRleHQiLG5hbWU6bCxsYWJlbDp1fHxsfTtzd2l0Y2gobyl7Y2FzZSJhcnJheW9mc3RyaW5nIjpkLmlucHV0PWksZC5wYXJhbXM9e2l0ZW1UeXBlOiJzdHJpbmcifTticmVhaztjYXNlImFycmF5b2ZudW1iZXIiOmQuaW5wdXQ9aSxkLnBhcmFtcz17aXRlbVR5cGU6Im51bWJlciJ9O2JyZWFrO2Nhc2UiYXJyYXlvZmludGVnZXIiOmQuaW5wdXQ9aSxkLnBhcmFtcz17aXRlbVR5cGU6ImludGVnZXIifTticmVhaztjYXNlImFycmF5b2ZvYmplY3QiOmQuaW5wdXQ9aSxkLnBhcmFtcz17aXRlbVR5cGU6ci5nZXQoIml0ZW1zIikudHlwZX07YnJlYWs7Y2FzZSJib29sZWFuIjpkLmlucHV0PW47YnJlYWs7Y2FzZSJpbnRlZ2VyIjpjYXNlIm51bWJlciI6ZC50bz1hO2JyZWFrO2Nhc2UicmVmZXJlbmNlIjpkLnR5cGU9InNlbGVjdCIsZC5vcHRpb25zPWMocyk7YnJlYWs7Y2FzZSJpbWFnZSI6ZC5yZWFkT25seT0hMCxkLmZyb209ZnVuY3Rpb24obil7cmV0dXJuIHQuaXNFbXB0eShuKT8iIjplLmxvY2FsaXplKCJ1c2VyLnByb2ZpbGUuaW1hZ2UuaW1hZ2Vfc2V0IiwiY291cmFnZSIpfTticmVhaztjYXNlInBhc3N3b3JkIjpkLnR5cGU9InBhc3N3b3JkIjticmVhaztjYXNlImRhdGUiOmQudHlwZT0iZGF0ZSI7YnJlYWs7Y2FzZSJ1cmkiOmNhc2UiY291bnRyeS1jb2RlIjpjYXNlImxhbmd1YWdlLWNvZGUiOmNhc2UiZW1haWwiOmNhc2UibG9jYWxlIjpjYXNlInRpbWV6b25lIjpjYXNlInN0cmluZyI6Y2FzZSJvYmplY3QiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJ1bmtub3duIHR5cGU6ICIrbyl9cmV0dXJuIGR9ZnVuY3Rpb24gcyhlKXt2YXIgbj17fSxpPWUuZ2V0KCJuYW1lIiksbz1lLmdldCgiX19kaXNwbGF5VHlwZV9fIikscz1lLmdldCgiX19wb3NzaWJsZVZhbHVlc19fIiksYT1lLmdldCgiX19maWVsZE5hbWVQcmVmaXhfXyIpO2lmKGEmJihuLm5hbWU9YStpLG4uZXJyb3JGaWVsZD1pKSxlLmlzRW51bVR5cGUoKSl7dmFyIHU9e2Rpc3BsYXlUeXBlOm8sdGl0bGU6ZS5nZXQoInRpdGxlIiksZW51bVZhbHVlczplLmdldEVudW1WYWx1ZXMoKX07bj10LmV4dGVuZCh7fSxyLmdldEVudW1JbnB1dE9wdGlvbnModSksbil9ZWxzZSBsKG8pJiZzJiYobi50eXBlPSJjaGVja2JveHNldCIsbi5pbnB1dD1udWxsLG4ub3B0aW9ucz1jKHMpKTtyZXR1cm4gbn1mdW5jdGlvbiBhKHQpe3ZhciBuPWUucGFyc2VGbG9hdCh0KTtyZXR1cm4iIj09PXQ/bnVsbDpufWZ1bmN0aW9uIGwodCl7cmV0dXJuIHQmJnQuaW5kZXhPZigiYXJyYXkiKT49MH1mdW5jdGlvbiBjKGUpe3JldHVybiB0Lm9iamVjdChlLGUpfWZ1bmN0aW9uIHUodCl7dmFyIGU9dC5nZXQoIml0ZW1zIik7cmV0dXJuIGU/ZS5vYmplY3ROYW1lOnQuZ2V0KCJvYmplY3ROYW1lIil9ZnVuY3Rpb24gZChlLG4saSl7dmFyIHIsbyxzPWUuZ2V0KCJuYW1lIiksYT1pLl9fbmVzdGVkUHJvcGVydHlfXyxsPW5bc10sYz1pLmdldChzKTthJiZlLnNldCgiX19maWVsZE5hbWVQcmVmaXhfXyIsYSkscj1uW3UoZSldLGwmJmMmJihsPXQudW5pb24obCxjKSksciYmci5sZW5ndGg/bz1yOmwmJmwubGVuZ3RoJiYobz1sKSxlLnNldCgiX19wb3NzaWJsZVZhbHVlc19fIixvKX1mdW5jdGlvbiBoKHQsZSxuKXtyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKHQpe2QodCxlLG4pfSksdH1mdW5jdGlvbiBwKHQsZSl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBmKHQsZSl9KX1mdW5jdGlvbiBmKGUsbil7dmFyIGk9dShlKSxyPW5baV07cmV0dXJuIWl8fCF0KHIpLmlzRW1wdHkoKX1yZXR1cm57Y3JlYXRlSW5wdXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciBuPXMoZSksaT1vKGUpO3JldHVybiBuLnBhcmFtcyYmaS5wYXJhbXMmJihuLnBhcmFtcz10LmRlZmF1bHRzKG4ucGFyYW1zLGkucGFyYW1zKSksdC5kZWZhdWx0cyhuLGkpfSxoYXNWYWxpZFNjaGVtYVByb3BzOmZ1bmN0aW9uKGUsbil7aWYodC5pc0VtcHR5KGUpKXJldHVybiExO3ZhciBpPXAoZSxuKTtyZXR1cm4hIWkubGVuZ3RofSxwcmVwYXJlU2NoZW1hOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdC5yZXNldChwKHQsZSkpLGgodCxlLG4pfSxhdWdtZW50U2NoZW1hUHJvcHM6aCxhdWdtZW50U2NoZW1hUHJvcDpkfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDUzMCldLHI9ZnVuY3Rpb24odCl7dmFyIGU9e3VuZGVmaW5lZDoidW5kZWZpbmVkIiwidHJ1ZSI6InRydWUiLCJmYWxzZSI6ImZhbHNlIn0sbj1mdW5jdGlvbih0KXtyZXR1cm4gdD8idHJ1ZSI6dD09PSExPyJmYWxzZSI6InVuZGVmaW5lZCJ9LGk9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UidW5kZWZpbmVkIjpyZXR1cm4gbnVsbDtjYXNlInRydWUiOnJldHVybiEwO2Nhc2UiZmFsc2UiOnJldHVybiExO2RlZmF1bHQ6cmV0dXJuIG51bGx9fTtyZXR1cm4gdC5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub3B0aW9ucz1lLHRoaXMub3B0aW9ucy5mcm9tPW4sdGhpcy5vcHRpb25zLnRvPWl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oNTI3KSxuKDQ5OSksbig2MDIpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJhcnJheS1pbnB1dCIsdGVtcGxhdGU6JzxhIGhyZWY9IiMiIGNsYXNzPSJhcnJheS1pbnB1dHMtYnV0dG9uIGxpbmstYnV0dG9uIj5BZGQgQW5vdGhlcjwvYT4nLHBhcmFtczp7aXRlbVR5cGU6InN0cmluZyJ9LGV2ZW50czp7ImNsaWNrIC5hcnJheS1pbnB1dHMtYnV0dG9uIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5pc0VkaXRNb2RlKCkmJnRoaXMuYWRkTmV3RWxlbWVudCgpfX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlKXtlfHwoZT17fSksdGhpcy5wYXJhbXM9dC5kZWZhdWx0cyhlLnBhcmFtc3x8e30sdGhpcy5wYXJhbXMpLHRoaXMudW5pcXVlSWRQcmVmaXg9ImFycmF5In0sZnJvbTpmdW5jdGlvbihlKXtyZXR1cm4gdC5pc0FycmF5KGUpP2U6W119LGVkaXRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldEFycmF5T2JqZWN0KCksdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKSx0LmVhY2godGhpcy5hcnJheU9iamVjdCx0LmJpbmQodGhpcy5fYWRkRGVsZXRhYmxlQm94LHRoaXMpKSx0aGlzfSxyZWFkTW9kZTpmdW5jdGlvbigpe3RoaXMuZWRpdE1vZGUoKSx0aGlzLiQoIi5hcnJheS1pbnB1dHMtYnV0dG9uIikuYWRkQ2xhc3MoImxpbmstYnV0dG9uLWRpc2FibGVkIil9LHZhbDpmdW5jdGlvbigpe3ZhciBlPXQudmFsdWVzKHRoaXMuYXJyYXlPYmplY3QpO3JldHVybiB0LmNvbnRhaW5zKFtuLkRBVEFUWVBFLm51bWJlcixuLkRBVEFUWVBFLmludGVnZXJdLHRoaXMucGFyYW1zLml0ZW1UeXBlKSYmKGU9dC5maWx0ZXIoZSx0LmlzTnVtYmVyKSksZX0sZm9jdXM6ZnVuY3Rpb24oKXt9LGFkZE5ld0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT0iIixuPXQudW5pcXVlSWQodGhpcy51bmlxdWVJZFByZWZpeCk7dGhpcy5hcnJheU9iamVjdFtuXT1lLHRoaXMuX2FkZERlbGV0YWJsZUJveChlLG4pLHRoaXMudXBkYXRlKCl9LF9hZGREZWxldGFibGVCb3g6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uZXcgaSh0LmV4dGVuZCh0LnBpY2sodGhpcy5vcHRpb25zLCJyZWFkIiwicmVhZE9ubHkiLCJtb2RlbCIpLHtrZXk6bix2YWx1ZTplLGl0ZW1UeXBlOnRoaXMucGFyYW1zLml0ZW1UeXBlfSkpO3JldHVybiB0aGlzLmxpc3RlblRvKHIsInVwZGF0ZUFycmF5IixmdW5jdGlvbihlKXt0LmlzTnVsbChlKT8oZGVsZXRlIHRoaXMuYXJyYXlPYmplY3Rbbl0sdGhpcy5zdG9wTGlzdGVuaW5nKHIpKTp0aGlzLmFycmF5T2JqZWN0W25dPWUsdGhpcy51cGRhdGUoKX0pLHIucmVuZGVyKCkuJGVsLmhpZGUoKSx0aGlzLiQoIi5hcnJheS1pbnB1dHMtYnV0dG9uIikuYmVmb3JlKHIuZWwpLHIuJGVsLnNsaWRlRG93bigpLHJ9LF9zZXRBcnJheU9iamVjdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubW9kZWwuZ2V0KHRoaXMub3B0aW9ucy5uYW1lKTtpZih0aGlzLmFycmF5T2JqZWN0PXt9LHQuaXNBcnJheShlKSYmIXQuaXNFbXB0eShlKSl7dmFyIG49W10saT10aGlzO3QoZS5sZW5ndGgpLnRpbWVzKGZ1bmN0aW9uKCl7bi5wdXNoKHQudW5pcXVlSWQoaS51bmlxdWVJZFByZWZpeCkpfSksdGhpcy5hcnJheU9iamVjdD10Lm9iamVjdChuLGUpfX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbig0NzApLG4oNDk5KSxuKDUwMCksbig0NzEpLG4oNTExKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIHM9ZnVuY3Rpb24odCl7cmV0dXJuL15bYWVpb3VdLy50ZXN0KHQpfSxhPWZ1bmN0aW9uKHQpe3JldHVybiBzKHQpPyJhbiI6ImEifSxsPXIudHBsKCdcdCAgICA8ZGl2IGNsYXNzPSJvLWZvcm0taW5wdXQtZ3JvdXAtY29udHJvbHMiPlx0ICAgICAgPHNwYW4gY2xhc3M9ImlucHV0LWZpeCBvLWZvcm0tY29udHJvbCI+XHQgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iby1mb3JtLXRleHQiIG5hbWU9Int7a2V5fX0iIGlkPSJ7e2tleX19IiB2YWx1ZT0ie3t2YWx1ZX19IiBcdCAgICAgICAgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSIvPlx0ICAgICAgPC9zcGFuPlx0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmstYnV0dG9uIGxpbmstYnV0dG9uLWljb24gaWNvbi1vbmx5IGNsZWFyLWlucHV0LTE2Ij5cdCAgICAgICAgPHNwYW4gY2xhc3M9Imljb24gIj48L3NwYW4+XHQgICAgICA8L2E+XHQgICAgPC9kaXY+XHQgICAgPHAgY2xhc3M9Im8tZm9ybS1pbnB1dC1lcnJvciBvLWZvcm0tZXhwbGFpbiI+XHQgICAgICA8c3BhbiBjbGFzcz0iaWNvbiBpY29uLTE2IGVycm9yLTE2LXNtYWxsIj48L3NwYW4+IHt7ZXJyb3JFeHBsYWlufX1cdCAgICA8L3A+XHQgICcpLGM9Im8tZm9ybS1oYXMtZXJyb3JzIix1PSJ1cGRhdGVBcnJheSI7cmV0dXJuIGUuZXh0ZW5kKHt0YWdOYW1lOiJkaXYiLGNsYXNzTmFtZToiby1mb3JtLWlucHV0LWdyb3VwIixldmVudHM6eyJjbGljayBhIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5yZW1vdmUoKX0sImtleXVwIGlucHV0IjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKCl9fSxpc0VkaXRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMub3B0aW9ucy5yZWFkT25seSYmKHRoaXMub3B0aW9ucy5yZWFkIT09ITB8fHRoaXMubW9kZWwuZ2V0KCJfX2VkaXRfXyIpPT09ITApfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy50ZW1wbGF0ZT1sKHQuZXh0ZW5kKHRoaXMub3B0aW9ucyx7cGxhY2Vob2xkZXI6dGhpcy5nZXRQbGFjZWhvbGRlclRleHQoKSxlcnJvckV4cGxhaW46dGhpcy5nZXRFcnJvckV4cGxhaW5UZXh0KCl9KSksdGhpcy51cGRhdGU9dC5kZWJvdW5jZSh0aGlzLnVwZGF0ZSx0aGlzLm9wdGlvbnMuZGVib3VuY2VEZWxheXx8by5ERUJPVU5DRV9ERUxBWSl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRWRpdE1vZGUoKT90aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUpOih0aGlzLiRlbC50ZXh0KHRoaXMub3B0aW9ucy52YWx1ZSksdGhpcy4kKCJhIikuaGlkZSgpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIodSxudWxsKSx0aGlzLiRlbC5zbGlkZVVwKHQuYmluZChmdW5jdGlvbigpe2UucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsYXJndW1lbnRzKX0sdGhpcykpfSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiQoImlucHV0IikudmFsKCkscj10Lm9iamVjdChbbi5EQVRBVFlQRS5udW1iZXIsbi5EQVRBVFlQRS5pbnRlZ2VyXSxbaS5wYXJzZUZsb2F0LHRoaXMucGFyc2VJbnRdKTt0LmhhcyhyLHRoaXMub3B0aW9ucy5pdGVtVHlwZSkmJihlPXJbdGhpcy5vcHRpb25zLml0ZW1UeXBlXShlKSx0LmlzTnVtYmVyKGUpP3RoaXMuY2xlYXJJbnZhbGlkKCk6dGhpcy5tYXJrSW52YWxpZCgpKSx0aGlzLnRyaWdnZXIodSxlKX0sbWFya0ludmFsaWQ6ZnVuY3Rpb24oKXt0aGlzLiRlbC5hZGRDbGFzcyhjKX0sY2xlYXJJbnZhbGlkOmZ1bmN0aW9uKCl7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoYyl9LGdldFBsYWNlaG9sZGVyVGV4dDpmdW5jdGlvbigpe3ZhciB0PVsiRW50ZXIiXTtyZXR1cm4gdC5wdXNoKGEodGhpcy5vcHRpb25zLml0ZW1UeXBlKSksdC5wdXNoKHRoaXMub3B0aW9ucy5pdGVtVHlwZS50b0xvd2VyQ2FzZSgpKSx0LmpvaW4oIiAiKX0sZ2V0RXJyb3JFeHBsYWluVGV4dDpmdW5jdGlvbigpe3ZhciB0PVsiVmFsdWUgbXVzdCBiZSJdO3JldHVybiB0LnB1c2goYSh0aGlzLm9wdGlvbnMuaXRlbVR5cGUpKSx0LnB1c2godGhpcy5vcHRpb25zLml0ZW1UeXBlLnRvTG93ZXJDYXNlKCkpLHQuam9pbigiICIpfSxwYXJzZUludDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0LnRvU3RyaW5nKCl9LGV9KGZ1bmN0aW9uKGUpe2lmKC9eLT9cZCskLy50ZXN0KGUpKXt2YXIgbj1wYXJzZUludChlLDEwKTtyZXR1cm4gdC5pc05hTihuKT9lOm59cmV0dXJuIGV9KX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDQ3MSksbig1MjcpLG4oNDk3KSxuKDM2MSksbig0NjYpLG4oNTI4KV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj0iaW5wdXQtZml4IG8tZm9ybS1jb250cm9sIGRhdGUtdGltZSIsbz1uZXcgUmVnRXhwKCIoMFswLTldfDFbMC05XXwyWzAtM10pOlswLTVdWzAtOV06WzAtNV1bMC05XSIpLHM9ODtyZXR1cm4gZS5leHRlbmQoe3RlbXBsYXRlOnQudHBsKCdcdCAgICAgIDxzcGFuIGNsYXNzPSJpY29uIGljb24tMTYgaWNvbi1vbmx5IGNhbGVuZGFyLTE2Ii8+XHQgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSIgYXV0b2NvbXBsZXRlPSJvZmYiXHQgICAgICAgIG5hbWU9ImRhdGUiIGNsYXNzPSJkYXRlLWlucHV0IiBpZD0ie3tpbnB1dElkfX1fZGF0ZSIgdmFsdWU9Int7ZGF0ZVZhbHVlfX0iLz5cdCAgICAgIDxzcGFuIGNsYXNzPSJpY29uIGljb24tMTYgaWNvbi1vbmx5IHRpbWUtYWx0LTE2Ii8+XHQgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSIgbWF4bGVuZ3RoPSI4IiBtaW5sZW5ndGg9IjgiIGF1dG9jb21wbGV0ZT0ib2ZmIlx0ICAgICAgICBuYW1lPSJ0aW1lIiBjbGFzcz0idGltZS1pbnB1dCIgaWQ9Int7aW5wdXRJZH19X3RpbWUiIHZhbHVlPSJ7e3RpbWVWYWx1ZX19Ii8+XHQgICAgJyksZXZlbnRzOnsiaW5wdXQgaW5wdXQiOiJ3YWl0QW5kVXBkYXRlIiwiY2hhbmdlIGlucHV0Ijoid2FpdEFuZFVwZGF0ZSIsImtleWRvd24gaW5wdXQiOiJ3YWl0QW5kVXBkYXRlIiwia2V5dXAgaW5wdXQiOmZ1bmN0aW9uKHQpe24uaXNFbnRlcih0KT90aGlzLm1vZGVsLnRyaWdnZXIoImZvcm06c2F2ZSIpOm4uaXNFc2ModCkmJnRoaXMubW9kZWwudHJpZ2dlcigiZm9ybTpjYW5jZWwiKX19LHdhaXRBbmRVcGRhdGU6ZnVuY3Rpb24odCl7aWYoInRpbWUtaW5wdXQiPT09dC5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZSl7aWYodC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aDxzKXJldHVybjtvLnRlc3QodC5jdXJyZW50VGFyZ2V0LnZhbHVlKXx8KHQuY3VycmVudFRhcmdldC52YWx1ZT0iMDA6MDA6MDAiKX10aGlzLnVwZGF0ZSgpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3RoaXMuJGVsLmFkZENsYXNzKHIpO3ZhciB0PWkudXRjKHRoaXMuZ2V0TW9kZWxWYWx1ZSgpKTt0aGlzLm9wdGlvbnMuZGF0ZVZhbHVlPXQuZm9ybWF0KCJNTS9ERC9ZWVlZIiksdGhpcy5vcHRpb25zLnRpbWVWYWx1ZT10LmZvcm1hdCgiSEg6bW06c3MiKSxlLnByb3RvdHlwZS5lZGl0TW9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy4kKCIuZGF0ZS1pbnB1dCIpLnBsYWNlaG9sZGVyKCksdGhpcy4kKCIuZGF0ZS1pbnB1dCIpLmRhdGVwaWNrZXIodGhpcy5vcHRpb25zLnBhcmFtcyl9LHJlYWRNb2RlOmZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUucmVhZE1vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKHIpfSx2YWw6ZnVuY3Rpb24oKXtyZXR1cm57ZGF0ZTp0aGlzLiQoJ2lucHV0W3R5cGU9InRleHQiXS5kYXRlLWlucHV0JykudmFsKCksdGltZTp0aGlzLiQoJ2lucHV0W3R5cGU9InRleHQiXS50aW1lLWlucHV0JykudmFsKCl9fSxmb2N1czpmdW5jdGlvbigpe30sdG86ZnVuY3Rpb24odCl7cmV0dXJuIGkudXRjKHQuZGF0ZSt0LnRpbWUsIk1NL0REL1lZWVlISDptbTpzcyIpLmZvcm1hdCgpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ3MSksbig2MDYpLG4oNTAwKSxuKDYwNyldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz1lLnRwbCgnXHQgICAgPGRpdiBjbGFzcz0iY2xlYXJmaXgiPlx0ICAgICAgPHNwYW4gY2xhc3M9ImxpbmstYnV0dG9uIGxpbmstYnV0dG9uLXNtYWxsIj5cdCAgICAgICAge3tpMThuIGNvZGU9Im9mb3JtLmdyb3Vwc2VsZWN0LmFkZCIgYnVuZGxlPSJjb3VyYWdlIn19XHQgICAgICA8L3NwYW4+XHQgICAgICA8ZGl2IGNsYXNzPSJncm91cC1tZWRpdW0tYXBwLWxvZ28td3JhcHBlciI+PGltZyBjbGFzcz0iYXBwLWxvZ28iIHNyYz0ie3ttZWRpdW1JY29uVXJsfX0iLz48L2Rpdj5cdCAgICAgIDxkaXYgY2xhc3M9Imdyb3VwLWRlc2MiPlx0ICAgICAgICA8aDMgY2xhc3M9Imdyb3VwLWRlc2MtaGVhZGVyIj57e3toaWdobGlnaHRlZE5hbWV9fX08L2gzPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iZ3JvdXAtZGVzYy1pbmZvIj57eyNpZiBhcHBHcm91cH19e3thcHBHcm91cH19ICYjMTgzOyB7ey9pZn19XHQgICAgICAgIHt7I2lmIGRlc2NyaXB0aW9ufX1cdCAgICAgICAgICB7e2Rlc2NyaXB0aW9ufX1cdCAgICAgICAge3tlbHNlfX1cdCAgICAgICAgICB7e2kxOG4gY29kZT0ib2Zvcm0uZ3JvdXBzZWxlY3Qubm9fZGVzY3JpcHRpb24iIGJ1bmRsZT0iY291cmFnZSJ9fVx0ICAgICAgICB7ey9pZn19PC9zcGFuPlx0ICAgICAgICA8dWwgY2xhc3M9Imdyb3VwLWRlc2Mtc3RhdHMiPlx0ICAgICAgICAgIDxsaSBjbGFzcz0iaWNvbi0xNiI+PHNwYW4gY2xhc3M9Imljb24gcGVyc29uLTE2LWdyYXkiPjwvc3Bhbj57e3VzZXJzQ291bnR9fTwvbGk+XHQgICAgICAgICAgPGxpIGNsYXNzPSJpY29uLTE2Ij48c3BhbiBjbGFzcz0iaWNvbiBhcHAtMTYtZ3JheSI+PC9zcGFuPnt7YXBwc0NvdW50fX08L2xpPlx0ICAgICAgICAgIHt7I2lmIGdyb3VwUHVzaE1hcHBpbmdzQ291bnR9fVx0ICAgICAgICAgICAgPGxpIGNsYXNzPSJpY29uLTE2Ij5cdCAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24gaW5hY3RpdmUtc3luYy0xNiI+PC9zcGFuPnt7Z3JvdXBQdXNoTWFwcGluZ3NDb3VudH19IGFwcHNcdCAgICAgICAgICAgIDwvbGk+XHQgICAgICAgICAge3svaWZ9fVx0ICAgICAgICA8L3VsPlx0ICAgICAgPC9kaXY+XHQgICAgPC9kaXY+XHQgICcpLHM9ZS50cGwoJ1x0ICAgIDxkaXY+XHQgICAgICA8c3BhbiBjbGFzcz0iZ3JvdXAtc21hbGwtYXBwLWxvZ28td3JhcHBlciI+XHQgICAgICAgIDxpbWcgY2xhc3M9ImxvZ28iIHNyYz0ie3tzbWFsbEljb25Vcmx9fSIvPlx0ICAgICAgPC9zcGFuPlx0ICAgICAgPHNwYW4gY2xhc3M9InNlbGVjdDItY2hvc2VuLXRleHQiPnt7bmFtZX19PC9zcGFuPlx0ICAgIDwvZGl2Plx0ICAnKSxhPWUudHBsKCdcdCAgICAgIHt7I2lmIHNtYWxsSWNvblVybH19XHQgICAgICA8c3BhbiBjbGFzcz0iZ3JvdXAtc21hbGwtYXBwLWxvZ28td3JhcHBlciI+XHQgICAgICAgIDxpbWcgY2xhc3M9ImxvZ28iIHNyYz0ie3tzbWFsbEljb25Vcmx9fSIvPlx0ICAgICAgPC9zcGFuPlx0ICAgICAge3svaWZ9fVx0ICAgICAgPHNwYW4gY2xhc3M9InNlbGVjdDItY2hvc2VuLXRleHQiPnt7bmFtZX19PC9zcGFuPlx0ICAnKTtyZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZToiZ3JvdXAtc2VsZWN0LXdyYXAiLGFwaVVSTDoiL2FwaS92MS9ncm91cHMiLGV4dHJhUGFyYW1zOntleHBhbmQ6InN0YXRzLGFwcCIsbGltaXQ6MTB9LHBsYWNlaG9sZGVyOmkubG9jYWxpemUoIm9mb3JtLmdyb3Vwc2VsZWN0LnBsYWNlaG9sZGVyIiwiY291cmFnZSIpLGZvcm1hdElucHV0VG9vU2hvcnQ6aS5sb2NhbGl6ZSgib2Zvcm0uZ3JvdXBzZWxlY3Quc2hvcnRfaW5wdXQiLCJjb3VyYWdlIiksdG9TdHJpbmdWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBhKHRoaXMuX2VudGl0eSl9LGZvcm1hdFNlbGVjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5lbXB0eT90Lm5hbWU6cyh0KX0sZm9ybWF0UmVzdWx0OmZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQuZW1wdHkpcmV0dXJuIHRoaXMuc2VsZWN0RW1wdHlPcHRpb25UZW1wbGF0ZSgpO2lmKHQuZGlzYWJsZWQpcmV0dXJuIGUuYWRkQ2xhc3MoInNlYXJjaC1pbmZvLW1zZyIpLHRoaXMuc2VhcmNoSW5mb01zZ1RlbXBsYXRlKHQpO3ZhciBzPVtdO3JldHVybiByLnV0aWwubWFya01hdGNoKHQubmFtZSxuLnRlcm0scyxpKSx0LmhpZ2hsaWdodGVkTmFtZT1zLmpvaW4oIiIpLG8odCl9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciBuPXQuZXh0ZW5kKHt9LGUsZS5wcm9maWxlLGUuX2VtYmVkZGVkLnN0YXRzLHtzbWFsbEljb25Vcmw6dC5maW5kV2hlcmUoZS5fbGlua3MubG9nbyx7bmFtZToibWVkaXVtIn0pLmhyZWYsbWVkaXVtSWNvblVybDp0LmZpbmRXaGVyZShlLl9saW5rcy5sb2dvLHtuYW1lOiJtZWRpdW0ifSkuaHJlZixuYW1lOmUucHJvZmlsZS5uYW1lLGFwcEdyb3VwOmUuX2VtYmVkZGVkLmFwcCYmZS5fZW1iZWRkZWQuYXBwLmxhYmVsfSk7cmV0dXJuIHQucGljayhuLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInNtYWxsSWNvblVybCIsIm1lZGl1bUljb25VcmwiLCJ1c2Vyc0NvdW50IiwiYXBwc0NvdW50IiwiZ3JvdXBQdXNoTWFwcGluZ3NDb3VudCIsImFwcEdyb3VwIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMjgpLG4oMzMxKSxuKDUyNyksbig0NzEpLG4oNTAwKSxuKDYwNyldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz17a2V5dXA6ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKX19O3JldHVybiBuLmV4dGVuZCh7dGVtcGxhdGU6aS50cGwoJzxpbnB1dCBuYW1lPSJ7e25hbWV9fSIgaWQ9Int7aW5wdXRJZH19IiB0eXBlPSJoaWRkZW4iPjwvaW5wdXQ+Jyksc2VsZWN0RW1wdHlPcHRpb25UZW1wbGF0ZTppLnRwbCgnXHQgICAgICA8ZGl2IGNsYXNzPSJlbXB0eS1vcHRpb24iIj48cD57e2kxOG4gY29kZT0ib2Zvcm0uYmFzZXNlbGVjdC5yZXNldCIgYnVuZGxlPSJjb3VyYWdlIn19PC9wPjwvZGl2Plx0ICAgICcpLHNlYXJjaEluZm9Nc2dUZW1wbGF0ZTppLnRwbCgiPHA+e3tuYW1lfX08L3A+IiksZXZlbnRzOnt9LG5hbWVBdHRyaWJ1dGU6Im5hbWUiLGV4dHJhUGFyYW1zOnt9LGFwaVVSTDpudWxsLHF1ZXJ5UGFyYW06InEiLHBsYWNlaG9sZGVyOnZvaWQgMCxkcm9wZG93bkNzc0NsYXNzOnZvaWQgMCxmb3JtYXROb01hdGNoZXM6ci5sb2NhbGl6ZSgib2Zvcm0uYmFzZXNlbGVjdC5ub3Jlc3VsdHMiLCJjb3VyYWdlIiksZm9ybWF0U2VhcmNoaW5nOnIubG9jYWxpemUoIm9mb3JtLmJhc2VzZWxlY3Quc2VhcmNoaW5nIiwiY291cmFnZSIpLGZvcm1hdEFqYXhFcnJvcjpyLmxvY2FsaXplKCJvZm9ybS5iYXNlc2VsZWN0LmFqYXhfZXJyb3IiLCJjb3VyYWdlIiksZm9ybWF0SW5wdXRUb29TaG9ydDpyLmxvY2FsaXplKCJvZm9ybS5iYXNlc2VsZWN0LnNob3J0X2lucHV0IiwiY291cmFnZSIpLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmFwaVVSTCl0aHJvdyBuZXcgRXJyb3IoImFwaVVSTCBub3QgcHJvdmlkZWQiKTt0LmRlZmF1bHRzKHRoaXMuZXZlbnRzLG8pLG4uY2FsbCh0aGlzLGUpLHRoaXMuZXh0cmFQYXJhbXMuZmlsdGVyPXRoaXMuZ2V0UGFyYW0oImZpbHRlciIpLHRoaXMuX2VudGl0eT17fSx0LmJpbmRBbGwodGhpcywiYnVpbGRRdWVyeSIsInBhcnNlQWxsIiwicHJvY2Vzc1Jlc3VsdHMiLCJpbml0U2VsZWN0aW9uIiwic2VsZWN0RW50aXR5IiwiZ2V0TmFtZVZhbHVlIiwiZm9ybWF0UmVzdWx0Iil9LHRvU3RyaW5nVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW50aXR5W3RoaXMubmFtZUF0dHJpYnV0ZV18fHRoaXMuZGVmYXVsdFZhbHVlKCl9LHZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZX0sZm9jdXM6ZnVuY3Rpb24oKXt0LmRlZmVyKHQuYmluZChmdW5jdGlvbigpe3RoaXMuJCgiLnNlbGVjdDItZm9jdXNzZXIiKS5mb2N1cygpfSx0aGlzKSl9LHJlYWRNb2RlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuZW1wdHkoKSx0aGlzLnByZWZldGNoKHQuYmluZChmdW5jdGlvbihlKXtlLmxlbmd0aD90aGlzLl9lbnRpdHk9dGhpcy5wYXJzZSh0LmZpcnN0KGUpKTp0aGlzLl9lbnRpdHk9e30sdGhpcy4kZWwuaHRtbCh0aGlzLmdldFJlYWRNb2RlU3RyaW5nKCkpLHRoaXMubW9kZWwudHJpZ2dlcigiZm9ybTpyZXNpemUiKX0sdGhpcykpfSxlZGl0TW9kZTpmdW5jdGlvbigpe3RoaXMuJGVsLmVtcHR5KCksbi5wcm90b3R5cGUuZWRpdE1vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXMuX3NlbGVjdDIoKTt0Lm9uKCJzZWxlY3QyLXNlbGVjdGluZyIsdGhpcy5zZWxlY3RFbnRpdHkpLHRoaXMuX3ByZWZpbGwodCl9LF9zZWxlY3QyOmZ1bmN0aW9uKCl7dmFyIGU9e2FqYXg6e3VybDp0aGlzLmFwaVVSTCxkYXRhVHlwZToianNvbiIscXVpZXRNaWxsaXM6MTAwLGRhdGE6dGhpcy5idWlsZFF1ZXJ5LHJlc3VsdHM6dGhpcy5wcm9jZXNzUmVzdWx0c30sd2lkdGg6dGhpcy5vcHRpb25zLnBhcmFtcyYmdC5yZXN1bHRDdHgodGhpcy5vcHRpb25zLnBhcmFtcywid2lkdGgiLHRoaXMpfHx0LnJlc3VsdCh0aGlzLCJ3aWR0aCIpfHwiMTAwJSIsdGV4dDp0aGlzLmdldE5hbWVWYWx1ZSxkcm9wZG93bkNzc0NsYXNzOnRoaXMub3B0aW9ucy5wYXJhbXMmJnQucmVzdWx0Q3R4KHRoaXMub3B0aW9ucy5wYXJhbXMsImRyb3Bkb3duQ3NzQ2xhc3MiLHRoaXMpfHx0LnJlc3VsdCh0aGlzLCJkcm9wZG93bkNzc0NsYXNzIiksb3Blbk9uRW50ZXI6ITAsZm9ybWF0UmVzdWx0OnRoaXMuZm9ybWF0UmVzdWx0LGZvcm1hdFNlbGVjdGlvbjp0aGlzLmZvcm1hdFNlbGVjdGlvbixmb3JtYXROb01hdGNoZXM6dGhpcy5mb3JtYXROb01hdGNoZXMsZm9ybWF0U2VhcmNoaW5nOnRoaXMuZm9ybWF0U2VhcmNoaW5nLGZvcm1hdEFqYXhFcnJvcjp0aGlzLmZvcm1hdEFqYXhFcnJvcixpbml0U2VsZWN0aW9uOnRoaXMuaW5pdFNlbGVjdGlvbn07cmV0dXJuIHRoaXMuX2VtcHR5T3B0aW9uPXtpZDoiIixlbXB0eTohMCxuYW1lOnRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcnx8dGhpcy5wbGFjZWhvbGRlcn0sdGhpcy5fbm9SZXN1bHRzTXNnPXtkaXNhYmxlZDohMCxuYW1lOnRoaXMub3B0aW9ucy5mb3JtYXROb01hdGNoZXN8fHRoaXMuZm9ybWF0Tm9NYXRjaGVzfSx0aGlzLl9zdGFydFR5cGluZ01zZz17ZGlzYWJsZWQ6ITAsbmFtZTp0aGlzLm9wdGlvbnMuZm9ybWF0SW5wdXRUb29TaG9ydHx8dGhpcy5mb3JtYXRJbnB1dFRvb1Nob3J0fSx0aGlzLiQoImlucHV0Iikuc2VsZWN0MihlKX0saW5pdFNlbGVjdGlvbjpmdW5jdGlvbih0LGUpe2UodGhpcy5fZW50aXR5JiZ0aGlzLl9lbnRpdHkuaWQ/dGhpcy5fZW50aXR5OnRoaXMuX2VtcHR5T3B0aW9uKX0sYnVpbGRRdWVyeTpmdW5jdGlvbihlKXt2YXIgbj17fTtyZXR1cm4gblt0aGlzLnF1ZXJ5UGFyYW1dPWUsdGhpcy5leHRyYVBhcmFtcyYmIXQuaXNFbXB0eSh0aGlzLmV4dHJhUGFyYW1zKSYmdC5leHRlbmQobix0aGlzLmV4dHJhUGFyYW1zKSxufSxwcm9jZXNzUmVzdWx0czpmdW5jdGlvbih0LGUsbil7dmFyIGk9W107cmV0dXJuIiI9PT1uLnRlcm0/aT1bdGhpcy5fc3RhcnRUeXBpbmdNc2csdGhpcy5fZW1wdHlPcHRpb25dOihpPXRoaXMucGFyc2VBbGwodCksMD09PWkubGVuZ3RoP2kucHVzaCh0aGlzLl9ub1Jlc3VsdHNNc2csdGhpcy5fZW1wdHlPcHRpb24pOmkucHVzaCh0aGlzLl9lbXB0eU9wdGlvbikpLHtyZXN1bHRzOml9fSxmb3JtYXRSZXN1bHQ6ZnVuY3Rpb24oKXt9LGZvcm1hdFNlbGVjdGlvbjpmdW5jdGlvbigpe30sZ2V0TmFtZVZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMubmFtZUF0dHJpYnV0ZV19LHBhcnNlQWxsOmZ1bmN0aW9uKGUpe3JldHVybiB0Lm1hcChlLHRoaXMucGFyc2UpfSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sX3ByZWZpbGw6ZnVuY3Rpb24oZSl7dmFyIG49dGhpczt0aGlzLmRpc2FibGUoKSx0aGlzLnByZWZldGNoKGZ1bmN0aW9uKGkpe2kubGVuZ3RoJiYobi5fZW50aXR5PW4ucGFyc2UodC5maXJzdChpKSkpLGUuc2VsZWN0MigidmFsIixuLl9lbnRpdHkpLG4uZW5hYmxlKCl9LHQuYmluZChuLmVuYWJsZSxuKSl9LHByZWZldGNoOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy5nZXRNb2RlbFZhbHVlKCk7aWYoIWkpcmV0dXJuIHZvaWQgdChbXSk7dmFyIHI9ZS5nZXQodGhpcy5hcGlVUkwsdGhpcy5idWlsZFByZWZldGNoUXVlcnkoaSksdCk7biYmci5lcnJvcihuKX0sYnVpbGRQcmVmZXRjaFF1ZXJ5OmZ1bmN0aW9uKGUpe3JldHVybiB0LmV4dGVuZCh7fSx0aGlzLmV4dHJhUGFyYW1zLHtmaWx0ZXI6J2lkIGVxICInK2UrJyInfSl9LHNlbGVjdEVudGl0eTpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVNb2RlbCh0LmNob2ljZSl9LF91cGRhdGVNb2RlbDpmdW5jdGlvbih0KXt0aGlzLl9lbnRpdHk9dCx0aGlzLl92YWx1ZT10LmlkLHRoaXMudXBkYXRlKCl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH07aT1bbigzMzIpXSxyPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBmdW5jdGlvbih0KXsidW5kZWZpbmVkIj09dHlwZW9mIHQuZm4uZWFjaDImJnQuZXh0ZW5kKHQuZm4se2VhY2gyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10KFswXSksaT0tMSxyPXRoaXMubGVuZ3RoOysraTxyJiYobi5jb250ZXh0PW5bMF09dGhpc1tpXSkmJmUuY2FsbChuWzBdLGksbikhPT0hMTspO3JldHVybiB0aGlzfX0pfSh0KSxmdW5jdGlvbih0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKGUpe3ZhciBuPXQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKTtlLmJlZm9yZShuKSxuLmJlZm9yZShlKSxuLnJlbW92ZSgpfWZ1bmN0aW9uIHIodCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gVVt0XXx8dH1yZXR1cm4gdC5yZXBsYWNlKC9bXlx1MDAwMC1cdTAwN0VdL2csZSl9ZnVuY3Rpb24gcyh0LGUpe2Zvcih2YXIgbj0wLGk9ZS5sZW5ndGg7bjxpO24rPTEpaWYobCh0LGVbbl0pKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIGEoKXt2YXIgZT10KHopO2UuYXBwZW5kVG8oImJvZHkiKTt2YXIgbj17d2lkdGg6ZS53aWR0aCgpLWVbMF0uY2xpZW50V2lkdGgsaGVpZ2h0OmUuaGVpZ2h0KCktZVswXS5jbGllbnRIZWlnaHR9O3JldHVybiBlLnJlbW92ZSgpLG59ZnVuY3Rpb24gbCh0LGUpe3JldHVybiB0PT09ZXx8dCE9PW4mJmUhPT1uJiYobnVsbCE9PXQmJm51bGwhPT1lJiYodC5jb25zdHJ1Y3Rvcj09PVN0cmluZz90KyIiPT1lKyIiOmUuY29uc3RydWN0b3I9PT1TdHJpbmcmJmUrIiI9PXQrIiIpKX1mdW5jdGlvbiBjKGUsbil7dmFyIGkscixvO2lmKG51bGw9PT1lfHxlLmxlbmd0aDwxKXJldHVybltdO2ZvcihpPWUuc3BsaXQobikscj0wLG89aS5sZW5ndGg7cjxvO3IrPTEpaVtyXT10LnRyaW0oaVtyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdC5vdXRlcldpZHRoKCExKS10LndpZHRoKCl9ZnVuY3Rpb24gZChlKXt2YXIgaT0ia2V5dXAtY2hhbmdlLXZhbHVlIjtlLm9uKCJrZXlkb3duIixmdW5jdGlvbigpe3QuZGF0YShlLGkpPT09biYmdC5kYXRhKGUsaSxlLnZhbCgpKX0pLGUub24oImtleXVwIixmdW5jdGlvbigpe3ZhciByPXQuZGF0YShlLGkpO3IhPT1uJiZlLnZhbCgpIT09ciYmKHQucmVtb3ZlRGF0YShlLGkpLGUudHJpZ2dlcigia2V5dXAtY2hhbmdlIikpfSl9ZnVuY3Rpb24gaChlKXtlLm9uKCJtb3VzZW1vdmUiLGZ1bmN0aW9uKGUpe3ZhciBpPUY7aSE9PW4mJmkueD09PWUucGFnZVgmJmkueT09PWUucGFnZVl8fHQoZS50YXJnZXQpLnRyaWdnZXIoIm1vdXNlbW92ZS1maWx0ZXJlZCIsZSl9KX1mdW5jdGlvbiBwKHQsZSxpKXtpPWl8fG47dmFyIHI7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzO3dpbmRvdy5jbGVhclRpbWVvdXQocikscj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuYXBwbHkoaSxuKX0sdCl9fWZ1bmN0aW9uIGYodCxlKXt2YXIgbj1wKHQsZnVuY3Rpb24odCl7ZS50cmlnZ2VyKCJzY3JvbGwtZGVib3VuY2VkIix0KX0pO2Uub24oInNjcm9sbCIsZnVuY3Rpb24odCl7cyh0LnRhcmdldCxlLmdldCgpKT49MCYmbih0KX0pfWZ1bmN0aW9uIG0odCl7dFswXSE9PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGUsbj10WzBdLGk9dC52YWwoKS5sZW5ndGg7dC5mb2N1cygpO3ZhciByPW4ub2Zmc2V0V2lkdGg+MHx8bi5vZmZzZXRIZWlnaHQ+MDtyJiZuPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmKG4uc2V0U2VsZWN0aW9uUmFuZ2U/bi5zZXRTZWxlY3Rpb25SYW5nZShpLGkpOm4uY3JlYXRlVGV4dFJhbmdlJiYoZT1uLmNyZWF0ZVRleHRSYW5nZSgpLGUuY29sbGFwc2UoITEpLGUuc2VsZWN0KCkpKX0sMCl9ZnVuY3Rpb24gXyhlKXtlPXQoZSlbMF07dmFyIG49MCxpPTA7aWYoInNlbGVjdGlvblN0YXJ0ImluIGUpbj1lLnNlbGVjdGlvblN0YXJ0LGk9ZS5zZWxlY3Rpb25FbmQtbjtlbHNlIGlmKCJzZWxlY3Rpb24iaW4gZG9jdW1lbnQpe2UuZm9jdXMoKTt2YXIgcj1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpPWRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQubGVuZ3RoLHIubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLC1lLnZhbHVlLmxlbmd0aCksbj1yLnRleHQubGVuZ3RoLWl9cmV0dXJue29mZnNldDpuLGxlbmd0aDppfX1mdW5jdGlvbiBnKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIHYodCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9ZnVuY3Rpb24geShlKXtpZighUil7dmFyIG49ZVswXS5jdXJyZW50U3R5bGV8fHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVbMF0sbnVsbCk7Uj10KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDoiLTEwMDAwcHgiLHRvcDoiLTEwMDAwcHgiLGRpc3BsYXk6Im5vbmUiLGZvbnRTaXplOm4uZm9udFNpemUsZm9udEZhbWlseTpuLmZvbnRGYW1pbHksZm9udFN0eWxlOm4uZm9udFN0eWxlLGZvbnRXZWlnaHQ6bi5mb250V2VpZ2h0LGxldHRlclNwYWNpbmc6bi5sZXR0ZXJTcGFjaW5nLHRleHRUcmFuc2Zvcm06bi50ZXh0VHJhbnNmb3JtLHdoaXRlU3BhY2U6Im5vd3JhcCJ9KSxSLmF0dHIoImNsYXNzIiwic2VsZWN0Mi1zaXplciIpLHQoImJvZHkiKS5hcHBlbmQoUil9cmV0dXJuIFIudGV4dChlLnZhbCgpKSxSLndpZHRoKCl9ZnVuY3Rpb24gYihlLG4saSl7dmFyIHIsbyxzPVtdO3I9dC50cmltKGUuYXR0cigiY2xhc3MiKSksciYmKHI9IiIrcix0KHIuc3BsaXQoL1xzKy8pKS5lYWNoMihmdW5jdGlvbigpezA9PT10aGlzLmluZGV4T2YoInNlbGVjdDItIikmJnMucHVzaCh0aGlzKX0pKSxyPXQudHJpbShuLmF0dHIoImNsYXNzIikpLHImJihyPSIiK3IsdChyLnNwbGl0KC9ccysvKSkuZWFjaDIoZnVuY3Rpb24oKXswIT09dGhpcy5pbmRleE9mKCJzZWxlY3QyLSIpJiYobz1pKHRoaXMpLG8mJnMucHVzaChvKSl9KSksZS5hdHRyKCJjbGFzcyIscy5qb2luKCIgIikpfWZ1bmN0aW9uIHcodCxlLG4saSl7dmFyIG89cih0LnRvVXBwZXJDYXNlKCkpLmluZGV4T2YocihlLnRvVXBwZXJDYXNlKCkpKSxzPWUubGVuZ3RoO3JldHVybiBvPDA/dm9pZCBuLnB1c2goaSh0KSk6KG4ucHVzaChpKHQuc3Vic3RyaW5nKDAsbykpKSxuLnB1c2goIjxzcGFuIGNsYXNzPSdzZWxlY3QyLW1hdGNoJz4iKSxuLnB1c2goaSh0LnN1YnN0cmluZyhvLG8rcykpKSxuLnB1c2goIjwvc3Bhbj4iKSx2b2lkIG4ucHVzaChpKHQuc3Vic3RyaW5nKG8rcyx0Lmxlbmd0aCkpKSl9ZnVuY3Rpb24gTSh0KXt2YXIgZT17IlxcIjoiJiM5MjsiLCImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImIzQ3OyJ9O3JldHVybiBTdHJpbmcodCkucmVwbGFjZSgvWyY8PiInXC9cXF0vZyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfWZ1bmN0aW9uIFMoZSl7dmFyIGkscj1udWxsLG89ZS5xdWlldE1pbGxpc3x8MTAwLHM9ZS51cmwsYT10aGlzO3JldHVybiBmdW5jdGlvbihsKXt3aW5kb3cuY2xlYXJUaW1lb3V0KGkpLGk9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaT1lLmRhdGEsbz1zLGM9ZS50cmFuc3BvcnR8fHQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHMudHJhbnNwb3J0LHU9e3R5cGU6ZS50eXBlfHwiR0VUIixjYWNoZTplLmNhY2hlfHwhMSxqc29ucENhbGxiYWNrOmUuanNvbnBDYWxsYmFja3x8bixkYXRhVHlwZTplLmRhdGFUeXBlfHwianNvbiJ9LGQ9dC5leHRlbmQoe30sdC5mbi5zZWxlY3QyLmFqYXhEZWZhdWx0cy5wYXJhbXMsdSk7aT1pP2kuY2FsbChhLGwudGVybSxsLnBhZ2UsbC5jb250ZXh0KTpudWxsLG89ImZ1bmN0aW9uIj09dHlwZW9mIG8/by5jYWxsKGEsbC50ZXJtLGwucGFnZSxsLmNvbnRleHQpOm8sciYmImZ1bmN0aW9uIj09dHlwZW9mIHIuYWJvcnQmJnIuYWJvcnQoKSxlLnBhcmFtcyYmKHQuaXNGdW5jdGlvbihlLnBhcmFtcyk/dC5leHRlbmQoZCxlLnBhcmFtcy5jYWxsKGEpKTp0LmV4dGVuZChkLGUucGFyYW1zKSksdC5leHRlbmQoZCx7dXJsOm8sZGF0YVR5cGU6ZS5kYXRhVHlwZSxkYXRhOmksc3VjY2VzczpmdW5jdGlvbih0KXt2YXIgbj1lLnJlc3VsdHModCxsLnBhZ2UsbCk7bC5jYWxsYmFjayhuKX0sZXJyb3I6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXtoYXNFcnJvcjohMCxqcVhIUjp0LHRleHRTdGF0dXM6ZSxlcnJvclRocm93bjpufTtsLmNhbGxiYWNrKGkpfX0pLHI9Yy5jYWxsKGEsZCl9LG8pfX1mdW5jdGlvbiBUKGUpe3ZhciBuLGkscj1lLG89ZnVuY3Rpb24odCl7cmV0dXJuIiIrdC50ZXh0fTt0LmlzQXJyYXkocikmJihpPXIscj17cmVzdWx0czppfSksdC5pc0Z1bmN0aW9uKHIpPT09ITEmJihpPXIscj1mdW5jdGlvbigpe3JldHVybiBpfSk7dmFyIHM9cigpO3JldHVybiBzLnRleHQmJihvPXMudGV4dCx0LmlzRnVuY3Rpb24obyl8fChuPXMudGV4dCxvPWZ1bmN0aW9uKHQpe3JldHVybiB0W25dfSkpLGZ1bmN0aW9uKGUpe3ZhciBuLGk9ZS50ZXJtLHM9e3Jlc3VsdHM6W119O3JldHVybiIiPT09aT92b2lkIGUuY2FsbGJhY2socigpKToobj1mdW5jdGlvbihyLHMpe3ZhciBhLGw7aWYocj1yWzBdLHIuY2hpbGRyZW4pe2E9e307Zm9yKGwgaW4gcilyLmhhc093blByb3BlcnR5KGwpJiYoYVtsXT1yW2xdKTthLmNoaWxkcmVuPVtdLHQoci5jaGlsZHJlbikuZWFjaDIoZnVuY3Rpb24odCxlKXtuKGUsYS5jaGlsZHJlbil9KSwoYS5jaGlsZHJlbi5sZW5ndGh8fGUubWF0Y2hlcihpLG8oYSkscikpJiZzLnB1c2goYSl9ZWxzZSBlLm1hdGNoZXIoaSxvKHIpLHIpJiZzLnB1c2gocil9LHQocigpLnJlc3VsdHMpLmVhY2gyKGZ1bmN0aW9uKHQsZSl7bihlLHMucmVzdWx0cyl9KSx2b2lkIGUuY2FsbGJhY2socykpfX1mdW5jdGlvbiBrKGUpe3ZhciBpPXQuaXNGdW5jdGlvbihlKTtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89ci50ZXJtLHM9e3Jlc3VsdHM6W119LGE9aT9lKHIpOmU7dC5pc0FycmF5KGEpJiYodChhKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50ZXh0IT09bixlPXQ/dGhpcy50ZXh0OnRoaXM7KCIiPT09b3x8ci5tYXRjaGVyKG8sZSkpJiZzLnJlc3VsdHMucHVzaCh0P3RoaXM6e2lkOnRoaXMsdGV4dDp0aGlzfSl9KSxyLmNhbGxiYWNrKHMpKX19ZnVuY3Rpb24gTChlLG4pe2lmKHQuaXNGdW5jdGlvbihlKSlyZXR1cm4hMDtpZighZSlyZXR1cm4hMTtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuITA7dGhyb3cgbmV3IEVycm9yKG4rIiBtdXN0IGJlIGEgc3RyaW5nLCBmdW5jdGlvbiwgb3IgZmFsc3kgdmFsdWUiKX1mdW5jdGlvbiB4KGUsbil7aWYodC5pc0Z1bmN0aW9uKGUpKXt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGUuYXBwbHkobixpKX1yZXR1cm4gZX1mdW5jdGlvbiBBKGUpe3ZhciBuPTA7cmV0dXJuIHQuZWFjaChlLGZ1bmN0aW9uKHQsZSl7ZS5jaGlsZHJlbj9uKz1BKGUuY2hpbGRyZW4pOm4rK30pLG59ZnVuY3Rpb24gRSh0LGUsaSxyKXt2YXIgbyxzLGEsYyx1LGQ9dCxoPSExO2lmKCFyLmNyZWF0ZVNlYXJjaENob2ljZXx8IXIudG9rZW5TZXBhcmF0b3JzfHxyLnRva2VuU2VwYXJhdG9ycy5sZW5ndGg8MSlyZXR1cm4gbjtmb3IoOzspe2ZvcihzPS0xLGE9MCxjPXIudG9rZW5TZXBhcmF0b3JzLmxlbmd0aDthPGMmJih1PXIudG9rZW5TZXBhcmF0b3JzW2FdLHM9dC5pbmRleE9mKHUpLCEocz49MCkpO2ErKyk7aWYoczwwKWJyZWFrO2lmKG89dC5zdWJzdHJpbmcoMCxzKSx0PXQuc3Vic3RyaW5nKHMrdS5sZW5ndGgpLG8ubGVuZ3RoPjAmJihvPXIuY3JlYXRlU2VhcmNoQ2hvaWNlLmNhbGwodGhpcyxvLGUpLG8hPT1uJiZudWxsIT09byYmci5pZChvKSE9PW4mJm51bGwhPT1yLmlkKG8pKSl7Zm9yKGg9ITEsYT0wLGM9ZS5sZW5ndGg7YTxjO2ErKylpZihsKHIuaWQobyksci5pZChlW2FdKSkpe2g9ITA7YnJlYWt9aHx8aShvKX19cmV0dXJuIGQhPT10P3Q6dm9pZCAwfWZ1bmN0aW9uIEQoKXt2YXIgZT10aGlzO3QuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24odCxuKXtlW25dLnJlbW92ZSgpLGVbbl09bnVsbH0pfWZ1bmN0aW9uIEMoZSxuKXt2YXIgaT1mdW5jdGlvbigpe307cmV0dXJuIGkucHJvdG90eXBlPW5ldyBlLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWksaS5wcm90b3R5cGUucGFyZW50PWUucHJvdG90eXBlLGkucHJvdG90eXBlPXQuZXh0ZW5kKGkucHJvdG90eXBlLG4pLGl9aWYoZT09PW4pe3ZhciBZLE8sUCxOLEksUixqLEgsRj17eDowLHk6MH0sWT17VEFCOjksRU5URVI6MTMsRVNDOjI3LFNQQUNFOjMyLExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxTSElGVDoxNixDVFJMOjE3LEFMVDoxOCxQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxIT01FOjM2LEVORDozNSxCQUNLU1BBQ0U6OCxERUxFVEU6NDYsaXNBcnJvdzpmdW5jdGlvbih0KXtzd2l0Y2godD10LndoaWNoP3Qud2hpY2g6dCl7Y2FzZSBZLkxFRlQ6Y2FzZSBZLlJJR0hUOmNhc2UgWS5VUDpjYXNlIFkuRE9XTjpyZXR1cm4hMH1yZXR1cm4hMX0saXNDb250cm9sOmZ1bmN0aW9uKHQpe3ZhciBlPXQud2hpY2g7c3dpdGNoKGUpe2Nhc2UgWS5TSElGVDpjYXNlIFkuQ1RSTDpjYXNlIFkuQUxUOnJldHVybiEwfXJldHVybiEhdC5tZXRhS2V5fSxpc0Z1bmN0aW9uS2V5OmZ1bmN0aW9uKHQpe3JldHVybiB0PXQud2hpY2g/dC53aGljaDp0LHQ+PTExMiYmdDw9MTIzfX0sej0iPGRpdiBjbGFzcz0nc2VsZWN0Mi1tZWFzdXJlLXNjcm9sbGJhcic+PC9kaXY+IixVPXsi4pK2IjoiQSIsIu+8oSI6IkEiLCLDgCI6IkEiLCLDgSI6IkEiLCLDgiI6IkEiLCLhuqYiOiJBIiwi4bqkIjoiQSIsIuG6qiI6IkEiLCLhuqgiOiJBIiwiw4MiOiJBIiwixIAiOiJBIiwixIIiOiJBIiwi4bqwIjoiQSIsIuG6riI6IkEiLCLhurQiOiJBIiwi4bqyIjoiQSIsIsimIjoiQSIsIsegIjoiQSIsIsOEIjoiQSIsIseeIjoiQSIsIuG6oiI6IkEiLCLDhSI6IkEiLCLHuiI6IkEiLCLHjSI6IkEiLCLIgCI6IkEiLCLIgiI6IkEiLCLhuqAiOiJBIiwi4bqsIjoiQSIsIuG6tiI6IkEiLCLhuIAiOiJBIiwixIQiOiJBIiwiyLoiOiJBIiwi4rGvIjoiQSIsIuqcsiI6IkFBIiwiw4YiOiJBRSIsIse8IjoiQUUiLCLHoiI6IkFFIiwi6py0IjoiQU8iLCLqnLYiOiJBVSIsIuqcuCI6IkFWIiwi6py6IjoiQVYiLCLqnLwiOiJBWSIsIuKStyI6IkIiLCLvvKIiOiJCIiwi4biCIjoiQiIsIuG4hCI6IkIiLCLhuIYiOiJCIiwiyYMiOiJCIiwixoIiOiJCIiwixoEiOiJCIiwi4pK4IjoiQyIsIu+8oyI6IkMiLCLEhiI6IkMiLCLEiCI6IkMiLCLEiiI6IkMiLCLEjCI6IkMiLCLDhyI6IkMiLCLhuIgiOiJDIiwixociOiJDIiwiyLsiOiJDIiwi6py+IjoiQyIsIuKSuSI6IkQiLCLvvKQiOiJEIiwi4biKIjoiRCIsIsSOIjoiRCIsIuG4jCI6IkQiLCLhuJAiOiJEIiwi4biSIjoiRCIsIuG4jiI6IkQiLCLEkCI6IkQiLCLGiyI6IkQiLCLGiiI6IkQiLCLGiSI6IkQiLCLqnbkiOiJEIiwix7EiOiJEWiIsIseEIjoiRFoiLCLHsiI6IkR6Iiwix4UiOiJEeiIsIuKSuiI6IkUiLCLvvKUiOiJFIiwiw4giOiJFIiwiw4kiOiJFIiwiw4oiOiJFIiwi4buAIjoiRSIsIuG6viI6IkUiLCLhu4QiOiJFIiwi4buCIjoiRSIsIuG6vCI6IkUiLCLEkiI6IkUiLCLhuJQiOiJFIiwi4biWIjoiRSIsIsSUIjoiRSIsIsSWIjoiRSIsIsOLIjoiRSIsIuG6uiI6IkUiLCLEmiI6IkUiLCLIhCI6IkUiLCLIhiI6IkUiLCLhurgiOiJFIiwi4buGIjoiRSIsIsioIjoiRSIsIuG4nCI6IkUiLCLEmCI6IkUiLCLhuJgiOiJFIiwi4biaIjoiRSIsIsaQIjoiRSIsIsaOIjoiRSIsIuKSuyI6IkYiLCLvvKYiOiJGIiwi4bieIjoiRiIsIsaRIjoiRiIsIuqduyI6IkYiLCLikrwiOiJHIiwi77ynIjoiRyIsIse0IjoiRyIsIsScIjoiRyIsIuG4oCI6IkciLCLEniI6IkciLCLEoCI6IkciLCLHpiI6IkciLCLEoiI6IkciLCLHpCI6IkciLCLGkyI6IkciLCLqnqAiOiJHIiwi6p29IjoiRyIsIuqdviI6IkciLCLikr0iOiJIIiwi77yoIjoiSCIsIsSkIjoiSCIsIuG4oiI6IkgiLCLhuKYiOiJIIiwiyJ4iOiJIIiwi4bikIjoiSCIsIuG4qCI6IkgiLCLhuKoiOiJIIiwixKYiOiJIIiwi4rGnIjoiSCIsIuKxtSI6IkgiLCLqno0iOiJIIiwi4pK+IjoiSSIsIu+8qSI6IkkiLCLDjCI6IkkiLCLDjSI6IkkiLCLDjiI6IkkiLCLEqCI6IkkiLCLEqiI6IkkiLCLErCI6IkkiLCLEsCI6IkkiLCLDjyI6IkkiLCLhuK4iOiJJIiwi4buIIjoiSSIsIsePIjoiSSIsIsiIIjoiSSIsIsiKIjoiSSIsIuG7iiI6IkkiLCLEriI6IkkiLCLhuKwiOiJJIiwixpciOiJJIiwi4pK/IjoiSiIsIu+8qiI6IkoiLCLEtCI6IkoiLCLJiCI6IkoiLCLik4AiOiJLIiwi77yrIjoiSyIsIuG4sCI6IksiLCLHqCI6IksiLCLhuLIiOiJLIiwixLYiOiJLIiwi4bi0IjoiSyIsIsaYIjoiSyIsIuKxqSI6IksiLCLqnYAiOiJLIiwi6p2CIjoiSyIsIuqdhCI6IksiLCLqnqIiOiJLIiwi4pOBIjoiTCIsIu+8rCI6IkwiLCLEvyI6IkwiLCLEuSI6IkwiLCLEvSI6IkwiLCLhuLYiOiJMIiwi4bi4IjoiTCIsIsS7IjoiTCIsIuG4vCI6IkwiLCLhuLoiOiJMIiwixYEiOiJMIiwiyL0iOiJMIiwi4rGiIjoiTCIsIuKxoCI6IkwiLCLqnYgiOiJMIiwi6p2GIjoiTCIsIuqegCI6IkwiLCLHhyI6IkxKIiwix4giOiJMaiIsIuKTgiI6Ik0iLCLvvK0iOiJNIiwi4bi+IjoiTSIsIuG5gCI6Ik0iLCLhuYIiOiJNIiwi4rGuIjoiTSIsIsacIjoiTSIsIuKTgyI6Ik4iLCLvvK4iOiJOIiwix7giOiJOIiwixYMiOiJOIiwiw5EiOiJOIiwKCSLhuYQiOiJOIiwixYciOiJOIiwi4bmGIjoiTiIsIsWFIjoiTiIsIuG5iiI6Ik4iLCLhuYgiOiJOIiwiyKAiOiJOIiwixp0iOiJOIiwi6p6QIjoiTiIsIuqepCI6Ik4iLCLHiiI6Ik5KIiwix4siOiJOaiIsIuKThCI6Ik8iLCLvvK8iOiJPIiwiw5IiOiJPIiwiw5MiOiJPIiwiw5QiOiJPIiwi4buSIjoiTyIsIuG7kCI6Ik8iLCLhu5YiOiJPIiwi4buUIjoiTyIsIsOVIjoiTyIsIuG5jCI6Ik8iLCLIrCI6Ik8iLCLhuY4iOiJPIiwixYwiOiJPIiwi4bmQIjoiTyIsIuG5kiI6Ik8iLCLFjiI6Ik8iLCLIriI6Ik8iLCLIsCI6Ik8iLCLDliI6Ik8iLCLIqiI6Ik8iLCLhu44iOiJPIiwixZAiOiJPIiwix5EiOiJPIiwiyIwiOiJPIiwiyI4iOiJPIiwixqAiOiJPIiwi4bucIjoiTyIsIuG7miI6Ik8iLCLhu6AiOiJPIiwi4bueIjoiTyIsIuG7oiI6Ik8iLCLhu4wiOiJPIiwi4buYIjoiTyIsIseqIjoiTyIsIsesIjoiTyIsIsOYIjoiTyIsIse+IjoiTyIsIsaGIjoiTyIsIsafIjoiTyIsIuqdiiI6Ik8iLCLqnYwiOiJPIiwixqIiOiJPSSIsIuqdjiI6Ik9PIiwiyKIiOiJPVSIsIuKThSI6IlAiLCLvvLAiOiJQIiwi4bmUIjoiUCIsIuG5liI6IlAiLCLGpCI6IlAiLCLisaMiOiJQIiwi6p2QIjoiUCIsIuqdkiI6IlAiLCLqnZQiOiJQIiwi4pOGIjoiUSIsIu+8sSI6IlEiLCLqnZYiOiJRIiwi6p2YIjoiUSIsIsmKIjoiUSIsIuKThyI6IlIiLCLvvLIiOiJSIiwixZQiOiJSIiwi4bmYIjoiUiIsIsWYIjoiUiIsIsiQIjoiUiIsIsiSIjoiUiIsIuG5miI6IlIiLCLhuZwiOiJSIiwixZYiOiJSIiwi4bmeIjoiUiIsIsmMIjoiUiIsIuKxpCI6IlIiLCLqnZoiOiJSIiwi6p6mIjoiUiIsIuqegiI6IlIiLCLik4giOiJTIiwi77yzIjoiUyIsIuG6niI6IlMiLCLFmiI6IlMiLCLhuaQiOiJTIiwixZwiOiJTIiwi4bmgIjoiUyIsIsWgIjoiUyIsIuG5piI6IlMiLCLhuaIiOiJTIiwi4bmoIjoiUyIsIsiYIjoiUyIsIsWeIjoiUyIsIuKxviI6IlMiLCLqnqgiOiJTIiwi6p6EIjoiUyIsIuKTiSI6IlQiLCLvvLQiOiJUIiwi4bmqIjoiVCIsIsWkIjoiVCIsIuG5rCI6IlQiLCLImiI6IlQiLCLFoiI6IlQiLCLhubAiOiJUIiwi4bmuIjoiVCIsIsWmIjoiVCIsIsasIjoiVCIsIsauIjoiVCIsIsi+IjoiVCIsIuqehiI6IlQiLCLqnKgiOiJUWiIsIuKTiiI6IlUiLCLvvLUiOiJVIiwiw5kiOiJVIiwiw5oiOiJVIiwiw5siOiJVIiwixagiOiJVIiwi4bm4IjoiVSIsIsWqIjoiVSIsIuG5uiI6IlUiLCLFrCI6IlUiLCLDnCI6IlUiLCLHmyI6IlUiLCLHlyI6IlUiLCLHlSI6IlUiLCLHmSI6IlUiLCLhu6YiOiJVIiwixa4iOiJVIiwixbAiOiJVIiwix5MiOiJVIiwiyJQiOiJVIiwiyJYiOiJVIiwixq8iOiJVIiwi4buqIjoiVSIsIuG7qCI6IlUiLCLhu64iOiJVIiwi4busIjoiVSIsIuG7sCI6IlUiLCLhu6QiOiJVIiwi4bmyIjoiVSIsIsWyIjoiVSIsIuG5tiI6IlUiLCLhubQiOiJVIiwiyYQiOiJVIiwi4pOLIjoiViIsIu+8tiI6IlYiLCLhubwiOiJWIiwi4bm+IjoiViIsIsayIjoiViIsIuqdniI6IlYiLCLJhSI6IlYiLCLqnaAiOiJWWSIsIuKTjCI6IlciLCLvvLciOiJXIiwi4bqAIjoiVyIsIuG6giI6IlciLCLFtCI6IlciLCLhuoYiOiJXIiwi4bqEIjoiVyIsIuG6iCI6IlciLCLisbIiOiJXIiwi4pONIjoiWCIsIu+8uCI6IlgiLCLhuooiOiJYIiwi4bqMIjoiWCIsIuKTjiI6IlkiLCLvvLkiOiJZIiwi4buyIjoiWSIsIsOdIjoiWSIsIsW2IjoiWSIsIuG7uCI6IlkiLCLIsiI6IlkiLCLhuo4iOiJZIiwixbgiOiJZIiwi4bu2IjoiWSIsIuG7tCI6IlkiLCLGsyI6IlkiLCLJjiI6IlkiLCLhu74iOiJZIiwi4pOPIjoiWiIsIu+8uiI6IloiLCLFuSI6IloiLCLhupAiOiJaIiwixbsiOiJaIiwixb0iOiJaIiwi4bqSIjoiWiIsIuG6lCI6IloiLCLGtSI6IloiLCLIpCI6IloiLCLisb8iOiJaIiwi4rGrIjoiWiIsIuqdoiI6IloiLCLik5AiOiJhIiwi772BIjoiYSIsIuG6miI6ImEiLCLDoCI6ImEiLCLDoSI6ImEiLCLDoiI6ImEiLCLhuqciOiJhIiwi4bqlIjoiYSIsIuG6qyI6ImEiLCLhuqkiOiJhIiwiw6MiOiJhIiwixIEiOiJhIiwixIMiOiJhIiwi4bqxIjoiYSIsIuG6ryI6ImEiLCLhurUiOiJhIiwi4bqzIjoiYSIsIsinIjoiYSIsIsehIjoiYSIsIsOkIjoiYSIsIsefIjoiYSIsIuG6oyI6ImEiLCLDpSI6ImEiLCLHuyI6ImEiLCLHjiI6ImEiLCLIgSI6ImEiLCLIgyI6ImEiLCLhuqEiOiJhIiwi4bqtIjoiYSIsIuG6tyI6ImEiLCLhuIEiOiJhIiwixIUiOiJhIiwi4rGlIjoiYSIsIsmQIjoiYSIsIuqcsyI6ImFhIiwiw6YiOiJhZSIsIse9IjoiYWUiLCLHoyI6ImFlIiwi6py1IjoiYW8iLCLqnLciOiJhdSIsIuqcuSI6ImF2Iiwi6py7IjoiYXYiLCLqnL0iOiJheSIsIuKTkSI6ImIiLCLvvYIiOiJiIiwi4biDIjoiYiIsIuG4hSI6ImIiLCLhuIciOiJiIiwixoAiOiJiIiwixoMiOiJiIiwiyZMiOiJiIiwi4pOSIjoiYyIsIu+9gyI6ImMiLCLEhyI6ImMiLCLEiSI6ImMiLCLEiyI6ImMiLCLEjSI6ImMiLCLDpyI6ImMiLCLhuIkiOiJjIiwixogiOiJjIiwiyLwiOiJjIiwi6py/IjoiYyIsIuKGhCI6ImMiLCLik5MiOiJkIiwi772EIjoiZCIsIuG4iyI6ImQiLCLEjyI6ImQiLCLhuI0iOiJkIiwi4biRIjoiZCIsIuG4kyI6ImQiLCLhuI8iOiJkIiwixJEiOiJkIiwixowiOiJkIiwiyZYiOiJkIiwiyZciOiJkIiwi6p26IjoiZCIsIsezIjoiZHoiLCLHhiI6ImR6Iiwi4pOUIjoiZSIsIu+9hSI6ImUiLCLDqCI6ImUiLCLDqSI6ImUiLCLDqiI6ImUiLCLhu4EiOiJlIiwi4bq/IjoiZSIsIuG7hSI6ImUiLCLhu4MiOiJlIiwi4bq9IjoiZSIsIsSTIjoiZSIsIuG4lSI6ImUiLCLhuJciOiJlIiwixJUiOiJlIiwixJciOiJlIiwiw6siOiJlIiwi4bq7IjoiZSIsIsSbIjoiZSIsIsiFIjoiZSIsIsiHIjoiZSIsIuG6uSI6ImUiLCLhu4ciOiJlIiwiyKkiOiJlIiwi4bidIjoiZSIsIsSZIjoiZSIsIuG4mSI6ImUiLCLhuJsiOiJlIiwiyYciOiJlIiwiyZsiOiJlIiwix50iOiJlIiwi4pOVIjoiZiIsIu+9hiI6ImYiLCLhuJ8iOiJmIiwixpIiOiJmIiwi6p28IjoiZiIsIuKTliI6ImciLCLvvYciOiJnIiwix7UiOiJnIiwixJ0iOiJnIiwi4bihIjoiZyIsIsSfIjoiZyIsIsShIjoiZyIsIsenIjoiZyIsIsSjIjoiZyIsIselIjoiZyIsIsmgIjoiZyIsIuqeoSI6ImciLCLhtbkiOiJnIiwi6p2/IjoiZyIsIuKTlyI6ImgiLCLvvYgiOiJoIiwixKUiOiJoIiwi4bijIjoiaCIsIuG4pyI6ImgiLCLInyI6ImgiLCLhuKUiOiJoIiwi4bipIjoiaCIsIuG4qyI6ImgiLCLhupYiOiJoIiwixKciOiJoIiwi4rGoIjoiaCIsIuKxtiI6ImgiLCLJpSI6ImgiLCLGlSI6Imh2Iiwi4pOYIjoiaSIsIu+9iSI6ImkiLCLDrCI6ImkiLCLDrSI6ImkiLCLDriI6ImkiLCLEqSI6ImkiLCLEqyI6ImkiLCLErSI6ImkiLCLDryI6ImkiLCLhuK8iOiJpIiwi4buJIjoiaSIsIseQIjoiaSIsIsiJIjoiaSIsIsiLIjoiaSIsIuG7iyI6ImkiLCLEryI6ImkiLCLhuK0iOiJpIiwiyagiOiJpIiwixLEiOiJpIiwi4pOZIjoiaiIsIu+9iiI6ImoiLCLEtSI6ImoiLCLHsCI6ImoiLCLJiSI6ImoiLCLik5oiOiJrIiwi772LIjoiayIsIuG4sSI6ImsiLCLHqSI6ImsiLCLhuLMiOiJrIiwixLciOiJrIiwi4bi1IjoiayIsIsaZIjoiayIsIuKxqiI6ImsiLCLqnYEiOiJrIiwi6p2DIjoiayIsIuqdhSI6ImsiLCLqnqMiOiJrIiwi4pObIjoibCIsIu+9jCI6ImwiLCLFgCI6ImwiLCLEuiI6ImwiLCLEviI6ImwiLCLhuLciOiJsIiwi4bi5IjoibCIsIsS8IjoibCIsIuG4vSI6ImwiLCLhuLsiOiJsIiwixb8iOiJsIiwixYIiOiJsIiwixpoiOiJsIiwiyasiOiJsIiwi4rGhIjoibCIsIuqdiSI6ImwiLCLqnoEiOiJsIiwi6p2HIjoibCIsIseJIjoibGoiLCLik5wiOiJtIiwi772NIjoibSIsIuG4vyI6Im0iLCLhuYEiOiJtIiwi4bmDIjoibSIsIsmxIjoibSIsIsmvIjoibSIsIuKTnSI6Im4iLCLvvY4iOiJuIiwix7kiOiJuIiwixYQiOiJuIiwiw7EiOiJuIiwi4bmFIjoibiIsIsWIIjoibiIsIuG5hyI6Im4iLCLFhiI6Im4iLCLhuYsiOiJuIiwi4bmJIjoibiIsIsaeIjoibiIsIsmyIjoibiIsIsWJIjoibiIsIuqekSI6Im4iLCLqnqUiOiJuIiwix4wiOiJuaiIsIuKTniI6Im8iLCLvvY8iOiJvIiwiw7IiOiJvIiwiw7MiOiJvIiwiw7QiOiJvIiwi4buTIjoibyIsIuG7kSI6Im8iLCLhu5ciOiJvIiwi4buVIjoibyIsIsO1IjoibyIsIuG5jSI6Im8iLCLIrSI6Im8iLCLhuY8iOiJvIiwixY0iOiJvIiwi4bmRIjoibyIsIuG5kyI6Im8iLCLFjyI6Im8iLCLIryI6Im8iLCLIsSI6Im8iLCLDtiI6Im8iLCLIqyI6Im8iLCLhu48iOiJvIiwixZEiOiJvIiwix5IiOiJvIiwiyI0iOiJvIiwiyI8iOiJvIiwixqEiOiJvIiwi4budIjoibyIsIuG7myI6Im8iLCLhu6EiOiJvIiwi4bufIjoibyIsIuG7oyI6Im8iLCLhu40iOiJvIiwi4buZIjoibyIsIserIjoibyIsIsetIjoibyIsIsO4IjoibyIsIse/IjoibyIsIsmUIjoibyIsIuqdiyI6Im8iLCLqnY0iOiJvIiwiybUiOiJvIiwixqMiOiJvaSIsIsijIjoib3UiLCLqnY8iOiJvbyIsIuKTnyI6InAiLCLvvZAiOiJwIiwi4bmVIjoicCIsIuG5lyI6InAiLCLGpSI6InAiLCLhtb0iOiJwIiwi6p2RIjoicCIsIuqdkyI6InAiLCLqnZUiOiJwIiwi4pOgIjoicSIsIu+9kSI6InEiLCLJiyI6InEiLCLqnZciOiJxIiwi6p2ZIjoicSIsIuKToSI6InIiLCLvvZIiOiJyIiwixZUiOiJyIiwi4bmZIjoiciIsIsWZIjoiciIsIsiRIjoiciIsIsiTIjoiciIsIuG5myI6InIiLCLhuZ0iOiJyIiwixZciOiJyIiwi4bmfIjoiciIsIsmNIjoiciIsIsm9IjoiciIsIuqdmyI6InIiLCLqnqciOiJyIiwi6p6DIjoiciIsIuKToiI6InMiLCLvvZMiOiJzIiwiw58iOiJzIiwixZsiOiJzIiwi4bmlIjoicyIsIsWdIjoicyIsIuG5oSI6InMiLCLFoSI6InMiLCLhuaciOiJzIiwi4bmjIjoicyIsIuG5qSI6InMiLCLImSI6InMiLCLFnyI6InMiLCLIvyI6InMiLCLqnqkiOiJzIiwi6p6FIjoicyIsIuG6myI6InMiLCLik6MiOiJ0Iiwi772UIjoidCIsIuG5qyI6InQiLCLhupciOiJ0IiwixaUiOiJ0Iiwi4bmtIjoidCIsIsibIjoidCIsIsWjIjoidCIsIuG5sSI6InQiLCLhua8iOiJ0IiwixaciOiJ0Iiwixq0iOiJ0IiwiyogiOiJ0Iiwi4rGmIjoidCIsIuqehyI6InQiLCLqnKkiOiJ0eiIsIuKTpCI6InUiLCLvvZUiOiJ1Iiwiw7kiOiJ1Iiwiw7oiOiJ1Iiwiw7siOiJ1IiwixakiOiJ1Iiwi4bm5IjoidSIsIsWrIjoidSIsIuG5uyI6InUiLCLFrSI6InUiLCLDvCI6InUiLCLHnCI6InUiLCLHmCI6InUiLCLHliI6InUiLCLHmiI6InUiLCLhu6ciOiJ1Iiwixa8iOiJ1IiwixbEiOiJ1Iiwix5QiOiJ1IiwiyJUiOiJ1IiwiyJciOiJ1IiwixrAiOiJ1Iiwi4burIjoidSIsIuG7qSI6InUiLCLhu68iOiJ1Iiwi4butIjoidSIsIuG7sSI6InUiLCLhu6UiOiJ1Iiwi4bmzIjoidSIsIsWzIjoidSIsIuG5tyI6InUiLCLhubUiOiJ1IiwiyokiOiJ1Iiwi4pOlIjoidiIsIu+9liI6InYiLCLhub0iOiJ2Iiwi4bm/IjoidiIsIsqLIjoidiIsIuqdnyI6InYiLCLKjCI6InYiLCLqnaEiOiJ2eSIsIuKTpiI6InciLCLvvZciOiJ3Iiwi4bqBIjoidyIsIuG6gyI6InciLCLFtSI6InciLCLhuociOiJ3Iiwi4bqFIjoidyIsIuG6mCI6InciLCLhuokiOiJ3Iiwi4rGzIjoidyIsIuKTpyI6IngiLCLvvZgiOiJ4Iiwi4bqLIjoieCIsIuG6jSI6IngiLCLik6giOiJ5Iiwi772ZIjoieSIsIuG7syI6InkiLCLDvSI6InkiLCLFtyI6InkiLCLhu7kiOiJ5IiwiyLMiOiJ5Iiwi4bqPIjoieSIsIsO/IjoieSIsIuG7tyI6InkiLCLhupkiOiJ5Iiwi4bu1IjoieSIsIsa0IjoieSIsIsmPIjoieSIsIuG7vyI6InkiLCLik6kiOiJ6Iiwi772aIjoieiIsIsW6IjoieiIsIuG6kSI6InoiLCLFvCI6InoiLCLFviI6InoiLCLhupMiOiJ6Iiwi4bqVIjoieiIsIsa2IjoieiIsIsilIjoieiIsIsmAIjoieiIsIuKxrCI6InoiLCLqnaMiOiJ6IiwizoYiOiLOkSIsIs6IIjoizpUiLCLOiSI6Is6XIiwizooiOiLOmSIsIs6qIjoizpkiLCLOjCI6Is6fIiwizo4iOiLOpSIsIs6rIjoizqUiLCLOjyI6Is6pIiwizqwiOiLOsSIsIs6tIjoizrUiLCLOriI6Is63Iiwizq8iOiLOuSIsIs+KIjoizrkiLCLOkCI6Is65Iiwiz4wiOiLOvyIsIs+NIjoiz4UiLCLPiyI6Is+FIiwizrAiOiLPhSIsIs+JIjoiz4kiLCLPgiI6Is+DIn07aj10KGRvY3VtZW50KSxJPWZ1bmN0aW9uKCl7dmFyIHQ9MTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCsrfX0oKSxPPUMoT2JqZWN0LHtiaW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7dC5hcHBseShlLGFyZ3VtZW50cyl9fSxpbml0OmZ1bmN0aW9uKGUpe3ZhciBpLHIsbz0iLnNlbGVjdDItcmVzdWx0cyI7dGhpcy5vcHRzPWU9dGhpcy5wcmVwYXJlT3B0cyhlKSx0aGlzLmlkPWUuaWQsZS5lbGVtZW50LmRhdGEoInNlbGVjdDIiKSE9PW4mJm51bGwhPT1lLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpJiZlLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIpLmRlc3Ryb3koKSx0aGlzLmNvbnRhaW5lcj10aGlzLmNyZWF0ZUNvbnRhaW5lcigpLHRoaXMubGl2ZVJlZ2lvbj10KCIuc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZSIpLDA9PXRoaXMubGl2ZVJlZ2lvbi5sZW5ndGgmJih0aGlzLmxpdmVSZWdpb249dCgiPHNwYW4+Iix7cm9sZToic3RhdHVzIiwiYXJpYS1saXZlIjoicG9saXRlIn0pLmFkZENsYXNzKCJzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlIikuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkpLHRoaXMuY29udGFpbmVySWQ9InMyaWRfIisoZS5lbGVtZW50LmF0dHIoImlkIil8fCJhdXRvZ2VuIitJKCkpLHRoaXMuY29udGFpbmVyRXZlbnROYW1lPXRoaXMuY29udGFpbmVySWQucmVwbGFjZSgvKFsuXSkvZywiXyIpLnJlcGxhY2UoLyhbOyYsXC1cLlwrXCpcfic6IlwhXF4jJCVAXFtcXVwoXCk9Plx8XSkvZywiXFwkMSIpLHRoaXMuY29udGFpbmVyLmF0dHIoImlkIix0aGlzLmNvbnRhaW5lcklkKSx0aGlzLmNvbnRhaW5lci5hdHRyKCJ0aXRsZSIsZS5lbGVtZW50LmF0dHIoInRpdGxlIikpLHRoaXMuYm9keT10KCJib2R5IiksYih0aGlzLmNvbnRhaW5lcix0aGlzLm9wdHMuZWxlbWVudCx0aGlzLm9wdHMuYWRhcHRDb250YWluZXJDc3NDbGFzcyksdGhpcy5jb250YWluZXIuYXR0cigic3R5bGUiLGUuZWxlbWVudC5hdHRyKCJzdHlsZSIpKSx0aGlzLmNvbnRhaW5lci5jc3MoeChlLmNvbnRhaW5lckNzcyx0aGlzLm9wdHMuZWxlbWVudCkpLHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHgoZS5jb250YWluZXJDc3NDbGFzcyx0aGlzLm9wdHMuZWxlbWVudCkpLHRoaXMuZWxlbWVudFRhYkluZGV4PXRoaXMub3B0cy5lbGVtZW50LmF0dHIoInRhYmluZGV4IiksdGhpcy5vcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0MiIsdGhpcykuYXR0cigidGFiaW5kZXgiLCItMSIpLmJlZm9yZSh0aGlzLmNvbnRhaW5lcikub24oImNsaWNrLnNlbGVjdDIiLGcpLHRoaXMuY29udGFpbmVyLmRhdGEoInNlbGVjdDIiLHRoaXMpLHRoaXMuZHJvcGRvd249dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItZHJvcCIpLGIodGhpcy5kcm9wZG93bix0aGlzLm9wdHMuZWxlbWVudCx0aGlzLm9wdHMuYWRhcHREcm9wZG93bkNzc0NsYXNzKSx0aGlzLmRyb3Bkb3duLmFkZENsYXNzKHgoZS5kcm9wZG93bkNzc0NsYXNzLHRoaXMub3B0cy5lbGVtZW50KSksdGhpcy5kcm9wZG93bi5kYXRhKCJzZWxlY3QyIix0aGlzKSx0aGlzLmRyb3Bkb3duLm9uKCJjbGljayIsZyksdGhpcy5yZXN1bHRzPWk9dGhpcy5jb250YWluZXIuZmluZChvKSx0aGlzLnNlYXJjaD1yPXRoaXMuY29udGFpbmVyLmZpbmQoImlucHV0LnNlbGVjdDItaW5wdXQiKSx0aGlzLnF1ZXJ5Q291bnQ9MCx0aGlzLnJlc3VsdHNQYWdlPTAsdGhpcy5jb250ZXh0PW51bGwsdGhpcy5pbml0Q29udGFpbmVyKCksdGhpcy5jb250YWluZXIub24oImNsaWNrIixnKSxoKHRoaXMucmVzdWx0cyksdGhpcy5kcm9wZG93bi5vbigibW91c2Vtb3ZlLWZpbHRlcmVkIixvLHRoaXMuYmluZCh0aGlzLmhpZ2hsaWdodFVuZGVyRXZlbnQpKSx0aGlzLmRyb3Bkb3duLm9uKCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCIsbyx0aGlzLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5fdG91Y2hFdmVudD0hMCx0aGlzLmhpZ2hsaWdodFVuZGVyRXZlbnQodCl9KSksdGhpcy5kcm9wZG93bi5vbigidG91Y2htb3ZlIixvLHRoaXMuYmluZCh0aGlzLnRvdWNoTW92ZWQpKSx0aGlzLmRyb3Bkb3duLm9uKCJ0b3VjaHN0YXJ0IHRvdWNoZW5kIixvLHRoaXMuYmluZCh0aGlzLmNsZWFyVG91Y2hNb3ZlZCkpLHRoaXMuZHJvcGRvd24ub24oImNsaWNrIix0aGlzLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5fdG91Y2hFdmVudCYmKHRoaXMuX3RvdWNoRXZlbnQ9ITEsdGhpcy5zZWxlY3RIaWdobGlnaHRlZCgpKX0pKSxmKDgwLHRoaXMucmU=", "base64"));
  res.write(new Buffer("c3VsdHMpLHRoaXMuZHJvcGRvd24ub24oInNjcm9sbC1kZWJvdW5jZWQiLG8sdGhpcy5iaW5kKHRoaXMubG9hZE1vcmVJZk5lZWRlZCkpLHQodGhpcy5jb250YWluZXIpLm9uKCJjaGFuZ2UiLCIuc2VsZWN0Mi1pbnB1dCIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKX0pLHQodGhpcy5kcm9wZG93bikub24oImNoYW5nZSIsIi5zZWxlY3QyLWlucHV0IixmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfSksdC5mbi5tb3VzZXdoZWVsJiZpLm1vdXNld2hlZWwoZnVuY3Rpb24odCxlLG4scil7dmFyIG89aS5zY3JvbGxUb3AoKTtyPjAmJm8tcjw9MD8oaS5zY3JvbGxUb3AoMCksZyh0KSk6cjwwJiZpLmdldCgwKS5zY3JvbGxIZWlnaHQtaS5zY3JvbGxUb3AoKStyPD1pLmhlaWdodCgpJiYoaS5zY3JvbGxUb3AoaS5nZXQoMCkuc2Nyb2xsSGVpZ2h0LWkuaGVpZ2h0KCkpLGcodCkpfSksZChyKSxyLm9uKCJrZXl1cC1jaGFuZ2UgaW5wdXQgcGFzdGUiLHRoaXMuYmluZCh0aGlzLnVwZGF0ZVJlc3VsdHMpKSxyLm9uKCJmb2N1cyIsZnVuY3Rpb24oKXtyLmFkZENsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKX0pLHIub24oImJsdXIiLGZ1bmN0aW9uKCl7ci5yZW1vdmVDbGFzcygic2VsZWN0Mi1mb2N1c2VkIil9KSx0aGlzLmRyb3Bkb3duLm9uKCJtb3VzZXVwIixvLHRoaXMuYmluZChmdW5jdGlvbihlKXt0KGUudGFyZ2V0KS5jbG9zZXN0KCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpLmxlbmd0aD4wJiYodGhpcy5oaWdobGlnaHRVbmRlckV2ZW50KGUpLHRoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoZSkpfSkpLHRoaXMuZHJvcGRvd24ub24oImNsaWNrIG1vdXNldXAgbW91c2Vkb3duIHRvdWNoc3RhcnQgdG91Y2hlbmQgZm9jdXNpbiIsZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKX0pLHRoaXMubmV4dFNlYXJjaFRlcm09bix0LmlzRnVuY3Rpb24odGhpcy5vcHRzLmluaXRTZWxlY3Rpb24pJiYodGhpcy5pbml0U2VsZWN0aW9uKCksdGhpcy5tb25pdG9yU291cmNlKCkpLG51bGwhPT1lLm1heGltdW1JbnB1dExlbmd0aCYmdGhpcy5zZWFyY2guYXR0cigibWF4bGVuZ3RoIixlLm1heGltdW1JbnB1dExlbmd0aCk7dmFyIHM9ZS5lbGVtZW50LnByb3AoImRpc2FibGVkIik7cz09PW4mJihzPSExKSx0aGlzLmVuYWJsZSghcyk7dmFyIGw9ZS5lbGVtZW50LnByb3AoInJlYWRvbmx5Iik7bD09PW4mJihsPSExKSx0aGlzLnJlYWRvbmx5KGwpLEg9SHx8YSgpLHRoaXMuYXV0b2ZvY3VzPWUuZWxlbWVudC5wcm9wKCJhdXRvZm9jdXMiKSxlLmVsZW1lbnQucHJvcCgiYXV0b2ZvY3VzIiwhMSksdGhpcy5hdXRvZm9jdXMmJnRoaXMuZm9jdXMoKSx0aGlzLnNlYXJjaC5hdHRyKCJwbGFjZWhvbGRlciIsZS5zZWFyY2hJbnB1dFBsYWNlaG9sZGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0cy5lbGVtZW50LGU9dC5kYXRhKCJzZWxlY3QyIiksaT10aGlzO3RoaXMuY2xvc2UoKSx0Lmxlbmd0aCYmdFswXS5kZXRhY2hFdmVudCYmaS5fc3luYyYmdC5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsaS5fc3luYyl9KSx0aGlzLnByb3BlcnR5T2JzZXJ2ZXImJih0aGlzLnByb3BlcnR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpLHRoaXMucHJvcGVydHlPYnNlcnZlcj1udWxsKSx0aGlzLl9zeW5jPW51bGwsZSE9PW4mJihlLmNvbnRhaW5lci5yZW1vdmUoKSxlLmxpdmVSZWdpb24ucmVtb3ZlKCksZS5kcm9wZG93bi5yZW1vdmUoKSx0LnJlbW92ZUNsYXNzKCJzZWxlY3QyLW9mZnNjcmVlbiIpLnJlbW92ZURhdGEoInNlbGVjdDIiKS5vZmYoIi5zZWxlY3QyIikucHJvcCgiYXV0b2ZvY3VzIix0aGlzLmF1dG9mb2N1c3x8ITEpLHRoaXMuZWxlbWVudFRhYkluZGV4P3QuYXR0cih7dGFiaW5kZXg6dGhpcy5lbGVtZW50VGFiSW5kZXh9KTp0LnJlbW92ZUF0dHIoInRhYmluZGV4IiksdC5zaG93KCkpLEQuY2FsbCh0aGlzLCJjb250YWluZXIiLCJsaXZlUmVnaW9uIiwiZHJvcGRvd24iLCJyZXN1bHRzIiwic2VhcmNoIil9LG9wdGlvblRvRGF0YTpmdW5jdGlvbih0KXtyZXR1cm4gdC5pcygib3B0aW9uIik/e2lkOnQucHJvcCgidmFsdWUiKSx0ZXh0OnQudGV4dCgpLGVsZW1lbnQ6dC5nZXQoKSxjc3M6dC5hdHRyKCJjbGFzcyIpLGRpc2FibGVkOnQucHJvcCgiZGlzYWJsZWQiKSxsb2NrZWQ6bCh0LmF0dHIoImxvY2tlZCIpLCJsb2NrZWQiKXx8bCh0LmRhdGEoImxvY2tlZCIpLCEwKX06dC5pcygib3B0Z3JvdXAiKT97dGV4dDp0LmF0dHIoImxhYmVsIiksY2hpbGRyZW46W10sZWxlbWVudDp0LmdldCgpLGNzczp0LmF0dHIoImNsYXNzIil9OnZvaWQgMH0scHJlcGFyZU9wdHM6ZnVuY3Rpb24oZSl7dmFyIGkscixvLHMsYT10aGlzO2lmKGk9ZS5lbGVtZW50LCJzZWxlY3QiPT09aS5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYodGhpcy5zZWxlY3Q9cj1lLmVsZW1lbnQpLHImJnQuZWFjaChbImlkIiwibXVsdGlwbGUiLCJhamF4IiwicXVlcnkiLCJjcmVhdGVTZWFyY2hDaG9pY2UiLCJpbml0U2VsZWN0aW9uIiwiZGF0YSIsInRhZ3MiXSxmdW5jdGlvbigpe2lmKHRoaXMgaW4gZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbiAnIit0aGlzKyInIGlzIG5vdCBhbGxvd2VkIGZvciBTZWxlY3QyIHdoZW4gYXR0YWNoZWQgdG8gYSA8c2VsZWN0PiBlbGVtZW50LiIpfSksZT10LmV4dGVuZCh7fSx7cG9wdWxhdGVSZXN1bHRzOmZ1bmN0aW9uKGkscixvKXt2YXIgcyxsPXRoaXMub3B0cy5pZCxjPXRoaXMubGl2ZVJlZ2lvbjsocz1mdW5jdGlvbihpLHIsdSl7dmFyIGQsaCxwLGYsbSxfLGcsdix5LGI7aT1lLnNvcnRSZXN1bHRzKGkscixvKTt2YXIgdz1bXTtmb3IoZD0wLGg9aS5sZW5ndGg7ZDxoO2QrPTEpcD1pW2RdLG09cC5kaXNhYmxlZD09PSEwLGY9IW0mJg==", "base64"));
  res.write(new Buffer("bChwKSE9PW4sXz1wLmNoaWxkcmVuJiZwLmNoaWxkcmVuLmxlbmd0aD4wLGc9dCgiPGxpPjwvbGk+IiksZy5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHRzLWRlcHQtIit1KSxnLmFkZENsYXNzKCJzZWxlY3QyLXJlc3VsdCIpLGcuYWRkQ2xhc3MoZj8ic2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSI6InNlbGVjdDItcmVzdWx0LXVuc2VsZWN0YWJsZSIpLG0mJmcuYWRkQ2xhc3MoInNlbGVjdDItZGlzYWJsZWQiKSxfJiZnLmFkZENsYXNzKCJzZWxlY3QyLXJlc3VsdC13aXRoLWNoaWxkcmVuIiksZy5hZGRDbGFzcyhhLm9wdHMuZm9ybWF0UmVzdWx0Q3NzQ2xhc3MocCkpLGcuYXR0cigicm9sZSIsInByZXNlbnRhdGlvbiIpLHY9dChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSksdi5hZGRDbGFzcygic2VsZWN0Mi1yZXN1bHQtbGFiZWwiKSx2LmF0dHIoImlkIiwic2VsZWN0Mi1yZXN1bHQtbGFiZWwtIitJKCkpLHYuYXR0cigicm9sZSIsIm9wdGlvbiIpLGI9ZS5mb3JtYXRSZXN1bHQocCx2LG8sYS5vcHRzLmVzY2FwZU1hcmt1cCksYiE9PW4mJih2Lmh0bWwoYiksZy5hcHBlbmQodikpLF8mJih5PXQoIjx1bD48L3VsPiIpLHkuYWRkQ2xhc3MoInNlbGVjdDItcmVzdWx0LXN1YiIpLHMocC5jaGlsZHJlbix5LHUrMSksZy5hcHBlbmQoeSkpLGcuZGF0YSgic2VsZWN0Mi1kYXRhIixwKSx3LnB1c2goZ1swXSk7ci5hcHBlbmQodyksYy50ZXh0KGUuZm9ybWF0TWF0Y2hlcyhpLmxlbmd0aCkpfSkocixpLDApfX0sdC5mbi5zZWxlY3QyLmRlZmF1bHRzLGUpLCJmdW5jdGlvbiIhPXR5cGVvZiBlLmlkJiYobz1lLmlkLGUuaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRbb119KSx0LmlzQXJyYXkoZS5lbGVtZW50LmRhdGEoInNlbGVjdDJUYWdzIikpKXtpZigidGFncyJpbiBlKXRocm93InRhZ3Mgc3BlY2lmaWVkIGFzIGJvdGggYW4gYXR0cmlidXRlICdkYXRhLXNlbGVjdDItdGFncycgYW5kIGluIG9wdGlvbnMgb2YgU2VsZWN0MiAiK2UuZWxlbWVudC5hdHRyKCJpZCIpO2UudGFncz1lLmVsZW1lbnQuZGF0YSgic2VsZWN0MlRhZ3MiKX1pZihyPyhlLnF1ZXJ5PXRoaXMuYmluZChmdW5jdGlvbih0KXt2YXIgZSxyLG8scz17cmVzdWx0czpbXSxtb3JlOiExfSxsPXQudGVybTtvPWZ1bmN0aW9uKGUsbil7dmFyIGk7ZS5pcygib3B0aW9uIik/dC5tYXRjaGVyKGwsZS50ZXh0KCksZSkmJm4ucHVzaChhLm9wdGlvblRvRGF0YShlKSk6ZS5pcygib3B0Z3JvdXAiKSYmKGk9YS5vcHRpb25Ub0RhdGEoZSksZS5jaGlsZHJlbigpLmVhY2gyKGZ1bmN0aW9uKHQsZSl7byhlLGkuY2hpbGRyZW4pfSksaS5jaGlsZHJlbi5sZW5ndGg+MCYmbi5wdXNoKGkpKX0sZT1pLmNoaWxkcmVuKCksdGhpcy5nZXRQbGFjZWhvbGRlcigpIT09biYmZS5sZW5ndGg+MCYmKHI9dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpLHImJihlPWUubm90KHIpKSksZS5lYWNoMihmdW5jdGlvbih0LGUpe28oZSxzLnJlc3VsdHMpfSksdC5jYWxsYmFjayhzKX0pLGUuaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaWR9KToicXVlcnkiaW4gZXx8KCJhamF4ImluIGU/KHM9ZS5lbGVtZW50LmRhdGEoImFqYXgtdXJsIikscyYmcy5sZW5ndGg+MCYmKGUuYWpheC51cmw9cyksZS5xdWVyeT1TLmNhbGwoZS5lbGVtZW50LGUuYWpheCkpOiJkYXRhImluIGU/ZS5xdWVyeT1UKGUuZGF0YSk6InRhZ3MiaW4gZSYmKGUucXVlcnk9ayhlLnRhZ3MpLGUuY3JlYXRlU2VhcmNoQ2hvaWNlPT09biYmKGUuY3JlYXRlU2VhcmNoQ2hvaWNlPWZ1bmN0aW9uKGUpe3JldHVybntpZDp0LnRyaW0oZSksdGV4dDp0LnRyaW0oZSl9fSksZS5pbml0U2VsZWN0aW9uPT09biYmKGUuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbihuLGkpe3ZhciByPVtdO3QoYyhuLnZhbCgpLGUuc2VwYXJhdG9yKSkuZWFjaChmdW5jdGlvbigpe3ZhciBuPXtpZDp0aGlzLHRleHQ6dGhpc30saT1lLnRhZ3M7dC5pc0Z1bmN0aW9uKGkpJiYoaT1pKCkpLHQoaSkuZWFjaChmdW5jdGlvbigpe2lmKGwodGhpcy5pZCxuLmlkKSlyZXR1cm4gbj10aGlzLCExfSksci5wdXNoKG4pfSksaShyKX0pKSksImZ1bmN0aW9uIiE9dHlwZW9mIGUucXVlcnkpdGhyb3cicXVlcnkgZnVuY3Rpb24gbm90IGRlZmluZWQgZm9yIFNlbGVjdDIgIitlLmVsZW1lbnQuYXR0cigiaWQiKTtpZigidG9wIj09PWUuY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb24pZS5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3QudW5zaGlmdChlKX07ZWxzZSBpZigiYm90dG9tIj09PWUuY3JlYXRlU2VhcmNoQ2hvaWNlUG9zaXRpb24pZS5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3QucHVzaChlKX07ZWxzZSBpZigiZnVuY3Rpb24iIT10eXBlb2YgZS5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbil0aHJvdyJpbnZhbGlkIGNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uIG9wdGlvbiBtdXN0IGJlICd0b3AnLCAnYm90dG9tJyBvciBhIGN1c3RvbSBmdW5jdGlvbiI7cmV0dXJuIGV9LG1vbml0b3JTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMub3B0cy5lbGVtZW50LHI9dGhpcztpLm9uKCJjaGFuZ2Uuc2VsZWN0MiIsdGhpcy5iaW5kKGZ1bmN0aW9uKHQpe3RoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDItY2hhbmdlLXRyaWdnZXJlZCIpIT09ITAmJnRoaXMuaW5pdFNlbGVjdGlvbigpfSkpLHRoaXMuX3N5bmM9dGhpcy5iaW5kKGZ1bmN0aW9uKCl7dmFyIHQ9aS5wcm9wKCJkaXNhYmxlZCIpO3Q9PT1uJiYodD0hMSksdGhpcy5lbmFibGUoIXQpO3ZhciBlPWkucHJvcCgicmVhZG9ubHkiKTtlPT09biYmKGU9ITEpLHRoaXMucmVhZG9ubHkoZSksYih0aGlzLmNvbnRhaW5lcix0aGlzLm9wdHMuZWxlbWVudCx0aGlzLm9wdHMuYWRhcHRDb250YWluZXJDc3NDbGFzcyksdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoeCh0aGlzLm9wdHMuY29udGFpbmVyQ3NzQ2xhc3MsdGhpcy5vcHRzLmVsZW1lbnQpKSxiKHRoaXMuZHJvcGRvd24sdGhpcy5vcHRzLmVsZW1lbnQsdGhpcy5vcHRzLmFkYXB0RHJvcGRvd25Dc3NDbGFzcyksdGhpcy5kcm9wZG93bi5hZGRDbGFzcyh4KHRoaXMub3B0cy5kcm9wZG93bkNzc0NsYXNzLHRoaXMub3B0cy5lbGVtZW50KSl9KSxpLmxlbmd0aCYmaVswXS5hdHRhY2hFdmVudCYmaS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsci5fc3luYyl9KSxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXIsZSE9PW4mJih0aGlzLnByb3BlcnR5T2JzZXJ2ZXImJihkZWxldGUgdGhpcy5wcm9wZXJ0eU9ic2VydmVyLHRoaXMucHJvcGVydHlPYnNlcnZlcj1udWxsKSx0aGlzLnByb3BlcnR5T2JzZXJ2ZXI9bmV3IGUoZnVuY3Rpb24oZSl7dC5lYWNoKGUsci5fc3luYyl9KSx0aGlzLnByb3BlcnR5T2JzZXJ2ZXIub2JzZXJ2ZShpLmdldCgwKSx7YXR0cmlidXRlczohMCxzdWJ0cmVlOiExfSkpfSx0cmlnZ2VyU2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuPXQuRXZlbnQoInNlbGVjdDItc2VsZWN0aW5nIix7dmFsOnRoaXMuaWQoZSksb2JqZWN0OmUsY2hvaWNlOmV9KTtyZXR1cm4gdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcihuKSwhbi5pc0RlZmF1bHRQcmV2ZW50ZWQoKX0sdHJpZ2dlckNoYW5nZTpmdW5jdGlvbihlKXtlPWV8fHt9LGU9dC5leHRlbmQoe30sZSx7dHlwZToiY2hhbmdlIix2YWw6dGhpcy52YWwoKX0pLHRoaXMub3B0cy5lbGVtZW50LmRhdGEoInNlbGVjdDItY2hhbmdlLXRyaWdnZXJlZCIsITApLHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoZSksdGhpcy5vcHRzLmVsZW1lbnQuZGF0YSgic2VsZWN0Mi1jaGFuZ2UtdHJpZ2dlcmVkIiwhMSksdGhpcy5vcHRzLmVsZW1lbnQuY2xpY2soKSx0aGlzLm9wdHMuYmx1ck9uQ2hhbmdlJiZ0aGlzLm9wdHMuZWxlbWVudC5ibHVyKCl9LGlzSW50ZXJmYWNlRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWRJbnRlcmZhY2U9PT0hMH0sZW5hYmxlSW50ZXJmYWNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZW5hYmxlZCYmIXRoaXMuX3JlYWRvbmx5LGU9IXQ7cmV0dXJuIHQhPT10aGlzLmVuYWJsZWRJbnRlcmZhY2UmJih0aGlzLmNvbnRhaW5lci50b2dnbGVDbGFzcygic2VsZWN0Mi1jb250YWluZXItZGlzYWJsZWQiLGUpLHRoaXMuY2xvc2UoKSx0aGlzLmVuYWJsZWRJbnRlcmZhY2U9dCwhMCl9LGVuYWJsZTpmdW5jdGlvbih0KXt0PT09biYmKHQ9ITApLHRoaXMuX2VuYWJsZWQhPT10JiYodGhpcy5fZW5hYmxlZD10LHRoaXMub3B0cy5lbGVtZW50LnByb3AoImRpc2FibGVkIiwhdCksdGhpcy5lbmFibGVJbnRlcmZhY2UoKSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZSghMSl9LHJlYWRvbmx5OmZ1bmN0aW9uKHQpe3Q9PT1uJiYodD0hMSksdGhpcy5fcmVhZG9ubHkhPT10JiYodGhpcy5fcmVhZG9ubHk9dCx0aGlzLm9wdHMuZWxlbWVudC5wcm9wKCJyZWFkb25seSIsdCksdGhpcy5lbmFibGVJbnRlcmZhY2UoKSl9LG9wZW5lZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5jb250YWluZXImJnRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWRyb3Bkb3duLW9wZW4iKX0scG9zaXRpb25Ecm9wZG93bjpmdW5jdGlvbigpe3ZhciBlLG4saSxyLG8scz10aGlzLmRyb3Bkb3duLGE9dGhpcy5jb250YWluZXIsbD1hLm9mZnNldCgpLGM9YS5vdXRlckhlaWdodCghMSksdT1hLm91dGVyV2lkdGgoITEpLGQ9cy5vdXRlckhlaWdodCghMSksaD10KHdpbmRvdykscD1oLndpZHRoKCksZj1oLmhlaWdodCgpLG09aC5zY3JvbGxMZWZ0KCkrcCxfPWguc2Nyb2xsVG9wKCkrZixnPWwudG9wK2Msdj1sLmxlZnQseT1nK2Q8PV8sYj1sLnRvcC1kPj1oLnNjcm9sbFRvcCgpLHc9cy5vdXRlcldpZHRoKCExKSxNPWZ1bmN0aW9uKCl7cmV0dXJuIHYrdzw9bX0sUz1mdW5jdGlvbigpe3JldHVybiBsLmxlZnQrbSthLm91dGVyV2lkdGgoITEpPnd9LFQ9cy5oYXNDbGFzcygic2VsZWN0Mi1kcm9wLWFib3ZlIik7VD8obj0hMCwhYiYmeSYmKGk9ITAsbj0hMSkpOihuPSExLCF5JiZiJiYoaT0hMCxuPSEwKSksaSYmKHMuaGlkZSgpLGw9dGhpcy5jb250YWluZXIub2Zmc2V0KCksYz10aGlzLmNvbnRhaW5lci5vdXRlckhlaWdodCghMSksdT10aGlzLmNvbnRhaW5lci5vdXRlcldpZHRoKCExKSxkPXMub3V0ZXJIZWlnaHQoITEpLG09aC5zY3JvbGxMZWZ0KCkrcCxfPWguc2Nyb2xsVG9wKCkrZixnPWwudG9wK2Msdj1sLmxlZnQsdz1zLm91dGVyV2lkdGgoITEpLHMuc2hvdygpLHRoaXMuZm9jdXNTZWFyY2goKSksdGhpcy5vcHRzLmRyb3Bkb3duQXV0b1dpZHRoPyhvPXQoIi5zZWxlY3QyLXJlc3VsdHMiLHMpWzBdLHMuYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hdXRvLXdpZHRoIikscy5jc3MoIndpZHRoIiwiIiksdz1zLm91dGVyV2lkdGgoITEpKyhvLnNjcm9sbEhlaWdodD09PW8uY2xpZW50SGVpZ2h0PzA6SC53aWR0aCksdz51P3U9dzp3PXUsZD1zLm91dGVySGVpZ2h0KCExKSk6dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hdXRvLXdpZHRoIiksInN0YXRpYyIhPT10aGlzLmJvZHkuY3NzKCJwb3NpdGlvbiIpJiYoZT10aGlzLmJvZHkub2Zmc2V0KCksZy09ZS50b3Asdi09ZS5sZWZ0KSwhTSgpJiZTKCkmJih2PWwubGVmdCt0aGlzLmNvbnRhaW5lci5vdXRlcldpZHRoKCExKS13KSxyPXtsZWZ0OnYsd2lkdGg6dX0sbj8oci50b3A9bC50b3AtZCxyLmJvdHRvbT0iYXV0byIsdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpLHMuYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpKTooci50b3A9ZyxyLmJvdHRvbT0iYXV0byIsdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpLHMucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpKSxyPXQuZXh0ZW5kKHIseCh0aGlzLm9wdHMuZHJvcGRvd25Dc3MsdGhpcy5vcHRzLmVsZW1lbnQpKSxzLmNzcyhyKX0sc2hvdWxkT3BlbjpmdW5jdGlvbigpe3ZhciBlO3JldHVybiF0aGlzLm9wZW5lZCgpJiYodGhpcy5fZW5hYmxlZCE9PSExJiZ0aGlzLl9yZWFkb25seSE9PSEwJiYoZT10LkV2ZW50KCJzZWxlY3QyLW9wZW5pbmciKSx0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGUpLCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSl9LGNsZWFyRHJvcGRvd25BbGlnbm1lbnRQcmVmZXJlbmNlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpLHRoaXMuZHJvcGRvd24ucmVtb3ZlQ2xhc3MoInNlbGVjdDItZHJvcC1hYm92ZSIpfSxvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnNob3VsZE9wZW4oKSYmKHRoaXMub3BlbmluZygpLGoub24oIm1vdXNlbW92ZS5zZWxlY3QyRXZlbnQiLGZ1bmN0aW9uKHQpe0YueD10LnBhZ2VYLEYueT10LnBhZ2VZfSksITApfSxvcGVuaW5nOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLmNvbnRhaW5lckV2ZW50TmFtZSxyPSJzY3JvbGwuIituLG89InJlc2l6ZS4iK24scz0ib3JpZW50YXRpb25jaGFuZ2UuIituO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWRyb3Bkb3duLW9wZW4iKS5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIiksdGhpcy5jbGVhckRyb3Bkb3duQWxpZ25tZW50UHJlZmVyZW5jZSgpLHRoaXMuZHJvcGRvd25bMF0hPT10aGlzLmJvZHkuY2hpbGRyZW4oKS5sYXN0KClbMF0mJnRoaXMuZHJvcGRvd24uZGV0YWNoKCkuYXBwZW5kVG8odGhpcy5ib2R5KSxlPXQoIiNzZWxlY3QyLWRyb3AtbWFzayIpLDA9PWUubGVuZ3RoJiYoZT10KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxlLmF0dHIoImlkIiwic2VsZWN0Mi1kcm9wLW1hc2siKS5hdHRyKCJjbGFzcyIsInNlbGVjdDItZHJvcC1tYXNrIiksZS5oaWRlKCksZS5hcHBlbmRUbyh0aGlzLmJvZHkpLGUub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0IGNsaWNrIixmdW5jdGlvbihuKXtpKGUpO3ZhciByLG89dCgiI3NlbGVjdDItZHJvcCIpO28ubGVuZ3RoPjAmJihyPW8uZGF0YSgic2VsZWN0MiIpLHIub3B0cy5zZWxlY3RPbkJsdXImJnIuc2VsZWN0SGlnaGxpZ2h0ZWQoe25vRm9jdXM6ITB9KSxyLmNsb3NlKCksbi5wcmV2ZW50RGVmYXVsdCgpLG4uc3RvcFByb3BhZ2F0aW9uKCkpfSkpLHRoaXMuZHJvcGRvd24ucHJldigpWzBdIT09ZVswXSYmdGhpcy5kcm9wZG93bi5iZWZvcmUoZSksdCgiI3NlbGVjdDItZHJvcCIpLnJlbW92ZUF0dHIoImlkIiksdGhpcy5kcm9wZG93bi5hdHRyKCJpZCIsInNlbGVjdDItZHJvcCIpLGUuc2hvdygpLHRoaXMucG9zaXRpb25Ecm9wZG93bigpLHRoaXMuZHJvcGRvd24uc2hvdygpLHRoaXMucG9zaXRpb25Ecm9wZG93bigpLHRoaXMuZHJvcGRvd24uYWRkQ2xhc3MoInNlbGVjdDItZHJvcC1hY3RpdmUiKTt2YXIgYT10aGlzO3RoaXMuY29udGFpbmVyLnBhcmVudHMoKS5hZGQod2luZG93KS5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5vbihvKyIgIityKyIgIitzLGZ1bmN0aW9uKHQpe2Eub3BlbmVkKCkmJmEucG9zaXRpb25Ecm9wZG93bigpfSl9KX0sY2xvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLm9wZW5lZCgpKXt2YXIgZT10aGlzLmNvbnRhaW5lckV2ZW50TmFtZSxuPSJzY3JvbGwuIitlLGk9InJlc2l6ZS4iK2Uscj0ib3JpZW50YXRpb25jaGFuZ2UuIitlO3RoaXMuY29udGFpbmVyLnBhcmVudHMoKS5hZGQod2luZG93KS5lYWNoKGZ1bmN0aW9uKCl7dCh0aGlzKS5vZmYobikub2ZmKGkpLm9mZihyKX0pLHRoaXMuY2xlYXJEcm9wZG93bkFsaWdubWVudFByZWZlcmVuY2UoKSx0KCIjc2VsZWN0Mi1kcm9wLW1hc2siKS5oaWRlKCksdGhpcy5kcm9wZG93bi5yZW1vdmVBdHRyKCJpZCIpLHRoaXMuZHJvcGRvd24uaGlkZSgpLHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWRyb3Bkb3duLW9wZW4iKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIiksdGhpcy5yZXN1bHRzLmVtcHR5KCksai5vZmYoIm1vdXNlbW92ZS5zZWxlY3QyRXZlbnQiKSx0aGlzLmNsZWFyU2VhcmNoKCksdGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWN0aXZlIiksdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih0LkV2ZW50KCJzZWxlY3QyLWNsb3NlIikpfX0sZXh0ZXJuYWxTZWFyY2g6ZnVuY3Rpb24odCl7dGhpcy5vcGVuKCksdGhpcy5zZWFyY2gudmFsKHQpLHRoaXMudXBkYXRlUmVzdWx0cyghMSl9LGNsZWFyU2VhcmNoOmZ1bmN0aW9uKCl7fSxnZXRNYXhpbXVtU2VsZWN0aW9uU2l6ZTpmdW5jdGlvbigpe3JldHVybiB4KHRoaXMub3B0cy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSx0aGlzLm9wdHMuZWxlbWVudCl9LGVuc3VyZUhpZ2hsaWdodFZpc2libGU6ZnVuY3Rpb24oKXt2YXIgZSxuLGkscixvLHMsYSxsLGM9dGhpcy5yZXN1bHRzO2lmKG49dGhpcy5oaWdobGlnaHQoKSwhKG48MCkpe2lmKDA9PW4pcmV0dXJuIHZvaWQgYy5zY3JvbGxUb3AoMCk7ZT10aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmZpbmQoIi5zZWxlY3QyLXJlc3VsdC1sYWJlbCIpLGk9dChlW25dKSxsPShpLm9mZnNldCgpfHx7fSkudG9wfHwwLHI9bCtpLm91dGVySGVpZ2h0KCEwKSxuPT09ZS5sZW5ndGgtMSYmKGE9Yy5maW5kKCJsaS5zZWxlY3QyLW1vcmUtcmVzdWx0cyIpLGEubGVuZ3RoPjAmJihyPWEub2Zmc2V0KCkudG9wK2Eub3V0ZXJIZWlnaHQoITApKSksbz1jLm9mZnNldCgpLnRvcCtjLm91dGVySGVpZ2h0KCEwKSxyPm8mJmMuc2Nyb2xsVG9wKGMuc2Nyb2xsVG9wKCkrKHItbykpLHM9bC1jLm9mZnNldCgpLnRvcCxzPDAmJiJub25lIiE9aS5jc3MoImRpc3BsYXkiKSYmYy5zY3JvbGxUb3AoYy5zY3JvbGxUb3AoKStzKX19LGZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdHMuZmluZCgiLnNlbGVjdDItcmVzdWx0LXNlbGVjdGFibGU6bm90KC5zZWxlY3QyLWRpc2FibGVkKTpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIil9LG1vdmVIaWdobGlnaHQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCksaT10aGlzLmhpZ2hsaWdodCgpO2k+LTEmJmk8bi5sZW5ndGg7KXtpKz1lO3ZhciByPXQobltpXSk7aWYoci5oYXNDbGFzcygic2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpJiYhci5oYXNDbGFzcygic2VsZWN0Mi1kaXNhYmxlZCIpJiYhci5oYXNDbGFzcygic2VsZWN0Mi1zZWxlY3RlZCIpKXt0aGlzLmhpZ2hsaWdodChpKTticmVha319fSxoaWdobGlnaHQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPXRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCk7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3Moci5maWx0ZXIoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIilbMF0sci5nZXQoKSk6KGU+PXIubGVuZ3RoJiYoZT1yLmxlbmd0aC0xKSxlPDAmJihlPTApLHRoaXMucmVtb3ZlSGlnaGxpZ2h0KCksbj10KHJbZV0pLG4uYWRkQ2xhc3MoInNlbGVjdDItaGlnaGxpZ2h0ZWQiKSx0aGlzLnNlYXJjaC5hdHRyKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLG4uZmluZCgiLnNlbGVjdDItcmVzdWx0LWxhYmVsIikuYXR0cigiaWQiKSksdGhpcy5lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCksdGhpcy5saXZlUmVnaW9uLnRleHQobi50ZXh0KCkpLGk9bi5kYXRhKCJzZWxlY3QyLWRhdGEiKSx2b2lkKGkmJnRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItaGlnaGxpZ2h0Iix2YWw6dGhpcy5pZChpKSxjaG9pY2U6aX0pKSl9LHJlbW92ZUhpZ2hsaWdodDpmdW5jdGlvbigpe3RoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1oaWdobGlnaHRlZCIpLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWhpZ2hsaWdodGVkIil9LHRvdWNoTW92ZWQ6ZnVuY3Rpb24oKXt0aGlzLl90b3VjaE1vdmVkPSEwfSxjbGVhclRvdWNoTW92ZWQ6ZnVuY3Rpb24oKXt0aGlzLl90b3VjaE1vdmVkPSExfSxjb3VudFNlbGVjdGFibGVSZXN1bHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCkubGVuZ3RofSxoaWdobGlnaHRVbmRlckV2ZW50OmZ1bmN0aW9uKGUpe3ZhciBuPXQoZS50YXJnZXQpLmNsb3Nlc3QoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIik7aWYobi5sZW5ndGg+MCYmIW4uaXMoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIikpe3ZhciBpPXRoaXMuZmluZEhpZ2hsaWdodGFibGVDaG9pY2VzKCk7dGhpcy5oaWdobGlnaHQoaS5pbmRleChuKSl9ZWxzZSAwPT1uLmxlbmd0aCYmdGhpcy5yZW1vdmVIaWdobGlnaHQoKX0sbG9hZE1vcmVJZk5lZWRlZDpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5yZXN1bHRzLG49ZS5maW5kKCJsaS5zZWxlY3QyLW1vcmUtcmVzdWx0cyIpLGk9dGhpcy5yZXN1bHRzUGFnZSsxLHI9dGhpcyxvPXRoaXMuc2VhcmNoLnZhbCgpLHM9dGhpcy5jb250ZXh0OzAhPT1uLmxlbmd0aCYmKHQ9bi5vZmZzZXQoKS50b3AtZS5vZmZzZXQoKS50b3AtZS5oZWlnaHQoKSx0PD10aGlzLm9wdHMubG9hZE1vcmVQYWRkaW5nJiYobi5hZGRDbGFzcygic2VsZWN0Mi1hY3RpdmUiKSx0aGlzLm9wdHMucXVlcnkoe2VsZW1lbnQ6dGhpcy5vcHRzLmVsZW1lbnQsdGVybTpvLHBhZ2U6aSxjb250ZXh0OnMsbWF0Y2hlcjp0aGlzLm9wdHMubWF0Y2hlcixjYWxsYmFjazp0aGlzLmJpbmQoZnVuY3Rpb24odCl7ci5vcGVuZWQoKSYmKHIub3B0cy5wb3B1bGF0ZVJlc3VsdHMuY2FsbCh0aGlzLGUsdC5yZXN1bHRzLHt0ZXJtOm8scGFnZTppLGNvbnRleHQ6c30pLHIucG9zdHByb2Nlc3NSZXN1bHRzKHQsITEsITEpLHQubW9yZT09PSEwPyhuLmRldGFjaCgpLmFwcGVuZFRvKGUpLnRleHQoeChyLm9wdHMuZm9ybWF0TG9hZE1vcmUsci5vcHRzLmVsZW1lbnQsaSsxKSksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmxvYWRNb3JlSWZOZWVkZWQoKX0sMTApKTpuLnJlbW92ZSgpLHIucG9zaXRpb25Ecm9wZG93bigpLHIucmVzdWx0c1BhZ2U9aSxyLmNvbnRleHQ9dC5jb250ZXh0LHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItbG9hZGVkIixpdGVtczp0fSkpfSl9KSkpfSx0b2tlbml6ZTpmdW5jdGlvbigpe30sdXBkYXRlUmVzdWx0czpmdW5jdGlvbihlKXtmdW5jdGlvbiBpKCl7Yy5yZW1vdmVDbGFzcygic2VsZWN0Mi1hY3RpdmUiKSxoLnBvc2l0aW9uRHJvcGRvd24oKSx1LmZpbmQoIi5zZWxlY3QyLW5vLXJlc3VsdHMsLnNlbGVjdDItc2VsZWN0aW9uLWxpbWl0LC5zZWxlY3QyLXNlYXJjaGluZyIpLmxlbmd0aD9oLmxpdmVSZWdpb24udGV4dCh1LnRleHQoKSk6aC5saXZlUmVnaW9uLnRleHQoaC5vcHRzLmZvcm1hdE1hdGNoZXModS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpLmxlbmd0aCkpfWZ1bmN0aW9uIHIodCl7dS5odG1sKHQpLGkoKX12YXIgbyxzLGEsYz10aGlzLnNlYXJjaCx1PXRoaXMucmVzdWx0cyxkPXRoaXMub3B0cyxoPXRoaXMscD1jLnZhbCgpLGY9dC5kYXRhKHRoaXMuY29udGFpbmVyLCJzZWxlY3QyLWxhc3QtdGVybSIpO2lmKChlPT09ITB8fCFmfHwhbChwLGYpKSYmKHQuZGF0YSh0aGlzLmNvbnRhaW5lciwic2VsZWN0Mi1sYXN0LXRlcm0iLHApLGU9PT0hMHx8dGhpcy5zaG93U2VhcmNoSW5wdXQhPT0hMSYmdGhpcy5vcGVuZWQoKSkpe2E9Kyt0aGlzLnF1ZXJ5Q291bnQ7dmFyIG09dGhpcy5nZXRNYXhpbXVtU2VsZWN0aW9uU2l6ZSgpO2lmKG0+PTEmJihvPXRoaXMuZGF0YSgpLHQuaXNBcnJheShvKSYmby5sZW5ndGg+PW0mJkwoZC5mb3JtYXRTZWxlY3Rpb25Ub29CaWcsImZvcm1hdFNlbGVjdGlvblRvb0JpZyIpKSlyZXR1cm4gdm9pZCByKCI8bGkgY2xhc3M9J3NlbGVjdDItc2VsZWN0aW9uLWxpbWl0Jz4iK3goZC5mb3JtYXRTZWxlY3Rpb25Ub29CaWcsZC5lbGVtZW50LG0pKyI8L2xpPiIpO2lmKGMudmFsKCkubGVuZ3RoPGQubWluaW11bUlucHV0TGVuZ3RoKXJldHVybiByKEwoZC5mb3JtYXRJbnB1dFRvb1Nob3J0LCJmb3JtYXRJbnB1dFRvb1Nob3J0Iik/IjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK3goZC5mb3JtYXRJbnB1dFRvb1Nob3J0LGQuZWxlbWVudCxjLnZhbCgpLGQubWluaW11bUlucHV0TGVuZ3RoKSsiPC9saT4iOiIiKSx2b2lkKGUmJnRoaXMuc2hvd1NlYXJjaCYmdGhpcy5zaG93U2VhcmNoKCEwKSk7aWYoZC5tYXhpbXVtSW5wdXRMZW5ndGgmJmMudmFsKCkubGVuZ3RoPmQubWF4aW11bUlucHV0TGVuZ3RoKXJldHVybiB2b2lkIHIoTChkLmZvcm1hdElucHV0VG9vTG9uZywiZm9ybWF0SW5wdXRUb29Mb25nIik/IjxsaSBjbGFzcz0nc2VsZWN0Mi1uby1yZXN1bHRzJz4iK3goZC5mb3JtYXRJbnB1dFRvb0xvbmcsZC5lbGVtZW50LGMudmFsKCksZC5tYXhpbXVtSW5wdXRMZW5ndGgpKyI8L2xpPiI6IiIpO2QuZm9ybWF0U2VhcmNoaW5nJiYwPT09dGhpcy5maW5kSGlnaGxpZ2h0YWJsZUNob2ljZXMoKS5sZW5ndGgmJnIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2hpbmcnPiIreChkLmZvcm1hdFNlYXJjaGluZyxkLmVsZW1lbnQpKyI8L2xpPiIpLGMuYWRkQ2xhc3MoInNlbGVjdDItYWN0aXZlIiksdGhpcy5yZW1vdmVIaWdobGlnaHQoKSxzPXRoaXMudG9rZW5pemUoKSxzIT1uJiZudWxsIT1zJiZjLnZhbChzKSx0aGlzLnJlc3VsdHNQYWdlPTEsZC5xdWVyeSh7ZWxlbWVudDpkLmVsZW1lbnQsdGVybTpjLnZhbCgpLHBhZ2U6dGhpcy5yZXN1bHRzUGFnZSxjb250ZXh0Om51bGwsbWF0Y2hlcjpkLm1hdGNoZXIsY2FsbGJhY2s6dGhpcy5iaW5kKGZ1bmN0aW9uKG8pe3ZhciBzO2lmKGE9PXRoaXMucXVlcnlDb3VudCl7aWYoIXRoaXMub3BlbmVkKCkpcmV0dXJuIHZvaWQgdGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWN0aXZlIik7aWYoby5oYXNFcnJvciE9PW4mJkwoZC5mb3JtYXRBamF4RXJyb3IsImZvcm1hdEFqYXhFcnJvciIpKXJldHVybiB2b2lkIHIoIjxsaSBjbGFzcz0nc2VsZWN0Mi1hamF4LWVycm9yJz4iK3goZC5mb3JtYXRBamF4RXJyb3IsZC5lbGVtZW50LG8uanFYSFIsby50ZXh0U3RhdHVzLG8uZXJyb3JUaHJvd24pKyI8L2xpPiIpO2lmKHRoaXMuY29udGV4dD1vLmNvbnRleHQ9PT1uP251bGw6by5jb250ZXh0LHRoaXMub3B0cy5jcmVhdGVTZWFyY2hDaG9pY2UmJiIiIT09Yy52YWwoKSYmKHM9dGhpcy5vcHRzLmNyZWF0ZVNlYXJjaENob2ljZS5jYWxsKGgsYy52YWwoKSxvLnJlc3VsdHMpLHMhPT1uJiZudWxsIT09cyYmaC5pZChzKSE9PW4mJm51bGwhPT1oLmlkKHMpJiYwPT09dChvLnJlc3VsdHMpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBsKGguaWQodGhpcyksaC5pZChzKSl9KS5sZW5ndGgmJnRoaXMub3B0cy5jcmVhdGVTZWFyY2hDaG9pY2VQb3NpdGlvbihvLnJlc3VsdHMscykpLDA9PT1vLnJlc3VsdHMubGVuZ3RoJiZMKGQuZm9ybWF0Tm9NYXRjaGVzLCJmb3JtYXROb01hdGNoZXMiKSlyZXR1cm4gdm9pZCByKCI8bGkgY2xhc3M9J3NlbGVjdDItbm8tcmVzdWx0cyc+Iit4KGQuZm9ybWF0Tm9NYXRjaGVzLGQuZWxlbWVudCxjLnZhbCgpKSsiPC9saT4iKTt1LmVtcHR5KCksaC5vcHRzLnBvcHVsYXRlUmVzdWx0cy5jYWxsKHRoaXMsdSxvLnJlc3VsdHMse3Rlcm06Yy52YWwoKSxwYWdlOnRoaXMucmVzdWx0c1BhZ2UsY29udGV4dDpudWxsfSksby5tb3JlPT09ITAmJkwoZC5mb3JtYXRMb2FkTW9yZSwiZm9ybWF0TG9hZE1vcmUiKSYmKHUuYXBwZW5kKCI8bGkgY2xhc3M9J3NlbGVjdDItbW9yZS1yZXN1bHRzJz4iK2QuZXNjYXBlTWFya3VwKHgoZC5mb3JtYXRMb2FkTW9yZSxkLmVsZW1lbnQsdGhpcy5yZXN1bHRzUGFnZSkpKyI8L2xpPiIpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aC5sb2FkTW9yZUlmTmVlZGVkKCl9LDEwKSksdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMobyxlKSxpKCksdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih7dHlwZToic2VsZWN0Mi1sb2FkZWQiLGl0ZW1zOm99KX19KX0pfX0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5vcHRzLnNlbGVjdE9uQmx1ciYmdGhpcy5zZWxlY3RIaWdobGlnaHRlZCh7bm9Gb2N1czohMH0pLHRoaXMuY2xvc2UoKSx0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIiksdGhpcy5zZWFyY2hbMF09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiZ0aGlzLnNlYXJjaC5ibHVyKCksdGhpcy5jbGVhclNlYXJjaCgpLHRoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIil9LGZvY3VzU2VhcmNoOmZ1bmN0aW9uKCl7bSh0aGlzLnNlYXJjaCl9LHNlbGVjdEhpZ2hsaWdodGVkOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3RvdWNoTW92ZWQpcmV0dXJuIHZvaWQgdGhpcy5jbGVhclRvdWNoTW92ZWQoKTt2YXIgZT10aGlzLmhpZ2hsaWdodCgpLG49dGhpcy5yZXN1bHRzLmZpbmQoIi5zZWxlY3QyLWhpZ2hsaWdodGVkIiksaT1uLmNsb3Nlc3QoIi5zZWxlY3QyLXJlc3VsdCIpLmRhdGEoInNlbGVjdDItZGF0YSIpO2k/KHRoaXMuaGlnaGxpZ2h0KGUpLHRoaXMub25TZWxlY3QoaSx0KSk6dCYmdC5ub0ZvY3VzJiZ0aGlzLmNsb3NlKCl9LGdldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMub3B0cy5lbGVtZW50LmF0dHIoInBsYWNlaG9sZGVyIil8fHRoaXMub3B0cy5lbGVtZW50LmF0dHIoImRhdGEtcGxhY2Vob2xkZXIiKXx8dGhpcy5vcHRzLmVsZW1lbnQuZGF0YSgicGxhY2Vob2xkZXIiKXx8dGhpcy5vcHRzLnBsYWNlaG9sZGVyfHwoKHQ9dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpKSE9PW4/dC50ZXh0KCk6bil9LGdldFBsYWNlaG9sZGVyT3B0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5zZWxlY3Qpe3ZhciBlPXRoaXMuc2VsZWN0LmNoaWxkcmVuKCJvcHRpb24iKS5maXJzdCgpO2lmKHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbiE9PW4pcmV0dXJuImZpcnN0Ij09PXRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbiYmZXx8ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub3B0cy5wbGFjZWhvbGRlck9wdGlvbiYmdGhpcy5vcHRzLnBsYWNlaG9sZGVyT3B0aW9uKHRoaXMuc2VsZWN0KTtpZigiIj09PXQudHJpbShlLnRleHQoKSkmJiIiPT09ZS52YWwoKSlyZXR1cm4gZX19LGluaXRDb250YWluZXJXaWR0aDpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZSxpLHIsbyxzLGE7aWYoIm9mZiI9PT10aGlzLm9wdHMud2lkdGgpcmV0dXJuIG51bGw7aWYoImVsZW1lbnQiPT09dGhpcy5vcHRzLndpZHRoKXJldHVybiAwPT09dGhpcy5vcHRzLmVsZW1lbnQub3V0ZXJXaWR0aCghMSk/ImF1dG8iOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoITEpKyJweCI7aWYoImNvcHkiPT09dGhpcy5vcHRzLndpZHRofHwicmVzb2x2ZSI9PT10aGlzLm9wdHMud2lkdGgpe2lmKGU9dGhpcy5vcHRzLmVsZW1lbnQuYXR0cigic3R5bGUiKSxlIT09bilmb3IoaT1lLnNwbGl0KCI7Iiksbz0wLHM9aS5sZW5ndGg7bzxzO28rPTEpaWYoYT1pW29dLnJlcGxhY2UoL1xzL2csIiIpLHI9YS5tYXRjaCgvXndpZHRoOigoWy0rXT8oWzAtOV0qXC4pP1swLTldKykocHh8ZW18ZXh8JXxpbnxjbXxtbXxwdHxwYykpL2kpLG51bGwhPT1yJiZyLmxlbmd0aD49MSlyZXR1cm4gclsxXTtyZXR1cm4icmVzb2x2ZSI9PT10aGlzLm9wdHMud2lkdGg/KGU9dGhpcy5vcHRzLmVsZW1lbnQuY3NzKCJ3aWR0aCIpLGUuaW5kZXhPZigiJSIpPjA/ZTowPT09dGhpcy5vcHRzLmVsZW1lbnQub3V0ZXJXaWR0aCghMSk/ImF1dG8iOnRoaXMub3B0cy5lbGVtZW50Lm91dGVyV2lkdGgoITEpKyJweCIpOm51bGx9cmV0dXJuIHQuaXNGdW5jdGlvbih0aGlzLm9wdHMud2lkdGgpP3RoaXMub3B0cy53aWR0aCgpOnRoaXMub3B0cy53aWR0aH12YXIgaT1lLmNhbGwodGhpcyk7bnVsbCE9PWkmJnRoaXMuY29udGFpbmVyLmNzcygid2lkdGgiLGkpfX0pLFA9QyhPLHtjcmVhdGVDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgZT10KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5hdHRyKHsiY2xhc3MiOiJzZWxlY3QyLWNvbnRhaW5lciJ9KS5odG1sKFsiPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJyBjbGFzcz0nc2VsZWN0Mi1jaG9pY2UnIHRhYmluZGV4PSctMSc+IiwiICAgPHNwYW4gY2xhc3M9J3NlbGVjdDItY2hvc2VuJz4mIzE2MDs8L3NwYW4+PGFiYnIgY2xhc3M9J3NlbGVjdDItc2VhcmNoLWNob2ljZS1jbG9zZSc+PC9hYmJyPiIsIiAgIDxzcGFuIGNsYXNzPSdzZWxlY3QyLWFycm93JyByb2xlPSdwcmVzZW50YXRpb24nPjxiIHJvbGU9J3ByZXNlbnRhdGlvbic+PC9iPjwvc3Bhbj4iLCI8L2E+IiwiPGxhYmVsIGZvcj0nJyBjbGFzcz0nc2VsZWN0Mi1vZmZzY3JlZW4nPjwvbGFiZWw+IiwiPGlucHV0IGNsYXNzPSdzZWxlY3QyLWZvY3Vzc2VyIHNlbGVjdDItb2Zmc2NyZWVuJyB0eXBlPSd0ZXh0JyBhcmlhLWhhc3BvcHVwPSd0cnVlJyByb2xlPSdidXR0b24nIC8+IiwiPGRpdiBjbGFzcz0nc2VsZWN0Mi1kcm9wIHNlbGVjdDItZGlzcGxheS1ub25lJz4iLCIgICA8ZGl2IGNsYXNzPSdzZWxlY3QyLXNlYXJjaCc+IiwiICAgICAgIDxsYWJlbCBmb3I9JycgY2xhc3M9J3NlbGVjdDItb2Zmc2NyZWVuJz48L2xhYmVsPiIsIiAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgYXV0b2NvbXBsZXRlPSdvZmYnIGF1dG9jb3JyZWN0PSdvZmYnIGF1dG9jYXBpdGFsaXplPSdvZmYnIHNwZWxsY2hlY2s9J2ZhbHNlJyBjbGFzcz0nc2VsZWN0Mi1pbnB1dCcgcm9sZT0nY29tYm9ib3gnIGFyaWEtZXhwYW5kZWQ9J3RydWUnIiwiICAgICAgIGFyaWEtYXV0b2NvbXBsZXRlPSdsaXN0JyAvPiIsIiAgIDwvZGl2PiIsIiAgIDx1bCBjbGFzcz0nc2VsZWN0Mi1yZXN1bHRzJyByb2xlPSdsaXN0Ym94Jz4iLCIgICA8L3VsPiIsIjwvZGl2PiJdLmpvaW4oIiIpKTtyZXR1cm4gZX0sZW5hYmxlSW50ZXJmYWNlOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQuZW5hYmxlSW50ZXJmYWNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmdGhpcy5mb2N1c3Nlci5wcm9wKCJkaXNhYmxlZCIsIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpfSxvcGVuaW5nOmZ1bmN0aW9uKCl7dmFyIGUsaSxyO3RoaXMub3B0cy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaD49MCYmdGhpcy5zaG93U2VhcmNoKCEwKSx0aGlzLnBhcmVudC5vcGVuaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnNob3dTZWFyY2hJbnB1dCE9PSExJiZ0aGlzLnNlYXJjaC52YWwodGhpcy5mb2N1c3Nlci52YWwoKSksdGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykmJih0aGlzLnNlYXJjaC5mb2N1cygpLGU9dGhpcy5zZWFyY2guZ2V0KDApLGUuY3JlYXRlVGV4dFJhbmdlPyhpPWUuY3JlYXRlVGV4dFJhbmdlKCksaS5jb2xsYXBzZSghMSksaS5zZWxlY3QoKSk6ZS5zZXRTZWxlY3Rpb25SYW5nZSYmKHI9dGhpcy5zZWFyY2gudmFsKCkubGVuZ3RoLGUuc2V0U2VsZWN0aW9uUmFuZ2UocixyKSkpLCIiPT09dGhpcy5zZWFyY2gudmFsKCkmJnRoaXMubmV4dFNlYXJjaFRlcm0hPW4mJih0aGlzLnNlYXJjaC52YWwodGhpcy5uZXh0U2VhcmNoVGVybSksdGhpcy5zZWFyY2guc2VsZWN0KCkpLHRoaXMuZm9jdXNzZXIucHJvcCgiZGlzYWJsZWQiLCEwKS52YWwoIiIpLHRoaXMudXBkYXRlUmVzdWx0cyghMCksdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih0LkV2ZW50KCJzZWxlY3QyLW9wZW4iKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vcGVuZWQoKSYmKHRoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIiwhMSksdGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykmJnRoaXMuZm9jdXNzZXIuZm9jdXMoKSl9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5vcGVuZWQoKT90aGlzLmNsb3NlKCk6KHRoaXMuZm9jdXNzZXIucHJvcCgiZGlzYWJsZWQiLCExKSx0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSYmdGhpcy5mb2N1c3Nlci5mb2N1cygpKX0saXNGb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQuY2FuY2VsLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmZvY3Vzc2VyLnByb3AoImRpc2FibGVkIiwhMSksdGhpcy5vcHRzLnNob3VsZEZvY3VzSW5wdXQodGhpcykmJnRoaXMuZm9jdXNzZXIuZm9jdXMoKX0sZGVzdHJveTpmdW5jdGlvbigpe3QoImxhYmVsW2Zvcj0nIit0aGlzLmZvY3Vzc2VyLmF0dHIoImlkIikrIiddIikuYXR0cigiZm9yIix0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJpZCIpKSx0aGlzLnBhcmVudC5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxELmNhbGwodGhpcywic2VsZWN0aW9uIiwiZm9jdXNzZXIiKX0saW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBlLG4scj10aGlzLmNvbnRhaW5lcixvPXRoaXMuZHJvcGRvd24scz1JKCk7dGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPDA/dGhpcy5zaG93U2VhcmNoKCExKTp0aGlzLnNob3dTZWFyY2goITApLHRoaXMuc2VsZWN0aW9uPWU9ci5maW5kKCIuc2VsZWN0Mi1jaG9pY2UiKSx0aGlzLmZvY3Vzc2VyPXIuZmluZCgiLnNlbGVjdDItZm9jdXNzZXIiKSxlLmZpbmQoIi5zZWxlY3QyLWNob3NlbiIpLmF0dHIoImlkIiwic2VsZWN0Mi1jaG9zZW4tIitzKSx0aGlzLmZvY3Vzc2VyLmF0dHIoImFyaWEtbGFiZWxsZWRieSIsInNlbGVjdDItY2hvc2VuLSIrcyksdGhpcy5yZXN1bHRzLmF0dHIoImlkIiwic2VsZWN0Mi1yZXN1bHRzLSIrcyksdGhpcy5zZWFyY2guYXR0cigiYXJpYS1vd25zIiwic2VsZWN0Mi1yZXN1bHRzLSIrcyksdGhpcy5mb2N1c3Nlci5hdHRyKCJpZCIsInMyaWRfYXV0b2dlbiIrcyksbj10KCJsYWJlbFtmb3I9JyIrdGhpcy5vcHRzLmVsZW1lbnQuYXR0cigiaWQiKSsiJ10iKSx0aGlzLmZvY3Vzc2VyLnByZXYoKS50ZXh0KG4udGV4dCgpKS5hdHRyKCJmb3IiLHRoaXMuZm9jdXNzZXIuYXR0cigiaWQiKSk7dmFyIGE9dGhpcy5vcHRzLmVsZW1lbnQuYXR0cigidGl0bGUiKTt0aGlzLm9wdHMuZWxlbWVudC5hdHRyKCJ0aXRsZSIsYXx8bi50ZXh0KCkpLHRoaXMuZm9jdXNzZXIuYXR0cigidGFiaW5kZXgiLHRoaXMuZWxlbWVudFRhYkluZGV4KSx0aGlzLnNlYXJjaC5hdHRyKCJpZCIsdGhpcy5mb2N1c3Nlci5hdHRyKCJpZCIpKyJfc2VhcmNoIiksdGhpcy5zZWFyY2gucHJldigpLnRleHQodCgibGFiZWxbZm9yPSciK3RoaXMuZm9jdXNzZXIuYXR0cigiaWQiKSsiJ10iKS50ZXh0KCkpLmF0dHIoImZvciIsdGhpcy5zZWFyY2guYXR0cigiaWQiKSksdGhpcy5zZWFyY2gub24oImtleWRvd24iLHRoaXMuYmluZChmdW5jdGlvbih0KXtpZih0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpJiYyMjkhPXQua2V5Q29kZSl7aWYodC53aGljaD09PVkuUEFHRV9VUHx8dC53aGljaD09PVkuUEFHRV9ET1dOKXJldHVybiB2b2lkIGcodCk7c3dpdGNoKHQud2hpY2gpe2Nhc2UgWS5VUDpjYXNlIFkuRE9XTjpyZXR1cm4gdGhpcy5tb3ZlSGlnaGxpZ2h0KHQud2hpY2g9PT1ZLlVQPy0xOjEpLHZvaWQgZyh0KTtjYXNlIFkuRU5URVI6cmV0dXJuIHRoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoKSx2b2lkIGcodCk7Y2FzZSBZLlRBQjpyZXR1cm4gdm9pZCB0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKHtub0ZvY3VzOiEwfSk7Y2FzZSBZLkVTQzpyZXR1cm4gdGhpcy5jYW5jZWwodCksdm9pZCBnKHQpfX19KSksdGhpcy5zZWFyY2gub24oImJsdXIiLHRoaXMuYmluZChmdW5jdGlvbih0KXtkb2N1bWVudC5hY3RpdmVFbGVtZW50PT09dGhpcy5ib2R5LmdldCgwKSYmd2luZG93LnNldFRpbWVvdXQodGhpcy5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5vcGVuZWQoKSYmdGhpcy5zZWFyY2guZm9jdXMoKX0pLDApfSkpLHRoaXMuZm9jdXNzZXIub24oImtleWRvd24iLHRoaXMuYmluZChmdW5jdGlvbih0KXtpZih0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpJiZ0LndoaWNoIT09WS5UQUImJiFZLmlzQ29udHJvbCh0KSYmIVkuaXNGdW5jdGlvbktleSh0KSYmdC53aGljaCE9PVkuRVNDKXtpZih0aGlzLm9wdHMub3Blbk9uRW50ZXI9PT0hMSYmdC53aGljaD09PVkuRU5URVIpcmV0dXJuIHZvaWQgZyh0KTtpZih0LndoaWNoPT1ZLkRPV058fHQud2hpY2g9PVkuVVB8fHQud2hpY2g9PVkuRU5URVImJnRoaXMub3B0cy5vcGVuT25FbnRlcil7aWYodC5hbHRLZXl8fHQuY3RybEtleXx8dC5zaGlmdEtleXx8dC5tZXRhS2V5KXJldHVybjtyZXR1cm4gdGhpcy5vcGVuKCksdm9pZCBnKHQpfXJldHVybiB0LndoaWNoPT1ZLkRFTEVURXx8dC53aGljaD09WS5CQUNLU1BBQ0U/KHRoaXMub3B0cy5hbGxvd0NsZWFyJiZ0aGlzLmNsZWFyKCksdm9pZCBnKHQpKTp2b2lkIDB9fSkpLGQodGhpcy5mb2N1c3NlciksdGhpcy5mb2N1c3Nlci5vbigia2V5dXAtY2hhbmdlIGlucHV0Iix0aGlzLmJpbmQoZnVuY3Rpb24odCl7aWYodGhpcy5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPj0wKXtpZih0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMub3BlbmVkKCkpcmV0dXJuO3RoaXMub3BlbigpfX0pKSxlLm9uKCJtb3VzZWRvd24gdG91Y2hzdGFydCIsImFiYnIiLHRoaXMuYmluZChmdW5jdGlvbih0KXt0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpJiYodGhpcy5jbGVhcigpLHYodCksdGhpcy5jbG9zZSgpLHRoaXMuc2VsZWN0aW9uLmZvY3VzKCkpfSkpLGUub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0Iix0aGlzLmJpbmQoZnVuY3Rpb24obil7aShlKSx0aGlzLmNvbnRhaW5lci5oYXNDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIil8fHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIodC5FdmVudCgic2VsZWN0Mi1mb2N1cyIpKSx0aGlzLm9wZW5lZCgpP3RoaXMuY2xvc2UoKTp0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpJiZ0aGlzLm9wZW4oKSxnKG4pfSkpLG8ub24oIm1vdXNlZG93biB0b3VjaHN0YXJ0Iix0aGlzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLm9wdHMuc2hvdWxkRm9jdXNJbnB1dCh0aGlzKSYmdGhpcy5zZWFyY2guZm9jdXMoKX0pKSxlLm9uKCJmb2N1cyIsdGhpcy5iaW5kKGZ1bmN0aW9uKHQpe2codCl9KSksdGhpcy5mb2N1c3Nlci5vbigiZm9jdXMiLHRoaXMuYmluZChmdW5jdGlvbigpe3RoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKXx8dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih0LkV2ZW50KCJzZWxlY3QyLWZvY3VzIikpLHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKX0pKS5vbigiYmx1ciIsdGhpcy5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5vcGVuZWQoKXx8KHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKSx0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHQuRXZlbnQoInNlbGVjdDItYmx1ciIpKSl9KSksdGhpcy5zZWFyY2gub24oImZvY3VzIix0aGlzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLmNvbnRhaW5lci5oYXNDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIil8fHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIodC5FdmVudCgic2VsZWN0Mi1mb2N1cyIpKSx0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIil9KSksdGhpcy5pbml0Q29udGFpbmVyV2lkdGgoKSx0aGlzLm9wdHMuZWxlbWVudC5hZGRDbGFzcygic2VsZWN0Mi1vZmZzY3JlZW4iKSx0aGlzLnNldFBsYWNlaG9sZGVyKCk7Cgl9LGNsZWFyOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuc2VsZWN0aW9uLmRhdGEoInNlbGVjdDItZGF0YSIpO2lmKG4pe3ZhciBpPXQuRXZlbnQoInNlbGVjdDItY2xlYXJpbmciKTtpZih0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO3ZhciByPXRoaXMuZ2V0UGxhY2Vob2xkZXJPcHRpb24oKTt0aGlzLm9wdHMuZWxlbWVudC52YWwocj9yLnZhbCgpOiIiKSx0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1jaG9zZW4iKS5lbXB0eSgpLHRoaXMuc2VsZWN0aW9uLnJlbW92ZURhdGEoInNlbGVjdDItZGF0YSIpLHRoaXMuc2V0UGxhY2Vob2xkZXIoKSxlIT09ITEmJih0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHt0eXBlOiJzZWxlY3QyLXJlbW92ZWQiLHZhbDp0aGlzLmlkKG4pLGNob2ljZTpufSksdGhpcy50cmlnZ2VyQ2hhbmdlKHtyZW1vdmVkOm59KSl9fSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1BsYWNlaG9sZGVyT3B0aW9uU2VsZWN0ZWQoKSl0aGlzLnVwZGF0ZVNlbGVjdGlvbihudWxsKSx0aGlzLmNsb3NlKCksdGhpcy5zZXRQbGFjZWhvbGRlcigpO2Vsc2V7dmFyIHQ9dGhpczt0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbi5jYWxsKG51bGwsdGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oZSl7ZSE9PW4mJm51bGwhPT1lJiYodC51cGRhdGVTZWxlY3Rpb24oZSksdC5jbG9zZSgpLHQuc2V0UGxhY2Vob2xkZXIoKSx0Lm5leHRTZWFyY2hUZXJtPXQub3B0cy5uZXh0U2VhcmNoVGVybShlLHQuc2VhcmNoLnZhbCgpKSl9KX19LGlzUGxhY2Vob2xkZXJPcHRpb25TZWxlY3RlZDpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLmdldFBsYWNlaG9sZGVyKCkhPT1uJiYoKHQ9dGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpKSE9PW4mJnQucHJvcCgic2VsZWN0ZWQiKXx8IiI9PT10aGlzLm9wdHMuZWxlbWVudC52YWwoKXx8dGhpcy5vcHRzLmVsZW1lbnQudmFsKCk9PT1ufHxudWxsPT09dGhpcy5vcHRzLmVsZW1lbnQudmFsKCkpfSxwcmVwYXJlT3B0czpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyZW50LnByZXBhcmVPcHRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXRoaXM7cmV0dXJuInNlbGVjdCI9PT1lLmVsZW1lbnQuZ2V0KDApLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9lLmluaXRTZWxlY3Rpb249ZnVuY3Rpb24odCxlKXt2YXIgaT10LmZpbmQoIm9wdGlvbiIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkJiYhdGhpcy5kaXNhYmxlZH0pO2Uobi5vcHRpb25Ub0RhdGEoaSkpfToiZGF0YSJpbiBlJiYoZS5pbml0U2VsZWN0aW9uPWUuaW5pdFNlbGVjdGlvbnx8ZnVuY3Rpb24obixpKXt2YXIgcj1uLnZhbCgpLG89bnVsbDtlLnF1ZXJ5KHttYXRjaGVyOmZ1bmN0aW9uKHQsbixpKXt2YXIgcz1sKHIsZS5pZChpKSk7cmV0dXJuIHMmJihvPWkpLHN9LGNhbGxiYWNrOnQuaXNGdW5jdGlvbihpKT9mdW5jdGlvbigpe2kobyl9OnQubm9vcH0pfSksZX0sZ2V0UGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3QmJnRoaXMuZ2V0UGxhY2Vob2xkZXJPcHRpb24oKT09PW4/bjp0aGlzLnBhcmVudC5nZXRQbGFjZWhvbGRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldFBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRQbGFjZWhvbGRlcigpO2lmKHRoaXMuaXNQbGFjZWhvbGRlck9wdGlvblNlbGVjdGVkKCkmJnQhPT1uKXtpZih0aGlzLnNlbGVjdCYmdGhpcy5nZXRQbGFjZWhvbGRlck9wdGlvbigpPT09bilyZXR1cm47dGhpcy5zZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItY2hvc2VuIikuaHRtbCh0aGlzLm9wdHMuZXNjYXBlTWFya3VwKHQpKSx0aGlzLnNlbGVjdGlvbi5hZGRDbGFzcygic2VsZWN0Mi1kZWZhdWx0IiksdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoInNlbGVjdDItYWxsb3djbGVhciIpfX0scG9zdHByb2Nlc3NSZXN1bHRzOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0wLHI9dGhpcztpZih0aGlzLmZpbmRIaWdobGlnaHRhYmxlQ2hvaWNlcygpLmVhY2gyKGZ1bmN0aW9uKHQsZSl7aWYobChyLmlkKGUuZGF0YSgic2VsZWN0Mi1kYXRhIikpLHIub3B0cy5lbGVtZW50LnZhbCgpKSlyZXR1cm4gaT10LCExfSksbiE9PSExJiYoZT09PSEwJiZpPj0wP3RoaXMuaGlnaGxpZ2h0KGkpOnRoaXMuaGlnaGxpZ2h0KDApKSxlPT09ITApe3ZhciBvPXRoaXMub3B0cy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaDtvPj0wJiZ0aGlzLnNob3dTZWFyY2goQSh0LnJlc3VsdHMpPj1vKX19LHNob3dTZWFyY2g6ZnVuY3Rpb24oZSl7dGhpcy5zaG93U2VhcmNoSW5wdXQhPT1lJiYodGhpcy5zaG93U2VhcmNoSW5wdXQ9ZSx0aGlzLmRyb3Bkb3duLmZpbmQoIi5zZWxlY3QyLXNlYXJjaCIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1oaWRkZW4iLCFlKSx0aGlzLmRyb3Bkb3duLmZpbmQoIi5zZWxlY3QyLXNlYXJjaCIpLnRvZ2dsZUNsYXNzKCJzZWxlY3QyLW9mZnNjcmVlbiIsIWUpLHQodGhpcy5kcm9wZG93bix0aGlzLmNvbnRhaW5lcikudG9nZ2xlQ2xhc3MoInNlbGVjdDItd2l0aC1zZWFyY2hib3giLGUpKX0sb25TZWxlY3Q6ZnVuY3Rpb24odCxlKXtpZih0aGlzLnRyaWdnZXJTZWxlY3QodCkpe3ZhciBuPXRoaXMub3B0cy5lbGVtZW50LnZhbCgpLGk9dGhpcy5kYXRhKCk7dGhpcy5vcHRzLmVsZW1lbnQudmFsKHRoaXMuaWQodCkpLHRoaXMudXBkYXRlU2VsZWN0aW9uKHQpLHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoe3R5cGU6InNlbGVjdDItc2VsZWN0ZWQiLHZhbDp0aGlzLmlkKHQpLGNob2ljZTp0fSksdGhpcy5uZXh0U2VhcmNoVGVybT10aGlzLm9wdHMubmV4dFNlYXJjaFRlcm0odCx0aGlzLnNlYXJjaC52YWwoKSksdGhpcy5jbG9zZSgpLGUmJmUubm9Gb2N1c3x8IXRoaXMub3B0cy5zaG91bGRGb2N1c0lucHV0KHRoaXMpfHx0aGlzLmZvY3Vzc2VyLmZvY3VzKCksbChuLHRoaXMuaWQodCkpfHx0aGlzLnRyaWdnZXJDaGFuZ2Uoe2FkZGVkOnQscmVtb3ZlZDppfSl9fSx1cGRhdGVTZWxlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGUsaSxyPXRoaXMuc2VsZWN0aW9uLmZpbmQoIi5zZWxlY3QyLWNob3NlbiIpO3RoaXMuc2VsZWN0aW9uLmRhdGEoInNlbGVjdDItZGF0YSIsdCksci5lbXB0eSgpLG51bGwhPT10JiYoZT10aGlzLm9wdHMuZm9ybWF0U2VsZWN0aW9uKHQscix0aGlzLm9wdHMuZXNjYXBlTWFya3VwKSksZSE9PW4mJnIuYXBwZW5kKGUpLGk9dGhpcy5vcHRzLmZvcm1hdFNlbGVjdGlvbkNzc0NsYXNzKHQsciksaSE9PW4mJnIuYWRkQ2xhc3MoaSksdGhpcy5zZWxlY3Rpb24ucmVtb3ZlQ2xhc3MoInNlbGVjdDItZGVmYXVsdCIpLHRoaXMub3B0cy5hbGxvd0NsZWFyJiZ0aGlzLmdldFBsYWNlaG9sZGVyKCkhPT1uJiZ0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygic2VsZWN0Mi1hbGxvd2NsZWFyIil9LHZhbDpmdW5jdGlvbiBXKCl7dmFyIFcsdD0hMSxlPW51bGwsaT10aGlzLHI9dGhpcy5kYXRhKCk7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMub3B0cy5lbGVtZW50LnZhbCgpO2lmKFc9YXJndW1lbnRzWzBdLGFyZ3VtZW50cy5sZW5ndGg+MSYmKHQ9YXJndW1lbnRzWzFdKSx0aGlzLnNlbGVjdCl0aGlzLnNlbGVjdC52YWwoVykuZmluZCgib3B0aW9uIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWR9KS5lYWNoMihmdW5jdGlvbih0LG4pe3JldHVybiBlPWkub3B0aW9uVG9EYXRhKG4pLCExfSksdGhpcy51cGRhdGVTZWxlY3Rpb24oZSksdGhpcy5zZXRQbGFjZWhvbGRlcigpLHQmJnRoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6ZSxyZW1vdmVkOnJ9KTtlbHNle2lmKCFXJiYwIT09VylyZXR1cm4gdm9pZCB0aGlzLmNsZWFyKHQpO2lmKHRoaXMub3B0cy5pbml0U2VsZWN0aW9uPT09bil0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBjYWxsIHZhbCgpIGlmIGluaXRTZWxlY3Rpb24oKSBpcyBub3QgZGVmaW5lZCIpO3RoaXMub3B0cy5lbGVtZW50LnZhbChXKSx0aGlzLm9wdHMuaW5pdFNlbGVjdGlvbih0aGlzLm9wdHMuZWxlbWVudCxmdW5jdGlvbihlKXtpLm9wdHMuZWxlbWVudC52YWwoZT9pLmlkKGUpOiIiKSxpLnVwZGF0ZVNlbGVjdGlvbihlKSxpLnNldFBsYWNlaG9sZGVyKCksdCYmaS50cmlnZ2VyQ2hhbmdlKHthZGRlZDplLHJlbW92ZWQ6cn0pfSl9fSxjbGVhclNlYXJjaDpmdW5jdGlvbigpe3RoaXMuc2VhcmNoLnZhbCgiIiksdGhpcy5mb2N1c3Nlci52YWwoIiIpfSxkYXRhOmZ1bmN0aW9uIEIodCl7dmFyIEIsZT0hMTtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/KEI9dGhpcy5zZWxlY3Rpb24uZGF0YSgic2VsZWN0Mi1kYXRhIiksQj09biYmKEI9bnVsbCksQik6KGFyZ3VtZW50cy5sZW5ndGg+MSYmKGU9YXJndW1lbnRzWzFdKSx2b2lkKHQ/KEI9dGhpcy5kYXRhKCksdGhpcy5vcHRzLmVsZW1lbnQudmFsKHQ/dGhpcy5pZCh0KToiIiksdGhpcy51cGRhdGVTZWxlY3Rpb24odCksZSYmdGhpcy50cmlnZ2VyQ2hhbmdlKHthZGRlZDp0LHJlbW92ZWQ6Qn0pKTp0aGlzLmNsZWFyKGUpKSl9fSksTj1DKE8se2NyZWF0ZUNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBlPXQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmF0dHIoeyJjbGFzcyI6InNlbGVjdDItY29udGFpbmVyIHNlbGVjdDItY29udGFpbmVyLW11bHRpIn0pLmh0bWwoWyI8dWwgY2xhc3M9J3NlbGVjdDItY2hvaWNlcyc+IiwiICA8bGkgY2xhc3M9J3NlbGVjdDItc2VhcmNoLWZpZWxkJz4iLCIgICAgPGxhYmVsIGZvcj0nJyBjbGFzcz0nc2VsZWN0Mi1vZmZzY3JlZW4nPjwvbGFiZWw+IiwiICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyBhdXRvY29tcGxldGU9J29mZicgYXV0b2NvcnJlY3Q9J29mZicgYXV0b2NhcGl0YWxpemU9J29mZicgc3BlbGxjaGVjaz0nZmFsc2UnIGNsYXNzPSdzZWxlY3QyLWlucHV0Jz4iLCIgIDwvbGk+IiwiPC91bD4iLCI8ZGl2IGNsYXNzPSdzZWxlY3QyLWRyb3Agc2VsZWN0Mi1kcm9wLW11bHRpIHNlbGVjdDItZGlzcGxheS1ub25lJz4iLCIgICA8dWwgY2xhc3M9J3NlbGVjdDItcmVzdWx0cyc+IiwiICAgPC91bD4iLCI8L2Rpdj4iXS5qb2luKCIiKSk7cmV0dXJuIGV9LHByZXBhcmVPcHRzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnQucHJlcGFyZU9wdHMuYXBwbHkodGhpcyxhcmd1bWVudHMpLG49dGhpcztyZXR1cm4ic2VsZWN0Ij09PWUuZWxlbWVudC5nZXQoMCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpP2UuaW5pdFNlbGVjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPVtdO3QuZmluZCgib3B0aW9uIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWQmJiF0aGlzLmRpc2FibGVkfSkuZWFjaDIoZnVuY3Rpb24odCxlKXtpLnB1c2gobi5vcHRpb25Ub0RhdGEoZSkpfSksZShpKX06ImRhdGEiaW4gZSYmKGUuaW5pdFNlbGVjdGlvbj1lLmluaXRTZWxlY3Rpb258fGZ1bmN0aW9uKG4saSl7dmFyIHI9YyhuLnZhbCgpLGUuc2VwYXJhdG9yKSxvPVtdO2UucXVlcnkoe21hdGNoZXI6ZnVuY3Rpb24obixpLHMpe3ZhciBhPXQuZ3JlcChyLGZ1bmN0aW9uKHQpe3JldHVybiBsKHQsZS5pZChzKSl9KS5sZW5ndGg7cmV0dXJuIGEmJm8ucHVzaChzKSxhfSxjYWxsYmFjazp0LmlzRnVuY3Rpb24oaSk/ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248ci5sZW5ndGg7bisrKWZvcih2YXIgcz1yW25dLGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIGM9b1thXTtpZihsKHMsZS5pZChjKSkpe3QucHVzaChjKSxvLnNwbGljZShhLDEpO2JyZWFrfX1pKHQpfTp0Lm5vb3B9KX0pLGV9LHNlbGVjdENob2ljZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRhaW5lci5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIik7ZS5sZW5ndGgmJnQmJnRbMF09PWVbMF18fChlLmxlbmd0aCYmdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcigiY2hvaWNlLWRlc2VsZWN0ZWQiLGUpLGUucmVtb3ZlQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpLHQmJnQubGVuZ3RoJiYodGhpcy5jbG9zZSgpLHQuYWRkQ2xhc3MoInNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpLHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIoImNob2ljZS1zZWxlY3RlZCIsdCkpKX0sZGVzdHJveTpmdW5jdGlvbigpe3QoImxhYmVsW2Zvcj0nIit0aGlzLnNlYXJjaC5hdHRyKCJpZCIpKyInXSIpLmF0dHIoImZvciIsdGhpcy5vcHRzLmVsZW1lbnQuYXR0cigiaWQiKSksdGhpcy5wYXJlbnQuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyksRC5jYWxsKHRoaXMsInNlYXJjaENvbnRhaW5lciIsInNlbGVjdGlvbiIpfSxpbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGUsbj0iLnNlbGVjdDItY2hvaWNlcyI7dGhpcy5zZWFyY2hDb250YWluZXI9dGhpcy5jb250YWluZXIuZmluZCgiLnNlbGVjdDItc2VhcmNoLWZpZWxkIiksdGhpcy5zZWxlY3Rpb249ZT10aGlzLmNvbnRhaW5lci5maW5kKG4pO3ZhciBpPXRoaXM7dGhpcy5zZWxlY3Rpb24ub24oImNsaWNrIiwiLnNlbGVjdDItY29udGFpbmVyOm5vdCguc2VsZWN0Mi1jb250YWluZXItZGlzYWJsZWQpIC5zZWxlY3QyLXNlYXJjaC1jaG9pY2U6bm90KC5zZWxlY3QyLWxvY2tlZCkiLGZ1bmN0aW9uKGUpe2kuc2VhcmNoWzBdLmZvY3VzKCksaS5zZWxlY3RDaG9pY2UodCh0aGlzKSl9KSx0aGlzLnNlYXJjaC5hdHRyKCJpZCIsInMyaWRfYXV0b2dlbiIrSSgpKSx0aGlzLnNlYXJjaC5wcmV2KCkudGV4dCh0KCJsYWJlbFtmb3I9JyIrdGhpcy5vcHRzLmVsZW1lbnQuYXR0cigiaWQiKSsiJ10iKS50ZXh0KCkpLmF0dHIoImZvciIsdGhpcy5zZWFyY2guYXR0cigiaWQiKSksdGhpcy5zZWFyY2gub24oImlucHV0IHBhc3RlIix0aGlzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnNlYXJjaC5hdHRyKCJwbGFjZWhvbGRlciIpJiYwPT10aGlzLnNlYXJjaC52YWwoKS5sZW5ndGh8fHRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkmJih0aGlzLm9wZW5lZCgpfHx0aGlzLm9wZW4oKSl9KSksdGhpcy5zZWFyY2guYXR0cigidGFiaW5kZXgiLHRoaXMuZWxlbWVudFRhYkluZGV4KSx0aGlzLmtleWRvd25zPTAsdGhpcy5zZWFyY2gub24oImtleWRvd24iLHRoaXMuYmluZChmdW5jdGlvbih0KXtpZih0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpKXsrK3RoaXMua2V5ZG93bnM7dmFyIG49ZS5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWZvY3VzIiksaT1uLnByZXYoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2U6bm90KC5zZWxlY3QyLWxvY2tlZCkiKSxyPW4ubmV4dCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZTpub3QoLnNlbGVjdDItbG9ja2VkKSIpLG89Xyh0aGlzLnNlYXJjaCk7aWYobi5sZW5ndGgmJih0LndoaWNoPT1ZLkxFRlR8fHQud2hpY2g9PVkuUklHSFR8fHQud2hpY2g9PVkuQkFDS1NQQUNFfHx0LndoaWNoPT1ZLkRFTEVURXx8dC53aGljaD09WS5FTlRFUikpe3ZhciBzPW47cmV0dXJuIHQud2hpY2g9PVkuTEVGVCYmaS5sZW5ndGg/cz1pOnQud2hpY2g9PVkuUklHSFQ/cz1yLmxlbmd0aD9yOm51bGw6dC53aGljaD09PVkuQkFDS1NQQUNFP3RoaXMudW5zZWxlY3Qobi5maXJzdCgpKSYmKHRoaXMuc2VhcmNoLndpZHRoKDEwKSxzPWkubGVuZ3RoP2k6cik6dC53aGljaD09WS5ERUxFVEU/dGhpcy51bnNlbGVjdChuLmZpcnN0KCkpJiYodGhpcy5zZWFyY2gud2lkdGgoMTApLHM9ci5sZW5ndGg/cjpudWxsKTp0LndoaWNoPT1ZLkVOVEVSJiYocz1udWxsKSx0aGlzLnNlbGVjdENob2ljZShzKSxnKHQpLHZvaWQocyYmcy5sZW5ndGh8fHRoaXMub3BlbigpKX1pZigodC53aGljaD09PVkuQkFDS1NQQUNFJiYxPT10aGlzLmtleWRvd25zfHx0LndoaWNoPT1ZLkxFRlQpJiYwPT1vLm9mZnNldCYmIW8ubGVuZ3RoKXJldHVybiB0aGlzLnNlbGVjdENob2ljZShlLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2U6bm90KC5zZWxlY3QyLWxvY2tlZCkiKS5sYXN0KCkpLHZvaWQgZyh0KTtpZih0aGlzLnNlbGVjdENob2ljZShudWxsKSx0aGlzLm9wZW5lZCgpKXN3aXRjaCh0LndoaWNoKXtjYXNlIFkuVVA6Y2FzZSBZLkRPV046cmV0dXJuIHRoaXMubW92ZUhpZ2hsaWdodCh0LndoaWNoPT09WS5VUD8tMToxKSx2b2lkIGcodCk7Y2FzZSBZLkVOVEVSOnJldHVybiB0aGlzLnNlbGVjdEhpZ2hsaWdodGVkKCksdm9pZCBnKHQpO2Nhc2UgWS5UQUI6cmV0dXJuIHRoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoe25vRm9jdXM6ITB9KSx2b2lkIHRoaXMuY2xvc2UoKTtjYXNlIFkuRVNDOnJldHVybiB0aGlzLmNhbmNlbCh0KSx2b2lkIGcodCl9aWYodC53aGljaCE9PVkuVEFCJiYhWS5pc0NvbnRyb2wodCkmJiFZLmlzRnVuY3Rpb25LZXkodCkmJnQud2hpY2ghPT1ZLkJBQ0tTUEFDRSYmdC53aGljaCE9PVkuRVNDKXtpZih0LndoaWNoPT09WS5FTlRFUil7aWYodGhpcy5vcHRzLm9wZW5PbkVudGVyPT09ITEpcmV0dXJuO2lmKHQuYWx0S2V5fHx0LmN0cmxLZXl8fHQuc2hpZnRLZXl8fHQubWV0YUtleSlyZXR1cm59dGhpcy5vcGVuKCksdC53aGljaCE9PVkuUEFHRV9VUCYmdC53aGljaCE9PVkuUEFHRV9ET1dOfHxnKHQpLHQud2hpY2g9PT1ZLkVOVEVSJiZnKHQpfX19KSksdGhpcy5zZWFyY2gub24oImtleXVwIix0aGlzLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5rZXlkb3ducz0wLHRoaXMucmVzaXplU2VhcmNoKCl9KSksdGhpcy5zZWFyY2gub24oImJsdXIiLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygic2VsZWN0Mi1jb250YWluZXItYWN0aXZlIiksdGhpcy5zZWFyY2gucmVtb3ZlQ2xhc3MoInNlbGVjdDItZm9jdXNlZCIpLHRoaXMuc2VsZWN0Q2hvaWNlKG51bGwpLHRoaXMub3BlbmVkKCl8fHRoaXMuY2xlYXJTZWFyY2goKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIodC5FdmVudCgic2VsZWN0Mi1ibHVyIikpfSkpLHRoaXMuY29udGFpbmVyLm9uKCJjbGljayIsbix0aGlzLmJpbmQoZnVuY3Rpb24oZSl7dGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSYmKHQoZS50YXJnZXQpLmNsb3Nlc3QoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5sZW5ndGg+MHx8KHRoaXMuc2VsZWN0Q2hvaWNlKG51bGwpLHRoaXMuY2xlYXJQbGFjZWhvbGRlcigpLHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKXx8dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih0LkV2ZW50KCJzZWxlY3QyLWZvY3VzIikpLHRoaXMub3BlbigpLHRoaXMuZm9jdXNTZWFyY2goKSxlLnByZXZlbnREZWZhdWx0KCkpKX0pKSx0aGlzLmNvbnRhaW5lci5vbigiZm9jdXMiLG4sdGhpcy5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSYmKHRoaXMuY29udGFpbmVyLmhhc0NsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKXx8dGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcih0LkV2ZW50KCJzZWxlY3QyLWZvY3VzIikpLHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKSx0aGlzLmRyb3Bkb3duLmFkZENsYXNzKCJzZWxlY3QyLWRyb3AtYWN0aXZlIiksdGhpcy5jbGVhclBsYWNlaG9sZGVyKCkpfSkpLHRoaXMuaW5pdENvbnRhaW5lcldpZHRoKCksdGhpcy5vcHRzLmVsZW1lbnQuYWRkQ2xhc3MoInNlbGVjdDItb2Zmc2NyZWVuIiksdGhpcy5jbGVhclNlYXJjaCgpfSxlbmFibGVJbnRlcmZhY2U6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5lbmFibGVJbnRlcmZhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpJiZ0aGlzLnNlYXJjaC5wcm9wKCJkaXNhYmxlZCIsIXRoaXMuaXNJbnRlcmZhY2VFbmFibGVkKCkpfSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7aWYoIiI9PT10aGlzLm9wdHMuZWxlbWVudC52YWwoKSYmIiI9PT10aGlzLm9wdHMuZWxlbWVudC50ZXh0KCkmJih0aGlzLnVwZGF0ZVNlbGVjdGlvbihbXSksdGhpcy5jbG9zZSgpLHRoaXMuY2xlYXJTZWFyY2goKSksdGhpcy5zZWxlY3R8fCIiIT09dGhpcy5vcHRzLmVsZW1lbnQudmFsKCkpe3ZhciB0PXRoaXM7dGhpcy5vcHRzLmluaXRTZWxlY3Rpb24uY2FsbChudWxsLHRoaXMub3B0cy5lbGVtZW50LGZ1bmN0aW9uKGUpe2UhPT1uJiZudWxsIT09ZSYmKHQudXBkYXRlU2VsZWN0aW9uKGUpLHQuY2xvc2UoKSx0LmNsZWFyU2VhcmNoKCkpfSl9fSxjbGVhclNlYXJjaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0UGxhY2Vob2xkZXIoKSxlPXRoaXMuZ2V0TWF4U2VhcmNoV2lkdGgoKTt0IT09biYmMD09PXRoaXMuZ2V0VmFsKCkubGVuZ3RoJiZ0aGlzLnNlYXJjaC5oYXNDbGFzcygic2VsZWN0Mi1mb2N1c2VkIik9PT0hMT8odGhpcy5zZWFyY2gudmFsKHQpLmFkZENsYXNzKCJzZWxlY3QyLWRlZmF1bHQiKSx0aGlzLnNlYXJjaC53aWR0aChlPjA/ZTp0aGlzLmNvbnRhaW5lci5jc3MoIndpZHRoIikpKTp0aGlzLnNlYXJjaC52YWwoIiIpLndpZHRoKDEwKX0sY2xlYXJQbGFjZWhvbGRlcjpmdW5jdGlvbigpe3RoaXMuc2VhcmNoLmhhc0NsYXNzKCJzZWxlY3QyLWRlZmF1bHQiKSYmdGhpcy5zZWFyY2gudmFsKCIiKS5yZW1vdmVDbGFzcygic2VsZWN0Mi1kZWZhdWx0Iil9LG9wZW5pbmc6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyUGxhY2Vob2xkZXIoKSx0aGlzLnJlc2l6ZVNlYXJjaCgpLHRoaXMucGFyZW50Lm9wZW5pbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZm9jdXNTZWFyY2goKSwiIj09PXRoaXMuc2VhcmNoLnZhbCgpJiZ0aGlzLm5leHRTZWFyY2hUZXJtIT1uJiYodGhpcy5zZWFyY2gudmFsKHRoaXMubmV4dFNlYXJjaFRlcm0pLHRoaXMuc2VhcmNoLnNlbGVjdCgpKSx0aGlzLnVwZGF0ZVJlc3VsdHMoITApLHRoaXMub3B0cy5zaG91bGRGb2N1c0lucHV0KHRoaXMpJiZ0aGlzLnNlYXJjaC5mb2N1cygpLHRoaXMub3B0cy5lbGVtZW50LnRyaWdnZXIodC5FdmVudCgic2VsZWN0Mi1vcGVuIikpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub3BlbmVkKCkmJnRoaXMucGFyZW50LmNsb3NlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCksdGhpcy5zZWFyY2guZm9jdXMoKX0saXNGb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VhcmNoLmhhc0NsYXNzKCJzZWxlY3QyLWZvY3VzZWQiKX0sdXBkYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciBuPVtdLGk9W10scj10aGlzO3QoZSkuZWFjaChmdW5jdGlvbigpe3Moci5pZCh0aGlzKSxuKTwwJiYobi5wdXNoKHIuaWQodGhpcykpLGkucHVzaCh0aGlzKSl9KSxlPWksdGhpcy5zZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZSIpLnJlbW92ZSgpLHQoZSkuZWFjaChmdW5jdGlvbigpe3IuYWRkU2VsZWN0ZWRDaG9pY2UodGhpcyl9KSxyLnBvc3Rwcm9jZXNzUmVzdWx0cygpfSx0b2tlbml6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2VhcmNoLnZhbCgpO3Q9dGhpcy5vcHRzLnRva2VuaXplci5jYWxsKHRoaXMsdCx0aGlzLmRhdGEoKSx0aGlzLmJpbmQodGhpcy5vblNlbGVjdCksdGhpcy5vcHRzKSxudWxsIT10JiZ0IT1uJiYodGhpcy5zZWFyY2gudmFsKHQpLHQubGVuZ3RoPjAmJnRoaXMub3BlbigpKX0sb25TZWxlY3Q6ZnVuY3Rpb24odCxlKXt0aGlzLnRyaWdnZXJTZWxlY3QodCkmJiIiIT09dC50ZXh0JiYodGhpcy5hZGRTZWxlY3RlZENob2ljZSh0KSx0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHt0eXBlOiJzZWxlY3RlZCIsdmFsOnRoaXMuaWQodCksY2hvaWNlOnR9KSx0aGlzLm5leHRTZWFyY2hUZXJtPXRoaXMub3B0cy5uZXh0U2VhcmNoVGVybSh0LHRoaXMuc2VhcmNoLnZhbCgpKSx0aGlzLmNsZWFyU2VhcmNoKCksdGhpcy51cGRhdGVSZXN1bHRzKCksIXRoaXMuc2VsZWN0JiZ0aGlzLm9wdHMuY2xvc2VPblNlbGVjdHx8dGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHModCwhMSx0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD09PSEwKSx0aGlzLm9wdHMuY2xvc2VPblNlbGVjdD8odGhpcy5jbG9zZSgpLHRoaXMuc2VhcmNoLndpZHRoKDEwKSk6dGhpcy5jb3VudFNlbGVjdGFibGVSZXN1bHRzKCk+MD8odGhpcy5zZWFyY2gud2lkdGgoMTApLHRoaXMucmVzaXplU2VhcmNoKCksdGhpcy5nZXRNYXhpbXVtU2VsZWN0aW9uU2l6ZSgpPjAmJnRoaXMudmFsKCkubGVuZ3RoPj10aGlzLmdldE1heGltdW1TZWxlY3Rpb25TaXplKCk/dGhpcy51cGRhdGVSZXN1bHRzKCEwKTp0aGlzLm5leHRTZWFyY2hUZXJtIT1uJiYodGhpcy5zZWFyY2gudmFsKHRoaXMubmV4dFNlYXJjaFRlcm0pLHRoaXMudXBkYXRlUmVzdWx0cygpLHRoaXMuc2VhcmNoLnNlbGVjdCgpKSx0aGlzLnBvc2l0aW9uRHJvcGRvd24oKSk6KHRoaXMuY2xvc2UoKSx0aGlzLnNlYXJjaC53aWR0aCgxMCkpLHRoaXMudHJpZ2dlckNoYW5nZSh7YWRkZWQ6dH0pLGUmJmUubm9Gb2N1c3x8dGhpcy5mb2N1c1NlYXJjaCgpKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpLHRoaXMuZm9jdXNTZWFyY2goKX0sYWRkU2VsZWN0ZWRDaG9pY2U6ZnVuY3Rpb24oZSl7dmFyIGkscixvPSFlLmxvY2tlZCxzPXQoIjxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlJz4gICAgPGRpdj48L2Rpdj4gICAgPGEgaHJlZj0nIycgY2xhc3M9J3NlbGVjdDItc2VhcmNoLWNob2ljZS1jbG9zZScgdGFiaW5kZXg9Jy0xJz48L2E+PC9saT4iKSxhPXQoIjxsaSBjbGFzcz0nc2VsZWN0Mi1zZWFyY2gtY2hvaWNlIHNlbGVjdDItbG9ja2VkJz48ZGl2PjwvZGl2PjwvbGk+IiksbD1vP3M6YSxjPXRoaXMuaWQoZSksdT10aGlzLmdldFZhbCgpO2k9dGhpcy5vcHRzLmZvcm1hdFNlbGVjdGlvbihlLGwuZmluZCgiZGl2IiksdGhpcy5vcHRzLmVzY2FwZU1hcmt1cCksaSE9biYmbC5maW5kKCJkaXYiKS5yZXBsYWNlV2l0aCgiPGRpdj4iK2krIjwvZGl2PiIpLHI9dGhpcy5vcHRzLmZvcm1hdFNlbGVjdGlvbkNzc0NsYXNzKGUsbC5maW5kKCJkaXYiKSksciE9biYmbC5hZGRDbGFzcyhyKSxvJiZsLmZpbmQoIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UtY2xvc2UiKS5vbigibW91c2Vkb3duIixnKS5vbigiY2xpY2sgZGJsY2xpY2siLHRoaXMuYmluZChmdW5jdGlvbihlKXt0aGlzLmlzSW50ZXJmYWNlRW5hYmxlZCgpJiYodGhpcy51bnNlbGVjdCh0KGUudGFyZ2V0KSksdGhpcy5zZWxlY3Rpb24uZmluZCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZS1mb2N1cyIpLnJlbW92ZUNsYXNzKCJzZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXMiKSxnKGUpLHRoaXMuY2xvc2UoKSx0aGlzLmZvY3VzU2VhcmNoKCkpfSkpLm9uKCJmb2N1cyIsdGhpcy5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5pc0ludGVyZmFjZUVuYWJsZWQoKSYmKHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCJzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmUiKSx0aGlzLmRyb3Bkb3duLmFkZENsYXNzKCJzZWxlY3QyLWRyb3AtYWN0aXZlIikpfSkpLGwuZGF0YSgic2VsZWN0Mi1kYXRhIixlKSxsLmluc2VydEJlZm9yZSh0aGlzLnNlYXJjaENvbnRhaW5lciksdS5wdXNoKGMpLHRoaXMuc2V0VmFsKHUpfSx1bnNlbGVjdDpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcy5nZXRWYWwoKTtpZihlPWUuY2xvc2VzdCgiLnNlbGVjdDItc2VhcmNoLWNob2ljZSIpLDA9PT1lLmxlbmd0aCl0aHJvdyJJbnZhbGlkIGFyZ3VtZW50OiAiK2UrIi4gTXVzdCBiZSAuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlIjtpZihuPWUuZGF0YSgic2VsZWN0Mi1kYXRhIikpe3ZhciBvPXQuRXZlbnQoInNlbGVjdDItcmVtb3ZpbmciKTtpZihvLnZhbD10aGlzLmlkKG4pLG8uY2hvaWNlPW4sdGhpcy5vcHRzLmVsZW1lbnQudHJpZ2dlcihvKSxvLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybiExO2Zvcig7KGk9cyh0aGlzLmlkKG4pLHIpKT49MDspci5zcGxpY2UoaSwxKSx0aGlzLnNldFZhbChyKSx0aGlzLnNlbGVjdCYmdGhpcy5wb3N0cHJvY2Vzc1Jlc3VsdHMoKTtyZXR1cm4gZS5yZW1vdmUoKSx0aGlzLm9wdHMuZWxlbWVudC50cmlnZ2VyKHt0eXBlOiJzZWxlY3QyLXJlbW92ZWQiLHZhbDp0aGlzLmlkKG4pLGNob2ljZTpufSksdGhpcy50cmlnZ2VyQ2hhbmdlKHtyZW1vdmVkOm59KSwhMH19LHBvc3Rwcm9jZXNzUmVzdWx0czpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5nZXRWYWwoKSxyPXRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1yZXN1bHQiKSxvPXRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtd2l0aC1jaGlsZHJlbiIpLGE9dGhpcztyLmVhY2gyKGZ1bmN0aW9uKHQsZSl7dmFyIG49YS5pZChlLmRhdGEoInNlbGVjdDItZGF0YSIpKTtzKG4saSk+PTAmJihlLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIiksZS5maW5kKCIuc2VsZWN0Mi1yZXN1bHQtc2VsZWN0YWJsZSIpLmFkZENsYXNzKCJzZWxlY3QyLXNlbGVjdGVkIikpfSksby5lYWNoMihmdW5jdGlvbih0LGUpe2UuaXMoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlIil8fDAhPT1lLmZpbmQoIi5zZWxlY3QyLXJlc3VsdC1zZWxlY3RhYmxlOm5vdCguc2VsZWN0Mi1zZWxlY3RlZCkiKS5sZW5ndGh8fGUuYWRkQ2xhc3MoInNlbGVjdDItc2VsZWN0ZWQiKX0pLHRoaXMuaGlnaGxpZ2h0KCk9PS0xJiZuIT09ITEmJmEuaGlnaGxpZ2h0KDApLCF0aGlzLm9wdHMuY3JlYXRlU2VhcmNoQ2hvaWNlJiYhci5maWx0ZXIoIi5zZWxlY3QyLXJlc3VsdDpub3QoLnNlbGVjdDItc2VsZWN0ZWQpIikubGVuZ3RoPjAmJighdHx8dCYmIXQubW9yZSYmMD09PXRoaXMucmVzdWx0cy5maW5kKCIuc2VsZWN0Mi1uby1yZXN1bHRzIikubGVuZ3RoKSYmTChhLm9wdHMuZm9ybWF0Tm9NYXRjaGVzLCJmb3JtYXROb01hdGNoZXMiKSYmdGhpcy5yZXN1bHRzLmFwcGVuZCgiPGxpIGNsYXNzPSdzZWxlY3QyLW5vLXJlc3VsdHMnPiIreChhLm9wdHMuZm9ybWF0Tm9NYXRjaGVzLGEub3B0cy5lbGVtZW50LGEuc2VhcmNoLnZhbCgpKSsiPC9saT4iKX0sZ2V0TWF4U2VhcmNoV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ud2lkdGgoKS11KHRoaXMuc2VhcmNoKX0scmVzaXplU2VhcmNoOmZ1bmN0aW9uKCl7dmFyIHQsZSxuLGkscixvPXUodGhpcy5zZWFyY2gpO3Q9eSh0aGlzLnNlYXJjaCkrMTAsZT10aGlzLnNlYXJjaC5vZmZzZXQoKS5sZWZ0LG49dGhpcy5zZWxlY3Rpb24ud2lkdGgoKSxpPXRoaXMuc2VsZWN0aW9uLm9mZnNldCgpLmxlZnQscj1uLShlLWkpLW8scjx0JiYocj1uLW8pLHI8NDAmJihyPW4tbykscjw9MCYmKHI9dCksdGhpcy5zZWFyY2gud2lkdGgoTWF0aC5mbG9vcihyKSl9LGdldFZhbDpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLnNlbGVjdD8odD10aGlzLnNlbGVjdC52YWwoKSxudWxsPT09dD9bXTp0KToodD10aGlzLm9wdHMuZWxlbWVudC52YWwoKSxjKHQsdGhpcy5vcHRzLnNlcGFyYXRvcikpfSxzZXRWYWw6ZnVuY3Rpb24oZSl7dmFyIG47dGhpcy5zZWxlY3Q/dGhpcy5zZWxlY3QudmFsKGUpOihuPVtdLHQoZSkuZWFjaChmdW5jdGlvbigpe3ModGhpcyxuKTwwJiZuLnB1c2godGhpcyl9KSx0aGlzLm9wdHMuZWxlbWVudC52YWwoMD09PW4ubGVuZ3RoPyIiOm4uam9pbih0aGlzLm9wdHMuc2VwYXJhdG9yKSkpfSxidWlsZENoYW5nZURldGFpbHM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGU9ZS5zbGljZSgwKSx0PXQuc2xpY2UoMCksbj0wO248ZS5sZW5ndGg7bisrKWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWwodGhpcy5vcHRzLmlkKGVbbl0pLHRoaXMub3B0cy5pZCh0W2ldKSkmJihlLnNwbGljZShuLDEpLG4+MCYmbi0tLHQuc3BsaWNlKGksMSksaS0tKTtyZXR1cm57YWRkZWQ6ZSxyZW1vdmVkOnR9fSx2YWw6ZnVuY3Rpb24oZSxpKXt2YXIgcixvPXRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuZ2V0VmFsKCk7aWYocj10aGlzLmRhdGEoKSxyLmxlbmd0aHx8KHI9W10pLCFlJiYwIT09ZSlyZXR1cm4gdGhpcy5vcHRzLmVsZW1lbnQudmFsKCIiKSx0aGlzLnVwZGF0ZVNlbGVjdGlvbihbXSksdGhpcy5jbGVhclNlYXJjaCgpLHZvaWQoaSYmdGhpcy50cmlnZ2VyQ2hhbmdlKHthZGRlZDp0aGlzLmRhdGEoKSxyZW1vdmVkOnJ9KSk7aWYodGhpcy5zZXRWYWwoZSksdGhpcy5zZWxlY3QpdGhpcy5vcHRzLmluaXRTZWxlY3Rpb24odGhpcy5zZWxlY3QsdGhpcy5iaW5kKHRoaXMudXBkYXRlU2VsZWN0aW9uKSksaSYmdGhpcy50cmlnZ2VyQ2hhbmdlKHRoaXMuYnVpbGRDaGFuZ2VEZXRhaWxzKHIsdGhpcy5kYXRhKCkpKTtlbHNle2lmKHRoaXMub3B0cy5pbml0U2VsZWN0aW9uPT09bil0aHJvdyBuZXcgRXJyb3IoInZhbCgpIGNhbm5vdCBiZSBjYWxsZWQgaWYgaW5pdFNlbGVjdGlvbigpIGlzIG5vdCBkZWZpbmVkIik7dGhpcy5vcHRzLmluaXRTZWxlY3Rpb24odGhpcy5vcHRzLmVsZW1lbnQsZnVuY3Rpb24oZSl7dmFyIG49dC5tYXAoZSxvLmlkKTtvLnNldFZhbChuKSxvLnVwZGF0ZVNlbGVjdGlvbihlKSxvLmNsZWFyU2VhcmNoKCksaSYmby50cmlnZ2VyQ2hhbmdlKG8uYnVpbGRDaGFuZ2VEZXRhaWxzKHIsby5kYXRhKCkpKX0pfXRoaXMuY2xlYXJTZWFyY2goKX0sb25Tb3J0U3RhcnQ6ZnVuY3Rpb24oKXtpZih0aGlzLnNlbGVjdCl0aHJvdyBuZXcgRXJyb3IoIlNvcnRpbmcgb2YgZWxlbWVudHMgaXMgbm90IHN1cHBvcnRlZCB3aGVuIGF0dGFjaGVkIHRvIDxzZWxlY3Q+LiBBdHRhY2ggdG8gPGlucHV0IHR5cGU9J2hpZGRlbicvPiBpbnN0ZWFkLiIpO3RoaXMuc2VhcmNoLndpZHRoKDApLHRoaXMuc2VhcmNoQ29udGFpbmVyLmhpZGUoKX0sb25Tb3J0RW5kOmZ1bmN0aW9uKCl7dmFyIGU9W10sbj10aGlzO3RoaXMuc2VhcmNoQ29udGFpbmVyLnNob3coKSx0aGlzLnNlYXJjaENvbnRhaW5lci5hcHBlbmRUbyh0aGlzLnNlYXJjaENvbnRhaW5lci5wYXJlbnQoKSksdGhpcy5yZXNpemVTZWFyY2goKSx0aGlzLnNlbGVjdGlvbi5maW5kKCIuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlIikuZWFjaChmdW5jdGlvbigpe2UucHVzaChuLm9wdHMuaWQodCh0aGlzKS5kYXRhKCJzZWxlY3QyLWRhdGEiKSkpfSksdGhpcy5zZXRWYWwoZSksdGhpcy50cmlnZ2VyQ2hhbmdlKCl9LGRhdGE6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG89dGhpcztyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5zZWxlY3Rpb24uY2hpbGRyZW4oIi5zZWxlY3QyLXNlYXJjaC1jaG9pY2UiKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzKS5kYXRhKCJzZWxlY3QyLWRhdGEiKX0pLmdldCgpOihyPXRoaXMuZGF0YSgpLGV8fChlPVtdKSxpPXQubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJuIG8ub3B0cy5pZCh0KX0pLHRoaXMuc2V0VmFsKGkpLHRoaXMudXBkYXRlU2VsZWN0aW9uKGUpLHRoaXMuY2xlYXJTZWFyY2goKSxuJiZ0aGlzLnRyaWdnZXJDaGFuZ2UodGhpcy5idWlsZENoYW5nZURldGFpbHMocix0aGlzLmRhdGEoKSkpLHZvaWQgMCl9fSksdC5mbi5zZWxlY3QyPWZ1bmN0aW9uKCl7dmFyIGkscixhLGwsYyx1PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxkPVsidmFsIiwiZGVzdHJveSIsIm9wZW5lZCIsIm9wZW4iLCJjbG9zZSIsImZvY3VzIiwiaXNGb2N1c2VkIiwiY29udGFpbmVyIiwiZHJvcGRvd24iLCJvblNvcnRTdGFydCIsIm9uU29ydEVuZCIsImVuYWJsZSIsImRpc2FibGUiLCJyZWFkb25seSIsInBvc2l0aW9uRHJvcGRvd24iLCJkYXRhIiwic2VhcmNoIl0saD1bIm9wZW5lZCIsImlzRm9jdXNlZCIsImNvbnRhaW5lciIsImRyb3Bkb3duIl0scD1bInZhbCIsImRhdGEiXSxmPXtzZWFyY2g6ImV4dGVybmFsU2VhcmNoIn07cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKDA9PT11Lmxlbmd0aHx8Im9iamVjdCI9PT1vKHVbMF0pKWk9MD09PXUubGVuZ3RoP3t9OnQuZXh0ZW5kKHt9LHVbMF0pLGkuZWxlbWVudD10KHRoaXMpLCJzZWxlY3QiPT09aS5lbGVtZW50LmdldCgwKS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/Yz1pLmVsZW1lbnQucHJvcCgibXVsdGlwbGUiKTooYz1pLm11bHRpcGxlfHwhMSwidGFncyJpbiBpJiYoaS5tdWx0aXBsZT1jPSEwKSkscj1jP25ldyBlWyJjbGFzcyJdLm11bHRpOm5ldyBlWyJjbGFzcyJdLnNpbmdsZSxyLmluaXQoaSk7ZWxzZXtpZigic3RyaW5nIiE9dHlwZW9mIHVbMF0pdGhyb3ciSW52YWxpZCBhcmd1bWVudHMgdG8gc2VsZWN0MiBwbHVnaW46ICIrdTtpZihzKHVbMF0sZCk8MCl0aHJvdyJVbmtub3duIG1ldGhvZDogIit1WzBdO2lmKGw9bixyPXQodGhpcykuZGF0YSgic2VsZWN0MiIpLHI9PT1uKXJldHVybjtpZihhPXVbMF0sImNvbnRhaW5lciI9PT1hP2w9ci5jb250YWluZXI6ImRyb3Bkb3duIj09PWE/bD1yLmRyb3Bkb3duOihmW2FdJiYoYT1mW2FdKSxsPXJbYV0uYXBwbHkocix1LnNsaWNlKDEpKSkscyh1WzBdLGgpPj0wfHxzKHVbMF0scCk+PTAmJjE9PXUubGVuZ3RoKXJldHVybiExfX0pLGw9PT1uP3RoaXM6bH0sdC5mbi5zZWxlY3QyLmRlZmF1bHRzPXt3aWR0aDoiY29weSIsbG9hZE1vcmVQYWRkaW5nOjAsY2xvc2VPblNlbGVjdDohMCxvcGVuT25FbnRlcjohMCxjb250YWluZXJDc3M6e30sZHJvcGRvd25Dc3M6e30sY29udGFpbmVyQ3NzQ2xhc3M6IiIsZHJvcGRvd25Dc3NDbGFzczoiIixmb3JtYXRSZXN1bHQ6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9W107cmV0dXJuIHcodGhpcy50ZXh0KHQpLG4udGVybSxyLGkpLHIuam9pbigiIil9LGZvcm1hdFNlbGVjdGlvbjpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQ/aSh0aGlzLnRleHQodCkpOm59LHNvcnRSZXN1bHRzOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdH0sZm9ybWF0UmVzdWx0Q3NzQ2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY3NzfSxmb3JtYXRTZWxlY3Rpb25Dc3NDbGFzczpmdW5jdGlvbih0LGUpe3JldHVybiBufSxtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDowLG1pbmltdW1JbnB1dExlbmd0aDowLG1heGltdW1JbnB1dExlbmd0aDpudWxsLG1heGltdW1TZWxlY3Rpb25TaXplOjAsaWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PW4/bnVsbDp0LmlkfSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmRhdGEmJnRoaXMuZGF0YS50ZXh0P3QuaXNGdW5jdGlvbih0aGlzLmRhdGEudGV4dCk/dGhpcy5kYXRhLnRleHQoZSk6ZVt0aGlzLmRhdGEudGV4dF06ZS50ZXh0fSxtYXRjaGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIoIiIrZSkudG9VcHBlckNhc2UoKS5pbmRleE9mKHIoIiIrdCkudG9VcHBlckNhc2UoKSk+PTB9LHNlcGFyYXRvcjoiLCIsdG9rZW5TZXBhcmF0b3JzOltdLHRva2VuaXplcjpFLGVzY2FwZU1hcmt1cDpNLGJsdXJPbkNoYW5nZTohMSxzZWxlY3RPbkJsdXI6ITEsYWRhcHRDb250YWluZXJDc3NDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4gdH0sYWRhcHREcm9wZG93bkNzc0NsYXNzOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSxuZXh0U2VhcmNoVGVybTpmdW5jdGlvbih0LGUpe3JldHVybiBufSxzZWFyY2hJbnB1dFBsYWNlaG9sZGVyOiIiLGNyZWF0ZVNlYXJjaENob2ljZVBvc2l0aW9uOiJ0b3AiLHNob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24odCl7dmFyIGU9Im9udG91Y2hzdGFydCJpbiB3aW5kb3d8fG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzPjA7cmV0dXJuIWV8fCEodC5vcHRzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoPDApfX0sdC5mbi5zZWxlY3QyLmxvY2FsZXM9W10sdC5mbi5zZWxlY3QyLmxvY2FsZXMuZW49e2Zvcm1hdE1hdGNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuIDE9PT10PyJPbmUgcmVzdWx0IGlzIGF2YWlsYWJsZSwgcHJlc3MgZW50ZXIgdG8gc2VsZWN0IGl0LiI6dCsiIHJlc3VsdHMgYXJlIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIn0sZm9ybWF0Tm9NYXRjaGVzOmZ1bmN0aW9uKCl7cmV0dXJuIk5vIG1hdGNoZXMgZm91bmQifSxmb3JtYXRBamF4RXJyb3I6ZnVuY3Rpb24odCxlLG4pe3JldHVybiJMb2FkaW5nIGZhaWxlZCJ9LGZvcm1hdElucHV0VG9vU2hvcnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLXQubGVuZ3RoO3JldHVybiJQbGVhc2UgZW50ZXIgIituKyIgb3IgbW9yZSBjaGFyYWN0ZXIiKygxPT1uPyIiOiJzIil9LGZvcm1hdElucHV0VG9vTG9uZzpmdW5jdGlvbih0LGUpe3ZhciBuPXQubGVuZ3RoLWU7cmV0dXJuIlBsZWFzZSBkZWxldGUgIituKyIgY2hhcmFjdGVyIisoMT09bj8iIjoicyIpfSxmb3JtYXRTZWxlY3Rpb25Ub29CaWc6ZnVuY3Rpb24odCl7cmV0dXJuIllvdSBjYW4gb25seSBzZWxlY3QgIit0KyIgaXRlbSIrKDE9PXQ/IiI6InMiKX0sZm9ybWF0TG9hZE1vcmU6ZnVuY3Rpb24odCl7cmV0dXJuIkxvYWRpbmcgbW9yZSByZXN1bHRz4oCmIn0sZm9ybWF0U2VhcmNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIlNlYXJjaGluZ+KApiJ9fSx0LmV4dGVuZCh0LmZuLnNlbGVjdDIuZGVmYXVsdHMsdC5mbi5zZWxlY3QyLmxvY2FsZXMuZW4pLHQuZm4uc2VsZWN0Mi5hamF4RGVmYXVsdHM9e3RyYW5zcG9ydDp0LmFqYXgscGFyYW1zOnt0eXBlOiJHRVQiLGNhY2hlOiExLGRhdGFUeXBlOiJqc29uIn19LGU9e3F1ZXJ5OnthamF4OlMsbG9jYWw6VCx0YWdzOmt9LHV0aWw6e2RlYm91bmNlOnAsbWFya01hdGNoOncsZXNjYXBlTWFya3VwOk0sc3RyaXBEaWFjcml0aWNzOnJ9LCJjbGFzcyI6eyJhYnN0cmFjdCI6TyxzaW5nbGU6UCxtdWx0aTpOfX19fSh0KSxlfS5hcHBseShlLGkpLC8qCgkJQ29weXJpZ2h0IDIwMTIgSWdvciBWYXluYmVyZwoKCQlWZXJzaW9uOiBAQHZlckBAIFRpbWVzdGFtcDogQEB0aW1lc3RhbXBAQAoKCQlUaGlzIHNvZnR3YXJlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiQXBhY2hlIExpY2Vuc2UiKSBvciB0aGUgR05VCgkJR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgKHRoZSAiR1BMIExpY2Vuc2UiKS4gWW91IG1heSBjaG9vc2UgZWl0aGVyIGxpY2Vuc2UgdG8gZ292ZXJuIHlvdXIKCQl1c2Ugb2YgdGhpcyBzb2Z0d2FyZSBvbmx5IHVwb24gdGhlIGNvbmRpdGlvbiB0aGF0IHlvdSBhY2NlcHQgYWxsIG9mIHRoZSB0ZXJtcyBvZiBlaXRoZXIgdGhlIEFwYWNoZQoJCUxpY2Vuc2Ugb3IgdGhlIEdQTCBMaWNlbnNlLgoKCQlZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIEFwYWNoZSBMaWNlbnNlIGFuZCB0aGUgR1BMIExpY2Vuc2UgYXQ6CgoJCSAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCQkgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC0yLjAuaHRtbAoKCQlVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZQoJCUFwYWNoZSBMaWNlbnNlIG9yIHRoZSBHUEwgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IKCQlDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIEFwYWNoZSBMaWNlbnNlIGFuZCB0aGUgR1BMIExpY2Vuc2UgZm9yCgkJdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIGFuZCB0aGUgR1BMIExpY2Vuc2UuCgkJKi8KCSEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNTA5KSxuKDUwOCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm57VGFiOnQsVGFiczplfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDYxMyksbig2MTQpLG4oNjE1KV0scj1mdW5jdGlvbih0LGUsbil7cmV0dXJue0ZpbGVVcGxvYWQ6dCxVcGxvYWRlcjplLFVwbG9hZElmcmFtZTpufX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMzMSksbig0NzEpLG4oNDcwKV0scj1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS50cGwoJ1x0ICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJmaWxlIiBjbGFzcz0ibS1maWxlIj5cdCAgICA8ZGl2IGNsYXNzPSJmYWNhZGUiPlx0ICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJ0ZXh0LWZpZWxkLWRlZmF1bHQiIGRpc2FibGVkPlx0ICAgICAge3t7aW1nIHNyYz0iL2ltZy91aS9idXR0b24vZmlsZS1icm93c2UtMDEucG5nIiBhbHQ9IkJyb3dzZSBmaWxlcy4uLiIgY2xhc3M9ImJyb3dzZSJ9fX1cdCAgICA8L2Rpdj5cdCAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBjbGFzcz0iaGlkZSIgbmFtZT0iX3hzcmZUb2tlbiIgdmFsdWU9Int7dG9rZW59fSI+XHQgICcpLHI9bi5leHRlbmQoe3RlbXBsYXRlOmksY2xhc3NOYW1lOiJmaWxlLWlucHV0LWZhY2FkZSBtYXJnaW4tdG9wLTEwIG1hcmdpbi1idG0tMTAgY2xlYXJmaXgiLGV2ZW50czp7ImNoYW5nZSAubS1maWxlIjoidXBkYXRlRGlzcGxheVZhbCJ9LHVwZGF0ZURpc3BsYXlWYWw6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEZpbGVuYW1lKCk7dC5tYXRjaCgvXkM6XFxmYWtlcGF0aC8pJiYodD10LnJlcGxhY2UoIkM6XFxmYWtlcGF0aFxcIiwiIikpLHRoaXMudXBkYXRlRGlzcGxheSh0KX0sdXBkYXRlRGlzcGxheTpmdW5jdGlvbih0KXt0aGlzLiQoIi50ZXh0LWZpZWxkLWRlZmF1bHQiKS52YWwodCl9LGdldEZpbGVuYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCgiLm0tZmlsZSIpLnZhbCgpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10KCIjX3hzcmZUb2tlbiIpLnRleHQoKTtyZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKHt0b2tlbjplfSkpLHRoaXN9fSk7cmV0dXJuIHJ9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0OTQpLG4oNDcwKSxuKDYxNSksbig2MTYpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWUuZXh0ZW5kKHtjbGFzc05hbWU6InVwbG9hZC1ob2xkZXIiLGluaXRpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZnJhbWU9bmV3IG4oe25hbWU6dGhpcy5jaWR9KSx0aGlzLmFkZCh0aGlzLmlmcmFtZSxudWxsLCEwKSx0aGlzLnVwbG9hZEZvcm09bmV3IGkoe3RhcmdldDp0aGlzLmNpZCxlbmRwb2ludDp0aGlzLm9wdGlvbnMuZW5kcG9pbnR9KSx0aGlzLmFkZCh0aGlzLnVwbG9hZEZvcm0sbnVsbCwhMCksdGhpcy5saXN0ZW5Ubyh0aGlzLmlmcmFtZSx0LlVQTE9BRF9ET05FLGZ1bmN0aW9uKCl7dGhpcy51cGxvYWRGb3JtLnVwbG9hZERvbmUoKX0pLHRoaXN9fSk7cmV0dXJuIHJ9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbig0OTQpLG4oNDcwKSxuKDUwNildLHI9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmV4dGVuZCh7dGFnTmFtZToiaWZyYW1lIixjbGFzc05hbWU6ImhpZGUiLGF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm57bmFtZTp0aGlzLm9wdGlvbnMubmFtZSxpZDp0aGlzLm9wdGlvbnMubmFtZX19LGV2ZW50czp7bG9hZDpmdW5jdGlvbigpe3RyeXt2YXIgZT10aGlzLiRlbC5jb250ZW50cygpLnRleHQoKTtpZihlKXJldHVybiB2b2lkIHRoaXMudHJpZ2dlcih0LlVQTE9BRF9ET05FLEpTT04ucGFyc2UoZSkpfWNhdGNoKG4pe310aGlzLnRyaWdnZXIodC5VUExPQURfRU1QVFlfQ09OVEVOVCl9fX0pO3JldHVybiBufS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNDcwKSxuKDYxMyksbig2MTcpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmV4dGVuZCh7dGFnTmFtZToiZm9ybSIsY2xhc3NOYW1lOiJjbGVhcmZpeCBwYWRkaW5nLWJ0bS0xMCIsYXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybnttZXRob2Q6InBvc3QiLGVuY3R5cGU6Im11bHRpcGFydC9mb3JtLWRhdGEiLGFjdGlvbjp0aGlzLm9wdGlvbnMuZW5kcG9pbnQsdGFyZ2V0OnRoaXMub3B0aW9ucy50YXJnZXR9fSxldmVudHM6e3N1Ym1pdDpmdW5jdGlvbigpe3RoaXMuc3VibWl0QnRuLmRpc2FibGUoITApfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbGVVcGxvYWQ9bmV3IGUsdGhpcy5hZGQodGhpcy5maWxlVXBsb2FkKSx0aGlzLnN1Ym1pdEJ0bj1uZXcgbix0aGlzLmFkZCh0aGlzLnN1Ym1pdEJ0biksdGhpc30sdXBsb2FkRG9uZTpmdW5jdGlvbigpe3RoaXMuc3VibWl0QnRuLmRpc2FibGUoITEpfX0pO3JldHVybiBpfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNDcwKV0scj1mdW5jdGlvbih0KXt2YXIgZT10LmV4dGVuZCh7dGFnTmFtZToiaW5wdXQiLGNsYXNzTmFtZToiYnV0dG9uIixhdHRyaWJ1dGVzOnt0eXBlOiJzdWJtaXQiLHZhbHVlOiJVcGxvYWQgTG9nbyJ9LGRpc2FibGU6ZnVuY3Rpb24odCl7dGhpcy4kZWwucHJvcCgiZGlzYWJsZWQiLHQpfX0pO3JldHVybiBlfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oNjMxKSxuKDY4OCksbig2NDIpLG4oNjQ1KSxuKDY1OCksbig2NjIpLG4oNjY0KSxuKDY2Nyksbig2NjkpLG4oNjcwKSxuKDY3MSksbig2NzMpLG4oNjc0KSxuKDY3NSksbig2NzYpLG4oNjc5KSxuKDY4MCksbig2ODEpLG4oNjgyKSxuKDY4NCksbig2ODYpLG4oNjE5KSxuKDY5NCksbig2OTUpLG4oNjk4KSxuKDY5OSksbig3MDEpLG4oNzAyKSxuKDcwMyksbig3MDQpLG4oNzA1KSxuKDcwNiksbig3MDcpLG4oNzA4KSxuKDYzMyksbig3MDkpLG4oNzE1KSxuKDcxNiksbig2MzgpLG4oNzE5KSxuKDcyMildLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhLGwsYyx1LGQsaCxwLGYsbSxfLGcsdix5LGIsdyxNLFMsVCxrLEwseCxBLEUsRCxDLFksTyxQLE4sSSxSLGosSCxGKXtyZXR1cm4gdC5leHRlbmQoe3JvdXRlczp7IiI6InByaW1hcnlBdXRoIixzaWduaW46InByaW1hcnlBdXRoIiwic2lnbmluL3ZlcmlmeS9kdW8vd2ViIjoidmVyaWZ5RHVvIiwic2lnbmluL3ZlcmlmeS9maWRvL3dlYmF1dGhuIjoidmVyaWZ5V2luZG93c0hlbGxvIiwic2lnbmluL3ZlcmlmeS9maWRvL3UyZiI6InZlcmlmeVUyRiIsInNpZ25pbi92ZXJpZnkvOnByb3ZpZGVyLzpmYWN0b3JUeXBlIjoidmVyaWZ5Iiwic2lnbmluL2Vucm9sbCI6ImVucm9sbENob2ljZXMiLCJzaWduaW4vZW5yb2xsL2R1by93ZWIiOiJlbnJvbGxEdW8iLCJzaWduaW4vZW5yb2xsL29rdGEvcXVlc3Rpb24iOiJlbnJvbGxRdWVzdGlvbiIsInNpZ25pbi9lbnJvbGwvb2t0YS9zbXMiOiJlbnJvbGxTbXMiLCJzaWduaW4vZW5yb2xsL29rdGEvY2FsbCI6ImVucm9sbENhbGwiLCJzaWduaW4vZW5yb2xsLWFjdGl2YXRlL29rdGEvc21zIjoiZW5yb2xsU21zIiwic2lnbmluL2Vucm9sbC9yc2EvdG9rZW4iOiJlbnJvbGxSc2EiLCJzaWduaW4vZW5yb2xsL2RlbF9vYXRoL3Rva2VuIjoiZW5yb2xsT25QcmVtIiwic2lnbmluL2Vucm9sbC9zeW1hbnRlYy90b2tlbiI6ImVucm9sbFN5bWFudGVjVmlwIiwic2lnbmluL2Vucm9sbC95dWJpY28vdG9rZW46aGFyZHdhcmUiOiJlbnJvbGxZdWJpa2V5Iiwic2lnbmluL2Vucm9sbC9maWRvL3dlYmF1dGhuIjoiZW5yb2xsV2luZG93c0hlbGxvIiwic2lnbmluL2Vucm9sbC9maWRvL3UyZiI6ImVucm9sbFUyRiIsInNpZ25pbi9lbnJvbGwvOnByb3ZpZGVyLzpmYWN0b3JUeXBlIjoiZW5yb2xsVG90cEZhY3RvciIsInNpZ25pbi9lbnJvbGwtYWN0aXZhdGUvb2t0YS9wdXNoIjoic2NhbkJhcmNvZGVQdXNoRmFjdG9yIiwic2lnbmluL2Vucm9sbC1hY3RpdmF0ZS9va3RhL3B1c2gvbWFudWFsIjoibWFudWFsU2V0dXBQdXNoRmFjdG9yIiwic2lnbmluL2Vucm9sbC1hY3RpdmF0ZS9va3RhL3B1c2gvc2VudCI6ImFjdGl2YXRpb25MaW5rU2VudCIsInNpZ25pbi9lbnJvbGwtYWN0aXZhdGUvb2t0YS90b2tlbjpzb2Z0d2FyZTp0b3RwL3Bhc3Njb2RlIjoiZW50ZXJQYXNzY29kZUluUHVzaEVucm9sbG1lbnRGbG93Iiwic2lnbmluL2Vucm9sbC1hY3RpdmF0ZS86cHJvdmlkZXIvOmZhY3RvclR5cGUiOiJzY2FuQmFyY29kZVRvdHBGYWN0b3IiLCJzaWduaW4vZW5yb2xsLWFjdGl2YXRlLzpwcm92aWRlci86ZmFjdG9yVHlwZS9hY3RpdmF0ZSI6ImFjdGl2YXRlVG90cEZhY3RvciIsInNpZ25pbi9lbnJvbGwtYWN0aXZhdGUvOnByb3ZpZGVyLzpmYWN0b3JUeXBlL21hbnVhbCI6Im1hbnVhbFNldHVwVG90cEZhY3RvciIsInNpZ25pbi9wYXNzd29yZC1leHBpcmVkIjoicGFzc3dvcmRFeHBpcmVkIiwic2lnbmluL2N1c3RvbS1wYXNzd29yZC1leHBpcmVkIjoiY3VzdG9tUGFzc3dvcmRFeHBpcmVkIiwic2lnbmluL2ZvcmdvdC1wYXNzd29yZCI6ImZvcmdvdFBhc3N3b3JkIiwic2lnbmluL3JlY292ZXJ5LWNoYWxsZW5nZSI6InJlY292ZXJ5Q2hhbGxlbmdlIiwic2lnbmluL3JlY292ZXJ5LWVtYWlsZWQiOiJyZWNvdmVyeUVtYWlsU2VudCIsInNpZ25pbi9yZWNvdmVyeS1xdWVzdGlvbiI6InJlY292ZXJ5UXVlc3Rpb24iLCJzaWduaW4vcGFzc3dvcmQtcmVzZXQiOiJwYXNzd29yZFJlc2V0Iiwic2lnbmluL3Jlc2V0LXBhc3N3b3JkLzp0b2tlbiI6InJlY292ZXJ5TG9hZGluZyIsInNpZ25pbi91c2VyLXVubG9jay86dG9rZW4iOiJyZWNvdmVyeUxvYWRpbmciLCJzaWduaW4vcmVjb3ZlcnkvOnRva2VuIjoicmVjb3ZlcnlMb2FkaW5nIiwic2lnbmluL3VubG9jay1lbWFpbGVkIjoidW5sb2NrRW1haWxTZW50Iiwic2lnbmluL3VubG9jayI6InVubG9ja0FjY291bnQiLCJzaWduaW4vYWNjb3VudC11bmxvY2tlZCI6ImFjY291bnRVbmxvY2tlZCIsInNpZ25pbi9yZWZyZXNoLWF1dGgtc3RhdGUoLzp0b2tlbikiOiJyZWZyZXNoQXV0aFN0YXRlIiwic2lnbmluL3JlZ2lzdGVyIjoicmVnaXN0ZXIiLCJzaWduaW4vcmVnaXN0ZXItY29tcGxldGUiOiJyZWdpc3RlckNvbXBsZXRlIiwic2lnbmluL2NvbnNlbnQiOiJjb25zZW50UmVxdWlyZWQiLCIqd2lsZGNhcmQiOiJwcmltYXJ5QXV0aCJ9LHN0YXRlTGVzc1JvdXRlSGFuZGxlcnM6WyJwcmltYXJ5QXV0aCIsImZvcmdvdFBhc3N3b3JkIiwicmVjb3ZlcnlMb2FkaW5nIiwidW5sb2NrQWNjb3VudCIsInJlZnJlc2hBdXRoU3RhdGUiLCJyZWdpc3RlciIsInJlZ2lzdGVyQ29tcGxldGUiXSxwcmltYXJ5QXV0aDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKGUse0JlYWNvbjpqfSl9LHZlcmlmeUR1bzpmdW5jdGlvbigpe3RoaXMucmVuZGVyKG4se3Byb3ZpZGVyOiJEVU8iLGZhY3RvclR5cGU6IndlYiIsQmVhY29uOkh9KX0sdmVyaWZ5V2luZG93c0hlbGxvOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIocix7cHJvdmlkZXI6IkZJRE8iLGZhY3RvclR5cGU6IndlYmF1dGhuIixCZWFjb246SH0pfSx2ZXJpZnlVMkY6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihvLHtwcm92aWRlcjoiRklETyIsZmFjdG9yVHlwZToidTJmIixCZWFjb246SH0pfSx2ZXJpZnk6ZnVuY3Rpb24odCxlKXt0aGlzLnJlbmRlcihpLHtwcm92aWRlcjp0LnRvVXBwZXJDYXNlKCksZmFjdG9yVHlwZTplLEJlYWNvbjpIfSl9LGVucm9sbENob2ljZXM6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihzLHtCZWFjb246an0pfSxlbnJvbGxEdW86ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihhLHtwcm92aWRlcjoiRFVPIixmYWN0b3JUeXBlOiJ3ZWIiLEJlYWNvbjpIfSl9LGVucm9sbFF1ZXN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIobCx7cHJvdmlkZXI6Ik9LVEEiLGZhY3RvclR5cGU6InF1ZXN0aW9uIixCZWFjb246SH0pfSxlbnJvbGxTbXM6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcih1LHtwcm92aWRlcjoiT0tUQSIsZmFjdG9yVHlwZToic21zIixCZWFjb246SH0pfSxlbnJvbGxDYWxsOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIodSx7cHJvdmlkZXI6Ik9LVEEiLGZhY3RvclR5cGU6ImNhbGwiLEJlYWNvbjpIfSl9LGVucm9sbFJzYTpmdW5jdGlvbigpe3RoaXMucmVuZGVyKGQse3Byb3ZpZGVyOiJSU0EiLGZhY3RvclR5cGU6InRva2VuIixCZWFjb246SH0pfSxlbnJvbGxPblByZW06ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihkLHtwcm92aWRlcjoiREVMX09BVEgiLGZhY3RvclR5cGU6InRva2VuIixCZWFjb246SH0pfSxlbnJvbGxTeW1hbnRlY1ZpcDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKGgse3Byb3ZpZGVyOiJTWU1BTlRFQyIsZmFjdG9yVHlwZToidG9rZW4iLEJlYWNvbjpIfSl9LGVucm9sbFl1YmlrZXk6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihwLHtwcm92aWRlcjoiWVVCSUNPIixmYWN0b3JUeXBlOiJ0b2tlbjpoYXJkd2FyZSIsQmVhY29uOkh9KX0sZW5yb2xsVG90cEZhY3RvcjpmdW5jdGlvbih0LGUpe3RoaXMucmVuZGVyKGYse3Byb3ZpZGVyOnQudG9VcHBlckNhc2UoKSxmYWN0b3JUeXBlOmUsQmVhY29uOkh9KX0sZW5yb2xsV2luZG93c0hlbGxvOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoYyx7cHJvdmlkZXI6IkZJRE8iLGZhY3RvclR5cGU6IndlYmF1dGhuIixCZWFjb246SH0pfSxlbnJvbGxVMkY6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihtLHtwcm92aWRlcjoiRklETyIsZmFjdG9yVHlwZToidTJmIixCZWFjb246SH0pfSxzY2FuQmFyY29kZVRvdHBGYWN0b3I6ZnVuY3Rpb24odCxlKXt0aGlzLnJlbmRlcihfLHtwcm92aWRlcjp0LnRvVXBwZXJDYXNlKCksZmFjdG9yVHlwZTplLEJlYWNvbjpIfSl9LHNjYW5CYXJjb2RlUHVzaEZhY3RvcjpmdW5jdGlvbigpe3RoaXMucmVuZGVyKGcse3Byb3ZpZGVyOiJPS1RBIixmYWN0b3JUeXBlOiJwdXNoIixCZWFjb246SH0pfSxhY3RpdmF0ZVRvdHBGYWN0b3I6ZnVuY3Rpb24odCxlKXt0aGlzLnJlbmRlcih2LHtwcm92aWRlcjp0LnRvVXBwZXJDYXNlKCksZmFjdG9yVHlwZTplLEJlYWNvbjpIfSl9LG1hbnVhbFNldHVwVG90cEZhY3RvcjpmdW5jdGlvbih0LGUpe3RoaXMucmVuZGVyKHkse3Byb3ZpZGVyOnQudG9VcHBlckNhc2UoKSxmYWN0b3JUeXBlOmUsQmVhY29uOkh9KX0sbWFudWFsU2V0dXBQdXNoRmFjdG9yOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoYix7cHJvdmlkZXI6Ik9LVEEiLGZhY3RvclR5cGU6InB1c2giLEJlYWNvbjpIfSl9LGFjdGl2YXRpb25MaW5rU2VudDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKHcse3Byb3ZpZGVyOiJPS1RBIixmYWN0b3JUeXBlOiJwdXNoIixCZWFjb246SH0pfSxlbnRlclBhc3Njb2RlSW5QdXNoRW5yb2xsbWVudEZsb3c6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihNLHtwcm92aWRlcjoiT0tUQSIsZmFjdG9yVHlwZToidG9rZW46c29mdHdhcmU6dG90cCIsQmVhY29uOkh9KX0scGFzc3dvcmRFeHBpcmVkOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoUyx7QmVhY29uOmp9KX0sY3VzdG9tUGFzc3dvcmRFeHBpcmVkOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoVCx7QmVhY29uOmp9KX0sZm9yZ290UGFzc3dvcmQ6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihrKX0scmVjb3ZlcnlDaGFsbGVuZ2U6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihMLHtCZWFjb246an0pfSxyZWNvdmVyeUVtYWlsU2VudDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKHgse0JlYWNvbjpqfSl9LHVubG9ja0VtYWlsU2VudDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKE8se0JlYWNvbjpqfSl9LHJlY292ZXJ5UXVlc3Rpb246ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihBLHtCZWFjb246an0pfSxwYXNzd29yZFJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoRSx7QmVhY29uOmp9KX0scmVjb3ZlcnlMb2FkaW5nOmZ1bmN0aW9uKHQpe3RoaXMucmVuZGVyKEQse3Rva2VuOnQsQmVhY29uOmp9KX0sdW5sb2NrQWNjb3VudDpmdW5jdGlvbigpe3RoaXMucmVuZGVyKEMpfSxhY2NvdW50VW5sb2NrZWQ6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihZLHtCZWFjb246an0pfSxyZWZyZXNoQXV0aFN0YXRlOmZ1bmN0aW9uKHQpe3RoaXMucmVuZGVyKFAse3Rva2VuOnQsQmVhY29uOmp9KX0scmVnaXN0ZXI6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihOKX0scmVnaXN0ZXJDb21wbGV0ZTpmdW5jdGlvbigpe3RoaXMucmVuZGVyKEkpfSxjb25zZW50UmVxdWlyZWQ6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcihSLHtCZWFjb246Rn0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMCksbig2MjIpLG4oNjIzKSxuKDYyNildLHI9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10Ll8scz02ZTMsYT10LlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluayBoZWxwIGpzLWJhY2siIGRhdGEtc2U9ImJhY2stbGluayI+XHQgICAgICAgIHt7aTE4biBjb2RlPSJvZm9ybS5iYWNrIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgJyxjbGFzc05hbWU6ImF1dGgtZm9vdGVyIixldmVudHM6eyJjbGljayAuanMtYmFjayI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmFjaygpfX0sYmFjazpmdW5jdGlvbigpe3ZhciB0PXIuY3JlYXRlQWN0aXZhdGVGYWN0b3JVcmwodGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiYWN0aXZhdGVkRmFjdG9yUHJvdmlkZXIiKSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JUeXBlIiksIm1hbnVhbCIpO3RoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsdCl9fSksbD17dGl0bGU6by5wYXJ0aWFsKHQubG9jLCJlbnJvbGwudG90cC5lbnJvbGxWaWFFbWFpbC50aXRsZSIsImxvZ2luIiksbm9CdXR0b25CYXI6ITAsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJzZW50LWVtYWlsLWFjdGl2YXRpb24tbGluayJ9LGZvcm1DaGlsZHJlbjpbaS5WaWV3KHtWaWV3OnQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgICAgICAgIDxwPnt7aTE4biBjb2RlPSJlbnJvbGwudG90cC5lbnJvbGxWaWFFbWFpbC5tc2ciIGJ1bmRsZT0ibG9naW4ifX08L3A+XHQgICAgICAgICAgICA8cCBjbGFzcz0iZW1haWwtYWRkcmVzcyI+e3tlbWFpbH19PC9wPlx0ICAgICAgICAgICcsZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2VtYWlsOnRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJFbWFpbCIpfX19KX0pXX0sYz17dGl0bGU6by5wYXJ0aWFsKHQubG9jLCJlbnJvbGwudG90cC5lbnJvbGxWaWFTbXMudGl0bGUiLCJsb2dpbiIpLG5vQnV0dG9uQmFyOiEwLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoic2VudC1zbXMtYWN0aXZhdGlvbi1saW5rIn0sZm9ybUNoaWxkcmVuOltpLlZpZXcoe1ZpZXc6dC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgICAgICAgPHA+e3tpMThuIGNvZGU9ImVucm9sbC50b3RwLmVucm9sbFZpYVNtcy5tc2ciIGJ1bmRsZT0ibG9naW4ifX08L3A+XHQgICAgICAgICAgICA8cCBjbGFzcz0icGhvbmUtbnVtYmVyIj57e3Bob25lTnVtYmVyfX08L3A+XHQgICAgICAgICAgJyxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cGhvbmVOdW1iZXI6dGhpcy5tb2RlbC5nZXQoImZ1bGxQaG9uZU51bWJlciIpfX19KX0pXX07cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6ImVucm9sbC1hY3RpdmF0aW9uLWxpbmstc2VudCIsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm57bG9jYWw6e2NvdW50cnlDb2RlOlsic3RyaW5nIiwhMSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJ1c2VyQ291bnRyeUNvZGUiKV0scGhvbmVOdW1iZXI6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJQaG9uZU51bWJlciIpXSxfX2ZhY3RvclR5cGVfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLmZhY3RvclR5cGVdLF9fcHJvdmlkZXJfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLnByb3ZpZGVyXX0sZGVyaXZlZDp7Y291bnRyeUNhbGxpbmdDb2RlOntkZXBzOlsiY291bnRyeUNvZGUiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iKyIrZS5nZXRDYWxsaW5nQ29kZUZvckNvdW50cnkodCl9fSxmdWxsUGhvbmVOdW1iZXI6e2RlcHM6WyJjb3VudHJ5Q2FsbGluZ0NvZGUiLCJwaG9uZU51bWJlciJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX19fX19LEZvcm06ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJmYWN0b3JBY3RpdmF0aW9uVHlwZSIpO3N3aXRjaCh0KXtjYXNlIlNNUyI6cmV0dXJuIGM7Y2FzZSJFTUFJTCI6cmV0dXJuIGw7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gYWN0aXZhdGlvbiBvcHRpb246ICIrdCl9fSxGb290ZXI6YSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5wb2xsRm9yRW5yb2xsbWVudCgpfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scG9sbEZvckVucm9sbG1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBvbGwocyl9KX0sdHJhcEF1dGhSZXNwb25zZTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImlzV2FpdGluZ0ZvckFjdGl2YXRpb24iKSlyZXR1cm4gdGhpcy5wb2xsRm9yRW5yb2xsbWVudCgpLCEwfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDUwMSksbig2MjEpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT17fTtyZXR1cm4gaS5nZXRDb3VudHJpZXM9ZnVuY3Rpb24oKXt2YXIgbj10Lm9taXQoZS5jb3VudHJ5LCJITSIsIkJWIiwiVEYiKSxpPXQubWFwKG4sZnVuY3Rpb24odCxlKXtyZXR1cm57bmFtZTp0LGNvZGU6ZX19KTtpPXQuc29ydEJ5KGksIm5hbWUiKTt2YXIgcj17fTtyZXR1cm4gdC5lYWNoKGksZnVuY3Rpb24odCl7clt0LmNvZGVdPXQubmFtZX0pLHJ9LGkuZ2V0Q2FsbGluZ0NvZGVGb3JDb3VudHJ5PWZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSxpfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ISh0LmV4cG9ydHM9e1VTOiIxIixBRzoiMSIsQUk6IjEiLEFTOiIxIixCQjoiMSIsQk06IjEiLEJTOiIxIixDQToiMSIsRE06IjEiLERPOiIxIixHRDoiMSIsR1U6IjEiLEpNOiIxIixLTjoiMSIsS1k6IjEiLExDOiIxIixNUDoiMSIsTVM6IjEiLFBSOiIxIixTWDoiMSIsVEM6IjEiLFRUOiIxIixWQzoiMSIsVkc6IjEiLFZJOiIxIixSVToiNyIsS1o6IjciLEVHOiIyMCIsWkE6IjI3IixHUjoiMzAiLE5MOiIzMSIsQkU6IjMyIixGUjoiMzMiLEVTOiIzNCIsSFU6IjM2IixJVDoiMzkiLFJPOiI0MCIsQ0g6IjQxIixBVDoiNDMiLEdCOiI0NCIsR0c6IjQ0IixJTToiNDQiLEpFOiI0NCIsREs6IjQ1IixTRToiNDYiLE5POiI0NyIsU0o6IjQ3IixQTDoiNDgiLERFOiI0OSIsUEU6IjUxIixNWDoiNTIiLENVOiI1MyIsQVI6IjU0IixCUjoiNTUiLENMOiI1NiIsQ086IjU3IixWRToiNTgiLE1ZOiI2MCIsQVU6IjYxIixDQzoiNjEiLENYOiI2MSIsSUQ6IjYyIixQSDoiNjMiLE5aOiI2NCIsU0c6IjY1IixUSDoiNjYiLEpQOiI4MSIsS1I6IjgyIixWTjoiODQiLENOOiI4NiIsVFI6IjkwIixJTjoiOTEiLFBLOiI5MiIsQUY6IjkzIixMSzoiOTQiLE1NOiI5NSIsSVI6Ijk4IixTUzoiMjExIixNQToiMjEyIixFSDoiMjEyIixEWjoiMjEzIixUTjoiMjE2IixMWToiMjE4IixHTToiMjIwIixTTjoiMjIxIixNUjoiMjIyIixNTDoiMjIzIixHTjoiMjI0IixDSToiMjI1IixCRjoiMjI2IixORToiMjI3IixURzoiMjI4IixCSjoiMjI5IixNVToiMjMwIixMUjoiMjMxIixTTDoiMjMyIixHSDoiMjMzIixORzoiMjM0IixURDoiMjM1IixDRjoiMjM2IixDTToiMjM3IixDVjoiMjM4IixTVDoiMjM5IixHUToiMjQwIixHQToiMjQxIixDRzoiMjQyIixDRDoiMjQzIixBTzoiMjQ0IixHVzoiMjQ1IixJTzoiMjQ2IixBQzoiMjQ3IixTQzoiMjQ4IixTRDoiMjQ5IixSVzoiMjUwIixFVDoiMjUxIixTTzoiMjUyIixESjoiMjUzIixLRToiMjU0IixUWjoiMjU1IixVRzoiMjU2IixCSToiMjU3IixNWjoiMjU4IixaTToiMjYwIixNRzoiMjYxIixSRToiMjYyIixZVDoiMjYyIixaVzoiMjYzIixOQToiMjY0IixNVzoiMjY1IixMUzoiMjY2IixCVzoiMjY3IixTWjoiMjY4IixLTToiMjY5IixTSDoiMjkwIixUQToiMjkwIixFUjoiMjkxIixBVzoiMjk3IixGTzoiMjk4IixHTDoiMjk5IixHSToiMzUwIixQVDoiMzUxIixMVToiMzUyIixJRToiMzUzIixJUzoiMzU0IixBTDoiMzU1IixNVDoiMzU2IixDWToiMzU3IixGSToiMzU4IixBWDoiMzU4IixCRzoiMzU5IixMVDoiMzcwIixMVjoiMzcxIixFRToiMzcyIixNRDoiMzczIixBTToiMzc0IixCWToiMzc1IixBRDoiMzc2IixNQzoiMzc3IixTTToiMzc4IixWQToiMzc5IixVQToiMzgwIixSUzoiMzgxIixNRToiMzgyIixIUjoiMzg1IixTSToiMzg2IixCQToiMzg3IixNSzoiMzg5IixDWjoiNDIwIixTSzoiNDIxIixMSToiNDIzIixGSzoiNTAwIixCWjoiNTAxIixHVDoiNTAyIixTVjoiNTAzIixITjoiNTA0IixOSToiNTA1IixDUjoiNTA2IixQQToiNTA3IixQTToiNTA4IixIVDoiNTA5IixHUDoiNTkwIixCTDoiNTkwIixNRjoiNTkwIixCTzoiNTkxIixHWToiNTkyIixFQzoiNTkzIixHRjoiNTk0IixQWToiNTk1IixNUToiNTk2IixTUjoiNTk3IixVWToiNTk4IixDVzoiNTk5IixCUToiNTk5IixUTDoiNjcwIixORjoiNjcyIixCTjoiNjczIixOUjoiNjc0IixQRzoiNjc1IixUTzoiNjc2IixTQjoiNjc3IixWVToiNjc4IixGSjoiNjc5IixQVzoiNjgwIixXRjoiNjgxIixDSzoiNjgyIixOVToiNjgzIixXUzoiNjg1IixLSToiNjg2IixOQzoiNjg3IixUVjoiNjg4IixQRjoiNjg5IixUSzoiNjkwIixGTToiNjkxIixNSDoiNjkyIiwiMDAxIjoiOTc5IixLUDoiODUwIixISzoiODUyIixNTzoiODUzIixLSDoiODU1IixMQToiODU2IixCRDoiODgwIixUVzoiODg2IixNVjoiOTYwIixMQjoiOTYxIixKTzoiOTYyIixTWToiOTYzIixJUToiOTY0IixLVzoiOTY1IixTQToiOTY2IixZRToiOTY3IixPTToiOTY4IixQUzoiOTcwIixBRToiOTcxIixJTDoiOTcyIixCSDoiOTczIixRQToiOTc0IixCVDoiOTc1IixNTjoiOTc2IixOUDoiOTc3IixUSjoiOTkyIixUTToiOTkzIixBWjoiOTk0IixHRToiOTk1IixLRzoiOTk2IixVWjoiOTk4IixHUzo1MDAsUE46NjQsQVE6NjcyLFVNOjEsQU46NTk5fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMyksbig1NjIpLG4oNTU5KSxuKDYyNCksbig2MjUpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvKXt2YXIgcz10Ll8sYT10LkZvcm0uZXh0ZW5kKHtsYXlvdXQ6Im8tZm9ybS10aGVtZSIsbm9DYW5jZWxCdXR0b246ITAsY29uc3RydWN0b3I6ZnVuY3Rpb24ocil7dC5Gb3JtLmNhbGwodGhpcyxyKSxzLmVhY2gocy5yZXN1bHQodGhpcywiZm9ybUNoaWxkcmVuIil8fFtdLGZ1bmN0aW9uKHIpe3N3aXRjaChyLnR5cGUpe2Nhc2UgZS5JTlBVVDp0aGlzLmFkZElucHV0KHMuZXh0ZW5kKHtsYWJlbDohMSwibGFiZWwtdG9wIjohMH0sci52aWV3T3B0aW9ucykpO2JyZWFrO2Nhc2UgZS5CVVRUT046dGhpcy5hZGQodC5jcmVhdGVCdXR0b24ocy5leHRlbmQoe21vZGVsOnRoaXMubW9kZWx9LHIudmlld09wdGlvbnMpKSxyLmFkZE9wdGlvbnMpLGkuYXBwbHlTaG93V2hlbih0aGlzLmxhc3QoKSxyLnZpZXdPcHRpb25zJiZyLnZpZXdPcHRpb25zLnNob3dXaGVuKTticmVhaztjYXNlIGUuRElWSURFUjp0aGlzLmFkZERpdmlkZXIoci52aWV3T3B0aW9ucyk7YnJlYWs7Y2FzZSBlLlRPT0xCQVI6dGhpcy5hZGQobix7b3B0aW9uczpyLnZpZXdPcHRpb25zfSksaS5hcHBseVNob3dXaGVuKHRoaXMubGFzdCgpLHIudmlld09wdGlvbnMmJnIudmlld09wdGlvbnMuc2hvd1doZW4pO2JyZWFrO2Nhc2UgZS5WSUVXOnRoaXMuYWRkKHIudmlld09wdGlvbnMuVmlldyxyLmFkZE9wdGlvbnMpLGkuYXBwbHlTaG93V2hlbih0aGlzLmxhc3QoKSxyLnZpZXdPcHRpb25zLnNob3dXaGVuKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIGNoaWxkIHR5cGU6ICIrci50eXBlKX19LHRoaXMpfX0pO3JldHVybiByLmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluaXRpYWxpemU7aWYodGhpcy5pbml0aWFsaXplPWZ1bmN0aW9uKCl7fSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLk1vZGVsJiZ0aGlzLkZvcm0pe3ZhciBlPW8uZXh0ZW5kKHMuZXh0ZW5kKHtwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXR0aW5ncz10LnNldHRpbmdzLHRoaXMuYXBwU3RhdGU9dC5hcHBTdGF0ZSxzLm9taXQodCxbInNldHRpbmdzIiwiYXBwU3RhdGUiXSl9fSxzLnJlc3VsdCh0aGlzLCJNb2RlbCIpKSk7dGhpcy5tb2RlbD1uZXcgZSh7c2V0dGluZ3M6dGhpcy5zZXR0aW5ncyxhcHBTdGF0ZTp0aGlzLm9wdGlvbnMuYXBwU3RhdGV9LHtwYXJzZTohMH0pO3ZhciBuPWEuZXh0ZW5kKHMucmVzdWx0KHRoaXMsIkZvcm0iLHRoaXMpKTt0aGlzLmZvcm09bmV3IG4odGhpcy50b0pTT04oKSksdGhpcy5hZGQodGhpcy5mb3JtKX10aGlzLkZvb3RlciYmKHRoaXMuZm9vdGVyPW5ldyB0aGlzLkZvb3Rlcih0aGlzLnRvSlNPTigpKSx0aGlzLmFkZCh0aGlzLmZvb3RlcikpLHRoaXMuYWRkTGlzdGVuZXJzKCksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciB0PXIucHJvdG90eXBlLnRvSlNPTi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHMuZXh0ZW5kKHMucGljayh0aGlzLm9wdGlvbnMsImFwcFN0YXRlIiksdCl9LGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmZvb3RlciYmdGhpcy5mb290ZXIuYmFjayYmdGhpcy5mb290ZXIuYmFjaygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaTtpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm57dHlwZTp0LHZpZXdPcHRpb25zOmUsYWRkT3B0aW9uczpufX19dmFyIGU9IklOUFVUIixuPSJCVVRUT04iLGk9IkRJVklERVIiLHI9IlRPT0xCQVIiLG89IlZJRVciO3JldHVybntJbnB1dDp0KGUpLEJ1dHRvbjp0KG4pLERpdmlkZXI6dChpKSxUb29sYmFyOnQociksVmlldzp0KG8pLElOUFVUOmUsQlVUVE9OOm4sRElWSURFUjppLFRPT0xCQVI6cixWSUVXOm99fS5jYWxsKGUsbixlLHQpLCEodm9pZCAwIT09aSYmKHQuZXhwb3J0cz1pKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDM0NildLHI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKGUpe3JldHVybiBpLmZpbmQoZS5nZXRDaGlsZHJlbigpLGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5Gb3JtfSl9dmFyIGk9dC5fO3JldHVybiB0LkNvbnRyb2xsZXIuZXh0ZW5kKHthZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1vZGVsLmdldCgiYmFja3VwRmFjdG9yIik7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzYXZlIixmdW5jdGlvbigpe3ZhciB0PW4odGhpcyksZT10LmRpc2FibGVTdWJtaXRCdXR0b247ZSYmIXQuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpfHx0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCEwKX0pLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZXJyb3IiLGZ1bmN0aW9uKCl7dGhpcy50b2dnbGVCdXR0b25TdGF0ZSghMSl9KTt2YXIgZT1pLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zLmFwcFN0YXRlLnNldCgidHJhbnNhY3Rpb24iLHQpfSx0aGlzKSxyPWkuYmluZChmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMuYXBwU3RhdGUuc2V0KCJ0cmFuc2FjdGlvbkVycm9yIix0KX0sdGhpcyk7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzZXRUcmFuc2FjdGlvbiIsZSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzZXRUcmFuc2FjdGlvbkVycm9yIixyKSx0JiYodGhpcy5saXN0ZW5Ubyh0LCJzZXRUcmFuc2FjdGlvbiIsZSksdGhpcy5saXN0ZW5Ubyh0LCJzZXRUcmFuc2FjdGlvbkVycm9yIixyKSl9LGZldGNoSW5pdGlhbERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSx0cmFwQXV0aFJlc3BvbnNlOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBlPXQuQ29udHJvbGxlci5wcm90b3R5cGUudG9KU09OLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gaS5leHRlbmQoaS5waWNrKHRoaXMub3B0aW9ucywiYXBwU3RhdGUiKSxlKX0sdG9nZ2xlQnV0dG9uU3RhdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy4kZWwuZmluZCgiLmJ1dHRvbiIpO2UudG9nZ2xlQ2xhc3MoImxpbmstYnV0dG9uLWRpc2FibGVkIix0KS5wcm9wKCJkaXNhYmxlZCIsdCl9LHBvc3RSZW5kZXJBbmltYXRpb246ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoInBhZ2VSZW5kZXJlZCIse3BhZ2U6dGhpcy5jbGFzc05hbWV9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyksbigzNDYpXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5fLGk9WyJPQXV0aEVycm9yIiwiQXV0aFNka0Vycm9yIiwiQXV0aFBvbGxTdG9wRXJyb3IiLCJBdXRoQXBpRXJyb3IiXTtyZXR1cm4gdC5Nb2RlbC5leHRlbmQoe2RvVHJhbnNhY3Rpb246ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO3JldHVybiB0LmNhbGwodGhpcyx0aGlzLmFwcFN0YXRlLmdldCgidHJhbnNhY3Rpb24iKSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gci50cmlnZ2VyKCJzZXRUcmFuc2FjdGlvbiIsdCksdH0pLmZhaWwoZnVuY3Rpb24odCl7aWYoIkF1dGhQb2xsU3RvcEVycm9yIiE9PXQubmFtZSYmKHIudHJpZ2dlcigic2V0VHJhbnNhY3Rpb25FcnJvciIsdCksci50cmlnZ2VyKCJlcnJvciIscix0LnhociksZXx8bi5pbmRleE9mKGksdC5uYW1lKT09PS0xKSl0aHJvdyB0fSl9LG1hbmFnZVRyYW5zYWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMscj10LmNhbGwodGhpcyx0aGlzLmFwcFN0YXRlLmdldCgidHJhbnNhY3Rpb24iKSxuLmJpbmQodGhpcy5zZXRUcmFuc2FjdGlvbix0aGlzKSk7cmV0dXJuIGUuaXNQcm9taXNlKHIpJiZyLmZhaWwoZnVuY3Rpb24odCl7IkF1dGhQb2xsU3RvcEVycm9yIiE9PXQubmFtZSYmKGkudHJpZ2dlcigic2V0VHJhbnNhY3Rpb25FcnJvciIsdCksaS50cmlnZ2VyKCJlcnJvciIsaSx0LnhocikpfSksZS5yZXNvbHZlKHIpfSxzdGFydFRyYW5zYWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT10LmNhbGwodGhpcyx0aGlzLnNldHRpbmdzLmdldEF1dGhDbGllbnQoKSk7cmV0dXJuIGUuaXNQcm9taXNlKGkpP2kudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbi50cmlnZ2VyKCJzZXRUcmFuc2FjdGlvbiIsdCksdH0pLmZhaWwoZnVuY3Rpb24odCl7dGhyb3cgbi50cmlnZ2VyKCJzZXRUcmFuc2FjdGlvbkVycm9yIix0KSxuLnRyaWdnZXIoImVycm9yIixuLHQueGhyKSx0fSk6ZS5yZXNvbHZlKGkpfSxzZXRUcmFuc2FjdGlvbjpmdW5jdGlvbih0KXt0aGlzLmFwcFN0YXRlLnNldCgidHJhbnNhY3Rpb24iLHQpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDUxNCksbig2MjcpLG4oNjI4KSxuKDUwNSksbig2MjkpLG4oNjMwKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXt2YXIgYT17fSxsPXQudHBsKCJzaWduaW4vdmVyaWZ5L3t7cHJvdmlkZXJ9fS97e2ZhY3RvclR5cGV9fSIpLGM9dC50cGwoInNpZ25pbi9lbnJvbGwve3twcm92aWRlcn19L3t7ZmFjdG9yVHlwZX19IiksdT10LnRwbCgic2lnbmluL2Vucm9sbC1hY3RpdmF0ZS97e3Byb3ZpZGVyfX0ve3tmYWN0b3JUeXBlfX17eyNpZiBzdGVwfX0ve3tzdGVwfX17ey9pZn19IiksZD10LnRwbCgic2lnbmluL3JlY292ZXJ5L3t7cmVjb3ZlcnlUb2tlbn19IiksaD10LnRwbCgic2lnbmluL3JlZnJlc2gtYXV0aC1zdGF0ZXt7I2lmIHRva2VufX0ve3t0b2tlbn19e3svaWZ9fSIpLHA9dC50cGwoInt7YmFzZVVybH19L2xvZ2luL3Nlc3Npb25Db29raWVSZWRpcmVjdD9jaGVja0FjY291bnRTZXR1cENvbXBsZXRlPXRydWUmdG9rZW49e3t7dG9rZW59fX0mcmVkaXJlY3RVcmw9e3t7cmVkaXJlY3RVcmx9fX0iKTtyZXR1cm4gYS5jcmVhdGVWZXJpZnlVcmw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbCh7cHJvdmlkZXI6ZW5jb2RlVVJJQ29tcG9uZW50KHQudG9Mb3dlckNhc2UoKSksZmFjdG9yVHlwZTplbmNvZGVVUklDb21wb25lbnQoZSl9KX0sYS5jcmVhdGVFbnJvbGxGYWN0b3JVcmw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh7cHJvdmlkZXI6ZW5jb2RlVVJJQ29tcG9uZW50KHQudG9Mb3dlckNhc2UoKSksZmFjdG9yVHlwZTplbmNvZGVVUklDb21wb25lbnQoZSl9KX0sYS5jcmVhdGVBY3RpdmF0ZUZhY3RvclVybD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHUoe3Byb3ZpZGVyOmVuY29kZVVSSUNvbXBvbmVudCh0LnRvTG93ZXJDYXNlKCkpLGZhY3RvclR5cGU6ZW5jb2RlVVJJQ29tcG9uZW50KGUpLHN0ZXA6ISFuJiZlbmNvZGVVUklDb21wb25lbnQobil9KX0sYS5jcmVhdGVSZWNvdmVyeVVybD1mdW5jdGlvbih0KXtyZXR1cm4gZCh7cmVjb3ZlcnlUb2tlbjplbmNvZGVVUklDb21wb25lbnQodCl9KX0sYS5jcmVhdGVSZWZyZXNoVXJsPWZ1bmN0aW9uKHQpe3ZhciBlPXQ/ZW5jb2RlVVJJQ29tcG9uZW50KHQpOm51bGw7cmV0dXJuIGgoe3Rva2VuOmV9KX0sYS5yb3V0ZUFmdGVyQXV0aFN0YXR1c0NoYW5nZT1mdW5jdGlvbihsLGMsdSl7aWYoYyYmYy54aHImJnIuY29yc0lzTm90RW5hYmxlZChjLnhocikpcmV0dXJuIHZvaWQgbC5zZXR0aW5ncy5jYWxsR2xvYmFsRXJyb3IobmV3IG8uVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IodC5sb2MoImVycm9yLmVuYWJsZWQuY29ycyIpKSk7aWYoYyYmYy5lcnJvckNvZGU9PT1zLklOVkFMSURfVE9LRU5fRVhDRVBUSU9OKXJldHVybiBsLmFwcFN0YXRlLnNldCgiZmxhc2hFcnJvciIsdC5sb2MoImVycm9yLmV4cGlyZWQuc2Vzc2lvbiIpKSxsLmNvbnRyb2xsZXIuc3RhdGUuc2V0KCJuYXZpZ2F0ZURpciIsaS5ESVJFQ1RJT05fQkFDSyksdm9pZCBsLm5hdmlnYXRlKCIiLHt0cmlnZ2VyOiEwfSk7aWYoIWMmJnUmJnUuc3RhdHVzJiYobC5hcHBTdGF0ZS5zZXRBdXRoUmVzcG9uc2UodSksIWwuY29udHJvbGxlcnx8IWwuY29udHJvbGxlci50cmFwQXV0aFJlc3BvbnNlKHUpKSlzd2l0Y2godS5zdGF0dXMpe2Nhc2UiU1VDQ0VTUyI6aWYodS5yZWNvdmVyeVR5cGU9PT1pLlJFQ09WRVJZX1RZUEVfVU5MT0NLKXJldHVybiB2b2lkIGwubmF2aWdhdGUoInNpZ25pbi9hY2NvdW50LXVubG9ja2VkIix7dHJpZ2dlcjohMH0pO2lmKGwuc2V0dGluZ3MuZ2V0KCJvYXV0aDJFbmFibGVkIikpcmV0dXJuIHZvaWQgbi5nZXRUb2tlbnMobC5zZXR0aW5ncyx7c2Vzc2lvblRva2VuOnUuc2Vzc2lvblRva2VufSxsLmNvbnRyb2xsZXIpO3ZhciBkPXt1c2VyOnUuX2VtYmVkZGVkLnVzZXIsdHlwZTp1LnR5cGV9O2lmKHUudHlwZT09PWkuU0VTU0lPTl9TVEVQX1VQKXt2YXIgaD11Ll9saW5rcyYmdS5fbGlua3MubmV4dCYmdS5fbGlua3MubmV4dC5ocmVmO2Quc3RlcFVwPXt1cmw6aCxmaW5pc2g6ZnVuY3Rpb24oKXtlLnJlZGlyZWN0KGgpfX19ZWxzZSBkLnR5cGU9aS5TRVNTSU9OX1NTTyxkLnNlc3Npb249e3Rva2VuOnUuc2Vzc2lvblRva2VuLHNldENvb2tpZUFuZFJlZGlyZWN0OmZ1bmN0aW9uKHQpe2UucmVkaXJlY3QocCh7YmFzZVVybDpsLnNldHRpbmdzLmdldCgiYmFzZVVybCIpLHRva2VuOmVuY29kZVVSSUNvbXBvbmVudCh1LnNlc3Npb25Ub2tlbikscmVkaXJlY3RVcmw6ZW5jb2RlVVJJQ29tcG9uZW50KHQpfSkpfX07cmV0dXJuIHZvaWQgbC5zZXR0aW5ncy5jYWxsR2xvYmFsU3VjY2VzcyhpLlNVQ0NFU1MsZCk7Y2FzZSJDT05TRU5UX1JFUVVJUkVEIjpyZXR1cm4gdm9pZChsLnNldHRpbmdzLmdldCgiZmVhdHVyZXMuY29uc2VudCIpJiZsLm5hdmlnYXRlKCJzaWduaW4vY29uc2VudCIse3RyaWdnZXI6ITB9KSk7Y2FzZSJNRkFfUkVRVUlSRUQiOnZhciBmPWwuYXBwU3RhdGUuZ2V0KCJmYWN0b3JzIikuZ2V0RGVmYXVsdEZhY3RvcigpLG09YS5jcmVhdGVWZXJpZnlVcmwoZi5nZXQoInByb3ZpZGVyIiksZi5nZXQoImZhY3RvclR5cGUiKSk7cmV0dXJuIHZvaWQgbC5uYXZpZ2F0ZShtLHt0cmlnZ2VyOiEwfSk7Y2FzZSJNRkFfQ0hBTExFTkdFIjpyZXR1cm4gdm9pZCBsLmFwcFN0YXRlLmdldCgidHJhbnNhY3Rpb24iKS5wcmV2KCkudGhlbihmdW5jdGlvbih0KXtsLmFwcFN0YXRlLnNldCgidHJhbnNhY3Rpb24iLHQpfSkuZG9uZSgpO2Nhc2UiTUZBX0VOUk9MTCI6cmV0dXJuIHZvaWQgbC5uYXZpZ2F0ZSgic2lnbmluL2Vucm9sbCIse3RyaWdnZXI6ITB9KTtjYXNlIk1GQV9FTlJPTExfQUNUSVZBVEUiOnZhciBfPWEuY3JlYXRlQWN0aXZhdGVGYWN0b3JVcmwobC5hcHBTdGF0ZS5nZXQoImFjdGl2YXRlZEZhY3RvclByb3ZpZGVyIiksbC5hcHBTdGF0ZS5nZXQoImFjdGl2YXRlZEZhY3RvclR5cGUiKSk7cmV0dXJuIHZvaWQgbC5uYXZpZ2F0ZShfLHt0cmlnZ2VyOiEwfSk7Y2FzZSJQQVNTV09SRF9XQVJOIjpjYXNlIlBBU1NXT1JEX0VYUElSRUQiOnJldHVybiB2b2lkKGwuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5jdXN0b21FeHBpcmVkUGFzc3dvcmQiKSYmIWwuYXBwU3RhdGUuZ2V0KCJpc1B3ZE1hbmFnZWRCeU9rdGEiKT9sLm5hdmlnYXRlKCJzaWduaW4vY3VzdG9tLXBhc3N3b3JkLWV4cGlyZWQiLHt0cmlnZ2VyOiEwfSk6bC5uYXZpZ2F0ZSgic2lnbmluL3Bhc3N3b3JkLWV4cGlyZWQiLHt0cmlnZ2VyOiEwfSkpO2Nhc2UiUkVDT1ZFUllfQ0hBTExFTkdFIjp2YXIgZz11LmZhY3RvclR5cGUudG9Mb3dlckNhc2UoKT09PWkuUkVDT1ZFUllfRkFDVE9SX1RZUEVfRU1BSUwudG9Mb3dlckNhc2UoKSx2PXUucmVjb3ZlcnlUeXBlPT09aS5SRUNPVkVSWV9UWVBFX1BBU1NXT1JELHk9dS5yZWNvdmVyeVR5cGU9PT1pLlJFQ09WRVJZX1RZUEVfVU5MT0NLO3JldHVybiB2b2lkKHYmJmc/bC5uYXZpZ2F0ZSgic2lnbmluL3JlY292ZXJ5LWVtYWlsZWQiLHt0cmlnZ2VyOiEwfSk6eSYmZz9sLm5hdmlnYXRlKCJzaWduaW4vdW5sb2NrLWVtYWlsZWQiLHt0cmlnZ2VyOiEwfSk6bC5uYXZpZ2F0ZSgic2lnbmluL3JlY292ZXJ5LWNoYWxsZW5nZSIse3RyaWdnZXI6ITB9KSk7Y2FzZSJSRUNPVkVSWSI6cmV0dXJuIHZvaWQgbC5uYXZpZ2F0ZSgic2lnbmluL3JlY292ZXJ5LXF1ZXN0aW9uIix7dHJpZ2dlcjohMH0pO2Nhc2UiUEFTU1dPUkRfUkVTRVQiOnJldHVybiB2b2lkIGwubmF2aWdhdGUoInNpZ25pbi9wYXNzd29yZC1yZXNldCIse3RyaWdnZXI6ITB9KTtjYXNlIkxPQ0tFRF9PVVQiOnJldHVybiB2b2lkKGwuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5zZWxmU2VydmljZVVubG9jayIpP2wubmF2aWdhdGUoInNpZ25pbi91bmxvY2siLHt0cmlnZ2VyOiEwfSk6bC5jb250cm9sbGVyLm1vZGVsLnRyaWdnZXIoImVycm9yIixsLmNvbnRyb2xsZXIubW9kZWwse3Jlc3BvbnNlSlNPTjp7ZXJyb3JDYXVzZXM6W10sZXJyb3JTdW1tYXJ5OnQubG9jKCJlcnJvci5hdXRoLmxvY2tlZE91dCIsImxvZ2luIil9fSkpO2Nhc2UiVU5BVVRIRU5USUNBVEVEIjpyZXR1cm4gdm9pZCBsLm5hdmlnYXRlKCJzaWduaW4iLHt0cmlnZ2VyOiEwfSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdHVzOiAiK3Uuc3RhdHVzKX19LGF9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pew==", "base64"));
  res.write(new Buffer("dmFyIGkscjtpPVtuKDM1Nyksbig2MjgpLG4oNjI5KV0scj1mdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiBvLmlzQXJyYXkodC5yZXNwb25zZVR5cGUpP28uY29udGFpbnModC5yZXNwb25zZVR5cGUsZSk6ZT09PXQucmVzcG9uc2VUeXBlfXZhciByPXt9LG89dC5fO3JldHVybiByLmdldFRva2Vucz1mdW5jdGlvbihyLHMsYSl7ZnVuY3Rpb24gbCh0KXtyLmNhbGxHbG9iYWxTdWNjZXNzKGUuU1VDQ0VTUyx0KX1mdW5jdGlvbiBjKHQpeyJhY2Nlc3NfZGVuaWVkIj09PXQuZXJyb3JDb2RlPyhhLm1vZGVsLnRyaWdnZXIoImVycm9yIixhLm1vZGVsLHtyZXNwb25zZUpTT046dH0pLGEubW9kZWwuYXBwU3RhdGUudHJpZ2dlcigicmVtb3ZlTG9hZGluZyIpKTpyLmNhbGxHbG9iYWxFcnJvcihuZXcgbi5PQXV0aEVycm9yKHQubWVzc2FnZSkpfXZhciB1PXIuZ2V0QXV0aENsaWVudCgpLGQ9ci50b0pTT04oe3ZlcmJvc2U6ITB9KSxoPXt9LHA9e307by5leHRlbmQoaCxvLnBpY2soZCwiY2xpZW50SWQiLCJyZWRpcmVjdFVyaSIpLG8ucGljayhkLmF1dGhQYXJhbXMsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlTW9kZSIsImRpc3BsYXkiLCJzY29wZXMiLCJzdGF0ZSIsIm5vbmNlIikscykscC5wb3B1cFRpdGxlPXQubG9jKCJzb2NpYWxhdXRoLnBvcHVwLnRpdGxlIiwibG9naW4iKSxwLnRpbWVvdXQ9ZC5vQXV0aFRpbWVvdXQsby5leHRlbmQocCxvLnBpY2soZC5hdXRoUGFyYW1zLCJpc3N1ZXIiLCJhdXRob3JpemVVcmwiKSksInBhZ2UiPT09aC5kaXNwbGF5fHxpKGgsImNvZGUiKT91LnRva2VuLmdldFdpdGhSZWRpcmVjdChoLHApOmguc2Vzc2lvblRva2VuP3UudG9rZW4uZ2V0V2l0aG91dFByb21wdChoLHApLnRoZW4obCkuZmFpbChjKS5kb25lKCk6dS50b2tlbi5nZXRXaXRoUG9wdXAoaCxwKS50aGVuKGwpLmZhaWwoYykuZG9uZSgpfSxyfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ISh0LmV4cG9ydHM9e0RJUkVDVElPTl9CQUNLOiJESVJFQ1RJT05fQkFDSyIsUkVDT1ZFUllfVFlQRV9QQVNTV09SRDoiUEFTU1dPUkQiLFJFQ09WRVJZX1RZUEVfVU5MT0NLOiJVTkxPQ0siLFJFQ09WRVJZX0ZBQ1RPUl9UWVBFX1NNUzoiU01TIixSRUNPVkVSWV9GQUNUT1JfVFlQRV9FTUFJTDoiRU1BSUwiLFJFQ09WRVJZX0ZBQ1RPUl9UWVBFX0NBTEw6IkNBTEwiLFNVQ0NFU1M6IlNVQ0NFU1MiLEZPUkdPVF9QQVNTV09SRF9FTUFJTF9TRU5UOiJGT1JHT1RfUEFTU1dPUkRfRU1BSUxfU0VOVCIsVU5MT0NLX0FDQ09VTlRfRU1BSUxfU0VOVDoiVU5MT0NLX0FDQ09VTlRfRU1BSUxfU0VOVCIsQ09ORklHX0VSUk9SOiJDT05GSUdfRVJST1IiLFVOU1VQUE9SVEVEX0JST1dTRVJfRVJST1I6IlVOU1VQUE9SVEVEX0JST1dTRVJfRVJST1IiLE9BVVRIX0VSUk9SOiJPQVVUSF9FUlJPUiIsQUxMX09QVElPTkFMX05PTkVfRU5ST0xMRUQ6IkFMTF9PUFRJT05BTF9OT05FX0VOUk9MTEVEIixBTExfT1BUSU9OQUxfU09NRV9FTlJPTExFRDoiQUxMX09QVElPTkFMX1NPTUVfRU5ST0xMRUQiLEhBU19SRVFVSVJFRF9OT05FX0VOUk9MTEVEOiJIQVNfUkVRVUlSRURfTk9ORV9FTlJPTExFRCIsSEFTX1JFUVVJUkVEX1NPTUVfUkVRVUlSRURfRU5ST0xMRUQ6IkhBU19SRVFVSVJFRF9TT01FX1JFUVVJUkVEX0VOUk9MTEVEIixIQVNfUkVRVUlSRURfQUxMX1JFUVVJUkVEX0VOUk9MTEVEOiJIQVNfUkVRVUlSRURfQUxMX1JFUVVJUkVEX0VOUk9MTEVEIixQUklNQVJZX0FVVEg6IlBSSU1BUllfQVVUSCIsRk9SR09UX1BBU1NXT1JEOiJGT1JHT1RfUEFTU1dPUkQiLFVOTE9DS19BQ0NPVU5UOiJVTkxPQ0tfQUNDT1VOVCIsU0VTU0lPTl9TU086IlNFU1NJT05fU1NPIixTRVNTSU9OX1NURVBfVVA6IlNFU1NJT05fU1RFUF9VUCJ9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjI4KV0scj1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4obil7dGhpcy5uYW1lPWUuQ09ORklHX0VSUk9SLHRoaXMubWVzc2FnZT1ufHx0LmxvYygiZXJyb3IuY29uZmlnIil9ZnVuY3Rpb24gaShuKXt0aGlzLm5hbWU9ZS5VTlNVUFBPUlRFRF9CUk9XU0VSX0VSUk9SLHRoaXMubWVzc2FnZT1ufHx0LmxvYygiZXJyb3IudW5zdXBwb3J0ZWQuYnJvd3NlciIpfWZ1bmN0aW9uIHIodCl7dGhpcy5uYW1lPWUuT0FVVEhfRVJST1IsdGhpcy5tZXNzYWdlPXR9cmV0dXJuIG4ucHJvdG90eXBlPW5ldyBFcnJvcixpLnByb3RvdHlwZT1uZXcgRXJyb3Isci5wcm90b3R5cGU9bmV3IEVycm9yLHtDb25maWdFcnJvcjpuLFVuc3VwcG9ydGVkQnJvd3NlckVycm9yOmksT0F1dGhFcnJvcjpyfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiOyEodC5leHBvcnRzPXtJTlZBTElEX1RPS0VOX0VYQ0VQVElPTjoiRTAwMDAwMTEifSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDM2MCksbig1MDUpLG4oNjMzKSxuKDYzNCksbig2MzUpLG4oNjM4KSxuKDYzMiksbig2MzkpLG4oNjI2KSxuKDYzNiksbig2MjkpLG4oNTAxKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEsbCxjLHUsZCxoKXtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIF8uZmluZCh0LnN0YXRlTGVzc1JvdXRlSGFuZGxlcnMsZnVuY3Rpb24obil7cmV0dXJuIGU9PT10W25dfSl9ZnVuY3Rpb24gZih0LGUpe3JldHVybiEhdCYmKHQhPT1zfHxlLmdldCgiZmVhdHVyZXMuc2VjdXJpdHlJbWFnZSIpKX1mdW5jdGlvbiBtKHQsZSxuLGkpe3ZhciByPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRyaWdnZXIoImxvYWRpbmciLCEwKX0sMjAwKTtyZXR1cm4gaC5sb2FkTGFuZ3VhZ2UodC5nZXQoImxhbmd1YWdlQ29kZSIpLGUse2Jhc2VVcmw6bixyZXdyaXRlOml9KS50aGVuKGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpLHQudHJpZ2dlcigibG9hZGluZyIsITEpfSl9dmFyIF89dC5fLGc9dC4kO3JldHVybiB0LlJvdXRlci5leHRlbmQoe0V2ZW50czplLkV2ZW50cyxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMuc2V0dGluZ3M9bmV3IHIoXy5vbWl0KGUsImVsIiwiYXV0aENsaWVudCIpLHtwYXJzZTohMH0pLHRoaXMuc2V0dGluZ3Muc2V0QXV0aENsaWVudChlLmF1dGhDbGllbnQpLGUuZWx8fHRoaXMuc2V0dGluZ3MuY2FsbEdsb2JhbEVycm9yKG5ldyBkLkNvbmZpZ0Vycm9yKHQubG9jKCJlcnJvci5yZXF1aXJlZC5lbCIpKSksZygiYm9keSA+IGRpdiIpLm9uKCJjbGljayIsZnVuY3Rpb24oKXt9KSx0aGlzLmFwcFN0YXRlPW5ldyBsKHtiYXNlVXJsOnRoaXMuc2V0dGluZ3MuZ2V0KCJiYXNlVXJsIiksc2V0dGluZ3M6dGhpcy5zZXR0aW5nc30se3BhcnNlOiEwfSk7dmFyIG49bmV3IGEoe2FwcFN0YXRlOnRoaXMuYXBwU3RhdGV9KTt0LiQoZS5lbCkuYXBwZW5kKG4ucmVuZGVyKCkuJGVsKSx0aGlzLmVsPSIjb2t0YS1zaWduLWluIix0aGlzLmhlYWRlcj1uZXcgbyh7ZWw6dGhpcy5lbCxhcHBTdGF0ZTp0aGlzLmFwcFN0YXRlLHNldHRpbmdzOnRoaXMuc2V0dGluZ3N9KSx0aGlzLmxpc3RlblRvKHRoaXMuYXBwU3RhdGUsImNoYW5nZTp0cmFuc2FjdGlvbkVycm9yIixmdW5jdGlvbih0LGUpe2Mucm91dGVBZnRlckF1dGhTdGF0dXNDaGFuZ2UodGhpcyxlKX0pLHRoaXMubGlzdGVuVG8odGhpcy5hcHBTdGF0ZSwiY2hhbmdlOnRyYW5zYWN0aW9uIixmdW5jdGlvbih0LGUpe2Mucm91dGVBZnRlckF1dGhTdGF0dXNDaGFuZ2UodGhpcyxudWxsLGUuZGF0YSl9KSx0aGlzLmxpc3RlblRvKHRoaXMuYXBwU3RhdGUsIm5hdmlnYXRlIixmdW5jdGlvbih0KXt0aGlzLm5hdmlnYXRlKHQse3RyaWdnZXI6ITB9KX0pfSxleGVjdXRlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zZXR0aW5ncy5nZXQoInJlY292ZXJ5VG9rZW4iKTtpZihuKXJldHVybiB0aGlzLnNldHRpbmdzLnVuc2V0KCJyZWNvdmVyeVRva2VuIiksdm9pZCB0aGlzLm5hdmlnYXRlKGMuY3JlYXRlUmVjb3ZlcnlVcmwobikse3RyaWdnZXI6ITB9KTt2YXIgaT10aGlzLnNldHRpbmdzLmdldCgic3RhdGVUb2tlbiIpO2lmKGkpcmV0dXJuIHRoaXMuc2V0dGluZ3MudW5zZXQoInN0YXRlVG9rZW4iKSx2b2lkIHRoaXMubmF2aWdhdGUoYy5jcmVhdGVSZWZyZXNoVXJsKGkpLHt0cmlnZ2VyOiEwfSk7dmFyIHI9dGhpcy5hcHBTdGF0ZS5nZXQoInRyYW5zYWN0aW9uIik7cmV0dXJuIHImJnIuZGF0YXx8cCh0aGlzLHQpP3ZvaWQgdC5hcHBseSh0aGlzLGUpOnRoaXMuc2V0dGluZ3MuZ2V0QXV0aENsaWVudCgpLnR4LmV4aXN0cygpP3ZvaWQgdGhpcy5uYXZpZ2F0ZShjLmNyZWF0ZVJlZnJlc2hVcmwoKSx7dHJpZ2dlcjohMH0pOnZvaWQgdGhpcy5uYXZpZ2F0ZSgiIix7dHJpZ2dlcjohMH0pfSxuYXZpZ2F0ZTpmdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLnNldHRpbmdzLmdldCgiZmVhdHVyZXMucm91dGVyIik/dC5Sb3V0ZXIucHJvdG90eXBlLm5hdmlnYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTppJiZpLnRyaWdnZXI/ZS5oaXN0b3J5LmxvYWRVcmwobik6dm9pZCAwfSxyZW5kZXI6ZnVuY3Rpb24odCxlKXtlfHwoZT17fSk7dmFyIG49ZS5CZWFjb24saT1fLmV4dGVuZCh7c2V0dGluZ3M6dGhpcy5zZXR0aW5ncyxhcHBTdGF0ZTp0aGlzLmFwcFN0YXRlfSxfLm9taXQoZSwiQmVhY29uIikpO2lmKHRoaXMuaGVhZGVyLnJlbmRlcmVkKCl8fCh0aGlzLmVsPXRoaXMuaGVhZGVyLnJlbmRlcigpLmdldENvbnRlbnRFbCgpKSwhaC5pc0xvYWRlZCh0aGlzLmFwcFN0YXRlLmdldCgibGFuZ3VhZ2VDb2RlIikpKXJldHVybiBtKHRoaXMuYXBwU3RhdGUsdGhpcy5zZXR0aW5ncy5nZXQoImkxOG4iKSx0aGlzLnNldHRpbmdzLmdldCgiYXNzZXRzLmJhc2VVcmwiKSx0aGlzLnNldHRpbmdzLmdldCgiYXNzZXRzLnJld3JpdGUiKSkudGhlbihfLmJpbmQodGhpcy5yZW5kZXIsdGhpcyx0LGUpKS5kb25lKCk7dmFyIHI9dGhpcy5jb250cm9sbGVyO3RoaXMuY29udHJvbGxlcj1uZXcgdChpKSx0aGlzLmxpc3RlblRvKHRoaXMuY29udHJvbGxlciwiYWxsIix0aGlzLnRyaWdnZXIpLHRoaXMuY29udHJvbGxlci5mZXRjaEluaXRpYWxEYXRhKCkudGhlbihfLmJpbmQoZnVuY3Rpb24oKXtyZXR1cm4gZihuLHRoaXMuc2V0dGluZ3MpfHwobj1udWxsKSx0aGlzLmhlYWRlci5zZXRCZWFjb24obixpKSx0aGlzLmNvbnRyb2xsZXIucmVuZGVyKCkscj91LnN3YXBQYWdlcyh7JHBhcmVudDp0aGlzLmVsLCRvbGRSb290OnIuJGVsLCRuZXdSb290OnRoaXMuY29udHJvbGxlci4kZWwsZGlyOnIuc3RhdGUuZ2V0KCJuYXZpZ2F0ZURpciIpLGN0eDp0aGlzLHN1Y2Nlc3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmFwcFN0YXRlLmdldCgiZmxhc2hFcnJvciIpLGU9dGhpcy5jb250cm9sbGVyLm1vZGVsO3IucmVtb3ZlKCksci4kZWwucmVtb3ZlKCksdGhpcy5jb250cm9sbGVyLnBvc3RSZW5kZXJBbmltYXRpb24oKSx0JiYoZS50cmlnZ2VyKCJlcnJvciIsZSx7cmVzcG9uc2VKU09OOntlcnJvclN1bW1hcnk6dH19KSx0aGlzLmFwcFN0YXRlLnVuc2V0KCJmbGFzaEVycm9yIikpfX0pOih0aGlzLmVsLmFwcGVuZCh0aGlzLmNvbnRyb2xsZXIuZWwpLHZvaWQgdGhpcy5jb250cm9sbGVyLnBvc3RSZW5kZXJBbmltYXRpb24oKSl9LHRoaXMpKS5mYWlsKGZ1bmN0aW9uKCl7ciYmKHIucmVtb3ZlKCksci4kZWwucmVtb3ZlKCkpfSkuZG9uZSgpfSxzdGFydDpmdW5jdGlvbigpe3ZhciBlPSExO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyJiYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInBvcHN0YXRlIixfLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5jb250cm9sbGVyLmJhY2smJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLmNvbnRyb2xsZXIuYmFjaygpKX0sdGhpcykpLGU9bi5zdXBwb3J0c1B1c2hTdGF0ZSgpKSx0LlJvdXRlci5wcm90b3R5cGUuc3RhcnQuY2FsbCh0aGlzLHtwdXNoU3RhdGU6ZX0pfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXIuJGVsLmhpZGUoKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMuaGVhZGVyLiRlbC5zaG93KCl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuY29udHJvbGxlci5yZW1vdmUoKSx0aGlzLmhlYWRlci4kZWwucmVtb3ZlKCksZS5oaXN0b3J5LnN0b3AoKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyldLHI9ZnVuY3Rpb24odCl7dmFyIGU9ImNhbi1yZW1vdmUtYmVhY29uIjtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7Y2xhc3NOYW1lOiJhdXRoLWNvbnRhaW5lciBtYWluLWNvbnRhaW5lciIsaWQ6Im9rdGEtc2lnbi1pbiIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJhdXRoLWNvbnRhaW5lciJ9LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5saXN0ZW5Ubyh0LmFwcFN0YXRlLCJjaGFuZ2U6YmVhY29uVHlwZSIsZnVuY3Rpb24odCxuKXt0aGlzLiRlbC50b2dnbGVDbGFzcyhlLCJzZWN1cml0eSI9PT1uKX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMildLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToicmVmcmVzaC1hdXRoLXN0YXRlIixNb2RlbDp7fSxGb3JtOntub0J1dHRvbkJhcjohMH0scHJlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnRva2VuLGU9dGhpcy5vcHRpb25zLmFwcFN0YXRlO3RoaXMubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihmdW5jdGlvbihuKXtyZXR1cm4gdD8oZS50cmlnZ2VyKCJsb2FkaW5nIiwhMCksbi50eC5yZXN1bWUoe3N0YXRlVG9rZW46dH0pKTpuLnR4LmV4aXN0cygpPyhlLnRyaWdnZXIoImxvYWRpbmciLCEwKSxuLnR4LnJlc3VtZSgpKTp2b2lkIGUudHJpZ2dlcigibmF2aWdhdGUiLCIiKX0pfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoImxvYWRpbmciLCExKSxlLnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDM0Niksbig2MjkpLG4oNTA1KSxuKDM1Niksbig1MDQpLG4oNjI3KSxuKDMyNyldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhKXt2YXIgbD0iZW4iLGM9WyJmYWNlYm9vayIsImdvb2dsZSIsImxpbmtlZGluIiwibWljcm9zb2Z0Il0sdT1bInRva2VuIiwiaWRfdG9rZW4iLCJjb2RlIl0sZD10LnRwbCgie3tvcmlnaW59fSIpLGg9dC5fLHA9bi5Db25maWdFcnJvcixmPW4uVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IsbT10LnRwbCgiaHR0cHM6Ly9vazFzdGF0aWMub2t0YWNkbi5jb20vYXNzZXRzL2pzL3Nkay9va3RhLXNpZ25pbi13aWRnZXQve3t2ZXJzaW9ufX0iKTtyZXR1cm4gdC5Nb2RlbC5leHRlbmQoe2ZsYXQ6ITAsYXV0aENsaWVudDp2b2lkIDAsbG9jYWw6e2Jhc2VVcmw6WyJzdHJpbmciLCEwXSxyZWNvdmVyeVRva2VuOlsic3RyaW5nIiwhMSx2b2lkIDBdLHN0YXRlVG9rZW46WyJzdHJpbmciLCExLHZvaWQgMF0sdXNlcm5hbWU6WyJzdHJpbmciLCExXSxzaWduT3V0TGluazpbInN0cmluZyIsITFdLHRyYW5zZm9ybVVzZXJuYW1lOlsiZnVuY3Rpb24iLCExXSxnbG9iYWxTdWNjZXNzRm46ImZ1bmN0aW9uIixnbG9iYWxFcnJvckZuOiJmdW5jdGlvbiIscHJvY2Vzc0NyZWRzOiJmdW5jdGlvbiIsbG9nbzoic3RyaW5nIixsb2dvVGV4dDpbInN0cmluZyIsITFdLGhlbHBTdXBwb3J0TnVtYmVyOiJzdHJpbmciLCJmZWF0dXJlcy5yb3V0ZXIiOlsiYm9vbGVhbiIsITAsITFdLCJmZWF0dXJlcy5zZWN1cml0eUltYWdlIjpbImJvb2xlYW4iLCEwLCExXSwiZmVhdHVyZXMucmVtZW1iZXJNZSI6WyJib29sZWFuIiwhMCwhMF0sImZlYXR1cmVzLmF1dG9QdXNoIjpbImJvb2xlYW4iLCEwLCExXSwiZmVhdHVyZXMuc21zUmVjb3ZlcnkiOlsiYm9vbGVhbiIsITAsITFdLCJmZWF0dXJlcy5jYWxsUmVjb3ZlcnkiOlsiYm9vbGVhbiIsITAsITFdLCJmZWF0dXJlcy5lbWFpbFJlY292ZXJ5IjpbImJvb2xlYW4iLCExLCEwXSwiZmVhdHVyZXMud2luZG93c1ZlcmlmeSI6WyJib29sZWFuIiwhMCwhMV0sImZlYXR1cmVzLnNlbGZTZXJ2aWNlVW5sb2NrIjpbImJvb2xlYW4iLCEwLCExXSwiZmVhdHVyZXMubXVsdGlPcHRpb25hbEZhY3RvckVucm9sbCI6WyJib29sZWFuIiwhMCwhMV0sImZlYXR1cmVzLnByZXZlbnRCcm93c2VyRnJvbVNhdmluZ09rdGFQYXNzd29yZCI6WyJib29sZWFuIiwhMCwhMF0sImZlYXR1cmVzLmRldmljZUZpbmdlcnByaW50aW5nIjpbImJvb2xlYW4iLCExLCExXSwiZmVhdHVyZXMuaGlkZVNpZ25PdXRMaW5rSW5NRkEiOlsiYm9vbGVhbiIsITEsITFdLCJmZWF0dXJlcy5jdXN0b21FeHBpcmVkUGFzc3dvcmQiOlsiYm9vbGVhbiIsITAsITFdLCJmZWF0dXJlcy5yZWdpc3RyYXRpb24iOlsiYm9vbGVhbiIsITEsITFdLCJmZWF0dXJlcy5jb25zZW50IjpbImJvb2xlYW4iLCExLCExXSxsYW5ndWFnZTpbImFueSIsITFdLGkxOG46WyJvYmplY3QiLCExXSwiYXNzZXRzLmJhc2VVcmwiOlsic3RyaW5nIiwhMV0sImFzc2V0cy5yZXdyaXRlIjp7dHlwZToiZnVuY3Rpb24iLHZhbHVlOmguaWRlbnRpdHl9LGF1dGhTY2hlbWU6WyJzdHJpbmciLCExLCJPQVVUSDIiXSwiYXV0aFBhcmFtcy5kaXNwbGF5Ijp7dHlwZToic3RyaW5nIix2YWx1ZXM6WyJub25lIiwicG9wdXAiLCJwYWdlIl19LCJhdXRoUGFyYW1zLnJlc3BvbnNlTW9kZSI6e3R5cGU6InN0cmluZyIsdmFsdWVzOlsicXVlcnkiLCJmcmFnbWVudCIsImZvcm1fcG9zdCIsIm9rdGFfcG9zdF9tZXNzYWdlIl19LCJhdXRoUGFyYW1zLnJlc3BvbnNlVHlwZSI6WyJhbnkiLCExLCJpZF90b2tlbiJdLCJhdXRoUGFyYW1zLnNjb3BlcyI6WyJhcnJheSIsITFdLCJhdXRoUGFyYW1zLmlzc3VlciI6WyJzdHJpbmciLCExXSwiYXV0aFBhcmFtcy5hdXRob3JpemVVcmwiOlsic3RyaW5nIiwhMV0sImF1dGhQYXJhbXMuc3RhdGUiOlsic3RyaW5nIiwhMV0sImF1dGhQYXJhbXMubm9uY2UiOlsic3RyaW5nIiwhMV0sY2xpZW50SWQ6InN0cmluZyIscmVkaXJlY3RVcmk6InN0cmluZyIsaWRwczpbImFycmF5IiwhMSxbXV0saWRwRGlzcGxheTp7dHlwZToic3RyaW5nIix2YWx1ZXM6WyJQUklNQVJZIiwiU0VDT05EQVJZIl0sdmFsdWU6IlNFQ09OREFSWSJ9LG9BdXRoVGltZW91dDpbIm51bWJlciIsITFdLCJoZWxwTGlua3MuaGVscCI6InN0cmluZyIsImhlbHBMaW5rcy5mb3Jnb3RQYXNzd29yZCI6InN0cmluZyIsImhlbHBMaW5rcy51bmxvY2siOiJzdHJpbmciLCJoZWxwTGlua3MuY3VzdG9tIjoiYXJyYXkiLGN1c3RvbUJ1dHRvbnM6WyJhcnJheSIsITEsW11dLCJyZWdpc3RyYXRpb24uY2xpY2siOiJmdW5jdGlvbiIsInJlZ2lzdHJhdGlvbi5jbGllbnRJZCI6InN0cmluZyIsImNvbnNlbnQuY2FuY2VsIjoiZnVuY3Rpb24ifSxkZXJpdmVkOntzdXBwb3J0ZWRMYW5ndWFnZXM6e2RlcHM6WyJpMThuIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIGgudW5pb24oYS5zdXBwb3J0ZWRMYW5ndWFnZXMsaC5rZXlzKHQpKX0sY2FjaGU6ITB9LGxhbmd1YWdlQ29kZTp7ZGVwczpbImxhbmd1YWdlIiwic3VwcG9ydGVkTGFuZ3VhZ2VzIl0sZm46ZnVuY3Rpb24odCxlKXt2YXIgbixvPWkuZ2V0VXNlckxhbmd1YWdlcygpLHM9aC5jbG9uZShvKSxhPXIudG9Mb3dlcihlKTtoLmlzU3RyaW5nKHQpP3MudW5zaGlmdCh0KTpoLmlzRnVuY3Rpb24odCkmJnMudW5zaGlmdCh0KGUsbykpLAoJcy5wdXNoKGwpLG49ci50b0xvd2VyKHIuZXhwYW5kTGFuZ3VhZ2VzKHMpKTt2YXIgYyx1O2ZvcihjPTA7YzxuLmxlbmd0aDtjKyspaWYodT1hLmluZGV4T2YobltjXSksdT4tMSlyZXR1cm4gZVt1XX19LG9hdXRoMkVuYWJsZWQ6e2RlcHM6WyJjbGllbnRJZCIsImF1dGhTY2hlbWUiLCJhdXRoUGFyYW1zLnJlc3BvbnNlVHlwZSJdLGZuOmZ1bmN0aW9uKHQsZSxuKXtpZighdClyZXR1cm4hMTtpZigib2F1dGgyIiE9PWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMTt2YXIgaT1oLmlzQXJyYXkobik/bjpbbl07cmV0dXJuIGguaW50ZXJzZWN0aW9uKGksdSkubGVuZ3RoPjB9LGNhY2hlOiEwfSxvYXV0aFJlZGlyZWN0VXJpOntkZXBzOlsicmVkaXJlY3RVcmkiXSxmbjpmdW5jdGlvbih0KXtpZih0KXJldHVybiB0O3ZhciBlPXdpbmRvdy5sb2NhdGlvbi5vcmlnaW47aWYoIWUpe3ZhciBuPXdpbmRvdy5sb2NhdGlvbi5ocmVmLGk9d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOyIiIT09aSYmKGU9bi5zdWJzdHJpbmcoMCxuLmxhc3RJbmRleE9mKGkpKSl9cmV0dXJuIGQoe29yaWdpbjplfSl9fSxjb25maWd1cmVkU29jaWFsSWRwczp7ZGVwczpbImlkcHMiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gaC5maWx0ZXIodCxmdW5jdGlvbih0KXtyZXR1cm4gaC5jb250YWlucyhjLHQudHlwZS50b0xvd2VyQ2FzZSgpKX0pfSxjYWNoZTohMH0sc29jaWFsQXV0aFBvc2l0aW9uVG9wOntkZXBzOlsiY29uZmlndXJlZFNvY2lhbElkcHMiLCJpZHBEaXNwbGF5Il0sZm46ZnVuY3Rpb24odCxlKXtyZXR1cm4haC5pc0VtcHR5KHQpJiYiUFJJTUFSWSI9PT1lLnRvVXBwZXJDYXNlKCl9LGNhY2hlOiEwfSxjb25maWd1cmVkQnV0dG9uczp7ZGVwczpbImNvbmZpZ3VyZWRTb2NpYWxJZHBzIiwiY3VzdG9tQnV0dG9ucyJdLGZuOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPVtdO3JldHVybiBoLmVhY2goZSxmdW5jdGlvbihlKXt2YXIgbj1lLnR5cGUudG9Mb3dlckNhc2UoKSxvPSJzb2NpYWwtYXV0aC0iK24rIi1idXR0b24iLGE9e2lkOmUuaWQsdHlwZTplLnR5cGUsZGF0YUF0dHI6byxjbGFzc05hbWU6InNvY2lhbC1hdXRoLWJ1dHRvbiAiK28sdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5sb2MoInNvY2lhbGF1dGguIituKyIubGFiZWwiKX0sY2xpY2s6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHMuZ2V0VG9rZW5zKGkse2lkcDplLmlkfSl9fTtyLnB1c2goYSl9KSxoLmlzQXJyYXkobikmJmguZWFjaChuLGZ1bmN0aW9uKHQpe3ZhciBlPXt0aXRsZTp0LnRpdGxlLGNsYXNzTmFtZTp0LmNsYXNzTmFtZSsiIGRlZmF1bHQtY3VzdG9tLWJ1dHRvbiIsY2xpY2s6dC5jbGlja307ci5wdXNoKGUpfSkscn0sY2FjaGU6ITB9LGhhc0NvbmZpZ3VyZWRCdXR0b25zOntkZXBzOlsiY29uZmlndXJlZEJ1dHRvbnMiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4haC5pc0VtcHR5KHQpfSxjYWNoZTohMH19LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7ZS5iYXNlVXJsP2UuZ2xvYmFsU3VjY2Vzc0ZuP2kuY29yc0lzTm90U3VwcG9ydGVkKCkmJnRoaXMuY2FsbEdsb2JhbEVycm9yKG5ldyBmKHQubG9jKCJlcnJvci51bnN1cHBvcnRlZC5jb3JzIikpKTp0aGlzLmNhbGxHbG9iYWxFcnJvcihuZXcgcCh0LmxvYygiZXJyb3IucmVxdWlyZWQuc3VjY2VzcyIpKSk6dGhpcy5jYWxsR2xvYmFsRXJyb3IobmV3IHAodC5sb2MoImVycm9yLnJlcXVpcmVkLmJhc2VVcmwiKSkpfSxzZXRBdXRoQ2xpZW50OmZ1bmN0aW9uKHQpe3RoaXMuYXV0aENsaWVudD10fSxnZXRBdXRoQ2xpZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXV0aENsaWVudH0sc2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0Lk1vZGVsLnByb3RvdHlwZS5zZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfWNhdGNoKGUpe3ZhciBuPWUubWVzc2FnZT9lLm1lc3NhZ2U6ZTt0aGlzLmNhbGxHbG9iYWxFcnJvcihuZXcgcChuKSl9fSxjYWxsR2xvYmFsU3VjY2VzczpmdW5jdGlvbih0LGUpe3ZhciBuPWguZXh0ZW5kKGUse3N0YXR1czp0fSk7aC5kZWZlcihoLnBhcnRpYWwodGhpcy5nZXQoImdsb2JhbFN1Y2Nlc3NGbiIpLG4pKX0sY2FsbEdsb2JhbEVycm9yOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0KCJnbG9iYWxFcnJvckZuIil8fHRoaXMub3B0aW9ucy5nbG9iYWxFcnJvckZuO2lmKCFlKXRocm93IHQ7ZSh0KX0sdHJhbnNmb3JtVXNlcm5hbWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldCgidHJhbnNmb3JtVXNlcm5hbWUiKTtyZXR1cm4gbiYmaC5pc0Z1bmN0aW9uKG4pP24odCxlKTp0fSxwcm9jZXNzQ3JlZHM6ZnVuY3Rpb24gXyh0KXt2YXIgXz10aGlzLmdldCgicHJvY2Vzc0NyZWRzIik7cmV0dXJuIGUuUHJvbWlzZShmdW5jdGlvbihlKXtoLmlzRnVuY3Rpb24oXyk/Mj09PV8ubGVuZ3RoP18odCxlKTooXyh0KSxlKCkpOmUoKX0pfSxwYXJzZTpmdW5jdGlvbih0KXtpZih0LmF1dGhQYXJhbXMmJnQuYXV0aFBhcmFtcy5zY29wZSYmKG8uZGVwcmVjYXRlKCdVc2UgInNjb3BlcyIgaW5zdGVhZCBvZiAic2NvcGUiJyksdC5hdXRoUGFyYW1zLnNjb3Blcz10LmF1dGhQYXJhbXMuc2NvcGUsZGVsZXRlIHQuYXV0aFBhcmFtcy5zY29wZSksdC5sYWJlbHN8fHQuY291bnRyeSl7by5kZXByZWNhdGUoJ1VzZSAiaTE4biIgaW5zdGVhZCBvZiAibGFiZWxzIiBhbmQgImNvdW50cnkiJyk7dmFyIGU9dC5sYWJlbHN8fHt9O2guZWFjaCh0LmNvdW50cnksZnVuY3Rpb24odCxuKXtlWyJjb3VudHJ5LiIrbl09dH0pLHQuaTE4bj17fSxoLmVhY2goYS5zdXBwb3J0ZWRMYW5ndWFnZXMsZnVuY3Rpb24obil7dC5pMThuW25dPWV9KSxkZWxldGUgdC5sYWJlbHMsZGVsZXRlIHQuY291bnRyeX10LmFzc2V0c3x8KHQuYXNzZXRzPXt9KTt2YXIgbj10LmFzc2V0cy5iYXNlVXJsO3JldHVybiBuPyIvIj09PW5bbi5sZW5ndGgtMV0mJih0LmFzc2V0cy5iYXNlVXJsPW4uc3Vic3RyaW5nKDAsbi5sZW5ndGgtMSkpOnQuYXNzZXRzLmJhc2VVcmw9bSh7dmVyc2lvbjphLnZlcnNpb259KSx0fX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYzNiksbig2MzcpXSxyPWZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0LmVxdWFscyhuKX1mdW5jdGlvbiByKHQpe3QuY3VycmVudEJlYWNvbiYmKHQuY3VycmVudEJlYWNvbi5yZW1vdmUoKSx0LmN1cnJlbnRCZWFjb249bnVsbCl9ZnVuY3Rpb24gbyh0LGUsbixpKXt0LmFkZChlLHtzZWxlY3RvcjpuLG9wdGlvbnM6aX0pLHQuY3VycmVudEJlYWNvbj10LmZpcnN0KCl9ZnVuY3Rpb24gcyh0LGUsbil7cmV0dXJuIHR8fGU/IXQmJm4ubG9hZGluZz8ibG9hZCI6dCYmaSh0KT9lPyJzd2FwIjoidW5sb2FkIjp0JiZ0LmVxdWFscyhlLG4pPyJzYW1lIjohdCYmZT8iYWRkIjp0JiYhZT8icmVtb3ZlIjp0IGluc3RhbmNlb2YgZT8iZmFkZSI6InN3YXAiOiJub25lIn12YXIgYT0ibm8tYmVhY29uIixsPSJiZWFjb24tc21hbGwgYmVhY29uLWxvYWRpbmciO3JldHVybiB0LlZpZXcuZXh0ZW5kKHtjdXJyZW50QmVhY29uOm51bGwsdGVtcGxhdGU6J1x0ICAgICAgPGRpdiBjbGFzcz0ib2t0YS1zaWduLWluLWhlYWRlciBhdXRoLWhlYWRlciI+XHQgICAgICAgIHt7I2lmIGxvZ299fVx0ICAgICAgICA8aW1nIHNyYz0ie3tsb2dvfX0iIGNsYXNzPSJhdXRoLW9yZy1sb2dvIiBhbHQ9Int7bG9nb1RleHR9fSIvPlx0ICAgICAgICB7ey9pZn19XHQgICAgICAgIDxkaXYgZGF0YS10eXBlPSJiZWFjb24tY29udGFpbmVyIiBjbGFzcz0iYmVhY29uLWNvbnRhaW5lciI+PC9kaXY+XHQgICAgICA8L2Rpdj5cdCAgICAgIDxkaXYgY2xhc3M9ImF1dGgtY29udGVudCI+PGRpdiBjbGFzcz0iYXV0aC1jb250ZW50LWlubmVyIj48L2Rpdj48L2Rpdj5cdCAgICAnLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dC5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLnNlY3VyaXR5SW1hZ2UiKXx8KHRoaXMuJGVsLmFkZENsYXNzKGEpLHRoaXMubGlzdGVuVG8odC5hcHBTdGF0ZSwibG9hZGluZyIsdGhpcy5zZXRMb2FkaW5nQmVhY29uKSx0aGlzLmxpc3RlblRvKHQuYXBwU3RhdGUsInJlbW92ZUxvYWRpbmciLHRoaXMucmVtb3ZlTG9hZGluZ0JlYWNvbikpfSxzZXRCZWFjb246ZnVuY3Rpb24odCxuKXt2YXIgYz0nW2RhdGEtdHlwZT0iYmVhY29uLWNvbnRhaW5lciJdJyx1PXRoaXMuJChjKSxkPXModGhpcy5jdXJyZW50QmVhY29uLHQsbiksaD10aGlzO3N3aXRjaChkKXtjYXNlIm5vbmUiOnJldHVybiB2b2lkIHRoaXMuJGVsLmFkZENsYXNzKGEpO2Nhc2Uic2FtZSI6cmV0dXJuO2Nhc2UiYWRkIjpyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2xhc3MoYSksbyh0aGlzLHQsYyxuKSxlLmV4cGxvZGUodSk7Y2FzZSJyZW1vdmUiOnJldHVybiB0aGlzLiRlbC5hZGRDbGFzcyhhKSxlLmltcGxvZGUodSkudGhlbihmdW5jdGlvbigpe3IoaCl9KS5kb25lKCk7Y2FzZSJmYWRlIjppZighdGhpcy5jdXJyZW50QmVhY29uLmZhZGVPdXQpdGhyb3cgbmV3IEVycm9yKCdUaGUgY3VycmVudCBiZWFjb24gaXMgbWlzc2luZyB0aGUgImZhZGVPdXQiIG1ldGhvZCcpO3JldHVybiBuLmFuaW1hdGU9ITAsdGhpcy5jdXJyZW50QmVhY29uLmZhZGVPdXQoKS50aGVuKGZ1bmN0aW9uKCl7cihoKSxvKGgsdCxjLG4pfSkuZG9uZSgpO2Nhc2Uic3dhcCI6cmV0dXJuIGUuc3dhcEJlYWNvbnMoeyRlbDp1LHN3YXA6ZnVuY3Rpb24oKXt2YXIgZT1pKGguY3VycmVudEJlYWNvbik7cihoKSxlJiYodS5yZW1vdmVDbGFzcyhsKSxoLiRlbC5yZW1vdmVDbGFzcyhhKSksbyhoLHQsYyxuKX19KS5kb25lKCk7Y2FzZSJsb2FkIjpyZXR1cm4gdS5hZGRDbGFzcyhsKSxvKGgsdCxjLG4pLGUuZXhwbG9kZSh1KTtjYXNlInVubG9hZCI6cmV0dXJuIHRoaXMucmVtb3ZlTG9hZGluZ0JlYWNvbigpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCd0aGUgIicrZCsnIiBpcyBub3QgcmVjb2duaXplZCcpfX0sc2V0TG9hZGluZ0JlYWNvbjpmdW5jdGlvbih0KXt0JiYhaSh0aGlzLmN1cnJlbnRCZWFjb24pJiZ0aGlzLnNldEJlYWNvbihuLHtsb2FkaW5nOiEwfSl9LHJlbW92ZUxvYWRpbmdCZWFjb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dGhpcy4kKCdbZGF0YS10eXBlPSJiZWFjb24tY29udGFpbmVyIl0nKTtyZXR1cm4gZS5pbXBsb2RlKG4pLnRoZW4oZnVuY3Rpb24oKXtyKHQpLG4ucmVtb3ZlQ2xhc3MobCl9KS5kb25lKCl9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldHRpbmdzLnRvSlNPTih7dmVyYm9zZTohMH0pfSxnZXRDb250ZW50RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kKCIuYXV0aC1jb250ZW50LWlubmVyIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNDYpLG4oNjI4KV0scj1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSxuLGkpe3ZhciByPXQuZGVmZXIoKTtyZXR1cm4gZS5hbmltYXRlKHsidGV4dC1pbmRlbnQiOjF9LHtkdXJhdGlvbjoyMDAsZWFzaW5nOiJzd2luZyIsc3RlcDpmdW5jdGlvbih0LHIpe3Iuc3RhcnQ9bixyLmVuZD1pLGUuY3NzKCJ0cmFuc2Zvcm0iLCJzY2FsZSgiK3QrIiwgIit0KyIpIil9LGFsd2F5czpmdW5jdGlvbigpe3IucmVzb2x2ZShlKX19KSxyLnByb21pc2V9ZnVuY3Rpb24gaShlLG4saSl7dmFyIHI9dC5kZWZlcigpO3JldHVybiBlLmFuaW1hdGUoeyJ0ZXh0LWluZGVudCI6MX0se2R1cmF0aW9uOjE1MCxlYXNpbmc6InN3aW5nIixzdGVwOmZ1bmN0aW9uKHQscil7ci5zdGFydD1uLHIuZW5kPWksZS5jc3MoInRyYW5zZm9ybSIsInJvdGF0ZSgiK3QrImRlZykiKX0sYWx3YXlzOmZ1bmN0aW9uKCl7ci5yZXNvbHZlKGUpfX0pLHIucHJvbWlzZX12YXIgcj0yMDAsbz17fTtyZXR1cm4gby5zd2FwUGFnZXM9ZnVuY3Rpb24obil7dmFyIGk9dC5kZWZlcigpLG89bi4kcGFyZW50LHM9bi4kb2xkUm9vdCxhPW4uJG5ld1Jvb3QsbD1uLnN1Y2Nlc3MsYz1uLmN0eCx1PSJ0cmFuc2l0aW9uLWZyb20tcmlnaHQiO3JldHVybiBuLmRpciYmbi5kaXI9PT1lLkRJUkVDVElPTl9CQUNLJiYodT0idHJhbnNpdGlvbi1mcm9tLWxlZnQiKSxhLmFkZENsYXNzKHUpLG8uYXBwZW5kKGEpLG8uYWRkQ2xhc3MoImFuaW1hdGlvbi1jb250YWluZXItb3ZlcmZsb3ciKSxhLmFuaW1hdGUoe2xlZnQ6IjBweCIsdG9wOiIwcHgiLG9wYWNpdHk6MX0scixmdW5jdGlvbigpe28ucmVtb3ZlQ2xhc3MoImFuaW1hdGlvbi1jb250YWluZXItb3ZlcmZsb3ciKSxhLnJlbW92ZUNsYXNzKHUpLGEucmVtb3ZlQXR0cigic3R5bGUiKSxsLmNhbGwoYyksaS5yZXNvbHZlKCl9KSxzLmFuaW1hdGUoe2hlaWdodDphLmhlaWdodCgpLG9wYWNpdHk6MH0sLjgqciksaS5wcm9taXNlfSxvLnN3YXBCZWFjb25zPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGVsLG49dC5zd2FwLGk9dC5jdHg7cmV0dXJuIHRoaXMuaW1wbG9kZShlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbChpKSxlfSkudGhlbih0aGlzLmV4cGxvZGUpfSxvLmV4cGxvZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCwwLDEpfSxvLmltcGxvZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCwxLDApfSxvLnJhZGlhbFByb2dyZXNzQmFyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGVsLG49dC5zd2FwLHI9ZS5jaGlsZHJlbigpO3JldHVybiBpKHIsMCwxODApLnRoZW4oZnVuY3Rpb24oKXtlLmNzcyh7Y2xpcDoiYXV0byJ9KX0pLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1yLmVxKDApO3JldHVybiBuKCksaSh0LDE4MCwzNjApfSkudGhlbihmdW5jdGlvbigpe2UuY3NzKHtjbGlwOiJyZWN0KDBweCwgOTZweCwgOTZweCwgNDhweCkifSksci5jc3Moe3RyYW5zZm9ybToicm90YXRlKDBkZWcpIiwidGV4dC1pbmRlbnQiOiIxcHgifSl9KX0sb30uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyldLHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9ImJlYWNvbi1ibGFuayIvPlx0ICAgICAgPGRpdiBjbGFzcz0iYmctaGVscGVyIGF1dGgtYmVhY29uIGF1dGgtYmVhY29uLXNlY3VyaXR5IiBkYXRhLXNlPSJsb2FkaW5nLWJlYWNvbiI+XHQgICAgICA8ZGl2IGNsYXNzPSJva3RhLXNpZ24taW4tYmVhY29uLWJvcmRlciBhdXRoLWJlYWNvbi1ib3JkZXIganMtYXV0aC1iZWFjb24tYm9yZGVyIi8+XHQgICAgICA8L2Rpdj5cdCAgICAnLGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcyBpbnN0YW5jZW9mIHR9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaShyLG8pe3RyeXt2YXIgcz1lW3JdKG8pLGE9cy52YWx1ZX1jYXRjaChsKXtyZXR1cm4gdm9pZCBuKGwpfXJldHVybiBzLmRvbmU/dm9pZCB0KGEpOlByb21pc2UucmVzb2x2ZShhKS50aGVuKGZ1bmN0aW9uKHQpe2koIm5leHQiLHQpfSxmdW5jdGlvbih0KXtpKCJ0aHJvdyIsdCl9KX1yZXR1cm4gaSgibmV4dCIpfSl9fXZhciByLG87cj1bbigzNTcpLG4oNjM2KV0sbz1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXt2YXIgbj1lLmdldCgic2VjdXJpdHlJbWFnZSIpLGk9ZS5nZXQoInNlY3VyaXR5SW1hZ2VEZXNjcmlwdGlvbiIpLHI9ZS5nZXQoImlzVW5kZWZpbmVkVXNlciIpLG89ZS5nZXQoImlzTmV3VXNlciIpLHM9IXImJiFvO3JldHVybiB0LmNzcygiYmFja2dyb3VuZC1pbWFnZSIsIiIpLHQucmVtb3ZlQ2xhc3MoIm5ldy11c2VyIHVuZGVmaW5lZC11c2VyIiksbz92b2lkIHQuYWRkQ2xhc3MoIm5ldy11c2VyIik6cj92b2lkIHQuYWRkQ2xhc3MoInVuZGVmaW5lZC11c2VyIik6cz8odC5yZW1vdmVBdHRyKCJhcmlhLWRlc2NyaWJlZGJ5IiksdC5maW5kKCIuYWNjZXNzaWJpbGl0eS10ZXh0IikudGV4dChpKSx2b2lkIHQuY3NzKCJiYWNrZ3JvdW5kLWltYWdlIiwidXJsKCIrYS5lc2NhcGUobikrIikiKSk6dm9pZCAwfWZ1bmN0aW9uIHIoZSxuKXtsKHdpbmRvdykub24oInJlc2l6ZS5zZWN1cml0eUJlYWNvblF0aXAiLGEuZGVib3VuY2UoZnVuY3Rpb24oKXtlLmlzKCI6dmlzaWJsZSIpJiZlLnF0aXAoInNob3ciKX0sMzAwKSksZS5xdGlwKHtwcmVyZW5kZXI6ITAsY29udGVudDp7dGV4dDp0LmxvYygicHJpbWFyeWF1dGgubmV3VXNlci50b29sdGlwIiwibG9naW4iLFthLmVzY2FwZShuKV0pLGJ1dHRvbjp0LmxvYygicHJpbWFyeWF1dGgubmV3VXNlci50b29sdGlwLmNsb3NlIiwibG9naW4iKX0sc3R5bGU6e2NsYXNzZXM6Im9rdGEtc2VjdXJpdHktaW1hZ2UtdG9vbHRpcCBzZWN1cml0eS1pbWFnZS1xdGlwIHF0aXAtY3VzdG9tIHF0aXAtc2hhZG93IHF0aXAtcm91bmRlZCIsdGlwOntoZWlnaHQ6MTIsd2lkdGg6MTZ9fSxwb3NpdGlvbjp7bXk6InRvcCBjZW50ZXIiLGF0OiJjZW50ZXIiLHRhcmdldDpsKCIuYXV0aC1iZWFjb24tc2VjdXJpdHkiKSxhZGp1c3Q6e21ldGhvZDoiZmxpcCIsc2Nyb2xsOiExLHJlc2l6ZTohMH0sZWZmZWN0OiExfSxoaWRlOntldmVudDohMSxmaXhlZDohMH0sc2hvdzp7ZXZlbnQ6ITEsZGVsYXk6MjAwfSxldmVudHM6e21vdmU6ZnVuY3Rpb24odCxlKXtlLmVsZW1lbnRzLnRhcmdldC5pcygiOnZpc2libGUiKXx8KGUuc2V0KCJoaWRlLmVmZmVjdCIsITEpLGUuaGlkZSgpLGUuc2V0KCJoaWRlLmVmZmVjdCIsITApKX19fSksZS5xdGlwKCJ0b2dnbGUiLGUuaXMoIjp2aXNpYmxlIikpfWZ1bmN0aW9uIG8odCl7dC5xdGlwKCJkZXN0cm95IiksbCh3aW5kb3cpLm9mZigicmVzaXplLnNlY3VyaXR5QmVhY29uUXRpcCIpfXZhciBzPWZ1bmN0aW9uKCl7dmFyIHQ9aShyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBzKHQsaSxhKXt2YXIgbCxjLHUsZCxoLHAsZjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24ocyl7Zm9yKDs7KXN3aXRjaChzLnByZXY9cy5uZXh0KXtjYXNlIDA6aWYobD10LmZpbmQoIi5hdXRoLWJlYWNvbi1zZWN1cml0eSIpLGM9dC5maW5kKCIuanMtYXV0aC1iZWFjb24tYm9yZGVyIiksdT0haS5nZXQoImlzVW5kZWZpbmVkVXNlciIpLGQ9aS5nZXQoImlzTmV3VXNlciIpLGg9dC5maW5kKCIucmFkaWFsLXByb2dyZXNzLWJhciIpLHA9aS5nZXQoImJhc2VVcmwiKS5tYXRjaCgvaHR0cHM/OlwvXC8oLlteXC9dKykvKVsxXSxmPTIwMCxhKXtzLm5leHQ9NTticmVha31yZXR1cm4gbihsLGkpLGMudG9nZ2xlQ2xhc3MoImF1dGgtYmVhY29uLWJvcmRlciIsdSkscy5hYnJ1cHQoInJldHVybiIpO2Nhc2UgNTppZihvKGwpLHUpe3MubmV4dD0xMDticmVha31sLmZhZGVPdXQoZixmdW5jdGlvbigpe24obCxpKSxjLnJlbW92ZUNsYXNzKCJhdXRoLWJlYWNvbi1ib3JkZXIiKSxsLmZhZGVJbihmKX0pLHMubmV4dD0xNTticmVhaztjYXNlIDEwOnJldHVybiBjLnJlbW92ZUNsYXNzKCJhdXRoLWJlYWNvbi1ib3JkZXIiKSxzLm5leHQ9MTMsZS5yYWRpYWxQcm9ncmVzc0Jhcih7JGVsOmgsc3dhcDpmdW5jdGlvbigpe2wuZmFkZU91dChmLGZ1bmN0aW9uKCl7bihsLGkpLGwuZmFkZUluKGYpfSl9fSk7Y2FzZSAxMzpjLmFkZENsYXNzKCJhdXRoLWJlYWNvbi1ib3JkZXIiKSxkJiZyKGwscCk7Y2FzZSAxNTpjYXNlImVuZCI6cmV0dXJuIHMuc3RvcCgpfX0scyx0aGlzKX0pKTtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksYT10Ll8sbD10LiQ7cmV0dXJuIHQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICA8ZGl2IGNsYXNzPSJiZWFjb24tYmxhbmsiPlx0ICAgICAgPGRpdiBjbGFzcz0icmFkaWFsLXByb2dyZXNzLWJhciI+XHQgICAgICAgIDxkaXYgY2xhc3M9ImNpcmNsZSBsZWZ0Ij48L2Rpdj5cdCAgICAgICAgPGRpdiBjbGFzcz0iY2lyY2xlIHJpZ2h0Ij48L2Rpdj5cdCAgICAgIDwvZGl2Plx0ICAgIDwvZGl2Plx0ICAgIDxkaXYgYXJpYS1saXZlPSJwb2xpdGUiIHJvbGU9ImltYWdlIiBjbGFzcz0iYmctaGVscGVyIGF1dGgtYmVhY29uIGF1dGgtYmVhY29uLXNlY3VyaXR5IiBkYXRhLXNlPSJzZWN1cml0eS1iZWFjb24iPlx0ICAgICAgPHNwYW4gY2xhc3M9ImFjY2Vzc2liaWxpdHktdGV4dCI+PC9zcGFuPlx0ICAgICAgPGRpdiBjbGFzcz0ib2t0YS1zaWduLWluLWJlYWNvbi1ib3JkZXIgYXV0aC1iZWFjb24tYm9yZGVyIGpzLWF1dGgtYmVhY29uLWJvcmRlciI+XHQgICAgICA8L2Rpdj5cdCAgICA8L2Rpdj5cdCAgICAnLGNsYXNzTmFtZToianMtc2VjdXJpdHktYmVhY29uIixpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlPWEucGFydGlhbChzLHRoaXMuJGVsLHQuYXBwU3RhdGUpLHRoaXMubGlzdGVuVG8odC5hcHBTdGF0ZSwiY2hhbmdlOnNlY3VyaXR5SW1hZ2UiLHRoaXMudXBkYXRlKSx0aGlzLmxpc3RlblRvKHQuYXBwU3RhdGUsImxvYWRpbmciLGZ1bmN0aW9uKHQpe3RoaXMuJGVsLnRvZ2dsZUNsYXNzKCJiZWFjb24tbG9hZGluZyIsdCksdGhpcy5yZW1vdmVBbnRpUGhpc2hpbmdNZXNzYWdlKCl9KSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuc2V0KCJiZWFjb25UeXBlIiwic2VjdXJpdHkiKSx0aGlzLmxpc3RlblRvKHQuYXBwU3RhdGUsIm5hdmlnYXRlIix0aGlzLnJlbW92ZUFudGlQaGlzaGluZ01lc3NhZ2UpfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGUoITEpfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMgaW5zdGFuY2VvZiB0fSxyZW1vdmVBbnRpUGhpc2hpbmdNZXNzYWdlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kZWwuZmluZCgiLmF1dGgtYmVhY29uLXNlY3VyaXR5Iik7dC5xdGlwKCJkZXN0cm95Iil9fSl9LmFwcGx5KGUsciksISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oMzQ2KSxuKDY0MCksbig1MDUpLG4oNjI5KV0scj1mdW5jdGlvbih0LGUsbixpLHIpe2Z1bmN0aW9uIG8odCxuKXt2YXIgaT1fKHtiYXNlVXJsOnQsdXNlcm5hbWU6bn0pO3JldHVybiBhLmlzRW1wdHkobil8fGEuaXNVbmRlZmluZWQobik/ZSh7c2VjdXJpdHlJbWFnZTpkLHNlY3VyaXR5SW1hZ2VEZXNjcmlwdGlvbjpmfSk6ZShsLmdldChpKSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5wd2RJbWc9PT11P3tzZWN1cml0eUltYWdlOmgsc2VjdXJpdHlJbWFnZURlc2NyaXB0aW9uOnB9OntzZWN1cml0eUltYWdlOnQucHdkSW1nLHNlY3VyaXR5SW1hZ2VEZXNjcmlwdGlvbjp0LmltYWdlRGVzY3JpcHRpb258fG19fSl9ZnVuY3Rpb24gcyhlKXtpZihlPjYwJiZlPD0xNDQwKXt2YXIgbj1lLzYwO3JldHVybiB0LmxvYygiaG91cnMiLCJsb2dpbiIsW25dKX1pZihlPjE0NDApe3ZhciBpPWUvMTQ0MDtyZXR1cm4gdC5sb2MoImRheXMiLCJsb2dpbiIsW2ldKX1yZXR1cm4gMT09PWU/dC5sb2MoIm1pbnV0ZXMub25lTWludXRlIiwibG9naW4iKTp0LmxvYygibWludXRlcyIsImxvZ2luIixbZV0pfXZhciBhPXQuXyxsPXQuJCxjPXQuSGFuZGxlYmFycy5jb21waWxlLHU9Ii9pbWcvc2VjdXJpdHkvdW5rbm93bi5wbmciLGQ9Ii9pbWcvc2VjdXJpdHkvZGVmYXVsdC5wbmciLGg9Ii9pbWcvc2VjdXJpdHkvdW5rbm93bi1kZXZpY2UucG5nIixwPSIiLGY9IiIsbT0iIixfPWMoInt7YmFzZVVybH19L2xvZ2luL2dldGltYWdlP3VzZXJuYW1lPXt7dXNlcm5hbWV9fSIpO3JldHVybiB0Lk1vZGVsLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2lmKHRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5zZWN1cml0eUltYWdlIikpe3ZhciBlPXRoaXM7dGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6dXNlcm5hbWUiLGZ1bmN0aW9uKG4scyl7byh0aGlzLmdldCgiYmFzZVVybCIpLHMpLnRoZW4oZnVuY3Rpb24odCl7bi5zZXQoInNlY3VyaXR5SW1hZ2UiLHQuc2VjdXJpdHlJbWFnZSksbi5zZXQoInNlY3VyaXR5SW1hZ2VEZXNjcmlwdGlvbiIsdC5zZWN1cml0eUltYWdlRGVzY3JpcHRpb24pfSkuZmFpbChmdW5jdGlvbihuKXtpZighaS5jb3JzSXNOb3RFbmFibGVkKG4pKXRocm93IG47ZS5zZXR0aW5ncy5jYWxsR2xvYmFsRXJyb3IobmV3IHIuVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3IodC5sb2MoImVycm9yLmVuYWJsZWQuY29ycyIpKSl9KS5kb25lKCl9KX19LGxvY2FsOntiYXNlVXJsOiJzdHJpbmciLGxhc3RBdXRoUmVzcG9uc2U6WyJvYmplY3QiLCEwLHt9XSx0cmFuc2FjdGlvbjoib2JqZWN0Iix0cmFuc2FjdGlvbkVycm9yOiJvYmplY3QiLHVzZXJuYW1lOiJzdHJpbmciLGZhY3RvcnM6Im9iamVjdCIscG9saWN5OiJvYmplY3QiLHNlY3VyaXR5SW1hZ2U6WyJzdHJpbmciLCEwLGRdLHNlY3VyaXR5SW1hZ2VEZXNjcmlwdGlvbjpbInN0cmluZyIsITAsZl0sdXNlckNvdW50cnlDb2RlOiJzdHJpbmciLHVzZXJQaG9uZU51bWJlcjoic3RyaW5nIixmYWN0b3JBY3RpdmF0aW9uVHlwZToic3RyaW5nIixmbGFzaEVycm9yOiJvYmplY3QiLGJlYWNvblR5cGU6InN0cmluZyIsbGFuZ3VhZ2VDb2RlOlsic3RyaW5nIiwhMF19LHNldEF1dGhSZXNwb25zZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuX2VtYmVkZGVkJiZ0Ll9lbWJlZGRlZC5wb2xpY3kmJnRoaXMuc2V0KCJwb2xpY3kiLHQuX2VtYmVkZGVkLnBvbGljeSksdC5fZW1iZWRkZWQmJnQuX2VtYmVkZGVkLmZhY3RvcnMpe3ZhciBpPXRoaXMuc2V0dGluZ3Mscj1hLm1hcCh0Ll9lbWJlZGRlZC5mYWN0b3JzLGZ1bmN0aW9uKHQpe3JldHVybiB0LnNldHRpbmdzPWksdC5hcHBTdGF0ZT1lLHR9KTt0aGlzLnNldCgiZmFjdG9ycyIsbmV3IG4uQ29sbGVjdGlvbihyLHtwYXJzZTohMH0pKX10aGlzLnNldCgibGFzdEF1dGhSZXNwb25zZSIsdCl9LGRlcml2ZWQ6e2lzU3VjY2Vzc1Jlc3BvbnNlOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiJTVUNDRVNTIj09PXQuc3RhdHVzfX0saXNNZmFSZXF1aXJlZDp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iTUZBX1JFUVVJUkVEIj09PXQuc3RhdHVzfX0saXNNZmFFbnJvbGw6e2RlcHM6WyJsYXN0QXV0aFJlc3BvbnNlIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIk1GQV9FTlJPTEwiPT09dC5zdGF0dXN9fSxpc01mYUNoYWxsZW5nZTp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iTUZBX0NIQUxMRU5HRSI9PT10LnN0YXR1c319LGlzVW5hdXRoZW50aWNhdGVkOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiJVTkFVVEhFTlRJQ0FURUQiPT09dC5zdGF0dXN9fSxpc01mYVJlamVjdGVkQnlVc2VyOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiJSRUpFQ1RFRCI9PT10LmZhY3RvclJlc3VsdH19LGlzTWZhVGltZW91dDp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iVElNRU9VVCI9PT10LmZhY3RvclJlc3VsdH19LGlzTWZhRW5yb2xsQWN0aXZhdGU6e2RlcHM6WyJsYXN0QXV0aFJlc3BvbnNlIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIk1GQV9FTlJPTExfQUNUSVZBVEUiPT09dC5zdGF0dXN9fSxpc1dhaXRpbmdGb3JBY3RpdmF0aW9uOntkZXBzOlsiaXNNZmFFbnJvbGxBY3RpdmF0ZSIsImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0LGUpe3JldHVybiB0JiYiV0FJVElORyI9PT1lLmZhY3RvclJlc3VsdH19LGhhc01mYVJlcXVpcmVkT3B0aW9uczp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiLCJmYWN0b3JzIl0sZm46ZnVuY3Rpb24odCxlKXtyZXR1cm4oIk1GQV9SRVFVSVJFRCI9PT10LnN0YXR1c3x8Ik1GQV9DSEFMTEVOR0UiPT09dC5zdGF0dXMpJiYoZSYmZS5sZW5ndGg+MSl9fSx1c2VySWQ6e2RlcHM6WyJsYXN0QXV0aFJlc3BvbnNlIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2VtYmVkZGVkJiZ0Ll9lbWJlZGRlZC51c2VyP3QuX2VtYmVkZGVkLnVzZXIuaWQ6bnVsbH19LGlzUHdkRXhwaXJpbmdTb29uOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiJQQVNTV09SRF9XQVJOIj09PXQuc3RhdHVzfX0scGFzc3dvcmRFeHBpcmVEYXlzOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9lbWJlZGRlZCYmdC5fZW1iZWRkZWQucG9saWN5JiZ0Ll9lbWJlZGRlZC5wb2xpY3kuZXhwaXJhdGlvbj90Ll9lbWJlZGRlZC5wb2xpY3kuZXhwaXJhdGlvbi5wYXNzd29yZEV4cGlyZURheXM6bnVsbH19LGlzUHdkTWFuYWdlZEJ5T2t0YTp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4hKHQuX2xpbmtzJiZ0Ll9saW5rcy5uZXh0JiZ0Ll9saW5rcy5uZXh0LnRpdGxlKX19LHBhc3N3b3JkRXhwaXJlZFdlYnNpdGVOYW1lOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9saW5rcyYmdC5fbGlua3MubmV4dCYmdC5fbGlua3MubmV4dC50aXRsZT90Ll9saW5rcy5uZXh0LnRpdGxlOm51bGx9fSxwYXNzd29yZEV4cGlyZWRMaW5rVXJsOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9saW5rcyYmdC5fbGlua3MubmV4dCYmdC5fbGlua3MubmV4dC50aXRsZSYmdC5fbGlua3MubmV4dC5ocmVmP3QuX2xpbmtzLm5leHQuaHJlZjpudWxsfX0scmVjb3ZlcnlUeXBlOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlY292ZXJ5VHlwZX19LGZhY3RvclR5cGU6e2RlcHM6WyJsYXN0QXV0aFJlc3BvbnNlIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmFjdG9yVHlwZX19LGZhY3Rvcjp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fZW1iZWRkZWQmJnQuX2VtYmVkZGVkLmZhY3Rvcj90Ll9lbWJlZGRlZC5mYWN0b3I6bnVsbH19LGFjdGl2YXRlZEZhY3RvcklkOntkZXBzOlsiZmFjdG9yIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC5pZDpudWxsfX0sYWN0aXZhdGVkRmFjdG9yVHlwZTp7ZGVwczpbImZhY3RvciJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0P3QuZmFjdG9yVHlwZTpudWxsfX0sYWN0aXZhdGVkRmFjdG9yUHJvdmlkZXI6e2RlcHM6WyJmYWN0b3IiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdD90LnByb3ZpZGVyOm51bGx9fSxxcmNvZGU6e2RlcHM6WyJmYWN0b3IiXSxmbjpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIHQuX2VtYmVkZGVkLmFjdGl2YXRpb24uX2xpbmtzLnFyY29kZS5ocmVmfWNhdGNoKGUpe3JldHVybiBudWxsfX19LGFjdGl2YXRpb25TZW5kTGlua3M6e2RlcHM6WyJmYWN0b3IiXSxmbjpmdW5jdGlvbih0KXt2YXIgZTt0cnl7ZT10Ll9lbWJlZGRlZC5hY3RpdmF0aW9uLl9saW5rcy5zZW5kfWNhdGNoKG4pe2U9W119cmV0dXJuIGV9fSx0ZXh0QWN0aXZhdGlvbkxpbmtVcmw6e2RlcHM6WyJhY3RpdmF0aW9uU2VuZExpbmtzIl0sZm46ZnVuY3Rpb24odCl7dmFyIGU9YS5maW5kV2hlcmUodCx7bmFtZToic21zIn0pO3JldHVybiBlP2UuaHJlZjpudWxsfX0sZW1haWxBY3RpdmF0aW9uTGlua1VybDp7ZGVwczpbImFjdGl2YXRpb25TZW5kTGlua3MiXSxmbjpmdW5jdGlvbih0KXt2YXIgZT1hLmZpbmRXaGVyZSh0LHtuYW1lOiJlbWFpbCJ9KTtyZXR1cm4gZT9lLmhyZWY6bnVsbH19LHNoYXJlZFNlY3JldDp7ZGVwczpbImZhY3RvciJdLGZuOmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdC5fZW1iZWRkZWQuYWN0aXZhdGlvbi5zaGFyZWRTZWNyZXR9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fX0sZHVvRW5yb2xsQWN0aXZhdGlvbjp7ZGVwczpbImZhY3RvciJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9lbWJlZGRlZCYmdC5fZW1iZWRkZWQuYWN0aXZhdGlvbj90Ll9lbWJlZGRlZC5hY3RpdmF0aW9uOm51bGx9fSxwcmV2TGluazp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fbGlua3MmJnQuX2xpbmtzLnByZXY/dC5fbGlua3MucHJldi5ocmVmOm51bGx9fSx1c2VyOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9lbWJlZGRlZCYmdC5fZW1iZWRkZWQudXNlcj90Ll9lbWJlZGRlZC51c2VyOm51bGx9fSxyZWNvdmVyeVF1ZXN0aW9uOntkZXBzOlsidXNlciJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnJlY292ZXJ5X3F1ZXN0aW9uP3QucmVjb3ZlcnlfcXVlc3Rpb24ucXVlc3Rpb246bnVsbH19LHVzZXJQcm9maWxlOntkZXBzOlsidXNlciJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnByb2ZpbGU/dC5wcm9maWxlOm51bGx9fSx1c2VyQ29uc2VudE5hbWU6e2RlcHM6WyJ1c2VyUHJvZmlsZSIsInVzZXJuYW1lIl0sZm46ZnVuY3Rpb24odCxlKXtyZXR1cm4hdHx8YS5pc0VtcHR5KHQuZmlyc3ROYW1lKT9lOmEuaXNFbXB0eSh0Lmxhc3ROYW1lKT90LmZpcnN0TmFtZTp0LmZpcnN0TmFtZSsiICIrdC5sYXN0TmFtZS5jaGFyQXQoMCkrIi4ifX0sdXNlckVtYWlsOntkZXBzOlsidXNlclByb2ZpbGUiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5sb2dpbj90LmxvZ2luOm51bGx9fSx1c2VyRnVsbE5hbWU6e2RlcHM6WyJ1c2VyUHJvZmlsZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiYodC5maXJzdE5hbWV8fHQubGFzdE5hbWUpP3QuZmlyc3ROYW1lKyIgIit0Lmxhc3ROYW1lOiIifX0sZXhwaXJlc0F0OntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0LmV4cGlyZXNBdH19LHRhcmdldDp7ZGVwczpbImxhc3RBdXRoUmVzcG9uc2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fZW1iZWRkZWQ/dC5fZW1iZWRkZWQudGFyZ2V0Om51bGx9fSx0YXJnZXRMYWJlbDp7ZGVwczpbInRhcmdldCJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0P3QubGFiZWw6bnVsbH19LHRhcmdldExvZ286e2RlcHM6WyJ0YXJnZXQiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fbGlua3M/dC5fbGlua3MubG9nbzpudWxsfX0sdGFyZ2V0VGVybXNPZlNlcnZpY2U6e2RlcHM6WyJ0YXJnZXQiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fbGlua3M/dC5fbGlua3NbInRlcm1zLW9mLXNlcnZpY2UiXTpudWxsfX0sdGFyZ2V0UHJpdmFjeVBvbGljeTp7ZGVwczpbInRhcmdldCJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9saW5rcz90Ll9saW5rc1sicHJpdmFjeS1wb2xpY3kiXTpudWxsfX0sc2NvcGVzOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9lbWJlZGRlZD90Ll9lbWJlZGRlZC5zY29wZXM6bnVsbH19LGhhc0V4aXN0aW5nUGhvbmVzOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe2lmKCF0Ll9lbWJlZGRlZHx8IXQuX2VtYmVkZGVkLmZhY3RvcnMpcmV0dXJuITE7dmFyIGU9dC5fZW1iZWRkZWQuZmFjdG9ycyxuPWEuZmluZFdoZXJlKGUse2ZhY3RvclR5cGU6InNtcyIscHJvdmlkZXI6Ik9LVEEifSk7cmV0dXJuISghbnx8IW4uX2VtYmVkZGVkKSYmISFuLl9lbWJlZGRlZC5waG9uZXMubGVuZ3RofX0saGFzRXhpc3RpbmdQaG9uZXNGb3JDYWxsOntkZXBzOlsibGFzdEF1dGhSZXNwb25zZSJdLGZuOmZ1bmN0aW9uKHQpe2lmKCF0Ll9lbWJlZGRlZHx8IXQuX2VtYmVkZGVkLmZhY3RvcnMpcmV0dXJuITE7dmFyIGU9dC5fZW1iZWRkZWQuZmFjdG9ycyxuPWEuZmluZFdoZXJlKGUse2ZhY3RvclR5cGU6ImNhbGwiLHByb3ZpZGVyOiJPS1RBIn0pO3JldHVybiEoIW58fCFuLl9lbWJlZGRlZCkmJiEhbi5fZW1iZWRkZWQucGhvbmVzLmxlbmd0aH19LGlzVW5kZWZpbmVkVXNlcjp7ZGVwczpbInNlY3VyaXR5SW1hZ2UiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4gdD09PWR9fSxpc05ld1VzZXI6e2RlcHM6WyJzZWN1cml0eUltYWdlIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1ofX0sYWxsb3dSZW1lbWJlckRldmljZTp7ZGVwczpbInBvbGljeSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LmFsbG93UmVtZW1iZXJEZXZpY2V9fSxyZW1lbWJlckRldmljZUxhYmVsOntkZXBzOlsicG9saWN5Il0sZm46ZnVuY3Rpb24oZSl7aWYoZSYmZS5yZW1lbWJlckRldmljZUxpZmV0aW1lSW5NaW51dGVzPjApe3ZhciBuPXMoZS5yZW1lbWJlckRldmljZUxpZmV0aW1lSW5NaW51dGVzKTtyZXR1cm4gdC5sb2MoInJlbWVtYmVyRGV2aWNlLnRpbWViYXNlZCIsImxvZ2luIixbbl0pfXJldHVybiBlJiYwPT09ZS5yZW1lbWJlckRldmljZUxpZmV0aW1lSW5NaW51dGVzP3QubG9jKCJyZW1lbWJlckRldmljZS5kZXZpY2ViYXNlZCIsImxvZ2luIik6dC5sb2MoInJlbWVtYmVyRGV2aWNlIiwibG9naW4iKX19LHJlbWVtYmVyRGV2aWNlQnlEZWZhdWx0OntkZXBzOlsicG9saWN5Il0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQucmVtZW1iZXJEZXZpY2VCeURlZmF1bHR9fX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0dGluZ3M9dC5zZXR0aW5ncyxhLmV4dGVuZChhLm9taXQodCwic2V0dGluZ3MiKSx7bGFuZ3VhZ2VDb2RlOnRoaXMuc2V0dGluZ3MuZ2V0KCJsYW5ndWFnZUNvZGUiKX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDM0Niksbig2NDEpLG4oNjI1KV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10Ll8sbz02ZTMscz1pLmV4dGVuZCh7ZXh0cmFQcm9wZXJ0aWVzOiEwLGZsYXQ6ITEscHJvcHM6e2lkOiJzdHJpbmciLGZhY3RvclR5cGU6e3R5cGU6InN0cmluZyIsdmFsdWVzOlsic21zIiwiY2FsbCIsImVtYWlsIiwidG9rZW4iLCJ0b2tlbjpzb2Z0d2FyZTp0b3RwIiwidG9rZW46aGFyZHdhcmUiLCJxdWVzdGlvbiIsInB1c2giLCJ1MmYiXX0scHJvdmlkZXI6e3R5cGU6InN0cmluZyIsdmFsdWVzOlsiT0tUQSIsIlJTQSIsIkRFTF9PQVRIIiwiU1lNQU5URUMiLCJHT09HTEUiLCJZVUJJQ08iLCJGSURPIl19LGVucm9sbG1lbnQ6e3R5cGU6InN0cmluZyIsdmFsdWVzOlsiT1BUSU9OQUwiLCJSRVFVSVJFRCJdfSxzdGF0dXM6e3R5cGU6InN0cmluZyIsdmFsdWVzOlsiTk9UX1NFVFVQIiwiQUNUSVZFIl19LHByb2ZpbGU6WyJvYmplY3QiXSx2ZW5kb3JOYW1lOiJzdHJpbmcifSxsb2NhbDp7YW5zd2VyOiJzdHJpbmciLGJhY2t1cEZhY3Rvcjoib2JqZWN0IixzaG93QW5zd2VyOiJib29sZWFuIixyZW1lbWJlckRldmljZToiYm9vbGVhbiIsYXV0b1B1c2g6WyJib29sZWFuIiwhMCwhMV19LGRlcml2ZWQ6e2lzT2t0YUZhY3Rvcjp7ZGVwczpbInByb3ZpZGVyIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIk9LVEEiPT09dH19LGZhY3Rvck5hbWU6e2RlcHM6WyJwcm92aWRlciIsImZhY3RvclR5cGUiXSxmbjpuLmdldEZhY3Rvck5hbWV9LGZhY3RvckxhYmVsOntkZXBzOlsicHJvdmlkZXIiLCJmYWN0b3JUeXBlIiwidmVuZG9yTmFtZSJdLGZuOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4iREVMX09BVEgiPT09dD9pOm4uZ2V0RmFjdG9yTGFiZWwodCxlKX19LGZhY3RvckRlc2NyaXB0aW9uOntkZXBzOlsicHJvdmlkZXIiLCJmYWN0b3JUeXBlIl0sZm46bi5nZXRGYWN0b3JEZXNjcmlwdGlvbn0sc29ydE9yZGVyOntkZXBzOlsicHJvdmlkZXIiLCJmYWN0b3JUeXBlIl0sZm46bi5nZXRGYWN0b3JTb3J0T3JkZXJ9LGljb25DbGFzc05hbWU6e2RlcHM6WyJwcm92aWRlciIsImZhY3RvclR5cGUiXSxmbjpuLmdldEZhY3Rvckljb25DbGFzc05hbWV9LHNlY3VyaXR5UXVlc3Rpb246e2RlcHM6WyJwcm9maWxlIiwiZmFjdG9yVHlwZSJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInF1ZXN0aW9uIiE9PWU/bnVsbDp0JiZuLmdldFNlY3VyaXR5UXVlc3Rpb25MYWJlbCh0KX19LHBob25lTnVtYmVyOntkZXBzOlsicHJvZmlsZSIsImZhY3RvclR5cGUiXSxmbjpmdW5jdGlvbih0LGUpe3JldHVybiByLmNvbnRhaW5zKFsic21zIiwiY2FsbCJdLGUpP3QmJnQucGhvbmVOdW1iZXI6bnVsbH19LGVtYWlsOntkZXBzOlsicHJvZmlsZSIsImZhY3RvclR5cGUiXSxmbjpmdW5jdGlvbih0LGUpe3JldHVybiJlbWFpbCI9PT1lP3QmJnQuZW1haWw6bnVsbH19LGRldmljZU5hbWU6e2RlcHM6WyJwcm9maWxlIiwiZmFjdG9yVHlwZSJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInB1c2giIT09ZT9udWxsOnQmJnQubmFtZX19LGVucm9sbGVkOntkZXBzOlsic3RhdHVzIl0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIkFDVElWRSI9PT10fX0scmVxdWlyZWQ6e2RlcHM6WyJlbnJvbGxtZW50Il0sZm46ZnVuY3Rpb24odCl7cmV0dXJuIlJFUVVJUkVEIj09PXR9fSxjYW5Vc2VSZXNlbmQ6e2RlcHM6WyJwcm92aWRlciIsImZhY3RvclR5cGUiXSxmbjpmdW5jdGlvbih0LGUpe3JldHVybiJPS1RBIj09PXQmJnIuY29udGFpbnMoWyJwdXNoIiwic21zIiwiY2FsbCIsImVtYWlsIl0sZSl9fSxpc0Fuc3dlclJlcXVpcmVkOntkZXBzOlsiZmFjdG9yVHlwZSJdLGZuOmZ1bmN0aW9uKHQpe3JldHVybiByLmNvbnRhaW5zKFsic21zIiwiY2FsbCIsImVtYWlsIiwidG9rZW4iLCJ0b2tlbjpzb2Z0d2FyZTp0b3RwIiwicXVlc3Rpb24iXSx0KX19fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXR0aW5ncz10LnNldHRpbmdzLHRoaXMuYXBwU3RhdGU9dC5hcHBTdGF0ZSx0LnJlbWVtYmVyRGV2aWNlPW4uZ2V0UmVtZW1iZXJEZXZpY2VWYWx1ZSh0aGlzLmFwcFN0YXRlKSxyLm9taXQodCxbInNldHRpbmdzIiwiYXBwU3RhdGUiXSl9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXQoImlzQW5zd2VyUmVxdWlyZWQiKSYmIXRoaXMuZ2V0KCJhbnN3ZXIiKSlyZXR1cm57YW5zd2VyOnQubG9jKCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLmJsYW5rIil9fSxzYXZlOmZ1bmN0aW9uKCl7dmFyIHQ9ISF0aGlzLmdldCgicmVtZW1iZXJEZXZpY2UiKTtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKG4pe3ZhciBpPXtyZW1lbWJlckRldmljZTp0fTsicXVlc3Rpb24iPT09dGhpcy5nZXQoImZhY3RvclR5cGUiKT9pLmFuc3dlcj10aGlzLmdldCgiYW5zd2VyIik6aS5wYXNzQ29kZT10aGlzLmdldCgiYW5zd2VyIik7dmFyIHM7aWYoIk1GQV9SRVFVSVJFRCI9PT1uLnN0YXR1cyl7dmFyIGE9ci5maW5kV2hlcmUobi5mYWN0b3JzLHtpZDp0aGlzLmdldCgiaWQiKX0pO3M9YS52ZXJpZnkoaSl9ZWxzZSBpZih0aGlzLmdldCgiY2FuVXNlUmVzZW5kIikmJiF0aGlzLmdldCgiYW5zd2VyIikmJm4ucmVzZW5kKXt2YXIgbD1uLmRhdGEuX2xpbmtzLnJlc2VuZFswXTtzPW4ucmVzZW5kKGwubmFtZSl9ZWxzZSBzPW4udmVyaWZ5KGkpO3JldHVybiB0aGlzLnRyaWdnZXIoInNhdmUiKSxzLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIk1GQV9DSEFMTEVOR0UiPT09dC5zdGF0dXMmJnQucG9sbD9lLmRlbGF5KG8pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5wb2xsKG8pfSk6dH0pLmZhaWwoZnVuY3Rpb24odCl7dGhyb3cgdH0pfSl9fSksYT10LkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpzLGNvbXBhcmF0b3I6InNvcnRPcmRlciIscGFyc2U6ZnVuY3Rpb24odCl7dGhpcy5sYXN0VXNlZEZhY3Rvcj10WzBdO3ZhciBlPXIuZmluZFdoZXJlKHQse3Byb3ZpZGVyOiJPS1RBIixmYWN0b3JUeXBlOiJwdXNoIn0pO2lmKCFlKXJldHVybiB0O3ZhciBuPXIuZmluZFdoZXJlKHQse3Byb3ZpZGVyOiJPS1RBIixmYWN0b3JUeXBlOiJ0b2tlbjpzb2Z0d2FyZTp0b3RwIn0pLGk9bj09PXRbMF0sbz1yLnJlZHVjZSh0LGZ1bmN0aW9uKHQsaSl7dmFyIHI9Ik9LVEEiPT09aS5wcm92aWRlcixvPXImJiJ0b2tlbjpzb2Z0d2FyZTp0b3RwIj09PWkuZmFjdG9yVHlwZSxhPXImJiJwdXNoIj09PWkuZmFjdG9yVHlwZSxsPSJBQ1RJVkUiIT09aS5zdGF0dXMsYz1vJiYobHx8IkFDVElWRSI9PT1lLnN0YXR1cyksdT1hJiZsJiYiQUNUSVZFIj09PW4uc3RhdHVzO3JldHVybiBjfHx1P3Q6KGEmJihpLmJhY2t1cEZhY3Rvcj1uZXcgcyhuLHtwYXJzZTohMH0pKSx0LnB1c2goaSksdCl9LFtdKTtyZXR1cm4gaSYmKHRoaXMubGFzdFVzZWRGYWN0b3I9ZSksb30sZ2V0RGVmYXVsdEZhY3RvcjpmdW5jdGlvbigpe3ZhciB0PXIucGljayh0aGlzLmxhc3RVc2VkRmFjdG9yLCJmYWN0b3JUeXBlIiwicHJvdmlkZXIiKTtyZXR1cm4gdGhpcy5maW5kV2hlcmUodCl9LGdldEZpcnN0VW5lbnJvbGxlZFJlcXVpcmVkRmFjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmluZFdoZXJlKHtyZXF1aXJlZDohMCxlbnJvbGxlZDohMX0pfX0pO3JldHVybntNb2RlbDpzLENvbGxlY3Rpb246YX19LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNTEyKV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuXyxpPXt9LHI9e09LVEFfVkVSSUZZOntsYWJlbDoiZmFjdG9yLnRvdHBTb2Z0Lm9rdGFWZXJpZnkiLGRlc2NyaXB0aW9uOiJmYWN0b3IudG90cFNvZnQuZGVzY3JpcHRpb24iLGljb25DbGFzc05hbWU6Im1mYS1va3RhLXZlcmlmeSIsc29ydE9yZGVyOjF9LE9LVEFfVkVSSUZZX1BVU0g6e2xhYmVsOiJmYWN0b3Iub2t0YVZlcmlmeVB1c2giLGRlc2NyaXB0aW9uOiJmYWN0b3IucHVzaC5kZXNjcmlwdGlvbiIsaWNvbkNsYXNzTmFtZToibWZhLW9rdGEtdmVyaWZ5Iixzb3J0T3JkZXI6MX0sU01TOntsYWJlbDoiZmFjdG9yLnNtcyIsZGVzY3JpcHRpb246ImZhY3Rvci5zbXMuZGVzY3JpcHRpb24iLGljb25DbGFzc05hbWU6Im1mYS1va3RhLXNtcyIsc29ydE9yZGVyOjJ9LENBTEw6e2xhYmVsOiJmYWN0b3IuY2FsbCIsZGVzY3JpcHRpb246ImZhY3Rvci5jYWxsLmRlc2NyaXB0aW9uIixpY29uQ2xhc3NOYW1lOiJtZmEtb2t0YS1jYWxsIixzb3J0T3JkZXI6M30sV0lORE9XU19IRUxMTzp7bGFiZWw6ImZhY3Rvci53aW5kb3dzSGVsbG8iLGRlc2NyaXB0aW9uOiJmYWN0b3Iud2luZG93c0hlbGxvLnNpZ25pbi5kZXNjcmlwdGlvbiIsaWNvbkNsYXNzTmFtZToibWZhLXdpbmRvd3MtaGVsbG8iLHNvcnRPcmRlcjo0fSxVMkY6e2xhYmVsOiJmYWN0b3IudTJmIixkZXNjcmlwdGlvbjoiZmFjdG9yLnUyZi5kZXNjcmlwdGlvbiIsaWNvbkNsYXNzTmFtZToibWZhLXUyZiIsc29ydE9yZGVyOjV9LFlVQklLRVk6e2xhYmVsOiJmYWN0b3IudG90cEhhcmQueXViaWtleSIsZGVzY3JpcHRpb246ImZhY3Rvci50b3RwSGFyZC55dWJpa2V5LmRlc2NyaXB0aW9uIixpY29uQ2xhc3NOYW1lOiJtZmEteXViaWtleSIsc29ydE9yZGVyOjZ9LERVTzp7bGFiZWw6ImZhY3Rvci5kdW8iLGRlc2NyaXB0aW9uOiJmYWN0b3IuZHVvLmRlc2NyaXB0aW9uIixpY29uQ2xhc3NOYW1lOiJtZmEtZHVvIixzb3J0T3JkZXI6N30sR09PR0xFX0FVVEg6e2xhYmVsOiJmYWN0b3IudG90cFNvZnQuZ29vZ2xlQXV0aGVudGljYXRvciIsZGVzY3JpcHRpb246ImZhY3Rvci50b3RwU29mdC5kZXNjcmlwdGlvbiIsaWNvbkNsYXNzTmFtZToibWZhLWdvb2dsZS1hdXRoIixzb3J0T3JkZXI6OH0sU1lNQU5URUNfVklQOntsYWJlbDoiZmFjdG9yLnRvdHBIYXJkLnN5bWFudGVjVmlwIixkZXNjcmlwdGlvbjoiZmFjdG9yLnRvdHBIYXJkLmRlc2NyaXB0aW9uIixpY29uQ2xhc3NOYW1lOiJtZmEtc3ltYW50ZWMiLHNvcnRPcmRlcjo5fSxSU0FfU0VDVVJJRDp7bGFiZWw6ImZhY3Rvci50b3RwSGFyZC5yc2FTZWN1cklkIixkZXNjcmlwdGlvbjoiZmFjdG9yLnRvdHBIYXJkLmRlc2NyaXB0aW9uIixpY29uQ2xhc3NOYW1lOiJtZmEtcnNhIixzb3J0T3JkZXI6MTB9LE9OX1BSRU06e2xhYmVsOiIiLGRlc2NyaXB0aW9uOiJmYWN0b3IudG90cEhhcmQuZGVzY3JpcHRpb24iLGljb25DbGFzc05hbWU6Im1mYS1vbnByZW0iLHNvcnRPcmRlcjoxMH0sRU1BSUw6e2xhYmVsOiJmYWN0b3IuZW1haWwiLGRlc2NyaXB0aW9uOiIiLGljb25DbGFzc05hbWU6Im1mYS1va3RhLWVtYWlsIixzb3J0T3JkZXI6MTF9LFFVRVNUSU9OOntsYWJlbDoiZmFjdG9yLnNlY3VyaXR5UXVlc3Rpb24iLGRlc2NyaXB0aW9uOiJmYWN0b3Iuc2VjdXJpdHlRdWVzdGlvbi5kZXNjcmlwdGlvbiIsaWNvbkNsYXNzTmFtZToibWZhLW9rdGEtc2VjdXJpdHktcXVlc3Rpb24iLHNvcnRPcmRlcjoxMn19O3JldHVybiBpLmdldEZhY3Rvck5hbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4iT0tUQSI9PT10JiYidG9rZW46c29mdHdhcmU6dG90cCI9PT1lPyJPS1RBX1ZFUklGWSI6Ik9LVEEiPT09dCYmInB1c2giPT09ZT8iT0tUQV9WRVJJRllfUFVTSCI6IkdPT0dMRSI9PT10PyJHT09HTEVfQVVUSCI6IlNZTUFOVEVDIj09PXQmJiJ0b2tlbiI9PT1lPyJTWU1BTlRFQ19WSVAiOiJSU0EiPT09dCYmInRva2VuIj09PWU/IlJTQV9TRUNVUklEIjoiREVMX09BVEgiPT09dCYmInRva2VuIj09PWU/Ik9OX1BSRU0iOiJEVU8iPT09dCYmIndlYiI9PT1lPyJEVU8iOiJZVUJJQ08iPT09dCYmInRva2VuOmhhcmR3YXJlIj09PWU/IllVQklLRVkiOiJPS1RBIj09PXQmJiJzbXMiPT09ZT8iU01TIjoiT0tUQSI9PT10JiYiY2FsbCI9PT1lPyJDQUxMIjoiT0tUQSI9PT10JiYicXVlc3Rpb24iPT09ZT8iUVVFU1RJT04iOiJGSURPIj09PXQmJiJ3ZWJhdXRobiI9PT1lPyJXSU5ET1dTX0hFTExPIjoiRklETyI9PT10JiYidTJmIj09PWU/IlUyRiI6Ik9LVEEiPT09dCYmImVtYWlsIj09PWU/IkVNQUlMIjp2b2lkIDB9LGkuaXNPa3RhVmVyaWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIk9LVEEiPT09dCYmKCJ0b2tlbjpzb2Z0d2FyZTp0b3RwIj09PWV8fCJwdXNoIj09PWUpfSxpLmdldEZhY3RvckxhYmVsPWZ1bmN0aW9uKGUsbil7dmFyIG89cltpLmdldEZhY3Rvck5hbWUoZSxuKV0ubGFiZWw7cmV0dXJuIHQubG9jKG8sImxvZ2luIil9LGkuZ2V0RmFjdG9yRGVzY3JpcHRpb249ZnVuY3Rpb24oZSxuKXt2YXIgbz1yW2kuZ2V0RmFjdG9yTmFtZShlLG4pXS5kZXNjcmlwdGlvbjtyZXR1cm4gdC5sb2MobywibG9naW4iKX0saS5nZXRGYWN0b3JJY29uQ2xhc3NOYW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJbaS5nZXRGYWN0b3JOYW1lKHQsZSldLmljb25DbGFzc05hbWV9LGkuZ2V0RmFjdG9yU29ydE9yZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJbaS5nZXRGYWN0b3JOYW1lKHQsZSldLnNvcnRPcmRlcn0saS5nZXRSZW1lbWJlckRldmljZVZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LmdldCgicmVtZW1iZXJEZXZpY2VCeURlZmF1bHQiKX0saS5nZXRTZWN1cml0eVF1ZXN0aW9uTGFiZWw9ZnVuY3Rpb24oZSl7dmFyIG49dC5sb2MoInNlY3VyaXR5LiIrZS5xdWVzdGlvbik7cmV0dXJuIG4uaW5kZXhPZigiTDEwTl9FUlJPUiIpPDA/bjplLnF1ZXN0aW9uVGV4dH0saS5nZXRQYXNzd29yZENvbXBsZXhpdHlEZXNjcmlwdGlvbj1mdW5jdGlvbihpKXt2YXIgcj1bXSxvPWZ1bmN0aW9uKGUpe3ZhciBuO3N3aXRjaChlLnVuaXQpe2Nhc2UiREFZIjpuPSJwYXNzd29yZC5jb21wbGV4aXR5Lm1pbkFnZURheXMiO2JyZWFrO2Nhc2UiSE9VUiI6bj0icGFzc3dvcmQuY29tcGxleGl0eS5taW5BZ2VIb3VycyI7YnJlYWs7Y2FzZSJNSU5VVEUiOm49InBhc3N3b3JkLmNvbXBsZXhpdHkubWluQWdlTWludXRlcyJ9cmV0dXJuIHQubG9jKG4sImxvZ2luIixbZS50aW1lXSl9LHM9ZnVuY3Rpb24odCl7dmFyIGU9dC5leGNsdWRlQXR0cmlidXRlcztyZXR1cm4gdC5leGNsdWRlRmlyc3ROYW1lPW4uY29udGFpbnMoZSwiZmlyc3ROYW1lIiksdC5leGNsdWRlTGFzdE5hbWU9bi5jb250YWlucyhlLCJsYXN0TmFtZSIpLG4ub21pdCh0LCJleGNsdWRlQXR0cmlidXRlcyIpfTtpZihpLmNvbXBsZXhpdHkpe3ZhciBhPXttaW5MZW5ndGg6e2kxOG46InBhc3N3b3JkLmNvbXBsZXhpdHkubGVuZ3RoIixhcmdzOiEwfSxtaW5Mb3dlckNhc2U6e2kxOG46InBhc3N3b3JkLmNvbXBsZXhpdHkubG93ZXJjYXNlIn0sbWluVXBwZXJDYXNlOntpMThuOiJwYXNzd29yZC5jb21wbGV4aXR5LnVwcGVyY2FzZSJ9LG1pbk51bWJlcjp7aTE4bjoicGFzc3dvcmQuY29tcGxleGl0eS5udW1iZXIifSxtaW5TeW1ib2w6e2kxOG46InBhc3N3b3JkLmNvbXBsZXhpdHkuc3ltYm9sIn0sZXhjbHVkZVVzZXJuYW1lOntpMThuOiJwYXNzd29yZC5jb21wbGV4aXR5Lm5vX3VzZXJuYW1lIn0sZXhjbHVkZUZpcnN0TmFtZTp7aTE4bjoicGFzc3dvcmQuY29tcGxleGl0eS5ub19maXJzdF9uYW1lIn0sZXhjbHVkZUxhc3ROYW1lOntpMThuOiJwYXNzd29yZC5jb21wbGV4aXR5Lm5vX2xhc3RfbmFtZSJ9fSxsPXMoaS5jb21wbGV4aXR5KSxjPW4ubWFwKGwsZnVuY3Rpb24oZSxuKXtpZighKGU8PTApKXt2YXIgaT1hW25dO3JldHVybiBpLmFyZ3M/dC5sb2MoaS5pMThuLCJsb2dpbiIsW2VdKTp0LmxvYyhpLmkxOG4sImxvZ2luIil9fSk7Yz1uLmNvbXBhY3QoYyksYy5sZW5ndGgmJihjPW4ucmVkdWNlKGMsZnVuY3Rpb24oZSxuKXtyZXR1cm4gZT9lK3QubG9jKCJwYXNzd29yZC5jb21wbGV4aXR5Lmxpc3QuZWxlbWVudCIsImxvZ2luIixbbl0pOm59KSxyLnB1c2godC5sb2MoInBhc3N3b3JkLmNvbXBsZXhpdHkucmVxdWlyZW1lbnRzIiwibG9naW4iLFtjXSkpKX1pZihpLmFnZSYmaS5hZ2UuaGlzdG9yeUNvdW50PjAmJnIucHVzaCh0LmxvYygicGFzc3dvcmQuY29tcGxleGl0eS5oaXN0b3J5IiwibG9naW4iLFtpLmFnZS5oaXN0b3J5Q291bnRdKSksaS5hZ2UmJmkuYWdlLm1pbkFnZU1pbnV0ZXM+MCl7dmFyIHU9ZS5nZXRUaW1lSW5IaWdoZXN0UmVsZXZhbnRVbml0KGkuYWdlLm1pbkFnZU1pbnV0ZXMsIk1JTlVURSIpLGQ9byh1KTtyLnB1c2goZCl9cmV0dXJuIHIuam9pbigiICIpfSxpfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDY0MyksbigzNDYpLG4oNjQxKSxuKDYyMiksbig2MjgpLG4oNjIzKSxuKDY0NCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyxhKXt2YXIgbD10LiQsYz10Ll87cmV0dXJuIHIuZXh0ZW5kKHtjbGFzc05hbWU6Im1mYS12ZXJpZnktZHVvIGR1by1mb3JtIixNb2RlbDp7cHJvcHM6e2hvc3Q6InN0cmluZyIsc2lnbmF0dXJlOiJzdHJpbmciLHBvc3RBY3Rpb246InN0cmluZyIsZmFjdG9ySWQ6InN0cmluZyIsc3RhdGVUb2tlbjoic3RyaW5nIixyZW1lbWJlckRldmljZToiYm9vbGVhbiJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD1pLmdldFJlbWVtYmVyRGV2aWNlVmFsdWUodGhpcy5hcHBTdGF0ZSk7dGhpcy5zZXQoInJlbWVtYmVyRGV2aWNlIix0KX0sZ2V0SW5pdE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdD0hIXRoaXMuZ2V0KCJyZW1lbWJlckRldmljZSIpO3JldHVybiB0aGlzLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24oZSl7dmFyIG49e3JlbWVtYmVyRGV2aWNlOnR9LGk9Yy5maW5kV2hlcmUoZS5mYWN0b3JzLHtwcm92aWRlcjoiRFVPIixmYWN0b3JUeXBlOiJ3ZWIifSk7cmV0dXJuIGkudmVyaWZ5KG4pLmZhaWwoZnVuY3Rpb24odCl7dGhyb3cgdH0pfSl9LHZlcmlmeTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCgicG9zdEFjdGlvbiIpLGk9dGhpcy5nZXQoImZhY3RvcklkIikscj10aGlzLG89e2lkOmksc3RhdGVUb2tlbjp0aGlzLmdldCgic3RhdGVUb2tlbiIpLHNpZ19yZXNwb25zZTp0fSxzPXRoaXMuZ2V0KCJyZW1lbWJlckRldmljZSIpO3JldHVybiBuKGwucG9zdChlLG8pKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gcyYmKGU9e3JlbWVtYmVyRGV2aWNlOnN9KSx0LnBvbGwoZSl9KX0pLmZhaWwoZnVuY3Rpb24odCl7ci50cmlnZ2VyKCJlcnJvciIscix0Lnhocil9KX19LEZvcm06e2F1dG9TYXZlOiEwLG5vQnV0dG9uQmFyOiEwLHRpdGxlOmMucGFydGlhbCh0LmxvYywiZmFjdG9yLmR1byIpLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiZmFjdG9yLWR1byJ9LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmFkZCgnPGlmcmFtZSBmcmFtZWJvcmRlcj0iMCIgdGl0bGU9IicrdGhpcy50aXRsZSgpKyciPjwvaWZyYW1lPicpLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImFsbG93UmVtZW1iZXJEZXZpY2UiKSYmdGhpcy5hZGRJbnB1dCh7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicmVtZW1iZXJEZXZpY2VMYWJlbCIpLGNsYXNzTmFtZToibWFyZ2luLWJ0bS0wIixuYW1lOiJyZW1lbWJlckRldmljZSIsdHlwZToiY2hlY2tib3gifSksZS5pbml0KHtob3N0OnRoaXMubW9kZWwuZ2V0KCJob3N0Iiksc2lnX3JlcXVlc3Q6dGhpcy5tb2RlbC5nZXQoInNpZ25hdHVyZSIpLGlmcmFtZTp0aGlzLiQoImlmcmFtZSIpLmdldCgwKSxwb3N0X2FjdGlvbjpjLmJpbmQodGhpcy5tb2RlbC52ZXJpZnksdGhpcy5tb2RlbCl9KX19LEZvb3RlcjphLGZldGNoSW5pdGlhbERhdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLm1vZGVsLmdldEluaXRPcHRpb25zKCkudGhlbihmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGE7aWYoIShuLl9lbWJlZGRlZCYmbi5fZW1iZWRkZWQuZmFjdG9yJiZuLl9lbWJlZGRlZC5mYWN0b3IuX2VtYmVkZGVkJiZuLl9lbWJlZGRlZC5mYWN0b3IuX2VtYmVkZGVkLnZlcmlmaWNhdGlvbikpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBkb2VzIG5vdCBoYXZlIGR1byB2ZXJpZmljYXRpb24gb3B0aW9ucyIpO3ZhciBpPW4uX2VtYmVkZGVkLmZhY3Rvci5fZW1iZWRkZWQudmVyaWZpY2F0aW9uO3QubW9kZWwuc2V0KHtob3N0OmkuaG9zdCxzaWduYXR1cmU6aS5zaWduYXR1cmUscG9zdEFjdGlvbjppLl9saW5rcy5jb21wbGV0ZS5ocmVmLGZhY3RvcklkOm4uX2VtYmVkZGVkLmZhY3Rvci5pZCxzdGF0ZVRva2VuOm4uc3RhdGVUb2tlbn0pfSl9LHRyYXBBdXRoUmVzcG9uc2U6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc01mYUNoYWxsZW5nZSIpKXJldHVybiEwfSxiYWNrOmZ1bmN0aW9uKCl7fX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG87ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9Oy8qKgoJCSAqIER1byBXZWIgU0RLIHYyCgkJICogQ29weXJpZ2h0IDIwMTcsIER1byBTZWN1cml0eQoJCSAqLwoJIWZ1bmN0aW9uKG4scyl7cj1bXSxpPXMsbz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KGUscik6aSwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpfSh2b2lkIDAsZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhyb3cgbmV3IEVycm9yKCJEdW8gV2ViIFNESyBlcnJvcjogIit0KyhlPyJcblNlZSAiK2UrIiBmb3IgbW9yZSBpbmZvcm1hdGlvbiI6IiIpKX1mdW5jdGlvbiBlKHQpe3JldHVybiB0LnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pLywiJDEtJDIiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIG4odCxuKXtyZXR1cm4iZGF0YXNldCJpbiB0P3QuZGF0YXNldFtuXTp0LmdldEF0dHJpYnV0ZSgiZGF0YS0iK2UobikpfWZ1bmN0aW9uIGkodCxlLG4saSl7ImFkZEV2ZW50TGlzdGVuZXIiaW4gd2luZG93P3QuYWRkRXZlbnRMaXN0ZW5lcihlLGksITEpOnQuYXR0YWNoRXZlbnQobixpKX1mdW5jdGlvbiByKHQsZSxuLGkpeyJyZW1vdmVFdmVudExpc3RlbmVyImluIHdpbmRvdz90LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxpLCExKTp0LmRldGFjaEV2ZW50KG4saSl9ZnVuY3Rpb24gbyh0KXtpKGRvY3VtZW50LCJET01Db250ZW50TG9hZGVkIiwib25yZWFkeXN0YXRlY2hhbmdlIix0KX1mdW5jdGlvbiBzKHQpe3IoZG9jdW1lbnQsIkRPTUNvbnRlbnRMb2FkZWQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLHQpfWZ1bmN0aW9uIGEodCl7aSh3aW5kb3csIm1lc3NhZ2UiLCJvbm1lc3NhZ2UiLHQpfWZ1bmN0aW9uIGwodCl7cih3aW5kb3csIm1lc3NhZ2UiLCJvbm1lc3NhZ2UiLHQpfWZ1bmN0aW9uIGMoZSl7aWYoZSl7MD09PWUuaW5kZXhPZigiRVJSfCIpJiZ0KGUuc3BsaXQoInwiKVsxXSksZS5pbmRleE9mKCI6IikhPT0tMSYmMj09PWUuc3BsaXQoIjoiKS5sZW5ndGh8fHQoIkR1byB3YXMgZ2l2ZW4gYSBiYWQgdG9rZW4uICBUaGlzIG1pZ2h0IGluZGljYXRlIGEgY29uZmlndXJhdGlvbiBwcm9ibGVtIHdpdGggb25lIG9mIER1bydzIGNsaWVudCBsaWJyYXJpZXMuIiwiaHR0cHM6Ly93d3cuZHVvc2VjdXJpdHkuY29tL2RvY3MvZHVvd2ViI2ZpcnN0LXN0ZXBzIik7dmFyIG49ZS5zcGxpdCgiOiIpO3JldHVybiB2PWUseT1uWzBdLGI9blsxXSx7c2lnUmVxdWVzdDplLGR1b1NpZzpuWzBdLGFwcFNpZzpuWzFdfX19ZnVuY3Rpb24gdSgpe2lmKHc9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoeCksIXcpdGhyb3cgbmV3IEVycm9yKCdUaGlzIHBhZ2UgZG9lcyBub3QgY29udGFpbiBhbiBpZnJhbWUgZm9yIER1byB0byB1c2UuQWRkIGFuIGVsZW1lbnQgbGlrZSA8aWZyYW1lIGlkPSJkdW9faWZyYW1lIj48L2lmcmFtZT4gdG8gdGhpcyBwYWdlLiAgU2VlIGh0dHBzOi8vd3d3LmR1b3NlY3VyaXR5LmNvbS9kb2NzL2R1b3dlYiMzLi1zaG93LXRoZS1pZnJhbWUgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7bSgpLHModSl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gQm9vbGVhbih0Lm9yaWdpbj09PSJodHRwczovLyIrZyYmInN0cmluZyI9PXR5cGVvZiB0LmRhdGEmJih0LmRhdGEubWF0Y2goUyl8fHQuZGF0YS5tYXRjaChUKXx8dC5kYXRhLm1hdGNoKGspKSl9ZnVuY3Rpb24gaCh0KXt0JiYodC5ob3N0JiYoZz10Lmhvc3QpLHQuc2lnX3JlcXVlc3QmJmModC5zaWdfcmVxdWVzdCksdC5wb3N0X2FjdGlvbiYmKEE9dC5wb3N0X2FjdGlvbiksdC5wb3N0X2FyZ3VtZW50JiYoRT10LnBvc3RfYXJndW1lbnQpLHQuaWZyYW1lJiYodC5pZnJhbWUudGFnTmFtZT93PXQuaWZyYW1lOiJzdHJpbmciPT10eXBlb2YgdC5pZnJhbWUmJih4PXQuaWZyYW1lKSksImZ1bmN0aW9uIj09dHlwZW9mIHQuc3VibWl0X2NhbGxiYWNrJiYoTT10LnN1Ym1pdF9jYWxsYmFjaykpLHc/bSgpOih3PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHgpLHc/bSgpOm8odSkpLHMoaCl9ZnVuY3Rpb24gcCh0KXtpZihkKHQpKWlmKHQuZGF0YS5tYXRjaChrKSl7dmFyIGU9dC5kYXRhLnN1YnN0cmluZygiRFVPX09QRU5fV0lORE9XfCIubGVuZ3RoKTtmKGUpJiZ3aW5kb3cub3BlbihlLCJfc2VsZiIpfWVsc2UgXyh0LmRhdGEpLGwocCl9ZnVuY3Rpb24gZih0KXtpZighdClyZXR1cm4hMTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7aWYoZS5ocmVmPXQsImR1b3RydXN0ZWRlbmRwb2ludHM6Ij09PWUucHJvdG9jb2wpcmV0dXJuITA7aWYoImh0dHBzOiIhPT1lLnByb3RvY29sKXJldHVybiExO2Zvcih2YXIgbj0wO248TC5sZW5ndGg7bisrKWlmKGUuaG9zdG5hbWUuZW5kc1dpdGgoIi4iK0xbbl0pfHxlLmhvc3RuYW1lPT09TFtuXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBtKCl7Z3x8KGc9bih3LCJob3N0IiksZ3x8dCgiTm8gQVBJIGhvc3RuYW1lIGlzIGdpdmVuIGZvciBEdW8gdG8gdXNlLiAgQmUgc3VyZSB0byBwYXNzIGEgYGhvc3RgIHBhcmFtZXRlciB0byBEdW8uaW5pdCwgb3IgdGhyb3VnaCB0aGUgYGRhdGEtaG9zdGAgYXR0cmlidXRlIG9uIHRoZSBpZnJhbWUgZWxlbWVudC4iLCJodHRwczovL3d3dy5kdW9zZWN1cml0eS5jb20vZG9jcy9kdW93ZWIjMy4tc2hvdy10aGUtaWZyYW1lIikpLHkmJmJ8fChjKG4odywic2lnUmVxdWVzdCIpKSx5JiZifHx0KCJObyB2YWxpZCBzaWduZWQgcmVxdWVzdCBpcyBnaXZlbi4gIEJlIHN1cmUgdG8gZ2l2ZSB0aGUgYHNpZ19yZXF1ZXN0YCBwYXJhbWV0ZXIgdG8gRHVvLmluaXQsIG9yIHVzZSB0aGUgYGRhdGEtc2lnLXJlcXVlc3RgIGF0dHJpYnV0ZSBvbiB0aGUgaWZyYW1lIGVsZW1lbnQuIiwiaHR0cHM6Ly93d3cuZHVvc2VjdXJpdHkuY29tL2RvY3MvZHVvd2ViIzMuLXNob3ctdGhlLWlmcmFtZSIpKSwiIj09PUEmJihBPW4odywicG9zdEFjdGlvbiIpfHxBKSwic2lnX3Jlc3BvbnNlIj09PUUmJihFPW4odywicG9zdEFyZ3VtZW50Iil8fEUpLHcuc3JjPVsiaHR0cHM6Ly8iLGcsIi9mcmFtZS93ZWIvdjEvYXV0aD90eD0iLHksIiZwYXJlbnQ9IixlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQubG9jYXRpb24uaHJlZiksIiZ2PTIuNiJdLmpvaW4oIiIpLGEocCl9ZnVuY3Rpb24gXyh0KXtBKHQrIjoiK2IpfXZhciBnLHYseSxiLHcsTSxTPS9eKD86QVVUSHxFTlJPTEwpK1x8W0EtWmEtejAtOVwrXC89XStcfFtBLVphLXowLTlcK1wvPV0rJC8sVD0vXkVSUlx8W1x3XHNcLlwoXCldKyQvLGs9L15EVU9fT1BFTl9XSU5ET1dcfC8sTD1bImR1by5jb20iLCJkdW9zZWN1cml0eS5jb20iLCJkdW9tb2JpbGUuczMtdXMtd2VzdC0xLmFtYXpvbmF3cy5jb20iXSx4PSJkdW9faWZyYW1lIixBPSIiLEU9InNpZ19yZXNwb25zZSI7cmV0dXJue2luaXQ6aCxfb25SZWFkeTpvLF9wYXJzZVNpZ1JlcXVlc3Q6YyxfaXNEdW9NZXNzYWdlOmQsX2RvUG9zdEJhY2s6X319KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjI4KSxuKDUxNCldLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuXztyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9Imxpbmsge3tsaW5rQ2xhc3NOYW1lfX0iIGRhdGEtc2U9InNpZ25vdXQtbGluayI+XHQgICAgICAgIHt7bGlua1RleHR9fVx0ICAgICAgPC9hPlx0ICAgICcsY2xhc3NOYW1lOiJhdXRoLWZvb3RlciBjbGVhcmZpeCIsZXZlbnRzOnsiY2xpY2sgYSI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBpPXRoaXM7dGhpcy5tb2RlbC5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbmNlbCgpfSkudGhlbihmdW5jdGlvbigpe2kuc2V0dGluZ3MuZ2V0KCJzaWduT3V0TGluayIpP24ucmVkaXJlY3QoaS5zZXR0aW5ncy5nZXQoInNpZ25PdXRMaW5rIikpOihpLnN0YXRlLnNldCgibmF2aWdhdGVEaXIiLGUuRElSRUNUSU9OX0JBQ0spLGkub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsIiIpKX0pfX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2xpbmtDbGFzc05hbWU6aS5pc1VuZGVmaW5lZCh0aGlzLm9wdGlvbnMubGlua0NsYXNzTmFtZSk/ImdvdG8iOnRoaXMub3B0aW9ucy5saW5rQ2xhc3NOYW1lLGxpbmtUZXh0OnRoaXMub3B0aW9ucy5saW5rVGV4dHx8dC5sb2MoInNpZ25vdXQiLCJsb2dpbiIpfX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig1MzQpLG4oNjI0KSxuKDY1MCksbig2NTMpLG4oNjU0KSxuKDY0Niksbig2NTUpLG4oNjU2KSxuKDY1Nyksbig2NDQpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSxsLGMsdSl7cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6Im1mYS12ZXJpZnkiLGluaXRpYWxpemU6ZnVuY3Rpb24obil7dmFyIGksZD1uLmFwcFN0YXRlLmdldCgiZmFjdG9ycyIpLGg9bi5mYWN0b3JUeXBlLHA9bi5wcm92aWRlcjtzd2l0Y2goaCl7Y2FzZSJxdWVzdGlvbiI6aT1zO2JyZWFrO2Nhc2Uic21zIjpjYXNlImNhbGwiOmNhc2UiZW1haWwiOmk9YTticmVhaztjYXNlInRva2VuIjpjYXNlInRva2VuOnNvZnR3YXJlOnRvdHAiOmk9cjticmVhaztjYXNlInRva2VuOmhhcmR3YXJlIjppPW87YnJlYWs7Y2FzZSJwdXNoIjppPWw7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCBmYWN0b3IgdHlwZSIpfWlmKHRoaXMubW9kZWw9ZC5maW5kV2hlcmUoe3Byb3ZpZGVyOnAsZmFjdG9yVHlwZTpofSksIXRoaXMubW9kZWwpdGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgZmFjdG9yL3Byb3ZpZGVyIik7dGhpcy5hZGRMaXN0ZW5lcnMoKSx0aGlzLmFkZChuZXcgaSh0aGlzLnRvSlNPTigpKSksInB1c2giPT09aCYmdGhpcy5tb2RlbC5nZXQoImlzT2t0YUZhY3RvciIpJiYodGhpcy5hZGQoYyx7b3B0aW9uczp7bW9kZWw6dGhpcy5tb2RlbC5nZXQoImJhY2t1cEZhY3RvciIpfX0pLHRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5hdXRvUHVzaCIpJiZ0aGlzLmFkZChlLHtvcHRpb25zOnttb2RlbDp0aGlzLm1vZGVsLG5hbWU6ImF1dG9QdXNoIixwbGFjZWhvbGRlcjp0LmxvYygiYXV0b1B1c2giLCJsb2dpbiIpLGxhYmVsOiExLCJsYWJlbC10b3AiOiExLGNsYXNzTmFtZToibWFyZ2luLWJ0bS0wIn19KSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhbGxvd1JlbWVtYmVyRGV2aWNlIikmJnRoaXMuYWRkKGUse29wdGlvbnM6e21vZGVsOnRoaXMubW9kZWwsbmFtZToicmVtZW1iZXJEZXZpY2UiLHBsYWNlaG9sZGVyOnRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInJlbWVtYmVyRGV2aWNlTGFiZWwiKSxsYWJlbDohMSwibGFiZWwtdG9wIjohMCxjbGFzc05hbWU6Im1hcmdpbi1idG0tMCJ9fSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6cmVtZW1iZXJEZXZpY2UiLGZ1bmN0aW9uKHQsZSl7dC5nZXQoImJhY2t1cEZhY3RvciIpLnNldCgicmVtZW1iZXJEZXZpY2UiLGUpfSkpLHRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5oaWRlU2lnbk91dExpbmtJbk1GQSIpfHx0aGlzLmFkZChuZXcgdSh0aGlzLnRvSlNPTigpKSl9LHRyYXBBdXRoUmVzcG9uc2U6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc01mYUNoYWxsZW5nZSIpJiYhdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFSZXF1aXJlZCIpKXx8KCJwdXNoIj09dGhpcy5vcHRpb25zLmZhY3RvclR5cGUmJih0aGlzLnNldHRpbmdzLmdldCgiZmVhdHVyZXMuYXV0b1B1c2giKSYmdGhpcy5tb2RlbC5nZXQoImF1dG9QdXNoIik/aS5zZXRBdXRvUHVzaENvb2tpZSh0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJ1c2VySWQiKSk6aS5yZW1vdmVBdXRvUHVzaENvb2tpZSh0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJ1c2VySWQiKSkpLCExKX0sYmFjazpmdW5jdGlvbigpe319KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2NDcpXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5fO3JldHVybiB0LkZvcm0uZXh0ZW5kKHtjbGFzc05hbWU6Im1mYS12ZXJpZnktcXVlc3Rpb24iLGF1dG9TYXZlOiEwLG5vQ2FuY2VsQnV0dG9uOiEwLHNhdmU6bi5wYXJ0aWFsKHQubG9jLCJtZmEuY2hhbGxlbmdlLnZlcmlmeSIsImxvZ2luIiksc2Nyb2xsT25FcnJvcjohMSxsYXlvdXQ6Im8tZm9ybS10aGVtZSIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJmYWN0b3ItcXVlc3Rpb24ifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy50aXRsZT10aGlzLm1vZGVsLmdldCgiZmFjdG9yTGFiZWwiKSx0aGlzLmFkZElucHV0KHtsYWJlbDp0aGlzLm1vZGVsLmdldCgic2VjdXJpdHlRdWVzdGlvbiIpLCJsYWJlbC10b3AiOiEwLHBsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmFuc3dlci5wbGFjZWhvbGRlciIsImxvZ2luIiksY2xhc3NOYW1lOiJhdXRoLXBhc3Njb2RlIixuYW1lOiJhbnN3ZXIiLHR5cGU6InBhc3N3b3JkIixpbnB1dDplfSksdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiYWxsb3dSZW1lbWJlckRldmljZSIpJiZ0aGlzLmFkZElucHV0KHtsYWJlbDohMSwibGFiZWwtdG9wIjohMCxwbGFjZWhvbGRlcjp0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJyZW1lbWJlckRldmljZUxhYmVsIiksY2xhc3NOYW1lOiJtYXJnaW4tYnRtLTAiLG5hbWU6InJlbWVtYmVyRGV2aWNlIix0eXBlOiJjaGVja2JveCJ9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2NDgpXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZXh0ZW5kKHt0ZW1wbGF0ZTp0LnRwbCgnXHQgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJ7e3BsYWNlaG9sZGVyfX0iIG5hbWU9Int7bmFtZX19IiBpZD0ie3tpbnB1dElkfX0iIHZhbHVlPSJ7e3ZhbHVlfX0iLz5cdCAgICAgIDxzcGFuIGNsYXNzPSJwYXNzd29yZC10b2dnbGUiPlx0ICAgICAgICA8c3BhbiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1kYXJrIGJ1dHRvbi1zaG93Ij5cdCAgICAgICAgICB7e2kxOG4gY29kZT0ibWZhLmNoYWxsZW5nZS5hbnN3ZXIuc2hvd0Fuc3dlciIgYnVuZGxlPSJsb2dpbiJ9fTwvc3Bhbj5cdCAgICAgICAgPHNwYW4gY2xhc3M9ImJ1dHRvbiBidXR0b24taGlkZSI+e3tpMThuIGNvZGU9Im1mYS5jaGFsbGVuZ2UuYW5zd2VyLmhpZGVBbnN3ZXIiIGJ1bmRsZT0ibG9naW4ifX08L3NwYW4+XHQgICAgICA8L3NwYW4+JyksaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuZXZlbnRzWyJjbGljayAucGFzc3dvcmQtdG9nZ2xlIC5idXR0b24tc2hvdyJdPSJfc2hvd1Bhc3N3b3JkIix0aGlzLmV2ZW50c1siY2xpY2sgLnBhc3N3b3JkLXRvZ2dsZSAuYnV0dG9uLWhpZGUiXT0iX2hpZGVQYXNzd29yZCIsdGhpcy5kZWxlZ2F0ZUV2ZW50cygpfSxjaGFuZ2VUeXBlOmZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLmNoYW5nZVR5cGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuJCgiLnBhc3N3b3JkLXRvZ2dsZSIpLnRvZ2dsZUNsYXNzKCJwYXNzd29yZC10b2dnbGUtb24iLCJwYXNzd29yZCIhPT10KX0sX3Nob3dQYXNzd29yZDpmdW5jdGlvbigpe3RoaXMuY2hhbmdlVHlwZSgidGV4dCIpfSxfaGlkZVBhc3N3b3JkOmZ1bmN0aW9uKCl7dGhpcy5jaGFuZ2VUeXBlKCJwYXNzd29yZCIpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzMxKSxuKDY0OSksbig1MDUpLG4oNTI2KSxuKDU1NyldLHI9ZnVuY3Rpb24odCxlLG4saSl7ZnVuY3Rpb24gcih0KXt2YXIgZT10LnRpdGxlLG49dC50ZXh0O3JldHVybiEoIWV8fCFufHxlPT09bil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gcih0KT90Ont0ZXh0OnQudGV4dHx8dH19cmV0dXJuIGkuZXh0ZW5kKHt0ZW1wbGF0ZTplLmNvbXBpbGUoJ1x0ICAgICAge3sjaWYgcGFyYW1zfX1cdCAgICAgICAge3sjaWYgcGFyYW1zLmlubmVyVG9vbHRpcH19XHQgICAgICAgICAgPHNwYW4gY2xhc3M9ImlucHV0LXRvb2x0aXAgaWNvbiBmb3JtLWhlbHAtMTYiPjwvc3Bhbj5cdCAgICAgICAge3svaWZ9fVx0ICAgICAgICB7eyNpZiBwYXJhbXMuaWNvbn19XHQgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24gaW5wdXQtaWNvbiB7e3BhcmFtcy5pY29ufX0iPjwvc3Bhbj5cdCAgICAgICAge3svaWZ9fVx0ICAgICAge3svaWZ9fVx0ICAgICAgPGlucHV0IHR5cGU9Int7dHlwZX19IiBwbGFjZWhvbGRlcj0ie3twbGFjZWhvbGRlcn19IiBhcmlhLWxhYmVsPSJ7e3BsYWNlaG9sZGVyfX0iXHQgICAgICAgIG5hbWU9Int7bmFtZX19IiBpZD0ie3tpbnB1dElkfX0iIHZhbHVlPSJ7e3ZhbHVlfX0iIGF1dG9jb21wbGV0ZT0ib2ZmIi8+XHQgICAgJykscG9zdFJlbmRlcjpmdW5jdGlvbigpe3ZhciBlLG49dGhpcy5vcHRpb25zLnBhcmFtcztpZigibnVtYmVyIj09PXRoaXMub3B0aW9ucy50eXBlKXt2YXIgaT10aGlzLiQoImlucHV0Iik7aS5hdHRyKHtwYXR0ZXJuOiJbMC05XSoiLGlucHV0bW9kZToibnVtZXJpYyJ9KX1uJiZuLmlubmVyVG9vbHRpcCYmKGU9byhuLmlubmVyVG9vbHRpcCksdGhpcy4kKCIuaW5wdXQtdG9vbHRpcCIpLnF0aXAoe2NvbnRlbnQ6ZSxzdHlsZTp7Y2xhc3Nlczoib2t0YS1zaWduLWluLXRvb2x0aXAgcXRpcC1jdXN0b20gcXRpcC1zaGFkb3cifSxwb3NpdGlvbjp7bXk6ImJvdHRvbSBsZWZ0Iix0YXJnZXQ6Im1vdXNlIixhZGp1c3Q6e21ldGhvZDoiZmxpcCIsbW91c2U6ITAseTotNSx4OjV9LHZpZXdwb3J0OnQoImJvZHkiKX19KSl9LGZvY3VzOmZ1bmN0aW9uKCl7aWYoIW4uaXNJRSgpKXJldHVybiBpLnByb3RvdHlwZS5mb2N1cy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzMzApLG4oMzI4KSxuKDMzMSksbig1MDApLG4oNDY2KSxuKDM2MSldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8pe2Z1bmN0aW9uIHModCxlKXtyZXR1cm4gby51dGMoZSkuem9uZSgiLTA3OjAwIikuZm9ybWF0KHQpfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQmJnQucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIDA9PT10LmluZGV4T2YoYyk/dDpjK3R9dmFyIGM9Ii9hc3NldHMiO3JldHVybiB0LnJlZ2lzdGVySGVscGVyKCJpMThuIixmdW5jdGlvbih0KXt2YXIgbixyPWEodC5oYXNoLmNvZGUpLG89YSh0Lmhhc2guYnVuZGxlKSxzPWEodC5oYXNoLmFyZ3VtZW50cyk7cmV0dXJuIHMmJihuPWUubWFwKGEocykuc3BsaXQoIjsiKSxmdW5jdGlvbih0KXt0PWEodCk7dmFyIG4saT10aGlzO3JldHVybiBlLmVhY2godC5zcGxpdCgiLiIpLGZ1bmN0aW9uKHQpe249bj9uW3RdOmlbdF19KSxufSx0aGlzKSksaS5sb2NhbGl6ZShyLG8sbil9KSx0LnJlZ2lzdGVySGVscGVyKCJ4c3JmVG9rZW5JbnB1dCIsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQuU2FmZVN0cmluZygnPGlucHV0IHR5cGU9ImhpZGRlbiIgY2xhc3M9ImhpZGUiIG5hbWU9Il94c3JmVG9rZW4iIHZhbHVlPSInK24oIiNfeHNyZlRva2VuIikudGV4dCgpKyciPicpfSksdC5yZWdpc3RlckhlbHBlcigiaW1nIixmdW5jdGlvbihuKXt2YXIgaT0idW5kZWZpbmVkIiE9dHlwZW9mIG9rdGEmJm9rdGEuY2RuVXJsSG9zdG5hbWV8fCIiLHI9ZQ==", "base64"));
  res.write(new Buffer("LnBpY2sobi5oYXNoLFsic3JjIiwiYWx0Iiwid2lkdGgiLCJoZWlnaHQiLCJjbGFzcyIsInRpdGxlIl0pO3Iuc3JjPSIiK2krbChyLnNyYyk7dmFyIG89ZS5tYXAocixmdW5jdGlvbihlLG4pe3JldHVybiBuKyc9IicrdC5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGUpKyciJ30pO3JldHVybiBuZXcgdC5TYWZlU3RyaW5nKCI8aW1nICIrby5qb2luKCIgIikrIi8+Iil9KSx0LnJlZ2lzdGVySGVscGVyKCJzaG9ydERhdGUiLGUucGFydGlhbChzLCJNTU0gREQiKSksdC5yZWdpc3RlckhlbHBlcigibWVkaXVtRGF0ZSIsZS5wYXJ0aWFsKHMsIk1NTU0gREQsIFlZWVkiKSksdC5yZWdpc3RlckhlbHBlcigibG9uZ0RhdGUiLGUucGFydGlhbChzLCJNTU1NIERELCBZWVlZLCBoOm1tYSIpKSx0LnJlZ2lzdGVySGVscGVyKCJmb3JtYXREYXRlIixzKSx0LnJlZ2lzdGVySGVscGVyKCJtYXJrZG93biIsZnVuY3Rpb24oZSl7cmV0dXJuIHIodCxlKX0pLHR9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjUxKSxuKDY1MildLHI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe28ucmVtb3ZlQ29va2llKHQse3BhdGg6Ii8ifSl9ZnVuY3Rpb24gaSh0LGUpe28uY29va2llKHQsZSx7ZXhwaXJlczpsLHBhdGg6Ii8ifSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gYStlLmdldFN0cmluZ0hhc2godCl9dmFyIG89dC4kLHM9ImxuIixhPSJhdXRvX3B1c2hfIixsPTM2NSxjPXt9O3JldHVybiBjLmdldENvb2tpZVVzZXJuYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIG8uY29va2llKHMpfSxjLnNldFVzZXJuYW1lQ29va2llPWZ1bmN0aW9uKHQpe2kocyx0KX0sYy5yZW1vdmVVc2VybmFtZUNvb2tpZT1mdW5jdGlvbigpe24ocyl9LGMuaXNBdXRvUHVzaEVuYWJsZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJiJ0cnVlIj09PW8uY29va2llKHIodCkpfSxjLnNldEF1dG9QdXNoQ29va2llPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQmJmkocih0KSwhMCl9LGMucmVtb3ZlQXV0b1B1c2hDb29raWU9ZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmbihyKHQpKX0sY30uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk7aT1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LmdldFN0cmluZ0hhc2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTUzODEsbj10Lmxlbmd0aDtuOyllPTMzKmVedC5jaGFyQ29kZUF0KC0tbik7cmV0dXJuIGU+Pj4wfSx0fS5jYWxsKGUsbixlLHQpLCEodm9pZCAwIT09aSYmKHQuZXhwb3J0cz1pKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG87LyohCgkJICogalF1ZXJ5IENvb2tpZSBQbHVnaW4gdjEuNC4xCgkJICogaHR0cHM6Ly9naXRodWIuY29tL2NhcmhhcnRsL2pxdWVyeS1jb29raWUKCQkgKgoJCSAqIENvcHlyaWdodCAyMDEzIEtsYXVzIEhhcnRsCgkJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCgkJICovCgkhZnVuY3Rpb24ocyl7cj1bbigzMzIpXSxpPXMsbz0iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KGUscik6aSwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpfShmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBhLnJhdz90OmVuY29kZVVSSUNvbXBvbmVudCh0KX1mdW5jdGlvbiBuKHQpe3JldHVybiBhLnJhdz90OmRlY29kZVVSSUNvbXBvbmVudCh0KX1mdW5jdGlvbiBpKHQpe3JldHVybiBlKGEuanNvbj9KU09OLnN0cmluZ2lmeSh0KTpTdHJpbmcodCkpfWZ1bmN0aW9uIHIodCl7MD09PXQuaW5kZXhPZignIicpJiYodD10LnNsaWNlKDEsLTEpLnJlcGxhY2UoL1xcIi9nLCciJykucmVwbGFjZSgvXFxcXC9nLCJcXCIpKTt0cnl7cmV0dXJuIHQ9ZGVjb2RlVVJJQ29tcG9uZW50KHQucmVwbGFjZShzLCIgIikpLGEuanNvbj9KU09OLnBhcnNlKHQpOnR9Y2F0Y2goZSl7fX1mdW5jdGlvbiBvKGUsbil7dmFyIGk9YS5yYXc/ZTpyKGUpO3JldHVybiB0LmlzRnVuY3Rpb24obik/bihpKTppfXZhciBzPS9cKy9nLGE9dC5jb29raWU9ZnVuY3Rpb24ocixzLGwpe2lmKHZvaWQgMCE9PXMmJiF0LmlzRnVuY3Rpb24ocykpe2lmKGw9dC5leHRlbmQoe30sYS5kZWZhdWx0cyxsKSwibnVtYmVyIj09dHlwZW9mIGwuZXhwaXJlcyl7dmFyIGM9bC5leHBpcmVzLHU9bC5leHBpcmVzPW5ldyBEYXRlO3Uuc2V0VGltZSgrdSs4NjRlNSpjKX1yZXR1cm4gZG9jdW1lbnQuY29va2llPVtlKHIpLCI9IixpKHMpLGwuZXhwaXJlcz8iOyBleHBpcmVzPSIrbC5leHBpcmVzLnRvVVRDU3RyaW5nKCk6IiIsbC5wYXRoPyI7IHBhdGg9IitsLnBhdGg6IiIsbC5kb21haW4/IjsgZG9tYWluPSIrbC5kb21haW46IiIsbC5zZWN1cmU/Ijsgc2VjdXJlIjoiIl0uam9pbigiIil9Zm9yKHZhciBkPXI/dm9pZCAwOnt9LGg9ZG9jdW1lbnQuY29va2llP2RvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyAiKTpbXSxwPTAsZj1oLmxlbmd0aDtwPGY7cCsrKXt2YXIgbT1oW3BdLnNwbGl0KCI9IiksXz1uKG0uc2hpZnQoKSksZz1tLmpvaW4oIj0iKTtpZihyJiZyPT09Xyl7ZD1vKGcscyk7YnJlYWt9cnx8dm9pZCAwPT09KGc9byhnKSl8fChkW19dPWcpfXJldHVybiBkfTthLmRlZmF1bHRzPXt9LHQucmVtb3ZlQ29va2llPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHZvaWQgMCE9PXQuY29va2llKGUpJiYodC5jb29raWUoZSwiIix0LmV4dGVuZCh7fSxuLHtleHBpcmVzOi0xfSkpLCF0LmNvb2tpZShlKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlKXt2YXIgbj10Ll87cmV0dXJuIHQuRm9ybS5leHRlbmQoe2NsYXNzTmFtZToibWZhLXZlcmlmeS10b3RwIixhdXRvU2F2ZTohMCxub0NhbmNlbEJ1dHRvbjohMCxzYXZlOm4ucGFydGlhbCh0LmxvYywibWZhLmNoYWxsZW5nZS52ZXJpZnkiLCJsb2dpbiIpLHNjcm9sbE9uRXJyb3I6ITEsbGF5b3V0OiJvLWZvcm0tdGhlbWUiLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiZmFjdG9yLXRvdHAifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5tb2RlbC5nZXQoImZhY3RvckxhYmVsIiksaT0iUlNBIj09PXRoaXMubW9kZWwuZ2V0KCJwcm92aWRlciIpfHwiREVMX09BVEgiPT09dGhpcy5tb2RlbC5nZXQoInByb3ZpZGVyIik7dGhpcy50aXRsZT1uLHRoaXMuc3VidGl0bGU9dC5sb2MoIm1mYS5jaGFsbGVuZ2UudGl0bGUiLCJsb2dpbiIsW25dKSx0aGlzLmFkZElucHV0KHtsYWJlbDohMSwibGFiZWwtdG9wIjohMCxwbGFjZWhvbGRlcjp0LmxvYygibWZhLmNoYWxsZW5nZS5lbnRlckNvZGUucGxhY2Vob2xkZXIiLCJsb2dpbiIpLGNsYXNzTmFtZToiby1mb3JtLWZpZWxkc2V0IG8tZm9ybS1sYWJlbC10b3AgYXV0aC1wYXNzY29kZSIsbmFtZToiYW5zd2VyIixpbnB1dDplLHR5cGU6aT8icGFzc3dvcmQiOiJ0ZXh0In0pLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImFsbG93UmVtZW1iZXJEZXZpY2UiKSYmdGhpcy5hZGRJbnB1dCh7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicmVtZW1iZXJEZXZpY2VMYWJlbCIpLGNsYXNzTmFtZToibWFyZ2luLWJ0bS0wIixuYW1lOiJyZW1lbWJlckRldmljZSIsdHlwZToiY2hlY2tib3gifSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuXztyZXR1cm4gdC5Gb3JtLmV4dGVuZCh7Y2xhc3NOYW1lOiJtZmEtdmVyaWZ5LXl1YmlrZXkiLGF1dG9TYXZlOiEwLG5vQ2FuY2VsQnV0dG9uOiEwLHNhdmU6bi5wYXJ0aWFsKHQubG9jLCJtZmEuY2hhbGxlbmdlLnZlcmlmeSIsImxvZ2luIiksc2Nyb2xsT25FcnJvcjohMSxsYXlvdXQ6Im8tZm9ybS10aGVtZSIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJmYWN0b3IteXViaWtleSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLm1vZGVsLmdldCgiZmFjdG9yTGFiZWwiKTt0aGlzLnRpdGxlPW4sdGhpcy5zdWJ0aXRsZT10LmxvYygiZmFjdG9yLnRvdHBIYXJkLnl1YmlrZXkuZGVzY3JpcHRpb24iLCJsb2dpbiIpLHRoaXMuYWRkSW5wdXQoe2xhYmVsOiExLCJsYWJlbC10b3AiOiEwLGNsYXNzTmFtZToiby1mb3JtLWZpZWxkc2V0IG8tZm9ybS1sYWJlbC10b3AgYXV0aC1wYXNzY29kZSIsbmFtZToiYW5zd2VyIixpbnB1dDplLHR5cGU6InBhc3N3b3JkIixwbGFjZWhvbGRlcjp0LmxvYygiZmFjdG9yLnRvdHBIYXJkLnl1YmlrZXkucGxhY2Vob2xkZXIiLCJsb2dpbiIpfSksdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiYWxsb3dSZW1lbWJlckRldmljZSIpJiZ0aGlzLmFkZElucHV0KHtsYWJlbDohMSwibGFiZWwtdG9wIjohMCxjbGFzc05hbWU6Im1hcmdpbi1idG0tMCIscGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicmVtZW1iZXJEZXZpY2VMYWJlbCIpLG5hbWU6InJlbWVtYmVyRGV2aWNlIix0eXBlOiJjaGVja2JveCJ9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyksbigzNDYpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaShlKXtzd2l0Y2goZSl7Y2FzZSJzbXMiOnJldHVybntidXR0b25EYXRhU2U6InNtcy1zZW5kLWNvZGUiLGJ1dHRvbkNsYXNzTmFtZToic21zLXJlcXVlc3QtYnV0dG9uIixmb3JtU3VibWl0OnQubG9jKCJtZmEuc2VuZENvZGUiLCJsb2dpbiIpLGZvcm1SZXRyeTp0LmxvYygibWZhLnJlc2VuZENvZGUiLCJsb2dpbiIpLGZvcm1TdWJtaXR0ZWQ6dC5sb2MoIm1mYS5zZW50IiwibG9naW4iKSxzdWJ0aXRsZTpyKHtzdWJ0aXRsZTp0aGlzLm1vZGVsLmdldCgicGhvbmVOdW1iZXIiKX0pfTtjYXNlImNhbGwiOnJldHVybntidXR0b25EYXRhU2U6Im1ha2UtY2FsbCIsYnV0dG9uQ2xhc3NOYW1lOiJjYWxsLXJlcXVlc3QtYnV0dG9uIixmb3JtU3VibWl0OnQubG9jKCJtZmEuY2FsbCIsImxvZ2luIiksZm9ybVJldHJ5OnQubG9jKCJtZmEucmVkaWFsIiwibG9naW4iKSxmb3JtU3VibWl0dGVkOnQubG9jKCJtZmEuY2FsbGluZyIsImxvZ2luIiksc3VidGl0bGU6cih7c3VidGl0bGU6dGhpcy5tb2RlbC5nZXQoInBob25lTnVtYmVyIil9KX07Y2FzZSJlbWFpbCI6cmV0dXJue2J1dHRvbkRhdGFTZToiZW1haWwtc2VuZC1jb2RlIixidXR0b25DbGFzc05hbWU6ImVtYWlsLXJlcXVlc3QtYnV0dG9uIixmb3JtU3VibWl0OnQubG9jKCJtZmEuc2VuZEVtYWlsIiwibG9naW4iKSxmb3JtUmV0cnk6dC5sb2MoIm1mYS5yZXNlbmRFbWFpbCIsImxvZ2luIiksZm9ybVN1Ym1pdHRlZDp0LmxvYygibWZhLnNlbnQiLCJsb2dpbiIpLHN1YnRpdGxlOnIoe3N1YnRpdGxlOnRoaXMubW9kZWwuZ2V0KCJlbWFpbCIpfSl9O2RlZmF1bHQ6cmV0dXJue2J1dHRvbkRhdGFTZToiIixidXR0b25DbGFzc05hbWU6IiIsZm9ybVN1Ym1pdDoiIixmb3JtUmV0cnk6IiIsZm9ybVN1Ym1pdHRlZDoiIn19fXZhciByPXQuSGFuZGxlYmFycy5jb21waWxlKCIoe3tzdWJ0aXRsZX19KSIpLG89dC5fLHM9M2U0O3JldHVybiB0LkZvcm0uZXh0ZW5kKHtjbGFzc05hbWU6Im1mYS12ZXJpZnktcGFzc2NvZGUiLGF1dG9TYXZlOiEwLG5vQ2FuY2VsQnV0dG9uOiEwLHNhdmU6by5wYXJ0aWFsKHQubG9jLCJtZmEuY2hhbGxlbmdlLnZlcmlmeSIsImxvZ2luIiksc2Nyb2xsT25FcnJvcjohMSxsYXlvdXQ6Im8tZm9ybS10aGVtZSIsZGlzYWJsZVN1Ym1pdEJ1dHRvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLmFwcFN0YXRlLmdldCgiaXNNZmFDaGFsbGVuZ2UiKSYmdGhpcy5tb2RlbC5nZXQoImFuc3dlciIpfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIHI9dGhpczt0aGlzLnRpdGxlPXRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpO3ZhciBhPXRoaXMubW9kZWwuZ2V0KCJmYWN0b3JUeXBlIiksbD1pLmNhbGwodGhpcyxhKTt0aGlzLiRlbC5hdHRyKCJkYXRhLXNlIiwiZmFjdG9yLSIrYSksdGhpcy5zdWJ0aXRsZT1sLnN1YnRpdGxlLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZXJyb3IiLGZ1bmN0aW9uKCl7dGhpcy5jbGVhckVycm9ycygpfSksdGhpcy5hZGQodC5jcmVhdGVCdXR0b24oe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjpsLmJ1dHRvbkRhdGFTZX0sY2xhc3NOYW1lOiJidXR0b24gIitsLmJ1dHRvbkNsYXNzTmFtZSx0aXRsZTpsLmZvcm1TdWJtaXQsY2xpY2s6ZnVuY3Rpb24oKXtyLmNsZWFyRXJyb3JzKCksdGhpcy5kaXNhYmxlKCksdGhpcy5vcHRpb25zLnRpdGxlPWwuZm9ybVN1Ym1pdHRlZCx0aGlzLnJlbmRlcigpLHRoaXMubW9kZWwuc2V0KCJhbnN3ZXIiLCIiKSx0aGlzLm1vZGVsLnNhdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIuZ2V0SW5wdXRzKCkuZmlyc3QoKS5yZW5kZXIoKS5mb2N1cygpLGUuZGVsYXkocyl9KS50aGVuKG8uYmluZChmdW5jdGlvbigpe3RoaXMub3B0aW9ucy50aXRsZT1sLmZvcm1SZXRyeSx0aGlzLmVuYWJsZSgpLHRoaXMucmVuZGVyKCl9LHRoaXMpKX19KSksdGhpcy5hZGRJbnB1dCh7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dC5sb2MoIm1mYS5jaGFsbGVuZ2UuZW50ZXJDb2RlLnBsYWNlaG9sZGVyIiwibG9naW4iKSxjbGFzc05hbWU6Im8tZm9ybS1maWVsZHNldCBvLWZvcm0tbGFiZWwtdG9wIGF1dGgtcGFzc2NvZGUiLG5hbWU6ImFuc3dlciIsaW5wdXQ6bix0eXBlOiJ0ZXh0In0pLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImFsbG93UmVtZW1iZXJEZXZpY2UiKSYmdGhpcy5hZGRJbnB1dCh7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicmVtZW1iZXJEZXZpY2VMYWJlbCIpLGNsYXNzTmFtZToibWFyZ2luLWJ0bS0wIixuYW1lOiJyZW1lbWJlckRldmljZSIsdHlwZToiY2hlY2tib3gifSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjUwKSxuKDM1NildLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuXyxyPXQuSGFuZGxlYmFycy5jb21waWxlKCJ7e2ZhY3Rvck5hbWV9fSAoe3t7ZGV2aWNlTmFtZX19fSkiKSxvPTNlNCxzPSc8ZGl2IGNsYXNzPSJva3RhLWZvcm0taW5mb2JveC13YXJuaW5nIGluZm9ib3ggaW5mb2JveC13YXJuaW5nIj5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIHdhcm5pbmctMTYiPjwvc3Bhbj5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt7d2FybmluZ319PC9wPlx0ICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pic7cmV0dXJuIHQuRm9ybS5leHRlbmQoe2NsYXNzTmFtZToibWZhLXZlcmlmeS1wdXNoIixhdXRvU2F2ZTohMCxub0NhbmNlbEJ1dHRvbjohMCxzYXZlOmkucGFydGlhbCh0LmxvYywib2t0YXZlcmlmeS5zZW5kIiwibG9naW4iKSxzY3JvbGxPbkVycm9yOiExLGxheW91dDoiby1mb3JtLXRoZW1lIixhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6ImZhY3Rvci1wdXNoIn0sZXZlbnRzOntzdWJtaXQ6InN1Ym1pdCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy5saXN0ZW5Ubyh0aGlzLm9wdGlvbnMuYXBwU3RhdGUsImNoYW5nZTppc01mYVJlamVjdGVkQnlVc2VyIixmdW5jdGlvbihlLG4pe3RoaXMuc2V0U3VibWl0U3RhdGUobiksbiYmdGhpcy5zaG93RXJyb3IodC5sb2MoIm9rdGF2ZXJpZnkucmVqZWN0ZWQiLCJsb2dpbiIpKX0pLHRoaXMubGlzdGVuVG8odGhpcy5vcHRpb25zLmFwcFN0YXRlLCJjaGFuZ2U6aXNNZmFUaW1lb3V0IixmdW5jdGlvbihlLG4pe3RoaXMuc2V0U3VibWl0U3RhdGUobiksbiYmdGhpcy5zaG93RXJyb3IodC5sb2MoIm9rdGF2ZXJpZnkudGltZW91dCIsImxvZ2luIikpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm9wdGlvbnMuYXBwU3RhdGUsImNoYW5nZTppc01mYVJlcXVpcmVkIixmdW5jdGlvbih0LGUpe2UmJih0aGlzLmNsZWFyRXJyb3JzKCksdGhpcy5jbGVhcldhcm5pbmdzKCkpfSksdGhpcy50aXRsZT1yKHtmYWN0b3JOYW1lOnRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpLGRldmljZU5hbWU6dGhpcy5tb2RlbC5nZXQoImRldmljZU5hbWUiKX0pfSxzZXRTdWJtaXRTdGF0ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLiRlbC5maW5kKCIuYnV0dG9uIik7dGhpcy5lbmFibGVkPWUsZT8obi5yZW1vdmVDbGFzcygibGluay1idXR0b24tZGlzYWJsZWQiKSxuLnByb3AoInZhbHVlIix0LmxvYygib2t0YXZlcmlmeS5zZW5kIiwibG9naW4iKSksbi5wcm9wKCJkaXNhYmxlZCIsITEpKToobi5hZGRDbGFzcygibGluay1idXR0b24tZGlzYWJsZWQiKSxuLnByb3AoInZhbHVlIix0LmxvYygib2t0YXZlcmlmeS5zZW50IiwibG9naW4iKSksbi5wcm9wKCJkaXNhYmxlZCIsITApKX0sc3VibWl0OmZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQmJnQucHJldmVudERlZmF1bHQoKSx0aGlzLmVuYWJsZWQmJih0aGlzLnNldFN1Ym1pdFN0YXRlKCExKSx0aGlzLmRvU2F2ZSgpKX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5hdXRvUHVzaCIpJiZlLmlzQXV0b1B1c2hFbmFibGVkKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJJZCIpKSYmKHRoaXMubW9kZWwuc2V0KCJhdXRvUHVzaCIsITApLGkuZGVmZXIoaS5iaW5kKHRoaXMuc3VibWl0LHRoaXMpKSl9LGRvU2F2ZTpmdW5jdGlvbigpe3ZhciBlO3RoaXMuY2xlYXJFcnJvcnMoKSx0aGlzLmNsZWFyV2FybmluZ3MoKSx0aGlzLm1vZGVsLmlzVmFsaWQoKSYmKHRoaXMubGlzdGVuVG9PbmNlKHRoaXMubW9kZWwsImVycm9yIixmdW5jdGlvbigpe3RoaXMuc2V0U3VibWl0U3RhdGUoITApLHRoaXMuY2xlYXJXYXJuaW5ncygpLGNsZWFyVGltZW91dChlKX0pLHRoaXMudHJpZ2dlcigic2F2ZSIsdGhpcy5tb2RlbCksZT1uLmNhbGxBZnRlclRpbWVvdXQoaS5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5zaG93V2FybmluZyh0LmxvYygib2t0YXZlcmlmeS53YXJuaW5nIiwibG9naW4iKSl9LHRoaXMpLG8pKX0sc2hvd0Vycm9yOmZ1bmN0aW9uKHQpe3RoaXMuY2xlYXJXYXJuaW5ncygpLHRoaXMubW9kZWwudHJpZ2dlcigiZXJyb3IiLHRoaXMubW9kZWwse3Jlc3BvbnNlSlNPTjp7ZXJyb3JTdW1tYXJ5OnR9fSl9LHNob3dXYXJuaW5nOmZ1bmN0aW9uKHQpe3RoaXMuY2xlYXJXYXJuaW5ncygpLHRoaXMuYWRkKHMsIi5vLWZvcm0tZXJyb3ItY29udGFpbmVyIix7b3B0aW9uczp7d2FybmluZzp0fX0pfSxjbGVhcldhcm5pbmdzOmZ1bmN0aW9uKCl7dGhpcy4kKCIub2t0YS1mb3JtLWluZm9ib3gtd2FybmluZyIpLnJlbW92ZSgpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKG4pe24uYWRkRGl2aWRlcigpLG4uYWRkSW5wdXQoe2xhYmVsOiExLCJsYWJlbC10b3AiOiEwLHBsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS5wbGFjZWhvbGRlciIsImxvZ2luIiksY2xhc3NOYW1lOiJvLWZvcm0tZmllbGRzZXQgby1mb3JtLWxhYmVsLXRvcCBpbmxpbmUtaW5wdXQgYXV0aC1wYXNzY29kZSIsbmFtZToiYW5zd2VyIixpbnB1dDplLHR5cGU6InRleHQifSksbi5hZGQodC5jcmVhdGVCdXR0b24oe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiaW5saW5lLXRvdHAtdmVyaWZ5In0sY2xhc3NOYW1lOiJidXR0b24gaW5saW5lLXRvdHAtdmVyaWZ5Iix0aXRsZTp0LmxvYygibWZhLmNoYWxsZW5nZS52ZXJpZnkiLCJsb2dpbiIpLGNsaWNrOmZ1bmN0aW9uKCl7bi5tb2RlbC5tYW5hZ2VUcmFuc2FjdGlvbihmdW5jdGlvbih0LGUpe3JldHVybiJNRkFfQ0hBTExFTkdFIj09PXQuc3RhdHVzJiZ0LnByZXY/dC5wcmV2KCkudGhlbihmdW5jdGlvbih0KXtlKHQpLG4ubW9kZWwuc2F2ZSgpfSk6dm9pZCBuLm1vZGVsLnNhdmUoKX0pfX0pKSxuLmF0KDEpLmZvY3VzKCl9cmV0dXJuIHQuRm9ybS5leHRlbmQoe2F1dG9TYXZlOiEwLG5vQnV0dG9uQmFyOiEwLHNjcm9sbE9uRXJyb3I6ITEsbGF5b3V0OiJvLWZvcm0tdGhlbWUiLGNsYXNzTmFtZToibWZhLXZlcmlmeS10b3RwLWlubGluZSIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJmYWN0b3ItaW5saW5lLXRvdHAifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImVycm9yIixmdW5jdGlvbigpe3RoaXMuY2xlYXJFcnJvcnMoKX0pLHRoaXMuYWRkKHQuY3JlYXRlQnV0dG9uKHtjbGFzc05hbWU6ImxpbmsiLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiaW5saW5lLXRvdHAtYWRkIn0sdGl0bGU6dC5sb2MoIm1mYS5jaGFsbGVuZ2Uub3JFbnRlckNvZGUiLCJsb2dpbiIpLGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmUoKSxuKGUpfX0pKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpLG4oNjIzKSxuKDY1OSksbig2NjApLG4oNjQ0KSxuKDY2MSldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9dC5fO3JldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJtZmEtdmVyaWZ5IHZlcmlmeS13aW5kb3dzLWhlbGxvIixNb2RlbDp7bG9jYWw6e19fYXV0b1RyaWdnZXJlZF9fOiJib29sZWFuIn0sc2F2ZTpmdW5jdGlvbigpe2lmKGkuaXNBdmFpbGFibGUoKSl7dGhpcy50cmlnZ2VyKCJyZXF1ZXN0Iik7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe3ZhciBuPWEuZmluZFdoZXJlKGUuZmFjdG9ycyx7ZmFjdG9yVHlwZToid2ViYXV0aG4iLHByb3ZpZGVyOiJGSURPIn0pO3JldHVybiBuLnZlcmlmeSgpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG89ci5mYWN0b3I7cmV0dXJuIGkuZ2V0QXNzZXJ0aW9uKG8uY2hhbGxlbmdlLm5vbmNlLFt7aWQ6by5wcm9maWxlLmNyZWRlbnRpYWxJZH1dKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuLnZlcmlmeSh7YXV0aGVudGljYXRvckRhdGE6dC5hdXRoZW50aWNhdG9yRGF0YSxjbGllbnREYXRhOnQuY2xpZW50RGF0YSxzaWduYXR1cmVEYXRhOnQuc2lnbmF0dXJlfSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRyaWdnZXIoInN5bmMiKSx0LnRyaWdnZXIoInNpZ25JbiIpLGV9KS5mYWlsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLm1lc3NhZ2Upe2Nhc2UiQWJvcnRFcnJvciI6Y2FzZSJOb3RGb3VuZEVycm9yIjpjYXNlIk5vdFN1cHBvcnRlZEVycm9yIjpyZXR1cm4gdC50cmlnZ2VyKCJhYm9ydCIsbi5tZXNzYWdlKSxlfXRocm93IG59KX0pfSl9fX0sRm9ybTp7YXV0b1NhdmU6ITAsaGFzU2F2aW5nU3RhdGU6ITEsdGl0bGU6YS5wYXJ0aWFsKHQubG9jLCJmYWN0b3Iud2luZG93c0hlbGxvIiwibG9naW4iKSxzdWJ0aXRsZTpmdW5jdGlvbigpe3JldHVybiBpLmlzQXZhaWxhYmxlKCk/dC5sb2MoInZlcmlmeS53aW5kb3dzSGVsbG8uc3VidGl0bGUiLCJsb2dpbiIpOiIifSxzYXZlOmEucGFydGlhbCh0LmxvYywidmVyaWZ5LndpbmRvd3NIZWxsby5zYXZlIiwibG9naW4iKSxjdXN0b21TYXZpbmdTdGF0ZTp7c3RvcDoiYWJvcnQifSxtb2RlbEV2ZW50czpmdW5jdGlvbigpe3JldHVybiBpLmlzQXZhaWxhYmxlKCk/e3JlcXVlc3Q6Il9zdGFydEVucm9sbG1lbnQiLGVycm9yOiJfc3RvcEVucm9sbG1lbnQiLGFib3J0OiJfc3RvcEVucm9sbG1lbnQiLHNpZ25JbjoiX3N1Y2Nlc3NFbnJvbGxtZW50In06e319LG5vQnV0dG9uQmFyOmZ1bmN0aW9uKCl7cmV0dXJuIWkuaXNBdmFpbGFibGUoKX0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIGkuaXNBdmFpbGFibGUoKXx8ZS5wdXNoKG4uVmlldyh7VmlldzpuZXcgcyh7bWVzc2FnZTp0LmxvYygiZW5yb2xsLndpbmRvd3NIZWxsby5lcnJvci5ub3RXaW5kb3dzIiwibG9naW4iKX0pfSx7c2VsZWN0b3I6Ii5vLWZvcm0tZXJyb3ItY29udGFpbmVyIn0pKSxlLnB1c2gobi5WaWV3KHtWaWV3Om5ldyByKHttb2RlbDp0aGlzLm1vZGVsLHZpc2libGU6ITF9KX0pKSxlfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7MSE9PXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKS5sZW5ndGh8fHRoaXMubW9kZWwuZ2V0KCJfX2F1dG9UcmlnZ2VyZWRfXyIpfHwodGhpcy5tb2RlbC5zZXQoIl9fYXV0b1RyaWdnZXJlZF9fIiwhMCksdGhpcy5tb2RlbC5zYXZlKCkpfSxfc3RhcnRFbnJvbGxtZW50OmZ1bmN0aW9uKCl7dGhpcy5zdWJ0aXRsZT10LmxvYygidmVyaWZ5LndpbmRvd3NIZWxsby5zdWJ0aXRsZS5sb2FkaW5nIiwibG9naW4iKSx0aGlzLm1vZGVsLnRyaWdnZXIoInNwaW5uZXI6c2hvdyIpLHRoaXMuX3Jlc2V0RXJyb3JNZXNzYWdlKCksdGhpcy5yZW5kZXIoKSx0aGlzLiQoIi5vLWZvcm0tYnV0dG9uLWJhciIpLmFkZENsYXNzKCJoaWRlIil9LF9zdG9wRW5yb2xsbWVudDpmdW5jdGlvbihlKXt0aGlzLnN1YnRpdGxlPXQubG9jKCJ2ZXJpZnkud2luZG93c0hlbGxvLnN1YnRpdGxlIiwibG9naW4iKSx0aGlzLm1vZGVsLnRyaWdnZXIoInNwaW5uZXI6aGlkZSIpLHRoaXMuJCgiLm8tZm9ybS1idXR0b24tYmFyIikucmVtb3ZlQ2xhc3MoImhpZGUiKTt2YXIgbjtzd2l0Y2goZSl7Y2FzZSJOb3RGb3VuZEVycm9yIjpuPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKS5sZW5ndGg+MT90LmxvYygidmVyaWZ5LndpbmRvd3NIZWxsby5lcnJvci5ub3RGb3VuZC5zZWxlY3RBbm90aGVyIiwibG9naW4iKTp0LmxvYygidmVyaWZ5LndpbmRvd3NIZWxsby5lcnJvci5ub3RGb3VuZCIsImxvZ2luIik7YnJlYWs7Y2FzZSJOb3RTdXBwb3J0ZWRFcnJvciI6bj10LmxvYygiZW5yb2xsLndpbmRvd3NIZWxsby5lcnJvci5ub3RDb25maWd1cmVkSHRtbCIsImxvZ2luIil9aWYodGhpcy5fcmVzZXRFcnJvck1lc3NhZ2UoKSxuKXt2YXIgaT1uZXcgcyh7bWVzc2FnZTpufSk7dGhpcy4kKCIuby1mb3JtLWVycm9yLWNvbnRhaW5lciIpLmFkZENsYXNzKCJvLWZvcm0taGFzLWVycm9ycyIpLHRoaXMuYWRkKGkse3NlbGVjdG9yOiIuby1mb3JtLWVycm9yLWNvbnRhaW5lciJ9KSx0aGlzLl9lcnJvck1lc3NhZ2VWaWV3PXRoaXMubGFzdCgpfXRoaXMucmVuZGVyKCl9LF9zdWNjZXNzRW5yb2xsbWVudDpmdW5jdGlvbigpe3RoaXMuc3VidGl0bGU9dC5sb2MoInZlcmlmeS53aW5kb3dzSGVsbG8uc3VidGl0bGUuc2lnbmluZ0luIiwibG9naW4iKSx0aGlzLnJlbmRlcigpLHRoaXMuJCgiLm8tZm9ybS1idXR0b24tYmFyIikuYWRkQ2xhc3MoImhpZGUiKX0sX3Jlc2V0RXJyb3JNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5fZXJyb3JNZXNzYWdlVmlldyYmdGhpcy5fZXJyb3JNZXNzYWdlVmlldy5yZW1vdmUoKSx0aGlzLl9lcnJvck1lc3NhZ2VWaWV3PXZvaWQgMCx0aGlzLmNsZWFyRXJyb3JzKCl9fSxiYWNrOmZ1bmN0aW9uKCl7fSxGb290ZXI6b30pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDM0NildLHI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiBuZXcgZSh0KX1mdW5jdGlvbiBpKHQsZSxpKXtlPWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOiJGSURPXzJfMCIsYWxnb3JpdGhtOnQuYWxnb3JpdGhtfX0pO3ZhciByPXdpbmRvdy5tc0NyZWRlbnRpYWxzLm1ha2VDcmVkZW50aWFsKHQsZSxpKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZnJlZXplKHtjcmVkZW50aWFsOntpZDp0LmlkfSxwdWJsaWNLZXk6SlNPTi5wYXJzZSh0LnB1YmxpY0tleSksYXR0ZXN0YXRpb246dC5hdHRlc3RhdGlvbn0pfSk7cmV0dXJuIG4ocil9ZnVuY3Rpb24gcih0LGUpe3ZhciBpPWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOiJGSURPXzJfMCIsaWQ6dC5pZH19KSxyPXthY2NlcHQ6aX0sbz13aW5kb3cubXNDcmVkZW50aWFscy5nZXRBc3NlcnRpb24odCxyKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXQuc2lnbmF0dXJlO3JldHVybiBPYmplY3QuZnJlZXplKHtjcmVkZW50aWFsOntpZDp0LmlkfSxjbGllbnREYXRhOmUuY2xpZW50RGF0YSxhdXRoZW50aWNhdG9yRGF0YTplLmF1dGhuckRhdGEsc2lnbmF0dXJlOmUuc2lnbmF0dXJlfSl9KTtyZXR1cm4gbihvKX1yZXR1cm57bWFrZUNyZWRlbnRpYWw6aSxnZXRBc3NlcnRpb246cixpc0F2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaGFzT3duUHJvcGVydHkoIm1zQ3JlZGVudGlhbHMiKX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KV0scj1mdW5jdGlvbih0KXtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7Y2xhc3NOYW1lOiJva3RhLXdhaXRpbmctc3Bpbm5lciIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJvLWZvcm0tb2t0YS13YWl0aW5nLXNwaW5uZXIifSxtb2RlbEV2ZW50czp7InNwaW5uZXI6c2hvdyI6InNob3ciLCJzcGlubmVyOmhpZGUiOiJoaWRlIn0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0JiZ0LnZpc2libGU9PT0hMSYmdGhpcy5oaWRlKCl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLiRlbC5yZW1vdmVDbGFzcygiaGlkZSIpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuYWRkQ2xhc3MoImhpZGUiKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig0NzApXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49J1x0ICAgIDxzcGFuIGNsYXNzPSJpY29uIGVycm9yLTI0Ij48L3NwYW4+XHQgICAgPGg0PjxzdHJvbmc+e3t7bWVzc2FnZX19fTwvc3Ryb25nPjwvaDQ+XHQgICc7cmV0dXJuIGUuZXh0ZW5kKHt0ZW1wbGF0ZTpuLGNsYXNzTmFtZToib2t0YS1pbmZvYm94LWVycm9yIGluZm9ib3ggaW5mb2JveC1lcnJvciBpbmZvYm94LW1kIG1hcmdpbi1idG0tMjUiLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiby1mb3JtLWVycm9yLWh0bWwifSxtZXNzYWdlOiIiLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dCYmdC5tZXNzYWdlJiYodGhpcy5tZXNzYWdlPXQubWVzc2FnZSl9LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybnttZXNzYWdlOnRoaXMubWVzc2FnZX19fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDYyMyksbig2NDQpLG4oMzQ2KSxuKDY2MSksbig1MDUpLG4oNjYzKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXtmdW5jdGlvbiBhKHQsZSl7c3dpdGNoKHQpe2Nhc2UgMTpyZXR1cm4gZT8idTJmLmVycm9yLm90aGVyLm9uZUZhY3RvciI6InUyZi5lcnJvci5vdGhlciI7Y2FzZSAyOmNhc2UgMzpyZXR1cm4gZT8idTJmLmVycm9yLmJhZFJlcXVlc3Qub25lRmFjdG9yIjoidTJmLmVycm9yLmJhZFJlcXVlc3QiO2Nhc2UgNDpyZXR1cm4gZT8idTJmLmVycm9yLnVuc3VwcG9ydGVkLm9uZUZhY3RvciI6InUyZi5lcnJvci51bnN1cHBvcnRlZCI7Y2FzZSA1OnJldHVybiJ1MmYuZXJyb3IudGltZW91dCJ9fXZhciBsPXQuXztyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToidmVyaWZ5LXUyZiIsTW9kZWw6e3NhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlnZ2VyKCJyZXF1ZXN0IiksdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe3ZhciBuPWwuZmluZFdoZXJlKGUuZmFjdG9ycyx7ZmFjdG9yVHlwZToidTJmIixwcm92aWRlcjoiRklETyJ9KSxpPXRoaXM7cmV0dXJuIG4udmVyaWZ5KCkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1lLmZhY3RvcixzPW8ucHJvZmlsZS5hcHBJZCxsPVt7dmVyc2lvbjpvLnByb2ZpbGUudmVyc2lvbixrZXlIYW5kbGU6by5wcm9maWxlLmNyZWRlbnRpYWxJZH1dO2kudHJpZ2dlcigicmVxdWVzdCIpO3ZhciBjPXIuZGVmZXIoKTtyZXR1cm4gdTJmLnNpZ24ocyxvLmNoYWxsZW5nZS5ub25jZSxsLGZ1bmN0aW9uKGUpe2lmKGkudHJpZ2dlcigiZXJyb3JzOmNsZWFyIiksIWUuZXJyb3JDb2RlfHwwPT09ZS5lcnJvckNvZGUpcmV0dXJuIG4udmVyaWZ5KHtjbGllbnREYXRhOmUuY2xpZW50RGF0YSxzaWduYXR1cmVEYXRhOmUuc2lnbmF0dXJlRGF0YX0pLnRoZW4oYy5yZXNvbHZlKTt2YXIgcj0xPT09aS5vcHRpb25zLmFwcFN0YXRlLmdldCgiZmFjdG9ycyIpLmxlbmd0aDtjLnJlamVjdCh7eGhyOntyZXNwb25zZUpTT046e2Vycm9yU3VtbWFyeTp0LmxvYyhhKGUuZXJyb3JDb2RlLHIpLCJsb2dpbiIpfX19KX0pLGMucHJvbWlzZX0pfSl9fSxGb3JtOnthdXRvU2F2ZTohMCxoYXNTYXZpbmdTdGF0ZTohMSx0aXRsZTpsLnBhcnRpYWwodC5sb2MsImZhY3Rvci51MmYiLCJsb2dpbiIpLGNsYXNzTmFtZToidmVyaWZ5LXUyZi1mb3JtIixub0NhbmNlbEJ1dHRvbjohMCxzYXZlOmwucGFydGlhbCh0LmxvYywidmVyaWZ5LnUyZi5yZXRyeSIsImxvZ2luIiksbm9CdXR0b25CYXI6ZnVuY3Rpb24oKXtyZXR1cm4hd2luZG93Lmhhc093blByb3BlcnR5KCJ1MmYiKX0sbW9kZWxFdmVudHM6e3JlcXVlc3Q6Il9zdGFydEVucm9sbG1lbnQiLGVycm8=", "base64"));
  res.write(new Buffer("cjoiX3N0b3BFbnJvbGxtZW50In0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGU9W107aWYod2luZG93Lmhhc093blByb3BlcnR5KCJ1MmYiKSllLnB1c2gobi5WaWV3KHtWaWV3OidcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9InUyZi12ZXJpZnktdGV4dCI+XHQgICAgICAgICAgICAgIDxwPnt7aTE4biBjb2RlPSJ2ZXJpZnkudTJmLmluc3RydWN0aW9ucyIgYnVuZGxlPSJsb2dpbiJ9fTwvcD5cdCAgICAgICAgICAgICAgPHA+e3tpMThuIGNvZGU9InZlcmlmeS51MmYuaW5zdHJ1Y3Rpb25zQmx1ZXRvb3RoIiBidW5kbGU9ImxvZ2luIn19PC9wPlx0ICAgICAgICAgICAgICA8ZGl2IGRhdGEtc2U9InUyZi13YWl0aW5nIiBjbGFzcz0ib2t0YS13YWl0aW5nLXNwaW5uZXIiPjwvZGl2Plx0ICAgICAgICAgICAgPC9kaXY+J30pKTtlbHNle3ZhciBpPSJ1MmYuZXJyb3Iubm90U3VwcG9ydGVkQnJvd3NlciI7cy5pc0ZpcmVmb3goKT9pPSJ1MmYuZXJyb3Iubm9GaXJlZm94RXh0ZW5zaW9uIjoxPT09dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZmFjdG9ycyIpLmxlbmd0aCYmKGk9InUyZi5lcnJvci5ub3RTdXBwb3J0ZWRCcm93c2VyLm9uZUZhY3RvciIpLGUucHVzaChuLlZpZXcoe1ZpZXc6bmV3IG8oe21lc3NhZ2U6dC5sb2MoaSwibG9naW4iKX0pfSx7c2VsZWN0b3I6Ii5vLWZvcm0tZXJyb3ItY29udGFpbmVyIn0pKX1yZXR1cm4gZX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe2wuZGVmZXIobC5iaW5kKGZ1bmN0aW9uKCl7d2luZG93Lmhhc093blByb3BlcnR5KCJ1MmYiKT90aGlzLm1vZGVsLnNhdmUoKTp0aGlzLiQoJ1tkYXRhLXNlPSJ1MmYtd2FpdGluZyJdJykuYWRkQ2xhc3MoImhpZGUiKX0sdGhpcykpfSxfc3RhcnRFbnJvbGxtZW50OmZ1bmN0aW9uKCl7dGhpcy4kKCIub2t0YS13YWl0aW5nLXNwaW5uZXIiKS5yZW1vdmVDbGFzcygiaGlkZSIpLHRoaXMuJCgiLm8tZm9ybS1idXR0b24tYmFyIikuaGlkZSgpfSxfc3RvcEVucm9sbG1lbnQ6ZnVuY3Rpb24oKXt0aGlzLiQoIi5va3RhLXdhaXRpbmctc3Bpbm5lciIpLmFkZENsYXNzKCJoaWRlIiksdGhpcy4kKCIuby1mb3JtLWJ1dHRvbi1iYXIiKS5zaG93KCl9fSxiYWNrOmZ1bmN0aW9uKCl7fSxGb290ZXI6aX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSl7CgkvL0NvcHlyaWdodCAyMDE0LTIwMTUgR29vZ2xlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCS8vbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0CgkvL2h0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL29wZW4tc291cmNlL2xpY2Vuc2VzL2JzZAoJInVzZSBzdHJpY3QiOyFmdW5jdGlvbigpe2lmKCEoInUyZiJpbiB3aW5kb3cpJiYiY2hyb21lImluIHdpbmRvdyl7dmFyIHQsZT13aW5kb3cudTJmPXt9O2UuRVhURU5TSU9OX0lEPSJrbWVuZGZhcGdnamVob2RuZGZsbW1nYWdkYmFtaG5mZCIsZS5NZXNzYWdlVHlwZXM9e1UyRl9SRUdJU1RFUl9SRVFVRVNUOiJ1MmZfcmVnaXN0ZXJfcmVxdWVzdCIsVTJGX1JFR0lTVEVSX1JFU1BPTlNFOiJ1MmZfcmVnaXN0ZXJfcmVzcG9uc2UiLFUyRl9TSUdOX1JFUVVFU1Q6InUyZl9zaWduX3JlcXVlc3QiLFUyRl9TSUdOX1JFU1BPTlNFOiJ1MmZfc2lnbl9yZXNwb25zZSIsVTJGX0dFVF9BUElfVkVSU0lPTl9SRVFVRVNUOiJ1MmZfZ2V0X2FwaV92ZXJzaW9uX3JlcXVlc3QiLFUyRl9HRVRfQVBJX1ZFUlNJT05fUkVTUE9OU0U6InUyZl9nZXRfYXBpX3ZlcnNpb25fcmVzcG9uc2UifSxlLkVycm9yQ29kZXM9e09LOjAsT1RIRVJfRVJST1I6MSxCQURfUkVRVUVTVDoyLENPTkZJR1VSQVRJT05fVU5TVVBQT1JURUQ6MyxERVZJQ0VfSU5FTElHSUJMRTo0LFRJTUVPVVQ6NX0sZS5VMmZSZXF1ZXN0LGUuVTJmUmVzcG9uc2UsZS5FcnJvcixlLlRyYW5zcG9ydCxlLlRyYW5zcG9ydHMsZS5TaWduUmVxdWVzdCxlLlNpZ25SZXNwb25zZSxlLlJlZ2lzdGVyUmVxdWVzdCxlLlJlZ2lzdGVyUmVzcG9uc2UsZS5SZWdpc3RlcmVkS2V5LGUuR2V0SnNBcGlWZXJzaW9uUmVzcG9uc2UsZS5nZXRNZXNzYWdlUG9ydD1mdW5jdGlvbih0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGNocm9tZSYmY2hyb21lLnJ1bnRpbWUpe3ZhciBuPXt0eXBlOmUuTWVzc2FnZVR5cGVzLlUyRl9TSUdOX1JFUVVFU1Qsc2lnblJlcXVlc3RzOltdfTtjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShlLkVYVEVOU0lPTl9JRCxuLGZ1bmN0aW9uKCl7Y2hyb21lLnJ1bnRpbWUubGFzdEVycm9yP2UuZ2V0SWZyYW1lUG9ydF8odCk6ZS5nZXRDaHJvbWVSdW50aW1lUG9ydF8odCl9KX1lbHNlIGUuaXNBbmRyb2lkQ2hyb21lXygpP2UuZ2V0QXV0aGVudGljYXRvclBvcnRfKHQpOmUuaXNJb3NDaHJvbWVfKCk/ZS5nZXRJb3NQb3J0Xyh0KTplLmdldElmcmFtZVBvcnRfKHQpfSxlLmlzQW5kcm9pZENocm9tZV89ZnVuY3Rpb24oKXt2YXIgdD1uYXZpZ2F0b3IudXNlckFnZW50O3JldHVybiB0LmluZGV4T2YoIkNocm9tZSIpIT0tMSYmdC5pbmRleE9mKCJBbmRyb2lkIikhPS0xfSxlLmlzSW9zQ2hyb21lXz1mdW5jdGlvbigpe3JldHVybiAkLmluQXJyYXkobmF2aWdhdG9yLnBsYXRmb3JtLFsiaVBob25lIiwiaVBhZCIsImlQb2QiXSk+LTF9LGUuZ2V0Q2hyb21lUnVudGltZVBvcnRfPWZ1bmN0aW9uKHQpe3ZhciBuPWNocm9tZS5ydW50aW1lLmNvbm5lY3QoZS5FWFRFTlNJT05fSUQse2luY2x1ZGVUbHNDaGFubmVsSWQ6ITB9KTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChuZXcgZS5XcmFwcGVkQ2hyb21lUnVudGltZVBvcnRfKG4pKX0sMCl9LGUuZ2V0QXV0aGVudGljYXRvclBvcnRfPWZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0KG5ldyBlLldyYXBwZWRBdXRoZW50aWNhdG9yUG9ydF8pfSwwKX0sZS5nZXRJb3NQb3J0Xz1mdW5jdGlvbih0KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChuZXcgZS5XcmFwcGVkSW9zUG9ydF8pfSwwKX0sZS5XcmFwcGVkQ2hyb21lUnVudGltZVBvcnRfPWZ1bmN0aW9uKHQpe3RoaXMucG9ydF89dH0sZS5mb3JtYXRTaWduUmVxdWVzdF89ZnVuY3Rpb24obixpLHIsbyxzKXtpZih2b2lkIDA9PT10fHx0PDEuMSl7Zm9yKHZhciBhPVtdLGw9MDtsPHIubGVuZ3RoO2wrKylhW2xdPXt2ZXJzaW9uOnJbbF0udmVyc2lvbixjaGFsbGVuZ2U6aSxrZXlIYW5kbGU6cltsXS5rZXlIYW5kbGUsYXBwSWQ6bn07cmV0dXJue3R5cGU6ZS5NZXNzYWdlVHlwZXMuVTJGX1NJR05fUkVRVUVTVCxzaWduUmVxdWVzdHM6YSx0aW1lb3V0U2Vjb25kczpvLHJlcXVlc3RJZDpzfX1yZXR1cm57dHlwZTplLk1lc3NhZ2VUeXBlcy5VMkZfU0lHTl9SRVFVRVNULGFwcElkOm4sY2hhbGxlbmdlOmkscmVnaXN0ZXJlZEtleXM6cix0aW1lb3V0U2Vjb25kczpvLHJlcXVlc3RJZDpzfX0sZS5mb3JtYXRSZWdpc3RlclJlcXVlc3RfPWZ1bmN0aW9uKG4saSxyLG8scyl7aWYodm9pZCAwPT09dHx8dDwxLjEpe2Zvcih2YXIgYT0wO2E8ci5sZW5ndGg7YSsrKXJbYV0uYXBwSWQ9bjtmb3IodmFyIGw9W10sYT0wO2E8aS5sZW5ndGg7YSsrKWxbYV09e3ZlcnNpb246aVthXS52ZXJzaW9uLGNoYWxsZW5nZTpyWzBdLGtleUhhbmRsZTppW2FdLmtleUhhbmRsZSxhcHBJZDpufTtyZXR1cm57dHlwZTplLk1lc3NhZ2VUeXBlcy5VMkZfUkVHSVNURVJfUkVRVUVTVCxzaWduUmVxdWVzdHM6bCxyZWdpc3RlclJlcXVlc3RzOnIsdGltZW91dFNlY29uZHM6byxyZXF1ZXN0SWQ6c319cmV0dXJue3R5cGU6ZS5NZXNzYWdlVHlwZXMuVTJGX1JFR0lTVEVSX1JFUVVFU1QsYXBwSWQ6bixyZWdpc3RlclJlcXVlc3RzOnIscmVnaXN0ZXJlZEtleXM6aSx0aW1lb3V0U2Vjb25kczpvLHJlcXVlc3RJZDpzfX0sZS5XcmFwcGVkQ2hyb21lUnVudGltZVBvcnRfLnByb3RvdHlwZS5wb3N0TWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLnBvcnRfLnBvc3RNZXNzYWdlKHQpfSxlLldyYXBwZWRDaHJvbWVSdW50aW1lUG9ydF8ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnRvTG93ZXJDYXNlKCk7Im1lc3NhZ2UiPT1ufHwib25tZXNzYWdlIj09bj90aGlzLnBvcnRfLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbih0KXtlKHtkYXRhOnR9KX0pOmNvbnNvbGUuZXJyb3IoIldyYXBwZWRDaHJvbWVSdW50aW1lUG9ydCBvbmx5IHN1cHBvcnRzIG9uTWVzc2FnZSIpfSxlLldyYXBwZWRBdXRoZW50aWNhdG9yUG9ydF89ZnVuY3Rpb24oKXt0aGlzLnJlcXVlc3RJZF89LTEsdGhpcy5yZXF1ZXN0T2JqZWN0Xz1udWxsfSxlLldyYXBwZWRBdXRoZW50aWNhdG9yUG9ydF8ucHJvdG90eXBlLnBvc3RNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBu", "base64"));
  res.write(new Buffer("PWUuV3JhcHBlZEF1dGhlbnRpY2F0b3JQb3J0Xy5JTlRFTlRfVVJMX0JBU0VfKyI7Uy5yZXF1ZXN0PSIrZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHQpKSsiO2VuZCI7ZG9jdW1lbnQubG9jYXRpb249bn0sZS5XcmFwcGVkQXV0aGVudGljYXRvclBvcnRfLnByb3RvdHlwZS5nZXRQb3J0VHlwZT1mdW5jdGlvbigpe3JldHVybiJXcmFwcGVkQXV0aGVudGljYXRvclBvcnRfIn0sZS5XcmFwcGVkQXV0aGVudGljYXRvclBvcnRfLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC50b0xvd2VyQ2FzZSgpO2lmKCJtZXNzYWdlIj09bil7dmFyIGk9dGhpczt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaS5vblJlcXVlc3RVcGRhdGVfLmJpbmQoaSxlKSwhMSl9ZWxzZSBjb25zb2xlLmVycm9yKCJXcmFwcGVkQXV0aGVudGljYXRvclBvcnQgb25seSBzdXBwb3J0cyBtZXNzYWdlIil9LGUuV3JhcHBlZEF1dGhlbnRpY2F0b3JQb3J0Xy5wcm90b3R5cGUub25SZXF1ZXN0VXBkYXRlXz1mdW5jdGlvbih0LGUpe3ZhciBuPUpTT04ucGFyc2UoZS5kYXRhKSxpPShuLmludGVudFVSTCxuLmVycm9yQ29kZSxudWxsKTtuLmhhc093blByb3BlcnR5KCJkYXRhIikmJihpPUpTT04ucGFyc2Uobi5kYXRhKSksdCh7ZGF0YTppfSl9LGUuV3JhcHBlZEF1dGhlbnRpY2F0b3JQb3J0Xy5JTlRFTlRfVVJMX0JBU0VfPSJpbnRlbnQ6I0ludGVudDthY3Rpb249Y29tLmdvb2dsZS5hbmRyb2lkLmFwcHMuYXV0aGVudGljYXRvci5BVVRIRU5USUNBVEUiLGUuV3JhcHBlZElvc1BvcnRfPWZ1bmN0aW9uKCl7fSxlLldyYXBwZWRJb3NQb3J0Xy5wcm90b3R5cGUucG9zdE1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9SlNPTi5zdHJpbmdpZnkodCksbj0idTJmOi8vYXV0aD8iK2VuY29kZVVSSShlKTtsb2NhdGlvbi5yZXBsYWNlKG4pfSxlLldyYXBwZWRJb3NQb3J0Xy5wcm90b3R5cGUuZ2V0UG9ydFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4iV3JhcHBlZElvc1BvcnRfIn0sZS5XcmFwcGVkSW9zUG9ydF8ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnRvTG93ZXJDYXNlKCk7Im1lc3NhZ2UiIT09biYmY29uc29sZS5lcnJvcigiV3JhcHBlZElvc1BvcnQgb25seSBzdXBwb3J0cyBtZXNzYWdlIil9LGUuZ2V0SWZyYW1lUG9ydF89ZnVuY3Rpb24odCl7dmFyIG49ImNocm9tZS1leHRlbnNpb246Ly8iK2UuRVhURU5TSU9OX0lELGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7aS5zcmM9bisiL3UyZi1jb21tcy5odG1sIixpLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJkaXNwbGF5Om5vbmUiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGkpO3ZhciByPW5ldyBNZXNzYWdlQ2hhbm5lbCxvPWZ1bmN0aW9uKGUpeyJyZWFkeSI9PWUuZGF0YT8oci5wb3J0MS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKSx0KHIucG9ydDEpKTpjb25zb2xlLmVycm9yKCdGaXJzdCBldmVudCBvbiBpZnJhbWUgcG9ydCB3YXMgbm90ICJyZWFkeSInKX07ci5wb3J0MS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKSxyLnBvcnQxLnN0YXJ0KCksaS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixmdW5jdGlvbigpe2kuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgiaW5pdCIsbixbci5wb3J0Ml0pfSl9LGUuRVhURU5TSU9OX1RJTUVPVVRfU0VDPTMwLGUucG9ydF89bnVsbCxlLndhaXRpbmdGb3JQb3J0Xz1bXSxlLnJlcUNvdW50ZXJfPTAsZS5jYWxsYmFja01hcF89e30sZS5nZXRQb3J0U2luZ2xldG9uXz1mdW5jdGlvbih0KXtlLnBvcnRfP3QoZS5wb3J0Xyk6KDA9PWUud2FpdGluZ0ZvclBvcnRfLmxlbmd0aCYmZS5nZXRNZXNzYWdlUG9ydChmdW5jdGlvbih0KXtmb3IoZS5wb3J0Xz10LGUucG9ydF8uYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZS5yZXNwb25zZUhhbmRsZXJfKTtlLndhaXRpbmdGb3JQb3J0Xy5sZW5ndGg7KWUud2FpdGluZ0ZvclBvcnRfLnNoaWZ0KCkoZS5wb3J0Xyl9KSxlLndhaXRpbmdGb3JQb3J0Xy5wdXNoKHQpKX0sZS5yZXNwb25zZUhhbmRsZXJfPWZ1bmN0aW9uKHQpe3ZhciBuPXQuZGF0YSxpPW4ucmVxdWVzdElkO2lmKCFpfHwhZS5jYWxsYmFja01hcF9baV0pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiVW5rbm93biBvciBtaXNzaW5nIHJlcXVlc3RJZCBpbiByZXNwb25zZS4iKTt2YXIgcj1lLmNhbGxiYWNrTWFwX1tpXTtkZWxldGUgZS5jYWxsYmFja01hcF9baV0scihuLnJlc3BvbnNlRGF0YSl9LGUuc2lnbj1mdW5jdGlvbihuLGkscixvLHMpe3ZvaWQgMD09PXQ/ZS5nZXRBcGlWZXJzaW9uKGZ1bmN0aW9uKGEpe3Q9dm9pZCAwPT09YS5qc19hcGlfdmVyc2lvbj8wOmEuanNfYXBpX3ZlcnNpb24sY29uc29sZS5sb2coIkV4dGVuc2lvbiBKUyBBUEkgVmVyc2lvbjogIix0KSxlLnNlbmRTaWduUmVxdWVzdChuLGkscixvLHMpfSk6ZS5zZW5kU2lnblJlcXVlc3QobixpLHIsbyxzKX0sZS5zZW5kU2lnblJlcXVlc3Q9ZnVuY3Rpb24odCxuLGkscixvKXtlLmdldFBvcnRTaW5nbGV0b25fKGZ1bmN0aW9uKHMpe3ZhciBhPSsrZS5yZXFDb3VudGVyXztlLmNhbGxiYWNrTWFwX1thXT1yO3ZhciBsPSJ1bmRlZmluZWQiIT10eXBlb2Ygbz9vOmUuRVhURU5TSU9OX1RJTUVPVVRfU0VDLGM9ZS5mb3JtYXRTaWduUmVxdWVzdF8odCxuLGksbCxhKTtzLnBvc3RNZXNzYWdlKGMpfSl9LGUucmVnaXN0ZXI9ZnVuY3Rpb24obixpLHIsbyxzKXt2b2lkIDA9PT10P2UuZ2V0QXBpVmVyc2lvbihmdW5jdGlvbihhKXt0PXZvaWQgMD09PWEuanNfYXBpX3ZlcnNpb24/MDphLmpzX2FwaV92ZXJzaW9uLGNvbnNvbGUubG9nKCJFeHRlbnNpb24gSlMgQVBJIFZlcnNpb246ICIsdCksZS5zZW5kUmVnaXN0ZXJSZXF1ZXN0KG4saSxyLG8scyl9KTplLnNlbmRSZWdpc3RlclJlcXVlc3QobixpLHIsbyxzKX0sZS5zZW5kUmVnaXN0ZXJSZXF1ZXN0PWZ1bmN0aW9uKHQsbixpLHIsbyl7ZS5nZXRQb3J0U2luZ2xldG9uXyhmdW5jdGlvbihzKXt2YXIgYT0rK2UucmVxQ291bnRlcl87ZS5jYWxsYmFja01hcF9bYV09cjt2YXIgbD0idW5kZWZpbmVkIiE9dHlwZW9mIG8/bzplLkVYVEVOU0lPTl9USU1FT1VUX1NFQyxjPWUuZm9ybWF0UmVnaXN0ZXJSZXF1ZXN0Xyh0LGksbixsLGEpO3MucG9zdE1lc3NhZ2UoYyl9KX0sZS5nZXRBcGlWZXJzaW9uPWZ1bmN0aW9uKHQsbil7ZS5nZXRQb3J0U2luZ2xldG9uXyhmdW5jdGlvbihpKXtpZihpLmdldFBvcnRUeXBlKXt2YXIgcjtzd2l0Y2goaS5nZXRQb3J0VHlwZSgpKXtjYXNlIldyYXBwZWRJb3NQb3J0XyI6Y2FzZSJXcmFwcGVkQXV0aGVudGljYXRvclBvcnRfIjpyPTEuMTticmVhaztkZWZhdWx0OnI9MH1yZXR1cm4gdm9pZCB0KHtqc19hcGlfdmVyc2lvbjpyfSl9dmFyIG89KytlLnJlcUNvdW50ZXJfO2UuY2FsbGJhY2tNYXBfW29dPXQ7dmFyIHM9e3R5cGU6ZS5NZXNzYWdlVHlwZXMuVTJGX0dFVF9BUElfVkVSU0lPTl9SRVFVRVNULHRpbWVvdXRTZWNvbmRzOiJ1bmRlZmluZWQiIT10eXBlb2Ygbj9uOmUuRVhURU5TSU9OX1RJTUVPVVRfU0VDLHJlcXVlc3RJZDpvfTtpLnBvc3RNZXNzYWdlKHMpfSl9fX0oKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDYyOCksbig2MjYpLG4oNTYyKSxuKDY2NSksbig2NjYpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMpe3ZhciBhPXQuXztyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiZW5yb2xsLWNob2ljZXMiLHN0YXRlOntwYWdlVHlwZTpudWxsfSxNb2RlbDp7fSxGb3JtOntub0NhbmNlbEJ1dHRvbjohMCx0aXRsZTphLnBhcnRpYWwodC5sb2MsImVucm9sbC5jaG9pY2VzLnRpdGxlIiwibG9naW4iKSxub0J1dHRvbkJhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLmdldCgicGFnZVR5cGUiKT09PW4uQUxMX09QVElPTkFMX05PTkVfRU5ST0xMRUR9LHN1YnRpdGxlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuc3RhdGUuZ2V0KCJwYWdlVHlwZSIpKXtjYXNlIG4uQUxMX09QVElPTkFMX1NPTUVfRU5ST0xMRUQ6Y2FzZSBuLkhBU19SRVFVSVJFRF9BTExfUkVRVUlSRURfRU5ST0xMRUQ6cmV0dXJuIHQubG9jKCJlbnJvbGwuY2hvaWNlcy5vcHRpb25hbCIsImxvZ2luIik7ZGVmYXVsdDpyZXR1cm4gdC5sb2MoImVucm9sbC5jaG9pY2VzLmRlc2NyaXB0aW9uIiwibG9naW4iKX19LHNhdmU6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5zdGF0ZS5nZXQoInBhZ2VUeXBlIikpe2Nhc2Ugbi5BTExfT1BUSU9OQUxfU09NRV9FTlJPTExFRDpjYXNlIG4uSEFTX1JFUVVJUkVEX0FMTF9SRVFVSVJFRF9FTlJPTExFRDpyZXR1cm4gdC5sb2MoImVucm9sbC5jaG9pY2VzLnN1Ym1pdC5maW5pc2giLCJsb2dpbiIpO2Nhc2Ugbi5IQVNfUkVRVUlSRURfTk9ORV9FTlJPTExFRDpyZXR1cm4gdC5sb2MoImVucm9sbC5jaG9pY2VzLnN1Ym1pdC5jb25maWd1cmUiLCJsb2dpbiIpO2Nhc2Ugbi5IQVNfUkVRVUlSRURfU09NRV9SRVFVSVJFRF9FTlJPTExFRDpyZXR1cm4gdC5sb2MoImVucm9sbC5jaG9pY2VzLnN1Ym1pdC5uZXh0IiwibG9naW4iKTtkZWZhdWx0OnJldHVybiIifX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLmxpc3RlblRvKHRoaXMsInNhdmUiLGZ1bmN0aW9uKCl7dmFyIGU7c3dpdGNoKHRoaXMuc3RhdGUuZ2V0KCJwYWdlVHlwZSIpKXtjYXNlIG4uSEFTX1JFUVVJUkVEX05PTkVfRU5ST0xMRUQ6Y2FzZSBuLkhBU19SRVFVSVJFRF9TT01FX1JFUVVJUkVEX0VOUk9MTEVEOmU9dC5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKS5nZXRGaXJzdFVuZW5yb2xsZWRSZXF1aXJlZEZhY3RvcigpLHQuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLGkuY3JlYXRlRW5yb2xsRmFjdG9yVXJsKGUuZ2V0KCJwcm92aWRlciIpLGUuZ2V0KCJmYWN0b3JUeXBlIikpKTticmVhaztkZWZhdWx0OnJldHVybiB0aGlzLm1vZGVsLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQuc2tpcCgpfSl9fSl9LHByZVJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKTtzd2l0Y2godGhpcy5zdGF0ZS5nZXQoInBhZ2VUeXBlIikpe2Nhc2Ugbi5IQVNfUkVRVUlSRURfTk9ORV9FTlJPTExFRDpjYXNlIG4uSEFTX1JFUVVJUkVEX1NPTUVfUkVRVUlSRURfRU5ST0xMRUQ6dGhpcy5hZGQobmV3IHMoe21pbmltaXplOiEwLGNvbGxlY3Rpb246bmV3IHQuQ29sbGVjdGlvbihlLndoZXJlKHtyZXF1aXJlZDohMH0pKSxhcHBTdGF0ZTp0aGlzLm9wdGlvbnMuYXBwU3RhdGV9KSk7YnJlYWs7Y2FzZSBuLkhBU19SRVFVSVJFRF9BTExfUkVRVUlSRURfRU5ST0xMRUQ6Y2FzZSBuLkFMTF9PUFRJT05BTF9TT01FX0VOUk9MTEVEOmNhc2Ugbi5BTExfT1BUSU9OQUxfTk9ORV9FTlJPTExFRDp2YXIgaSxyPWUud2hlcmUoe2Vucm9sbGVkOiEwfSksYT1lLndoZXJlKHtlbnJvbGxlZDohMX0pO3IubGVuZ3RoPjAmJihpPXQubG9jKCJlbnJvbGwuY2hvaWNlcy5saXN0Lm9wdGlvbmFsIiwibG9naW4iKSx0aGlzLmFkZChuZXcgbyh7bGlzdFRpdGxlOnQubG9jKCJlbnJvbGwuY2hvaWNlcy5saXN0LmVucm9sbGVkIiwibG9naW4iKSxtaW5pbWl6ZTohMCxjb2xsZWN0aW9uOm5ldyB0LkNvbGxlY3Rpb24ociksYXBwU3RhdGU6dGhpcy5vcHRpb25zLmFwcFN0YXRlfSkpKSx0aGlzLmFkZChuZXcgbyh7bGlzdFRpdGxlOmksY29sbGVjdGlvbjpuZXcgdC5Db2xsZWN0aW9uKGEpLGFwcFN0YXRlOnRoaXMub3B0aW9ucy5hcHBTdGF0ZX0pKX19fSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3ZhciBlLGkscj0wLG89MCxzPTAsYT0wO3QuYXBwU3RhdGUuZ2V0KCJmYWN0b3JzIikuZWFjaChmdW5jdGlvbih0KXt2YXIgZT10LmdldCgicmVxdWlyZWQiKSxuPXQuZ2V0KCJlbnJvbGxlZCIpO2UmJm4/cisrOmUmJiFuP28rKzohZSYmbj9zKys6ZXx8bnx8YSsrfSksZT1yPjB8fG8+MCxlJiYwPT09cj9pPW4uSEFTX1JFUVVJUkVEX05PTkVfRU5ST0xMRUQ6ZSYmbz4wP2k9bi5IQVNfUkVRVUlSRURfU09NRV9SRVFVSVJFRF9FTlJPTExFRDplJiZhPjA/aT1uLkhBU19SRVFVSVJFRF9BTExfUkVRVUlSRURfRU5ST0xMRUQ6MD09PXMmJmE+MD9pPW4uQUxMX09QVElPTkFMX05PTkVfRU5ST0xMRUQ6YT4wP2k9bi5BTExfT1BUSU9OQUxfU09NRV9FTlJPTExFRDp0aGlzLm1vZGVsLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQuc2tpcCgpfSksdGhpcy5zdGF0ZS5zZXQoInBhZ2VUeXBlIixpKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjYpXSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5fLGk9dC5WaWV3LmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwtZmFjdG9yLXJvdyBjbGVhcmZpeCIsdGVtcGxhdGU6J1x0ICAgICAgPGRpdiBjbGFzcz0iZW5yb2xsLWZhY3Rvci1pY29uLWNvbnRhaW5lciI+XHQgICAgICAgIDxkaXYgY2xhc3M9ImZhY3Rvci1pY29uIGVucm9sbC1mYWN0b3ItaWNvbiB7e2ljb25DbGFzc05hbWV9fSI+XHQgICAgICAgIDwvZGl2Plx0ICAgICAgPC9kaXY+XHQgICAgICA8ZGl2IGNsYXNzPSJlbnJvbGwtZmFjdG9yLWRlc2NyaXB0aW9uIj5cdCAgICAgICAgPGgzIGNsYXNzPSJlbnJvbGwtZmFjdG9yLWxhYmVsIj57e2ZhY3RvckxhYmVsfX08L2gzPlx0ICAgICAgICB7eyNpZiBmYWN0b3JEZXNjcmlwdGlvbn19XHQgICAgICAgICAgPHA+e3tmYWN0b3JEZXNjcmlwdGlvbn19PC9wPlx0ICAgICAgICB7ey9pZn19XHQgICAgICAgIDxkaXYgY2xhc3M9ImVucm9sbC1mYWN0b3ItYnV0dG9uIj48L2Rpdj5cdCAgICAgIDwvZGl2Plx0ICAgICcsYXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybnsiZGF0YS1zZSI6dGhpcy5tb2RlbC5nZXQoImZhY3Rvck5hbWUiKX19LGNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJlbnJvbGxlZCIpP1tbJzxzcGFuIGNsYXNzPSJpY29uIHN1Y2Nlc3MtMTYtZ3JlZW4iPjwvc3Bhbj4nLCIuZW5yb2xsLWZhY3Rvci1sYWJlbCJdXToiUkVRVUlSRUQiPT09dGhpcy5tb2RlbC5nZXQoImVucm9sbG1lbnQiKT9bWyc8c3BhbiBjbGFzcz0iaWNvbiBzdWNjZXNzLTE2LWdyYXkiPjwvc3Bhbj4nLCIuZW5yb2xsLWZhY3Rvci1sYWJlbCJdXTpbW3QuY3JlYXRlQnV0dG9uKHtjbGFzc05hbWU6ImJ1dHRvbiIsdGl0bGU6dC5sb2MoImVucm9sbC5jaG9pY2VzLnNldHVwIiwibG9naW4iKSxjbGljazpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsZS5jcmVhdGVFbnJvbGxGYWN0b3JVcmwodGhpcy5tb2RlbC5nZXQoInByb3ZpZGVyIiksdGhpcy5tb2RlbC5nZXQoImZhY3RvclR5cGUiKSkpfX0pLCIuZW5yb2xsLWZhY3Rvci1idXR0b24iXV19LG1pbmltaXplOmZ1bmN0aW9uKCl7dGhpcy4kZWwuYWRkQ2xhc3MoImVucm9sbC1mYWN0b3Itcm93LW1pbiIpfSxtYXhpbWl6ZTpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZUNsYXNzKCJlbnJvbGwtZmFjdG9yLXJvdy1taW4iKX19KTtyZXR1cm4gdC5MaXN0Vmlldy5leHRlbmQoe2NsYXNzTmFtZToiZW5yb2xsLWZhY3Rvci1saXN0IixpdGVtOmksaXRlbVNlbGVjdG9yOiIubGlzdC1jb250ZW50Iix0ZW1wbGF0ZTonXHQgICAgICB7eyNpZiBsaXN0U3VidGl0bGV9fVx0ICAgICAgICA8ZGl2IGNsYXNzPSJsaXN0LXN1YnRpdGxlIj57e2xpc3RTdWJ0aXRsZX19PC9kaXY+XHQgICAgICB7ey9pZn19XHQgICAgICB7eyNpZiBsaXN0VGl0bGV9fVx0ICAgICAgICA8ZGl2IGNsYXNzPSJsaXN0LXRpdGxlIj57e2xpc3RUaXRsZX19PC9kaXY+XHQgICAgICB7ey9pZn19XHQgICAgICA8ZGl2IGNsYXNzPSJsaXN0LWNvbnRlbnQiPjwvZGl2Plx0ICAgICcsZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIGU9dC5MaXN0Vmlldy5wcm90b3R5cGUuZ2V0VGVtcGxhdGVEYXRhLmNhbGwodGhpcyk7cmV0dXJuIG4uZXh0ZW5kKGUsdGhpcyksZX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5taW5pbWl6ZSYmdGhpcy5pbnZva2UoIm1pbmltaXplIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjY1KV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuXztyZXR1cm4gZS5leHRlbmQoe2xpc3RUaXRsZTpuLnBhcnRpYWwodC5sb2MsImVucm9sbC5jaG9pY2VzLmxpc3Quc2V0dXAiLCJsb2dpbiIpLGNsYXNzTmFtZTpmdW5jdGlvbigpe3JldHVybiBlLnByb3RvdHlwZS5jbGFzc05hbWUrIiBlbnJvbGwtcmVxdWlyZWQtZmFjdG9yLWxpc3QifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb2xsZWN0aW9uLmxlbmd0aCxuPXRoaXMuY29sbGVjdGlvbi53aGVyZSh7ZW5yb2xsZWQ6ITB9KS5sZW5ndGgsaT1uKzE7dGhpcy5saXN0U3VidGl0bGU9dC5sb2MoImVucm9sbC5jaG9pY2VzLnN0ZXAiLCJsb2dpbiIsW2ksZV0pfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQsbjtlLnByb3RvdHlwZS5wb3N0UmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKS5nZXRGaXJzdFVuZW5yb2xsZWRSZXF1aXJlZEZhY3RvcigpLG49dGhpcy5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1vZGVsPT09dH0pLG4ubWF4aW1pemUoKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2NDMpLG4oMzQ2KSxuKDYyMiksbig2NjgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89dC4kLHM9dC5fO3JldHVybiBpLmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwtZHVvIGR1by1mb3JtIixNb2RlbDp7cHJvcHM6e2hvc3Q6InN0cmluZyIsc2lnbmF0dXJlOiJzdHJpbmciLHBvc3RBY3Rpb246InN0cmluZyIsZmFjdG9ySWQ6InN0cmluZyIsc3RhdGVUb2tlbjoic3RyaW5nIn0sZ2V0SW5pdE9wdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3ZhciBlPXMuZmluZFdoZXJlKHQuZmFjdG9ycyx7ZmFjdG9yVHlwZToid2ViIixwcm92aWRlcjoiRFVPIn0pO3JldHVybiBlLmVucm9sbCgpfSl9LGFjdGl2YXRlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0KCJwb3N0QWN0aW9uIiksaT10aGlzLmdldCgiZmFjdG9ySWQiKSxyPXRoaXMscz17aWQ6aSxzdGF0ZVRva2VuOnRoaXMuZ2V0KCJzdGF0ZVRva2VuIiksc2lnX3Jlc3BvbnNlOnR9O3JldHVybiBuKG8ucG9zdChlLHMpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5wb2xsKCl9KX0pLmZhaWwoZnVuY3Rpb24odCl7ci50cmlnZ2VyKCJlcnJvciIscix0Lnhocil9KX19LEZvcm06e2F1dG9TYXZlOiEwLG5vQnV0dG9uQmFyOiEwLHRpdGxlOnMucGFydGlhbCh0LmxvYywiZW5yb2xsLmR1by50aXRsZSIsImxvZ2luIikscG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuYWRkKCc8aWZyYW1lIGZyYW1lYm9yZGVyPSIwIiB0aXRsZT0iJyt0aGlzLnRpdGxlKCkrJyI+PC9pZnJhbWU+JyksZS5pbml0KHtob3N0OnRoaXMubW9kZWwuZ2V0KCJob3N0Iiksc2lnX3JlcXVlc3Q6dGhpcy5tb2RlbC5nZXQoInNpZ25hdHVyZSIpLGlmcmFtZTp0aGlzLiQoImlmcmFtZSIpLmdldCgwKSxwb3N0X2FjdGlvbjpzLmJpbmQodGhpcy5tb2RlbC5hY3RpdmF0ZSx0aGlzLm1vZGVsKX0pfX0sRm9vdGVyOnIsZmV0Y2hJbml0aWFsRGF0YTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMubW9kZWwuZ2V0SW5pdE9wdGlvbnModGhpcy5vcHRpb25zLmFwcFN0YXRlKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YTtpZighKG4mJm4uX2VtYmVkZGVkJiZuLl9lbWJlZGRlZC5mYWN0b3ImJm4uX2VtYmVkZGVkLmZhY3Rvci5fZW1iZWRkZWQmJm4uX2VtYmVkZGVkLmZhY3Rvci5fZW1iZWRkZWQuYWN0aXZhdGlvbikpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBkb2VzIG5vdCBoYXZlIGR1byBhY3RpdmF0aW9uIG9wdGlvbnMiKTt2YXIgaT1uLl9lbWJlZGRlZC5mYWN0b3Iscj1pLl9lbWJlZGRlZC5hY3RpdmF0aW9uO3QubW9kZWwuc2V0KHtob3N0OnIuaG9zdCxzaWduYXR1cmU6ci5zaWduYXR1cmUscG9zdEFjdGlvbjpyLl9saW5rcy5jb21wbGV0ZS5ocmVmLGZhY3RvcklkOmkuaWQsc3RhdGVUb2tlbjpuLnN0YXRlVG9rZW59KX0pfSx0cmFwQXV0aFJlc3BvbnNlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpKXJldHVybiEwfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyOCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmsgaGVscCBqcy1iYWNrIiBkYXRhLXNlPSJiYWNrLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0ibWZhLmJhY2tUb0ZhY3RvcnMiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAnLGNsYXNzTmFtZToiYXV0aC1mb290ZXIiLGV2ZW50czp7ImNsaWNrIC5qcy1iYWNrIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5iYWNrKCl9fSxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZS5zZXQoIm5hdmlnYXRlRGlyIixlLkRJUkVDVElPTl9CQUNLKSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJwcmV2TGluayIpP3RoaXMubW9kZWwuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5wcmV2KCl9KTp0aGlzLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCJzaWduaW4vZW5yb2xsIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDY0MSksbig2NjgpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXQuXztyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiZW5yb2xsLXF1ZXN0aW9uIixNb2RlbDp7cHJvcHM6e3F1ZXN0aW9uOiJzdHJpbmciLGFuc3dlcjpbInN0cmluZyIsITBdfSxsb2NhbDp7c2VjdXJpdHlRdWVzdGlvbnM6Im9iamVjdCJ9LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3ZhciBlPW8uZmluZFdoZXJlKHQuZmFjdG9ycyx7ZmFjdG9yVHlwZToicXVlc3Rpb24iLHByb3ZpZGVyOiJPS1RBIn0pO3JldHVybiBlLmVucm9sbCh7cHJvZmlsZTp7cXVlc3Rpb246dGhpcy5nZXQoInF1ZXN0aW9uIiksYW5zd2VyOnRoaXMuZ2V0KCJhbnN3ZXIiKX19KX0pfX0sRm9ybTp7YXV0b1NhdmU6ITAsdGl0bGU6by5wYXJ0aWFsKHQubG9jLCJlbnJvbGwuc2VjdXJpdHlRdWVzdGlvbi5zZXR1cCIsImxvZ2luIiksaW5wdXRzOmZ1bmN0aW9uKCl7cmV0dXJuW3tsYWJlbDohMSwibGFiZWwtdG9wIjohMCxuYW1lOiJxdWVzdGlvbiIsdHlwZToic2VsZWN0Iix3aWRlOiEwLG9wdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXQoInNlY3VyaXR5UXVlc3Rpb25zIil9LHBhcmFtczp7c2VhcmNoVGhyZXNob2xkOjI1fX0se2xhYmVsOiExLCJsYWJlbC10b3AiOiEwLHBsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmFuc3dlci5wbGFjZWhvbGRlciIsImxvZ2luIiksY2xhc3NOYW1lOiJvLWZvcm0tZmllbGRzZXQgby1mb3JtLWxhYmVsLXRvcCBhdXRoLXBhc3Njb2RlIixuYW1lOiJhbnN3ZXIiLGlucHV0OnIsdHlwZToidGV4dCIscGFyYW1zOntpbm5lclRvb2x0aXA6dC5sb2MoIm1mYS5jaGFsbGVuZ2UuYW5zd2VyLnRvb2x0aXAiLCJsb2dpbiIpfX1dfX0sRm9vdGVyOmksZmV0Y2hJbml0aWFsRGF0YTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMubW9kZWwubWFuYWdlVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7dmFyIGU9by5maW5kV2hlcmUodC5mYWN0b3JzLHtmYWN0b3JUeXBlOiJxdWVzdGlvbiIscHJvdmlkZXI6Ik9LVEEifSk7cmV0dXJuIGUucXVlc3Rpb25zKCl9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBpPXt9O28uZWFjaChlLGZ1bmN0aW9uKHQpe2lbdC5xdWVzdGlvbl09bi5nZXRTZWN1cml0eVF1ZXN0aW9uTGFiZWwodCl9KSx0Lm1vZGVsLnNldCgic2VjdXJpdHlRdWVzdGlvbnMiLGkpfSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDYyMyksbig2NTkpLG4oNjYwKSxuKDY2OCksbig2NjEpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMpe3ZhciBhPXQuXztyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiZW5yb2xsLXdpbmRvd3MtaGVsbG8iLE1vZGVsOntsb2NhbDp7X19pc0Vucm9sbGVkX186ImJvb2xlYW4ifSxzYXZlOmZ1bmN0aW9uKCl7aWYoaS5pc0F2YWlsYWJsZSgpKXJldHVybiB0aGlzLnRyaWdnZXIoInJlcXVlc3QiKSx0aGlzLmdldCgiX19pc0Vucm9sbGVkX18iKT90aGlzLmFjdGl2YXRlKCk6dGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9lbnJvbGwodCl9KX0sX2Vucm9sbDpmdW5jdGlvbih0KXt2YXIgZT1hLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6IndlYmF1dGhuIixwcm92aWRlcjoiRklETyJ9KTtyZXR1cm4gZS5lbnJvbGwoKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXQoIl9faXNFbnJvbGxlZF9fIiwhMCksdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFjdG9yLmFjdGl2YXRpb24sbj10LnVzZXIscj10aGlzLG89e3JwRGlzcGxheU5hbWU6ZS5ycERpc3BsYXlOYW1lLHVzZXJEaXNwbGF5TmFtZTpuLnByb2ZpbGUuZGlzcGxheU5hbWUsYWNjb3VudE5hbWU6bi5wcm9maWxlLmxvZ2luLHVzZXJJZDpuLmlkfSxzPVt7YWxnb3JpdGhtOmUuYWxnb3JpdGhtfV0sYT1lLm5vbmNlO3JldHVybiBpLm1ha2VDcmVkZW50aWFsKG8scyxhKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFjdGl2YXRlKHtjcmVkZW50aWFsSWQ6ZS5jcmVkZW50aWFsLmlkLHB1YmxpY0tleTplLnB1YmxpY0tleSxhdHRlc3RhdGlvbjpudWxsfSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLm1lc3NhZ2Upe2Nhc2UiQWJvcnRFcnJvciI6Y2FzZSJOb3RGb3VuZEVycm9yIjpjYXNlIk5vdFN1cHBvcnRlZEVycm9yIjpyZXR1cm4gci50cmlnZ2VyKCJhYm9ydCIsZS5tZXNzYWdlKSx0fXRocm93IGV9KX0pfX0sRm9ybTp7YXV0b1NhdmU6ITAsaGFzU2F2aW5nU3RhdGU6ITEsdGl0bGU6YS5wYXJ0aWFsKHQubG9jLCJlbnJvbGwud2luZG93c0hlbGxvLnRpdGxlIiwibG9naW4iKSxzdWJ0aXRsZTpmdW5jdGlvbigpe3JldHVybiBpLmlzQXZhaWxhYmxlKCk/dC5sb2MoImVucm9sbC53aW5kb3dzSGVsbG8uc3VidGl0bGUiLCJsb2dpbiIpOiIifSxzYXZlOmEucGFydGlhbCh0LmxvYywiZW5yb2xsLndpbmRvd3NIZWxsby5zYXZlIiwibG9naW4iKSxjdXN0b21TYXZpbmdTdGF0ZTp7c3RvcDoiYWJvcnQifSxtb2RlbEV2ZW50czpmdW5jdGlvbigpe3JldHVybiBpLmlzQXZhaWxhYmxlKCk/e3JlcXVlc3Q6Il9zdGFydEVucm9sbG1lbnQiLGVycm9yOiJfc3RvcEVucm9sbG1lbnQiLGFib3J0OiJfc3RvcEVucm9sbG1lbnQifTp7fX0sbm9CdXR0b25CYXI6ZnVuY3Rpb24oKXtyZXR1cm4haS5pc0F2YWlsYWJsZSgpfSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gaS5pc0F2YWlsYWJsZSgpfHxlLnB1c2gobi5WaWV3KHtWaWV3Om5ldyBzKHttZXNzYWdlOnQubG9jKCJlbnJvbGwud2luZG93c0hlbGxvLmVycm9yLm5vdFdpbmRvd3MiLCJsb2dpbiIpfSl9LHtzZWxlY3RvcjoiLm8tZm9ybS1lcnJvci1jb250YWluZXIifSkpLGUucHVzaChuLlZpZXcoe1ZpZXc6bmV3IHIoe21vZGVsOnRoaXMubW9kZWwsdmlzaWJsZTohMX0pfSkpLGV9LF9zdGFydEVucm9sbG1lbnQ6ZnVuY3Rpb24oKXt0aGlzLnN1YnRpdGxlPXQubG9jKCJlbnJvbGwud2luZG93c0hlbGxvLnN1YnRpdGxlLmxvYWRpbmciLCJsb2dpbiIpLHRoaXMubW9kZWwudHJpZ2dlcigic3Bpbm5lcjpzaG93IiksdGhpcy5fcmVzZXRFcnJvck1lc3NhZ2UoKSx0aGlzLnJlbmRlcigpLHRoaXMuJCgiLm8tZm9ybS1idXR0b24tYmFyIikuYWRkQ2xhc3MoImhpZGUiKX0sX3N0b3BFbnJvbGxtZW50OmZ1bmN0aW9uKGUpe3RoaXMuc3VidGl0bGU9dC5sb2MoImVucm9sbC53aW5kb3dzSGVsbG8uc3VidGl0bGUiLCJsb2dpbiIpLHRoaXMubW9kZWwudHJpZ2dlcigic3Bpbm5lcjpoaWRlIiksdGhpcy4kKCIuby1mb3JtLWJ1dHRvbi1iYXIiKS5yZW1vdmVDbGFzcygiaGlkZSIpO3ZhciBuO3N3aXRjaChlKXtjYXNlIk5vdFN1cHBvcnRlZEVycm9yIjpuPXQubG9jKCJlbnJvbGwud2luZG93c0hlbGxvLmVycm9yLm5vdENvbmZpZ3VyZWRIdG1sIiwibG9naW4iKX1pZih0aGlzLl9yZXNldEVycm9yTWVzc2FnZSgpLG4pe3ZhciBpPW5ldyBzKHttZXNzYWdlOm59KTt0aGlzLiQoIi5vLWZvcm0tZXJyb3ItY29udGFpbmVyIikuYWRkQ2xhc3MoIm8tZm9ybS1oYXMtZXJyb3JzIiksdGhpcy5hZGQoaSx7c2VsZWN0b3I6Ii5vLWZvcm0tZXJyb3ItY29udGFpbmVyIn0pLHRoaXMuX2Vycm9yTWVzc2FnZVZpZXc9dGhpcy5sYXN0KCl9dGhpcy5yZW5kZXIoKX0sX3Jlc2V0RXJyb3JNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5fZXJyb3JNZXNzYWdlVmlldyYmdGhpcy5fZXJyb3JNZXNzYWdlVmlldy5yZW1vdmUoKSx0aGlzLl9lcnJvck1lc3NhZ2VWaWV3PXZvaWQgMCx0aGlzLmNsZWFyRXJyb3JzKCl9fSxGb290ZXI6byx0cmFwQXV0aFJlc3BvbnNlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpKXJldHVybiB0aGlzLm1vZGVsLmFjdGl2YXRlKCksITB9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDY2OCksbig2NzIpLG4oNjQ4KSxuKDYyMCksbig2MjMpLG4oNDk3KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEpe2Z1bmN0aW9uIGwodCl7cmV0dXJuImNhbGwiPT09dH1mdW5jdGlvbiBjKHQpe3JldHVybiBsKHQpPyJlbnJvbGwtY2FsbCI6ImVucm9sbC1zbXMifWZ1bmN0aW9uIHUodCl7YS5pc0VudGVyKHQpJiYodC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksImtleXVwIj09PXQudHlwZSYmdC5kYXRhJiZ0LmRhdGEubW9kZWwmJnQuZGF0YS5tb2RlbC5zZW5kQ29kZSgpKX12YXIgZD10Ll8saD0zZTQscD17ZmFjdG9ySWQ6ZnVuY3Rpb24odCl7cmV0dXJuIWQuaXNVbmRlZmluZWQodCl9fTtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZTpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlKX0sTW9kZWw6e3Byb3BzOntjb3VudHJ5Q29kZTpbInN0cmluZyIsITAsIlVTIl0scGhvbmVOdW1iZXI6WyJzdHJpbmciLCEwXSxwaG9uZUV4dGVuc2lvbjpbInN0cmluZyIsITFdLGxhc3RFbnJvbGxlZFBob25lTnVtYmVyOiJzdHJpbmciLHBhc3NDb2RlOlsic3RyaW5nIiwhMF0sZmFjdG9ySWQ6InN0cmluZyJ9LGxvY2FsOntoYXNFeGlzdGluZ1Bob25lczoiYm9vbGVhbiIsdHJhcEVucm9sbG1lbnQ6ImJvb2xlYW4iLGFibGVUb1Jlc2VuZDoiYm9vbGVhbiIsZmFjdG9yVHlwZToic3RyaW5nIixza2lwUGhvbmVWYWxpZGF0aW9uOiJib29sZWFuIn0sZGVyaXZlZDp7Y291bnRyeUNhbGxpbmdDb2RlOntkZXBzOlsiY291bnRyeUNvZGUiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iKyIrby5nZXRDYWxsaW5nQ29kZUZvckNvdW50cnkodCl9fSxmdWxsUGhvbmVOdW1iZXI6e2RlcHM6WyJjb3VudHJ5Q2FsbGluZ0NvZGUiLCJwaG9uZU51bWJlciJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/dCtlOiIifX0sZW5yb2xsZWQ6e2RlcHM6WyJsYXN0RW5yb2xsZWRQaG9uZU51bWJlciIsImZ1bGxQaG9uZU51bWJlciJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1lfX19LGxpbWl0UmVzZW5kaW5nOmZ1bmN0aW9uKCl7dGhpcy5zZXQoe2FibGVUb1Jlc2VuZDohMX0pLGQuZGVsYXkoZC5iaW5kKHRoaXMuc2V0LHRoaXMpLGgse2FibGVUb1Jlc2VuZDohMH0pfSxzZW5kQ29kZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10aGlzLmdldCgiZnVsbFBob25lTnVtYmVyIiksaT10aGlzLmdldCgicGhvbmVFeHRlbnNpb24iKTtyZXR1cm4gZS50cmlnZ2VyKCJlcnJvcnM6Y2xlYXIiKSxuLmxlbmd0aD90aGlzLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24ocil7dmFyIG89Ik1GQV9FTlJPTEwiPT09ci5zdGF0dXMscz17cGhvbmVOdW1iZXI6bix1cGRhdGVQaG9uZTohb3x8ZS5nZXQoImhhc0V4aXN0aW5nUGhvbmVzIil9O2woZS5nZXQoImZhY3RvclR5cGUiKSkmJihzLnBob25lRXh0ZW5zaW9uPWkpLGUuZ2V0KCJza2lwUGhvbmVWYWxpZGF0aW9uIikmJihzLnZhbGlkYXRlUGhvbmU9ITEpO3ZhciBhPWZ1bmN0aW9uKG4pe3ZhciBpPWQuZmluZFdoZXJlKG4uZmFjdG9ycyx7ZmFjdG9yVHlwZTplLmdldCgiZmFjdG9yVHlwZSIpLHByb3ZpZGVyOiJPS1RBIn0pO3JldHVybiBpLmVucm9sbCh7cHJvZmlsZTpzfSkuZmFpbChmdW5jdGlvbihuKXt0aHJvdyJFMDAwMDA5OCI9PT1uLmVycm9yQ29kZSYmKGUuc2V0KCJza2lwUGhvbmVWYWxpZGF0aW9uIiwhMCksbi54aHIucmVzcG9uc2VKU09OLmVycm9yU3VtbWFyeT10LmxvYygiZW5yb2xsLnNtcy50cnlfYWdhaW4iLCJsb2dpbiIpKSxufSl9O3JldHVybiBvP2Eocik6KGUuc2V0KCJ0cmFwRW5yb2xsbWVudCIsITApLHIucHJldigpLnRoZW4oYSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5zZXQoInRyYXBFbnJvbGxtZW50IiwhMSksdH0pKX0sITApLnRoZW4oZnVuY3Rpb24oKXtlLnNldCgibGFzdEVucm9sbGVkUGhvbmVOdW1iZXIiLG4pLGUubGltaXRSZXNlbmRpbmcoKX0pLmZhaWwoZnVuY3Rpb24oKXtlLnNldCgiYWJsZVRvUmVzZW5kIiwhMCksZS5zZXQoInRyYXBFbnJvbGxtZW50IiwhMSl9KTp2b2lkIGUudHJpZ2dlcigiaW52YWxpZCIsZSx7cGhvbmVOdW1iZXI6Im1vZGVsLnZhbGlkYXRpb24uZmllbGQuYmxhbmsifSl9LHJlc2VuZENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlnZ2VyKCJlcnJvcnM6Y2xlYXIiKSx0aGlzLmxpbWl0UmVzZW5kaW5nKCksdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlc2VuZCh0aGlzLmdldCgiZmFjdG9yVHlwZSIpKX0pfSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5hY3RpdmF0ZSh7cGFzc0NvZGU6dGhpcy5nZXQoInBhc3NDb2RlIil9KX0pfX0sRm9ybTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5mYWN0b3JUeXBlLG49bChlKSxhPXQubG9jKG4/ImVucm9sbC5jYWxsLnNldHVwIjoiZW5yb2xsLnNtcy5zZXR1cCIsImxvZ2luIiksZD10LmxvYyhuPyJtZmEuY2FsbCI6Im1mYS5zZW5kQ29kZSIsImxvZ2luIiksaD10LmxvYyhuPyJtZmEucmVkaWFsIjoibWZhLnJlc2VuZENvZGUiLCJsb2dpbiIpLGY9dC5sb2Mobj8ibWZhLmNhbGxpbmciOiJtZmEuc2VudCIsImxvZ2luIiksbT1uPyJlbnJvbGwtY2FsbC1waG9uZSI6ImVucm9sbC1zbXMtcGhvbmUiLF89bj8iY2FsbC1yZXF1ZXN0LWJ1dHRvbiI6InNtcy1yZXF1ZXN0LWJ1dHRvbiIsZz1bcy5JbnB1dCh7bmFtZToiY291bnRyeUNvZGUiLHR5cGU6InNlbGVjdCIsd2lkZTohMCxvcHRpb25zOm8uZ2V0Q291bnRyaWVzKCl9KSxzLklucHV0KHtwbGFjZWhvbGRlcjp0LmxvYygibWZhLnBob25lTnVtYmVyLnBsYWNlaG9sZGVyIiwibG9naW4iKSxjbGFzc05hbWU6bSxuYW1lOiJwaG9uZU51bWJlciIsaW5wdXQ6aSx0eXBlOiJ0ZXh0IixyZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLiQoJ2lucHV0W25hbWU9InBob25lTnVtYmVyIl0nKS5vZmYoImtleWRvd24ga2V5dXAiLHUpLmtleWRvd24odSkua2V5dXAoe21vZGVsOnRoaXMubW9kZWx9LHUpfX0pXTtyZXR1cm4gbiYmZy5wdXNoKHMuSW5wdXQoe3BsYWNlaG9sZGVyOnQubG9jKCJtZmEucGhvbmVOdW1iZXIuZXh0LnBsYWNlaG9sZGVyIiwibG9naW4iKSxjbGFzc05hbWU6ImVucm9sbC1jYWxsLWV4dGVuc2lvbiIsbmFtZToicGhvbmVFeHRlbnNpb24iLGlucHV0OnIsdHlwZToidGV4dCJ9KSksZy5wdXNoKHMuQnV0dG9uKHt0aXRsZTpkLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjpffSxjbGFzc05hbWU6ImJ1dHRvbiBidXR0b24tcHJpbWFyeSBqcy1lbnJvbGwtcGhvbmUgIitfLGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC5zZW5kQ29kZSgpfX0pLHMuQnV0dG9uKHt0aXRsZTpoLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjpffSxjbGFzc05hbWU6ImJ1dHRvbiBqcy1lbnJvbGwtcGhvbmUgIitfLGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC5yZXNlbmRDb2RlKCl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLiRlbC5jc3Moe2Rpc3BsYXk6Im5vbmUifSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6YWJsZVRvUmVzZW5kIixmdW5jdGlvbih0LGUpe2U/KHRoaXMub3B0aW9ucy50aXRsZT1oLHRoaXMuZW5hYmxlKCkpOih0aGlzLm9wdGlvbnMudGl0bGU9Zix0aGlzLmRpc2FibGUoKSksdGhpcy5yZW5kZXIoKX0pfX0pLHMuRGl2aWRlcih7c2hvd1doZW46cH0pLHMuSW5wdXQoe3BsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS5wbGFjZWhvbGRlciIsImxvZ2luIiksbmFtZToicGFzc0NvZGUiLGlucHV0OnIsdHlwZToibnVtYmVyIixwYXJhbXM6e2lubmVyVG9vbHRpcDp0LmxvYygibWZhLmNoYWxsZW5nZS5lbnRlckNvZGUudG9vbHRpcCIsImxvZ2luIil9LHNob3dXaGVuOnB9KSxzLlRvb2xiYXIoe25vQ2FuY2VsQnV0dG9uOiEwLHNhdmU6dC5sb2MoIm1mYS5jaGFsbGVuZ2UudmVyaWZ5IiwibG9naW4iKSxzaG93V2hlbjpwfSkpLHt0aXRsZTphLG5vQnV0dG9uQmFyOiEwLGF1dG9TYXZlOiEwLGNsYXNzTmFtZTpjKGUpLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImVycm9yIGVycm9yczpjbGVhciIsZnVuY3Rpb24oKXt0aGlzLmNsZWFyRXJyb3JzKCl9KSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZTplbnJvbGxlZCIsZnVuY3Rpb24oKXt0aGlzLiQoIi5qcy1lbnJvbGwtcGhvbmUiKS50b2dnbGUoKX0pfSxmb3JtQ2hpbGRyZW46Z319LEZvb3RlcjpuLHRyYXBBdXRoUmVzcG9uc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpPyh0aGlzLm1vZGVsLnNldCgiZmFjdG9ySWQiLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImFjdGl2YXRlZEZhY3RvcklkIikpLCEwKTohKCF0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc01mYUVucm9sbCIpfHwhdGhpcy5tb2RlbC5nZXQoInRyYXBFbnJvbGxtZW50IikpfHx2b2lkIDB9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtsKHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlKT90aGlzLm1vZGVsLnNldCgiaGFzRXhpc3RpbmdQaG9uZXMiLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImhhc0V4aXN0aW5nUGhvbmVzRm9yQ2FsbCIpKTp0aGlzLm1vZGVsLnNldCgiaGFzRXhpc3RpbmdQaG9uZXMiLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImhhc0V4aXN0aW5nUGhvbmVzIikpLHRoaXMubW9kZWwuc2V0KCJmYWN0b3JUeXBlIix0aGlzLm9wdGlvbnMuZmFjdG9yVHlwZSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNTI2KV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuXztyZXR1cm4gZS5leHRlbmQoe3RlbXBsYXRlOnQuSGFuZGxlYmFycy5jb21waWxlKCdcdCAgICAgIDxzcGFuIGNsYXNzPSJva3RhLWZvcm0tbGFiZWwtaW5saW5lIG8tZm9ybS1sYWJlbC1pbmxpbmUiPnt7Y291bnRyeUNhbGxpbmdDb2RlfX08L3NwYW4+XHQgICAgICA8c3BhbiBjbGFzcz0ib2t0YS1mb3JtLWlucHV0LWZpZWxkIGlucHV0LWZpeCBvLWZvcm0tY29udHJvbCI+XHQgICAgICAgIDxpbnB1dCB0eXBlPSJ7e3R5cGV9fSIgcGxhY2Vob2xkZXI9Int7cGxhY2Vob2xkZXJ9fSIgbmFtZT0ie3tuYW1lfX0iIFx0ICAgICAgICAgIGlkPSJ7e2lucHV0SWR9fSIgdmFsdWU9Int7dmFsdWV9fSIgYXV0b2NvbXBsZXRlPSJvZmYiLz5cdCAgICAgIDwvc3Bhbj5cdCAgICAnKSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6Y291bnRyeUNhbGxpbmdDb2RlIixmdW5jdGlvbigpe3RoaXMuJCgiLm8tZm9ybS1sYWJlbC1pbmxpbmUiKS50ZXh0KHRoaXMubW9kZWwuZ2V0KCJjb3VudHJ5Q2FsbGluZ0NvZGUiKSl9KX0scHJlUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmNvdW50cnlDYWxsaW5nQ29kZT10aGlzLm1vZGVsLmdldCgiY291bnRyeUNhbGxpbmdDb2RlIil9LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLiRlbC5yZW1vdmVDbGFzcygiaW5wdXQtZml4IG8tZm9ybS1jb250cm9sIiksbi5kZWZlcihuLmJpbmQoZnVuY3Rpb24oKXt0aGlzLiRlbC5wYXJlbnQoKS5hZGRDbGFzcygiby1mb3JtLWlucHV0LWdyb3VwIil9LHRoaXMpKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjMpLG4oNjIyKSxuKDY2OCksbig2NDgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7ZnVuY3Rpb24gbyh0KXtyZXR1cm4iUlNBIj09PXR9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gbyh0KT8iZW5yb2xsLXJzYSI6ImVucm9sbC1vbnByZW0ifXZhciBhPXQuXztyZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZTpmdW5jdGlvbigpe3JldHVybiBzKHRoaXMub3B0aW9ucy5wcm92aWRlcil9LE1vZGVsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnByb3ZpZGVyLGU9dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZmFjdG9ycyIpLG49ZS5maW5kV2hlcmUoYS5waWNrKHRoaXMub3B0aW9ucywicHJvdmlkZXIiLCJmYWN0b3JUeXBlIikpLGk9bi5nZXQoInByb2ZpbGUiKSxyPWkmJmkuY3JlZGVudGlhbElkP2kuY3JlZGVudGlhbElkOiIiO3JldHVybntwcm9wczp7Y3JlZGVudGlhbElkOlsic3RyaW5nIiwhMCxyXSxwYXNzQ29kZTpbInN0cmluZyIsITBdLGZhY3RvcklkOiJzdHJpbmcifSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbihlKXt2YXIgbj1hLmZpbmRXaGVyZShlLmZhY3RvcnMse2ZhY3RvclR5cGU6InRva2VuIixwcm92aWRlcjp0fSk7cmV0dXJuIG4uZW5yb2xsKHtwYXNzQ29kZTp0aGlzLmdldCgicGFzc0NvZGUiKSxwcm9maWxlOntjcmVkZW50aWFsSWQ6dGhpcy5nZXQoImNyZWRlbnRpYWxJZCIpfX0pfSl9fX0sRm9ybTpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5wcm92aWRlcixpPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKSxsPWkuZmluZFdoZXJlKGEucGljayh0aGlzLm9wdGlvbnMsInByb3ZpZGVyIiwiZmFjdG9yVHlwZSIpKSxjPWwuZ2V0KCJ2ZW5kb3JOYW1lIiksdT1vKG4pP3QubG9jKCJmYWN0b3IudG90cEhhcmQucnNhU2VjdXJJZCIsImxvZ2luIik6YztyZXR1cm57dGl0bGU6dSxub0J1dHRvbkJhcjohMCxhdXRvU2F2ZTohMCxjbGFzc05hbWU6cyhuKSxmb3JtQ2hpbGRyZW46W2UuSW5wdXQoe25hbWU6ImNyZWRlbnRpYWxJZCIsaW5wdXQ6cix0eXBlOiJ0ZXh0IixwbGFjZWhvbGRlcjp0LmxvYygiZW5yb2xsLm9ucHJlbS51c2VybmFtZS5wbGFjZWhvbGRlciIsImxvZ2luIixbY10pLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJlbnJvbGwub25wcmVtLnVzZXJuYW1lLnRvb2x0aXAiLCJsb2dpbiIsW2NdKX19KSxlLklucHV0KHtuYW1lOiJwYXNzQ29kZSIsaW5wdXQ6cix0eXBlOiJwYXNzd29yZCIscGxhY2Vob2xkZXI6dC5sb2MoImVucm9sbC5vbnByZW0ucGFzc2NvZGUucGxhY2Vob2xkZXIiLCJsb2dpbiIsW2NdKSxwYXJhbXM6e2lubmVyVG9vbHRpcDp0LmxvYygiZW5yb2xsLm9ucHJlbS5wYXNzY29kZS50b29sdGlwIiwibG9naW4iLFtjXSl9fSksZS5Ub29sYmFyKHtub0NhbmNlbEJ1dHRvbjohMCxzYXZlOnQubG9jKCJtZmEuY2hhbGxlbmdlLnZlcmlmeSIsImxvZ2luIil9KV19fSxGb290ZXI6aX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMyksbig2MjIpLG4oNjY4KSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10Ll87cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6ImVucm9sbC1zeW1hbnRlYyIsTW9kZWw6e3Byb3BzOntjcmVkZW50aWFsSWQ6WyJzdHJpbmciLCEwXSxwYXNzQ29kZTpbInN0cmluZyIsITBdLG5leHRQYXNzQ29kZTpbInN0cmluZyIsITBdLGZhY3RvcklkOiJzdHJpbmcifSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXt2YXIgZT1vLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6InRva2VuIixwcm92aWRlcjoiU1lNQU5URUMifSk7cmV0dXJuIGUuZW5yb2xsKHtwYXNzQ29kZTp0aGlzLmdldCgicGFzc0NvZGUiKSxuZXh0UGFzc0NvZGU6dGhpcy5nZXQoIm5leHRQYXNzQ29kZSIpLHByb2ZpbGU6e2NyZWRlbnRpYWxJZDp0aGlzLmdldCgiY3JlZGVudGlhbElkIil9fSl9KX19LEZvcm06e3RpdGxlOm8ucGFydGlhbCh0LmxvYywiZmFjdG9yLnRvdHBIYXJkLnN5bWFudGVjVmlwIiwibG9naW4iKSxzdWJ0aXRsZTpvLnBhcnRpYWwodC5sb2MsImVucm9sbC5zeW1hbnRlY1ZpcC5zdWJ0aXRsZSIsImxvZ2luIiksbm9CdXR0b25CYXI6ITAsYXV0b1NhdmU6ITAsY2xhc3NOYW1lOiJlbnJvbGwtc3ltYW50ZWMiLGZvcm1DaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltlLklucHV0KHtuYW1lOiJjcmVkZW50aWFsSWQiLGlucHV0OnIsdHlwZToidGV4dCIscGxhY2Vob2xkZXI6dC5sb2MoImVucm9sbC5zeW1hbnRlY1ZpcC5jcmVkZW50aWFsSWQucGxhY2Vob2xkZXIiLCJsb2dpbiIpLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJlbnJvbGwuc3ltYW50ZWNWaXAuY3JlZGVudGlhbElkLnRvb2x0aXAiLCJsb2dpbiIpfX0pLGUuSW5wdXQoe25hbWU6InBhc3NDb2RlIixpbnB1dDpyLHR5cGU6InRleHQiLHBsYWNlaG9sZGVyOnQubG9jKCJlbnJvbGwuc3ltYW50ZWNWaXAucGFzc2NvZGUxLnBsYWNlaG9sZGVyIiwibG9naW4iKSxwYXJhbXM6e2lubmVyVG9vbHRpcDp0LmxvYygiZW5yb2xsLnN5bWFudGVjVmlwLnBhc3Njb2RlMS50b29sdGlwIiwibG9naW4iKX19KSxlLklucHV0KHtuYW1lOiJuZXh0UGFzc0NvZGUiLGlucHV0OnIsdHlwZToidGV4dCIscGxhY2Vob2xkZXI6dC5sb2MoImVucm9sbC5zeW1hbnRlY1ZpcC5wYXNzY29kZTIucGxhY2Vob2xkZXIiLCJsb2dpbiIpLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJlbnJvbGwuc3ltYW50ZWNWaXAucGFzc2NvZGUyLnRvb2x0aXAiLCJsb2dpbiIpfX0pLGUuVG9vbGJhcih7bm9DYW5jZWxCdXR0b246ITAsc2F2ZTp0LmxvYygibWZhLmNoYWxsZW5nZS52ZXJpZnkiLCJsb2dpbiIpfSldfX0sRm9vdGVyOml9KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjMpLG4oNjIyKSxuKDY2OCksbig2NDgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89dC5fO3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwteXViaWtleSIsTW9kZWw6e3Byb3BzOntwYXNzQ29kZTpbInN0cmluZyIsITBdLGZhY3RvcklkOiJzdHJpbmcifSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXt2YXIgZT1vLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6InRva2VuOmhhcmR3YXJlIixwcm92aWRlcjoiWVVCSUNPIn0pO3JldHVybiBlLmVucm9sbCh7cGFzc0NvZGU6dGhpcy5nZXQoInBhc3NDb2RlIil9KX0pfX0sRm9ybTp7dGl0bGU6by5wYXJ0aWFsKHQubG9jLCJlbnJvbGwueXViaWtleS50aXRsZSIsImxvZ2luIiksc3VidGl0bGU6by5wYXJ0aWFsKHQubG9jLCJlbnJvbGwueXViaWtleS5zdWJ0aXRsZSIsImxvZ2luIiksbm9DYW5jZWxCdXR0b246ITAsc2F2ZTpvLnBhcnRpYWwodC5sb2MsIm1mYS5jaGFsbGVuZ2UudmVyaWZ5IiwibG9naW4iKSxhdXRvU2F2ZTohMCxjbGFzc05hbWU6ImVucm9sbC15dWJpa2V5Iixmb3JtQ2hpbGRyZW46W2UuVmlldyh7VmlldzonPGRpdiBjbGFzcz0ieXViaWtleS1kZW1vIiBkYXRhLXR5cGU9Inl1YmlrZXktZXhhbXBsZSI+PC9kaXY+J30pLGUuSW5wdXQoe25hbWU6InBhc3NDb2RlIixpbnB1dDpyLHR5cGU6InBhc3N3b3JkIn0pXX0sRm9vdGVyOml9KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2NDEpLG4oNjIyKSxuKDYyMyksbig2MjYpLG4oNjc3KSxuKDY3OCksbig2NjgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMsYSl7dmFyIGw9dC5fLGM9e19fZGV2aWNlVHlwZV9fOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10fX0sdT10LlZpZXcuZXh0ZW5kKHthdHRyaWJ1dGVzOnsiZGF0YS1zZSI6ImFwcC1kb3dubG9hZC1pbnN0cnVjdGlvbnMifSxjbGFzc05hbWU6ImFwcC1kb3dubG9hZC1pbnN0cnVjdGlvbnMiLHRlbXBsYXRlOidcdCAgICAgIDxwIGNsYXNzPSJpbnN0cnVjdGlvbnMtdGl0bGUiPnt7dGl0bGV9fTwvcD5cdCAgICAgIDxzcGFuIGNsYXNzPSJhcHAtbG9nbyB7e2FwcEljb259fSI+PC9zcGFuPlx0ICAgICAgPHAgY2xhc3M9Imluc3RydWN0aW9ucyI+e3t7YXBwU3RvcmVMaW5rVGV4dH19fTwvcD5cdCAgICAnLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZTpfX2RldmljZVR5cGVfXyIsdGhpcy5yZW5kZXIpfSxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXt2YXIgbixpLHIscz1lLmdldEZhY3RvckxhYmVsKHRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKSx0aGlzLm1vZGVsLmdldCgiX19mYWN0b3JUeXBlX18iKSk7cmV0dXJuIHI9by5TVE9SRVt0aGlzLm1vZGVsLmdldCgiX19kZXZpY2VUeXBlX18iKV0sIkdPT0dMRSI9PT10aGlzLm1vZGVsLmdldCgiX19wcm92aWRlcl9fIik/KG49by5HT09HTEVbdGhpcy5tb2RlbC5nZXQoIl9fZGV2aWNlVHlwZV9fIildLGk9Imdvb2dsZS1hdXRoLTM4Iik6KG49by5PS1RBW3RoaXMubW9kZWwuZ2V0KCJfX2RldmljZVR5cGVfXyIpXSxpPSJva3RhLXZlcmlmeS0zOCIpLHt0aXRsZTp0LmxvYygiZW5yb2xsLnRvdHAuaW5zdGFsbEFwcCIsImxvZ2luIixbc10pLGFwcFN0b3JlTGlua1RleHQ6dC5sb2MoImVucm9sbC50b3RwLmRvd25sb2FkQXBwIiwibG9naW4iLFtuLHMscl0pLGFwcEljb246aX19fSksZD1uLmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwtdG90cCIsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm57bG9jYWw6e19fZGV2aWNlVHlwZV9fOiJzdHJpbmciLF9fZmFjdG9yVHlwZV9fOlsic3RyaW5nIiwhMSx0aGlzLm9wdGlvbnMuZmFjdG9yVHlwZV0sX19wcm92aWRlcl9fOlsic3RyaW5nIiwhMSx0aGlzLm9wdGlvbnMucHJvdmlkZXJdfSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXt2YXIgZT1sLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6dGhpcy5nZXQoIl9fZmFjdG9yVHlwZV9fIikscHJvdmlkZXI6dGhpcy5nZXQoIl9fcHJvdmlkZXJfXyIpfSk7cmV0dXJuIGUuZW5yb2xsKCl9KX19fSxGb3JtOnt0aXRsZTpmdW5jdGlvbigpe3ZhciBuPWUuZ2V0RmFjdG9yTGFiZWwodGhpcy5tb2RlbC5nZXQoIl9fcHJvdmlkZXJfXyIpLHRoaXMubW9kZWwuZ2V0KCJfX2ZhY3RvclR5cGVfXyIpKTtyZXR1cm4gdC5sb2MoImVucm9sbC50b3RwLnRpdGxlIiwibG9naW4iLFtuXSl9LHN1YnRpdGxlOmwucGFydGlhbCh0LmxvYywiZW5yb2xsLnRvdHAuc2VsZWN0RGV2aWNlIiwibG9naW4iKSxhdXRvU2F2ZTohMCxub0J1dHRvbkJhcjohMCxhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6InN0ZXAtZGV2aWNlLXR5cGUifSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZT17QVBQTEU6IiIsQU5EUk9JRDoiIn07dGhpcy5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLndpbmRvd3NWZXJpZnkiKSYmIk9LVEEiPT09dGhpcy5tb2RlbC5nZXQoIl9fcHJvdmlkZXJfXyIpP2UuV0lORE9XUz0iIjoiR09PR0xFIj09PXRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKSYmKGUuQkxBQ0tCRVJSWT0iIik7dmFyIG49W2kuSW5wdXQoe25hbWU6Il9fZGV2aWNlVHlwZV9fIix0eXBlOiJyYWRpbyIsb3B0aW9uczplLGNsYXNzTmFtZToiZGV2aWNlLXR5cGUtaW5wdXQifSksaS5EaXZpZGVyKHtzaG93V2hlbjpjfSksaS5WaWV3KHtWaWV3OnUsc2hvd1doZW46Y30pLGkuVG9vbGJhcih7bm9DYW5jZWxCdXR0b246ITAsc2F2ZTp0LmxvYygib2Zvcm0ubmV4dCIsImxvZ2luIiksc2hvd1doZW46Y30pXTtyZXR1cm4gbn19LEZvb3RlcjphfSk7cmV0dXJuIGR9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjshKHQuZXhwb3J0cz17T0tUQTp7QVBQTEU6Imh0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS91cy9hcHAvb2t0YS12ZXJpZnkvaWQ0OTAxNzk0MDUiLEFORFJPSUQ6Imh0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2FwcHMvZGV0YWlscz9pZD1jb20ub2t0YS5hbmRyb2lkLmF1dGgiLFdJTkRPV1M6Imh0dHA6Ly93d3cud2luZG93c3Bob25lLmNvbS9lbi11cy9zdG9yZS9hcHAvb2t0YS12ZXJpZnkvOWRmMGUyYzQtNzMwMS00MTFmLTgwZTUtNjJmY2Y2Njc5NjY2In0sR09PR0xFOntBUFBMRToiaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL3VzL2FwcC9nb29nbGUtYXV0aGVudGljYXRvci9pZDM4ODQ5NzYwNSIsQU5EUk9JRDoiaHR0cHM6Ly9wbGF5Lmdvb2dsZS5jb20vc3RvcmUvYXBwcy9kZXRhaWxzP2lkPWNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmF1dGhlbnRpY2F0b3IyIixCTEFDS0JFUlJZOiJodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS9hY2NvdW50cy9hbnN3ZXIvMTA2NjQ0NyJ9LFNUT1JFOntBUFBMRToiQXBwIFN0b3JlIixBTkRST0lEOiJHb29nbGUgUGxheSBTdG9yZSIsV0lORE9XUzoiV2luZG93cyBTdG9yZSIsQkxBQ0tCRVJSWToiQmxhY2tiZXJyeSBXb3JsZCBTdG9yZSJ9fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDY0MSksbig2MjYpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Ll87cmV0dXJuIHQuVmlldy5leHRlbmQoe2NsYXNzTmFtZToic2Nhbi1pbnN0cnVjdGlvbnMgY2xlYXJmaXgiLHRlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9InNjYW4taW5zdHJ1Y3Rpb25zLWRldGFpbHMtd3JhcHBlciI+XHQgICAgICAgICAgPGRpdiBjbGFzcz0ic2Nhbi1pbnN0cnVjdGlvbnMtZGV0YWlscyI+XHQgICAgICAgICAgICAgIDxwPnt7aW5zdHJ1Y3Rpb25zfX08L3A+XHQgICAgICAgICAgPC9kaXY+XHQgICAgICA8L2Rpdj5cdCAgICAgIDxkaXYgY2xhc3M9InNjYW4taW5zdHJ1Y3Rpb25zLXFyY29kZS13cmFwcGVyIj5cdCAgICAgICAgICA8ZGl2IGNsYXNzPSJxcmNvZGUtd3JhcCI+XHQgICAgICAgICAgICAgIDxpbWcgZGF0YS1zZT0icXJjb2RlIiBjbGFzcz0icXJjb2RlLWltYWdlIiBzcmM9Int7cXJjb2RlfX0iPlx0ICAgICAgICAgICAgICA8ZGl2IGRhdGEtc2U9InFyY29kZS1zdWNjZXNzIiBjbGFzcz0icXJjb2RlLXN1Y2Nlc3MiPjwvZGl2Plx0ICAgICAgICAgICAgICA8ZGl2IGRhdGEtc2U9InFyY29kZS1lcnJvciIgY2xhc3M9InFyY29kZS1lcnJvciI+PC9kaXY+XHQgICAgICAgICAgPC9kaXY+XHQgICAgICAgICAgPGEgaHJlZj0iIyIgZGF0YS10eXBlPSJtYW51YWwtc2V0dXAiIGRhdGEtc2U9Im1hbnVhbC1zZXR1cCIgY2xhc3M9ImxpbmsgbWFudWFsLXNldHVwIj5cdCAgICAgICAgICAgIHt7aTE4biBjb2RlPSJlbnJvbGwudG90cC5jYW5ub3RTY2FuIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICAgICAgPC9hPlx0ICAgICAgICAgIDxhIGhyZWY9IiMiIGRhdGEtdHlwZT0icmVmcmVzaC1xcmNvZGUiIGRhdGEtc2U9InJlZnJlc2gtcXJjb2RlIiBjbGFzcz0ibGluayByZWZyZXNoLXFyY29kZSI+XHQgICAgICAgICAgICB7e2kxOG4gY29kZT0iZW5yb2xsLnRvdHAucmVmcmVzaEJhcmNvZGUiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgICAgICA8L2E+XHQgICAgICA8L2Rpdj5cdCAgICAnLGV2ZW50czp7J2NsaWNrIFtkYXRhLXR5cGU9Im1hbnVhbC1zZXR1cCJdJzpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCk7dmFyIGU9bi5jcmVhdGVBY3RpdmF0ZUZhY3RvclVybCh0aGlzLm1vZGVsLmdldCgiX19wcm92aWRlcl9fIiksdGhpcy5tb2RlbC5nZXQoIl9fZmFjdG9yVHlwZV9fIiksIm1hbnVhbCIpO3RoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsZSl9LCdjbGljayBbZGF0YS10eXBlPSJyZWZyZXNoLXFyY29kZSJdJzpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5tb2RlbC50cmlnZ2VyKCJlcnJvcnM6Y2xlYXIiKTt2YXIgZT10aGlzO3RoaXMubW9kZWwuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBTdGF0ZS5nZXQoImlzV2FpdGluZ0ZvckFjdGl2YXRpb24iKT90LnBvbGwoKTp0LmFjdGl2YXRlKCl9KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBuPXQuZGF0YTsiTUZBX0VOUk9MTF9BQ1RJVkFURSI9PT1uLnN0YXR1cyYmIldBSVRJTkciPT09bi5mYWN0b3JSZXN1bHQmJmkuZGVmZXIoaS5iaW5kKGUucmVuZGVyLGUpKTsKCX0pfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcy5vcHRpb25zLmFwcFN0YXRlLCJjaGFuZ2U6bGFzdEF1dGhSZXNwb25zZSIsZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc01mYUVucm9sbEFjdGl2YXRlIik/dGhpcy4kZWwudG9nZ2xlQ2xhc3MoInFyY29kZS1leHBpcmVkIiwhdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNXYWl0aW5nRm9yQWN0aXZhdGlvbiIpKTp0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc1N1Y2Nlc3NSZXNwb25zZSIpJiZ0aGlzLiRlbC5hZGRDbGFzcygicXJjb2RlLXN1Y2Nlc3MiKX0pLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZXJyb3IiLGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpJiZ0aGlzLiRlbC50b2dnbGVDbGFzcygicXJjb2RlLWV4cGlyZWQiLCEwKX0pfSxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXt2YXIgbixpPWUuZ2V0RmFjdG9yTGFiZWwodGhpcy5tb2RlbC5nZXQoIl9fcHJvdmlkZXJfXyIpLHRoaXMubW9kZWwuZ2V0KCJfX2ZhY3RvclR5cGVfXyIpKTtyZXR1cm4gbj0iR09PR0xFIj09PXRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKT90LmxvYygiZW5yb2xsLnRvdHAuc2V0dXBHb29nbGVBdXRoQXBwIiwibG9naW4iLFtpXSk6dC5sb2MoImVucm9sbC50b3RwLnNldHVwQXBwIiwibG9naW4iLFtpXSkse2luc3RydWN0aW9uczpuLHFyY29kZTp0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJxcmNvZGUiKX19fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIzKSxuKDYyMiksbig2NjgpLG4oMzQ2KSxuKDY2MSksbig1MDUpLG4oNjYzKV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXtmdW5jdGlvbiBhKHQpe3N3aXRjaCh0KXtkZWZhdWx0OmNhc2UgMTpyZXR1cm4idTJmLmVycm9yLm90aGVyIjtjYXNlIDI6Y2FzZSAzOnJldHVybiJ1MmYuZXJyb3IuYmFkUmVxdWVzdCI7Y2FzZSA0OnJldHVybiJ1MmYuZXJyb3IudW5zdXBwb3J0ZWQiO2Nhc2UgNTpyZXR1cm4idTJmLmVycm9yLnRpbWVvdXQifX12YXIgbD10Ll87cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6ImVucm9sbC11MmYiLE1vZGVsOntsb2NhbDp7X19lbnJvbGxlZF9fOiJib29sZWFuIn0sc2F2ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIoInJlcXVlc3QiKSx0aGlzLmdldCgiX19lbnJvbGxlZF9fIik/dGhpcy5hY3RpdmF0ZSgpOnRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXt2YXIgZT1sLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6InUyZiIscHJvdmlkZXI6IkZJRE8ifSk7cmV0dXJuIGUuZW5yb2xsKCl9KX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXQoIl9fZW5yb2xsZWRfXyIsITApLHRoaXMudHJpZ2dlcigiZXJyb3JzOmNsZWFyIiksdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmFjdG9yLmFjdGl2YXRpb24saT1uLmFwcElkLG89W3t2ZXJzaW9uOm4udmVyc2lvbixjaGFsbGVuZ2U6bi5ub25jZX1dLHM9dGhpcyxsPXIuZGVmZXIoKTtyZXR1cm4gdTJmLnJlZ2lzdGVyKGksbyxbXSxmdW5jdGlvbihuKXtzLnRyaWdnZXIoImVycm9yczpjbGVhciIpLG4uZXJyb3JDb2RlJiYwIT09bi5lcnJvckNvZGU/bC5yZWplY3Qoe3hocjp7cmVzcG9uc2VKU09OOntlcnJvclN1bW1hcnk6dC5sb2MoYShuLmVycm9yQ29kZSksImxvZ2luIil9fX0pOmwucmVzb2x2ZShlLmFjdGl2YXRlKHtyZWdpc3RyYXRpb25EYXRhOm4ucmVnaXN0cmF0aW9uRGF0YSx2ZXJzaW9uOm4udmVyc2lvbixjaGFsbGVuZ2U6bi5jaGFsbGVuZ2UsY2xpZW50RGF0YTpuLmNsaWVudERhdGF9KSl9KSxsLnByb21pc2V9KX19LEZvcm06e3RpdGxlOmwucGFydGlhbCh0LmxvYywiZW5yb2xsLnUyZi50aXRsZSIsImxvZ2luIiksc2F2ZTpsLnBhcnRpYWwodC5sb2MsImVucm9sbC51MmYuc2F2ZSIsImxvZ2luIiksbm9DYW5jZWxCdXR0b246ITAsaGFzU2F2aW5nU3RhdGU6ITEsYXV0b1NhdmU6ITAsY2xhc3NOYW1lOiJlbnJvbGwtdTJmLWZvcm0iLG5vQnV0dG9uQmFyOmZ1bmN0aW9uKCl7cmV0dXJuIXdpbmRvdy5oYXNPd25Qcm9wZXJ0eSgidTJmIil9LG1vZGVsRXZlbnRzOntyZXF1ZXN0OiJfc3RhcnRFbnJvbGxtZW50IixlcnJvcjoiX3N0b3BFbnJvbGxtZW50In0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIG49W107aWYod2luZG93Lmhhc093blByb3BlcnR5KCJ1MmYiKSluLnB1c2goZS5WaWV3KHtWaWV3Oic8ZGl2IGNsYXNzPSJ1MmYtaW5zdHJ1Y3Rpb25zIj48b2w+XHQgICAgICAgICAgPGxpPnt7aTE4biBjb2RlPSJlbnJvbGwudTJmLmdlbmVyYWwxIiBidW5kbGU9ImxvZ2luIn19PC9saT5cdCAgICAgICAgICA8bGk+e3t7aTE4biBjb2RlPSJlbnJvbGwudTJmLmdlbmVyYWwyIiBidW5kbGU9ImxvZ2luIn19fTwvbGk+XHQgICAgICAgICAgPGxpPnt7aTE4biBjb2RlPSJlbnJvbGwudTJmLmdlbmVyYWwzIiBidW5kbGU9ImxvZ2luIn19PC9saT5cdCAgICAgICAgICA8L29sPjwvZGl2Pid9KSksbi5wdXNoKGUuVmlldyh7VmlldzonXHQgICAgICAgICAgPGRpdiBjbGFzcz0idTJmLWVucm9sbC10ZXh0IGhpZGUiPlx0ICAgICAgICAgICAgPHA+e3tpMThuIGNvZGU9ImVucm9sbC51MmYuaW5zdHJ1Y3Rpb25zIiBidW5kbGU9ImxvZ2luIn19PC9wPlx0ICAgICAgICAgICAgPHA+e3tpMThuIGNvZGU9ImVucm9sbC51MmYuaW5zdHJ1Y3Rpb25zQmx1ZXRvb3RoIiBidW5kbGU9ImxvZ2luIn19PC9wPlx0ICAgICAgICAgICAgPGRpdiBkYXRhLXNlPSJ1MmYtZGV2aWNlcyIgY2xhc3M9InUyZi1kZXZpY2VzLWltYWdlcyI+XHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InUyZi11c2IiPjwvZGl2Plx0ICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1MmYtYmx1ZXRvb3RoIj48L2Rpdj5cdCAgICAgICAgICAgIDwvZGl2Plx0ICAgICAgICAgICAgPGRpdiBkYXRhLXNlPSJ1MmYtd2FpdGluZyIgY2xhc3M9Im9rdGEtd2FpdGluZy1zcGlubmVyIj48L2Rpdj5cdCAgICAgICAgICA8L2Rpdj4nfSkpO2Vsc2V7dmFyIGk9InUyZi5lcnJvci5ub3RTdXBwb3J0ZWRCcm93c2VyIjtzLmlzRmlyZWZveCgpJiYoaT0idTJmLmVycm9yLm5vRmlyZWZveEV4dGVuc2lvbiIpLG4ucHVzaChlLlZpZXcoe1ZpZXc6bmV3IG8oe21lc3NhZ2U6dC5sb2MoaSwibG9naW4iKX0pfSx7c2VsZWN0b3I6Ii5vLWZvcm0tZXJyb3ItY29udGFpbmVyIn0pKX1yZXR1cm4gbn0sX3N0YXJ0RW5yb2xsbWVudDpmdW5jdGlvbigpe3RoaXMuJCgiLnUyZi1pbnN0cnVjdGlvbnMiKS5hZGRDbGFzcygiaGlkZSIpLHRoaXMuJCgiLnUyZi1lbnJvbGwtdGV4dCIpLnJlbW92ZUNsYXNzKCJoaWRlIiksdGhpcy4kKCIuby1mb3JtLWJ1dHRvbi1iYXIiKS5oaWRlKCl9LF9zdG9wRW5yb2xsbWVudDpmdW5jdGlvbigpe3RoaXMuJCgiLnUyZi1pbnN0cnVjdGlvbnMiKS5yZW1vdmVDbGFzcygiaGlkZSIpLHRoaXMuJCgiLnUyZi1lbnJvbGwtdGV4dCIpLmFkZENsYXNzKCJoaWRlIiksdGhpcy4kKCIuby1mb3JtLWJ1dHRvbi1iYXIiKS5zaG93KCl9fSxGb290ZXI6aSx0cmFwQXV0aFJlc3BvbnNlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpKXJldHVybiB0aGlzLm1vZGVsLmFjdGl2YXRlKCksITB9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjQxKSxuKDYyMiksbig2MjMpLG4oNjI2KSxuKDY3OCksbig2NjgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMpe3ZhciBhPXQuXztyZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZToiYmFyY29kZS10b3RwIixNb2RlbDpmdW5jdGlvbigpe3JldHVybntsb2NhbDp7X19mYWN0b3JUeXBlX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlXSxfX3Byb3ZpZGVyX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5wcm92aWRlcl19fX0sRm9ybTp7dGl0bGU6ZnVuY3Rpb24oKXt2YXIgbj1lLmdldEZhY3RvckxhYmVsKHRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKSx0aGlzLm1vZGVsLmdldCgiX19mYWN0b3JUeXBlX18iKSk7cmV0dXJuIHQubG9jKCJlbnJvbGwudG90cC50aXRsZSIsImxvZ2luIixbbl0pfSxzdWJ0aXRsZTphLnBhcnRpYWwodC5sb2MsIm1mYS5zY2FuQmFyY29kZSIsImxvZ2luIiksc2F2ZTphLnBhcnRpYWwodC5sb2MsIm9mb3JtLm5leHQiLCJsb2dpbiIpLG5vQ2FuY2VsQnV0dG9uOiEwLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoic3RlcC1zY2FuIn0sY2xhc3NOYW1lOiJiYXJjb2RlLXNjYW4iLGZvcm1DaGlsZHJlbjpbaS5WaWV3KHtWaWV3Om99KV19LEZvb3RlcjpzLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMuZm9ybSwic2F2ZSIsZnVuY3Rpb24oKXt2YXIgdD1yLmNyZWF0ZUFjdGl2YXRlRmFjdG9yVXJsKHRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKSx0aGlzLm1vZGVsLmdldCgiX19mYWN0b3JUeXBlX18iKSwiYWN0aXZhdGUiKTt0aGlzLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLHQpfSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjQxKSxuKDYyMiksbig2MjMpLG4oNjI2KSxuKDY3OCksbig2NjgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscixvLHMpe3ZhciBhPXQuXyxsPTZlMztyZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZToiYmFyY29kZS1wdXNoIixNb2RlbDpmdW5jdGlvbigpe3JldHVybntsb2NhbDp7X19mYWN0b3JUeXBlX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlXSxfX3Byb3ZpZGVyX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5wcm92aWRlcl19fX0sRm9ybTp7dGl0bGU6ZnVuY3Rpb24oKXt2YXIgbj1lLmdldEZhY3RvckxhYmVsKHRoaXMubW9kZWwuZ2V0KCJfX3Byb3ZpZGVyX18iKSx0aGlzLm1vZGVsLmdldCgiX19mYWN0b3JUeXBlX18iKSk7cmV0dXJuIHQubG9jKCJlbnJvbGwudG90cC50aXRsZSIsImxvZ2luIixbbl0pfSxzdWJ0aXRsZTphLnBhcnRpYWwodC5sb2MsIm1mYS5zY2FuQmFyY29kZSIsImxvZ2luIiksbm9CdXR0b25CYXI6ITAsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJzdGVwLXNjYW4ifSxjbGFzc05hbWU6ImJhcmNvZGUtc2NhbiIsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiZXJyb3IgZXJyb3JzOmNsZWFyIixmdW5jdGlvbigpe3RoaXMuY2xlYXJFcnJvcnMoKX0pfSxmb3JtQ2hpbGRyZW46W2kuVmlldyh7VmlldzpvfSldfSxGb290ZXI6cyxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5wb2xsRm9yRW5yb2xsbWVudCgpfSxwb2xsRm9yRW5yb2xsbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQucG9sbChsKX0pfSx0cmFwQXV0aFJlc3BvbnNlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGxBY3RpdmF0ZSIpKXJldHVybiEw", "base64"));
  res.write(new Buffer("fX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMiksbig2ODMpLG4oNjY4KV0scj1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiYWN0aXZhdGUtdG90cCIsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6e2ZhY3RvcklkOlsic3RyaW5nIiwhMCx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JJZCIpXSxwYXNzQ29kZTpbInN0cmluZyIsITBdfSxsb2NhbDp7X19mYWN0b3JUeXBlX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlXSxfX3Byb3ZpZGVyX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5wcm92aWRlcl19LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFjdGl2YXRlKHtwYXNzQ29kZTp0aGlzLmdldCgicGFzc0NvZGUiKX0pfSl9fX0sRm9ybTpuLEZvb3RlcjppfSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjQxKSxuKDYyMyksbig2NDgpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQuXyxvPXt0aXRsZTpmdW5jdGlvbigpe3ZhciBuPWUuZ2V0RmFjdG9yTGFiZWwodGhpcy5tb2RlbC5nZXQoIl9fcHJvdmlkZXJfXyIpLHRoaXMubW9kZWwuZ2V0KCJfX2ZhY3RvclR5cGVfXyIpKTtyZXR1cm4gdC5sb2MoImVucm9sbC50b3RwLnRpdGxlIiwibG9naW4iLFtuXSl9LHN1YnRpdGxlOnIucGFydGlhbCh0LmxvYywiZW5yb2xsLnRvdHAuZW50ZXJDb2RlIiwibG9naW4iKSxhdXRvU2F2ZTohMCxub0J1dHRvbkJhcjohMCxhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6InN0ZXAtc2VuZGNvZGUifSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5bbi5JbnB1dCh7bmFtZToicGFzc0NvZGUiLGlucHV0OmksdHlwZToibnVtYmVyIixwbGFjZWhvbGRlcjp0LmxvYygibWZhLmNoYWxsZW5nZS5lbnRlckNvZGUucGxhY2Vob2xkZXIiLCJsb2dpbiIpLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS50b29sdGlwIiwibG9naW4iKX19KSxuLlRvb2xiYXIoe25vQ2FuY2VsQnV0dG9uOiEwLHNhdmU6dC5sb2MoIm9mb3JtLnZlcmlmeSIsImxvZ2luIil9KV19fTtyZXR1cm4gb30uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2NDEpLG4oNjIyKSxuKDYyMyksbig2MjYpLG4oNjg1KSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9dC5fO3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwtbWFudWFsLXRvdHAiLE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJue2xvY2FsOntzaGFyZWRTZWNyZXQ6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInNoYXJlZFNlY3JldCIpXSxfX2ZhY3RvclR5cGVfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLmZhY3RvclR5cGVdLF9fcHJvdmlkZXJfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLnByb3ZpZGVyXX19fSxGb3JtOnt0aXRsZTpmdW5jdGlvbigpe3ZhciBuPWUuZ2V0RmFjdG9yTGFiZWwodGhpcy5tb2RlbC5nZXQoIl9fcHJvdmlkZXJfXyIpLHRoaXMubW9kZWwuZ2V0KCJfX2ZhY3RvclR5cGVfXyIpKTtyZXR1cm4gdC5sb2MoImVucm9sbC50b3RwLnRpdGxlIiwibG9naW4iLFtuXSl9LHN1YnRpdGxlOmEucGFydGlhbCh0LmxvYywiZW5yb2xsLnRvdHAuY2Fubm90U2NhbkJhcmNvZGUiLCJsb2dpbiIpLG5vQnV0dG9uQmFyOiEwLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoic3RlcC1tYW51YWwtc2V0dXAifSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5baS5WaWV3KHtWaWV3OidcdCAgICAgICAgICAgIDxwIGNsYXNzPSJva3RhLWZvcm0tc3VidGl0bGUgby1mb3JtLWV4cGxhaW4gdGV4dC1hbGlnbi1jIj5cdCAgICAgICAgICAgICAge3tpMThuIGNvZGU9ImVucm9sbC50b3RwLm1hbnVhbFNldHVwSW5zdHJ1Y3Rpb25zIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICAgICAgICA8L3A+XHQgICAgICAgICAgJ30pLGkuSW5wdXQoe25hbWU6InNoYXJlZFNlY3JldCIsaW5wdXQ6cyx0eXBlOiJ0ZXh0IixkaXNhYmxlZDohMH0pLGkuVG9vbGJhcih7bm9DYW5jZWxCdXR0b246ITAsc2F2ZTp0LmxvYygib2Zvcm0ubmV4dCIsImxvZ2luIil9KV19fSxGb290ZXI6byxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLmZvcm0sInNhdmUiLGZ1bmN0aW9uKCl7dmFyIHQ9ci5jcmVhdGVBY3RpdmF0ZUZhY3RvclVybCh0aGlzLm1vZGVsLmdldCgiX19wcm92aWRlcl9fIiksdGhpcy5tb2RlbC5nZXQoIl9fZmFjdG9yVHlwZV9fIiksImFjdGl2YXRlIik7dGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIix0KX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyNiksbig2MjgpXSxyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmsgaGVscCBqcy1iYWNrIiBkYXRhLXNlPSJiYWNrLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0ibWZhLmJhY2tUb0ZhY3RvcnMiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rIGhlbHAgZ290byBqcy1nb3RvIiBkYXRhLXNlPSJnb3RvLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0ibWZhLnNjYW5CYXJjb2RlIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgJyxjbGFzc05hbWU6ImF1dGgtZm9vdGVyIixldmVudHM6eyJjbGljayAuanMtYmFjayI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmFjaygpfSwiY2xpY2sgLmpzLWdvdG8iOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLm1vZGVsLnN0YXJ0VHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQudHgucmVzdW1lKCl9KX19LGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlLnNldCgibmF2aWdhdGVEaXIiLG4uRElSRUNUSU9OX0JBQ0spLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInByZXZMaW5rIik/dGhpcy5tb2RlbC5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnByZXYoKX0pOnRoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsInNpZ25pbi9lbnJvbGwiKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjApLG4oNjQxKSxuKDYyMiksbig2MjMpLG4oNjI2KSxuKDY4Nyksbig2NzIpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEsbCl7ZnVuY3Rpb24gYyh0LGUpe3ZhciBuPW8uY3JlYXRlQWN0aXZhdGVGYWN0b3JVcmwodC5vcHRpb25zLmFwcFN0YXRlLmdldCgiYWN0aXZhdGVkRmFjdG9yUHJvdmlkZXIiKSx0Lm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JUeXBlIiksZSk7dC5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIixuKX1mdW5jdGlvbiB1KHQpe3ZhciBlLG47IlNNUyI9PT10Lm1vZGVsLmdldCgiYWN0aXZhdGlvblR5cGUiKSYmKG49dC5tb2RlbC5nZXQoImNvdW50cnlDb2RlIiksZT10Lm1vZGVsLmdldCgicGhvbmVOdW1iZXIiKSksdC5vcHRpb25zLmFwcFN0YXRlLnNldCh7ZmFjdG9yQWN0aXZhdGlvblR5cGU6dC5tb2RlbC5nZXQoImFjdGl2YXRpb25UeXBlIiksdXNlckNvdW50cnlDb2RlOm4sdXNlclBob25lTnVtYmVyOmV9KX1mdW5jdGlvbiBkKHQsZSl7cmV0dXJuIHQubW9kZWwuZG9UcmFuc2FjdGlvbihmdW5jdGlvbihuKXtyZXR1cm4gbi5wcmV2KCkudGhlbihmdW5jdGlvbih0KXt2YXIgbj1oLmZpbmRXaGVyZSh0LmZhY3RvcnMse2ZhY3RvclR5cGU6ZSxwcm92aWRlcjoiT0tUQSJ9KTtyZXR1cm4gbi5lbnJvbGwoKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89ZS5kYXRhO2lmKG8mJm8uX2VtYmVkZGVkJiZvLl9lbWJlZGRlZC5mYWN0b3ImJm8uX2VtYmVkZGVkLmZhY3Rvci5fZW1iZWRkZWQmJm8uX2VtYmVkZGVkLmZhY3Rvci5fZW1iZWRkZWQuYWN0aXZhdGlvbil7dmFyIHM9by5fZW1iZWRkZWQuZmFjdG9yO2lmKHI9cy5fZW1iZWRkZWQuYWN0aXZhdGlvbi5zaGFyZWRTZWNyZXQscy5fZW1iZWRkZWQuYWN0aXZhdGlvbi5fbGlua3MmJnMuX2VtYmVkZGVkLmFjdGl2YXRpb24uX2xpbmtzLnNlbmQpe3ZhciBhPXMuX2VtYmVkZGVkLmFjdGl2YXRpb24uX2xpbmtzLnNlbmQsbD1oLmZpbmRXaGVyZShhLHtuYW1lOiJzbXMifSk7bj1sP2wuaHJlZjpudWxsO3ZhciBjPWguZmluZFdoZXJlKGEse25hbWU6ImVtYWlsIn0pO2k9Yz9jLmhyZWY6bnVsbH19cmV0dXJuIHQubW9kZWwuc2V0KHtTTVM6bixFTUFJTDppLHNoYXJlZFNlY3JldDpyfSksZX0pfSl9dmFyIGg9dC5fO3JldHVybiBpLmV4dGVuZCh7Y2xhc3NOYW1lOiJlbnJvbGwtbWFudWFsLXB1c2giLE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJue2xvY2FsOnthY3RpdmF0aW9uVHlwZTpbInN0cmluZyIsITAsdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZmFjdG9yQWN0aXZhdGlvblR5cGUiKXx8IlNNUyJdLGNvdW50cnlDb2RlOlsic3RyaW5nIiwhMSwiVVMiXSxwaG9uZU51bWJlcjoic3RyaW5nIixTTVM6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInRleHRBY3RpdmF0aW9uTGlua1VybCIpXSxFTUFJTDpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZW1haWxBY3RpdmF0aW9uTGlua1VybCIpXSxzaGFyZWRTZWNyZXQ6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInNoYXJlZFNlY3JldCIpXSxfX2ZhY3RvclR5cGVfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLmZhY3RvclR5cGVdLF9fcHJvdmlkZXJfXzpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLnByb3ZpZGVyXX0sZGVyaXZlZDp7Y291bnRyeUNhbGxpbmdDb2RlOntkZXBzOlsiY291bnRyeUNvZGUiXSxmbjpmdW5jdGlvbih0KXtyZXR1cm4iKyIrZS5nZXRDYWxsaW5nQ29kZUZvckNvdW50cnkodCl9fSxmdWxsUGhvbmVOdW1iZXI6e2RlcHM6WyJjb3VudHJ5Q2FsbGluZ0NvZGUiLCJwaG9uZU51bWJlciJdLGZuOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX19fX19LEZvcm06e3RpdGxlOmZ1bmN0aW9uKCl7dmFyIGU9bi5nZXRGYWN0b3JMYWJlbCh0aGlzLm1vZGVsLmdldCgiX19wcm92aWRlcl9fIiksdGhpcy5tb2RlbC5nZXQoIl9fZmFjdG9yVHlwZV9fIikpO3JldHVybiB0LmxvYygiZW5yb2xsLnRvdHAudGl0bGUiLCJsb2dpbiIsW2VdKX0sc3VidGl0bGU6aC5wYXJ0aWFsKHQubG9jLCJlbnJvbGwudG90cC5jYW5ub3RTY2FuQmFyY29kZSIsImxvZ2luIiksbm9CdXR0b25CYXI6ITAsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJzdGVwLW1hbnVhbC1zZXR1cCJ9LGZvcm1DaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBuPVtyLklucHV0KHtuYW1lOiJhY3RpdmF0aW9uVHlwZSIsdHlwZToic2VsZWN0Iix3aWRlOiEwLG9wdGlvbnM6e1NNUzp0LmxvYygiZW5yb2xsLnRvdHAuc2VuZFNtcyIsImxvZ2luIiksRU1BSUw6dC5sb2MoImVucm9sbC50b3RwLnNlbmRFbWFpbCIsImxvZ2luIiksTUE=", "base64"));
  res.write(new Buffer("TlVBTDp0LmxvYygiZW5yb2xsLnRvdHAuc2V0dXBNYW51YWxseSIsImxvZ2luIil9fSksci5JbnB1dCh7bmFtZToiY291bnRyeUNvZGUiLHR5cGU6InNlbGVjdCIsd2lkZTohMCxvcHRpb25zOmUuZ2V0Q291bnRyaWVzKCksc2hvd1doZW46e2FjdGl2YXRpb25UeXBlOiJTTVMifX0pLHIuSW5wdXQoe3BsYWNlaG9sZGVyOnQubG9jKCJtZmEucGhvbmVOdW1iZXIucGxhY2Vob2xkZXIiLCJsb2dpbiIpLGNsYXNzTmFtZToiZW5yb2xsLXNtcy1waG9uZSIsbmFtZToicGhvbmVOdW1iZXIiLGlucHV0OmEsdHlwZToidGV4dCIsc2hvd1doZW46e2FjdGl2YXRpb25UeXBlOiJTTVMifX0pLHIuVmlldyh7VmlldzonXHQgICAgICAgICAgICAgIDxwIGNsYXNzPSJva3RhLWZvcm0tc3VidGl0bGUgby1mb3JtLWV4cGxhaW4gdGV4dC1hbGlnbi1jIj5cdCAgICAgICAgICAgICAgICB7e2kxOG4gY29kZT0iZW5yb2xsLnRvdHAuc2hhcmVkU2VjcmV0SW5zdHJ1Y3Rpb25zIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICAgICAgICAgIDwvcD5cdCAgICAgICAgICAgICcsc2hvd1doZW46e2FjdGl2YXRpb25UeXBlOiJNQU5VQUwifX0pLHIuSW5wdXQoe25hbWU6InNoYXJlZFNlY3JldCIsaW5wdXQ6bCx0eXBlOiJ0ZXh0IixkaXNhYmxlZDohMCxzaG93V2hlbjp7YWN0aXZhdGlvblR5cGU6Ik1BTlVBTCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZTpzaGFyZWRTZWNyZXQiLHRoaXMucmVuZGVyKX19KSxyLlZpZXcoe1ZpZXc6JzxkaXYgZGF0YS10eXBlPSJuZXh0LWJ1dHRvbi13cmFwIj48L2Rpdj4nLHNob3dXaGVuOnthY3RpdmF0aW9uVHlwZToiTUFOVUFMIn19KSxyLkJ1dHRvbih7dGl0bGU6dC5sb2MoIm9mb3JtLm5leHQiLCJsb2dpbiIpLGNsYXNzTmFtZToiYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi13aWRlIGJ1dHRvbi1uZXh0IixhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6Im5leHQtYnV0dG9uIn0sY2xpY2s6aC5iaW5kKGZ1bmN0aW9uKCl7dSh0aGlzKSxjKHRoaXMsInBhc3Njb2RlIil9LHRoaXMpfSwnW2RhdGEtdHlwZT0ibmV4dC1idXR0b24td3JhcCJdJyksci5Ub29sYmFyKHtub0NhbmNlbEJ1dHRvbjohMCxzYXZlOnQubG9jKCJvZm9ybS5zZW5kIiwibG9naW4iKSxzaG93V2hlbjp7YWN0aXZhdGlvblR5cGU6ZnVuY3Rpb24odCl7cmV0dXJuIlNNUyI9PT10fHwiRU1BSUwiPT09dH19fSldO3JldHVybiBufX0sRm9vdGVyOnMsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuc2V0SW5pdGlhbE1vZGVsKCksdGhpcy5saXN0ZW5Ubyh0aGlzLmZvcm0sInNhdmUiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm1vZGVsLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5nZXQoImFjdGl2YXRpb25UeXBlIikudG9Mb3dlckNhc2UoKSxpPXt9O3JldHVybiJzbXMiPT09biYmKGkucHJvZmlsZT17cGhvbmVOdW1iZXI6dGhpcy5nZXQoImZ1bGxQaG9uZU51bWJlciIpfSksZS5mYWN0b3IuYWN0aXZhdGlvbi5zZW5kKG4saSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdSh0KSxoLmRlZmVyKGZ1bmN0aW9uKCl7Yyh0LCJzZW50Iil9KSxlfSl9KX0pLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlOmFjdGl2YXRpb25UeXBlIixmdW5jdGlvbih0LGUpe3RoaXMuZm9ybS5jbGVhckVycm9ycygpLCJNQU5VQUwiPT09ZSYmInRva2VuOnNvZnR3YXJlOnRvdHAiIT09dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiYWN0aXZhdGVkRmFjdG9yVHlwZSIpP2QodGhpcywidG9rZW46c29mdHdhcmU6dG90cCIpOiJwdXNoIiE9PXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImFjdGl2YXRlZEZhY3RvclR5cGUiKSYmZCh0aGlzLCJwdXNoIil9KX0sc2V0SW5pdGlhbE1vZGVsOmZ1bmN0aW9uKCl7IlNNUyI9PT10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJmYWN0b3JBY3RpdmF0aW9uVHlwZSIpJiZ0aGlzLm1vZGVsLnNldCh7Y291bnRyeUNvZGU6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlckNvdW50cnlDb2RlIil8fCJVUyIscGhvbmVOdW1iZXI6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlclBob25lTnVtYmVyIil9KX0sdHJhcEF1dGhSZXNwb25zZTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImlzTWZhRW5yb2xsQWN0aXZhdGUiKXx8dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNNZmFFbnJvbGwiKSlyZXR1cm4hMH19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjYpXSxyPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgbj1lLmNyZWF0ZUFjdGl2YXRlRmFjdG9yVXJsKHQuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JQcm92aWRlciIpLHQuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JUeXBlIikpO3QudHJpZ2dlcigibmF2aWdhdGUiLG4pfXZhciBpPXQuXztyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmsgaGVscCBqcy1iYWNrIiBkYXRhLXNlPSJiYWNrLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0ibWZhLmJhY2tUb0ZhY3RvcnMiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rIGhlbHAgZ290byBqcy1nb3RvIiBkYXRhLXNlPSJnb3RvLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0ibWZhLnNjYW5CYXJjb2RlIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgJyxjbGFzc05hbWU6ImF1dGgtZm9vdGVyIixldmVudHM6eyJjbGljayAuanMtYmFjayI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmFjaygpfSwiY2xpY2sgLmpzLWdvdG8iOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgZT1pLnBhcnRpYWwobix0aGlzLm9wdGlvbnMuYXBwU3RhdGUpO3RoaXMub3B0aW9ucy5hcHBTdGF0ZS51bnNldCgiZmFjdG9yQWN0aXZhdGlvblR5cGUiKSwicHVzaCIhPT10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JUeXBlIik/dGhpcy5tb2RlbC5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnByZXYoKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPWkuZmluZFdoZXJlKHQuZmFjdG9ycyx7ZmFjdG9yVHlwZToicHVzaCIscHJvdmlkZXI6Ik9LVEEifSk7cmV0dXJuIGUuZW5yb2xsKCl9KX0pLnRoZW4oZSk6dGhpcy5tb2RlbC5zdGFydFRyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR4LnJlc3VtZSgpfSkudGhlbihmdW5jdGlvbigpe3NldFRpbWVvdXQoZSl9KX19LGJhY2s6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5hcHBTdGF0ZS51bnNldCgiZmFjdG9yQWN0aXZhdGlvblR5cGUiKSx0Lm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJwcmV2TGluayIpP3RoaXMubW9kZWwuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5wcmV2KCl9KS50aGVuKGZ1bmN0aW9uKCl7dC5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIiwic2lnbmluL2Vucm9sbCIpfSk6dC5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIiwic2lnbmluL2Vucm9sbCIpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDY4OSksbig2OTEpLG4oNjkyKSxuKDY5Myksbig1MTQpLG4oNjI0KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXt2YXIgYT10LkhhbmRsZWJhcnMuY29tcGlsZSxsPXQuXyxjPXQuJCx1PXQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgIDxhIGhyZWY9IiMiIGRhdGEtc2U9Im5lZWRoZWxwIiBjbGFzcz0ibGluayBoZWxwIGpzLWhlbHAiPlx0ICAgICAge3tpMThuIGNvZGU9Im5lZWRoZWxwIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgICA8dWwgY2xhc3M9ImhlbHAtbGlua3MganMtaGVscC1saW5rcyI+XHQgICAgICAgIDxsaT5cdCAgICAgICAgPGEgaHJlZj0iIyIgZGF0YS1zZT0iZm9yZ290LXBhc3N3b3JkIiBjbGFzcz0ibGluayBqcy1mb3Jnb3QtcGFzc3dvcmQiPlx0ICAgICAgICB7e2kxOG4gY29kZT0iZm9yZ290cGFzc3dvcmQiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgICAgPC9hPlx0ICAgICAgICA8L2xpPlx0ICAgICAgICB7eyNpZiBmZWF0dXJlcy5zZWxmU2VydmljZVVubG9ja319XHQgICAgICAgICAgPGxpPlx0ICAgICAgICAgIDxhIGhyZWY9IiMiIGRhdGEtc2U9InVubG9jayIgY2xhc3M9ImxpbmsganMtdW5sb2NrIj5cdCAgICAgICAgICB7e2kxOG4gY29kZT0idW5sb2NrYWNjb3VudCIgYnVuZGxlPSJsb2dpbiJ9fVx0ICAgICAgICAgIDwvYT5cdCAgICAgICAgICA8L2xpPlx0ICAgICAgICB7ey9pZn19XHQgICAgICAgIHt7I2VhY2ggaGVscExpbmtzLmN1c3RvbX19XHQgICAgICAgICAgPGxpPlx0ICAgICAgICAgIDxhIGhyZWY9Int7aHJlZn19IiBjbGFzcz0ibGluayBqcy1jdXN0b20iPnt7dGV4dH19PC9hPjwvbGk+XHQgICAgICAgIHt7L2VhY2h9fVx0ICAgICAgICA8bGk+XHQgICAgICAgIDxhIGhyZWY9Int7aGVscExpbmtVcmx9fSIgZGF0YS1zZT0iaGVscC1saW5rIiBjbGFzcz0ibGluayBqcy1oZWxwLWxpbmsiIHRhcmdldD0iX2JsYW5rIj5cdCAgICAgICAge3tpMThuIGNvZGU9ImhlbHAiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgICAgPC9hPlx0ICAgICAgICA8L2xpPlx0ICAgICAgPC91bD5cdCAgICAnLGNsYXNzTmFtZToiYXV0aC1mb290ZXIiLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMuc3RhdGUsImNoYW5nZTplbmFibGVkIixmdW5jdGlvbih0LGUpe3RoaXMuJCgiOmxpbmsiKS50b2dnbGVDbGFzcygiby1mb3JtLWRpc2FibGVkIiwhZSl9KX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLnNldHRpbmdzLmdldCgiaGVscExpbmtzLmhlbHAiKTtyZXR1cm4gdD1lP2U6YSgie3tiYXNlVXJsfX0vaGVscC9sb2dpbiIpKHtiYXNlVXJsOnRoaXMuc2V0dGluZ3MuZ2V0KCJiYXNlVXJsIil9KSxsLmV4dGVuZCh0aGlzLnNldHRpbmdzLnRvSlNPTih7dmVyYm9zZTohMH0pLHtoZWxwTGlua1VybDp0fSl9LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLiQoIi5qcy1oZWxwLWxpbmtzIikuaGlkZSgpfSx0b2dnbGVMaW5rczpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy4kKCIuanMtaGVscC1saW5rcyIpLnNsaWRlVG9nZ2xlKDIwMCl9LGV2ZW50czp7ImNsaWNrIC5qcy1oZWxwIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5zdGF0ZS5nZXQoImVuYWJsZWQiKSYmdGhpcy50b2dnbGVMaW5rcyh0KX0sImNsaWNrIC5qcy1mb3Jnb3QtcGFzc3dvcmQiOmZ1bmN0aW9uKHQpe2lmKHQucHJldmVudERlZmF1bHQoKSx0aGlzLnN0YXRlLmdldCgiZW5hYmxlZCIpKXt2YXIgZT10aGlzLnNldHRpbmdzLmdldCgiaGVscExpbmtzLmZvcmdvdFBhc3N3b3JkIik7ZT9vLnJlZGlyZWN0KGUpOnRoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsInNpZ25pbi9mb3Jnb3QtcGFzc3dvcmQiKX19LCJjbGljayAuanMtdW5sb2NrIjpmdW5jdGlvbih0KXtpZih0LnByZXZlbnREZWZhdWx0KCksdGhpcy5zdGF0ZS5nZXQoImVuYWJsZWQiKSl7dmFyIGU9dGhpcy5zZXR0aW5ncy5nZXQoImhlbHBMaW5rcy51bmxvY2siKTtlP28ucmVkaXJlY3QoZSk6dGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIiwic2lnbmluL3VubG9jayIpfX19fSk7cmV0dXJuIHMuZXh0ZW5kKHtjbGFzc05hbWU6InByaW1hcnktYXV0aCIsc3RhdGU6e2VuYWJsZWQ6ITB9LFZpZXc6ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbih0KXt2YXIgZTt0LmFwcFN0YXRlLnVuc2V0KCJ1c2VybmFtZSIpLHRoaXMubW9kZWw9bmV3IHIoe211bHRpT3B0aW9uYWxGYWN0b3JFbnJvbGw6dC5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLm11bHRpT3B0aW9uYWxGYWN0b3JFbnJvbGwiKSxzZXR0aW5nczp0LnNldHRpbmdzLGFwcFN0YXRlOnQuYXBwU3RhdGV9LHtwYXJzZTohMH0pLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYWRkTGlzdGVuZXJzKCksdC5zZXR0aW5ncy5nZXQoImhhc0NvbmZpZ3VyZWRCdXR0b25zIikmJnRoaXMuYWRkKG4se3ByZXBlbmQ6dC5zZXR0aW5ncy5nZXQoInNvY2lhbEF1dGhQb3NpdGlvblRvcCIpfSksdGhpcy5hZGQobmV3IHUodGhpcy50b0pTT04oe2FwcFN0YXRlOnQuYXBwU3RhdGV9KSkpLHQuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5yZWdpc3RyYXRpb24iKSYmdGhpcy5hZGQobmV3IGkoe3NldHRpbmdzOnRoaXMuc2V0dGluZ3MsYXBwU3RhdGU6dC5hcHBTdGF0ZX0pKSxlPXRoaXMubW9kZWwuZ2V0KCJ1c2VybmFtZSIpLGUmJnRoaXMub3B0aW9ucy5hcHBTdGF0ZS5zZXQoInVzZXJuYW1lIixlKX0sZXZlbnRzOnsiZm9jdXNvdXQgaW5wdXRbbmFtZT11c2VybmFtZV0iOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmFwcFN0YXRlLnNldCgidXNlcm5hbWUiLHRoaXMubW9kZWwuZ2V0KCJ1c2VybmFtZSIpKX0sImZvY3VzaW4gaW5wdXQiOmZ1bmN0aW9uKHQpe2ModC50YXJnZXQucGFyZW50RWxlbWVudCkuYWRkQ2xhc3MoImZvY3VzZWQtaW5wdXQiKX0sImZvY3Vzb3V0IGlucHV0IjpmdW5jdGlvbih0KXtjKHQudGFyZ2V0LnBhcmVudEVsZW1lbnQpLnJlbW92ZUNsYXNzKCJmb2N1c2VkLWlucHV0Iil9fSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6dXNlcm5hbWUiLGZ1bmN0aW9uKHQsZSl7ZXx8dGhpcy5vcHRpb25zLmFwcFN0YXRlLnNldCgidXNlcm5hbWUiLCIiKX0pLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwic2F2ZSIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlLnNldCgiZW5hYmxlZCIsITEpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJlcnJvciIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlLnNldCgiZW5hYmxlZCIsITApfSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjQ4KSxuKDY5MCldLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuXztyZXR1cm4gdC5Gb3JtLmV4dGVuZCh7Y2xhc3NOYW1lOiJwcmltYXJ5LWF1dGgtZm9ybSIsbm9DYW5jZWxCdXR0b246ITAsc2F2ZTppLnBhcnRpYWwodC5sbw==", "base64"));
  res.write(new Buffer("YywicHJpbWFyeWF1dGguc3VibWl0IiwibG9naW4iKSxzYXZlSWQ6Im9rdGEtc2lnbmluLXN1Ym1pdCIsbGF5b3V0OiJvLWZvcm0tdGhlbWUiLHRpdGxlOmZ1bmN0aW9uKCl7dmFyIGU9dC5sb2MoInByaW1hcnlhdXRoLnRpdGxlIiwibG9naW4iKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5nZXQoInNvY2lhbEF1dGhQb3NpdGlvblRvcCIpJiYoZT0iIiksZX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcywic2F2ZSIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9e3VzZXJuYW1lOnRoaXMubW9kZWwuZ2V0KCJ1c2VybmFtZSIpLHBhc3N3b3JkOnRoaXMubW9kZWwuZ2V0KCJwYXNzd29yZCIpfTt0aGlzLnNldHRpbmdzLnByb2Nlc3NDcmVkcyhlKS50aGVuKGZ1bmN0aW9uKCl7aWYodC5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLmRldmljZUZpbmdlcnByaW50aW5nIikpcmV0dXJuIG4uZ2VuZXJhdGVEZXZpY2VGaW5nZXJwcmludCh0LnNldHRpbmdzLmdldCgiYmFzZVVybCIpLHQuJGVsKS50aGVuKGZ1bmN0aW9uKGUpe3QubW9kZWwuc2V0KCJkZXZpY2VGaW5nZXJwcmludCIsZSl9KS5mYWlsKGZ1bmN0aW9uKCl7fSl9KS50aGVuKGkuYmluZCh0aGlzLm1vZGVsLnNhdmUsdGhpcy5tb2RlbCkpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLnN0YXRlLCJjaGFuZ2U6ZW5hYmxlZCIsZnVuY3Rpb24odCxlKXtlP3RoaXMuZW5hYmxlKCk6dGhpcy5kaXNhYmxlKCl9KX0saW5wdXRzOmZ1bmN0aW9uIHIoKXt2YXIgcj1be2xhYmVsOiExLCJsYWJlbC10b3AiOiEwLHBsYWNlaG9sZGVyOnQubG9jKCJwcmltYXJ5YXV0aC51c2VybmFtZS5wbGFjZWhvbGRlciIsImxvZ2luIiksbmFtZToidXNlcm5hbWUiLGlucHV0OmUsaW5wdXRJZDoib2t0YS1zaWduaW4tdXNlcm5hbWUiLHR5cGU6InRleHQiLHBhcmFtczp7aW5uZXJUb29sdGlwOnt0aXRsZTp0LmxvYygicHJpbWFyeWF1dGgudXNlcm5hbWUucGxhY2Vob2xkZXIiLCJsb2dpbiIpLHRleHQ6dC5sb2MoInByaW1hcnlhdXRoLnVzZXJuYW1lLnRvb2x0aXAiLCJsb2dpbiIpfSxpY29uOiJwZXJzb24tMTYtZ3JheSJ9fSx7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dC5sb2MoInByaW1hcnlhdXRoLnBhc3N3b3JkLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJwYXNzd29yZCIsaW5wdXQ6ZSxpbnB1dElkOiJva3RhLXNpZ25pbi1wYXNzd29yZCIsdHlwZToicGFzc3dvcmQiLHBhcmFtczp7aW5uZXJUb29sdGlwOnt0aXRsZTp0LmxvYygicHJpbWFyeWF1dGgucGFzc3dvcmQucGxhY2Vob2xkZXIiLCJsb2dpbiIpLHRleHQ6dC5sb2MoInByaW1hcnlhdXRoLnBhc3N3b3JkLnRvb2x0aXAiLCJsb2dpbiIpfSxpY29uOiJyZW1vdGUtbG9jay0xNiJ9fV07cmV0dXJuIHRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5yZW1lbWJlck1lIikmJnIucHVzaCh7bGFiZWw6ITEscGxhY2Vob2xkZXI6dC5sb2MoInJlbWVtYmVyIiwibG9naW4iKSxuYW1lOiJyZW1lbWJlciIsdHlwZToiY2hlY2tib3giLCJsYWJlbC10b3AiOiEwLGNsYXNzTmFtZToibWFyZ2luLWJ0bS0wIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6cmVtZW1iZXIiLGZ1bmN0aW9uKHQsZSl7dGhpcy4kKCI6Y2hlY2tib3giKS5wcm9wKCJjaGVja2VkIixlKS50cmlnZ2VyKCJ1cGRhdGVTdGF0ZSIpfSl9fSkscn0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLmdldCgidXNlcm5hbWUiKT90aGlzLmdldElucHV0cygpLnRvQXJyYXkoKVsxXS5mb2N1cygpOnRoaXMuZ2V0SW5wdXRzKCkuZmlyc3QoKS5mb2N1cygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzQ2KSxuKDMzMSldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm57Z2VuZXJhdGVEZXZpY2VGaW5nZXJwcmludDpmdW5jdGlvbihuLGkpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2luZG93cyBwaG9uZXxpZW1vYmlsZXx3cGRlc2t0b3AvaSl9ZnVuY3Rpb24gbygpe3Uub2ZmKCksdS5yZW1vdmUoKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsYSwhMSl9ZnVuY3Rpb24gcyh0KXtvKCksYy5yZWplY3QodCl9ZnVuY3Rpb24gYSh0KXtpZighdHx8IXQuZGF0YXx8dC5vcmlnaW4hPW4pcmV0dXJuIHZvaWQgcygibm8gZGF0YSIpO3RyeXt2YXIgZT1KU09OLnBhcnNlKHQuZGF0YSk7ZSYmIkZpbmdlcnByaW50U2VydmljZVJlYWR5Ij09PWUudHlwZT9sKHt0eXBlOiJHZXRGaW5nZXJwcmludCJ9KTplJiYiRmluZ2VycHJpbnRBdmFpbGFibGUiPT09ZS50eXBlPyhvKCksYy5yZXNvbHZlKGUuZmluZ2VycHJpbnQpKTpzKCJubyBkYXRhIil9Y2F0Y2goaSl7fX1mdW5jdGlvbiBsKHQpe3ZhciBlPXVbMF0uY29udGVudFdpbmRvdztlJiZlLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHQpLG4pfWlmKCFuYXZpZ2F0b3IudXNlckFnZW50KXJldHVybiB0LnJlamVjdCgidXNlciBhZ2VudCBpcyBub3QgZGVmaW5lZCIpO2lmKHIoKSlyZXR1cm4gdC5yZWplY3QoImRldmljZSBmaW5nZXJwcmludCBpcyBub3Qgc3VwcG9ydGVkIG9uIFdpbmRvd3MgcGhvbmVzIik7dmFyIGM9dC5kZWZlcigpLHU9ZSgiPGlmcmFtZT4iLHtzdHlsZToiZGlzcGxheTogbm9uZTsifSk7cmV0dXJuIHUuYXBwZW5kVG8oaSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGEsITEpLHUuYXR0cigic3JjIixuKyIvYXV0aC9zZXJ2aWNlcy9kZXZpY2VmaW5nZXJwcmludCIpLGMucHJvbWlzZX19fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KV0scj1mdW5jdGlvbih0KXt2YXIgZT10Ll8sbj10LnRwbCgnPGRpdiBjbGFzcz0iYXV0aC1kaXZpZGVyIj5cdCAgICAgIDxzcGFuIGNsYXNzPSJhdXRoLWRpdmlkZXItdGV4dCI+e3t0ZXh0fX08L3NwYW4+XHQgICAgPC9kaXY+JyksaT10LnRwbCgnPGgyIGRhdGEtc2U9Im8tZm9ybS1oZWFkIiBjbGFzcz0ib2t0YS1mb3JtLXRpdGxlIG8tZm9ybS1oZWFkIj57e3RpdGxlfX08L2gyPicpO3JldHVybiB0LlZpZXcuZXh0ZW5kKHtjbGFzc05hbWU6InByaW1hcnktYXV0aC1jb250YWluZXIiLGNoaWxkcmVuOmZ1bmN0aW9uIHIoKXt2YXIgcj1bXSxvPXRoaXMuc2V0dGluZ3MuZ2V0KCJjb25maWd1cmVkQnV0dG9ucyIpLHM9bih7dGV4dDp0LmxvYygic29jaWFsYXV0aC5kaXZpZGVyLnRleHQiLCJsb2dpbiIpfSk7cmV0dXJuIGUuZWFjaChvLGZ1bmN0aW9uKHQpe3IucHVzaCh0aGlzLl9jcmVhdGVCdXR0b24odCkpfSx0aGlzKSx0aGlzLnNldHRpbmdzLmdldCgic29jaWFsQXV0aFBvc2l0aW9uVG9wIik/KHIudW5zaGlmdChpKHt0aXRsZTp0LmxvYygicHJpbWFyeWF1dGgudGl0bGUiLCJsb2dpbiIpfSkpLHIucHVzaChzKSk6ci51bnNoaWZ0KHMpLHJ9LF9jcmVhdGVCdXR0b246ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY3JlYXRlQnV0dG9uKHthdHRyaWJ1dGVzOnsiZGF0YS1zZSI6ZS5kYXRhQXR0cn0sY2xhc3NOYW1lOmUuY2xhc3NOYW1lLHRpdGxlOmUudGl0bGUsY2xpY2s6ZS5jbGlja30pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KV0scj1mdW5jdGlvbih0KXtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgICA8ZGl2IGNsYXNzPSJjb250ZW50Ij5cdCAgICAgICAgICA8c3BhbiBjbGFzcz0icmVnaXN0cmF0aW9uLWxhYmVsIj57e2xhYmVsfX08L3NwYW4+XHQgICAgICAgICAgPGEgdGl0bGU9Int7dGV4dH19IiBhcmlhLWxhYmVsPSJ7e3RleHR9fSIgY2xhc3M9InJlZ2lzdHJhdGlvbi1saW5rIiBocmVmPSIjIj57e3RleHR9fTwvYT5cdCAgICAgICAgPC9kaXY+XHQgICAgICAgICcsY2xhc3NOYW1lOiJyZWdpc3RyYXRpb24tY29udGFpbmVyIixldmVudHM6eyJjbGljayBhLnJlZ2lzdHJhdGlvbi1saW5rIjoiaGFuZGxlQ2xpY2tFdmVudCJ9LGhhbmRsZUNsaWNrRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNldHRpbmdzLmdldCgicmVnaXN0cmF0aW9uLmNsaWNrIik7cmV0dXJuIHQmJnQoKSwhMX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIGU9e2xhYmVsOnQubG9jKCJyZWdpc3RyYXRpb24uc2lnbnVwLmxhYmVsIiwibG9naW4iKSx0ZXh0OnQubG9jKCJyZWdpc3RyYXRpb24uc2lnbnVwLnRleHQiLCJsb2dpbiIpfTtyZXR1cm4gZX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjUpLG4oNjUwKSxuKDYyOCldLHI9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dC5fO3JldHVybiBlLmV4dGVuZCh7cHJvcHM6ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMuc2V0dGluZ3MmJnRoaXMuc2V0dGluZ3MuZ2V0KCJ1c2VybmFtZSIpLG89dGhpcy5zZXR0aW5ncyYmdGhpcy5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLnJlbWVtYmVyTWUiKSxzPW4uZ2V0Q29va2llVXNlcm5hbWUoKSxhPSExO3JldHVybiBpPyhlPWksYT1vJiZlPT09cyk6byYmcyYmKGU9cyxhPSEwKSx7dXNlcm5hbWU6e3R5cGU6InN0cmluZyIsdmFsaWRhdGU6ZnVuY3Rpb24oZSl7aWYoci5pc0VtcHR5KGUpKXJldHVybiB0LmxvYygiZXJyb3IudXNlcm5hbWUucmVxdWlyZWQiLCJsb2dpbiIpfSx2YWx1ZTplfSxsYXN0VXNlcm5hbWU6WyJzdHJpbmciLCExLHNdLHBhc3N3b3JkOnt0eXBlOiJzdHJpbmciLHZhbGlkYXRlOmZ1bmN0aW9uKGUpe2lmKHIuaXNFbXB0eShlKSlyZXR1cm4gdC5sb2MoImVycm9yLnBhc3N3b3JkLnJlcXVpcmVkIiwibG9naW4iKX19LGNvbnRleHQ6WyJvYmplY3QiLCExXSxyZW1lbWJlcjpbImJvb2xlYW4iLCEwLGFdLG11bHRpT3B0aW9uYWxGYWN0b3JFbnJvbGw6WyJib29sZWFuIiwhMF19fSxsb2NhbDp7ZGV2aWNlRmluZ2VycHJpbnQ6WyJzdHJpbmciLCExXX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oZSl7dGhpcy5zZXR0aW5ncz1lJiZlLnNldHRpbmdzLHRoaXMuYXBwU3RhdGU9ZSYmZS5hcHBTdGF0ZSx0Lk1vZGVsLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMsImNoYW5nZTp1c2VybmFtZSIsZnVuY3Rpb24odCxlKXt0aGlzLnNldCh7cmVtZW1iZXI6ZT09PXRoaXMuZ2V0KCJsYXN0VXNlcm5hbWUiKX0pfSl9LHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiByLm9taXQodCxbInNldHRpbmdzIiwiYXBwU3RhdGUiXSl9LHNhdmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNldHRpbmdzLnRyYW5zZm9ybVVzZXJuYW1lKHRoaXMuZ2V0KCJ1c2VybmFtZSIpLGkuUFJJTUFSWV9BVVRIKSxlPXRoaXMuZ2V0KCJwYXNzd29yZCIpLG89dGhpcy5nZXQoInJlbWVtYmVyIikscz10aGlzLmdldCgibGFzdFVzZXJuYW1lIiksYT10aGlzLmdldCgibXVsdGlPcHRpb25hbEZhY3RvckVucm9sbCIpLGw9dGhpcy5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLmRldmljZUZpbmdlcnByaW50aW5nIiksYz10aGlzLnNldHRpbmdzLmdldCgiZmVhdHVyZXMucmVtZW1iZXJNZSIpO2MmJihvfHxzIT09dD9vJiZuLnNldFVzZXJuYW1lQ29va2llKHQpOm4ucmVtb3ZlVXNlcm5hbWVDb29raWUoKSksdGhpcy50cmlnZ2VyKCJzYXZlIiksdGhpcy5hcHBTdGF0ZS50cmlnZ2VyKCJsb2FkaW5nIiwhMCk7dmFyIHUsZD17dXNlcm5hbWU6dCxwYXNzd29yZDplLG9wdGlvbnM6e3dhcm5CZWZvcmVQYXNzd29yZEV4cGlyZWQ6ITAsbXVsdGlPcHRpb25hbEZhY3RvckVucm9sbDphfX07cmV0dXJuIHU9dGhpcy5hcHBTdGF0ZS5nZXQoImlzVW5hdXRoZW50aWNhdGVkIik/dGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYXBwU3RhdGUuc2V0dGluZ3MuYXV0aENsaWVudDtyZXR1cm4gdGhpcy5kb1ByaW1hcnlBdXRoKGUsbCxkLHQuYXV0aGVudGljYXRlKX0pOnRoaXMuc3RhcnRUcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb1ByaW1hcnlBdXRoKHQsbCxkLHIuYmluZCh0LnNpZ25Jbix0KSl9KSx1LmZhaWwoci5iaW5kKGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJlcnJvciIpLHRoaXMuYXBwU3RhdGUudHJpZ2dlcigicmVtb3ZlTG9hZGluZyIpLG4ucmVtb3ZlVXNlcm5hbWVDb29raWUoKX0sdGhpcykpLmZpbihyLmJpbmQoZnVuY3Rpb24oKXt0aGlzLmFwcFN0YXRlLnRyaWdnZXIoImxvYWRpbmciLCExKX0sdGhpcykpfSxkb1ByaW1hcnlBdXRoOmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBlJiYodC5vcHRpb25zLmhlYWRlcnNbIlgtRGV2aWNlLUZpbmdlcnByaW50Il09dGhpcy5nZXQoImRldmljZUZpbmdlcnByaW50IikpLGkobikuZmluKGZ1bmN0aW9uKCl7ZSYmZGVsZXRlIHQub3B0aW9ucy5oZWFkZXJzWyJYLURldmljZS1GaW5nZXJwcmludCJdfSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDYyNiksbig2ODMpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rIGhlbHAganMtYmFjayIgZGF0YS1zZT0iYmFjay1saW5rIj5cdCAgICAgICAge3tpMThuIGNvZGU9Im9mb3JtLmJhY2siIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAnLGNsYXNzTmFtZToiYXV0aC1mb290ZXIiLGV2ZW50czp7ImNsaWNrIC5qcy1iYWNrIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5iYWNrKCl9fSxiYWNrOmZ1bmN0aW9uKCl7dmFyIHQ9bi5jcmVhdGVBY3RpdmF0ZUZhY3RvclVybCh0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JQcm92aWRlciIpLCJwdXNoIiwibWFudWFsIik7dGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIix0KX19KTtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiYWN0aXZhdGUtcHVzaCIsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6e2ZhY3RvcklkOlsic3RyaW5nIiwhMCx0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJhY3RpdmF0ZWRGYWN0b3JJZCIpXSxwYXNzQ29kZTpbInN0cmluZyIsITBdfSxsb2NhbDp7X19mYWN0b3JUeXBlX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlXSxfX3Byb3ZpZGVyX186WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5wcm92aWRlcl19LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFjdGl2YXRlKHtwYXNzQ29kZTp0aGlzLmdldCgicGFzc0NvZGUiKX0pfSl9fX0sRm9ybTppLEZvb3RlcjpyfSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjIyKSxuKDYyOCksbig2MjMpLG4oNjk2KSxuKDY0MSksbig2OTcpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzLGEpe3ZhciBsPXQuXztyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToicGFzc3dvcmQtZXhwaXJlZCIsTW9kZWw6e3Byb3BzOntvbGRQYXNzd29yZDpbInN0cmluZyIsITBdLG5ld1Bhc3N3b3JkOlsic3RyaW5nIiwhMF0sY29uZmlybVBhc3N3b3JkOlsic3RyaW5nIiwhMF19LHZhbGlkYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHIudmFsaWRhdGVQYXNzd29yZE1hdGNoKHRoaXMpfSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFuZ2VQYXNzd29yZCh7b2xkUGFzc3dvcmQ6dGhpcy5nZXQoIm9sZFBhc3N3b3JkIiksbmV3UGFzc3dvcmQ6dGhpcy5nZXQoIm5ld1Bhc3N3b3JkIil9KX0pfX0sRm9ybTp7c2F2ZTpsLnBhcnRpYWwodC5sb2MsInBhc3N3b3JkLmV4cGlyZWQuc3VibWl0IiwibG9naW4iKSx0aXRsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImlzUHdkRXhwaXJpbmdTb29uIiksbj10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJwYXNzd29yZEV4cGlyZURheXMiKTtyZXR1cm4gZSYmbj4wP3QubG9jKCJwYXNzd29yZC5leHBpcmluZy50aXRsZSIsImxvZ2luIixbbl0pOmUmJjA9PT1uP3QubG9jKCJwYXNzd29yZC5leHBpcmluZy50b2RheSIsImxvZ2luIik6ZT90LmxvYygicGFzc3dvcmQuZXhwaXJpbmcuc29vbiIsImxvZ2luIik6dC5sb2MoInBhc3N3b3JkLmV4cGlyZWQudGl0bGUiLCJsb2dpbiIpfSxzdWJ0aXRsZTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImlzUHdkRXhwaXJpbmdTb29uIikpcmV0dXJuIHQubG9jKCJwYXNzd29yZC5leHBpcmluZy5zdWJ0aXRsZSIsImxvZ2luIik7dmFyIGU9dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicG9saWN5Iik7aWYoZSlyZXR1cm4gby5nZXRQYXNzd29yZENvbXBsZXhpdHlEZXNjcmlwdGlvbihlKX0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuW2kuSW5wdXQoeyJsYWJlbC10b3AiOiEwLGxhYmVsOiExLHBsYWNlaG9sZGVyOnQubG9jKCJwYXNzd29yZC5vbGRQYXNzd29yZC5wbGFjZWhvbGRlciIsImxvZ2luIiksbmFtZToib2xkUGFzc3dvcmQiLGlucHV0OmEsdHlwZToicGFzc3dvcmQiLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJwYXNzd29yZC5vbGRQYXNzd29yZC50b29sdGlwIiwibG9naW4iKSxpY29uOiJjcmVkZW50aWFscy0xNiJ9fSksaS5EaXZpZGVyKCksaS5JbnB1dCh7ImxhYmVsLXRvcCI6ITAsbGFiZWw6ITEscGxhY2Vob2xkZXI6dC5sb2MoInBhc3N3b3JkLm5ld1Bhc3N3b3JkLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJuZXdQYXNzd29yZCIsaW5wdXQ6YSx0eXBlOiJwYXNzd29yZCIscGFyYW1zOntpbm5lclRvb2x0aXA6dC5sb2MoInBhc3N3b3JkLm5ld1Bhc3N3b3JkLnRvb2x0aXAiLCJsb2dpbiIpLGljb246ImNyZWRlbnRpYWxzLTE2In19KSxpLklucHV0KHsibGFiZWwtdG9wIjohMCxsYWJlbDohMSxwbGFjZWhvbGRlcjp0LmxvYygicGFzc3dvcmQuY29uZmlybVBhc3N3b3JkLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJjb25maXJtUGFzc3dvcmQiLGlucHV0OmEsdHlwZToicGFzc3dvcmQiLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJwYXNzd29yZC5jb25maXJtUGFzc3dvcmQudG9vbHRpcCIsImxvZ2luIiksaWNvbjoiY3JlZGVudGlhbHMtMTYifX0pXX19LEZvb3RlcjpzLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMuZm9ybSwic2F2ZSIsZnVuY3Rpb24oKXt2YXIgdD17dXNlcm5hbWU6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlckVtYWlsIikscGFzc3dvcmQ6dGhpcy5tb2RlbC5nZXQoIm5ld1Bhc3N3b3JkIil9O3RoaXMuc2V0dGluZ3MucHJvY2Vzc0NyZWRzKHQpLnRoZW4obC5iaW5kKHRoaXMubW9kZWwuc2F2ZSx0aGlzLm1vZGVsKSl9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyldLHI9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUudmFsaWRhdGVVc2VybmFtZT1mdW5jdGlvbihlKXt2YXIgbj1lLmdldCgidXNlcm5hbWUiKTtpZihuJiZuLmxlbmd0aD4yNTYpcmV0dXJue3VzZXJuYW1lOnQubG9jKCJtb2RlbC52YWxpZGF0aW9uLmZpZWxkLnVzZXJuYW1lIiwibG9naW4iKX19LGUudmFsaWRhdGVQYXNzd29yZE1hdGNoPWZ1bmN0aW9uKGUpe2lmKGUuZ2V0KCJuZXdQYXNzd29yZCIpIT09ZS5nZXQoImNvbmZpcm1QYXNzd29yZCIpKXJldHVybntjb25maXJtUGFzc3dvcmQ6dC5sb2MoInBhc3N3b3JkLmVycm9yLm1hdGNoIiwibG9naW4iKX19LGV9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjI4KSxuKDUxNCldLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgICB7eyNpZiBwYXNzd29yZFdhcm59fVx0ICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluayBoZWxwIGpzLXNraXAiIGRhdGEtc2U9InNraXAtbGluayI+XHQgICAgICAgICAge3tpMThuIGNvZGU9InBhc3N3b3JkLmV4cGlyaW5nLmxhdGVyIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICAgIDwvYT5cdCAgICAgIHt7L2lmfX1cdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rIGhlbHAgZ290byBqcy1zaWdub3V0IiBkYXRhLXNlPSJzaWdub3V0LWxpbmsiPnt7aTE4biBjb2RlPSJzaWdub3V0IiBidW5kbGU9ImxvZ2luIn19PC9hPlx0ICAgICcsY2xhc3NOYW1lOiJhdXRoLWZvb3RlciBjbGVhcmZpeCIsZXZlbnRzOnsiY2xpY2sgLmpzLXNpZ25vdXQiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgaT10aGlzO3RoaXMubW9kZWwuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5jYW5jZWwoKX0pLnRoZW4oZnVuY3Rpb24oKXtpLnNldHRpbmdzLmdldCgic2lnbk91dExpbmsiKT9uLnJlZGlyZWN0KGkuc2V0dGluZ3MuZ2V0KCJzaWduT3V0TGluayIpKTooaS5zdGF0ZS5zZXQoIm5hdmlnYXRlRGlyIixlLkRJUkVDVElPTl9CQUNLKSxpLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCIiKSl9KX0sImNsaWNrIC5qcy1za2lwIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5tb2RlbC5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNraXAoKX0pfX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3Bhc3N3b3JkV2Fybjp0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc1B3ZEV4cGlyaW5nU29vbiIpfX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpLG4oNjIzKSxuKDY5Nyksbig1MTQpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89dC5fO3JldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJjdXN0b20tcGFzc3dvcmQtZXhwaXJlZCIsTW9kZWw6e30sRm9ybTp7bm9CdXR0b25CYXI6ITAsdGl0bGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJpc1B3ZEV4cGlyaW5nU29vbiIpLG49dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicGFzc3dvcmRFeHBpcmVEYXlzIik7cmV0dXJuIGUmJm4+MD90LmxvYygicGFzc3dvcmQuZXhwaXJpbmcudGl0bGUiLCJsb2dpbiIsW25dKTplJiYwPT09bj90LmxvYygicGFzc3dvcmQuZXhwaXJpbmcudG9kYXkiLCJsb2dpbiIpOmU/dC5sb2MoInBhc3N3b3JkLmV4cGlyaW5nLnNvb24iLCJsb2dpbiIpOnQubG9jKCJwYXNzd29yZC5leHBpcmVkLnRpdGxlIiwibG9naW4iKX0sc3VidGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiaXNQd2RFeHBpcmluZ1Nvb24iKT90LmxvYygicGFzc3dvcmQuZXhwaXJpbmcuc3VidGl0bGUiLCJsb2dpbiIpKyIgIit0LmxvYygicGFzc3dvcmQuZXhwaXJlZC5jdXN0b20uc3VidGl0bGUiLCJsb2dpbiIpOnQubG9jKCJwYXNzd29yZC5leHBpcmVkLmN1c3RvbS5zdWJ0aXRsZSIsImxvZ2luIil9LGZvcm1DaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltuLkJ1dHRvbih7dGl0bGU6by5wYXJ0aWFsKHQubG9jLCJwYXNzd29yZC5leHBpcmVkLmN1c3RvbS5zdWJtaXQiLCJsb2dpbiIsW3RoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInBhc3N3b3JkRXhwaXJlZFdlYnNpdGVOYW1lIildKSxjbGFzc05hbWU6ImJ1dHRvbiBidXR0b24tcHJpbWFyeSBidXR0b24td2lkZSIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJjdXN0b20tYnV0dG9uIn0sY2xpY2s6ZnVuY3Rpb24oKXtyLnJlZGlyZWN0KHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInBhc3N3b3JkRXhwaXJlZExpbmtVcmwiKSl9fSldfX0sRm9vdGVyOml9KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpLG4oNjI4KSxuKDYyMyksbig2OTYpLG4oNzAwKSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9dC5fLGw9JzxkaXYgY2xhc3M9Im9rdGEtZm9ybS1pbmZvYm94LWVycm9yIGluZm9ib3ggaW5mb2JveC1lcnJvciIgcm9sZT0iYWxlcnQiPlx0ICAgIDxzcGFuIGNsYXNzPSJpY29uIGVycm9yLTE2Ij48L3NwYW4+XHQgICAgPHA+e3tpMThuIGNvZGU9InBhc3N3b3JkLmZvcmdvdC5ub0ZhY3RvcnNFbmFibGVkIiBidW5kbGU9ImxvZ2luIn19PC9wPlx0ICA8L2Rpdj4nLGM9dC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmsgaGVscCBqcy1iYWNrIiBkYXRhLXNlPSJiYWNrLWxpbmsiPlx0ICAgICAgICB7e2kxOG4gY29kZT0iZ29iYWNrIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgICB7eyNpZiBoZWxwU3VwcG9ydE51bWJlcn19XHQgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluayBnb3RvIGpzLWNvbnRhY3Qtc3VwcG9ydCI+XHQgICAgICAgIHt7aTE4biBjb2RlPSJtZmEubm9BY2Nlc3NUb0VtYWlsIiBidW5kbGU9ImxvZ2luIn19XHQgICAgICA8L2E+XHQgICAgICB7ey9pZn19XHQgICAgJyxjbGFzc05hbWU6ImF1dGgtZm9vdGVyIixldmVudHM6eyJjbGljayAuanMtYmFjayI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmFjaygpfSwiY2xpY2sgLmpzLWNvbnRhY3Qtc3VwcG9ydCI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc3RhdGUudHJpZ2dlcigiY29udGFjdFN1cHBvcnQiKSx0aGlzLiQoIi5qcy1jb250YWN0LXN1cHBvcnQiKS5oaWRlKCl9fSxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5waWNrKCJoZWxwU3VwcG9ydE51bWJlciIpfSxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZS5zZXQo", "base64"));
  res.write(new Buffer("Im5hdmlnYXRlRGlyIixuLkRJUkVDVElPTl9CQUNLKSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCIiKX19KTtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToiZm9yZ290LXBhc3N3b3JkIixNb2RlbDp7cHJvcHM6e3VzZXJuYW1lOlsic3RyaW5nIiwhMF0sZmFjdG9yVHlwZTpbInN0cmluZyIsITBdfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3JldHVybiByLnZhbGlkYXRlVXNlcm5hbWUodGhpcyl9LHNhdmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3RhcnRUcmFuc2FjdGlvbihmdW5jdGlvbihlKXsKCXJldHVybiBlLmZvcmdvdFBhc3N3b3JkKHt1c2VybmFtZTp0LnNldHRpbmdzLnRyYW5zZm9ybVVzZXJuYW1lKHQuZ2V0KCJ1c2VybmFtZSIpLG4uRk9SR09UX1BBU1NXT1JEKSxmYWN0b3JUeXBlOnQuZ2V0KCJmYWN0b3JUeXBlIil9KX0pLmZhaWwoZnVuY3Rpb24oKXt9KX19LEZvcm06e25vQnV0dG9uQmFyOiEwLHRpdGxlOmEucGFydGlhbCh0LmxvYywicGFzc3dvcmQucmVzZXQiLCJsb2dpbiIpLGZvcm1DaGlsZHJlbjpmdW5jdGlvbiB1KCl7dmFyIGU9dGhpcy5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLnNtc1JlY292ZXJ5Iikscj10aGlzLnNldHRpbmdzLmdldCgiZmVhdHVyZXMuY2FsbFJlY292ZXJ5Iiksbz10aGlzLnNldHRpbmdzLmdldCgiZmVhdHVyZXMuZW1haWxSZWNvdmVyeSIpLGE9IShlfHxyfHxvKSx1PVtdO3JldHVybiBhP3RoaXMuYWRkKGwsIi5vLWZvcm0tZXJyb3ItY29udGFpbmVyIik6KHUucHVzaChpLklucHV0KHtwbGFjZWhvbGRlcjp0LmxvYygicGFzc3dvcmQuZm9yZ290LmVtYWlsLm9yLnVzZXJuYW1lLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJ1c2VybmFtZSIsaW5wdXQ6cyx0eXBlOiJ0ZXh0IixwYXJhbXM6e2lubmVyVG9vbHRpcDp0LmxvYygicGFzc3dvcmQuZm9yZ290LmVtYWlsLm9yLnVzZXJuYW1lLnRvb2x0aXAiLCJsb2dpbiIpLGljb246InBlcnNvbi0xNi1ncmF5In19KSksKGV8fHIpJiZ1LnB1c2goaS5WaWV3KHtWaWV3OnQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtb2JpbGUtcmVjb3ZlcnktaGludCI+XHQgICAgICAgICAgICAgICAgICAgIHt7aTE4biBjb2RlPSJyZWNvdmVyeS5tb2JpbGUuaGludCIgYnVuZGxlPSJsb2dpbiIgYXJndW1lbnRzPSJtb2JpbGVGYWN0b3JzIn19XHQgICAgICAgICAgICAgICAgICA8L3A+JyxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gbj1lJiZyP3QubG9jKCJyZWNvdmVyeS5zbXNPckNhbGwiKTpyP3QubG9jKCJyZWNvdmVyeS5jYWxsIik6dC5sb2MoInJlY292ZXJ5LnNtcyIpLHttb2JpbGVGYWN0b3JzOm59fX0pfSkpLGUmJih0aGlzLiRlbC5hZGRDbGFzcygiZm9yZ290LXBhc3N3b3JkLXNtcy1lbmFibGVkIiksdS5wdXNoKHRoaXMuY3JlYXRlUmVjb3Zlcnk=", "base64"));
  res.write(new Buffer("RmFjdG9yQnV0dG9uKCJzbXMtYnV0dG9uIiwicGFzc3dvcmQuZm9yZ290LnNlbmRUZXh0IixuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX1NNUyx0aGlzKSksdGhpcy5zZXREZWZhdWx0RmFjdG9yVHlwZShuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX1NNUykpLHImJih0aGlzLiRlbC5hZGRDbGFzcygiZm9yZ290LXBhc3N3b3JkLWNhbGwtZW5hYmxlZCIpLHUucHVzaCh0aGlzLmNyZWF0ZVJlY292ZXJ5RmFjdG9yQnV0dG9uKCJjYWxsLWJ1dHRvbiIsInBhc3N3b3JkLmZvcmdvdC5jYWxsIixuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX0NBTEwsdGhpcykpLHRoaXMuc2V0RGVmYXVsdEZhY3RvclR5cGUobi5SRUNPVkVSWV9GQUNUT1JfVFlQRV9DQUxMKSksbyYmKHRoaXMuJGVsLmFkZENsYXNzKCJmb3Jnb3QtcGFzc3dvcmQtZW1haWwtZW5hYmxlZCIpLHUucHVzaCh0aGlzLmNyZWF0ZVJlY292ZXJ5RmFjdG9yQnV0dG9uKCJlbWFpbC1idXR0b24iLCJwYXNzd29yZC5mb3Jnb3Quc2VuZEVtYWlsIixuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX0VNQUlMLHRoaXMpKSx0aGlzLnNldERlZmF1bHRGYWN0b3JUeXBlKG4uUkVDT1ZFUllfRkFDVE9SX1RZUEVfRU1BSUwpKSksdX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcy5zdGF0ZSwiY29udGFjdFN1cHBvcnQiLGZ1bmN0aW9uKCl7dGhpcy5hZGQobywiLm8tZm9ybS1lcnJvci1jb250YWluZXIiKX0pLHRoaXMubGlzdGVuVG8odGhpcywic2F2ZSIsZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXBwU3RhdGUuc2V0KCJ1c2VybmFtZSIsdGhpcy5tb2RlbC5nZXQoInVzZXJuYW1lIikpLHRoaXMubW9kZWwuc2F2ZSgpfSl9LHNldERlZmF1bHRGYWN0b3JUeXBlOmZ1bmN0aW9uKHQpe2EuaXNFbXB0eSh0aGlzLm1vZGVsLmdldCgiZmFjdG9yVHlwZSIpKSYmdGhpcy5tb2RlbC5zZXQoImZhY3RvclR5cGUiLHQpfSxjcmVhdGVSZWNvdmVyeUZhY3RvckJ1dHRvbjpmdW5jdGlvbihlLG4scixvKXtyZXR1cm4gaS5CdXR0b24oe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjplfSxjbGFzc05hbWU6ImJ1dHRvbiBidXR0b24tcHJpbWFyeSBidXR0b24td2lkZSAiK2UsdGl0bGU6dC5sb2MobiwibG9naW4iKSxjbGljazpmdW5jdGlvbigpe28uY2xlYXJFcnJvcnMoKSx0aGlzLm1vZGVsLmlzVmFsaWQoKSYmKHRoaXMubW9kZWwuc2V0KCJmYWN0b3JUeXBlIixyKSxvLnRyaWdnZXIoInNhdmUiLHRoaXMubW9kZWwpKX19KX19LEZvb3RlcjpjLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXBwU3RhdGUudW5zZXQoInVzZXJuYW1lIil9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpXSxyPWZ1bmN0aW9uKHQpe3JldHVybiB0LlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgICA8ZGl2IGNsYXNzPSJpbmZvYm94Ij5cdCAgICAgICAgPHNwYW4gY2xhc3M9Imljb24gaW5mby0xNiI+PC9zcGFuPlx0ICAgICAgICA8cD57e2kxOG4gY29kZT0iY29udGFjdC5zdXBwb3J0IiBidW5kbGU9ImxvZ2luIiBhcmd1bWVudHM9ImhlbHBTdXBwb3J0TnVtYmVyIn19PC9wPlx0ICAgICAgPC9kaXY+JyxjbGFzc05hbWU6ImNvbnRhY3Qtc3VwcG9ydCIsZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3MucGljaygiaGVscFN1cHBvcnROdW1iZXIiKX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpLG4oNjIzKSxuKDYyOCksbig2NDQpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIHM9dC5fLGE9M2U0O3JldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJyZWNvdmVyeS1jaGFsbGVuZ2UiLE1vZGVsOntwcm9wczp7cGFzc0NvZGU6WyJzdHJpbmciLCEwXX0sbG9jYWw6e2FibGVUb1Jlc2VuZDoiYm9vbGVhbiJ9LHJlc2VuZENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saW1pdFJlc2VuZGluZygpLHRoaXMuZG9UcmFuc2FjdGlvbihmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXNlbmQoKX0pfSxsaW1pdFJlc2VuZGluZzpmdW5jdGlvbigpe3RoaXMuc2V0KHthYmxlVG9SZXNlbmQ6ITF9KSxzLmRlbGF5KHMuYmluZCh0aGlzLnNldCx0aGlzKSxhLHthYmxlVG9SZXNlbmQ6ITB9KX0sc2F2ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQudmVyaWZ5KHtwYXNzQ29kZTp0aGlzLmdldCgicGFzc0NvZGUiKX0pfSl9fSxGb3JtOnthdXRvU2F2ZTohMCxzYXZlOnMucGFydGlhbCh0LmxvYywibWZhLmNoYWxsZW5nZS52ZXJpZnkiLCJsb2dpbiIpLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvclR5cGUiKT09PWkuUkVDT1ZFUllfRkFDVE9SX1RZUEVfQ0FMTD90LmxvYygicmVjb3ZlcnlDaGFsbGVuZ2UuY2FsbC50aXRsZSIsImxvZ2luIik6dC5sb2MoInJlY292ZXJ5Q2hhbGxlbmdlLnNtcy50aXRsZSIsImxvZ2luIil9LGNsYXNzTmFtZToicmVjb3ZlcnktY2hhbGxlbmdlIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJlcnJvciIsZnVuY3Rpb24oKXt0aGlzLmNsZWFyRXJyb3JzKCl9KX0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuW24uQnV0dG9uKHt0aXRsZTp0LmxvYygibWZhLnJlc2VuZENvZGUiLCJsb2dpbiIpLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoicmVzZW5kLWJ1dHRvbiJ9LGNsYXNzTmFtZToiYnV0dG9uIHNtcy1yZXF1ZXN0LWJ1dHRvbiIsY2xpY2s6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnJlc2VuZENvZGUoKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlOmFibGVUb1Jlc2VuZCIsZnVuY3Rpb24oZSxuKXtuPyh0aGlzLm9wdGlvbnMudGl0bGU9dC5sb2MoIm1mYS5yZXNlbmRDb2RlIiwibG9naW4iKSx0aGlzLmVuYWJsZSgpLHRoaXMucmVuZGVyKCkpOih0aGlzLm9wdGlvbnMudGl0bGU9dC5sb2MoIm1mYS5zZW50IiwibG9naW4iKSx0aGlzLmRpc2FibGUoKSx0aGlzLnJlbmRlcigpKX0pfX0pLG4uSW5wdXQoe3BsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmVudGVyQ29kZS5wbGFjZWhvbGRlciIsImxvZ2luIiksY2xhc3NOYW1lOiJlbnJvbGwtc21zLXBob25lIixuYW1lOiJwYXNzQ29kZSIsaW5wdXQ6byx0eXBlOiJ0ZXh0In0pXX19LGV2ZW50czp7ImNsaWNrIC5zZW5kLWVtYWlsLWxpbmsiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgZT10aGlzLm1vZGVsLnNldHRpbmdzLG49dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlcm5hbWUiKSxyPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInJlY292ZXJ5VHlwZSIpO3RoaXMubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihmdW5jdGlvbih0KXtzd2l0Y2gocil7Y2FzZSBpLlJFQ09WRVJZX1RZUEVfUEFTU1dPUkQ6cmV0dXJuIHQuZm9yZ290UGFzc3dvcmQoe3VzZXJuYW1lOmUudHJhbnNmb3JtVXNlcm5hbWUobixpLkZPUkdPVF9QQVNTV09SRCksZmFjdG9yVHlwZTppLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX0VNQUlMfSk7Y2FzZSBpLlJFQ09WRVJZX1RZUEVfVU5MT0NLOnJldHVybiB0LnVubG9ja0FjY291bnQoe3VzZXJuYW1lOmUudHJhbnNmb3JtVXNlcm5hbWUobixpLlVOTE9DS19BQ0NPVU5UKSxmYWN0b3JUeXBlOmkuUkVDT1ZFUllfRkFDVE9SX1RZUEVfRU1BSUx9KTtkZWZhdWx0OnJldHVybn19KX19LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInJlY292ZXJ5VHlwZSIpO3N3aXRjaChuKXtjYXNlIGkuUkVDT1ZFUllfVFlQRV9QQVNTV09SRDplPSdcdCAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluayBzZW5kLWVtYWlsLWxpbmsiIGRhdGEtc2U9InNlbmQtZW1haWwtbGluayI+XHQgICAgICAgICAgICB7e2kxOG4gY29kZT0icGFzc3dvcmQuZm9yZ290LmNvZGUubm90UmVjZWl2ZWQiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgICAgICA8L2E+JzticmVhaztjYXNlIGkuUkVDT1ZFUllfVFlQRV9VTkxPQ0s6ZT0nXHQgICAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9Imxpbmsgc2VuZC1lbWFpbC1saW5rIiBkYXRhLXNlPSJzZW5kLWVtYWlsLWxpbmsiPlx0ICAgICAgICAgICAge3tpMThuIGNvZGU9ImFjY291bnQudW5sb2NrLnNtcy5ub3RSZWNlaXZlZCIgYnVuZGxlPSJsb2dpbiJ9fVx0ICAgICAgICAgIDwvYT4nfWUmJnRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5lbWFpbFJlY292ZXJ5IikmJnRoaXMuYWRkKGUpLHRoaXMuYWRkKG5ldyByKHMuZXh0ZW5kKHRoaXMudG9KU09OKCkse2xpbmtUZXh0OnQubG9jKCJnb2JhY2siLCJsb2dpbiIpLGxpbmtDbGFzc05hbWU6IiJ9KSkpfSxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC5saW1pdFJlc2VuZGluZygpfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyOCksbig2MjIpLG4oNjIzKV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10Ll87cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6InBhc3N3b3JkLXJlc2V0LWVtYWlsLXNlbnQiLE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJue2xvY2FsOnt1c2VyRnVsbE5hbWU6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJGdWxsTmFtZSIpXX19fSxGb3JtOnt0aXRsZTpyLnBhcnRpYWwodC5sb2MsInBhc3N3b3JkLmZvcmdvdC5lbWFpbFNlbnQudGl0bGUiLCJsb2dpbiIpLHN1YnRpdGxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlcm5hbWUiKTtyZXR1cm4gdC5sb2MoInBhc3N3b3JkLmZvcmdvdC5lbWFpbFNlbnQuZGVzYyIsImxvZ2luIixbZV0pfSxub0J1dHRvbkJhcjohMCxhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6InB3ZC1yZXNldC1lbWFpbC1zZW50In0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuW2kuVmlldyh7Vmlldzp0LlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhY2Nlc3NpYmlsaXR5LXRleHQiIHJvbGU9InN0YXR1cyI+e3thbGVydH19PC9zcGFuPlx0ICAgICAgICAgICAgICAnLGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybnthbGVydDp0LmxvYygicGFzc3dvcmQuZm9yZ290LmVtYWlsU2VudC50aXRsZSIsImxvZ2luIil9fX0pfSksaS5CdXR0b24oe3RpdGxlOnQubG9jKCJnb2JhY2siLCJsb2dpbiIpLGNsYXNzTmFtZToiYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi13aWRlIixhdHRyaWJ1dGVzOnsiZGF0YS1zZSI6ImJhY2stYnV0dG9uIn0sY2xpY2s6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLm1vZGVsLmRvVHJhbnNhY3Rpb24oZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FuY2VsKCl9KS50aGVuKGZ1bmN0aW9uKCl7dC5zdGF0ZS5zZXQoIm5hdmlnYXRlRGlyIixlLkRJUkVDVElPTl9CQUNLKSx0Lm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCIiKX0pfX0pXX19LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5zZXR0aW5ncy5jYWxsR2xvYmFsU3VjY2VzcyhlLkZPUkdPVF9QQVNTV09SRF9FTUFJTF9TRU5ULHt1c2VybmFtZTp0LmFwcFN0YXRlLmdldCgidXNlcm5hbWUiKX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMiksbig2MjMpLG4oNjQ0KSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyKXtyZXR1cm4gZS5leHRlbmQoe2NsYXNzTmFtZToicmVjb3ZlcnktcXVlc3Rpb24iLE1vZGVsOntwcm9wczp7YW5zd2VyOlsic3RyaW5nIiwhMF0sc2hvd0Fuc3dlcjoiYm9vbGVhbiJ9LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFuc3dlcih7YW5zd2VyOnRoaXMuZ2V0KCJhbnN3ZXIiKX0pfSl9fSxGb3JtOnthdXRvU2F2ZTohMCxzYXZlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInJlY292ZXJ5VHlwZSIpKXtjYXNlIlBBU1NXT1JEIjpyZXR1cm4gdC5sb2MoInBhc3N3b3JkLmZvcmdvdC5xdWVzdGlvbi5zdWJtaXQiLCJsb2dpbiIpO2Nhc2UiVU5MT0NLIjpyZXR1cm4gdC5sb2MoImFjY291bnQudW5sb2NrLnF1ZXN0aW9uLnN1Ym1pdCIsImxvZ2luIik7ZGVmYXVsdDpyZXR1cm4gdC5sb2MoIm1mYS5jaGFsbGVuZ2UudmVyaWZ5IiwibG9naW4iKX19LHRpdGxlOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInJlY292ZXJ5VHlwZSIpKXtjYXNlIlBBU1NXT1JEIjpyZXR1cm4gdC5sb2MoInBhc3N3b3JkLmZvcmdvdC5xdWVzdGlvbi50aXRsZSIsImxvZ2luIik7Y2FzZSJVTkxPQ0siOnJldHVybiB0LmxvYygiYWNjb3VudC51bmxvY2sucXVlc3Rpb24udGl0bGUiLCJsb2dpbiIpO2RlZmF1bHQ6cmV0dXJuIiJ9fSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5bbi5JbnB1dCh7bGFiZWw6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgicmVjb3ZlcnlRdWVzdGlvbiIpLHBsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmFuc3dlci5wbGFjZWhvbGRlciIsImxvZ2luIiksbmFtZToiYW5zd2VyIixpbnB1dDpyLHR5cGU6InBhc3N3b3JkIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6c2hvd0Fuc3dlciIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1vZGVsLmdldCgic2hvd0Fuc3dlciIpPyJ0ZXh0IjoicGFzc3dvcmQiO3RoaXMuZ2V0SW5wdXRzKClbMF0uY2hhbmdlVHlwZSh0KX0pfX0pLG4uSW5wdXQoe2xhYmVsOiExLCJsYWJlbC10b3AiOiEwLHBsYWNlaG9sZGVyOnQubG9jKCJtZmEuY2hhbGxlbmdlLmFuc3dlci5zaG93QW5zd2VyIiwibG9naW4iKSxjbGFzc05hbWU6InJlY292ZXJ5LXF1ZXN0aW9uLXNob3cgbWFyZ2luLWJ0bS0wIixuYW1lOiJzaG93QW5zd2VyIix0eXBlOiJjaGVja2JveCJ9KV19fSxGb290ZXI6aX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyMiksbig2MjMpLG4oNjk2KSxuKDY0MSksbig2NDQpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbixpLHIsbyxzKXt2YXIgYT10Ll87cmV0dXJuIGUuZXh0ZW5kKHtjbGFzc05hbWU6InBhc3N3b3JkLXJlc2V0IixNb2RlbDp7cHJvcHM6e25ld1Bhc3N3b3JkOlsic3RyaW5nIiwhMF0sY29uZmlybVBhc3N3b3JkOlsic3RyaW5nIiwhMF19LHZhbGlkYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGkudmFsaWRhdGVQYXNzd29yZE1hdGNoKHRoaXMpfSxzYXZlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJzYXZlIik7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlc2V0UGFzc3dvcmQoe25ld1Bhc3N3b3JkOnQuZ2V0KCJuZXdQYXNzd29yZCIpfSl9KX19LEZvcm06e3NhdmU6YS5wYXJ0aWFsKHQubG9jLCJwYXNzd29yZC5yZXNldCIsImxvZ2luIiksdGl0bGU6YS5wYXJ0aWFsKHQubG9jLCJwYXNzd29yZC5yZXNldC50aXRsZSIsImxvZ2luIiksc3VidGl0bGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJwb2xpY3kiKTtpZih0KXJldHVybiByLmdldFBhc3N3b3JkQ29tcGxleGl0eURlc2NyaXB0aW9uKHQpfSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5bbi5JbnB1dCh7cGxhY2Vob2xkZXI6dC5sb2MoInBhc3N3b3JkLm5ld1Bhc3N3b3JkLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJuZXdQYXNzd29yZCIsaW5wdXQ6cyx0eXBlOiJwYXNzd29yZCIscGFyYW1zOntpbm5lclRvb2x0aXA6dC5sb2MoInBhc3N3b3JkLm5ld1Bhc3N3b3JkLnRvb2x0aXAiLCJsb2dpbiIpLGljb246ImNyZWRlbnRpYWxzLTE2In19KSxuLklucHV0KHtwbGFjZWhvbGRlcjp0LmxvYygicGFzc3dvcmQuY29uZmlybVBhc3N3b3JkLnBsYWNlaG9sZGVyIiwibG9naW4iKSxuYW1lOiJjb25maXJtUGFzc3dvcmQiLGlucHV0OnMsdHlwZToicGFzc3dvcmQiLHBhcmFtczp7aW5uZXJUb29sdGlwOnQubG9jKCJwYXNzd29yZC5jb25maXJtUGFzc3dvcmQudG9vbHRpcCIsImxvZ2luIiksaWNvbjoiY3JlZGVudGlhbHMtMTYifX0pXX19LEZvb3RlcjpvLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlblRvKHRoaXMuZm9ybSwic2F2ZSIsZnVuY3Rpb24oKXt2YXIgdD17dXNlcm5hbWU6dGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlckVtYWlsIikscGFzc3dvcmQ6dGhpcy5tb2RlbC5nZXQoIm5ld1Bhc3N3b3JkIil9O3RoaXMuc2V0dGluZ3MucHJvY2Vzc0NyZWRzKHQpLnRoZW4oYS5iaW5kKHRoaXMubW9kZWwuc2F2ZSx0aGlzLm1vZGVsKSl9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpXSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZXh0ZW5kKHtjbGFzc05hbWU6InJlY292ZXJ5LWxvYWRpbmciLE1vZGVsOnt9LEZvcm06e25vQnV0dG9uQmFyOiEwfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMubW9kZWwuc3RhcnRUcmFuc2FjdGlvbihmdW5jdGlvbihlKXtyZXR1cm4gZS52ZXJpZnlSZWNvdmVyeVRva2VuKHtyZWNvdmVyeVRva2VuOnQudG9rZW59KX0pLmZhaWwoZnVuY3Rpb24oKXtlLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibG9hZGluZyIsITEpfSl9LHByZVJlbmRlcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJsb2FkaW5nIiwhMCl9LHRyYXBBdXRoUmVzcG9uc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoImxvYWRpbmciLCExKSwhMX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig2MjIpLG4oNjI4KSxuKDYyMyksbig2OTYpLG4oNzAwKSxuKDY0OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9dC5fLGw9JzxkaXYgY2xhc3M9Im9rdGEtZm9ybS1pbmZvYm94LWVycm9yIGluZm9ib3ggaW5mb2JveC1lcnJvciIgcm9sZT0iYWxlcnQiPlx0ICAgIDxzcGFuIGNsYXNzPSJpY29uIGVycm9yLTE2Ij48L3NwYW4+XHQgICAgPHA+e3tpMThuIGNvZGU9ImFjY291bnQudW5sb2NrLm5vRmFjdG9yc0VuYWJsZWQiIGJ1bmRsZT0ibG9naW4ifX08L3A+XHQgIDwvZGl2PicsYz10LlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTonXHQgICAgICA8YSBocmVmPSIjIiBjbGFzcz0ibGluayBoZWxwIGpzLWJhY2siIGRhdGEtc2U9ImJhY2stbGluayI+XHQgICAgICAgIHt7aTE4biBjb2RlPSJnb2JhY2siIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAgIHt7I2lmIGhlbHBTdXBwb3J0TnVtYmVyfX1cdCAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJsaW5rIGdvdG8ganMtY29udGFjdC1zdXBwb3J0Ij5cdCAgICAgICAge3tpMThuIGNvZGU9Im1mYS5ub0FjY2Vzc1RvRW1haWwiIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgIDwvYT5cdCAgICAgIHt7L2lmfX1cdCAgICAnLGNsYXNzTmFtZToiYXV0aC1mb290ZXIiLGV2ZW50czp7ImNsaWNrIC5qcy1iYWNrIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5iYWNrKCl9LCJjbGljayAuanMtY29udGFjdC1zdXBwb3J0IjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5zdGF0ZS50cmlnZ2VyKCJjb250YWN0U3VwcG9ydCIpLHRoaXMuJCgiLmpzLWNvbnRhY3Qtc3VwcG9ydCIpLmhpZGUoKX19LGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldHRpbmdzLnBpY2soImhlbHBTdXBwb3J0TnVtYmVyIil9LGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlLnNldCgibmF2aWdhdGVEaXIiLG4uRElSRUNUSU9OX0JBQ0spLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsIiIpfX0pO3JldHVybiBlLmV4dGVuZCh7Y2xhc3NOYW1lOiJhY2NvdW50LXVubG9jayIsTW9kZWw6e3Byb3BzOnt1c2VybmFtZTpbInN0cmluZyIsITBdLGZhY3RvclR5cGU6WyJzdHJpbmciLCEwXX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gci52YWxpZGF0ZVVzZXJuYW1lKHRoaXMpfSxzYXZlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5zdGFydFRyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVubG9ja0FjY291bnQoe3VzZXJuYW1lOnQuc2V0dGluZ3MudHJhbnNmb3JtVXNlcm5hbWUodC5nZXQoInVzZXJuYW1lIiksbi5VTkxPQ0tfQUNDT1VOVCksZmFjdG9yVHlwZTp0LmdldCgiZmFjdG9yVHlwZSIpfSl9KS5mYWlsKGZ1bmN0aW9uKCl7fSl9fSxGb3JtOntub0J1dHRvbkJhcjohMCx0aXRsZTphLnBhcnRpYWwodC5sb2MsImFjY291bnQudW5sb2NrLnRpdGxlIiwibG9naW4iKSxmb3JtQ2hpbGRyZW46ZnVuY3Rpb24gdSgpe3ZhciBlPXRoaXMuc2V0dGluZ3MuZ2V0KCJmZWF0dXJlcy5zbXNSZWNvdmVyeSIpLHI9dGhpcy5zZXR0aW5ncy5nZXQoImZlYXR1cmVzLmVtYWlsUmVjb3ZlcnkiKSxvPSEoZXx8ciksdT1bXSxhPXRoaXM7cmV0dXJuIG8/dGhpcy5hZGQobCwiLm8tZm9ybS1lcnJvci1jb250YWluZXIiKToodS5wdXNoKGkuSW5wdXQoe3BsYWNlaG9sZGVyOnQubG9jKCJhY2NvdW50LnVubG9jay5lbWFpbC5vci51c2VybmFtZS5wbGFjZWhvbGRlciIsImxvZ2luIiksbmFtZToidXNlcm5hbWUiLGlucHV0OnMsdHlwZToidGV4dCIscGFyYW1zOntpbm5lclRvb2x0aXA6dC5sb2MoImFjY291bnQudW5sb2NrLmVtYWlsLm9yLnVzZXJuYW1lLnRvb2x0aXAiLCJsb2dpbiIpLGljb246InBlcnNvbi0xNi1ncmF5In19KSksZSYmKHUucHVzaChpLlZpZXcoe1ZpZXc6J1x0ICAgICAgICAgICAgICA8cCBjbGFzcz0ic21zLWhpbnQiPlx0ICAgICAgICAgICAgICAgIHt7aTE4biBjb2RlPSJyZWNvdmVyeS5zbXMuaGludCIgYnVuZGxlPSJsb2dpbiJ9fVx0ICAgICAgICAgICAgICA8L3A+XHQgICAgICAgICAgICAnfSkpLHRoaXMuJGVsLmFkZENsYXNzKCJmb3Jnb3QtcGFzc3dvcmQtc21zLWVuYWJsZWQiKSx1LnB1c2godGhpcy5jcmVhdGVSZWNvdmVyeUZhY3RvckJ1dHRvbigic21zLWJ1dHRvbiIsImFjY291bnQudW5sb2NrLnNlbmRUZXh0IixuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX1NNUyxhKSksdGhpcy5zZXREZWZhdWx0RmFjdG9yVHlwZShuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX1NNUykpLHImJih0aGlzLiRlbC5hZGRDbGFzcygiZm9yZ290LXBhc3N3b3JkLWVtYWlsLWVuYWJsZWQiKSx1LnB1c2godGhpcy5jcmVhdGVSZWNvdmVyeUZhY3RvckJ1dHRvbigiZW1haWwtYnV0dG9uIiwiYWNjb3VudC51bmxvY2suc2VuZEVtYWlsIixuLlJFQ09WRVJZX0ZBQ1RPUl9UWVBFX0VNQUlMLGEpKSx0aGlzLnNldERlZmF1bHRGYWN0b3JUeXBlKG4uUkVDT1ZFUllfRkFDVE9SX1RZUEVfRU1BSUwpKSksdX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcywic2F2ZSIsZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXBwU3RhdGUuc2V0KCJ1c2VybmFtZSIsdGhpcy5tb2RlbC5nZXQoInVzZXJuYW1lIikpLHRoaXMubW9kZWwuc2F2ZSgpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLnN0YXRlLCJjb250YWN0U3VwcG9ydCIsZnVuY3Rpb24oKXt0aGlzLmFkZChvLCIuby1mb3JtLWVycm9yLWNvbnRhaW5lciIpfSl9LHNldERlZmF1bHRGYWN0b3JUeXBlOmZ1bmN0aW9uKHQpe2EuaXNFbXB0eSh0aGlzLm1vZGVsLmdldCgiZmFjdG9yVHlwZSIpKSYmdGhpcy5tb2RlbC5zZXQoImZhY3RvclR5cGUiLHQpfSxjcmVhdGVSZWNvdmVyeUZhY3RvckJ1dHRvbjpmdW5jdGlvbihlLG4scixvKXtyZXR1cm4gaS5CdXR0b24oe2F0dHJpYnV0ZXM6eyJkYXRhLXNlIjplfSxjbGFzc05hbWU6ImJ1dHRvbiBidXR0b24tcHJpbWFyeSBidXR0b24td2lkZSAiK2UsdGl0bGU6dC5sb2MobiwibG9naW4iKSxjbGljazpmdW5jdGlvbigpe28uY2xlYXJFcnJvcnMoKSx0aGlzLm1vZGVsLmlzVmFsaWQoKSYmKHRoaXMubW9kZWwuc2V0KCJmYWN0b3JUeXBlIixyKSxvLnRyaWdnZXIoInNhdmUiLHRoaXMubW9kZWwpKX19KX19LEZvb3RlcjpjfSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjI4KSxuKDYyMiksbig2MjMpXSxyPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQuXztyZXR1cm4gbi5leHRlbmQoe2NsYXNzTmFtZToiYWNjb3VudC11bmxvY2tlZCIsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm57bG9jYWw6e3VzZXJGdWxsTmFtZTpbInN0cmluZyIsITEsdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgidXNlckZ1bGxOYW1lIildfX19LEZvcm06e3RpdGxlOnIucGFydGlhbCh0LmxvYywiYWNjb3VudC51bmxvY2sudW5sb2NrZWQudGl0bGUiLCJsb2dpbiIpLHN1YnRpdGxlOnIucGFydGlhbCh0LmxvYywiYWNjb3VudC51bmxvY2sudW5sb2NrZWQuZGVzYyIsImxvZ2luIiksbm9CdXR0b25CYXI6ITAsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJhY2NvdW50LXVubG9ja2VkIn0sZm9ybUNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuW2kuQnV0dG9uKHt0aXRsZTp0LmxvYygiZ29iYWNrIiwibG9naW4iKSxjbGFzc05hbWU6ImJ1dHRvbiBidXR0b24tcHJpbWFyeSBidXR0b24td2lkZSIsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJiYWNrLWJ1dHRvbiJ9LGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZS5zZXQoIm5hdmlnYXRlRGlyIixlLkRJUkVDVElPTl9CQUNLKSx0aGlzLm9wdGlvbnMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCIiKX19KV19fX0p", "base64"));
  res.write(new Buffer("fS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyOCksbig2MjIpLG4oNjIzKV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj10Ll87cmV0dXJuIG4uZXh0ZW5kKHtjbGFzc05hbWU6ImFjY291bnQtdW5sb2NrLWVtYWlsLXNlbnQiLE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJue2xvY2FsOnt1c2VyRnVsbE5hbWU6WyJzdHJpbmciLCExLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJGdWxsTmFtZSIpXX19fSxGb3JtOnt0aXRsZTpyLnBhcnRpYWwodC5sb2MsImFjY291bnQudW5sb2NrLmVtYWlsU2VudC50aXRsZSIsImxvZ2luIiksc3VidGl0bGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJ1c2VybmFtZSIpO3JldHVybiB0LmxvYygiYWNjb3VudC51bmxvY2suZW1haWxTZW50LmRlc2MiLCJsb2dpbiIsW2VdKX0sbm9CdXR0b25CYXI6ITAsYXR0cmlidXRlczp7ImRhdGEtc2UiOiJ1bmxvY2stZW1haWwtc2VudCJ9LGZvcm1DaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltpLkJ1dHRvbih7dGl0bGU6dC5sb2MoImdvYmFjayIsImxvZ2luIiksY2xhc3NOYW1lOiJidXR0b24gYnV0dG9uLXByaW1hcnkgYnV0dG9uLXdpZGUiLGF0dHJpYnV0ZXM6eyJkYXRhLXNlIjoiYmFjay1idXR0b24ifSxjbGljazpmdW5jdGlvbigpe3RoaXMuc3RhdGUuc2V0KCJuYXZpZ2F0ZURpciIsZS5ESVJFQ1RJT05fQkFDSyksdGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIiwiIil9fSldfX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLnNldHRpbmdzLmNhbGxHbG9iYWxTdWNjZXNzKGUuVU5MT0NLX0FDQ09VTlRfRU1BSUxfU0VOVCx7dXNlcm5hbWU6dC5hcHBTdGF0ZS5nZXQoInVzZXJuYW1lIil9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig3MTApLG4oNjI0KSxuKDYyOCksbig3MTMpLG4oNjI2KSxuKDcxNCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9dC5fLGw9dC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImxpbmsgaGVscCIgZGF0YS1zZT0iYmFjay1saW5rIj5cdCAgICAgICAge3tpMThuIGNvZGU9ImdvYmFjayIgYnVuZGxlPSJsb2dpbiJ9fVx0ICAgICAgPC9hPlx0ICAgICcsY2xhc3NOYW1lOiJhdXRoLWZvb3RlciIsZXZlbnRzOnsiY2xpY2sgLmhlbHAiOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLmJhY2soKX19LGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlLnNldCgibmF2aWdhdGVEaXIiLGkuRElSRUNUSU9OX0JBQ0spLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsIiIpfX0pLGM9dC5Gb3JtLmV4dGVuZCh7bGF5b3V0OiJvLWZvcm0tdGhlbWUiLGF1dG9TYXZlOiEwLG5vQ2FuY2VsQnV0dG9uOiEwLHRpdGxlOnQubG9jKCJyZWdpc3RyYXRpb24uZm9ybS50aXRsZSIsImxvZ2luIiksc2F2ZTp0LmxvYygicmVnaXN0cmF0aW9uLmZvcm0uc3VibWl0IiwibG9naW4iKX0pO3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJyZWdpc3RyYXRpb24iLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLm9wdGlvbnMuc2V0dGluZ3MuZ2V0KCJyZWdpc3RyYXRpb24uY2xpZW50SWQiKSxpPXRoaXMub3B0aW9ucy5zZXR0aW5ncy5nZXQoImJhc2VVcmwiKSsiL2FwaS92MS9yZWdpc3RyYXRpb24vIituO2lmKCFuKXJldHVybiExO3ZhciBsPWUuZXh0ZW5kKHt1cmw6aSsiL2Zvcm0ifSksdT1uZXcgbCxkPWEuYmluZChmdW5jdGlvbihlKXt2YXIgbj10Lk1vZGVsLmV4dGVuZCh7dXJsOmkrIi9yZWdpc3RlciIsc2V0dGluZ3M6dGhpcy5zZXR0aW5ncyxhcHBTdGF0ZTp0aGlzLm9wdGlvbnMuYXBwU3RhdGUscHJvcHM6ZSxsb2NhbDp7YWN0aXZhdGlvblRva2VuOiJzdHJpbmcifSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZT10Lk1vZGVsLnByb3RvdHlwZS50b0pTT04uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybnt1c2VyUHJvZmlsZTplfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0KCJhY3RpdmF0aW9uVG9rZW4iLHQuYWN0aXZhdGlvblRva2VuKSxkZWxldGUgdC5hY3RpdmF0aW9uVG9rZW4sdH19KTtyZXR1cm4gbmV3IG59LHRoaXMpLGg9YS5iaW5kKGZ1bmN0aW9uKCl7dmFyIHQ9dS5wcm9wZXJ0aWVzLGU9dC5jcmVhdGVNb2RlbFByb3BlcnRpZXMoKTt0aGlzLm1vZGVsPWQoZSk7dmFyIG49bmV3IGModGhpcy50b0pTT04oKSk7dGhpcy5saXN0ZW5UbyhuLCJzYXZlZCIsYS5iaW5kKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoImFjdGl2YXRpb25Ub2tlbiIpO2lmKHQpe3ZhciBlPXRoaXMuYXBwU3RhdGUuc2V0dGluZ3MuYXV0aENsaWVudDtlLnNpZ25Jbih7dG9rZW46dH0pLnRoZW4oYS5iaW5kKGZ1bmN0aW9uKHQpe28ucm91dGVBZnRlckF1dGhTdGF0dXNDaGFuZ2UodGhpcyxudWxsLHQuZGF0YSl9LHRoaXMpKX1lbHNlIHRoaXMuYXBwU3RhdGUuc2V0KCJ1c2VybmFtZSIsdGhpcy5nZXQoInVzZXJOYW1lIikpLHRoaXMuYXBwU3RhdGUudHJpZ2dlcigibmF2aWdhdGUiLCJzaWduaW4vcmVnaXN0ZXItY29tcGxldGUiKX0sdGhpcy5tb2RlbCkpLHQuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1yLmNyZWF0ZUlucHV0T3B0aW9ucyh0KSxpPXQuZ2V0KCJzdWJTY2hlbWFzIiksbz10LmdldCgibmFtZSIpO24uYWRkSW5wdXQoZSksInBhc3N3b3JkIj09PW8mJmkmJm4uYWRkKHMuZXh0ZW5kKHtpZDoic3Vic2NoZW1hcy0iK28sc3ViU2NoZW1hczppfSkpfSksdGhpcy5hZGQobiksdGhpcy5mb290ZXI9bmV3IHRoaXMuRm9vdGVyKHRoaXMudG9KU09OKCkpLHRoaXMuYWRkKHRoaXMuZm9vdGVyKSx0aGlzLmFkZExpc3RlbmVycygpfSx0aGlzKTt1LmZldGNoKCkudGhlbihmdW5jdGlvbigpe2goKX0pfSxGb290ZXI6bH0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDcxMSksbig3MTIpXSxyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Ll8scj1uLkNvbGxlY3Rpb24uZXh0ZW5kKHtjcmVhdGVNb2RlbFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgdD1uLkNvbGxlY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU1vZGVsUHJvcGVydGllcy5hcHBseSh0aGlzKTtyZXR1cm4gaS5lYWNoKHQsZnVuY3Rpb24odCxlKXt0LnJlcXVpcmVkPSEhdGhpcy5nZXQoZSkuZ2V0KCJyZXF1aXJlZCIpfSx0aGlzKSx0fX0pO3JldHVybiBlLk1vZGVsLmV4dGVuZCh7ZXhwYW5kOlsic2NoZW1hIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLnByb3BlcnRpZXM9bmV3IHIsdC5CYXNlTW9kZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgbj1pLmJpbmQoZnVuY3Rpb24odCl7dmFyIGU9dC5zY2hlbWEucmVxdWlyZWQ7aS5pc0FycmF5KGUpJiZpLmVhY2goZSxmdW5jdGlvbih0KXt2YXIgZT10aGlzLnByb3BlcnRpZXMuZ2V0KHQpO2UmJmUuc2V0KCJyZXF1aXJlZCIsITApfSx0aGlzKTt2YXIgbj10LnNjaGVtYS5maWVsZE9yZGVyO3JldHVybiBpLmlzQXJyYXkobikmJihpLmVhY2gobixmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucHJvcGVydGllcy5nZXQodCk7biYmbi5zZXQoInNvcnRPcmRlciIsZSl9LHRoaXMpLHRoaXMucHJvcGVydGllcy5jb21wYXJhdG9yPSJzb3J0T3JkZXIiLHRoaXMucHJvcGVydGllcy5zb3J0KCkpLHR9LHRoaXMpO3Quc2NoZW1hPXQucHJvZmlsZVNjaGVtYTt2YXIgcj1lLk1vZGVsLnByb3RvdHlwZS5wYXJzZS5hcHBseSh0aGlzLFt0XSk7cmV0dXJuIHQ9bih0KSxyfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzI4KSxuKDQ2NSksbigzNTgpLG4oNzEyKV0scj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgbj10LnBpY2soZSwiaWQiLCJuYW1lIiwiZGlzcGxheU5hbWUiKSxpPXQubWFwKGUuc2NoZW1hLnByb3BlcnRpZXMsZnVuY3Rpb24oZSxuKXtyZXR1cm4gdCh7bmFtZTpufSkuY2hhaW4oKS5leHRlbmQoZSkub21pdCgiX19tZXRhZGF0YSIpLnZhbHVlKCl9KTtyZXR1cm4gdC5lYWNoKGksZnVuY3Rpb24odCl7dC5fX3NjaGVtYU1ldGFfXz1ufSksaX0sbz1lLmV4dGVuZCh7ZGVmYXVsdHM6e2lkOnZvaWQgMCxkaXNwbGF5TmFtZTp2b2lkIDAsbmFtZTp2b2lkIDB9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5wcm9wZXJ0aWVzPW5ldyBpLkNvbGxlY3Rpb24sZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWUucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdC5nZXRQcm9wZXJ0aWVzKCkuc2V0KHRoaXMuZ2V0UHJvcGVydGllcygpLnRvSlNPTih7dmVyYm9zZTohMH0pKSx0fSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgbj1yKGUpO3JldHVybiB0aGlzLnByb3BlcnRpZXMuc2V0KG4se3BhcnNlOiEwfSksdC5vbWl0KGUsInNjaGVtYSIpfSx0cmltUHJvcGVydHk6ZnVuY3Rpb24oZSl7cmV0dXJuIHQub21pdChlLCJuYW1lIil9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciB0PWUucHJvdG90eXBlLnRvSlNPTi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuc2NoZW1hPXtwcm9wZXJ0aWVzOnt9fSx0aGlzLmdldFByb3BlcnRpZXMoKS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWUudG9KU09OKCk7dC5zY2hlbWEucHJvcGVydGllc1tuLm5hbWVdPXRoaXMudHJpbVByb3BlcnR5KG4pfSx0aGlzKSx0fSxzYXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydGllcygpLmVhY2goZnVuY3Rpb24odCl7dC5jbGVhbnVwKCl9KSxlLnByb3RvdHlwZS5zYXZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxzPW4uZXh0ZW5kKHttb2RlbDpvfSk7cmV0dXJue3BhcnNlUHJvcGVydGllczpyLE1vZGVsOm8sQ29sbGVjdGlvbjpzfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDMyOCksbigzNTgpLG4oNDY1KSxuKDQ2NCksbig0OTkpLG4oNTAwKSxuKDU5OCldLHI9ZnVuY3Rpb24odCxlLG4saSxyLG8scyl7dmFyIGE9by5sb2NhbGl6ZSxsPXIuU1RSSU5HLGM9ci5OVU1CRVIsdT1yLklOVEVHRVIsZD1mdW5jdGlvbih0LGUpe3JldHVybiB0KyJvZiIrZX0saD1uLmV4dGVuZCh7ZGVmYXVsdHM6e2Rlc2NyaXB0aW9uOnZvaWQgMCxtaW5MZW5ndGg6dm9pZCAwLG1heExlbmd0aDp2b2lkIDAsZm9ybWF0OnZvaWQgMH0scGFyc2U6ZnVuY3Rpb24oZSl7aWYodC5pc1N0cmluZyhlLmZvcm1hdCkpe3ZhciBuPS9eXC8oLispXC8kLy5leGVjKGUuZm9ybWF0KTtuJiYoZS5mb3JtYXQ9blsxXSl9cmV0dXJuIGV9fSkscD1lLmV4dGVuZCh7bW9kZWw6aH0pLGY9cC5leHRlbmQoe190eXBlOiJhbGxPZiJ9KSxtPXAuZXh0ZW5kKHtfdHlwZToib25lT2YifSksXz1wLmV4dGVuZCh7X3R5cGU6Im5vbmVPZiJ9KSxnPW4uZXh0ZW5kKHtjb25zdHJhaW50SGFuZGxlcnM6e2JldHdlZW46Il9jaGVja0JldHdlZW5Db25zdHJhaW50cyIsZ3JlYXRlclRoYW46Il9jaGVja0dyZWF0ZXJUaGFuQ29uc3RyYWludCIsbGVzc1RoYW46Il9jaGVja0xlc3NUaGFuQ29uc3RyYWludCIsZXF1YWxzOiJfY2hlY2tFcXVhbHNDb25zdHJhaW50In0saWRBdHRyaWJ1dGU6Im5hbWUiLGxvY2FsOntfX29uZU9mX186e3R5cGU6ImFycmF5IixtaW5JdGVtczoxfX0sZGVmYXVsdHM6e25hbWU6IiIsdGl0bGU6dm9pZCAwLHR5cGU6dm9pZCAwLGRlc2NyaXB0aW9uOnZvaWQgMCxyZXF1aXJlZDohMSxmb3JtYXQ6dm9pZCAwLHVuaW9uOnZvaWQgMCxzdWJTY2hlbWFzOnZvaWQgMCxzZXR0aW5nczp7cGVybWlzc2lvbnM6e1NFTEY6ci5QRVJNSVNTSU9OLlJFQURfT05MWX19LF9faXNTZW5zaXRpdmVfXzpuLkNvbXB1dGVkUHJvcGVydHkoWyJzZXR0aW5ncyJdLGZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fCF0LnNlbnNpdGl2ZSl9KSxfX3VzZXJQZXJtaXNzaW9uX186ci5QRVJNSVNTSU9OLlJFQURfT05MWSxfX2Rpc3BsYXlUeXBlX186dm9pZCAwLF9fZGlzcGxheVR5cGVMYWJlbF9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbIl9fZGlzcGxheVR5cGVfXyJdLGZ1bmN0aW9uKHQpe3JldHVybiByLkRBVEFUWVBFW3RdfHx0fSksX19zdXBwb3J0c01pbk1heF9fOiExLF9faXNSZWFkT25seV9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbIm11dGFiaWxpdHkiXSxmdW5jdGlvbih0KXtyZXR1cm4gdD09PXIuTVVUQUJJTElUWS5SRUFET05MWX0pLF9faXNXcml0ZU9ubHlfXzpuLkNvbXB1dGVkUHJvcGVydHkoWyJtdXRhYmlsaXR5Il0sZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1yLk1VVEFCSUxJVFkuV1JJVEVPTkxZfSksX19kaXNwbGF5U2NvcGVfXzp2b2lkIDAsX19pc1Njb3BlU2VsZl9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbInNjb3BlIl0sZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1yLlNDT1BFLlNFTEZ9KSxfX2lzTm9uZVNjb3BlQXJyYXlUeXBlX186bi5Db21wdXRlZFByb3BlcnR5KFsiX19pc1Njb3BlU2VsZl9fIiwiX19kaXNwbGF5VHlwZV9fIl0sZnVuY3Rpb24odCxlKXtyZXR1cm4hdCYmci5pc0FycmF5RGF0YVR5cGUoZSl9KSxfX2lzSW1wb3J0ZWRfXzpuLkNvbXB1dGVkUHJvcGVydHkoWyJleHRlcm5hbE5hbWUiXSxmdW5jdGlvbih0KXtyZXR1cm4hIXR9KSxfX2lzRnJvbUJhc2VTY2hlbWFfXzpuLkNvbXB1dGVkUHJvcGVydHkoWyJfX3NjaGVtYU1ldGFfXyJdLGZ1bmN0aW9uKHQpe3JldHVybiB0JiYiYmFzZSI9PT10Lm5hbWV9KSxfX2VudW1EZWZpbmVkX186ITEsX19zdXBwb3J0RW51bV9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbIl9fZGlzcGxheVR5cGVfXyJdLGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbnRhaW5zKHIuU1VQUE9SVEVOVU0sZSl9KSxfX2lzTnVtYmVyVHlwZUVudW1fXzpuLkNvbXB1dGVkUHJvcGVydHkoWyJfX2Rpc3BsYXlUeXBlX18iXSxmdW5jdGlvbihlKXtyZXR1cm4gdC5jb250YWlucyhbci5OVU1CRVIsci5BUlJBWURJU1BMQVlUWVBFLmFycmF5b2ZudW1iZXJdLGUpfSksX19pc0ludGVnZXJUeXBlRW51bV9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbIl9fZGlzcGxheVR5cGVfXyJdLGZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbnRhaW5zKFtyLklOVEVHRVIsci5BUlJBWURJU1BMQVlUWVBFLmFycmF5b2ZpbnRlZ2VyXSxlKX0pLF9faXNFbnVtRGVmaW5lZEFuZFN1cHBvcnRlZF9fOm4uQ29tcHV0ZWRQcm9wZXJ0eShbIl9fZW51bURlZmluZWRfXyIsIl9fc3VwcG9ydEVudW1fXyJdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJmV9KX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe24ucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMubGlzdGVuVG8odGhpcywiY2hhbmdlOl9fZGlzcGxheVR5cGVfXyIsdGhpcy5fdXBkYXRlVHlwZUZvcm1hdENvbnN0cmFpbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMsImNoYW5nZTp0eXBlIGNoYW5nZTpmb3JtYXQgY2hhbmdlOml0ZW1zIix0aGlzLl91cGRhdGVEaXNwbGF5VHlwZSksdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6X19taW5WYWxfXyBjaGFuZ2U6X19tYXhWYWxfXyIsdGhpcy5fdXBkYXRlTWluTWF4KSx0aGlzLmxpc3RlblRvKHRoaXMsImNoYW5nZTpfX2VxdWFsc19fIix0aGlzLl9jb252ZXJ0RXF1YWxzVG9NaW5NYXgpLHRoaXMubGlzdGVuVG8odGhpcywiY2hhbmdlOl9fY29uc3RyYWludF9fIix0aGlzLl9zZXRDb25zdHJhaW50VGV4dCksdGhpcy5fc2V0Q29uc3RyYWludFRleHQoKX0scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5jbG9uZShlKSwib2JqZWN0Ij09PWUudHlwZSYmImltYWdlIj09PWUuZXh0ZW5kZWRUeXBlJiYoZS50eXBlPSJpbWFnZSIpLGUuX19kaXNwbGF5VHlwZV9fPXIuZ2V0RGlzcGxheVR5cGUoZS50eXBlLGUuZm9ybWF0LGUuaXRlbXM/ZS5pdGVtcy50eXBlOnZvaWQgMCksdGhpcy5fc2V0UmFuZ2VDb25zdHJhaW50cyhlKSxlLl9fc3VwcG9ydHNNaW5NYXhfXz1yLlNVUFBPUlRTTUlOTUFYLmluZGV4T2YoZS5fX2Rpc3BsYXlUeXBlX18pIT0tMSxlLl9fZGlzcGxheVNjb3BlX189ci5ESVNQTEFZU0NPUEVbZS5zY29wZV18fHIuRElTUExBWVNDT1BFLk5BLGUuc2V0dGluZ3MmJmUuc2V0dGluZ3MucGVybWlzc2lvbnMmJmUuc2V0dGluZ3MucGVybWlzc2lvbnMuU0VMRiYmKGUuX191c2VyUGVybWlzc2lvbl9fPWUuc2V0dGluZ3MucGVybWlzc2lvbnMuU0VMRiksdGhpcy5fc2V0TWFzdGVyT3ZlcnJpZGUoZSksdGhpcy5fc2V0U3ViU2NoZW1hcyhlKSxlfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3ZhbGlkYXRlRW51bU9uZU9mKCk7aWYoZSlyZXR1cm4gZTtpZih0aGlzLmdldCgiX19zdXBwb3J0c01pbk1heF9fIikmJnRoaXMuZ2V0KCJfX2NvbnN0cmFpbnRfXyIpKXt2YXIgbj10aGlzLmdldCgiX19jb25zdHJhaW50X18iKSxyPXRoaXNbdGhpcy5jb25zdHJhaW50SGFuZGxlcnNbbl1dO3JldHVybiB0LmlzRnVuY3Rpb24ocik/ci5jYWxsKHRoaXMpOnZvaWQgaS53YXJuKCJObyBjb25zdHJhaW50IGhhbmRsZXIgZm91bmQgZm9yOiAiK24pfX0sX2NoZWNrQmV0d2VlbkNvbnN0cmFpbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoIl9fbWluVmFsX18iKSxlPXRoaXMuZ2V0KCJfX21heFZhbF9fIik7aWYodHx8ZSl7aWYoIXQpcmV0dXJue19fbWluVmFsX186Ik1pbiB2YWx1ZSBpcyByZXF1aXJlZCJ9O2lmKCFlKXJldHVybntfX21heFZhbF9fOiJNYXggdmFsdWUgaXMgcmVxdWlyZWQifTt2YXIgbj10aGlzLl9jaGVja0ludGVnZXJDb25zdHJhaW50cygiX19taW5WYWxfXyIsIk1pbiB2YWx1ZSIpO3JldHVybiBuP246KG49dGhpcy5fY2hlY2tJbnRlZ2VyQ29uc3RyYWludHMoIl9fbWF4VmFsX18iLCJNYXggdmFsdWUiKSxuP246K3Q+PStlP3tfX21heFZhbF9fOiJNYXggdmFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiB2YWwifTp2b2lkIDApfX0sX2NoZWNrR3JlYXRlclRoYW5Db25zdHJhaW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoIl9fbWluVmFsX18iKTtpZih0KXt2YXIgZT10aGlzLl9jaGVja0ludGVnZXJDb25zdHJhaW50cygiX19taW5WYWxfXyIsIk1pbiB2YWx1ZSIpO3JldHVybiBlP2U6dm9pZCAwfX0sX2NoZWNrTGVzc1RoYW5Db25zdHJhaW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoIl9fbWF4VmFsX18iKTtpZih0KXt2YXIgZT10aGlzLl9jaGVja0ludGVnZXJDb25zdHJhaW50cygiX19tYXhWYWxfXyIsIk1heCB2YWx1ZSIpO3JldHVybiBlP2U6dm9pZCAwfX0sX2NoZWNrRXF1YWxzQ29uc3RyYWludDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0KCJfX2VxdWFsc19fIik7aWYodCl7dmFyIGU9dGhpcy5fY2hlY2tJbnRlZ2VyQ29uc3RyYWludHMoIl9fZXF1YWxzX18iLCJDb25zdHJhaW50Iik7cmV0dXJuIGU/ZTp2b2lkIDB9fSxfY2hlY2tJbnRlZ2VyQ29uc3RyYWludHM6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmdldCh0KSxpPXt9O3JldHVybiBpc05hTihuKT8oaVt0XT1lKyIgbXVzdCBiZSBhIG51bWJlciIsaSk6K248MD8oaVt0XT1lKyIgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIsaSk6dm9pZCAwfSxfc2V0TWFzdGVyT3ZlcnJpZGU6ZnVuY3Rpb24oZSl7aWYoZS5zZXR0aW5ncyYmZS5zZXR0aW5ncy5tYXN0ZXJPdmVycmlkZSYmZS5zZXR0aW5ncy5tYXN0ZXJPdmVycmlkZSl7dmFyIG49ZS5zZXR0aW5ncy5tYXN0ZXJPdmVycmlkZS52YWx1ZTt0LmlzQXJyYXkobikmJiF0LmlzRW1wdHkobik/KGUuX19tYXN0ZXJPdmVycmlkZVR5cGVfXz0iT1ZFUlJJREUiLGUuX19tYXN0ZXJPdmVycmlkZVZhbHVlX189bnx8W10pOmUuX19tYXN0ZXJPdmVycmlkZVR5cGVfXz1lLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlLnR5cGV9ZWxzZSBlLl9fbWFzdGVyT3ZlcnJpZGVUeXBlX189IklOSEVSSVQifSxfc2V0UmFuZ2VDb25zdHJhaW50czpmdW5jdGlvbih0KXt0Ll9fZGlzcGxheVR5cGVfXz09bD8odC5fX21pblZhbF9fPXQubWluTGVuZ3RoLHQuX19tYXhWYWxfXz10Lm1heExlbmd0aCk6dC5fX2Rpc3BsYXlUeXBlX18hPXUmJnQuX19kaXNwbGF5VHlwZV9fIT1jfHwodC5fX21pblZhbF9fPXQubWluaW11bSx0Ll9fbWF4VmFsX189dC5tYXhpbXVtKSx0Ll9fbWluVmFsX18mJnQuX19tYXhWYWxfXz90Ll9fbWluVmFsX189PT10Ll9fbWF4VmFsX18/KHQuX19jb25zdHJhaW50X189ImVxdWFscyIsdC5fX2VxdWFsc19fPXQuX19taW5WYWxfXyk6dC5fX2NvbnN0cmFpbnRfXz0iYmV0d2VlbiI6IXQuX19taW5WYWxfXyYmdC5fX21heFZhbF9fP3QuX19jb25zdHJhaW50X189Imxlc3NUaGFuIjohdC5fX21heFZhbF9fJiZ0Ll9fbWluVmFsX18mJih0Ll9fY29uc3RyYWludF9fPSJncmVhdGVyVGhhbiIpfSxfc2V0U3ViU2NoZW1hczpmdW5jdGlvbih0KXt0LmFsbE9mP3Quc3ViU2NoZW1hcz1uZXcgZih0LmFsbE9mLHtwYXJzZTohMH0pOnQub25lT2Y/dC5zdWJTY2hlbWFzPW5ldyBtKHQub25lT2Yse3BhcnNlOiEwfSk6dC5ub25lT2YmJih0LnN1YlNjaGVtYXM9bmV3IF8odC5ub25lT2Yse3BhcnNlOiEwfSkpfSxfdXBkYXRlRGlzcGxheVR5cGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgidHlwZSIpO2lmKHQ9PT1sJiZ0aGlzLmdldCgiZm9ybWF0IikpdGhpcy5zZXQoIl9fZGlzcGxheVR5cGVfXyIsci5GT1JNQVRESVNQTEFZVFlQRVt0aGlzLmdldCgiZm9ybWF0IildKTtlbHNle3ZhciBlPXRoaXMuZ2V0KCJpdGVtcyIpP3RoaXMuZ2V0KCJpdGVtcyIpLnR5cGU6dm9pZCAwO3QmJmU/dGhpcy5zZXQoIl9fZGlzcGxheVR5cGVfXyIsci5BUlJBWURJU1BMQVlUWVBFW2QodCxlKV0pOnRoaXMuc2V0KCJfX2Rpc3BsYXlUeXBlX18iLHQpfX0sX3ZhbGlkYXRlRW51bU9uZU9mOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXQoIl9faXNFbnVtRGVmaW5lZEFuZFN1cHBvcnRlZF9fIikpe3ZhciB0PXRoaXMuZ2V0KCJfX29uZU9mX18iKXx8W10sZT1zLmlzT25lT2ZFbnVtSGF2ZUNvbnRlbnQodCk7cmV0dXJuIGU/dm9pZCAwOntfX29uZU9mX186YSgibW9kZWwudmFsaWRhdGlvbi5maWVsZC5ibGFuayIsImNvdXJhZ2UiKX19fSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgdD1uLnByb3RvdHlwZS50b0pTT04uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0LnNldHRpbmdzPXtwZXJtaXNzaW9uczp7fX0sdC5zZXR0aW5ncy5wZXJtaXNzaW9ucy5TRUxGPXRoaXMuZ2V0KCJfX3VzZXJQZXJtaXNzaW9uX18iKSx0aGlzLmdldCgiX19pc1NlbnNpdGl2ZV9fIikmJih0LnNldHRpbmdzLnNlbnNpdGl2ZT10aGlzLmdldCgiX19pc1NlbnNpdGl2ZV9fIikpLCJpbWFnZSI9PT10aGlzLmdldCgidHlwZSIpJiYodC50eXBlPSJvYmplY3QiLHQuZXh0ZW5kZWRUeXBlPSJpbWFnZSIpLHQ9dGhpcy5fZW51bUFzc2lnbm1lbnQodCksdD10aGlzLl9hdHRyaWJ1dGVPdmVycmlkZVRvSnNvbih0KSx0PXRoaXMuX25vcm1hbGl6ZVVuaW9uVmFsdWUodCl9LF9hdHRyaWJ1dGVPdmVycmlkZVRvSnNvbjpmdW5jdGlvbihuKXt2YXIgaT10aGlzLmdldCgiX19tYXN0ZXJPdmVycmlkZVR5cGVfXyIpLHI9dGhpcy5nZXQoIl9fbWFzdGVyT3ZlcnJpZGVWYWx1ZV9fIik7cmV0dXJuIk9LVEFfTUFTVEVSRUQiPT09aT9uLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlPXt0eXBlOiJPS1RBX01BU1RFUkVEIn06Ik9WRVJSSURFIj09PWkmJihuLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlPXt0eXBlOiJPUkRFUkVEX0xJU1QiLHZhbHVlOltdfSxyIGluc3RhbmNlb2YgZT90LmVhY2goci50b0pTT04oKSxmdW5jdGlvbih0KXtuLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlLnZhbHVlLnB1c2godC5pZCl9KTpyIGluc3RhbmNlb2YgQXJyYXkmJihuLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlLnZhbHVlPXIpLHQuaXNFbXB0eShuLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlLnZhbHVlKSYmZGVsZXRlIG4uc2V0dGluZ3MubWFzdGVyT3ZlcnJpZGUpLCJJTkhFUklUIj09PWkmJmRlbGV0ZSBuLnNldHRpbmdzLm1hc3Rlck92ZXJyaWRlLG59LF9ub3JtYWxpemVVbmlvblZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldCgiX19pc05vbmVTY29wZUFycmF5VHlwZV9fIil8fCh0LnVuaW9uPXZvaWQgMCksdH0sX2VudW1Bc3NpZ25tZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldCgiX19pc0VudW1EZWZpbmVkQW5kU3VwcG9ydGVkX18iKT8oImFycmF5Ij09PXRoaXMuZ2V0KCJ0eXBlIik/KGRlbGV0ZSB0Lml0ZW1zWyJlbnVtIl0sdC5pdGVtcy5vbmVPZj10aGlzLmdldCgiX19vbmVPZl9fIikpOihkZWxldGUgdFsiZW51bSJdLHQub25lT2Y9dGhpcy5nZXQoIl9fb25lT2ZfXyIpKSx0KTp0fSxfdXBkYXRlVHlwZUZvcm1hdENvbnN0cmFpbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoIl9fZGlzcGxheVR5cGVfXyIpO3RoaXMudW5zZXQoImZvcm1hdCIse3NpbGVudDohMH0pLHRoaXMudW5zZXQoIml0ZW1zIix7c2lsZW50OiEwfSksdGhpcy5zZXQoci5ESVNQTEFZVFlQRVNbdF0pLHQhPWMmJnQhPXUmJih0aGlzLnVuc2V0KCJtaW5pbXVtIiksdGhpcy51bnNldCgibWF4aW11bSIpKSx0IT1sJiYodGhpcy51bnNldCgibWluTGVuZ3RoIiksdGhpcy51bnNldCgibWF4TGVuZ3RoIikpLHRoaXMudW5zZXQoIl9fbWluVmFsX18iKSx0aGlzLnVuc2V0KCJfX21heFZhbF9fIiksdGhpcy51bnNldCgiX19lcXVhbHNfXyIpLHRoaXMuc2V0KCJfX3N1cHBvcnRzTWluTWF4X18iLHIuU1VQUE9SVFNNSU5NQVguaW5kZXhPZih0aGlzLmdldCgiX19kaXNwbGF5VHlwZV9fIikpIT0tMSl9LF91cGRhdGVNaW5NYXg6ZnVuY3Rpb24oKXt2YXIgdCxlLG49dGhpcy5nZXQoIl9fZGlzcGxheVR5cGVfXyIpO249PT1sPyh0PSJtaW5MZW5ndGgiLGU9Im1heExlbmd0aCIpOm4hPXUmJm4hPWN8fCh0PSJtaW5pbXVtIixlPSJtYXhpbXVtIiksdGhpcy5nZXQoIl9fbWluVmFsX18iKT90aGlzLnNldCh0LHBhcnNlSW50KHRoaXMuZ2V0KCJfX21pblZhbF9fIiksMTApKTp0aGlzLnVuc2V0KHQpLHRoaXMuZ2V0KCJfX21heFZhbF9fIik/dGhpcy5zZXQoZSxwYXJzZUludCh0aGlzLmdldCgiX19tYXhWYWxfXyIpLDEwKSk6dGhpcy51bnNldChlKX0sX2NvbnZlcnRFcXVhbHNUb01pbk1heDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0KCJfX2VxdWFsc19fIik7dCYmKHRoaXMuc2V0KCJfX21pblZhbF9fIix0KSx0aGlzLnNldCgiX19tYXhWYWxfXyIsdCkpfSxfc2V0Q29uc3RyYWludFRleHQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgiX19jb25zdHJhaW50X18iKSxlPXRoaXMuZ2V0KCJfX21pblZhbF9fIiksbj10aGlzLmdldCgiX19tYXhWYWxfXyIpLGk9dGhpcy5nZXQoIl9fZXF1YWxzX18iKTtzd2l0Y2godCl7Y2FzZSJiZXR3ZWVuIjp0aGlzLnNldCgiX19jb25zdHJhaW50VGV4dF9fIiwiQmV0d2VlbiAiK2UrIiBhbmQgIituKTticmVhaztjYXNlImdyZWF0ZXJUaGFuIjp0aGlzLnNldCgiX19jb25zdHJhaW50VGV4dF9fIiwiR3JlYXRlciB0aGFuICIrZSk7YnJlYWs7Y2FzZSJsZXNzVGhhbiI6dGhpcy5zZXQoIl9fY29uc3RyYWludFRleHRfXyIsIkxlc3MgdGhhbiAiK24pO2JyZWFrO2Nhc2UiZXF1YWxzIjp0aGlzLnNldCgiX19jb25zdHJhaW50VGV4dF9fIiwiRXF1YWxzICIraSk7YnJlYWs7ZGVmYXVsdDp0aGlzLnNldCgiX19jb25zdHJhaW50VGV4dF9fIiwiIil9fSxjbGVhbnVwOmZ1bmN0aW9uKCl7Imxlc3NUaGFuIj09PXRoaXMuZ2V0KCJfX2NvbnN0cmFpbnRfXyIpP3RoaXMudW5zZXQoIl9fbWluVmFsX18iKToiZ3JlYXRlclRoYW4iPT09dGhpcy5nZXQoIl9fY29uc3RyYWludF9fIikmJnRoaXMudW5zZXQoIl9fbWF4VmFsX18iKSx0aGlzLmdldCgic2NvcGUiKSE9PXIuU0NPUEUuU1lTVEVNJiYodGhpcy5nZXQoIl9faXNTY29wZVNlbGZfXyIpPT09ITA/dGhpcy5zZXQoe3Njb3BlOnIuU0NPUEUuU0VMRn0se3NpbGVudDohMH0pOnRoaXMudW5zZXQoInNjb3BlIikpfSxpc0VudW1UeXBlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmdldEVudW1WYWx1ZXMoKX0sZ2V0RW51bVZhbHVlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgib25lT2YiKXx8dGhpcy5nZXQoImVudW0iKXx8dGhpcy5nZXQoIml0ZW1zIikmJnRoaXMuZ2V0KCJpdGVtcyIpLm9uZU9mfHx0aGlzLmdldCgiaXRlbXMiKSYmdGhpcy5nZXQoIml0ZW1zIilbImVudW0iXX0sZGV0ZWN0SGFzRW51bURlZmluZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEVudW1WYWx1ZXMoKTt0JiYodGhpcy5zZXQoIl9fb25lT2ZfXyIscy5jb252ZXJ0VG9PbmVPZih0KSksdGhpcy5zZXQoIl9fZW51bURlZmluZWRfXyIsITApKX19KSx2PWUuZXh0ZW5kKHttb2RlbDpnLGNsb25lOmZ1bmM=", "base64"));
  res.write(new Buffer("dGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnRvSlNPTih7dmVyYm9zZTohMH0pLHtwYXJzZTohMH0pfSxhcmVBbGxSZWFkT25seTpmdW5jdGlvbigpe3JldHVybiB0LmFsbCh0aGlzLnBsdWNrKCJfX2lzUmVhZE9ubHlfXyIpKX0sY3JlYXRlTW9kZWxQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGUsbil7dmFyIGk9bi5nZXQoInR5cGUiKTtyZXR1cm4gZVtuLmlkXT10LmNsb25lKHIuRElTUExBWVRZUEVTW2ldKSxyLlNVUFBPUlRTTUlOTUFYLmluZGV4T2YoaSkhPS0xJiYoZVtuLmlkXS5taW5MZW5ndGg9bi5nZXQoIm1pbkxlbmd0aCIpLGVbbi5pZF0ubWF4TGVuZ3RoPW4uZ2V0KCJtYXhMZW5ndGgiKSksInN0cmluZyI9PT1pJiYoZVtuLmlkXS5mb3JtYXQ9bi5nZXQoImZvcm1hdCIpKSxlfSx7fSl9fSk7cmV0dXJue01vZGVsOmcsQ29sbGVjdGlvbjp2fX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig1OTkpLG4oNjQ4KV0scj1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC5fLHI9ZnVuY3Rpb24odCl7dmFyIGU9dC5zcGxpdCgiIiksbj0zLHI9W10sbz1bIiwiLCIuIiwiLSIsIl8iLCIjIiwiQCJdLHM9IiI7cmV0dXJuIGkuZWFjaChlLGZ1bmN0aW9uKHQpe28uaW5kZXhPZih0KT09LTE/cys9dDoocy5sZW5ndGg+PW4mJnIucHVzaChpLmNsb25lKHMpKSxzPSIiKX0pLHMubGVuZ3RoPj1uJiZyLnB1c2goaS5jbG9uZShzKSksci5maWx0ZXIoQm9vbGVhbil9LG89ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4hMTt0PXQudG9Mb3dlckNhc2UoKSxlPWUudG9Mb3dlckNhc2UoKTtmb3IodmFyIG49cih0KSxpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYoZS5pbmRleE9mKG8pIT09LTEpcmV0dXJuITB9cmV0dXJuITF9LHM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQuZ2V0KCJtaW5MZW5ndGgiKSxzPXQuZ2V0KCJtYXhMZW5ndGgiKSxhPXQuZ2V0KCJmb3JtYXQiKTtpZihpLmlzTnVtYmVyKHIpJiZlLmxlbmd0aDxyKXJldHVybiExO2lmKGkuaXNOdW1iZXIocykmJmUubGVuZ3RoPnMpcmV0dXJuITE7aWYoaS5pc1N0cmluZyhhKSl7aWYoIl5bIy91c2VyTmFtZV0iPT09YSl7dmFyIGw9bi5nZXQoInVzZXJOYW1lIiksYz1lO3JldHVybiFvKGwsYyl9aWYoIW5ldyBSZWdFeHAoYSkudGVzdChlKSlyZXR1cm4hMX1yZXR1cm4hMH0sYT1mdW5jdGlvbihlLG4scixvKXt2YXIgYT1uLmdldChlKTtpLmlzU3RyaW5nKGEpJiZyLmVhY2goZnVuY3Rpb24oaSxyKXt2YXIgbD10LiQoIiNzdWJzY2hlbWFzLSIrZSsiIC5zdWJzY2hlbWEtIityKTthP2wuY2hpbGRyZW4oInAiKS5yZW1vdmVDbGFzcygiZGVmYXVsdC1zY2hlbWEiKTpsLmNoaWxkcmVuKCJwIikuYWRkQ2xhc3MoImRlZmF1bHQtc2NoZW1hIiksbC5yZW1vdmVDbGFzcygic3Vic2NoZW1hLXNhdGlzZmllZCBzdWJzY2hlbWEtdW5zYXRpc2ZpZWQgc3Vic2NoZW1hLWVycm9yIikscyhpLGEsbik/KGwuYWRkQ2xhc3MoInN1YnNjaGVtYS1zYXRpc2ZpZWQiKSxsLmZpbmQoInAgc3BhbiIpLnJlbW92ZUNsYXNzKCJlcnJvciBlcnJvci0xNi1zbWFsbCIpLGwuZmluZCgicCBzcGFuIikuYWRkQ2xhc3MoImNvbmZpcm0tMTYiKSk6byYmKGwuZmluZCgicCBzcGFuIikucmVtb3ZlQ2xhc3MoImNvbmZpcm0tMTYiKSxsLmZpbmQoInAgc3BhbiIpLmFkZENsYXNzKCJlcnJvciBlcnJvci0xNi1zbWFsbCIpLGwuYWRkQ2xhc3MoInN1YnNjaGVtYS1lcnJvciBzdWJzY2hlbWEtdW5zYXRpc2ZpZWQiKSl9KX0sbD1mdW5jdGlvbih0KXt2YXIgcj1lLmNyZWF0ZUlucHV0T3B0aW9ucyh0KTtyPSJzZWxlY3QiPT09ci50eXBlP2kuZXh0ZW5kKHIse2xhYmVsOnQuZ2V0KCJkZXNjcmlwdGlvbiIpfSk6aS5leHRlbmQocix7bGFiZWw6ITEsImxhYmVsLXRvcCI6ITAscGxhY2Vob2xkZXI6dC5nZXQoImRlc2NyaXB0aW9uIil9KTt2YXIgbz10LmdldCgibmFtZSIpO3N3aXRjaChvKXtjYXNlInVzZXJOYW1lIjpyLmlucHV0PW4sci5wYXJhbXM9e2ljb246InBlcnNvbi0xNi1ncmF5In07YnJlYWs7Y2FzZSJwYXNzd29yZCI6ci50eXBlPSJwYXNzd29yZCIsci5pbnB1dD1uLHIucGFyYW1zPXtpY29uOiJyZW1vdGUtbG9jay0xNiJ9fXZhciBzPXQuZ2V0KCJzdWJTY2hlbWFzIik7cmV0dXJuIHMmJihyLmV2ZW50cz17aW5wdXQ6ZnVuY3Rpb24oKXthKG8sdGhpcy5tb2RlbCxzLCEwKX0sZm9jdXNvdXQ6ZnVuY3Rpb24oKXthKG8sdGhpcy5tb2RlbCxzLCEwKX19KSxyfTtyZXR1cm57Y3JlYXRlSW5wdXRPcHRpb25zOmwsZ2V0VXNlcm5hbWVQYXJ0czpyLHBhc3N3b3JkQ29udGFpbnNVc2VyTmFtZTpvfX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyldLHI9ZnVuY3Rpb24odCl7dmFyIGU9dC5WaWV3LmV4dGVuZCh7aW5kZXg6IiIsbWVzc2FnZToiIiwiY2xhc3MiOmZ1bmN0aW9uKCl7fSxjbGFzc05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4ic3Vic2NoZW1hLXVuc2F0aXNmaWVkIHN1YnNjaGVtYS0iK3RoaXMuaW5kZXh9LHRlbXBsYXRlOidcdCAgICAgIDxwIGNsYXNzPSJkZWZhdWx0LXNjaGVtYSI+XHQgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIGljb24tMTYiLz5cdCAgICAgICAge3ttZXNzYWdlfX1cdCAgICAgIDwvcD5cdCAgICAnLGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybnttZXNzYWdlOnRoaXMubWVzc2FnZX19fSk7cmV0dXJuIHQuVmlldy5leHRlbmQoe2NsYXNzTmFtZToic3Vic2NoZW1hIixjaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YlNjaGVtYXMubWFwKGZ1bmN0aW9uKHQsbil7dmFyIGk9dC5nZXQoImRlc2NyaXB0aW9uIikscj1pO3JldHVybiBlLmV4dGVuZCh7aW5kZXg6bixtZXNzYWdlOnJ9KX0pfX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDYyOCksbig2MjIpLG4oNjIzKV0scj1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gbi5leHRlbmQoe2V2ZW50czp7ImNsaWNrIC5iYWNrLWJ0biI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYmFjaygpfX0sYmFjazpmdW5jdGlvbigpe3RoaXMuc3RhdGUuc2V0KCJuYXZpZ2F0ZURpciIsZS5ESVJFQ1RJT05fQkFDSyksdGhpcy5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIiwiIil9LGNsYXNzTmFtZToicmVnaXN0cmF0aW9uLWNvbXBsZXRlIixNb2RlbDpmdW5jdGlvbigpe30sRm9ybTp7bm9CdXR0b25CYXI6ITAsCglmb3JtQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm5baS5WaWV3KHtWaWV3OnQuVmlldy5leHRlbmQoe3RlbXBsYXRlOidcdCAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRpdGxlLWljb24gaWNvbiBpY29uLTE2IGNvbmZpcm0tMTYtZ3JlZW4iPjwvc3Bhbj5cdCAgICAgICAgICAgICAgPGgyPnt7dGl0bGV9fTwvaDI+XHQgICAgICAgICAgICAgIDxzcGFuPnt7ZGVzY319PC9zcGFuPlx0ICAgICAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi13aWRlIGJhY2stYnRuIiBkYXRhLXNlPSJiYWNrLWxpbmsiPlx0ICAgICAgICAgICAgICAgIHt7aTE4biBjb2RlPSJnb2JhY2siIGJ1bmRsZT0ibG9naW4ifX1cdCAgICAgICAgICAgICAgPC9hPlx0ICAgICAgICAgICAgICAnLGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInVzZXJuYW1lIik7cmV0dXJue2Rlc2M6dC5sb2MoInJlZ2lzdHJhdGlvbi5jb21wbGV0ZS5kZXNjIiwibG9naW4iLFtlXSksdGl0bGU6dC5sb2MoInJlZ2lzdHJhdGlvbi5jb21wbGV0ZS50aXRsZSIsImxvZ2luIil9fX0pfSldfX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig1MTQpLG4oNjIyKSxuKDYyMyksbig3MTcpXSxyPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89dC5fO3JldHVybiBuLmV4dGVuZCh7Y2xhc3NOYW1lOiJjb25zZW50LXJlcXVpcmVkIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5tb2RlbC5zZXQoImV4cGlyZXNBdCIsdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZXhwaXJlc0F0IikpLHRoaXMubW9kZWwuc2V0KCJzY29wZXMiLHRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInNjb3BlcyIpKSx0aGlzLmxpc3RlblRvKHRoaXMuZm9ybSwiY2FuY2VsIixvLmJpbmQodGhpcy5tb2RlbC5jYW5jZWwsdGhpcy5tb2RlbCkpfSxNb2RlbDp7cHJvcHM6e2V4cGlyZXNBdDpbInN0cmluZyIsITBdLHNjb3BlczpbImFycmF5IiwhMF19LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnNlbnQoe2NvbnNlbnQ6e2V4cGlyZXNBdDp0aGlzLmdldCgiZXhwaXJlc0F0Iiksc2NvcGVzOm8ucGx1Y2sodGhpcy5nZXQoInNjb3BlcyIpLCJuYW1lIil9fSl9KX0sY2FuY2VsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5kb1RyYW5zYWN0aW9uKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbmNlbCgpfSkudGhlbihmdW5jdGlvbigpe3ZhciBlPXQuc2V0dGluZ3MuZ2V0KCJjb25zZW50LmNhbmNlbCIpO28uaXNGdW5jdGlvbihlKSYmZSgpfSl9fSxGb3JtOntub0NhbmNlbEJ1dHRvbjohMSxhdXRvU2F2ZTohMCxzYXZlOnQubG9jKCJjb25zZW50LnJlcXVpcmVkLmNvbnNlbnRCdXR0b24iLCJsb2dpbiIpLGNhbmNlbDp0LmxvYygiY29uc2VudC5yZXF1aXJlZC5jYW5jZWxCdXR0b24iLCJsb2dpbiIpLGZvcm1DaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hcHBTdGF0ZTtyZXR1cm5baS5WaWV3KHtWaWV3OnQuVmlldy5leHRlbmQoe2NsYXNzTmFtZToiY29uc2VudC10aXRsZSIsdGVtcGxhdGU6J1x0ICAgICAgICAgICAgICAgIDxwPnt7e2kxOG4gY29kZT0iY29uc2VudC5yZXF1aXJlZC5sYWJlbCIgYnVuZGxlPSJsb2dpbiIgYXJndW1lbnRzPSJhcHBOYW1lO3VzZXJDb25zZW50TmFtZSJ9fX08L3A+XHQgICAgICAgICAgICAgICcsZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2FwcE5hbWU6ZS5lc2NhcGUoInRhcmdldExhYmVsIiksdXNlckNvbnNlbnROYW1lOmUuZXNjYXBlKCJ1c2VyQ29uc2VudE5hbWUiKX19fSl9KSxpLlZpZXcoe1ZpZXc6bmV3IHIoe21vZGVsOnRoaXMubW9kZWx9KX0pLGkuVmlldyh7Vmlldzp0LlZpZXcuZXh0ZW5kKHtjbGFzc05hbWU6ImNvbnNlbnQtZGVzY3JpcHRpb24iLHRlbXBsYXRlOidcdCAgICAgICAgICAgICAgICA8cD57e2kxOG4gY29kZT0iY29uc2VudC5yZXF1aXJlZC5kZXNjcmlwdGlvbiIgYnVuZGxlPSJsb2dpbiJ9fTwvcD5cdCAgICAgICAgICAgICAgICB7eyNpZiB0ZXJtc09mU2VydmljZX19XHQgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0idGVybXMtb2Ytc2VydmljZSIgaHJlZj0ie3t0ZXJtc09mU2VydmljZX19IiB0YXJnZXQ9Il9ibGFuayI+e3tpMThuIGNvZGU9ImNvbnNlbnQucmVxdWlyZWQudGVybXNPZlNlcnZpY2UiIGJ1bmRsZT0ibG9naW4ifX08L2E+XHQgICAgICAgICAgICAgICAgICB7eyNpZiBwcml2YWN5UG9saWN5fX1cdCAgICAgICAgICAgICAgICAgICAgJiM4MjI2XHQgICAgICAgICAgICAgICAgICB7ey9pZn19XHQgICAgICAgICAgICAgICAge3svaWZ9fVx0ICAgICAgICAgICAgICAgIHt7I2lmIHByaXZhY3lQb2xpY3l9fVx0ICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9InByaXZhY3ktcG9saWN5IiBocmVmPSJ7e3ByaXZhY3lQb2xpY3l9fSIgdGFyZ2V0PSJfYmxhbmsiPnt7aTE4biBjb2RlPSJjb25zZW50LnJlcXVpcmVkLnByaXZhY3lQb2xpY3kiIGJ1bmRsZT0ibG9naW4ifX08L2E+XHQgICAgICAgICAgICAgICAge3svaWZ9fVx0ICAgICAgICAgICAgICAnLGdldFRlbXBsYXRlRGF0YTpmdW5jdGlvbigpe3JldHVybnt0ZXJtc09mU2VydmljZTplLmdldCgidGFyZ2V0VGVybXNPZlNlcnZpY2UiKSYmZS5nZXQoInRhcmdldFRlcm1zT2ZTZXJ2aWNlIikuaHJlZixwcml2YWN5UG9saWN5OmUuZ2V0KCJ0YXJnZXRQcml2YWN5UG9saWN5IikmJmUuZ2V0KCJ0YXJnZXRQcml2YWN5UG9saWN5IikuaHJlZn19fSl9KV19fX0pfS5hcHBseShlLGkpLCEodm9pZCAwIT09ciYmKHQuZXhwb3J0cz1yKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyO2k9W24oMzU3KSxuKDcxOCldLHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5WaWV3LmV4dGVuZCh7Y2xhc3NOYW1lOiJzY29wZS1saXN0Iix0ZW1wbGF0ZTonXHQgICAgICA8ZGl2IGNsYXNzPSJzY29wZS1saXN0LXdyYXBwZXIiIC8+XHQgICAgJyxwb3N0UmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm1vZGVsLmdldCgic2NvcGVzIikuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaT1uZXcgZSh7bmFtZTpuLmRpc3BsYXlOYW1lfHxuLm5hbWUsZGVzY3JpcHRpb246bi5kZXNjcmlwdGlvbn0pO3QuJCgiLnNjb3BlLWxpc3Qtd3JhcHBlciIpLmFwcGVuZChpLiRlbCl9KX19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1Nyksbig1NTcpXSxyPWZ1bmN0aW9uKHQpe3JldHVybiB0LlZpZXcuZXh0ZW5kKHtjbGFzc05hbWU6InNjb3BlLWl0ZW0iLHRlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9InNjb3BlLWl0ZW0tdGV4dCI+XHQgICAgICAgIDxwPnt7bmFtZX19PC9wPlx0ICAgICAgPC9kaXY+XHQgICAgICB7eyNpZiBkZXNjcmlwdGlvbn19XHQgICAgICAgIDxzcGFuIGNsYXNzPSJzY29wZS1pdGVtLXRvb2x0aXAgaWNvbiBpbmZvLTE2LWdyYXkiIC8+XHQgICAgICB7ey9pZn19XHQgICAgJyxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX0scG9zdFJlbmRlcjpmdW5jdGlvbigpe3RoaXMuJCgiLnNjb3BlLWl0ZW0tdG9vbHRpcCIpLnF0aXAoe2NvbnRlbnQ6e3RleHQ6dGhpcy5vcHRpb25zLmRlc2NyaXB0aW9ufSxzdHlsZTp7Y2xhc3Nlczoib2t0YS1zaWduLWluLXRvb2x0aXAgcXRpcC1jdXN0b20gcXRpcC1zaGFkb3cifSxwb3NpdGlvbjp7bXk6ImJvdHRvbSByaWdodCIsdGFyZ2V0OiJtb3VzZSJ9fSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oMzQ2KSxuKDY0MSksbig3MjApLG4oNjQwKV0scj1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXQuXztyZXR1cm4gdC5WaWV3LmV4dGVuZCh7dGVtcGxhdGU6J1x0ICAgICAgPGRpdiBjbGFzcz0iYmVhY29uLWJsYW5rIGF1dGgtYmVhY29uIj5cdCAgICAgICAgPGRpdiBjbGFzcz0iYmVhY29uLWJsYW5rIGpzLWJsYW5rLWJlYWNvbi1ib3JkZXIgYXV0aC1iZWFjb24tYm9yZGVyIj48L2Rpdj5cdCAgICAgIDwvZGl2Plx0ICAgICAgPGRpdiBjbGFzcz0iYmctaGVscGVyIGF1dGgtYmVhY29uIGF1dGgtYmVhY29uLWZhY3RvciB7e2NsYXNzTmFtZX19IiBkYXRhLXNlPSJmYWN0b3ItYmVhY29uIj5cdCAgICAgICAgPGRpdiBjbGFzcz0ib2t0YS1zaWduLWluLWJlYWNvbi1ib3JkZXIgYXV0aC1iZWFjb24tYm9yZGVyIj48L2Rpdj5cdCAgICAgIDwvZGl2Plx0ICAgICAgPGRpdiBkYXRhLXR5cGU9ImZhY3Rvci10eXBlcy1kcm9wZG93biIgY2xhc3M9ImZhY3RvcnMtZHJvcGRvd24td3JhcCI+PC9kaXY+XHQgICAgJyxldmVudHM6eyJjbGljayAuYXV0aC1iZWFjb24tZmFjdG9yIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiQoIi5kcm9wZG93biAub3B0aW9ucyIpLnRvZ2dsZSgpfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hcHBTdGF0ZS5zZXQoImJlYWNvblR5cGUiLCJmYWN0b3IiKX0sZ2V0VGVtcGxhdGVEYXRhOmZ1bmN0aW9uKCl7dmFyIHQsZSxuPXRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoImZhY3RvcnMiKTtyZXR1cm4gdD1uP24uZmluZFdoZXJlKG8ucGljayh0aGlzLm9wdGlvbnMsInByb3ZpZGVyIiwiZmFjdG9yVHlwZSIpKTpuZXcgci5Nb2RlbCh0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJmYWN0b3IiKSx0aGlzLnRvSlNPTigpKSxlPXQuZ2V0KCJpY29uQ2xhc3NOYW1lIikse2NsYXNzTmFtZTplfHwiIn19LHBvc3RSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYW5pbWF0ZSYmdGhpcy4kKCIuYXV0aC1iZWFjb24tZmFjdG9yIikuZmFkZUluKDIwMCk7dmFyIHQ9dGhpcy5vcHRpb25zLmFwcFN0YXRlO3QuZ2V0KCJoYXNNZmFSZXF1aXJlZE9wdGlvbnMiKSYmdGhpcy5hZGQoaSwnW2RhdGEtdHlwZT0iZmFjdG9yLXR5cGVzLWRyb3Bkb3duIl0nKX0sZmFkZU91dDpmdW5jdGlvbigpe3ZhciB0PWUuZGVmZXIoKTtyZXR1cm4gdGhpcy4kKCIuYXV0aC1iZWFjb24tZmFjdG9yIikuZmFkZU91dCgyMDAsZnVuY3Rpb24oKXt0LnJlc29sdmUoKX0pLHQucHJvbWlzZX0sZXF1YWxzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnRoaXMgaW5zdGFuY2VvZiB0JiZlLnByb3ZpZGVyPT09dGhpcy5vcHRpb25zLnByb3ZpZGVyJiYoZS5mYWN0b3JUeXBlPT09dGhpcy5vcHRpb25zLmZhY3RvclR5cGV8fG4uaXNPa3RhVmVyaWZ5KGUucHJvdmlkZXIsZS5mYWN0b3JUeXBlKSYmbi5pc09rdGFWZXJpZnkodGhpcy5vcHRpb25zLnByb3ZpZGVyLHRoaXMub3B0aW9ucy5mYWN0b3JUeXBlKSl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNzIxKSxuKDU2OCldLHI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuXyxyPXQuJDtyZXR1cm4gcihkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24odCl7dmFyIGU9cih0LnRhcmdldCksbj1lLmNsb3Nlc3QoIi5vcHRpb24tc2VsZWN0ZWQiKS5sZW5ndGg+MCYmZS5jbG9zZXN0KCIuZHJvcGRvd24iKS5sZW5ndGg+MDtufHxyKCIuZHJvcGRvd24gLm9wdGlvbnMiKS5oaWRlKCl9KSxuLmV4dGVuZCh7Y2xhc3NOYW1lOiJiZy1oZWxwZXIgaWNvbi1idXR0b24iLGV2ZW50czp7ImNsaWNrIGEub3B0aW9uLXNlbGVjdGVkIjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksaS5yZXN1bHQodGhpcywiZGlzYWJsZWQiKT90LnN0b3BQcm9wYWdhdGlvbigpOnRoaXMuJCgiLm9wdGlvbnMiKS50b2dnbGUoKX0sImNsaWNrIC5kcm9wZG93bi1kaXNhYmxlZCI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCl9fSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5hZGRPcHRpb24oZS5nZXREcm9wZG93bk9wdGlvbigiVElUTEUiKSksdGhpcy5vcHRpb25zLmFwcFN0YXRlLmdldCgiZmFjdG9ycyIpLmVhY2goZnVuY3Rpb24odCl7dGhpcy5hZGRPcHRpb24oZS5nZXREcm9wZG93bk9wdGlvbih0LmdldCgiZmFjdG9yTmFtZSIpKSx7bW9kZWw6dH0pLHRoaXMubGlzdGVuVG8odGhpcy5sYXN0KCksIm9wdGlvbnM6dG9nZ2xlIixmdW5jdGlvbigpe3RoaXMuJCgiLm9wdGlvbnMiKS5oaWRlKCl9KX0sdGhpcyl9fSl9LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI7aT1bbigzNTcpLG4oNjI2KV0scj1mdW5jdGlvbih0LGUpe3ZhciBuPXQuXyxpPWZ1bmN0aW9uKHQpe3ZhciBuPWUuY3JlYXRlVmVyaWZ5VXJsKHQuZ2V0KCJwcm92aWRlciIpLHQuZ2V0KCJmYWN0b3JUeXBlIikpLGk9dGhpczt0aGlzLm1vZGVsLm1hbmFnZVRyYW5zYWN0aW9uKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIk1GQV9DSEFMTEVOR0UiPT09dC5zdGF0dXMmJnQucHJldj90LnByZXYoKS50aGVuKGZ1bmN0aW9uKHQpe2kudHJpZ2dlcigib3B0aW9uczp0b2dnbGUiKSxlKHQpLGkub3B0aW9ucy5hcHBTdGF0ZS50cmlnZ2VyKCJuYXZpZ2F0ZSIsbil9KTooaS50cmlnZ2VyKCJvcHRpb25zOnRvZ2dsZSIpLHZvaWQgaS5vcHRpb25zLmFwcFN0YXRlLnRyaWdnZXIoIm5hdmlnYXRlIixuKSl9KX0scj17VElUTEU6e3RpdGxlOm4ucGFydGlhbCh0LmxvYywibWZhLmZhY3RvcnMuZHJvcGRvd24udGl0bGUiLCJsb2dpbiIpLGNsYXNzTmFtZToiZHJvcGRvd24tbGlzdC10aXRsZSJ9LE9LVEFfVkVSSUZZOntpY29uOiJmYWN0b3ItaWNvbiBtZmEtb2t0YS12ZXJpZnktMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LE9LVEFfVkVSSUZZX1BVU0g6e2ljb246ImZhY3Rvci1pY29uIG1mYS1va3RhLXZlcmlmeS0zMCIsdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXQoImZhY3RvckxhYmVsIil9LGFjdGlvbjpmdW5jdGlvbigpe2kuY2FsbCh0aGlzLHRoaXMubW9kZWwpfX0sR09PR0xFX0FVVEg6e2ljb246ImZhY3Rvci1pY29uIG1mYS1nb29nbGUtYXV0aC0zMCIsdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXQoImZhY3RvckxhYmVsIil9LGFjdGlvbjpmdW5jdGlvbigpe2kuY2FsbCh0aGlzLHRoaXMubW9kZWwpfX0sU1lNQU5URUNfVklQOntpY29uOiJmYWN0b3ItaWNvbiBtZmEtc3ltYW50ZWMtMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LFJTQV9TRUNVUklEOntpY29uOiJmYWN0b3ItaWNvbiBtZmEtcnNhLTMwIix0aXRsZTpuLnBhcnRpYWwodC5sb2MsImZhY3Rvci50b3RwSGFyZC5yc2FTZWN1cklkIiwibG9naW4iKSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LE9OX1BSRU06e2ljb246ImZhY3Rvci1pY29uIG1mYS1vbnByZW0tMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LERVTzp7aWNvbjoiZmFjdG9yLWljb24gbWZhLWR1by0zMCIsdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXQoImZhY3RvckxhYmVsIil9LGFjdGlvbjpmdW5jdGlvbigpe2kuY2FsbCh0aGlzLHRoaXMubW9kZWwpfX0sRFVPX1BVU0g6e2ljb246ImR1by1wdXNoLTE2IixjbGFzc05hbWU6InN1Ym9wdGlvbiIsdGl0bGU6bi5wYXJ0aWFsKHQubG9jLCJtZmEuZHVvU2VjdXJpdHkucHVzaCIsImxvZ2luIixbIlhYWC1YWFgtNzg5MCJdKX0sRFVPX1NNUzp7aWNvbjoiZHVvLXNtcy0xNiIsY2xhc3NOYW1lOiJzdWJvcHRpb24iLHRpdGxlOm4ucGFydGlhbCh0LmxvYywibWZhLmR1b1NlY3VyaXR5LnNtcyIsImxvZ2luIixbIlhYWC1YWFgtNzg5MCJdKX0sRFVPX0NBTEw6e2ljb246ImR1by1jYWxsLTE2IixjbGFzc05hbWU6InN1Ym9wdGlvbiIsdGl0bGU6bi5wYXJ0aWFsKHQubG9jLCJtZmEuZHVvU2VjdXJpdHkuY2FsbCIsImxvZ2luIixbIlhYWC1YWFgtNzg5MCJdKX0sWVVCSUtFWTp7aWNvbjoiZmFjdG9yLWljb24gbWZhLXl1YmlrZXktMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LFNNUzp7aWNvbjoiZmFjdG9yLWljb24gbWZhLXNtcy0zMCIsdGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5nZXQoImZhY3RvckxhYmVsIil9LGFjdGlvbjpmdW5jdGlvbigpe2kuY2FsbCh0aGlzLHRoaXMubW9kZWwpfX0sQ0FMTDp7aWNvbjoiZmFjdG9yLWljb24gbWZhLWNhbGwtMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LFFVRVNUSU9OOntpY29uOiJmYWN0b3ItaWNvbiBtZmEtcXVlc3Rpb24tMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LFdJTkRPV1NfSEVMTE86e2ljb246ImZhY3Rvci1pY29uIG1mYS13aW5kb3dzLWhlbGxvLTMwIix0aXRsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLmdldCgiZmFjdG9yTGFiZWwiKX0sYWN0aW9uOmZ1bmN0aW9uKCl7aS5jYWxsKHRoaXMsdGhpcy5tb2RlbCl9fSxVMkY6e2ljb246ImZhY3Rvci1pY29uIG1mYS11MmYtMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19LEVNQUlMOntpY29uOiJmYWN0b3ItaWNvbiBtZmEtZW1haWwtMzAiLHRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0KCJmYWN0b3JMYWJlbCIpfSxhY3Rpb246ZnVuY3Rpb24oKXtpLmNhbGwodGhpcyx0aGlzLm1vZGVsKX19fTtyZXR1cm57Z2V0RHJvcGRvd25PcHRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF19fX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjtpPVtuKDM1NyldLHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuVmlldy5leHRlbmQoe2NsYXNzTmFtZToiY29uc2VudC1iZWFjb24iLHRlbXBsYXRlOidcdCAgICAgIDxkaXYgY2xhc3M9ImxvZ28td3JhcHBlciBjb25zZW50LWJlYWNvbi11c2VyIj5cdCAgICAgICAgPGRpdiBjbGFzcz0iY29uc2VudC1iZWFjb24tYm9yZGVyIj5cdCAgICAgICAgICA8c3BhbiBjbGFzcz0idXNlci1sb2dvIGljb24gcGVyc29uLTE2LWdyYXkiIC8+XHQgICAgICAgIDwvZGl2Plx0ICAgICAgPC9kaXY+XHQgICAgICA8ZGl2IGNsYXNzPSJhcnJvd3Mtd3JhcHBlciI+XHQgICAgICAgIDxkaXYgY2xhc3M9ImFycm93LWxlZnQiPlx0ICAgICAgICAgIDxzcGFuIGNsYXNzPSJhcnJvdyBpY29uIGFycm93LXJpZ2h0LTE2IiAvPlx0ICAgICAgICA8L2Rpdj5cdCAgICAgICAgPGRpdiBjbGFzcz0iYXJyb3ctcmlnaHQiPlx0ICAgICAgICAgIDxzcGFuIGNsYXNzPSJhcnJvdyBpY29uIGFycm93LWxlZnQtMTYiIC8+XHQgICAgICAgIDwvZGl2Plx0ICAgICAgPC9kaXY+XHQgICAgICA8ZGl2IGNsYXNzPSJsb2dvLXdyYXBwZXIgY29uc2VudC1iZWFjb24tY2xpZW50Ij5cdCAgICAgICAgPGRpdiBjbGFzcz0iY29uc2VudC1iZWFjb24tYm9yZGVyIi8+XHQgICAgICAgICAge3sjaWYgY2xpZW50TG9nb319XHQgICAgICAgICAgICA8aW1nIGNsYXNzPSJjbGllbnQtbG9nbyIgc3JjPSJ7e2NsaWVudExvZ299fSIgLz5cdCAgICAgICAgICB7ey9pZn19XHQgICAgICAgIDwvZGl2Plx0ICAgICAgPC9kaXY+XHQgICAgJyxnZXRUZW1wbGF0ZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Y2xpZW50TG9nbzp0aGlzLm9wdGlvbnMuYXBwU3RhdGUuZ2V0KCJ0YXJnZXRMb2dvIikmJnRoaXMub3B0aW9ucy5hcHBTdGF0ZS5nZXQoInRhcmdldExvZ28iKS5ocmVmfX0sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzIGluc3RhbmNlb2YgdH19KX0uYXBwbHkoZSxpKSwhKHZvaWQgMCE9PXImJih0LmV4cG9ydHM9cikpfV0pfSk7CgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiEKCSAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjEuMTIuMQoJICogaHR0cDovL2pxdWVyeS5jb20vCgkgKgoJICogSW5jbHVkZXMgU2l6emxlLmpzCgkgKiBodHRwOi8vc2l6emxlanMuY29tLwoJICoKCSAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCgkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKCSAqCgkgKiBEYXRlOiAyMDE2LTAyLTIyVDE5OjA3WgoJICovCgoJKGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7CgoJCWlmICggdHlwZW9mIG1vZHVsZSA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAib2JqZWN0IiApIHsKCQkJLy8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YAoJCQkvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LgoJCQkvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YAoJCQkvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy4KCQkJLy8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC4KCQkJLy8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZSgianF1ZXJ5Iikod2luZG93KTsKCQkJLy8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby4KCQkJbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgPwoJCQkJZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOgoJCQkJZnVuY3Rpb24oIHcgKSB7CgkJCQkJaWYgKCAhdy5kb2N1bWVudCApIHsKCQkJCQkJdGhyb3cgbmV3IEVycm9yKCAialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIgKTsKCQkJCQl9CgkJCQkJcmV0dXJuIGZhY3RvcnkoIHcgKTsKCQkJCX07CgkJfSBlbHNlIHsKCQkJZmFjdG9yeSggZ2xvYmFsICk7CgkJfQoKCS8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0Cgl9KHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7CgoJLy8gU3VwcG9ydDogRmlyZWZveCAxOCsKCS8vIENhbid0IGJlIGluIHN0cmljdCBtb2RlLCBzZXZlcmFsIGxpYnMgaW5jbHVkaW5nIEFTUC5ORVQgdHJhY2UKCS8vIHRoZSBzdGFjayB2aWEgYXJndW1lbnRzLmNhbGxlci5jYWxsZWUgYW5kIEZpcmVmb3ggZGllcyBpZgoJLy8geW91IHRyeSB0byB0cmFjZSB0aHJvdWdoICJ1c2Ugc3RyaWN0IiBjYWxsIGNoYWlucy4gKCMxMzMzNSkKCS8vInVzZSBzdHJpY3QiOwoJdmFyIGRlbGV0ZWRJZHMgPSBbXTsKCgl2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7CgoJdmFyIHNsaWNlID0gZGVsZXRlZElkcy5zbGljZTsKCgl2YXIgY29uY2F0ID0gZGVsZXRlZElkcy5jb25jYXQ7CgoJdmFyIHB1c2ggPSBkZWxldGVkSWRzLnB1c2g7CgoJdmFyIGluZGV4T2YgPSBkZWxldGVkSWRzLmluZGV4T2Y7CgoJdmFyIGNsYXNzMnR5cGUgPSB7fTsKCgl2YXIgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nOwoKCXZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5OwoKCXZhciBzdXBwb3J0ID0ge307CgoKCgl2YXIKCQl2ZXJzaW9uID0gIjEuMTIuMSIsCgoJCS8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5CgkJalF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkgewoKCQkJLy8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnCgkJCS8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpCgkJCXJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7CgkJfSwKCgkJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIElFPDkKCQkvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1AKCQlydHJpbSA9IC9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZywKCgkJLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nCgkJcm1zUHJlZml4ID0gL14tbXMtLywKCQlyZGFzaEFscGhhID0gLy0oW1xkYS16XSkvZ2ksCgoJCS8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKCkKCQlmY2FtZWxDYXNlID0gZnVuY3Rpb24oIGFsbCwgbGV0dGVyICkgewoJCQlyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7CgkJfTsKCglqUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0gewoKCQkvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkCgkJanF1ZXJ5OiB2ZXJzaW9uLAoKCQljb25zdHJ1Y3RvcjogalF1ZXJ5LAoKCQkvLyBTdGFydCB3aXRoIGFuIGVtcHR5IHNlbGVjdG9yCgkJc2VsZWN0b3I6ICIiLAoKCQkvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDAKCQlsZW5ndGg6IDAsCgoJCXRvQXJyYXk6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApOwoJCX0sCgoJCS8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1IKCQkvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheQoJCWdldDogZnVuY3Rpb24oIG51bSApIHsKCQkJcmV0dXJuIG51bSAhPSBudWxsID8KCgkJCQkvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0CgkJCQkoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6CgoJCQkJLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheQoJCQkJc2xpY2UuY2FsbCggdGhpcyApOwoJCX0sCgoJCS8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2sKCQkvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldCkKCQlwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHsKCgkJCS8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0CgkJCXZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTsKCgkJCS8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpCgkJCXJldC5wcmV2T2JqZWN0ID0gdGhpczsKCQkJcmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7CgoJCQkvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldAoJCQlyZXR1cm4gcmV0OwoJCX0sCgoJCS8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuCgkJZWFjaDogZnVuY3Rpb24o", "base64"));
  res.write(new Buffer("IGNhbGxiYWNrICkgewoJCQlyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrICk7CgkJfSwKCgkJbWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCggdGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7CgkJCQlyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApOwoJCQl9ICkgKTsKCQl9LAoKCQlzbGljZTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7CgkJfSwKCgkJZmlyc3Q6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5lcSggMCApOwoJCX0sCgoJCWxhc3Q6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5lcSggLTEgKTsKCQl9LAoKCQllcTogZnVuY3Rpb24oIGkgKSB7CgkJCXZhciBsZW4gPSB0aGlzLmxlbmd0aCwKCQkJCWogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTsKCQl9LAoKCQllbmQ6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTsKCQl9LAoKCQkvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuCgkJLy8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuCgkJcHVzaDogcHVzaCwKCQlzb3J0OiBkZWxldGVkSWRzLnNvcnQsCgkJc3BsaWNlOiBkZWxldGVkSWRzLnNwbGljZQoJfTsKCglqUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkgewoJCXZhciBzcmMsIGNvcHlJc0FycmF5LCBjb3B5LCBuYW1lLCBvcHRpb25zLCBjbG9uZSwKCQkJdGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sCgkJCWkgPSAxLAoJCQlsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLAoJCQlkZWVwID0gZmFsc2U7CgoJCS8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb24KCQlpZiAoIHR5cGVvZiB0YXJnZXQgPT09ICJib29sZWFuIiApIHsKCQkJZGVlcCA9IHRhcmdldDsKCgkJCS8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXQKCQkJdGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307CgkJCWkrKzsKCQl9CgoJCS8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KQoJCWlmICggdHlwZW9mIHRhcmdldCAhPT0gIm9iamVjdCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHsKCQkJdGFyZ2V0ID0ge307CgkJfQoKCQkvLyBleHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWQKCQlpZiAoIGkgPT09IGxlbmd0aCApIHsKCQkJdGFyZ2V0ID0gdGhpczsKCQkJaS0tOwoJCX0KCgkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgoJCQkvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzCgkJCWlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkgewoKCQkJCS8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3QKCQkJCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQkJCQlzcmMgPSB0YXJnZXRbIG5hbWUgXTsKCQkJCQljb3B5ID0gb3B0aW9uc1sgbmFtZSBdOwoKCQkJCQkvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wCgkJCQkJaWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCgkJCQkJLy8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzCgkJCQkJaWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8CgkJCQkJCSggY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheSggY29weSApICkgKSApIHsKCgkJCQkJCWlmICggY29weUlzQXJyYXkgKSB7CgkJCQkJCQljb3B5SXNBcnJheSA9IGZhbHNlOwoJCQkJCQkJY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApID8gc3JjIDoge307CgkJCQkJCX0KCgkJCQkJCS8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbQoJCQkJCQl0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7CgoJCQkJCS8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXMKCQkJCQl9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJCXRhcmdldFsgbmFtZSBdID0gY29weTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCS8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0CgkJcmV0dXJuIHRhcmdldDsKCX07CgoJalF1ZXJ5LmV4dGVuZCggewoKCQkvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2UKCQlleHBhbmRvOiAialF1ZXJ5IiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXEQvZywgIiIgKSwKCgkJLy8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGUKCQlpc1JlYWR5OiB0cnVlLAoKCQllcnJvcjogZnVuY3Rpb24oIG1zZyApIHsKCQkJdGhyb3cgbmV3IEVycm9yKCBtc2cgKTsKCQl9LAoKCQlub29wOiBmdW5jdGlvbigpIHt9LAoKCQkvLyBTZWUgdGVzdC91bml0L2NvcmUuanMgZm9yIGRldGFpbHMgY29uY2VybmluZyBpc0Z1bmN0aW9uLgoJCS8vIFNpbmNlIHZlcnNpb24gMS4zLCBET00gbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGxpa2UgYWxlcnQKCQkvLyBhcmVuJ3Qgc3VwcG9ydGVkLiBUaGV5IA==", "base64"));
  res.write(new Buffer("cmV0dXJuIGZhbHNlIG9uIElFICgjMjk2OCkuCgkJaXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHsKCQkJcmV0dXJuIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gImZ1bmN0aW9uIjsKCQl9LAoKCQlpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKCBvYmogKSB7CgkJCXJldHVybiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJhcnJheSI7CgkJfSwKCgkJaXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7CgkJCS8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovCgkJCXJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT0gb2JqLndpbmRvdzsKCQl9LAoKCQlpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7CgoJCQkvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfCIiKQoJCQkvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzICgiMHguLi4iKQoJCQkvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU4KCQkJLy8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApCgkJCXZhciByZWFsU3RyaW5nT2JqID0gb2JqICYmIG9iai50b1N0cmluZygpOwoJCQlyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAoIHJlYWxTdHJpbmdPYmogLSBwYXJzZUZsb2F0KCByZWFsU3RyaW5nT2JqICkgKyAxICkgPj0gMDsKCQl9LAoKCQlpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkgewoJCQl2YXIgbmFtZTsKCQkJZm9yICggbmFtZSBpbiBvYmogKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSwKCgkJaXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHsKCQkJdmFyIGtleTsKCgkJCS8vIE11c3QgYmUgYW4gT2JqZWN0LgoJCQkvLyBCZWNhdXNlIG9mIElFLCB3ZSBhbHNvIGhhdmUgdG8gY2hlY2sgdGhlIHByZXNlbmNlIG9mIHRoZSBjb25zdHJ1Y3RvciBwcm9wZXJ0eS4KCQkJLy8gTWFrZSBzdXJlIHRoYXQgRE9NIG5vZGVzIGFuZCB3aW5kb3cgb2JqZWN0cyBkb24ndCBwYXNzIHRocm91Z2gsIGFzIHdlbGwKCQkJaWYgKCAhb2JqIHx8IGpRdWVyeS50eXBlKCBvYmogKSAhPT0gIm9iamVjdCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCXRyeSB7CgoJCQkJLy8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdAoJCQkJaWYgKCBvYmouY29uc3RydWN0b3IgJiYKCQkJCQkhaGFzT3duLmNhbGwoIG9iaiwgImNvbnN0cnVjdG9yIiApICYmCgkJCQkJIWhhc093bi5jYWxsKCBvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCAiaXNQcm90b3R5cGVPZiIgKSApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCS8vIElFOCw5IFdpbGwgdGhyb3cgZXhjZXB0aW9ucyBvbiBjZXJ0YWluIGhvc3Qgb2JqZWN0cyAjOTg5NwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIEhhbmRsZSBpdGVyYXRpb24gb3ZlciBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuCgkJCWlmICggIXN1cHBvcnQub3duRmlyc3QgKSB7CgkJCQlmb3IgKCBrZXkgaW4gb2JqICkgewoJCQkJCXJldHVybiBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCQkJCX0KCQkJfQoKCQkJLy8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsCgkJCS8vIGlmIGxhc3Qgb25lIGlzIG93biwgdGhlbiBhbGwgcHJvcGVydGllcyBhcmUgb3duLgoJCQlmb3IgKCBrZXkgaW4gb2JqICkge30KCgkJCXJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCQl9LAoKCQl0eXBlOiBmdW5jdGlvbiggb2JqICkgewoJCQlpZiAoIG9iaiA9PSBudWxsICkgewoJCQkJcmV0dXJuIG9iaiArICIiOwoJCQl9CgkJCXJldHVybiB0eXBlb2Ygb2JqID09PSAib2JqZWN0IiB8fCB0eXBlb2Ygb2JqID09PSAiZnVuY3Rpb24iID8KCQkJCWNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwoIG9iaiApIF0gfHwgIm9iamVjdCIgOgoJCQkJdHlwZW9mIG9iajsKCQl9LAoKCQkvLyBXb3JrYXJvdW5kcyBiYXNlZCBvbiBmaW5kaW5ncyBieSBKaW0gRHJpc2NvbGwKCQkvLyBodHRwOi8vd2VibG9ncy5qYXZhLm5ldC9ibG9nL2RyaXNjb2xsL2FyY2hpdmUvMjAwOS8wOS8wOC9ldmFsLWphdmFzY3JpcHQtZ2xvYmFsLWNvbnRleHQKCQlnbG9iYWxFdmFsOiBmdW5jdGlvbiggZGF0YSApIHsKCQkJaWYgKCBkYXRhICYmIGpRdWVyeS50cmltKCBkYXRhICkgKSB7CgoJCQkJLy8gV2UgdXNlIGV4ZWNTY3JpcHQgb24gSW50ZXJuZXQgRXhwbG9yZXIKCQkJCS8vIFdlIHVzZSBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gc28gdGhhdCBjb250ZXh0IGlzIHdpbmRvdwoJCQkJLy8gcmF0aGVyIHRoYW4galF1ZXJ5IGluIEZpcmVmb3gKCQkJCSggd2luZG93LmV4ZWNTY3JpcHQgfHwgZnVuY3Rpb24oIGRhdGEgKSB7CgkJCQkJd2luZG93WyAiZXZhbCIgXS5jYWxsKCB3aW5kb3csIGRhdGEgKTsgLy8ganNjczppZ25vcmUgcmVxdWlyZURvdE5vdGF0aW9uCgkJCQl9ICkoIGRhdGEgKTsKCQkJfQoJCX0sCgoJCS8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXMKCQkvLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpCgkJY2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkgewoJCQlyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIHJtc1ByZWZpeCwgIm1zLSIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7CgkJfSwKCgkJbm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQlyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTsKCQl9LAoKCQllYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHsKCQkJdmFyIGxlbmd0aCwgaSA9IDA7CgoJCQlpZiAoIGlzQXJyYXlMaWtlKCBvYmogKSApIHsKCQkJCWxlbmd0aCA9IG9iai5sZW5ndGg7CgkJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCQlpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm9yICggaSBpbiBvYmogKSB7CgkJCQkJaWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIG9iajsKCQl9LAoKCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OQoJCXRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCQlyZXR1cm4gdGV4dCA9PSBudWxsID8KCQkJCSIiIDoKCQkJCSggdGV4dCArICIiICkucmVwbGFjZSggcnRyaW0sICIiICk7CgkJfSwKCgkJLy8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seQoJCW1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHsKCQkJdmFyIHJldCA9IHJlc3VsdHMgfHwgW107CgoJCQlpZiAoIGFyciAhPSBudWxsICkgewoJCQkJaWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkgewoJCQkJCWpRdWVyeS5tZXJnZSggcmV0LAoJCQkJCQl0eXBlb2YgYXJyID09PSAic3RyaW5nIiA/CgkJCQkJCVsgYXJyIF0gOiBhcnIKCQkJCQkpOwoJCQkJfSBlbHNlIHsKCQkJCQlwdXNoLmNhbGwoIHJldCwgYXJyICk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiByZXQ7CgkJfSwKCgkJaW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHsKCQkJdmFyIGxlbjsKCgkJCWlmICggYXJyICkgewoJCQkJaWYgKCBpbmRleE9mICkgewoJCQkJCXJldHVybiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApOwoJCQkJfQoKCQkJCWxlbiA9IGFyci5sZW5ndGg7CgkJCQlpID0gaSA/IGkgPCAwID8gTWF0aC5tYXgoIDAsIGxlbiArIGkgKSA6IGkgOiAwOwoKCQkJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoKCQkJCQkvLyBTa2lwIGFjY2Vzc2luZyBpbiBzcGFyc2UgYXJyYXlzCgkJCQkJaWYgKCBpIGluIGFyciAmJiBhcnJbIGkgXSA9PT0gZWxlbSApIHsKCQkJCQkJcmV0dXJuIGk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gLTE7CgkJfSwKCgkJbWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkgewoJCQl2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsCgkJCQlqID0gMCwKCQkJCWkgPSBmaXJzdC5sZW5ndGg7CgoJCQl3aGlsZSAoIGogPCBsZW4gKSB7CgkJCQlmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIFdvcmthcm91bmQgY2FzdGluZyBvZiAubGVuZ3RoIHRvIE5hTiBvbiBvdGhlcndpc2UgYXJyYXlsaWtlIG9iamVjdHMgKGUuZy4sIE5vZGVMaXN0cykKCQkJaWYgKCBsZW4gIT09IGxlbiApIHsKCQkJCXdoaWxlICggc2Vjb25kWyBqIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCQlmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdOwoJCQkJfQoJCQl9CgoJCQlmaXJzdC5sZW5ndGggPSBpOwoKCQkJcmV0dXJuIGZpcnN0OwoJCX0sCgoJCWdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHsKCQkJdmFyIGNhbGxiYWNrSW52ZXJzZSwKCQkJCW1hdGNoZXMgPSBbXSwKCQkJCWkgPSAwLAoJCQkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCQkJY2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0OwoKCQkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtcwoJCQkvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvbgoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCWNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApOwoJCQkJaWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkgewoJCQkJCW1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gbWF0Y2hlczsKCQl9LAoKCQkvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHkKCQltYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHsKCQkJdmFyIGxlbmd0aCwgdmFsdWUsCgkJCQlpID0gMCwKCQkJCXJldCA9IFtdOwoKCQkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXMKCQkJaWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHsKCQkJCWxlbmd0aCA9IGVsZW1zLmxlbmd0aDsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCXZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApOwoKCQkJCQlpZiAoIHZhbHVlICE9IG51bGwgKSB7CgkJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsCgkJCX0gZWxzZSB7CgkJCQlmb3IgKCBpIGluIGVsZW1zICkgewoJCQkJCXZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApOwoKCQkJCQlpZiAoIHZhbHVlICE9IG51bGwgKSB7CgkJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQk=", "base64"));
  res.write(new Buffer("CS8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXMKCQkJcmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApOwoJCX0sCgoJCS8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0cwoJCWd1aWQ6IDEsCgoJCS8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueQoJCS8vIGFyZ3VtZW50cy4KCQlwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkgewoJCQl2YXIgYXJncywgcHJveHksIHRtcDsKCgkJCWlmICggdHlwZW9mIGNvbnRleHQgPT09ICJzdHJpbmciICkgewoJCQkJdG1wID0gZm5bIGNvbnRleHQgXTsKCQkJCWNvbnRleHQgPSBmbjsKCQkJCWZuID0gdG1wOwoJCQl9CgoJCQkvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlYwoJCQkvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLgoJCQlpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHsKCQkJCXJldHVybiB1bmRlZmluZWQ7CgkJCX0KCgkJCS8vIFNpbXVsYXRlZCBiaW5kCgkJCWFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTsKCQkJcHJveHkgPSBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApOwoJCQl9OwoKCQkJLy8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkCgkJCXByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrOwoKCQkJcmV0dXJuIHByb3h5OwoJCX0sCgoJCW5vdzogZnVuY3Rpb24oKSB7CgkJCXJldHVybiArKCBuZXcgRGF0ZSgpICk7CgkJfSwKCgkJLy8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyCgkJLy8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC4KCQlzdXBwb3J0OiBzdXBwb3J0Cgl9ICk7CgoJLy8gSlNIaW50IHdvdWxkIGVycm9yIG9uIHRoaXMgY29kZSBkdWUgdG8gdGhlIFN5bWJvbCBub3QgYmVpbmcgZGVmaW5lZCBpbiBFUzUuCgkvLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuanNoaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWwKCS8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBqdXN0IGRpc2FibGUgSlNIaW50IGZvciB0aGVzZQoJLy8gdGhyZWUgbGluZXMuCgkvKiBqc2hpbnQgaWdub3JlOiBzdGFydCAqLwoJaWYgKCB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICkgewoJCWpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBkZWxldGVkSWRzWyBTeW1ib2wuaXRlcmF0b3IgXTsKCX0KCS8qIGpzaGludCBpZ25vcmU6IGVuZCAqLwoKCS8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcAoJalF1ZXJ5LmVhY2goICJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoICIgIiApLAoJZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJY2xhc3MydHlwZVsgIltvYmplY3QgIiArIG5hbWUgKyAiXSIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKCX0gKTsKCglmdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkgewoKCQkvLyBTdXBwb3J0OiBpT1MgOC4yIChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcikKCQkvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpCgkJLy8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzCgkJLy8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRQoJCXZhciBsZW5ndGggPSAhIW9iaiAmJiAibGVuZ3RoIiBpbiBvYmogJiYgb2JqLmxlbmd0aCwKCQkJdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTsKCgkJaWYgKCB0eXBlID09PSAiZnVuY3Rpb24iIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXJldHVybiB0eXBlID09PSAiYXJyYXkiIHx8IGxlbmd0aCA9PT0gMCB8fAoJCQl0eXBlb2YgbGVuZ3RoID09PSAibnVtYmVyIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajsKCX0KCXZhciBTaXp6bGUgPQoJLyohCgkgKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjEKCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCgkgKgoJICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJICoKCSAqIERhdGU6IDIwMTUtMTAtMTcKCSAqLwoJKGZ1bmN0aW9uKCB3aW5kb3cgKSB7CgoJdmFyIGksCgkJc3VwcG9ydCwKCQlFeHByLAoJCWdldFRleHQsCgkJaXNYTUwsCgkJdG9rZW5pemUsCgkJY29tcGlsZSwKCQlzZWxlY3QsCgkJb3V0ZXJtb3N0Q29udGV4dCwKCQlzb3J0SW5wdXQsCgkJaGFzRHVwbGljYXRlLAoKCQkvLyBMb2NhbCBkb2N1bWVudCB2YXJzCgkJc2V0RG9jdW1lbnQsCgkJZG9jdW1lbnQsCgkJZG9jRWxlbSwKCQlkb2N1bWVudElzSFRNTCwKCQlyYnVnZ3lRU0EsCgkJcmJ1Z2d5TWF0Y2hlcywKCQltYXRjaGVzLAoJCWNvbnRhaW5zLAoKCQkvLyBJbnN0YW5jZS1zcGVjaWZpYyBkYXRhCgkJZXhwYW5kbyA9ICJzaXp6bGUiICsgMSAqIG5ldyBEYXRlKCksCgkJcHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LAoJCWRpcnJ1bnMgPSAwLAoJCWRvbmUgPSAwLAoJCWNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJCXRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJCWNvbXBpbGVyQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJCXNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkgewoJCQlpZiAoIGEgPT09IGIgKSB7CgkJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQl9CgkJCXJldHVybiAwOwoJCX0sCgoJCS8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHMKCQlNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLAoKCQkvLyBJbnN0YW5jZSBtZXRob2RzCgkJaGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSwKCQlhcnIgPSBbXSwKCQlwb3AgPSBhcnIucG9wLAoJCXB1c2hfbmF0aXZlID0gYXJyLnB1c2gsCgkJcHVzaCA9IGFyci5wdXNoLAoJCXNsaWNlID0gYXJyLnNsaWNlLAoJCS8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZQoJCS8vIGh0dHA6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNQoJCWluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHsKCQkJdmFyIGkgPSAwLAoJCQkJbGVuID0gbGlzdC5sZW5ndGg7CgkJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQkJaWYgKCBsaXN0W2ldID09PSBlbGVtICkgewoJCQkJCXJldHVybiBpOwoJCQkJfQoJCQl9CgkJCXJldHVybiAtMTsKCQl9LAoKCQlib29sZWFucyA9ICJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsCgoJCS8vIFJlZ3VsYXIgZXhwcmVzc2lvbnMKCgkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2UKCQl3aGl0ZXNwYWNlID0gIltcXHgyMFxcdFxcclxcblxcZl0iLAoKCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXIKCQlpZGVudGlmaWVyID0gIig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIiwKCgkJLy8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzCgkJYXR0cmlidXRlcyA9ICJcXFsiICsgd2hpdGVzcGFjZSArICIqKCIgKyBpZGVudGlmaWVyICsgIikoPzoiICsgd2hpdGVzcGFjZSArCgkJCS8vIE9wZXJhdG9yIChjYXB0dXJlIDIpCgkJCSIqKFsqXiR8IX5dPz0pIiArIHdoaXRlc3BhY2UgKwoJCQkvLyAiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XSIKCQkJIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIiArIGlkZW50aWZpZXIgKyAiKSl8KSIgKyB3aGl0ZXNwYWNlICsKCQkJIipcXF0iLAoKCQlwc2V1ZG9zID0gIjooIiArIGlkZW50aWZpZXIgKyAiKSg/OlxcKCgiICsKCQkJLy8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czoKCQkJLy8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpCgkJCSIoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCIgKwoJCQkvLyAyLiBzaW1wbGUgKGNhcHR1cmUgNikKCQkJIigoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIgKyBhdHRyaWJ1dGVzICsgIikqKXwiICsKCQkJLy8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKQoJCQkiLioiICsKCQkJIilcXCl8KSIsCgoJCS8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXIKCQlyd2hpdGVzcGFjZSA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyAiKyIsICJnIiApLAoJCXJ0cmltID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiICsgd2hpdGVzcGFjZSArICIrJCIsICJnIiApLAoKCQlyY29tbWEgPSBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIiosIiArIHdoaXRlc3BhY2UgKyAiKiIgKSwKCQlyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIiooWz4rfl18IiArIHdoaXRlc3BhY2UgKyAiKSIgKyB3aGl0ZXNwYWNlICsgIioiICksCgoJCXJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCAiPSIgKyB3aGl0ZXNwYWNlICsgIiooW15cXF0nXCJdKj8pIiArIHdoaXRlc3BhY2UgKyAiKlxcXSIsICJnIiApLAoKCQlycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLAoJCXJpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCggIl4iICsgaWRlbnRpZmllciArICIkIiApLAoKCQltYXRjaEV4cHIgPSB7CgkJCSJJRCI6IG5ldyBSZWdFeHAoICJeIygiICsgaWRlbnRpZmllciArICIpIiApLAoJCQkiQ0xBU1MiOiBuZXcgUmVnRXhwKCAiXlxcLigiICsgaWRlbnRpZmllciArICIpIiApLAoJCQkiVEFHIjogbmV3IFJlZ0V4cCggIl4oIiArIGlkZW50aWZpZXIgKyAifFsqXSkiICksCgkJCSJBVFRSIjogbmV3IFJlZ0V4cCggIl4iICsgYXR0cmlidXRlcyApLAoJCQkiUFNFVURPIjogbmV3IFJlZ0V4cCggIl4iICsgcHNldWRvcyApLAoJCQkiQ0hJTEQiOiBuZXcgUmVnRXhwKCAiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIiArIHdoaXRlc3BhY2UgKwoJCQkJIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiICsgd2hpdGVzcGFjZSArICIqKD86KFsrLV18KSIgKyB3aGl0ZXNwYWNlICsKCQkJCSIqKFxcZCspfCkpIiArIHdoaXRlc3BhY2UgKyAiKlxcKXwpIiwgImkiICksCgkJCSJib29sIjogbmV3IFJlZ0V4cCggIl4oPzoiICsgYm9vbGVhbnMgKyAiKSQiLCAiaSIgKSwKCQkJLy8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpCgkJCS8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGAKCQkJIm5lZWRzQ29udGV4dCI6IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIiArCgkJCQl3aGl0ZXNwYWNlICsgIiooKD86LVxcZCk/XFxkKikiICsgd2hpdGVzcGFjZSArICIqXFwpfCkoPz1bXi1dfCQpIiwgImkiICkKCQl9LAoKCQlyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSwKCQlyaGVhZGVyID0gL15oXGQkL2ksCgoJCXJuYXRpdmUgPSAvXltee10rXHtccypcW25hdGl2ZSBcdy8sCgoJCS8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9ycwoJCXJxdWlja0V4cHIgPSAvXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLAoKCQlyc2libGluZyA9IC9bK35dLywKCQlyZXNjYXBlID0gLyd8XFwvZywKCgkJLy8gQ1NTIGVzY2FwZXMgaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVycwoJCXJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoICJcXFxcKFtcXGRhLWZdezEsNn0iICsgd2hpdGVzcGFjZSArICI/fCgiICsgd2hpdGVzcGFjZSArICIpfC4pIiwgImlnIiApLAoJCWZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHsKCQkJdmFyIGhpZ2ggPSAiMHgiICsgZXNjYXBlZCAtIDB4MTAwMDA7CgkJCS8vIE5hTiBtZWFucyBub24tY29kZXBvaW50CgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3g8MjQKCQkJLy8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArIjB4IgoJCQlyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/CgkJCQllc2NhcGVkIDoKCQkJCWhpZ2ggPCAwID8KCQkJCQkvLyBCTVAgY29kZXBvaW50CgkJCQkJU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6CgkJCQkJLy8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpCgkJCQkJU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7CgkJfSwKCgkJLy8gVXNlZCBmb3IgaWZyYW1lcwoJCS8vIFNlZSBzZXREb2N1bWVudCgpCgkJLy8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgIlBlcm1pc3Npb24gRGVuaWVkIgoJCS8vIGVycm9yIGluIElFCgkJdW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkgewoJCQlzZXREb2N1bWVudCgpOwoJCX07CgoJLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0ICkKCXRyeSB7CgkJcHVzaC5hcHBseSgKCQkJKGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLAoJCQlwcmVmZXJyZWREb2MuY2hpbGROb2RlcwoJCSk7CgkJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjAKCQkvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5CgkJYXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTsKCX0gY2F0Y2ggKCBlICkgewoJCXB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID8KCgkJCS8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlCgkJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJCXB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApOwoJCQl9IDoKCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseQoJCQlmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7CgkJCQl2YXIgaiA9IHRhcmdldC5sZW5ndGgsCgkJCQkJaSA9IDA7CgkJCQkvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGgKCQkJCXdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge30KCQkJCXRhcmdldC5sZW5ndGggPSBqIC0gMTsKCQkJfQoJCX07Cgl9CgoJZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHsKCQl2YXIgbSwgaSwgZWxlbSwgbmlkLCBuaWRzZWxlY3QsIG1hdGNoLCBncm91cHMsIG5ld1NlbGVjdG9yLAoJCQluZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsCgoJCQkvLyBub2RlVHlwZSBkZWZhdWx0cyB0byA5LCBzaW5jZSBjb250ZXh0IGRlZmF1bHRzIHRvIGRvY3VtZW50CgkJCW5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5OwoKCQlyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTsKCgkJLy8gUmV0dXJuIGVhcmx5IGZyb20gY2FsbHMgd2l0aCBpbnZhbGlkIHNlbGVjdG9yIG9yIGNvbnRleHQKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgfHwgIXNlbGVjdG9yIHx8CgkJCW5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHsKCgkJCXJldHVybiByZXN1bHRzOwoJCX0KCgkJLy8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50cwoJCWlmICggIXNlZWQgKSB7CgoJCQlpZiAoICggY29udGV4dCA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogcHJlZmVycmVkRG9jICkgIT09IGRvY3VtZW50ICkgewoJCQkJc2V0RG9jdW1lbnQoIGNvbnRleHQgKTsKCQkJfQoJCQljb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDsKCgkJCWlmICggZG9jdW1lbnRJc0hUTUwgKSB7CgoJCQkJLy8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhICJnZXQqQnkqIiBET00gbWV0aG9kCgkJCQkvLyAoZXhjZXB0aW5nIERvY3VtZW50RnJhZ21lbnQgY29udGV4dCwgd2hlcmUgdGhlIG1ldGhvZHMgZG9uJ3QgZXhpc3QpCgkJCQlpZiAoIG5vZGVUeXBlICE9PSAxMSAmJiAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkgewoKCQkJCQkvLyBJRCBzZWxlY3RvcgoJCQkJCWlmICggKG0gPSBtYXRjaFsxXSkgKSB7CgoJCQkJCQkvLyBEb2N1bWVudCBjb250ZXh0CgkJCQkJCWlmICggbm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJCQlpZiAoIChlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSApIHsKCgkJCQkJCQkJLy8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXQKCQkJCQkJCQkvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9ucwoJCQkJCQkJCS8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSUQKCQkJCQkJCQlpZiAoIGVsZW0uaWQgPT09IG0gKSB7CgkJCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQkJfQoKCQkJCQkJLy8gRWxlbWVudCBjb250ZXh0CgkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXQKCQkJCQkJCS8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zCgkJCQkJCQkvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElECgkJCQkJCQlpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmCgkJCQkJCQkJY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJgoJCQkJCQkJCWVsZW0uaWQgPT09IG0gKSB7CgoJCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCS8vIFR5cGUgc2VsZWN0b3IKCQkJCQl9IGVsc2UgaWYgKCBtYXRjaFsyXSApIHsKCQkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApOwoJCQkJCQlyZXR1cm4gcmVzdWx0czsKCgkJCQkJLy8gQ2xhc3Mgc2VsZWN0b3IKCQkJCQl9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYKCQkJCQkJY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkgewoKCQkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTsKCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIFRha2UgYWR2YW50YWdlIG9mIHF1ZXJ5U2VsZWN0b3JBbGwKCQkJCWlmICggc3VwcG9ydC5xc2EgJiYKCQkJCQkhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyAiICIgXSAmJgoJCQkJCSghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7CgoJCQkJCWlmICggbm9kZVR5cGUgIT09IDEgKSB7CgkJCQkJCW5ld0NvbnRleHQgPSBjb250ZXh0OwoJCQkJCQluZXdTZWxlY3RvciA9IHNlbGVjdG9yOwoKCQkJCQkvLyBxU0EgbG9va3Mgb3V0c2lkZSBFbGVtZW50IGNvbnRleHQsIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnQKCQkJCQkvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB3b3JrYXJvdW5kIHRlY2huaXF1ZQoJCQkJCS8vIFN1cHBvcnQ6IElFIDw9OAoJCQkJCS8vIEV4Y2x1ZGUgb2JqZWN0IGVsZW1lbnRzCgkJCQkJfSBlbHNlIGlmICggY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAib2JqZWN0IiApIHsKCgkJCQkJCS8vIENhcHR1cmUgdGhlIGNvbnRleHQgSUQsIHNldHRpbmcgaXQgZmlyc3QgaWYgbmVjZXNzYXJ5CgkJCQkJCWlmICggKG5pZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKCAiaWQiICkpICkgewoJCQkJCQkJbmlkID0gbmlkLnJlcGxhY2UoIHJlc2NhcGUsICJcXCQmIiApOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJY29udGV4dC5zZXRBdHRyaWJ1dGUoICJpZCIsIChuaWQgPSBleHBhbmRvKSApOwoJCQkJCQl9CgoJCQkJCQkvLyBQcmVmaXggZXZlcnkgc2VsZWN0b3IgaW4gdGhlIGxpc3QKCQkJCQkJZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJCQkJCWkgPSBncm91cHMubGVuZ3RoOwoJCQkJCQluaWRzZWxlY3QgPSByaWRlbnRpZmllci50ZXN0KCBuaWQgKSA/ICIjIiArIG5pZCA6ICJbaWQ9JyIgKyBuaWQgKyAiJ10iOwoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWdyb3Vwc1tpXSA9IG5pZHNlbGVjdCArICIgIiArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApOwoJCQkJCQl9CgkJCQkJCW5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oICIsIiApOwoKCQkJCQkJLy8gRXhwYW5kIGNvbnRleHQgZm9yIHNpYmxpbmcgc2VsZWN0b3JzCgkJCQkJCW5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fAoJCQkJCQkJY29udGV4dDsKCQkJCQl9CgoJCQkJCWlmICggbmV3U2VsZWN0b3IgKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLAoJCQkJCQkJCW5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKQoJCQkJCQkJKTsKCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQl9IGNhdGNoICggcXNhRXJyb3IgKSB7CgkJCQkJCX0gZmluYWxseSB7CgkJCQkJCQlpZiAoIG5pZCA9PT0gZXhwYW5kbyApIHsKCQkJCQkJCQljb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggImlkIiApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBBbGwgb3RoZXJzCgkJcmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApOwoJfQoKCS8qKgoJICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplCgkgKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nLCBvYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoCgkgKglwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKQoJICoJZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeQoJICovCglmdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHsKCQl2YXIga2V5cyA9IFtdOwoKCQlmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHsKCQkJLy8gVXNlIChrZXkgKyAiICIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpCgkJCWlmICgga2V5cy5wdXNoKCBrZXkgKyAiICIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7CgkJCQkvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXMKCQkJCWRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07CgkJCX0KCQkJcmV0dXJuIChjYWNoZVsga2V5ICsgIiAiIF0gPSB2YWx1ZSk7CgkJfQoJCXJldHVybiBjYWNoZTsKCX0KCgkvKioKCSAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFyawoJICovCglmdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkgewoJCWZuWyBleHBhbmRvIF0gPSB0cnVlOwoJCXJldHVybiBmbjsKCX0KCgkvKioKCSAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50CgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZGl2IGFuZCBleHBlY3RzIGEgYm9vbGVhbiByZXN1bHQKCSAqLwoJZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHsKCQl2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgoJCXRyeSB7CgkJCXJldHVybiAhIWZuKCBkaXYgKTsKCQl9IGNhdGNoIChlKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9IGZpbmFsbHkgewoJCQkvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHQKCQkJaWYgKCBkaXYucGFyZW50Tm9kZSApIHsKCQkJCWRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTsKCQkJfQoJCQkvLyByZWxlYXNlIG1lbW9yeSBpbiBJRQoJCQlkaXYgPSBudWxsOwoJCX0KCX0KCgkvKioKCSAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnMKCSAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXMKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZAoJICovCglmdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkgewoJCXZhciBhcnIgPSBhdHRycy5zcGxpdCgifCIpLAoJCQlpID0gYXJyLmxlbmd0aDsKCgkJd2hpbGUgKCBpLS0gKSB7CgkJCUV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyOwoJCX0KCX0KCgkvKioKCSAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3MKCSAqIEBwYXJhbSB7RWxlbWVudH0gYQoJICogQHBhcmFtIHtFbGVtZW50fSBiCgkgKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGIKCSAqLwoJZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkgewoJCXZhciBjdXIgPSBiICYmIGEsCgkJCWRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmCgkJCQkoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC0KCQkJCSggfmEuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICk7CgoJCS8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2RlcwoJCWlmICggZGlmZiApIHsKCQkJcmV0dXJuIGRpZmY7CgkJfQoKCQkvLyBDaGVjayBpZiBiIGZvbGxvd3MgYQoJCWlmICggY3VyICkgewoJCQl3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkgewoJCQkJaWYgKCBjdXIgPT09IGIgKSB7CgkJCQkJcmV0dXJuIC0xOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gYSA/IDEgOiAtMTsKCX0KCgkvKioKCSAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXMKCSAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkgewoJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiBuYW1lID09PSAiaW5wdXQiICYmIGVsZW0udHlwZSA9PT0gdHlwZTsKCQl9OwoJfQoKCS8qKgoJICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zCgkgKiBAcGFyYW0ge1N0cmluZ30gdHlwZQoJICovCglmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7CgkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICk=", "base64"));
  res.write(new Buffer("IHsKCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiAobmFtZSA9PT0gImlucHV0IiB8fCBuYW1lID09PSAiYnV0dG9uIikgJiYgZWxlbS50eXBlID09PSB0eXBlOwoJCX07Cgl9CgoJLyoqCgkgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgoJICovCglmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHsKCQlyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHsKCQkJYXJndW1lbnQgPSArYXJndW1lbnQ7CgkJCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7CgkJCQl2YXIgaiwKCQkJCQltYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLAoJCQkJCWkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoOwoKCQkJCS8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlcwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJaWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHsKCQkJCQkJc2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfSk7Cgl9CgoJLyoqCgkgKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0CgkgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dAoJICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlCgkgKi8KCWZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkgewoJCXJldHVybiBjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSAidW5kZWZpbmVkIiAmJiBjb250ZXh0OwoJfQoKCS8vIEV4cG9zZSBzdXBwb3J0IHZhcnMgZm9yIGNvbnZlbmllbmNlCglzdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTsKCgkvKioKCSAqIERldGVjdHMgWE1MIG5vZGVzCgkgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudAoJICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZQoJICovCglpc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCS8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3QKCQkvLyAoc3VjaCBhcyBsb2FkaW5nIGlmcmFtZXMgaW4gSUUgLSAjNDgzMykKCQl2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDsKCQlyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAiSFRNTCIgOiBmYWxzZTsKCX07CgoJLyoqCgkgKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnQKCSAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50CgkgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50CgkgKi8KCXNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7CgkJdmFyIGhhc0NvbXBhcmUsIHBhcmVudCwKCQkJZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jOwoKCQkvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZAoJCWlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7CgkJCXJldHVybiBkb2N1bWVudDsKCQl9CgoJCS8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzCgkJZG9jdW1lbnQgPSBkb2M7CgkJZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCQlkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTsKCgkJLy8gU3VwcG9ydDogSUUgOS0xMSwgRWRnZQoJCS8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgInBlcm1pc3Npb24gZGVuaWVkIiBlcnJvcnMgKGpRdWVyeSAjMTM5MzYpCgkJaWYgKCAocGFyZW50ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHBhcmVudC50b3AgIT09IHBhcmVudCApIHsKCQkJLy8gU3VwcG9ydDogSUUgMTEKCQkJaWYgKCBwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCQkJCXBhcmVudC5hZGRFdmVudExpc3RlbmVyKCAidW5sb2FkIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTsKCgkJCS8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5CgkJCX0gZWxzZSBpZiAoIHBhcmVudC5hdHRhY2hFdmVudCApIHsKCQkJCXBhcmVudC5hdHRhY2hFdmVudCggIm9udW5sb2FkIiwgdW5sb2FkSGFuZGxlciApOwoJCQl9CgkJfQoKCQkvKiBBdHRyaWJ1dGVzCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBTdXBwb3J0OiBJRTw4CgkJLy8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzCgkJLy8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpCgkJc3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCWRpdi5jbGFzc05hbWUgPSAiaSI7CgkJCXJldHVybiAhZGl2LmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIik7CgkJfSk7CgoJCS8qIGdldEVsZW1lbnQocylCeSoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJCS8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzCgkJc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpICk7CgkJCXJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoOwoJCX0pOwoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICk7CgoJCS8vIFN1cHBvcnQ6IElFPDEwCgkJLy8gQ2hlY2sgaWYgZ2V0RWxlbWVudEJ5SWQgcmV0dXJucyBlbGVtZW50cyBieSBuYW1lCgkJLy8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcywKCQkvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3QKCQlzdXBwb3J0LmdldEJ5SWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvOwoJCQlyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDsKCQl9KTsKCgkJLy8gSUQgZmluZCBhbmQgZmlsdGVyCgkJaWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7CgkJCUV4cHIuZmluZFsiSUQiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHsKCQkJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50SXNIVE1MICkgewoJCQkJCXZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTsKCQkJCQlyZXR1cm4gbSA/IFsgbSBdIDogW107CgkJCQl9CgkJCX07CgkJCUV4cHIuZmlsdGVyWyJJRCJdID0gZnVuY3Rpb24oIGlkICkgewoJCQkJdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCJpZCIpID09PSBhdHRySWQ7CgkJCQl9OwoJCQl9OwoJCX0gZWxzZSB7CgkJCS8vIFN1cHBvcnQ6IElFNi83CgkJCS8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXQKCQkJZGVsZXRlIEV4cHIuZmluZFsiSUQiXTsKCgkJCUV4cHIuZmlsdGVyWyJJRCJdID0gIGZ1bmN0aW9uKCBpZCApIHsKCQkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gInVuZGVmaW5lZCIgJiYKCQkJCQkJZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOwoJCQkJCXJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDsKCQkJCX07CgkJCX07CgkJfQoKCQkvLyBUYWcKCQlFeHByLmZpbmRbIlRBRyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/CgkJCWZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7CgkJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSAidW5kZWZpbmVkIiApIHsKCQkJCQlyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQkJLy8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROCgkJCQl9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHsKCQkJCQlyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTsKCQkJCX0KCQkJfSA6CgoJCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQkJdmFyIGVsZW0sCgkJCQkJdG1wID0gW10sCgkJCQkJaSA9IDAsCgkJCQkJLy8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvbwoJCQkJCXJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTsKCgkJCQkvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzCgkJCQlpZiAoIHRhZyA9PT0gIioiICkgewoJCQkJCXdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkgewoJCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCQl0bXAucHVzaCggZWxlbSApOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQlyZXR1cm4gdG1wOwoJCQkJfQoJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCX07CgoJCS8vIENsYXNzCgkJRXhwci5maW5kWyJDTEFTUyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7CgkJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gInVuZGVmaW5lZCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7CgkJCQlyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTsKCQkJfQoJCX07CgoJCS8qIFFTQS9tYXRjaGVzU2VsZWN0b3IKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJCS8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnQKCgkJLy8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSkKCQlyYnVnZ3lNYXRjaGVzID0gW107CgoJCS8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpCgkJLy8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yCgkJLy8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZQoJCS8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yCgkJLy8gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4CgkJcmJ1Z2d5UVNBID0gW107CgoJCWlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICkpICkgewoJCQkvLyBCdWlsZCBRU0EgcmVnZXgKCQkJLy8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaQoJCQlhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJCS8vIFNlbGVjdCBpcyBzZXQgdG8gZW1wdHkgc3RyaW5nIG9uIHB1cnBvc2UKCQkJCS8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseQoJCQkJLy8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsCgkJCQkvLyBzaW5jZSBpdHMgcHJlc2VuY2Ugc2hvdWxkIGJlIGVub3VnaAoJCQkJLy8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTkKCQkJCWRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlubmVySFRNTCA9ICI8YSBpZD0nIiArIGV4cGFuZG8gKyAiJz48L2E+IiArCgkJCQkJIjxzZWxlY3QgaWQ9JyIgKyBleHBhbmRvICsgIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz4iICsKCQkJCQkiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iOwoKCQkJCS8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTYKCQkJCS8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj0KCQkJCS8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0ICJzYWZlIiBmb3IgV2luUlQKCQkJCS8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uCgkJCQlpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCApIHsKCQkJCQlyYnVnZ3lRU0EucHVzaCggIlsqXiRdPSIgKyB3aGl0ZXNwYWNlICsgIiooPzonJ3xcIlwiKSIgKTsKCQkJCX0KCgkJCQkvLyBTdXBwb3J0OiBJRTgKCQkJCS8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgInZhbHVlIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5CgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCApIHsKCQkJCQlyYnVnZ3lRU0EucHVzaCggIlxcWyIgKyB3aGl0ZXNwYWNlICsgIiooPzp2YWx1ZXwiICsgYm9vbGVhbnMgKyAiKSIgKTsKCQkJCX0KCgkJCQkvLyBTdXBwb3J0OiBDaHJvbWU8MjksIEFuZHJvaWQ8NC40LCBTYWZhcmk8Ny4wKywgaU9TPDcuMCssIFBoYW50b21KUzwxLjkuOCsKCQkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCAiW2lkfj0iICsgZXhwYW5kbyArICItXSIgKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goIn49Iik7CgkJCQl9CgoJCQkJLy8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHMKCQkJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkCgkJCQkvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0cwoJCQkJaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCI6Y2hlY2tlZCIpOwoJCQkJfQoKCQkJCS8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrCgkJCQkvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxCgkJCQkvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHMKCQkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCAiYSMiICsgZXhwYW5kbyArICIrKiIgKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goIi4jLitbK35dIik7CgkJCQl9CgkJCX0pOwoKCQkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCQkvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHMKCQkJCS8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudAoJCQkJdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSggInR5cGUiLCAiaGlkZGVuIiApOwoJCQkJZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggIm5hbWUiLCAiRCIgKTsKCgkJCQkvLyBTdXBwb3J0OiBJRTgKCQkJCS8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZQoJCQkJaWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICJuYW1lIiArIHdoaXRlc3BhY2UgKyAiKlsqXiR8IX5dPz0iICk7CgkJCQl9CgoJCQkJLy8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZCkKCQkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICI6ZW5hYmxlZCIsICI6ZGlzYWJsZWQiICk7CgkJCQl9CgoJCQkJLy8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3MKCQkJCWRpdi5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iik7CgkJCQlyYnVnZ3lRU0EucHVzaCgiLC4qOiIpOwoJCQl9KTsKCQl9CgoJCWlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fAoJCQlkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fAoJCQlkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fAoJCQlkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHwKCQkJZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7CgoJCQlhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJCS8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvcgoJCQkJLy8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSkKCQkJCXN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggPSBtYXRjaGVzLmNhbGwoIGRpdiwgImRpdiIgKTsKCgkJCQkvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uCgkJCQkvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkCgkJCQltYXRjaGVzLmNhbGwoIGRpdiwgIltzIT0nJ106eCIgKTsKCQkJCXJidWdneU1hdGNoZXMucHVzaCggIiE9IiwgcHNldWRvcyApOwoJCQl9KTsKCQl9CgoJCXJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oInwiKSApOwoJCXJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oInwiKSApOwoKCQkvKiBDb250YWlucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCQloYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7CgoJCS8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlcgoJCS8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZQoJCS8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmCgkJY29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID8KCQkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCQl2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLAoJCQkJCWJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlOwoJCQkJcmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoCgkJCQkJYWRvd24uY29udGFpbnMgPwoJCQkJCQlhZG93bi5jb250YWlucyggYnVwICkgOgoJCQkJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTYKCQkJCSkpOwoJCQl9IDoKCQkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCQlpZiAoIGIgKSB7CgkJCQkJd2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7CgkJCQkJCWlmICggYiA9PT0gYSApIHsKCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoKCQkvKiBTb3J0aW5nCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nCgkJc29ydE9yZGVyID0gaGFzQ29tcGFyZSA/CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgoJCQkvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbAoJCQlpZiAoIGEgPT09IGIgKSB7CgkJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQkJcmV0dXJuIDA7CgkJCX0KCgkJCS8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb24KCQkJdmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCQlpZiAoIGNvbXBhcmUgKSB7CgkJCQlyZXR1cm4gY29tcGFyZTsKCQkJfQoKCQkJLy8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudAoJCQljb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgPwoJCQkJYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDoKCgkJCQkvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWQKCQkJCTE7CgoJCQkvLyBEaXNjb25uZWN0ZWQgbm9kZXMKCQkJaWYgKCBjb21wYXJlICYgMSB8fAoJCQkJKCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkgewoKCQkJCS8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudAoJCQkJaWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkgewoJCQkJCXJldHVybiAtMTsKCQkJCX0KCQkJCWlmICggYiA9PT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHsKCQkJCQlyZXR1cm4gMTsKCQkJCX0KCgkJCQkvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlcgoJCQkJcmV0dXJuIHNvcnRJbnB1dCA/CgkJCQkJKCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJCTA7CgkJCX0KCgkJCXJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTsKCQl9IDoKCQlmdW5jdGlvbiggYSwgYiApIHsKCQkJLy8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbAoJCQlpZiAoIGEgPT09IGIgKSB7CgkJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQkJcmV0dXJuIDA7CgkJCX0KCgkJCXZhciBjdXIsCgkJCQlpID0gMCwKCQkJCWF1cCA9IGEucGFyZW50Tm9kZSwKCQkJCWJ1cCA9IGIucGFyZW50Tm9kZSwKCQkJCWFwID0gWyBhIF0sCgkJCQlicCA9IFsgYiBdOwoKCQkJLy8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWQKCQkJaWYgKCAhYXVwIHx8ICFidXAgKSB7CgkJCQlyZXR1cm4gYSA9PT0gZG9jdW1lbnQgPyAtMSA6CgkJCQkJYiA9PT0gZG9jdW1lbnQgPyAxIDoKCQkJCQlhdXAgPyAtMSA6CgkJCQkJYnVwID8gMSA6CgkJCQkJc29ydElucHV0ID8KCQkJCQkoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6CgkJCQkJMDsKCgkJCS8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrCgkJCX0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkgewoJCQkJcmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApOwoJCQl9CgoJCQkvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvbgoJCQljdXIgPSBhOwoJCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCQlhcC51bnNoaWZ0KCBjdXIgKTsKCQkJfQoJCQljdXIgPSBiOwoJCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCQlicC51bnNoaWZ0KCBjdXIgKTsKCQkJfQoKCQkJLy8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3kKCQkJd2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7CgkJCQlpKys7CgkJCX0KCgkJCXJldHVybiBpID8KCQkJCS8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvcgoJCQkJc2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6CgoJCQkJLy8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0CgkJCQlhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOgoJCQkJYnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOgoJCQkJMDsKCQl9OwoKCQlyZXR1cm4gZG9jdW1lbnQ7Cgl9OwoKCVNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkgewoJCXJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7Cgl9OwoKCVNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHsKCQkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCQlpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBlbGVtICk7CgkJfQoKCQkvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWQKCQlleHByID0gZXhwci5yZXBsYWNlKCByYXR0cmlidXRlUXVvdGVzLCAiPSckMSddIiApOwoKCQlpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCSFjb21waWxlckNhY2hlWyBleHByICsgIiAiIF0gJiYKCQkJKCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJgoJCQkoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7CgoJCQl0cnkgewoJCQkJdmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApOwoKCQkJCS8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKCQkJCWlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHwKCQkJCQkJLy8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnQKCQkJCQkJLy8gZnJhZ21lbnQgaW4gSUUgOQoJCQkJCQllbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkgewoJCQkJCXJldHVybiByZXQ7CgkJCQl9CgkJCX0gY2F0Y2ggKGUpIHt9CgkJfQoKCQlyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwOwoJfTsKCglTaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHsKCQkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCQlpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBjb250ZXh0ICk7CgkJfQoJCXJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApOwoJfTsKCglTaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCS8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZAoJCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCQl9CgoJCXZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sCgkJCS8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KQoJCQl2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/CgkJCQlmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOgoJCQkJdW5kZWZpbmVkOwoKCQlyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgPwoJCQl2YWwgOgoJCQlzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID8KCQkJCWVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOgoJCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/CgkJCQkJdmFsLnZhbHVlIDoKCQkJCQludWxsOwoJfTsKCglTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkgewoJCXRocm93IG5ldyBFcnJvciggIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIgKyBtc2cgKTsKCX07CgoJLyoqCgkgKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzCgkgKiBAcGFyYW0ge0FycmF5TGlrZX0gcmVzdWx0cwoJICovCglTaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkgewoJCXZhciBlbGVtLAoJCQlkdXBsaWNhdGVzID0gW10sCgkJCWogPSAwLAoJCQlpID0gMDsKCgkJLy8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZQoJCWhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7CgkJc29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7CgkJcmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTsKCgkJaWYgKCBoYXNEdXBsaWNhdGUgKSB7CgkJCXdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkgewoJCQkJaWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7CgkJCQkJaiA9IGR1cGxpY2F0ZXMucHVzaCggaSApOwoJCQkJfQoJCQl9CgkJCXdoaWxlICggai0tICkgewoJCQkJcmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApOwoJCQl9CgkJfQoKCQkvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0cwoJCS8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNQoJCXNvcnRJbnB1dCA9IG51bGw7CgoJCXJldHVybiByZXN1bHRzOwoJfTsKCgkvKioKCSAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzCgkgKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW0KCSAqLwoJZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5vZGUsCgkJCXJldCA9ICIiLAoJCQlpID0gMCwKCQkJbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQlpZiAoICFub2RlVHlwZSApIHsKCQkJLy8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXkKCQkJd2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7CgkJCQkvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2RlcwoJCQkJcmV0ICs9IGdldFRleHQoIG5vZGUgKTsKCQkJfQoJCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHsKCQkJLy8gVXNlIHRleHRDb250ZW50IGZvciBlbGVtZW50cwoJCQkvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKQoJCQlpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSAic3RyaW5nIiApIHsKCQkJCXJldHVybiBlbGVtLnRleHRDb250ZW50OwoJCQl9IGVsc2UgewoJCQkJLy8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuCgkJCQlmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHsKCQkJCQlyZXQgKz0gZ2V0VGV4dCggZWxlbSApOwoJCQkJfQoJCQl9CgkJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7CgkJCXJldHVybiBlbGVtLm5vZGVWYWx1ZTsKCQl9CgkJLy8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzCgoJCXJldHVybiByZXQ7Cgl9OwoKCUV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0gewoKCQkvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXIKCQljYWNoZUxlbmd0aDogNTAsCgoJCWNyZWF0ZVBzZXVkbzogbWFya0Z1bmN0aW9uLAoKCQltYXRjaDogbWF0Y2hFeHByLAoKCQlhdHRySGFuZGxlOiB7fSwKCgkJZmluZDoge30sCgoJCXJlbGF0aXZlOiB7CgkJCSI+IjogeyBkaXI6ICJwYXJlbnROb2RlIiwgZmlyc3Q6IHRydWUgfSwKCQkJIiAiOiB7IGRpcjogInBhcmVudE5vZGUiIH0sCgkJCSIrIjogeyBkaXI6ICJwcmV2aW91c1NpYmxpbmciLCBmaXJzdDogdHJ1ZSB9LAoJCQkifiI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiB9CgkJfSwKCgkJcHJlRmlsdGVyOiB7CgkJCSJBVFRSIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQkJbWF0Y2hbMV0gPSBtYXRjaFsxXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoKCQkJCS8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkCgkJCQltYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgIiIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoKCQkJCWlmICggbWF0Y2hbMl0gPT09ICJ+PSIgKSB7CgkJCQkJbWF0Y2hbM10gPSAiICIgKyBtYXRjaFszXSArICIgIjsKCQkJCX0KCgkJCQlyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTsKCQkJfSwKCgkJCSJDSElMRCI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJCS8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbIkNISUxEIl0KCQkJCQkxIHR5cGUgKG9ubHl8bnRofC4uLikKCQkJCQkyIHdoYXQgKGNoaWxkfG9mLXR5cGUpCgkJCQkJMyBhcmd1bWVudCAoZXZlbnxvZGR8XGQqfFxkKm4oWystXVxkKyk/fC4uLikKCQkJCQk0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xkKm58KQoJCQkJCTUgc2lnbiBvZiB4bi1jb21wb25lbnQKCQkJCQk2IHggb2YgeG4tY29tcG9uZW50CgkJCQkJNyBzaWduIG9mIHktY29tcG9uZW50CgkJCQkJOCB5IG9mIHktY29tcG9uZW50CgkJCQkqLwoJCQkJbWF0Y2hbMV0gPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpOwoKCQkJCWlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gIm50aCIgKSB7CgkJCQkJLy8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnQKCQkJCQlpZiAoICFtYXRjaFszXSApIHsKCQkJCQkJU2l6emxlLmVycm9yKCBtYXRjaFswXSApOwoJCQkJCX0KCgkJCQkJLy8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxECgkJCQkJLy8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMQoJCQkJCW1hdGNoWzRdID0gKyggbWF0Y2hbNF0gPyBtYXRjaFs1XSArIChtYXRjaFs2XSB8fCAxKSA6IDIgKiAoIG1hdGNoWzNdID09PSAiZXZlbiIgfHwgbWF0Y2hbM10gPT09ICJvZGQiICkgKTsKCQkJCQltYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSAib2RkIiApOwoKCQkJCS8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50cwoJCQkJfSBlbHNlIGlmICggbWF0Y2hbM10gKSB7CgkJCQkJU2l6emxlLmVycm9yKCBtYXRjaFswXSApOwoJCQkJfQoKCQkJCXJldHVybiBtYXRjaDsKCQkJfSwKCgkJCSJQU0VVRE8iOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJCQl2YXIgZXhjZXNzLAoJCQkJCXVucXVvdGVkID0gIW1hdGNoWzZdICYmIG1hdGNoWzJdOwoKCQkJCWlmICggbWF0Y2hFeHByWyJDSElMRCJdLnRlc3QoIG1hdGNoWzBdICkgKSB7CgkJCQkJcmV0dXJuIG51bGw7CgkJCQl9CgoJCQkJLy8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXMKCQkJCWlmICggbWF0Y2hbM10gKSB7CgkJCQkJbWF0Y2hbMl0gPSBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCAiIjsKCgkJCQkvLyBTdHJpcCBleGNlc3MgY2hhcmFjdGVycyBmcm9tIHVucXVvdGVkIGFyZ3VtZW50cwoJCQkJfSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmCgkJCQkJLy8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSkKCQkJCQkoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnU=", "base64"));
  res.write(new Buffer("ZSApKSAmJgoJCQkJCS8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpcwoJCQkJCShleGNlc3MgPSB1bnF1b3RlZC5pbmRleE9mKCAiKSIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHsKCgkJCQkJLy8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXgKCQkJCQltYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJCQltYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJCX0KCgkJCQkvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudCkKCQkJCXJldHVybiBtYXRjaC5zbGljZSggMCwgMyApOwoJCQl9CgkJfSwKCgkJZmlsdGVyOiB7CgoJCQkiVEFHIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7CgkJCQl2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJCXJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSAiKiIgPwoJCQkJCWZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6CgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7CgkJCQkJfTsKCQkJfSwKCgkJCSJDTEFTUyI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7CgkJCQl2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArICIgIiBdOwoKCQkJCXJldHVybiBwYXR0ZXJuIHx8CgkJCQkJKHBhdHRlcm4gPSBuZXcgUmVnRXhwKCAiKF58IiArIHdoaXRlc3BhY2UgKyAiKSIgKyBjbGFzc05hbWUgKyAiKCIgKyB3aGl0ZXNwYWNlICsgInwkKSIgKSkgJiYKCQkJCQljbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQlyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09ICJzdHJpbmciICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoImNsYXNzIikgfHwgIiIgKTsKCQkJCQl9KTsKCQkJfSwKCgkJCSJBVFRSIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTsKCgkJCQkJaWYgKCByZXN1bHQgPT0gbnVsbCApIHsKCQkJCQkJcmV0dXJuIG9wZXJhdG9yID09PSAiIT0iOwoJCQkJCX0KCQkJCQlpZiAoICFvcGVyYXRvciApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoKCQkJCQlyZXN1bHQgKz0gIiI7CgoJCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIj0iID8gcmVzdWx0ID09PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAiIT0iID8gcmVzdWx0ICE9PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAiXj0iID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOgoJCQkJCQlvcGVyYXRvciA9PT0gIio9IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOgoJCQkJCQlvcGVyYXRvciA9PT0gIiQ9IiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAifj0iID8gKCAiICIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsICIgIiApICsgIiAiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQkJb3BlcmF0b3IgPT09ICJ8PSIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArICItIiA6CgkJCQkJCWZhbHNlOwoJCQkJfTsKCQkJfSwKCgkJCSJDSElMRCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7CgkJCQl2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSAibnRoIiwKCQkJCQlmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gImxhc3QiLAoJCQkJCW9mVHlwZSA9IHdoYXQgPT09ICJvZi10eXBlIjsKCgkJCQlyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/CgoJCQkJCS8vIFNob3J0Y3V0IGZvciA6bnRoLSoobikKCQkJCQlmdW5jdGlvbiggZWxlbSApIHsKCQkJCQkJcmV0dXJuICEhZWxlbS5wYXJlbnROb2RlOwoJCQkJCX0gOgoKCQkJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJCQl2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LAoJCQkJCQkJZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gIm5leHRTaWJsaW5nIiA6ICJwcmV2aW91c1NpYmxpbmciLAoJCQkJCQkJcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLAoJCQkJCQkJbmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksCgkJCQkJCQl1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSwKCQkJCQkJCWRpZmYgPSBmYWxzZTsKCgkJCQkJCWlmICggcGFyZW50ICkgewoKCQkJCQkJCS8vIDooZmlyc3R8bGFzdHxvbmx5KS0oY2hpbGR8b2YtdHlwZSkKCQkJCQkJCWlmICggc2ltcGxlICkgewoJCQkJCQkJCXdoaWxlICggZGlyICkgewoJCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQkJd2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHsKCQkJCQkJCQkJCWlmICggb2ZUeXBlID8KCQkJCQkJCQkJCQlub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOgoJCQkJCQkJCQkJCW5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgoJCQkJCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQkvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbykKCQkJCQkJCQkJc3RhcnQgPSBkaXIgPSB0eXBlID09PSAib25seSIgJiYgIXN0YXJ0ICYmICJuZXh0U2libGluZyI7CgkJCQkJCQkJfQoJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJfQoKCQkJCQkJCXN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07CgoJCQkJCQkJLy8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGAKCQkJCQkJCWlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHsKCgkJCQkJCQkJLy8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4CgoJCQkJCQkJCS8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXkKCQkJCQkJCQlub2RlID0gcGFyZW50OwoJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCWNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTsKCQkJCQkJCQlub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07CgkJCQkJCQkJZGlmZiA9IG5vZGVJbmRleCAmJiBjYWNoZVsgMiBdOwoJCQkJCQkJCW5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdOwoKCQkJCQkJCQl3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fAoKCQkJCQkJCQkJLy8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnQKCQkJCQkJCQkJKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7CgoJCQkJCQkJCQkvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVhawoJCQkJCQkJCQlpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQl1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTsKCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJLy8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlCgkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJLy8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheQoJCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQkJb3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pOwoKCQkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQkJdW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHwKCQkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCQljYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107CgkJCQkJCQkJCW5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTsKCQkJCQkJCQkJZGlmZiA9IG5vZGVJbmRleDsKCQkJCQkJCQl9CgoJCQkJCQkJCS8vIHhtbCA6bnRoLWNoaWxkKC4uLikKCQkJCQkJCQkvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pCgkJCQkJCQkJaWYgKCBkaWZmID09PSBmYWxzZSApIHsKCQkJCQkJCQkJLy8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnQKCQkJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCQkJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQkJCWlmICggKCBvZlR5cGUgPwoJCQkJCQkJCQkJCW5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6CgkJCQkJCQkJCQkJbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmCgkJCQkJCQkJCQkJKytkaWZmICkgewoKCQkJCQkJCQkJCQkvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50CgkJCQkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJCQkJb3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pOwoKCQkJCQkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQkJCQkJdW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHwKCQkJCQkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCQkJCQl1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07CgkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQlpZiAoIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQkvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZQoJCQkJCQkJZGlmZiAtPSBsYXN0OwoJCQkJCQkJcmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7CgkJCQkJCX0KCQkJCQl9OwoJCQl9LAoKCQkJIlBTRVVETyI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkgewoJCQkJLy8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlCgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzCgkJCQkvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVycwoJCQkJLy8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvcwoJCQkJdmFyIGFyZ3MsCgkJCQkJZm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fAoJCQkJCQlTaXp6bGUuZXJyb3IoICJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIgKyBwc2V1ZG8gKTsKCgkJCQkvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0CgkJCQkvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvbgoJCQkJLy8ganVzdCBhcyBTaXp6bGUgZG9lcwoJCQkJaWYgKCBmblsgZXhwYW5kbyBdICkgewoJCQkJCXJldHVybiBmbiggYXJndW1lbnQgKTsKCQkJCX0KCgkJCQkvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXMKCQkJCWlmICggZm4ubGVuZ3RoID4gMSApIHsKCQkJCQlhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgIiIsIGFyZ3VtZW50IF07CgkJCQkJcmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/CgkJCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCQkJCXZhciBpZHgsCgkJCQkJCQkJbWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLAoJCQkJCQkJCWkgPSBtYXRjaGVkLmxlbmd0aDsKCQkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJCWlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTsKCQkJCQkJCQlzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApOwoJCQkJCQkJfQoJCQkJCQl9KSA6CgkJCQkJCWZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQkJcmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7CgkJCQkJCX07CgkJCQl9CgoJCQkJcmV0dXJuIGZuOwoJCQl9CgkJfSwKCgkJcHNldWRvczogewoJCQkvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3MKCQkJIm5vdCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCQkvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZQoJCQkJLy8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcKCQkJCS8vIHNwYWNlcyBhcyBjb21iaW5hdG9ycwoJCQkJdmFyIGlucHV0ID0gW10sCgkJCQkJcmVzdWx0cyA9IFtdLAoJCQkJCW1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApICk7CgoJCQkJcmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/CgkJCQkJbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJCXZhciBlbGVtLAoJCQkJCQkJdW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLAoJCQkJCQkJaSA9IHNlZWQubGVuZ3RoOwoKCQkJCQkJLy8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYAoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkgewoJCQkJCQkJCXNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0pIDoKCQkJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJCQlpbnB1dFswXSA9IGVsZW07CgkJCQkJCW1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTsKCQkJCQkJLy8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSkKCQkJCQkJaW5wdXRbMF0gPSBudWxsOwoJCQkJCQlyZXR1cm4gIXJlc3VsdHMucG9wKCk7CgkJCQkJfTsKCQkJfSksCgoJCQkiaGFzIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7CgkJCQl9OwoJCQl9KSwKCgkJCSJjb250YWlucyI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHsKCQkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTsKCQkJCX07CgkJCX0pLAoKCQkJLy8gIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3IKCQkJLy8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUKCQkJLy8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQywKCQkJLy8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSAiLSIuCgkJCS8vIFRoZSBt", "base64"));
  res.write(new Buffer("YXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LgoJCQkvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLiIKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkbwoJCQkibGFuZyI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7CgkJCQkvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyCgkJCQlpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgIiIpICkgewoJCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBsYW5nICk7CgkJCQl9CgkJCQlsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJdmFyIGVsZW1MYW5nOwoJCQkJCWRvIHsKCQkJCQkJaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/CgkJCQkJCQllbGVtLmxhbmcgOgoJCQkJCQkJZWxlbS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkgKSB7CgoJCQkJCQkJZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpOwoJCQkJCQkJcmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyAiLSIgKSA9PT0gMDsKCQkJCQkJfQoJCQkJCX0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX07CgkJCX0pLAoKCQkJLy8gTWlzY2VsbGFuZW91cwoJCQkidGFyZ2V0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDsKCQkJCXJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDsKCQkJfSwKCgkJCSJyb290IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTsKCQkJfSwKCgkJCSJmb2N1cyI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTsKCQkJfSwKCgkJCS8vIEJvb2xlYW4gcHJvcGVydGllcwoJCQkiZW5hYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlOwoJCQl9LAoKCQkJImRpc2FibGVkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsKCQkJfSwKCgkJCSJjaGVja2VkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHMKCQkJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkCgkJCQl2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gKG5vZGVOYW1lID09PSAiaW5wdXQiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09ICJvcHRpb24iICYmICEhZWxlbS5zZWxlY3RlZCk7CgkJCX0sCgoJCQkic2VsZWN0ZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCS8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHQKCQkJCS8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHkKCQkJCWlmICggZWxlbS5wYXJlbnROb2RlICkgewoJCQkJCWVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQkJfQoKCQkJCXJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlOwoJCQl9LAoKCQkJLy8gQ29udGVudHMKCQkJImVtcHR5IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkbwoJCQkJLy8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLAoJCQkJLy8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLikKCQkJCS8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW4KCQkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSwKCgkJCSJwYXJlbnQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAhRXhwci5wc2V1ZG9zWyJlbXB0eSJdKCBlbGVtICk7CgkJCX0sCgoJCQkvLyBFbGVtZW50L2lucHV0IHR5cGVzCgkJCSJoZWFkZXIiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTsKCQkJfSwKCgkJCSJpbnB1dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCQl9LAoKCQkJImJ1dHRvbiI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gbmFtZSA9PT0gImlucHV0IiAmJiBlbGVtLnR5cGUgPT09ICJidXR0b24iIHx8IG5hbWUgPT09ICJidXR0b24iOwoJCQl9LAoKCQkJInRleHQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBhdHRyOwoJCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiAmJgoJCQkJCWVsZW0udHlwZSA9PT0gInRleHQiICYmCgoJCQkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJCQkvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgInNlYXJjaCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gInRleHQiCgkJCQkJKCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSAidGV4dCIgKTsKCQkJfSwKCgkJCS8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb24KCQkJImZpcnN0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHsKCQkJCXJldHVybiBbIDAgXTsKCQkJfSksCgoJCQkibGFzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJcmV0dXJuIFsgbGVuZ3RoIC0gMSBdOwoJCQl9KSwKCgkJCSJlcSI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJCXJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTsKCQkJfSksCgoJCQkiZXZlbiI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJdmFyIGkgPSAwOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJIm9kZCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJdmFyIGkgPSAxOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJImx0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQkJZm9yICggOyAtLWkgPj0gMDsgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJImd0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQkJZm9yICggOyArK2kgPCBsZW5ndGg7ICkgewoJCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCQl9KQoJCX0KCX07CgoJRXhwci5wc2V1ZG9zWyJudGgiXSA9IEV4cHIucHNldWRvc1siZXEiXTsKCgkvLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvcwoJZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7CgkJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApOwoJfQoJZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHsKCQlFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApOwoJfQoKCS8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVycwoJZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9CglzZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvczsKCUV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7CgoJdG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHsKCQl2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSwKCQkJc29GYXIsIGdyb3VwcywgcHJlRmlsdGVycywKCQkJY2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyAiICIgXTsKCgkJaWYgKCBjYWNoZWQgKSB7CgkJCXJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7CgkJfQoKCQlzb0ZhciA9IHNlbGVjdG9yOwoJCWdyb3VwcyA9IFtdOwoJCXByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjsKCgkJd2hpbGUgKCBzb0ZhciApIHsKCgkJCS8vIENvbW1hIGFuZCBmaXJzdCBydW4KCQkJaWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7CgkJCQlpZiAoIG1hdGNoICkgewoJCQkJCS8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkCgkJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7CgkJCQl9CgkJCQlncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApOwoJCQl9CgoJCQltYXRjaGVkID0gZmFsc2U7CgoJCQkvLyBDb21iaW5hdG9ycwoJCQlpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHsKCQkJCW1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpOwoJCQkJdG9rZW5zLnB1c2goewoJCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJCS8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZQoJCQkJCXR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCAiICIgKQoJCQkJfSk7CgkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCQl9CgoJCQkvLyBGaWx0ZXJzCgkJCWZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7CgkJCQlpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8CgkJCQkJKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7CgkJCQkJbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7CgkJCQkJdG9rZW5zLnB1c2goewoJCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQkJdHlwZTogdHlwZSwKCQkJCQkJbWF0Y2hlczogbWF0Y2gKCQkJCQl9KTsKCQkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCQkJfQoJCQl9CgoJCQlpZiAoICFtYXRjaGVkICkgewoJCQkJYnJlYWs7CgkJCX0KCQl9CgoJCS8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2VzcwoJCS8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZwoJCS8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2VucwoJCXJldHVybiBwYXJzZU9ubHkgPwoJCQlzb0Zhci5sZW5ndGggOgoJCQlzb0ZhciA/CgkJCQlTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOgoJCQkJLy8gQ2FjaGUgdGhlIHRva2VucwoJCQkJdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7Cgl9OwoKCWZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHsKCQl2YXIgaSA9IDAsCgkJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJCXNlbGVjdG9yID0gIiI7CgkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCXNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTsKCQl9CgkJcmV0dXJuIHNlbGVjdG9yOwoJfQoKCWZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7CgkJdmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLAoJCQljaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09ICJwYXJlbnROb2RlIiwKCQkJZG9uZU5hbWUgPSBkb25lKys7CgoJCXJldHVybiBjb21iaW5hdG9yLmZpcnN0ID8KCQkJLy8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50CgkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQlyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7CgkJCQkJfQoJCQkJfQoJCQl9IDoKCgkJCS8vIENoZWNrIGFnYWluc3QgYWxsIGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50cwoJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJdmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSwKCQkJCQluZXdDYWNoZSA9IFsgZGlycg==", "base64"));
  res.write(new Buffer("dW5zLCBkb25lTmFtZSBdOwoKCQkJCS8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZwoJCQkJaWYgKCB4bWwgKSB7CgkJCQkJd2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHsKCQkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHsKCQkJCQkJCW91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRSA8OSBvbmx5CgkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJaWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsgZGlyIF0pICYmCgkJCQkJCQkJb2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHsKCgkJCQkJCQkJLy8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHMKCQkJCQkJCQlyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJLy8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50cwoJCQkJCQkJCXVuaXF1ZUNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlOwoKCQkJCQkJCQkvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmcKCQkJCQkJCQlpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkgewoJCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX07Cgl9CgoJZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkgewoJCXJldHVybiBtYXRjaGVycy5sZW5ndGggPiAxID8KCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCXZhciBpID0gbWF0Y2hlcnMubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJaWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHRydWU7CgkJCX0gOgoJCQltYXRjaGVyc1swXTsKCX0KCglmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7CgkJdmFyIGkgPSAwLAoJCQlsZW4gPSBjb250ZXh0cy5sZW5ndGg7CgkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCVNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7CgkJfQoJCXJldHVybiByZXN1bHRzOwoJfQoKCWZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7CgkJdmFyIGVsZW0sCgkJCW5ld1VubWF0Y2hlZCA9IFtdLAoJCQlpID0gMCwKCQkJbGVuID0gdW5tYXRjaGVkLmxlbmd0aCwKCQkJbWFwcGVkID0gbWFwICE9IG51bGw7CgoJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQlpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHsKCQkJCWlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCW5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7CgkJCQkJaWYgKCBtYXBwZWQgKSB7CgkJCQkJCW1hcC5wdXNoKCBpICk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gbmV3VW5tYXRjaGVkOwoJfQoKCWZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHsKCQlpZiAoIHBvc3RGaWx0ZXIgJiYgIXBvc3RGaWx0ZXJbIGV4cGFuZG8gXSApIHsKCQkJcG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTsKCQl9CgkJaWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7CgkJCXBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTsKCQl9CgkJcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkgewoJCQl2YXIgdGVtcCwgaSwgZWxlbSwKCQkJCXByZU1hcCA9IFtdLAoJCQkJcG9zdE1hcCA9IFtdLAoJCQkJcHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCwKCgkJCQkvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dAoJCQkJZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8ICIqIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSwKCgkJCQkvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb24KCQkJCW1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgPwoJCQkJCWNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDoKCQkJCQllbGVtcywKCgkJCQltYXRjaGVyT3V0ID0gbWF0Y2hlciA/CgkJCQkJLy8gSWYgd2UgaGF2ZSBhIHBvc3RGaW5kZXIsIG9yIGZpbHRlcmVkIHNlZWQsIG9yIG5vbi1zZWVkIHBvc3RGaWx0ZXIgb3IgcHJlZXhpc3RpbmcgcmVzdWx0cywKCQkJCQlwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/CgoJCQkJCQkvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3NhcnkKCQkJCQkJW10gOgoKCQkJCQkJLy8gLi4ub3RoZXJ3aXNlIHVzZSByZXN1bHRzIGRpcmVjdGx5CgkJCQkJCXJlc3VsdHMgOgoJCQkJCW1hdGNoZXJJbjsKCgkJCS8vIEZpbmQgcHJpbWFyeSBtYXRjaGVzCgkJCWlmICggbWF0Y2hlciApIHsKCQkJCW1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7CgkJCX0KCgkJCS8vIEFwcGx5IHBvc3RGaWx0ZXIKCQkJaWYgKCBwb3N0RmlsdGVyICkgewoJCQkJdGVtcCA9IGNvbmRlbnNlKCBtYXRjaGVyT3V0LCBwb3N0TWFwICk7CgkJCQlwb3N0RmlsdGVyKCB0ZW1wLCBbXSwgY29udGV4dCwgeG1sICk7CgoJCQkJLy8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJbgoJCQkJaSA9IHRlbXAubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJaWYgKCAoZWxlbSA9IHRlbXBbaV0pICkgewoJCQkJCQltYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlpZiAoIHNlZWQgKSB7CgkJCQlpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkgewoJCQkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCQkJLy8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzCgkJCQkJCXRlbXAgPSBbXTsKCQkJCQkJaSA9IG1hdGNoZXJPdXQubGVuZ3RoOwoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHsKCQkJCQkJCQkvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaAoJCQkJCQkJCXRlbXAucHVzaCggKG1hdGNoZXJJbltpXSA9IGVsZW0pICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJcG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApOwoJCQkJCX0KCgkJCQkJLy8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWQKCQkJCQlpID0gbWF0Y2hlck91dC5sZW5ndGg7CgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJgoJCQkJCQkJKHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkgewoKCQkJCQkJCXNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCS8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZAoJCQl9IGVsc2UgewoJCQkJbWF0Y2hlck91dCA9IGNvbmRlbnNlKAoJCQkJCW1hdGNoZXJPdXQgPT09IHJlc3VsdHMgPwoJCQkJCQltYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOgoJCQkJCQltYXRjaGVyT3V0CgkJCQkpOwoJCQkJaWYgKCBwb3N0RmluZGVyICkgewoJCQkJCXBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApOwoJCQkJfSBlbHNlIHsKCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBtYXRjaGVyT3V0ICk7CgkJCQl9CgkJCX0KCQl9KTsKCX0KCglmdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkgewoJCXZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosCgkJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJCWxlYWRpbmdSZWxhdGl2ZSA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1swXS50eXBlIF0sCgkJCWltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVsiICJdLAoJCQlpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsCgoJCQkvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKQoJCQltYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7CgkJCX0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSwKCQkJbWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gaW5kZXhPZiggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTsKCQkJfSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLAoJCQltYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCXZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKAoJCQkJCShjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/CgkJCQkJCW1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOgoJCQkJCQltYXRjaEFueUNvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApICk7CgkJCQkvLyBBdm9pZCBoYW5naW5nIG9udG8gZWxlbWVudCAoaXNzdWUgIzI5OSkKCQkJCWNoZWNrQ29udGV4dCA9IG51bGw7CgkJCQlyZXR1cm4gcmV0OwoJCQl9IF07CgoJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQlpZiAoIChtYXRjaGVyID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2ldLnR5cGUgXSkgKSB7CgkJCQltYXRjaGVycyA9IFsgYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlcikgXTsKCQkJfSBlbHNlIHsKCQkJCW1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTsKCgkJCQkvLyBSZXR1cm4gc3BlY2lhbCB1cG9uIHNlZWluZyBhIHBvc2l0aW9uYWwgbWF0Y2hlcgoJCQkJaWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7CgkJCQkJLy8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nCgkJCQkJaiA9ICsraTsKCQkJCQlmb3IgKCA7IGogPCBsZW47IGorKyApIHsKCQkJCQkJaWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkgewoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHNldE1hdGNoZXIoCgkJCQkJCWkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLAoJCQkJCQlpID4gMSAmJiB0b1NlbGVjdG9yKAoJCQkJCQkJLy8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmAKCQkJCQkJCXRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09ICIgIiA/ICIqIiA6ICIiIH0pCgkJCQkJCSkucmVwbGFjZSggcnRyaW0sICIkMSIgKSwKCQkJCQkJbWF0Y2hlciwKCQkJCQkJaSA8IGogJiYgbWF0Y2hlckZyb21Ub2tlbnMoIHRva2Vucy5zbGljZSggaSwgaiApICksCgkJCQkJCWogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSwKCQkJCQkJaiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKQoJCQkJCSk7CgkJCQl9CgkJCQltYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7CgkJCX0KCQl9CgoJCXJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTsKCX0KCglmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7CgkJdmFyIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCwKCQkJYnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsCgkJCXN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHsKCQkJCXZhciBlbGVtLCBqLCBtYXRjaGVyLAoJCQkJCW1hdGNoZWRDb3VudCA9IDAsCgkJCQkJaSA9ICIwIiwKCQkJCQl1bm1hdGNoZWQgPSBzZWVkICYmIFtdLAoJCQkJCXNldE1hdGNoZWQgPSBbXSwKCQkJCQljb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCwKCQkJCQkvLyBXZSBtdXN0IGFsd2F5cyBoYXZlIGVpdGhlciBzZWVkIGVsZW1lbnRzIG9yIG91dGVybW9zdCBjb250ZXh0CgkJCQkJZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbIlRBRyJdKCAiKiIsIG91dGVybW9zdCApLAoJCQkJCS8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyCgkJCQkJZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksCgkJCQkJbGVuID0gZWxlbXMubGVuZ3RoOwoKCQkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJCW91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDsKCQkJCX0KCgkJCQkvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0cwoJCQkJLy8gU3VwcG9ydDogSUU8OSwgU2FmYXJpCgkJCQkvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogImxlbmd0aCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkCgkJCQlmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7CgkJCQkJaWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHsKCQkJCQkJaiA9IDA7CgkJCQkJCWlmICggIWNvbnRleHQgJiYgZWxlbS5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCApIHsKCQkJCQkJCXNldERvY3VtZW50KCBlbGVtICk7CgkJCQkJCQl4bWwgPSAhZG9jdW1lbnRJc0hUTUw7CgkJCQkJCX0KCQkJCQkJd2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHsKCQkJCQkJCWlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHsKCQkJCQkJCQlyZXN1bHRzLnB1c2goIGVsZW0gKTsKCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQkJCWRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBUcmFjayB1bm1hdGNoZWQgZWxlbWVudHMgZm9yIHNldCBmaWx0ZXJzCgkJCQkJaWYgKCBieVNldCApIHsKCQkJCQkJLy8gVGhleSB3aWxsIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBwb3NzaWJsZSBtYXRjaGVycwoJCQkJCQlpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7CgkJCQkJCQltYXRjaGVkQ291bnQtLTsKCQkJCQkJfQoKCQkJCQkJLy8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdAoJCQkJCQlpZiAoIHNlZWQgKSB7CgkJCQkJCQl1bm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGAKCQkJCS8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuCgkJCQltYXRjaGVkQ291bnQgKz0gaTsKCgkJCQkvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHMKCQkJCS8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGAKCQkJCS8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZQoJCQkJLy8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC4KCQkJCS8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nICIwIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0CgkJCQkvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhICIwMCIgYG1hdGNoZWRDb3VudGAgdGhhdCBkaWZmZXJzIGZyb20gYGlgIGJ1dCBpcyBhbHNvCgkJCQkvLyBudW1lcmljYWxseSB6ZXJvLgoJCQkJaWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7CgkJCQkJaiA9IDA7CgkJCQkJd2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkgewoJCQkJCQltYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApOwoJCQkJCX0KCgkJCQkJaWYgKCBzZWVkICkgewoJCQkJCQkvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nCgkJCQkJCWlmICggbWF0Y2hlZENvdW50ID4gMCApIHsKCQkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJCWlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7CgkJCQkJCQkJCXNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXMKCQkJCQkJc2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7CgkJCQkJfQoKCQkJCQkvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzCgkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApOwoKCQkJCQkvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmcKCQkJCQlpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiYKCQkJCQkJKCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7CgoJCQkJCQlTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnMKCQkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJCWRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlOwoJCQkJCW91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwOwoJCQkJfQoKCQkJCXJldHVybiB1bm1hdGNoZWQ7CgkJCX07CgoJCXJldHVybiBieVNldCA/CgkJCW1hcmtGdW5jdGlvbiggc3VwZXJNYXRjaGVyICkgOgoJCQlzdXBlck1hdGNoZXI7Cgl9CgoJY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHsKCQl2YXIgaSwKCQkJc2V0TWF0Y2hlcnMgPSBbXSwKCQkJZWxlbWVudE1hdGNoZXJzID0gW10sCgkJCWNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF07CgoJCWlmICggIWNhY2hlZCApIHsKCQkJLy8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50CgkJCWlmICggIW1hdGNoICkgewoJCQkJbWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTsKCQkJfQoJCQlpID0gbWF0Y2gubGVuZ3RoOwoJCQl3aGlsZSAoIGktLSApIHsKCQkJCWNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBtYXRjaFtpXSApOwoJCQkJaWYgKCBjYWNoZWRbIGV4cGFuZG8gXSApIHsKCQkJCQlzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJCX0gZWxzZSB7CgkJCQkJZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApOwoJCQkJfQoJCQl9CgoJCQkvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24KCQkJY2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7CgoJCQkvLyBTYXZlIHNlbGVjdG9yIGFuZCB0b2tlbml6YXRpb24KCQkJY2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7CgkJfQoJCXJldHVybiBjYWNoZWQ7Cgl9OwoKCS8qKgoJICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZAoJICogIHNlbGVjdG9yIGZ1bmN0aW9ucwoJICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWQKCSAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlCgkgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHQKCSAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXQoJICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3QKCSAqLwoJc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHsKCQl2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCwKCQkJY29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09ICJmdW5jdGlvbiIgJiYgc2VsZWN0b3IsCgkJCW1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApOwoKCQlyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTsKCgkJLy8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWQKCQkvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpCgkJaWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7CgoJCQkvLyBSZWR1Y2UgY29udGV4dCBpZiB0aGUgbGVhZGluZyBjb21wb3VuZCBzZWxlY3RvciBpcyBhbiBJRAoJCQl0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7CgkJCWlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSAiSUQiICYmCgkJCQkJc3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiYKCQkJCQlFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkgewoKCQkJCWNvbnRleHQgPSAoIEV4cHIuZmluZFsiSUQiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07CgkJCQlpZiAoICFjb250ZXh0ICkgewoJCQkJCXJldHVybiByZXN1bHRzOwoKCQkJCS8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWwKCQkJCX0gZWxzZSBpZiAoIGNvbXBpbGVkICkgewoJCQkJCWNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7CgkJCQl9CgoJCQkJc2VsZWN0b3IgPSBzZWxlY3Rvci5zbGljZSggdG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoICk7CgkJCX0KCgkJCS8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmcKCQkJaSA9IG1hdGNoRXhwclsibmVlZHNDb250ZXh0Il0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoOwoJCQl3aGlsZSAoIGktLSApIHsKCQkJCXRva2VuID0gdG9rZW5zW2ldOwoKCQkJCS8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3IKCQkJCWlmICggRXhwci5yZWxhdGl2ZVsgKHR5cGUgPSB0b2tlbi50eXBlKSBdICkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJaWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHsKCQkJCQkvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnMKCQkJCQlpZiAoIChzZWVkID0gZmluZCgKCQkJCQkJdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLAoJCQkJCQlyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0CgkJCQkJKSkgKSB7CgoJCQkJCQkvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHkKCQkJCQkJdG9rZW5zLnNwbGljZSggaSwgMSApOwoJCQkJCQlzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApOwoJCQkJCQlpZiAoICFzZWxlY3RvciApIHsKCQkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTsKCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQl9CgoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCS8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZAoJCS8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmUKCQkoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoCgkJCXNlZWQsCgkJCWNvbnRleHQsCgkJCSFkb2N1bWVudElzSFRNTCwKCQkJcmVzdWx0cywKCQkJIWNvbnRleHQgfHwgcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJCSk7CgkJcmV0dXJuIHJlc3VsdHM7Cgl9OwoKCS8vIE9uZS10aW1lIGFzc2lnbm1lbnRzCgoJLy8gU29ydCBzdGFiaWxpdHkKCXN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oIiIpID09PSBleHBhbmRvOwoKCS8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNSsKCS8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb24KCXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlOwoKCS8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudAoJc2V0RG9jdW1lbnQoKTsKCgkvLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KQoJLy8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqCglzdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZGl2MSApIHsKCQkvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZykKCQlyZXR1cm4gZGl2MS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikgKSAmIDE7Cgl9KTsKCgkvLyBTdXBwb3J0OiBJRTw4CgkvLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSAiaW50ZXJwb2xhdGlvbiIKCS8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHgKCWlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5pbm5lckhUTUwgPSAiPGEgaHJlZj0nIyc+PC9hPiI7CgkJcmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpID09PSAiIyIgOwoJfSkgKSB7CgkJYWRkSGFuZGxlKCAidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQkJaWYgKCAhaXNYTUwgKSB7CgkJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gInR5cGUiID8gMSA6IDIgKTsKCQkJfQoJCX0pOwoJfQoKCS8vIFN1cHBvcnQ6IElFPDkKCS8vIFVzZSBkZWZhdWx0VmFsdWUgaW4gcGxhY2Ugb2YgZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpCglpZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5pbm5lckhUTUwgPSAiPGlucHV0Lz4iOwoJCWRpdi5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSggInZhbHVlIiwgIiIgKTsKCQlyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09ICIiOwoJfSkgKSB7CgkJYWRkSGFuZGxlKCAidmFsdWUiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCWlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiApIHsKCQkJCXJldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTsKCQkJfQoJCX0pOwoJfQoKCS8vIFN1cHBvcnQ6IElFPDkKCS8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXMKCWlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCXJldHVybiBkaXYuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpID09IG51bGw7Cgl9KSApIHsKCQlhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCXZhciB2YWw7CgkJCWlmICggIWlzWE1MICkgewoJCQkJcmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJCSh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSkgJiYgdmFsLnNwZWNpZmllZCA/CgkJCQkJCXZhbC52YWx1ZSA6CgkJCQkJbnVsbDsKCQkJfQoJCX0pOwoJfQoKCXJldHVybiBTaXp6bGU7CgoJfSkoIHdpbmRvdyApOwoKCgoJalF1ZXJ5LmZpbmQgPSBTaXp6bGU7CglqUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7CglqUXVlcnkuZXhwclsgIjoiIF0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zOwoJalF1ZXJ5LnVuaXF1ZVNvcnQgPSBqUXVlcnkudW5pcXVlID0gU2l6emxlLnVuaXF1ZVNvcnQ7CglqUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0OwoJalF1ZXJ5LmlzWE1MRG9jID0gU2l6emxlLmlzWE1MOwoJalF1ZXJ5LmNvbnRhaW5zID0gU2l6emxlLmNvbnRhaW5zOwoKCgoJdmFyIGRpciA9IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkgewoJCXZhciBtYXRjaGVkID0gW10sCgkJCXRydW5jYXRlID0gdW50aWwgIT09IHVuZGVmaW5lZDsKCgkJd2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7CgkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCWlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQltYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJfQoJCX0KCQlyZXR1cm4gbWF0Y2hlZDsKCX07CgoKCXZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkgewoJCXZhciBtYXRjaGVkID0gW107CgoJCWZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7CgkJCWlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkgewoJCQkJbWF0Y2hlZC5wdXNoKCBuICk7CgkJCX0KCQl9CgoJCXJldHVybiBtYXRjaGVkOwoJfTsKCgoJdmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7CgoJdmFyIHJzaW5nbGVUYWcgPSAoIC9ePChbXHctXSspXHMqXC8/Pig/OjxcL1wxPnwpJC8gKTsKCgoKCXZhciByaXNTaW1wbGUgPSAvXi5bXjojXFtcLixdKiQvOwoKCS8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90CglmdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHsKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7CgkJCQkvKiBqc2hpbnQgLVcwMTggKi8KCQkJCXJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDsKCQkJfSApOwoKCQl9CgoJCWlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkgewoJCQlyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7CgkJCX0gKTsKCgkJfQoKCQlpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09ICJzdHJpbmciICkgewoJCQlpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHsKCQkJCXJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTsKCQkJfQoKCQkJcXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApOwoJCX0KCgkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiAoIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBxdWFsaWZpZXIgKSA+IC0xICkgIT09IG5vdDsKCQl9ICk7Cgl9CgoJalF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkgewoJCXZhciBlbGVtID0gZWxlbXNbIDAgXTsKCgkJaWYgKCBub3QgKSB7CgkJCWV4cHIgPSAiOm5vdCgiICsgZXhwciArICIpIjsKCQl9CgoJCXJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/CgkJCWpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXSA6CgkJCWpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTsKCQkJfSApICk7Cgl9OwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXZhciBpLAoJCQkJcmV0ID0gW10sCgkJCQlzZWxmID0gdGhpcywKCQkJCWxlbiA9IHNlbGYubGVuZ3RoOwoKCQkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09ICJzdHJpbmciICkgewoJCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHsKCQkJCQlmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkgewoJCQkJCQlpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0gKSApOwoJCQl9CgoJCQlmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkgewoJCQkJalF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApOwoJCQl9CgoJCQkvLyBOZWVkZWQgYmVjYXVzZSAkKCBzZWxlY3RvciwgY29udGV4dCApIGJlY29tZXMgJCggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICkKCQkJcmV0ID0gdGhpcy5wdXNoU3RhY2soIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlKCByZXQgKSA6IHJldCApOwoJCQlyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArICIgIiArIHNlbGVjdG9yIDogc2VsZWN0b3I7CgkJCXJldHVybiByZXQ7CgkJfSwKCQlmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7CgkJfSwKCQlub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTsKCQl9LAoJCWlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiAhIXdpbm5vdygKCQkJCXRoaXMsCgoJCQkJLy8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldAoJCQkJLy8gc28gJCgicDpmaXJzdCIpLmlzKCJwOmxhc3QiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gInAiLgoJCQkJdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgPwoJCQkJCWpRdWVyeSggc2VsZWN0b3IgKSA6CgkJCQkJc2VsZWN0b3IgfHwgW10sCgkJCQlmYWxzZQoJCQkpLmxlbmd0aDsKCQl9Cgl9ICk7CgoKCS8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0CgoKCS8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KQoJdmFyIHJvb3RqUXVlcnksCgoJCS8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzCgkJLy8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKQoJCS8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KQoJCXJxdWlja0V4cHIgPSAvXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLAoKCQlpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7CgkJCXZhciBtYXRjaCwgZWxlbTsKCgkJCS8vIEhBTkRMRTogJCgiIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSkKCQkJaWYgKCAhc2VsZWN0b3IgKSB7CgkJCQlyZXR1cm4gdGhpczsKCQkJfQoKCQkJLy8gaW5pdCBhY2NlcHRzIGFuIGFsdGVybmF0ZSByb290alF1ZXJ5CgkJCS8vIHNvIG1pZ3JhdGUgY2FuIHN1cHBvcnQgalF1ZXJ5LnN1YiAoZ2gtMjEwMSkKCQkJcm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTsKCgkJCS8vIEhhbmRsZSBIVE1MIHN0cmluZ3MKCQkJaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICkgewoJCQkJaWYgKCBzZWxlY3Rvci5jaGFyQXQoIDAgKSA9PT0gIjwiICYmCgkJCQkJc2VsZWN0b3IuY2hhckF0KCBzZWxlY3Rvci5sZW5ndGggLSAxICkgPT09ICI+IiAmJgoJCQkJCXNlbGVjdG9yLmxlbmd0aCA+PSAzICkgewoKCQkJCQkvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVjawoJCQkJCW1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdOwoKCQkJCX0gZWxzZSB7CgkJCQkJbWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7CgkJCQl9CgoJCQkJLy8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZAoJCQkJaWYgKCBtYXRjaCAmJiAoIG1hdGNoWyAxIF0gfHwgIWNvbnRleHQgKSApIHsKCgkJCQkJLy8gSEFORExFOiAkKGh0bWwpIC0+ICQoYXJyYXkpCgkJCQkJaWYgKCBtYXRjaFsgMSBdICkgewoJCQkJCQljb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbIDAgXSA6IGNvbnRleHQ7CgoJCQkJCQkvLyBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0CgkJCQkJCS8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50CgkJCQkJCWpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTCgKCQkJCQkJCW1hdGNoWyAxIF0sCgkJCQkJCQljb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LAoJCQkJCQkJdHJ1ZQoJCQkJCQkpICk7CgoJCQkJCQkvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpCgkJCQkJCWlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsgMSBdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHsKCQkJCQkJCWZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7CgoJCQkJCQkJCS8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGUKCQkJCQkJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7CgkJCQkJCQkJCXRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTsKCgkJCQkJCQkJLy8gLi4uYW5kIG90aGVyd2lzZSBzZXQgYXMgYXR0cmlidXRlcwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXRoaXMuYXR0ciggbWF0Y2gsIGNvbnRleHRbIG1hdGNoIF0gKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCXJldHVybiB0aGlzOwoKCQkJCQkvLyBIQU5ETEU6ICQoI2lkKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApOwoKCQkJCQkJLy8gQ2hlY2sgcGFyZW50Tm9kZSB0byBjYXRjaCB3aGVuIEJsYWNrYmVycnkgNC42IHJldHVybnMKCQkJCQkJLy8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2MwoJCQkJCQlpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkgewoKCQkJCQkJCS8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBJRSBhbmQgT3BlcmEgcmV0dXJuIGl0ZW1zCgkJCQkJCQkvLyBieSBuYW1lIGluc3RlYWQgb2YgSUQKCQkJCQkJCWlmICggZWxlbS5pZCAhPT0gbWF0Y2hbIDIgXSApIHsKCQkJCQkJCQlyZXR1cm4gcm9vdGpRdWVyeS5maW5kKCBzZWxlY3RvciApOwoJCQkJCQkJfQoKCQkJCQkJCS8vIE90aGVyd2lzZSwgd2UgaW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3QKCQkJCQkJCXRoaXMubGVuZ3RoID0gMTsKCQkJCQkJCXRoaXNbIDAgXSA9IGVsZW07CgkJCQkJ", "base64"));
  res.write(new Buffer("CX0KCgkJCQkJCXRoaXMuY29udGV4dCA9IGRvY3VtZW50OwoJCQkJCQl0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0KCgkJCQkvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKQoJCQkJfSBlbHNlIGlmICggIWNvbnRleHQgfHwgY29udGV4dC5qcXVlcnkgKSB7CgkJCQkJcmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTsKCgkJCQkvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dCkKCQkJCS8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKQoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvciggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICk7CgkJCQl9CgoJCQkvLyBIQU5ETEU6ICQoRE9NRWxlbWVudCkKCQkJfSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7CgkJCQl0aGlzLmNvbnRleHQgPSB0aGlzWyAwIF0gPSBzZWxlY3RvcjsKCQkJCXRoaXMubGVuZ3RoID0gMTsKCQkJCXJldHVybiB0aGlzOwoKCQkJLy8gSEFORExFOiAkKGZ1bmN0aW9uKQoJCQkvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHkKCQkJfSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7CgkJCQlyZXR1cm4gdHlwZW9mIHJvb3QucmVhZHkgIT09ICJ1bmRlZmluZWQiID8KCQkJCQlyb290LnJlYWR5KCBzZWxlY3RvciApIDoKCgkJCQkJLy8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudAoJCQkJCXNlbGVjdG9yKCBqUXVlcnkgKTsKCQkJfQoKCQkJaWYgKCBzZWxlY3Rvci5zZWxlY3RvciAhPT0gdW5kZWZpbmVkICkgewoJCQkJdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yLnNlbGVjdG9yOwoJCQkJdGhpcy5jb250ZXh0ID0gc2VsZWN0b3IuY29udGV4dDsKCQkJfQoKCQkJcmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7CgkJfTsKCgkvLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uCglpbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjsKCgkvLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlCglyb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApOwoKCgl2YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sCgoJCS8vIG1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0CgkJZ3VhcmFudGVlZFVuaXF1ZSA9IHsKCQkJY2hpbGRyZW46IHRydWUsCgkJCWNvbnRlbnRzOiB0cnVlLAoJCQluZXh0OiB0cnVlLAoJCQlwcmV2OiB0cnVlCgkJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJaGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkgewoJCQl2YXIgaSwKCQkJCXRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLAoJCQkJbGVuID0gdGFyZ2V0cy5sZW5ndGg7CgoJCQlyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCQlpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfSApOwoJCX0sCgoJCWNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7CgkJCXZhciBjdXIsCgkJCQlpID0gMCwKCQkJCWwgPSB0aGlzLmxlbmd0aCwKCQkJCW1hdGNoZWQgPSBbXSwKCQkJCXBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gInN0cmluZyIgPwoJCQkJCWpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDoKCQkJCQkwOwoKCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCQkJZm9yICggY3VyID0gdGhpc1sgaSBdOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHsKCgkJCQkJLy8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzCgkJCQkJaWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHBvcyA/CgkJCQkJCXBvcy5pbmRleCggY3VyICkgPiAtMSA6CgoJCQkJCQkvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGUKCQkJCQkJY3VyLm5vZGVUeXBlID09PSAxICYmCgkJCQkJCQlqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGN1ciwgc2VsZWN0b3JzICkgKSApIHsKCgkJCQkJCW1hdGNoZWQucHVzaCggY3VyICk7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApOwoJCX0sCgoJCS8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4KCQkvLyB0aGUgbWF0Y2hlZCBzZXQgb2YgZWxlbWVudHMKCQlpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudAoJCQlpZiAoICFlbGVtICkgewoJCQkJcmV0dXJuICggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xOwoJCQl9CgoJCQkvLyBpbmRleCBpbiBzZWxlY3RvcgoJCQlpZiAoIHR5cGVvZiBlbGVtID09PSAic3RyaW5nIiApIHsKCQkJCXJldHVybiBqUXVlcnkuaW5BcnJheSggdGhpc1sgMCBdLCBqUXVlcnkoIGVsZW0gKSApOwoJCQl9CgoJCQkvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnQKCQkJcmV0dXJuIGpRdWVyeS5pbkFycmF5KAoKCQkJCS8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZAoJCQkJZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtLCB0aGlzICk7CgkJfSwKCgkJYWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjaygKCQkJCWpRdWVyeS51bmlxdWVTb3J0KAoJCQkJCWpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApICkKCQkJCSkKCQkJKTsKCQl9LAoKCQlhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/CgkJCQl0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApCgkJCSk7CgkJfQoJfSApOwoKCWZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkgewoJCWRvIHsKCQkJY3VyID0gY3VyWyBkaXIgXTsKCQl9IHdoaWxlICggY3VyICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApOwoKCQlyZXR1cm4gY3VyOwoJfQoKCWpRdWVyeS5lYWNoKCB7CgkJcGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsKCQkJcmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDsKCQl9LAoJCXBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAicGFyZW50Tm9kZSIgKTsKCQl9LAoJCXBhcmVudHNVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAicGFyZW50Tm9kZSIsIHVudGlsICk7CgkJfSwKCQluZXh0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmcoIGVsZW0sICJuZXh0U2libGluZyIgKTsKCQl9LAoJCXByZXY6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gc2libGluZyggZWxlbSwgInByZXZpb3VzU2libGluZyIgKTsKCQl9LAoJCW5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAibmV4dFNpYmxpbmciICk7CgkJfSwKCQlwcmV2QWxsOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgInByZXZpb3VzU2libGluZyIgKTsKCQl9LAoJCW5leHRVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAibmV4dFNpYmxpbmciLCB1bnRpbCApOwoJCX0sCgkJcHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7CgkJCXJldHVybiBkaXIoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciLCB1bnRpbCApOwoJCX0sCgkJc2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApOwoJCX0sCgkJY2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gc2libGluZ3MoIGVsZW0uZmlyc3RDaGlsZCApOwoJCX0sCgkJY29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaWZyYW1lIiApID8KCQkJCWVsZW0uY29udGVudERvY3VtZW50IHx8IGVsZW0uY29udGVudFdpbmRvdy5kb2N1bWVudCA6CgkJCQlqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTsKCQl9Cgl9LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7CgkJalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkgewoJCQl2YXIgcmV0ID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7CgoJCQlpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09ICJVbnRpbCIgKSB7CgkJCQlzZWxlY3RvciA9IHVudGlsOwoJCQl9CgoJCQlpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgcmV0ICk7CgkJCX0KCgkJCWlmICggdGhpcy5sZW5ndGggPiAxICkgewoKCQkJCS8vIFJlbW92ZSBkdXBsaWNhdGVzCgkJCQlpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7CgkJCQkJcmV0ID0galF1ZXJ5LnVuaXF1ZVNvcnQoIHJldCApOwoJCQkJfQoKCQkJCS8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzCgkJCQlpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7CgkJCQkJcmV0ID0gcmV0LnJldmVyc2UoKTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTsKCQl9OwoJfSApOwoJdmFyIHJub3R3aGl0ZSA9ICggL1xTKy9nICk7CgoKCgkvLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lcwoJZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHsKCQl2YXIgb2JqZWN0ID0ge307CgkJalF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHsKCQkJb2JqZWN0WyBmbGFnIF0gPSB0cnVlOwoJCX0gKTsKCQlyZXR1cm4gb2JqZWN0OwoJfQoKCS8qCgkgKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczoKCSAqCgkgKglvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93CgkgKgkJCXRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3QKCSAqCgkgKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZQoJICogImZpcmVkIiBtdWx0aXBsZSB0aW1lcy4KCSAqCgkgKiBQb3NzaWJsZSBvcHRpb25zOgoJICoKCSAqCW9uY2U6CQkJd2lsbCBlbnN1cmUgdGhlIGNhbGxiYWNrIGxpc3QgY2FuIG9ubHkgYmUgZmlyZWQgb25jZSAobGlrZSBhIERlZmVycmVkKQoJICoKCSAqCW1lbW9yeToJCQl3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkCgkgKgkJCQkJYWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgIm1lbW9yaXplZCIKCSAqCQkJCQl2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZCkKCSAqCgkgKgl1bmlxdWU6CQkJd2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpCgkgKgoJICoJc3RvcE9uRmFsc2U6CWludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZQoJICoKCSAqLwoJalF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkgewoKCQkvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkCgkJLy8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KQoJCW9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgPwoJCQljcmVhdGVPcHRpb25zKCBvcHRpb25zICkgOgoJCQlqUXVlcnkuZXh0ZW5kKCB7fSwgb3B0aW9ucyApOwoKCQl2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZwoJCQlmaXJpbmcsCgoJCQkvLyBMYXN0IGZpcmUgdmFsdWUgZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cwoJCQltZW1vcnksCgoJCQkvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZAoJCQlmaXJlZCwKCgkJCS8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmcKCQkJbG9ja2VkLAoKCQkJLy8gQWN0dWFsIGNhbGxiYWNrIGxpc3QKCQkJbGlzdCA9IFtdLAoKCQkJLy8gUXVldWUgb2YgZXhlY3V0aW9uIGRhdGEgZm9yIHJlcGVhdGFibGUgbGlzdHMKCQkJcXVldWUgPSBbXSwKCgkJCS8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKQoJCQlmaXJpbmdJbmRleCA9IC0xLAoKCQkJLy8gRmlyZSBjYWxsYmFja3MKCQkJZmlyZSA9IGZ1bmN0aW9uKCkgewoKCQkJCS8vIEVuZm9yY2Ugc2luZ2xlLWZpcmluZwoJCQkJbG9ja2VkID0gb3B0aW9ucy5vbmNlOwoKCQkJCS8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLAoJCQkJLy8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlcwoJCQkJZmlyZWQgPSBmaXJpbmcgPSB0cnVlOwoJCQkJZm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7CgkJCQkJbWVtb3J5ID0gcXVldWUuc2hpZnQoKTsKCQkJCQl3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHsKCgkJCQkJCS8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uCgkJCQkJCWlmICggbGlzdFsgZmlyaW5nSW5kZXggXS5hcHBseSggbWVtb3J5WyAwIF0sIG1lbW9yeVsgMSBdICkgPT09IGZhbHNlICYmCgkJCQkJCQlvcHRpb25zLnN0b3BPbkZhbHNlICkgewoKCQkJCQkJCS8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmUKCQkJCQkJCWZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7CgkJCQkJCQltZW1vcnkgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0CgkJCQlpZiAoICFvcHRpb25zLm1lbW9yeSApIHsKCQkJCQltZW1vcnkgPSBmYWxzZTsKCQkJCX0KCgkJCQlmaXJpbmcgPSBmYWxzZTsKCgkJCQkvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZAoJCQkJaWYgKCBsb2NrZWQgKSB7CgoJCQkJCS8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHMKCQkJCQlpZiAoIG1lbW9yeSApIHsKCQkJCQkJbGlzdCA9IFtdOwoKCQkJCQkvLyBPdGhlcndpc2UsIHRoaXMgb2JqZWN0IGlzIHNwZW50CgkJCQkJfSBlbHNlIHsKCQkJCQkJbGlzdCA9ICIiOwoJCQkJCX0KCQkJCX0KCQkJfSwKCgkJCS8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0CgkJCXNlbGYgPSB7CgoJCQkJLy8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdAoJCQkJYWRkOiBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIGxpc3QgKSB7CgoJCQkJCQkvLyBJZiB3ZSBoYXZlIG1lbW9yeSBmcm9tIGEgcGFzdCBydW4sIHdlIHNob3VsZCBmaXJlIGFmdGVyIGFkZGluZwoJCQkJCQlpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkgewoJCQkJCQkJZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aCAtIDE7CgkJCQkJCQlxdWV1ZS5wdXNoKCBtZW1vcnkgKTsKCQkJCQkJfQoKCQkJCQkJKCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7CgkJCQkJCQlqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHsKCQkJCQkJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhcmcgKSApIHsKCQkJCQkJCQkJaWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHsKCQkJCQkJCQkJCWxpc3QucHVzaCggYXJnICk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiBqUXVlcnkudHlwZSggYXJnICkgIT09ICJzdHJpbmciICkgewoKCQkJCQkJCQkJLy8gSW5zcGVjdCByZWN1cnNpdmVseQoJCQkJCQkJCQlhZGQoIGFyZyApOwoJCQkJCQkJCX0KCQkJCQkJCX0gKTsKCQkJCQkJfSApKCBhcmd1bWVudHMgKTsKCgkJCQkJCWlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7CgkJCQkJCQlmaXJlKCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoKCQkJCS8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3QKCQkJCXJlbW92ZTogZnVuY3Rpb24oKSB7CgkJCQkJalF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHsKCQkJCQkJdmFyIGluZGV4OwoJCQkJCQl3aGlsZSAoICggaW5kZXggPSBqUXVlcnkuaW5BcnJheSggYXJnLCBsaXN0LCBpbmRleCApICkgPiAtMSApIHsKCQkJCQkJCWxpc3Quc3BsaWNlKCBpbmRleCwgMSApOwoKCQkJCQkJCS8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlcwoJCQkJCQkJaWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHsKCQkJCQkJCQlmaXJpbmdJbmRleC0tOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSApOwoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LgoJCQkJLy8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuCgkJCQloYXM6IGZ1bmN0aW9uKCBmbiApIHsKCQkJCQlyZXR1cm4gZm4gPwoJCQkJCQlqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDoKCQkJCQkJbGlzdC5sZW5ndGggPiAwOwoJCQkJfSwKCgkJCQkvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0CgkJCQllbXB0eTogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBsaXN0ICkgewoJCQkJCQlsaXN0ID0gW107CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkCgkJCQkvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnMKCQkJCS8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlcwoJCQkJZGlzYWJsZTogZnVuY3Rpb24oKSB7CgkJCQkJbG9ja2VkID0gcXVldWUgPSBbXTsKCQkJCQlsaXN0ID0gbWVtb3J5ID0gIiI7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoJCQkJZGlzYWJsZWQ6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiAhbGlzdDsKCQkJCX0sCgoJCQkJLy8gRGlzYWJsZSAuZmlyZQoJCQkJLy8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdCkKCQkJCS8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnMKCQkJCWxvY2s6IGZ1bmN0aW9uKCkgewoJCQkJCWxvY2tlZCA9IHRydWU7CgkJCQkJaWYgKCAhbWVtb3J5ICkgewoJCQkJCQlzZWxmLmRpc2FibGUoKTsKCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoJCQkJbG9ja2VkOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gISFsb2NrZWQ7CgkJCQl9LAoKCQkJCS8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHMKCQkJCWZpcmVXaXRoOiBmdW5jdGlvbiggY29udGV4dCwgYXJncyApIHsKCQkJCQlpZiAoICFsb2NrZWQgKSB7CgkJCQkJCWFyZ3MgPSBhcmdzIHx8IFtdOwoJCQkJCQlhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdOwoJCQkJCQlxdWV1ZS5wdXNoKCBhcmdzICk7CgkJCQkJCWlmICggIWZpcmluZyApIHsKCQkJCQkJCWZpcmUoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMKCQkJCWZpcmU6IGZ1bmN0aW9uKCkgewoJCQkJCXNlbGYuZmlyZVdpdGgoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2UKCQkJCWZpcmVkOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gISFmaXJlZDsKCQkJCX0KCQkJfTsKCgkJcmV0dXJuIHNlbGY7Cgl9OwoKCglqUXVlcnkuZXh0ZW5kKCB7CgoJCURlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHsKCQkJdmFyIHR1cGxlcyA9IFsKCgkJCQkJLy8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGxpc3RlbmVyIGxpc3QsIGZpbmFsIHN0YXRlCgkJCQkJWyAicmVzb2x2ZSIsICJkb25lIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLCAicmVzb2x2ZWQiIF0sCgkJCQkJWyAicmVqZWN0IiwgImZhaWwiLCBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksICJyZWplY3RlZCIgXSwKCQkJCQlbICJub3RpZnkiLCAicHJvZ3Jlc3MiLCBqUXVlcnkuQ2FsbGJhY2tzKCAibWVtb3J5IiApIF0KCQkJCV0sCgkJCQlzdGF0ZSA9ICJwZW5kaW5nIiwKCQkJCXByb21pc2UgPSB7CgkJCQkJc3RhdGU6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gc3RhdGU7CgkJCQkJfSwKCQkJCQlhbHdheXM6IGZ1bmN0aW9uKCkgewoJCQkJCQlkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTsKCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfSwKCQkJCQl0aGVuOiBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7CgkJCQkJCXZhciBmbnMgPSBhcmd1bWVudHM7CgkJCQkJCXJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHsKCQkJCQkJCWpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHsKCQkJCQkJCQl2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyBpIF0gKSAmJiBmbnNbIGkgXTsKCgkJCQkJCQkJLy8gZGVmZXJyZWRbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSBmb3IgZm9yd2FyZGluZyBhY3Rpb25zIHRvIG5ld0RlZmVyCgkJCQkJCQkJZGVmZXJyZWRbIHR1cGxlWyAxIF0gXSggZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQkJCQkJaWYgKCByZXR1cm5lZCAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmV0dXJuZWQucHJvbWlzZSApICkgewoJCQkJCQkJCQkJcmV0dXJuZWQucHJvbWlzZSgpCgkJCQkJCQkJCQkJLnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKQoJCQkJCQkJCQkJCS5kb25lKCBuZXdEZWZlci5yZXNvbHZlICkKCQkJCQkJCQkJCQkuZmFpbCggbmV3RGVmZXIucmVqZWN0ICk7CgkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQluZXdEZWZlclsgdHVwbGVbIDAgXSArICJXaXRoIiBdKAoJCQkJCQkJCQkJCXRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLAoJCQkJCQkJCQkJCWZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSApOwoJCQkJCQkJfSApOwoJCQkJCQkJZm5zID0gbnVsbDsKCQkJCQkJfSApLnByb21pc2UoKTsKCQkJCQl9LAoKCQkJCQkvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkCgkJCQkJLy8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdAoJCQkJCXByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7CgkJCQkJCXJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTsKCQkJCQl9CgkJCQl9LAoJCQkJZGVmZXJyZWQgPSB7fTsKCgkJCS8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXQKCQkJcHJvbWlzZS5waXBlID0gcHJvbWlzZS50aGVuOwoKCQkJLy8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kcwoJCQlqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7CgkJCQl2YXIgbGlzdCA9IHR1cGxlWyAyIF0sCgkJCQkJc3RhdGVTdHJpbmcgPSB0dXBsZVsgMyBdOwoKCQkJCS8vIHByb21pc2VbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSA9IGxpc3QuYWRkCgkJCQlwcm9taXNlWyB0dXBsZVsgMSBdIF0gPSBsaXN0LmFkZDsKCgkJCQkvLyBIYW5kbGUgc3RhdGUKCQkJCWlmICggc3RhdGVTdHJpbmcgKSB7CgkJCQkJbGlzdC5hZGQoIGZ1bmN0aW9uKCkgewoKCQkJCQkJLy8gc3RhdGUgPSBbIHJlc29sdmVkIHwgcmVqZWN0ZWQgXQoJCQkJCQlzdGF0ZSA9IHN0YXRlU3RyaW5nOwoKCQkJCQkvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrCgkJCQkJfSwgdHVwbGVzWyBpIF4gMSBdWyAyIF0uZGlzYWJsZSwgdHVwbGVzWyAyIF1bIDIgXS5sb2NrICk7CgkJCQl9CgoJCQkJLy8gZGVmZXJyZWRbIHJlc29sdmUgfCByZWplY3QgfCBub3RpZnkgXQoJCQkJZGVmZXJyZWRbIHR1cGxlWyAwIF0gXSA9IGZ1bmN0aW9uKCkgewoJCQkJCWRlZmVycmVkWyB0dXBsZVsgMCBdICsgIldpdGgiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gcHJvbWlzZSA6IHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJCXJldHVybiB0aGlzOwoJCQkJfTsKCQkJCWRlZmVycmVkWyB0dXBsZVsgMCBdICsgIldpdGgiIF0gPSBsaXN0LmZpcmVXaXRoOwoJCQl9ICk7CgoJCQkvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2UKCQkJcHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApOwoKCQkJLy8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueQoJCQlpZiAoIGZ1bmMgKSB7CgkJCQlmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApOwoJCQl9CgoJCQkvLyBBbGwgZG9uZSEKCQkJcmV0dXJuIGRlZmVycmVkOwoJCX0sCgoJCS8vIERlZmVycmVkIGhlbHBlcgoJCXdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkgewoJCQl2YXIgaSA9IDAsCgkJCQlyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksCgkJCQlsZW5ndGggPSByZXNvbHZlVmFsdWVzLmxlbmd0aCwKCgkJCQkvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzCgkJCQlyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwKCQkJCQkoIHN1Ym9yZGluYXRlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBzdWJvcmRpbmF0ZS5wcm9taXNlICkgKSA/IGxlbmd0aCA6IDAsCgoJCQkJLy8gdGhlIG1hc3RlciBEZWZlcnJlZC4KCQkJCS8vIElmIHJlc29sdmVWYWx1ZXMgY29uc2lzdCBvZiBvbmx5IGEgc2luZ2xlIERlZmVycmVkLCBqdXN0IHVzZSB0aGF0LgoJCQkJZGVmZXJyZWQgPSByZW1haW5pbmcgPT09IDEgPyBzdWJvcmRpbmF0ZSA6IGpRdWVyeS5EZWZlcnJlZCgpLAoKCQkJCS8vIFVwZGF0ZSBmdW5jdGlvbiBmb3IgYm90aCByZXNvbHZlIGFuZCBwcm9ncmVzcyB2YWx1ZXMKCQkJCXVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSwgY29udGV4dHMsIHZhbHVlcyApIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJCQljb250ZXh0c1sgaSBdID0gdGhpczsKCQkJCQkJdmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7CgkJCQkJCWlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHsKCQkJCQkJCWRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTsKCgkJCQkJCX0gZWxzZSBpZiAoICEoIC0tcmVtYWluaW5nICkgKSB7CgkJCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApOwoJCQkJCQl9CgkJCQkJfTsKCQkJCX0sCgoJCQkJcHJvZ3Jlc3NWYWx1ZXMsIHByb2dyZXNzQ29udGV4dHMsIHJlc29sdmVDb250ZXh0czsKCgkJCS8vIGFkZCBsaXN0ZW5lcnMgdG8gRGVmZXJyZWQgc3Vib3JkaW5hdGVzOyB0cmVhdCBvdGhlcnMgYXMgcmVzb2x2ZWQKCQkJaWYgKCBsZW5ndGggPiAxICkgewoJCQkJcHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkoIGxlbmd0aCApOwoJCQkJcHJvZ3Jlc3NDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7CgkJCQlyZXNvbHZlQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCQkJaWYgKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlICkgKSB7CgkJCQkJCXJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlKCkKCQkJCQkJCS5wcm9ncmVzcyggdXBkYXRlRnVuYyggaSwgcHJvZ3Jlc3NDb250ZXh0cywgcHJvZ3Jlc3NWYWx1ZXMgKSApCgkJCQkJCQkuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKQoJCQkJCQkJLmZhaWwoIGRlZmVycmVkLnJlamVjdCApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCS0tcmVtYWluaW5nOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gaWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlcgoJCQlpZiAoICFyZW1haW5pbmcgKSB7CgkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7CgkJCX0KCgkJCXJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7CgkJfQoJfSApOwoKCgkvLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHkKCXZhciByZWFkeUxpc3Q7CgoJalF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkgewoKCQkvLyBBZGQgdGhlIGNhbGxiYWNrCgkJalF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApOwoKCQlyZXR1cm4gdGhpczsKCX07CgoJalF1ZXJ5LmV4dGVuZCggewoKCQkvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLgoJCWlzUmVhZHk6IGZhbHNlLAoKCQkvLyBBIGNvdW50ZXIgdG8gdHJhY2sgaG93IG1hbnkgaXRlbXMgdG8gd2FpdCBmb3IgYmVmb3JlCgkJLy8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODEKCQlyZWFkeVdhaXQ6IDEsCgoJCS8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudAoJCWhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7CgkJCWlmICggaG9sZCApIHsKCQkJCWpRdWVyeS5yZWFkeVdhaXQrKzsKCQkJfSBlbHNlIHsKCQkJCWpRdWVyeS5yZWFkeSggdHJ1ZSApOwoJCQl9CgkJfSwKCgkJLy8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeQoJCXJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHsKCgkJCS8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJw==", "base64"));
  res.write(new Buffer("cmUgYWxyZWFkeSByZWFkeQoJCQlpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5CgkJCWpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTsKCgkJCS8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlCgkJCWlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlCgkJCXJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTsKCgkJCS8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50cwoJCQlpZiAoIGpRdWVyeS5mbi50cmlnZ2VySGFuZGxlciApIHsKCQkJCWpRdWVyeSggZG9jdW1lbnQgKS50cmlnZ2VySGFuZGxlciggInJlYWR5IiApOwoJCQkJalF1ZXJ5KCBkb2N1bWVudCApLm9mZiggInJlYWR5IiApOwoJCQl9CgkJfQoJfSApOwoKCS8qKgoJICogQ2xlYW4tdXAgbWV0aG9kIGZvciBkb20gcmVhZHkgZXZlbnRzCgkgKi8KCWZ1bmN0aW9uIGRldGFjaCgpIHsKCQlpZiAoIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICJET01Db250ZW50TG9hZGVkIiwgY29tcGxldGVkICk7CgkJCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoKCQl9IGVsc2UgewoJCQlkb2N1bWVudC5kZXRhY2hFdmVudCggIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIGNvbXBsZXRlZCApOwoJCQl3aW5kb3cuZGV0YWNoRXZlbnQoICJvbmxvYWQiLCBjb21wbGV0ZWQgKTsKCQl9Cgl9CgoJLyoqCgkgKiBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZAoJICovCglmdW5jdGlvbiBjb21wbGV0ZWQoKSB7CgoJCS8vIHJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgaXMgZ29vZCBlbm91Z2ggZm9yIHVzIHRvIGNhbGwgdGhlIGRvbSByZWFkeSBpbiBvbGRJRQoJCWlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciB8fAoJCQl3aW5kb3cuZXZlbnQudHlwZSA9PT0gImxvYWQiIHx8CgkJCWRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgKSB7CgoJCQlkZXRhY2goKTsKCQkJalF1ZXJ5LnJlYWR5KCk7CgkJfQoJfQoKCWpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHsKCQlpZiAoICFyZWFkeUxpc3QgKSB7CgoJCQlyZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTsKCgkJCS8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkCgkJCS8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLgoJCQkvLyBTdXBwb3J0OiBJRTYtMTAKCQkJLy8gT2xkZXIgSUUgc29tZXRpbWVzIHNpZ25hbHMgImludGVyYWN0aXZlIiB0b28gc29vbgoJCQlpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgfHwKCQkJCSggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gImxvYWRpbmciICYmICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgKSApIHsKCgkJCQkvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHkKCQkJCXdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTsKCgkJCS8vIFN0YW5kYXJkcy1iYXNlZCBicm93c2VycyBzdXBwb3J0IERPTUNvbnRlbnRMb2FkZWQKCQkJfSBlbHNlIGlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCgkJCQkvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrCgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAiRE9NQ29udGVudExvYWRlZCIsIGNvbXBsZXRlZCApOwoKCQkJCS8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrCgkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggImxvYWQiLCBjb21wbGV0ZWQgKTsKCgkJCS8vIElmIElFIGV2ZW50IG1vZGVsIGlzIHVzZWQKCQkJfSBlbHNlIHsKCgkJCQkvLyBFbnN1cmUgZmlyaW5nIGJlZm9yZSBvbmxvYWQsIG1heWJlIGxhdGUgYnV0IHNhZmUgYWxzbyBmb3IgaWZyYW1lcwoJCQkJZG9jdW1lbnQuYXR0YWNoRXZlbnQoICJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBjb21wbGV0ZWQgKTsKCgkJCQkvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29yawoJCQkJd2luZG93LmF0dGFjaEV2ZW50KCAib25sb2FkIiwgY29tcGxldGVkICk7CgoJCQkJLy8gSWYgSUUgYW5kIG5vdCBhIGZyYW1lCgkJCQkvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvY3VtZW50IGlzIHJlYWR5CgkJCQl2YXIgdG9wID0gZmFsc2U7CgoJCQkJdHJ5IHsKCQkJCQl0b3AgPSB3aW5kb3cuZnJhbWVFbGVtZW50ID09IG51bGwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoJCQkJfSBjYXRjaCAoIGUgKSB7fQoKCQkJCWlmICggdG9wICYmIHRvcC5kb1Njcm9sbCApIHsKCQkJCQkoIGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKSB7CgkJCQkJCWlmICggIWpRdWVyeS5pc1JlYWR5ICkgewoKCQkJCQkJCXRyeSB7CgoJCQkJCQkJCS8vIFVzZSB0aGUgdHJpY2sgYnkgRGllZ28gUGVyaW5pCgkJCQkJCQkJLy8gaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0lFQ29udGVudExvYWRlZC8KCQkJCQkJCQl0b3AuZG9TY3JvbGwoICJsZWZ0IiApOwoJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQkJcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCBkb1Njcm9sbENoZWNrLCA1MCApOwoJCQkJCQkJfQoKCQkJCQkJCS8vIGRldGFjaCBhbGwgZG9tIHJlYWR5IGV2ZW50cwoJCQkJCQkJZGV0YWNoKCk7CgoJCQkJCQkJLy8gYW5kIGV4ZWN1dGUgYW55IHdhaXRpbmcgZnVuY3Rpb25zCgkJCQkJCQlqUXVlcnkucmVhZHkoKTsKCQkJCQkJfQoJCQkJCX0gKSgpOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiByZWFkeUxpc3QucHJvbWlzZSggb2JqICk7Cgl9OwoKCS8vIEtpY2sgb2ZmIHRoZSBET00gcmVhZHkgY2hlY2sgZXZlbiBpZiB0aGUgdXNlciBkb2VzIG5vdAoJalF1ZXJ5LnJlYWR5LnByb21pc2UoKTsKCgoKCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBJdGVyYXRpb24gb3ZlciBvYmplY3QncyBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgaXRzIG93bgoJdmFyIGk7Cglmb3IgKCBpIGluIGpRdWVyeSggc3VwcG9ydCApICkgewoJCWJyZWFrOwoJfQoJc3VwcG9ydC5vd25GaXJzdCA9IGkgPT09ICIwIjsKCgkvLyBOb3RlOiBtb3N0IHN1cHBvcnQgdGVzdHMgYXJlIGRlZmluZWQgaW4gdGhlaXIgcmVzcGVjdGl2ZSBtb2R1bGVzLgoJLy8gZmFsc2UgdW50aWwgdGhlIHRlc3QgaXMgcnVuCglzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgPSBmYWxzZTsKCgkvLyBFeGVjdXRlIEFTQVAgaW4gY2FzZSB3ZSBuZWVkIHRvIHNldCBib2R5LnN0eWxlLnpvb20KCWpRdWVyeSggZnVuY3Rpb24oKSB7CgoJCS8vIE1pbmlmaWVkOiB2YXIgYSxiLGMsZAoJCXZhciB2YWwsIGRpdiwgYm9keSwgY29udGFpbmVyOwoKCQlib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJib2R5IiApWyAwIF07CgkJaWYgKCAhYm9keSB8fCAhYm9keS5zdHlsZSApIHsKCgkJCS8vIFJldHVybiBmb3IgZnJhbWVzZXQgZG9jcyB0aGF0IGRvbid0IGhhdmUgYSBib2R5CgkJCXJldHVybjsKCQl9CgoJCS8vIFNldHVwCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjsKCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCWlmICggdHlwZW9mIGRpdi5zdHlsZS56b29tICE9PSAidW5kZWZpbmVkIiApIHsKCgkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJLy8gQ2hlY2sgaWYgbmF0aXZlbHkgYmxvY2stbGV2ZWwgZWxlbWVudHMgYWN0IGxpa2UgaW5saW5lLWJsb2NrCgkJCS8vIGVsZW1lbnRzIHdoZW4gc2V0dGluZyB0aGVpciBkaXNwbGF5IHRvICdpbmxpbmUnIGFuZCBnaXZpbmcKCQkJLy8gdGhlbSBsYXlvdXQKCQkJZGl2LnN0eWxlLmNzc1RleHQgPSAiZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9y", "base64"));
  res.write(new Buffer("ZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSI7CgoJCQlzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgPSB2YWwgPSBkaXYub2Zmc2V0V2lkdGggPT09IDM7CgkJCWlmICggdmFsICkgewoKCQkJCS8vIFByZXZlbnQgSUUgNiBmcm9tIGFmZmVjdGluZyBsYXlvdXQgZm9yIHBvc2l0aW9uZWQgZWxlbWVudHMgIzExMDQ4CgkJCQkvLyBQcmV2ZW50IElFIGZyb20gc2hyaW5raW5nIHRoZSBib2R5IGluIElFIDcgbW9kZSAjMTI4NjkKCQkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJCWJvZHkuc3R5bGUuem9vbSA9IDE7CgkJCX0KCQl9CgoJCWJvZHkucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApOwoJfSApOwoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gdHJ1ZTsKCQl0cnkgewoJCQlkZWxldGUgZGl2LnRlc3Q7CgkJfSBjYXRjaCAoIGUgKSB7CgkJCXN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IGZhbHNlOwoJCX0KCgkJLy8gTnVsbCBlbGVtZW50cyB0byBhdm9pZCBsZWFrcyBpbiBJRS4KCQlkaXYgPSBudWxsOwoJfSApKCk7Cgl2YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXZhciBub0RhdGEgPSBqUXVlcnkubm9EYXRhWyAoIGVsZW0ubm9kZU5hbWUgKyAiICIgKS50b0xvd2VyQ2FzZSgpIF0sCgkJCW5vZGVUeXBlID0gK2VsZW0ubm9kZVR5cGUgfHwgMTsKCgkJLy8gRG8gbm90IHNldCBkYXRhIG9uIG5vbi1lbGVtZW50IERPTSBub2RlcyBiZWNhdXNlIGl0IHdpbGwgbm90IGJlIGNsZWFyZWQgKCM4MzM1KS4KCQlyZXR1cm4gbm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgPwoJCQlmYWxzZSA6CgoJCQkvLyBOb2RlcyBhY2NlcHQgZGF0YSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZDsgcmVqZWN0aW9uIGNhbiBiZSBjb25kaXRpb25hbAoJCQkhbm9EYXRhIHx8IG5vRGF0YSAhPT0gdHJ1ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggImNsYXNzaWQiICkgPT09IG5vRGF0YTsKCX07CgoKCgoJdmFyIHJicmFjZSA9IC9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sCgkJcm11bHRpRGFzaCA9IC8oW0EtWl0pL2c7CgoJZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHsKCgkJLy8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueQoJCS8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZQoJCWlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgoJCQl2YXIgbmFtZSA9ICJkYXRhLSIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgIi0kMSIgKS50b0xvd2VyQ2FzZSgpOwoKCQkJZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7CgoJCQlpZiAoIHR5cGVvZiBkYXRhID09PSAic3RyaW5nIiApIHsKCQkJCXRyeSB7CgkJCQkJZGF0YSA9IGRhdGEgPT09ICJ0cnVlIiA/IHRydWUgOgoJCQkJCQlkYXRhID09PSAiZmFsc2UiID8gZmFsc2UgOgoJCQkJCQlkYXRhID09PSAibnVsbCIgPyBudWxsIDoKCgkJCQkJCS8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nCgkJCQkJCStkYXRhICsgIiIgPT09IGRhdGEgPyArZGF0YSA6CgkJCQkJCXJicmFjZS50ZXN0KCBkYXRhICkgPyBqUXVlcnkucGFyc2VKU09OKCBkYXRhICkgOgoJCQkJCQlkYXRhOwoJCQkJfSBjYXRjaCAoIGUgKSB7fQoKCQkJCS8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlcgoJCQkJalF1ZXJ5LmRhdGEoIGVsZW0sIGtleSwgZGF0YSApOwoKCQkJfSBlbHNlIHsKCQkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJCX0KCQl9CgoJCXJldHVybiBkYXRhOwoJfQoKCS8vIGNoZWNrcyBhIGNhY2hlIG9iamVjdCBmb3IgZW1wdGluZXNzCglmdW5jdGlvbiBpc0VtcHR5RGF0YU9iamVjdCggb2JqICkgewoJCXZhciBuYW1lOwoJCWZvciAoIG5hbWUgaW4gb2JqICkgewoKCQkJLy8gaWYgdGhlIHB1YmxpYyBkYXRhIG9iamVjdCBpcyBlbXB0eSwgdGhlIHByaXZhdGUgaXMgc3RpbGwgZW1wdHkKCQkJaWYgKCBuYW1lID09PSAiZGF0YSIgJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9ialsgbmFtZSBdICkgKSB7CgkJCQljb250aW51ZTsKCQkJfQoJCQlpZiAoIG5hbWUgIT09ICJ0b0pTT04iICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEsIHB2dCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHsKCQlpZiAoICFhY2NlcHREYXRhKCBlbGVtICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCXZhciByZXQsIHRoaXNDYWNoZSwKCQkJaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbywKCgkJCS8vIFdlIGhhdmUgdG8gaGFuZGxlIERPTSBub2RlcyBhbmQgSlMgb2JqZWN0cyBkaWZmZXJlbnRseSBiZWNhdXNlIElFNi03CgkJCS8vIGNhbid0IEdDIG9iamVjdCByZWZlcmVuY2VzIHByb3Blcmx5IGFjcm9zcyB0aGUgRE9NLUpTIGJvdW5kYXJ5CgkJCWlzTm9kZSA9IGVsZW0ubm9kZVR5cGUsCgoJCQkvLyBPbmx5IERPTSBub2RlcyBuZWVkIHRoZSBnbG9iYWwgalF1ZXJ5IGNhY2hlOyBKUyBvYmplY3QgZGF0YSBpcwoJCQkvLyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGUgb2JqZWN0IHNvIEdDIGNhbiBvY2N1ciBhdXRvbWF0aWNhbGx5CgkJCWNhY2hlID0gaXNOb2RlID8galF1ZXJ5LmNhY2hlIDogZWxlbSwKCgkJCS8vIE9ubHkgZGVmaW5pbmcgYW4gSUQgZm9yIEpTIG9iamVjdHMgaWYgaXRzIGNhY2hlIGFscmVhZHkgZXhpc3RzIGFsbG93cwoJCQkvLw==", "base64"));
  res.write(new Buffer("IHRoZSBjb2RlIHRvIHNob3J0Y3V0IG9uIHRoZSBzYW1lIHBhdGggYXMgYSBET00gbm9kZSB3aXRoIG5vIGNhY2hlCgkJCWlkID0gaXNOb2RlID8gZWxlbVsgaW50ZXJuYWxLZXkgXSA6IGVsZW1bIGludGVybmFsS2V5IF0gJiYgaW50ZXJuYWxLZXk7CgoJCS8vIEF2b2lkIGRvaW5nIGFueSBtb3JlIHdvcmsgdGhhbiB3ZSBuZWVkIHRvIHdoZW4gdHJ5aW5nIHRvIGdldCBkYXRhIG9uIGFuCgkJLy8gb2JqZWN0IHRoYXQgaGFzIG5vIGRhdGEgYXQgYWxsCgkJaWYgKCAoICFpZCB8fCAhY2FjaGVbIGlkIF0gfHwgKCAhcHZ0ICYmICFjYWNoZVsgaWQgXS5kYXRhICkgKSAmJgoJCQlkYXRhID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5hbWUgPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoICFpZCApIHsKCgkJCS8vIE9ubHkgRE9NIG5vZGVzIG5lZWQgYSBuZXcgdW5pcXVlIElEIGZvciBlYWNoIGVsZW1lbnQgc2luY2UgdGhlaXIgZGF0YQoJCQkvLyBlbmRzIHVwIGluIHRoZSBnbG9iYWwgY2FjaGUKCQkJaWYgKCBpc05vZGUgKSB7CgkJCQlpZCA9IGVsZW1bIGludGVybmFsS2V5IF0gPSBkZWxldGVkSWRzLnBvcCgpIHx8IGpRdWVyeS5ndWlkKys7CgkJCX0gZWxzZSB7CgkJCQlpZCA9IGludGVybmFsS2V5OwoJCQl9CgkJfQoKCQlpZiAoICFjYWNoZVsgaWQgXSApIHsKCgkJCS8vIEF2b2lkIGV4cG9zaW5nIGpRdWVyeSBtZXRhZGF0YSBvbiBwbGFpbiBKUyBvYmplY3RzIHdoZW4gdGhlIG9iamVjdAoJCQkvLyBpcyBzZXJpYWxpemVkIHVzaW5nIEpTT04uc3RyaW5naWZ5CgkJCWNhY2hlWyBpZCBdID0gaXNOb2RlID8ge30gOiB7IHRvSlNPTjogalF1ZXJ5Lm5vb3AgfTsKCQl9CgoJCS8vIEFuIG9iamVjdCBjYW4gYmUgcGFzc2VkIHRvIGpRdWVyeS5kYXRhIGluc3RlYWQgb2YgYSBrZXkvdmFsdWUgcGFpcjsgdGhpcyBnZXRzCgkJLy8gc2hhbGxvdyBjb3BpZWQgb3ZlciBvbnRvIHRoZSBleGlzdGluZyBjYWNoZQoJCWlmICggdHlwZW9mIG5hbWUgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBuYW1lID09PSAiZnVuY3Rpb24iICkgewoJCQlpZiAoIHB2dCApIHsKCQkJCWNhY2hlWyBpZCBdID0galF1ZXJ5LmV4dGVuZCggY2FjaGVbIGlkIF0sIG5hbWUgKTsKCQkJfSBlbHNlIHsKCQkJCWNhY2hlWyBpZCBdLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCBjYWNoZVsgaWQgXS5kYXRhLCBuYW1lICk7CgkJCX0KCQl9CgoJCXRoaXNDYWNoZSA9IGNhY2hlWyBpZCBdOwoKCQkvLyBqUXVlcnkgZGF0YSgpIGlzIHN0b3JlZCBpbiBhIHNlcGFyYXRlIG9iamVjdCBpbnNpZGUgdGhlIG9iamVjdCdzIGludGVybmFsIGRhdGEKCQkvLyBjYWNoZSBpbiBvcmRlciB0byBhdm9pZCBrZXkgY29sbGlzaW9ucyBiZXR3ZWVuIGludGVybmFsIGRhdGEgYW5kIHVzZXItZGVmaW5lZAoJCS8vIGRhdGEuCgkJaWYgKCAhcHZ0ICkgewoJCQlpZiAoICF0aGlzQ2FjaGUuZGF0YSApIHsKCQkJCXRoaXNDYWNoZS5kYXRhID0ge307CgkJCX0KCgkJCXRoaXNDYWNoZSA9IHRoaXNDYWNoZS5kYXRhOwoJCX0KCgkJaWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7CgkJCXRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF0gPSBkYXRhOwoJCX0KCgkJLy8gQ2hlY2sgZm9yIGJvdGggY29udmVydGVkLXRvLWNhbWVsIGFuZCBub24tY29udmVydGVkIGRhdGEgcHJvcGVydHkgbmFtZXMKCQkvLyBJZiBhIGRhdGEgcHJvcGVydHkgd2FzIHNwZWNpZmllZAoJCWlmICggdHlwZW9mIG5hbWUgPT09ICJzdHJpbmciICkgewoKCQkJLy8gRmlyc3QgVHJ5IHRvIGZpbmQgYXMtaXMgcHJvcGVydHkgZGF0YQoJCQlyZXQgPSB0aGlzQ2FjaGVbIG5hbWUgXTsKCgkJCS8vIFRlc3QgZm9yIG51bGx8dW5kZWZpbmVkIHByb3BlcnR5IGRhdGEKCQkJaWYgKCByZXQgPT0gbnVsbCApIHsKCgkJCQkvLyBUcnkgdG8gZmluZCB0aGUgY2FtZWxDYXNlZCBwcm9wZXJ0eQoJCQkJcmV0ID0gdGhpc0NhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICkgXTsKCQkJfQoJCX0gZWxzZSB7CgkJCXJldCA9IHRoaXNDYWNoZTsKCQl9CgoJCXJldHVybiByZXQ7Cgl9CgoJZnVuY3Rpb24gaW50ZXJuYWxSZW1vdmVEYXRhKCBlbGVtLCBuYW1lLCBwdnQgKSB7CgkJaWYgKCAhYWNjZXB0RGF0YSggZWxlbSApICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgdGhpc0NhY2hlLCBpLAoJCQlpc05vZGUgPSBlbGVtLm5vZGVUeXBlLAoKCQkJLy8gU2VlIGpRdWVyeS5kYXRhIGZvciBtb3JlIGluZm9ybWF0aW9uCgkJCWNhY2hlID0gaXNOb2RlID8galF1ZXJ5LmNhY2hlIDogZWxlbSwKCQkJaWQgPSBpc05vZGUgPyBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdIDogalF1ZXJ5LmV4cGFuZG87CgoJCS8vIElmIHRoZXJlIGlzIGFscmVhZHkgbm8gY2FjaGUgZW50cnkgZm9yIHRoaXMgb2JqZWN0LCB0aGVyZSBpcyBubwoJCS8vIHB1cnBvc2UgaW4gY29udGludWluZwoJCWlmICggIWNhY2hlWyBpZCBdICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIG5hbWUgKSB7CgoJCQl0aGlzQ2FjaGUgPSBwdnQgPyBjYWNoZVsgaWQgXSA6IGNhY2hlWyBpZCBdLmRhdGE7CgoJCQlpZiAoIHRoaXNDYWNoZSApIHsKCgkJCQkvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgbmFtZXMgZm9yIGRhdGEga2V5cwoJCQkJaWYgKCAhalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHsKCgkJCQkJLy8gdHJ5IHRoZSBzdHJpbmcgYXMgYSBrZXkgYmVmb3JlIGFueSBtYW5pcHVsYXRpb24KCQkJCQlpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkgewoJCQkJCQluYW1lID0gWyBuYW1lIF07CgkJCQkJfSBlbHNlIHsKCgkJCQkJCS8vIHNwbGl0IHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIGJ5IHNwYWNlcyB1bmxlc3MgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cwoJCQkJCQluYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApOwoJCQkJCQlpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkgewoJCQkJCQkJbmFtZSA9IFsgbmFtZSBdOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJbmFtZSA9IG5hbWUuc3BsaXQoICIgIiApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSBlbHNlIHsKCgkJCQkJLy8gSWYgIm5hbWUiIGlzIGFuIGFycmF5IG9mIGtleXMuLi4KCQkJCQkvLyBXaGVuIGRhdGEgaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIHZpYSAoImtleSIsICJ2YWwiKSBzaWduYXR1cmUsCgkJCQkJLy8ga2V5cyB3aWxsIGJlIGNvbnZlcnRlZCB0byBjYW1lbENhc2UuCgkJCQkJLy8gU2luY2UgdGhlcmUgaXMgbm8gd2F5IHRvIHRlbGwgX2hvd18gYSBrZXkgd2FzIGFkZGVkLCByZW1vdmUKCQkJCQkvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2CgkJCQkJLy8gVGhpcyB3aWxsIG9ubHkgcGVuYWxpemUgdGhlIGFycmF5IGFyZ3VtZW50IHBhdGguCgkJCQkJbmFtZSA9IG5hbWUuY29uY2F0KCBqUXVlcnkubWFwKCBuYW1lLCBqUXVlcnkuY2FtZWxDYXNlICkgKTsKCQkJCX0KCgkJCQlpID0gbmFtZS5sZW5ndGg7CgkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQlkZWxldGUgdGhpc0NhY2hlWyBuYW1lWyBpIF0gXTsKCQkJCX0KCgkJCQkvLyBJZiB0aGVyZSBpcyBubyBkYXRhIGxlZnQgaW4gdGhlIGNhY2hlLCB3ZSB3YW50IHRvIGNvbnRpbnVlCgkJCQkvLyBhbmQgbGV0IHRoZSBjYWNoZSBvYmplY3QgaXRzZWxmIGdldCBkZXN0cm95ZWQKCQkJCWlmICggcHZ0ID8gIWlzRW1wdHlEYXRhT2JqZWN0KCB0aGlzQ2FjaGUgKSA6ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggdGhpc0NhY2hlICkgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQl9CgkJfQoKCQkvLyBTZWUgalF1ZXJ5LmRhdGEgZm9yIG1vcmUgaW5mb3JtYXRpb24KCQlpZiAoICFwdnQgKSB7CgkJCWRlbGV0ZSBjYWNoZVsgaWQgXS5kYXRhOwoKCQkJLy8gRG9uJ3QgZGVzdHJveSB0aGUgcGFyZW50IGNhY2hlIHVubGVzcyB0aGUgaW50ZXJuYWwgZGF0YSBvYmplY3QKCQkJLy8gaGFkIGJlZW4gdGhlIG9ubHkgdGhpbmcgbGVmdCBpbiBpdAoJCQlpZiAoICFpc0VtcHR5RGF0YU9iamVjdCggY2FjaGVbIGlkIF0gKSApIHsKCQkJCXJldHVybjsKCQkJfQoJCX0KCgkJLy8gRGVzdHJveSB0aGUgY2FjaGUKCQlpZiAoIGlzTm9kZSApIHsKCQkJalF1ZXJ5LmNsZWFuRGF0YSggWyBlbGVtIF0sIHRydWUgKTsKCgkJLy8gVXNlIGRlbGV0ZSB3aGVuIHN1cHBvcnRlZCBmb3IgZXhwYW5kb3Mgb3IgYGNhY2hlYCBpcyBub3QgYSB3aW5kb3cgcGVyIGlzV2luZG93ICgjMTAwODApCgkJLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi8KCQl9IGVsc2UgaWYgKCBzdXBwb3J0LmRlbGV0ZUV4cGFuZG8gfHwgY2FjaGUgIT0gY2FjaGUud2luZG93ICkgewoJCQkvKiBqc2hpbnQgZXFlcWVxOiB0cnVlICovCgkJCWRlbGV0ZSBjYWNoZVsgaWQgXTsKCgkJLy8gV2hlbiBhbGwgZWxzZSBmYWlscywgdW5kZWZpbmVkCgkJfSBlbHNlIHsKCQkJY2FjaGVbIGlkIF0gPSB1bmRlZmluZWQ7CgkJfQoJfQoKCWpRdWVyeS5leHRlbmQoIHsKCQljYWNoZToge30sCgoJCS8vIFRoZSBmb2xsb3dpbmcgZWxlbWVudHMgKHNwYWNlLXN1ZmZpeGVkIHRvIGF2b2lkIE9iamVjdC5wcm90b3R5cGUgY29sbGlzaW9ucykKCQkvLyB0aHJvdyB1bmNhdGNoYWJsZSBleGNlcHRpb25zIGlmIHlvdSBhdHRlbXB0IHRvIHNldCBleHBhbmRvIHByb3BlcnRpZXMKCQlub0RhdGE6IHsKCQkJImFwcGxldCAiOiB0cnVlLAoJCQkiZW1iZWQgIjogdHJ1ZSwKCgkJCS8vIC4uLmJ1dCBGbGFzaCBvYmplY3RzICh3aGljaCBoYXZlIHRoaXMgY2xhc3NpZCkgKmNhbiogaGFuZGxlIGV4cGFuZG9zCgkJCSJvYmplY3QgIjogImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCIKCQl9LAoKCQloYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJZWxlbSA9IGVsZW0ubm9kZVR5cGUgPyBqUXVlcnkuY2FjaGVbIGVsZW1bIGpRdWVyeS5leHBhbmRvIF0gXSA6IGVsZW1bIGpRdWVyeS5leHBhbmRvIF07CgkJCXJldHVybiAhIWVsZW0gJiYgIWlzRW1wdHlEYXRhT2JqZWN0KCBlbGVtICk7CgkJfSwKCgkJZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7CgkJCXJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEgKTsKCQl9LAoKCQlyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQkJcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSApOwoJCX0sCgoJCS8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS4KCQlfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7CgkJCXJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEsIHRydWUgKTsKCQl9LAoKCQlfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJCXJldHVybiBpbnRlcm5hbFJlbW92ZURhdGEoIGVsZW0sIG5hbWUsIHRydWUgKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCWRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCQl2YXIgaSwgbmFtZSwgZGF0YSwKCQkJCWVsZW0gPSB0aGlzWyAwIF0sCgkJCQlhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzOwoKCQkJLy8gU3BlY2lhbCBleHBlY3Rpb25zIG9mIC5kYXRhIGJhc2ljYWxseSB0aHdhcnQgalF1ZXJ5LmFjY2VzcywKCQkJLy8gc28gaW1wbGVtZW50IHRoZSByZWxldmFudCBiZWhhdmlvciBvdXJzZWx2ZXMKCgkJCS8vIEdldHMgYWxsIHZhbHVlcwoJCQlpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkgewoJCQkJaWYgKCB0aGlzLmxlbmd0aCApIHsKCQkJCQlkYXRhID0galF1ZXJ5LmRhdGEoIGVsZW0gKTsKCgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFqUXVlcnkuX2RhdGEoIGVsZW0sICJwYXJzZWRBdHRycyIgKSApIHsKCQkJCQkJaSA9IGF0dHJzLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUxMSsKCQkJCQkJCS8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KQoJCQkJCQkJaWYgKCBhdHRyc1sgaSBdICkgewoJCQkJCQkJCW5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7CgkJCQkJCQkJaWYgKCBuYW1lLmluZGV4T2YoICJkYXRhLSIgKSA9PT0gMCApIHsKCQkJCQkJCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApOwoJCQkJCQkJCQlkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgInBhcnNlZEF0dHJzIiwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gZGF0YTsKCQkJfQoKCQkJLy8gU2V0cyBtdWx0aXBsZSB2YWx1ZXMKCQkJaWYgKCB0eXBlb2Yga2V5ID09PSAib2JqZWN0IiApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5kYXRhKCB0aGlzLCBrZXkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID8KCgkJCQkvLyBTZXRzIG9uZSB2YWx1ZQoJCQkJdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuZGF0YSggdGhpcywga2V5LCB2YWx1ZSApOwoJCQkJfSApIDoKCgkJCQkvLyBHZXRzIG9uZSB2YWx1ZQoJCQkJLy8gVHJ5IHRvIGZldGNoIGFueSBpbnRlcm5hbGx5IHN0b3JlZCBkYXRhIGZpcnN0CgkJCQllbGVtID8gZGF0YUF0dHIoIGVsZW0sIGtleSwgalF1ZXJ5LmRhdGEoIGVsZW0sIGtleSApICkgOiB1bmRlZmluZWQ7CgkJfSwKCgkJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkucmVtb3ZlRGF0YSggdGhpcywga2V5ICk7CgkJCX0gKTsKCQl9Cgl9ICk7CgoKCWpRdWVyeS5leHRlbmQoIHsKCQlxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7CgkJCXZhciBxdWV1ZTsKCgkJCWlmICggZWxlbSApIHsKCQkJCXR5cGUgPSAoIHR5cGUgfHwgImZ4IiApICsgInF1ZXVlIjsKCQkJCXF1ZXVlID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCB0eXBlICk7CgoJCQkJLy8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cAoJCQkJaWYgKCBkYXRhICkgewoJCQkJCWlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7CgkJCQkJCXF1ZXVlID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KCBkYXRhICkgKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlxdWV1ZS5wdXNoKCBkYXRhICk7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHF1ZXVlIHx8IFtdOwoJCQl9CgkJfSwKCgkJZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7CgkJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJCQl2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSwKCQkJCXN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLAoJCQkJZm4gPSBxdWV1ZS5zaGlmdCgpLAoJCQkJaG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSwKCQkJCW5leHQgPSBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApOwoJCQkJfTsKCgkJCS8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWwKCQkJaWYgKCBmbiA9PT0gImlucHJvZ3Jlc3MiICkgewoJCQkJZm4gPSBxdWV1ZS5zaGlmdCgpOwoJCQkJc3RhcnRMZW5ndGgtLTsKCQkJfQoKCQkJaWYgKCBmbiApIHsKCgkJCQkvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nCgkJCQkvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkCgkJCQlpZiAoIHR5cGUgPT09ICJmeCIgKSB7CgkJCQkJcXVldWUudW5zaGlmdCggImlucHJvZ3Jlc3MiICk7CgkJCQl9CgoJCQkJLy8gY2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvbgoJCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCQlmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApOwoJCQl9CgoJCQlpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHsKCQkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQkJfQoJCX0sCgoJCS8vIG5vdCBpbnRlbmRlZCBmb3IgcHVibGljIGNvbnN1bXB0aW9uIC0gZ2VuZXJhdGVzIGEgcXVldWVIb29rcyBvYmplY3QsCgkJLy8gb3IgcmV0dXJucyB0aGUgY3VycmVudCBvbmUKCQlfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7CgkJCXZhciBrZXkgPSB0eXBlICsgInF1ZXVlSG9va3MiOwoJCQlyZXR1cm4galF1ZXJ5Ll9kYXRhKCBlbGVtLCBrZXkgKSB8fCBqUXVlcnkuX2RhdGEoIGVsZW0sIGtleSwgewoJCQkJZW1wdHk6IGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKS5hZGQoIGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgdHlwZSArICJxdWV1ZSIgKTsKCQkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sIGtleSApOwoJCQkJfSApCgkJCX0gKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCXF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQkJdmFyIHNldHRlciA9IDI7CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWRhdGEgPSB0eXBlOwoJCQkJdHlwZSA9ICJmeCI7CgkJCQlzZXR0ZXItLTsKCQkJfQoKCQkJaWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkgewoJCQkJcmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7CgkJCX0KCgkJCXJldHVybiBkYXRhID09PSB1bmRlZmluZWQgPwoJCQkJdGhpcyA6CgkJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApOwoKCQkJCQkvLyBlbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZQoJCQkJCWpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApOwoKCQkJCQlpZiAoIHR5cGUgPT09ICJmeCIgJiYgcXVldWVbIDAgXSAhPT0gImlucHJvZ3Jlc3MiICkgewoJCQkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQkJCX0KCQkJCX0gKTsKCQl9LAoJCWRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJCX0gKTsKCQl9LAoJCWNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCAiZngiLCBbXSApOwoJCX0sCgoJCS8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGUKCQkvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdCkKCQlwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkgewoJCQl2YXIgdG1wLAoJCQkJY291bnQgPSAxLAoJCQkJZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJCWVsZW1lbnRzID0gdGhpcywKCQkJCWkgPSB0aGlzLmxlbmd0aCwKCQkJCXJlc29sdmUgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoICEoIC0tY291bnQgKSApIHsKCQkJCQkJZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTsKCQkJCQl9CgkJCQl9OwoKCQkJaWYgKCB0eXBlb2YgdHlwZSAhPT0gInN0cmluZyIgKSB7CgkJCQlvYmogPSB0eXBlOwoJCQkJdHlwZSA9IHVuZGVmaW5lZDsKCQkJfQoJCQl0eXBlID0gdHlwZSB8fCAiZngiOwoKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQl0bXAgPSBqUXVlcnkuX2RhdGEoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyAicXVldWVIb29rcyIgKTsKCQkJCWlmICggdG1wICYmIHRtcC5lbXB0eSApIHsKCQkJCQljb3VudCsrOwoJCQkJCXRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTsKCQkJCX0KCQkJfQoJCQlyZXNvbHZlKCk7CgkJCXJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTsKCQl9Cgl9ICk7CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIHNocmlua1dyYXBCbG9ja3NWYWw7CgoJCXN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcyA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIHNocmlua1dyYXBCbG9ja3NWYWwgIT0gbnVsbCApIHsKCQkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCQl9CgoJCQkvLyBXaWxsIGJlIGNoYW5nZWQgbGF0ZXIgaWYgbmVlZGVkLgoJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZmFsc2U7CgoJCQkvLyBNaW5pZmllZDogdmFyIGIsYyxkCgkJCXZhciBkaXYsIGJvZHksIGNvbnRhaW5lcjsKCgkJCWJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggImJvZHkiIClbIDAgXTsKCQkJaWYgKCAhYm9keSB8fCAhYm9keS5zdHlsZSApIHsKCgkJCQkvLyBUZXN0IGZpcmVkIHRvbyBlYXJseSBvciBpbiBhbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudCwgZXhpdC4KCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gU2V0dXAKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiOwoJCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCQkvLyBTdXBwb3J0OiBJRTYKCQkJLy8gQ2hlY2sgaWYgZWxlbWVudHMgd2l0aCBsYXlvdXQgc2hyaW5rLXdyYXAgdGhlaXIgY2hpbGRyZW4KCQkJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkJCS8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXIKCQkJCWRpdi5zdHlsZS5jc3NUZXh0ID0KCgkJCQkJLy8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjMKCQkJCQkvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmcKCQkJCQkiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDsiICsKCQkJCQkiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowOyIgKwoJCQkJCSJwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjsKCQkJCWRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApLnN0eWxlLndpZHRoID0gIjVweCI7CgkJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZGl2Lm9mZnNldFdpZHRoICE9PSAzOwoJCQl9CgoJCQlib2R5LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTsKCgkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCX07CgoJfSApKCk7Cgl2YXIgcG51bSA9ICggL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLyApLnNvdXJjZTsKCgl2YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoICJeKD86KFsrLV0pPXwpKCIgKyBwbnVtICsgIikoW2EteiVdKikkIiwgImkiICk7CgoKCXZhciBjc3NFeHBhbmQgPSBbICJUb3AiLCAiUmlnaHQiLCAiQm90dG9tIiwgIkxlZnQiIF07CgoJdmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkgewoKCQkJLy8gaXNIaWRkZW4gbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjsKCQkJLy8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50CgkJCWVsZW0gPSBlbCB8fCBlbGVtOwoJCQlyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICkgPT09ICJub25lIiB8fAoJCQkJIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7CgkJfTsKCgoKCWZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7CgkJdmFyIGFkanVzdGVkLAoJCQlzY2FsZSA9IDEsCgkJCW1heEl0ZXJhdGlvbnMgPSAyMCwKCQkJY3VycmVudFZhbHVlID0gdHdlZW4gPwoJCQkJZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsICIiICk7IH0sCgkJCWluaXRpYWwgPSBjdXJyZW50VmFsdWUoKSwKCQkJdW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICksCgoJCQkvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlcwoJCQlpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gInB4IiAmJiAraW5pdGlhbCApICYmCgkJCQlyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApOwoKCQlpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkgewoKCQkJLy8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzcwoJCQl1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07CgoJCQkvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uCgkJCXZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdOwoKCQkJLy8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnQKCQkJaW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7CgoJCQlkbyB7CgoJCQkJLy8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouCgkJCQkvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvdwoJCQkJc2NhbGUgPSBzY2FsZSB8fCAiLjUiOwoKCQkJCS8vIEFkanVzdCBhbmQgYXBwbHkKCQkJCWluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7CgkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7CgoJCQkvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKQoJCQkvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLgoJCQl9IHdoaWxlICgKCQkJCXNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zCgkJCSk7CgkJfQoKCQlpZiAoIHZhbHVlUGFydHMgKSB7CgkJCWluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwOwoKCQkJLy8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkCgkJCWFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID8KCQkJCWluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6CgkJCQkrdmFsdWVQYXJ0c1sgMiBdOwoJCQlpZiAoIHR3ZWVuICkgewoJCQkJdHdlZW4udW5pdCA9IHVuaXQ7CgkJCQl0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7CgkJCQl0d2Vlbi5lbmQgPSBhZGp1c3RlZDsKCQkJfQoJCX0KCQlyZXR1cm4gYWRqdXN0ZWQ7Cgl9CgoKCS8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvbgoJLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uCgl2YXIgYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkgewoJCXZhciBpID0gMCwKCQkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCQlidWxrID0ga2V5ID09IG51bGw7CgoJCS8vIFNldHMgbWFueSB2YWx1ZXMKCQlpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gIm9iamVjdCIgKSB7CgkJCWNoYWluYWJsZSA9IHRydWU7CgkJCWZvciAoIGkgaW4ga2V5ICkgewoJCQkJYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7CgkJCX0KCgkJLy8gU2V0cyBvbmUgdmFsdWUKCQl9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQljaGFpbmFibGUgPSB0cnVlOwoKCQkJaWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCQlyYXcgPSB0cnVlOwoJCQl9CgoJCQlpZiAoIGJ1bGsgKSB7CgoJCQkJLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0CgkJCQlpZiAoIHJhdyApIHsKCQkJCQlmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTsKCQkJCQlmbiA9IG51bGw7CgoJCQkJLy8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlcwoJCQkJfSBlbHNlIHsKCQkJCQlidWxrID0gZm47CgkJCQkJZm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHsKCQkJCQkJcmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7CgkJCQkJfTsKCQkJCX0KCQkJfQoKCQkJaWYgKCBmbiApIHsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCWZuKAoJCQkJCQllbGVtc1sgaSBdLAoJCQkJCQlrZXksCgkJCQkJCXJhdyA/IHZhbHVlIDogdmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApICkKCQkJCQkpOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gY2hhaW5hYmxlID8KCQkJZWxlbXMgOgoKCQkJLy8gR2V0cwoJCQlidWxrID8KCQkJCWZuLmNhbGwoIGVsZW1zICkgOgoJCQkJbGVuZ3RoID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7Cgl9OwoJdmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApOwoKCXZhciBydGFnTmFtZSA9ICggLzwoW1x3Oi1dKykvICk7CgoJdmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTsKCgl2YXIgcmxlYWRpbmdXaGl0ZXNwYWNlID0gKCAvXlxzKy8gKTsKCgl2YXIgbm9kZU5hbWVzID0gImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8IiArCgkJCSJkZXRhaWxzfGRpYWxvZ3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYWlufCIgKwoJCQkibWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iOwoKCgoJZnVuY3Rpb24gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApIHsKCQl2YXIgbGlzdCA9IG5vZGVOYW1lcy5zcGxpdCggInwiICksCgkJCXNhZmVGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoKCQlpZiAoIHNhZmVGcmFnLmNyZWF0ZUVsZW1lbnQgKSB7CgkJCXdoaWxlICggbGlzdC5sZW5ndGggKSB7CgkJCQlzYWZlRnJhZy5jcmVhdGVFbGVtZW50KAoJCQkJCWxpc3QucG9wKCkKCQkJCSk7CgkJCX0KCQl9CgkJcmV0dXJuIHNhZmVGcmFnOwoJfQoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwKCQkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgoJCS8vIFNldHVwCgkJZGl2LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iOwoKCQkvLyBJRSBzdHJpcHMgbGVhZGluZyB3aGl0ZXNwYWNlIHdoZW4gLmlubmVySFRNTCBpcyB1c2VkCgkJc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSA9IGRpdi5maXJzdENoaWxkLm5vZGVUeXBlID09PSAzOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0Yg==", "base64"));
  res.write(new Buffer("b2R5IGVsZW1lbnRzIGFyZW4ndCBhdXRvbWF0aWNhbGx5IGluc2VydGVkCgkJLy8gSUUgd2lsbCBpbnNlcnQgdGhlbSBpbnRvIGVtcHR5IHRhYmxlcwoJCXN1cHBvcnQudGJvZHkgPSAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAidGJvZHkiICkubGVuZ3RoOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCBsaW5rIGVsZW1lbnRzIGdldCBzZXJpYWxpemVkIGNvcnJlY3RseSBieSBpbm5lckhUTUwKCQkvLyBUaGlzIHJlcXVpcmVzIGEgd3JhcHBlciBlbGVtZW50IGluIElFCgkJc3VwcG9ydC5odG1sU2VyaWFsaXplID0gISFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJsaW5rIiApLmxlbmd0aDsKCgkJLy8gTWFrZXMgc3VyZSBjbG9uaW5nIGFuIGh0bWw1IGVsZW1lbnQgZG9lcyBub3QgY2F1c2UgcHJvYmxlbXMKCQkvLyBXaGVyZSBvdXRlckhUTUwgaXMgdW5kZWZpbmVkLCB0aGlzIHN0aWxsIHdvcmtzCgkJc3VwcG9ydC5odG1sNUNsb25lID0KCQkJZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggIm5hdiIgKS5jbG9uZU5vZGUoIHRydWUgKS5vdXRlckhUTUwgIT09ICI8Om5hdj48LzpuYXY+IjsKCgkJLy8gQ2hlY2sgaWYgYSBkaXNjb25uZWN0ZWQgY2hlY2tib3ggd2lsbCByZXRhaW4gaXRzIGNoZWNrZWQKCQkvLyB2YWx1ZSBvZiB0cnVlIGFmdGVyIGFwcGVuZGVkIHRvIHRoZSBET00gKElFNi83KQoJCWlucHV0LnR5cGUgPSAiY2hlY2tib3giOwoJCWlucHV0LmNoZWNrZWQgPSB0cnVlOwoJCWZyYWdtZW50LmFwcGVuZENoaWxkKCBpbnB1dCApOwoJCXN1cHBvcnQuYXBwZW5kQ2hlY2tlZCA9IGlucHV0LmNoZWNrZWQ7CgoJCS8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkCgkJLy8gU3VwcG9ydDogSUU2LUlFMTErCgkJZGl2LmlubmVySFRNTCA9ICI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IjsKCQlzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTsKCgkJLy8gIzExMjE3IC0gV2ViS2l0IGxvc2VzIGNoZWNrIHdoZW4gdGhlIG5hbWUgaXMgYWZ0ZXIgdGhlIGNoZWNrZWQgYXR0cmlidXRlCgkJZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRpdiApOwoKCQkvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpCgkJLy8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpCgkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJyYWRpbyIgKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJjaGVja2VkIiwgImNoZWNrZWQiICk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCAibmFtZSIsICJ0IiApOwoKCQlkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7CgoJCS8vIFN1cHBvcnQ6IFNhZmFyaSA1LjEsIGlPUyA1LjEsIEFuZHJvaWQgNC54LCBBbmRyb2lkIDIuMwoJCS8vIG9sZCBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHMKCQlzdXBwb3J0LmNoZWNrQ2xvbmUgPSBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmNoZWNrZWQ7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBDbG9uZWQgZWxlbWVudHMga2VlcCBhdHRhY2hFdmVudCBoYW5kbGVycywgd2UgdXNlIGFkZEV2ZW50TGlzdGVuZXIgb24gSUU5KwoJCXN1cHBvcnQubm9DbG9uZUV2ZW50ID0gISFkaXYuYWRkRXZlbnRMaXN0ZW5lcjsKCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIFNpbmNlIGF0dHJpYnV0ZXMgYW5kIHByb3BlcnRpZXMgYXJlIHRoZSBzYW1lIGluIElFLAoJCS8vIGNsZWFuRGF0YSBtdXN0IHNldCBwcm9wZXJ0aWVzIHRvIHVuZGVmaW5lZCByYXRoZXIgdGhhbiB1c2UgcmVtb3ZlQXR0cmlidXRlCgkJZGl2WyBqUXVlcnkuZXhwYW5kbyBdID0gMTsKCQlzdXBwb3J0LmF0dHJpYnV0ZXMgPSAhZGl2LmdldEF0dHJpYnV0ZSggalF1ZXJ5LmV4cGFuZG8gKTsKCX0gKSgpOwoKCgkvLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKQoJdmFyIHdyYXBNYXAgPSB7CgkJb3B0aW9uOiBbIDEsICI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwgIjwvc2VsZWN0PiIgXSwKCQlsZWdlbmQ6IFsgMSwgIjxmaWVsZHNldD4iLCAiPC9maWVsZHNldD4iIF0sCgkJYXJlYTogWyAxLCAiPG1hcD4iLCAiPC9tYXA+IiBdLAoKCQkvLyBTdXBwb3J0OiBJRTgKCQlwYXJhbTogWyAxLCAiPG9iamVjdD4iLCAiPC9vYmplY3Q+IiBdLAoJCXRoZWFkOiBbIDEsICI8dGFibGU+IiwgIjwvdGFibGU+IiBdLAoJCXRyOiBbIDIsICI8dGFibGU+PHRib2R5PiIsICI8L3Rib2R5PjwvdGFibGU+IiBdLAoJCWNvbDogWyAyLCAiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCAiPC9jb2xncm91cD48L3RhYmxlPiIgXSwKCQl0ZDogWyAzLCAiPHRhYmxlPjx0Ym9keT48dHI+IiwgIjwvdHI+PC90Ym9keT48L3RhYmxlPiIgXSwKCgkJLy8gSUU2LTggY2FuJ3Qgc2VyaWFsaXplIGxpbmssIHNjcmlwdCwgc3R5bGUsIG9yIGFueSBodG1sNSAoTm9TY29wZSkgdGFncywKCQkvLyB1bmxlc3Mgd3JhcHBlZCBpbiBhIGRpdiB3aXRoIG5vbi1icmVha2luZyBjaGFyYWN0ZXJzIGluIGZyb250IG9mIGl0LgoJCV9kZWZhdWx0OiBzdXBwb3J0Lmh0bWxTZXJpYWxpemUgPyBbIDAsICIiLCAiIiBdIDogWyAxLCAiWDxkaXY+IiwgIjwvZGl2PiIgXQoJfTsKCgkvLyBTdXBwb3J0OiBJRTgtSUU5Cgl3cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247CgoJd3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDsKCXdyYXBNYXAudGggPSB3cmFwTWFwLnRkOwoKCglmdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHsKCQl2YXIgZWxlbXMsIGVsZW0sCgkJCWkgPSAwLAoJCQlmb3VuZCA9IHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSAidW5kZWZpbmVkIiA/CgkJCQljb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgIioiICkgOgoJCQkJdHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gInVuZGVmaW5lZCIgPwoJCQkJCWNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8ICIqIiApIDoKCQkJCQl1bmRlZmluZWQ7CgoJCWlmICggIWZvdW5kICkgewoJCQlmb3IgKCBmb3VuZCA9IFtdLCBlbGVtcyA9IGNvbnRleHQuY2hpbGROb2RlcyB8fCBjb250ZXh0OwoJCQkJKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7CgkJCQlpKysKCQkJKSB7CgkJCQlpZiAoICF0YWcgfHwgalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCB0YWcgKSApIHsKCQkJCQlmb3VuZC5wdXNoKCBlbGVtICk7CgkJCQl9IGVsc2UgewoJCQkJCWpRdWVyeS5tZXJnZSggZm91bmQsIGdldEFsbCggZWxlbSwgdGFnICkgKTsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID8KCQkJalF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgZm91bmQgKSA6CgkJCWZvdW5kOwoJfQoKCgkvLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWQKCWZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHsKCQl2YXIgZWxlbSwKCQkJaSA9IDA7CgkJZm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT0gbnVsbDsgaSsrICkgewoJCQlqUXVlcnkuX2RhdGEoCgkJCQllbGVtLAoJCQkJImdsb2JhbEV2YWwiLAoJCQkJIXJlZkVsZW1lbnRzIHx8IGpRdWVyeS5fZGF0YSggcmVmRWxlbWVudHNbIGkgXSwgImdsb2JhbEV2YWwiICkKCQkJKTsKCQl9Cgl9CgoKCXZhciByaHRtbCA9IC88fCYjP1x3KzsvLAoJCXJ0Ym9keSA9IC88dGJvZHkvaTsKCglmdW5jdGlvbiBmaXhEZWZhdWx0Q2hlY2tlZCggZWxlbSApIHsKCQlpZiAoIHJjaGVja2FibGVUeXBlLnRlc3QoIGVsZW0udHlwZSApICkgewoJCQllbGVtLmRlZmF1bHRDaGVja2VkID0gZWxlbS5jaGVja2VkOwoJCX0KCX0KCglmdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkgewoJCXZhciBqLCBlbGVtLCBjb250YWlucywKCQkJdG1wLCB0YWcsIHRib2R5LCB3cmFwLAoJCQlsID0gZWxlbXMubGVuZ3RoLAoKCQkJLy8gRW5zdXJlIGEgc2FmZSBmcmFnbWVudAoJCQlzYWZlID0gY3JlYXRlU2FmZUZyYWdtZW50KCBjb250ZXh0ICksCgoJCQlub2RlcyA9IFtdLAoJCQlpID0gMDsKCgkJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCQllbGVtID0gZWxlbXNbIGkgXTsKCgkJCWlmICggZWxlbSB8fCBlbGVtID09PSAwICkgewoKCQkJCS8vIEFkZCBub2RlcyBkaXJlY3RseQoJCQkJaWYgKCBqUXVlcnkudHlwZSggZWxlbSApID09PSAib2JqZWN0IiApIHsKCQkJCQlqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7CgoJCQkJLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlCgkJCQl9IGVsc2UgaWYgKCAhcmh0bWwudGVzdCggZWxlbSApICkgewoJCQkJCW5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApOwoKCQkJCS8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2RlcwoJCQkJfSBlbHNlIHsKCQkJCQl0bXAgPSB0bXAgfHwgc2FmZS5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KCAiZGl2IiApICk7CgoJCQkJCS8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb24KCQkJCQl0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbICIiLCAiIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpOwoJCQkJCXdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0OwoKCQkJCQl0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTsKCgkJCQkJLy8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50CgkJCQkJaiA9IHdyYXBbIDAgXTsKCQkJCQl3aGlsZSAoIGotLSApIHsKCQkJCQkJdG1wID0gdG1wLmxhc3RDaGlsZDsKCQkJCQl9CgoJCQkJCS8vIE1hbnVhbGx5IGFkZCBsZWFkaW5nIHdoaXRlc3BhY2UgcmVtb3ZlZCBieSBJRQoJCQkJCWlmICggIXN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgJiYgcmxlYWRpbmdXaGl0ZXNwYWNlLnRlc3QoIGVsZW0gKSApIHsKCQkJCQkJbm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggcmxlYWRpbmdXaGl0ZXNwYWNlLmV4ZWMoIGVsZW0gKVsgMCBdICkgKTsKCQkJCQl9CgoJCQkJCS8vIFJlbW92ZSBJRSdzIGF1dG9pbnNlcnRlZCA8dGJvZHk+IGZyb20gdGFibGUgZnJhZ21lbnRzCgkJCQkJaWYgKCAhc3VwcG9ydC50Ym9keSApIHsKCgkJCQkJCS8vIFN0cmluZyB3YXMgYSA8dGFibGU+LCAqbWF5KiBoYXZlIHNwdXJpb3VzIDx0Ym9keT4KCQkJCQkJZWxlbSA9IHRhZyA9PT0gInRhYmxlIiAmJiAhcnRib2R5LnRlc3QoIGVsZW0gKSA/CgkJCQkJCQl0bXAuZmlyc3RDaGlsZCA6CgoJCQkJCQkJLy8gU3RyaW5nIHdhcyBhIGJhcmUgPHRoZWFkPiBvciA8dGZvb3Q+CgkJCQkJCQl3cmFwWyAxIF0gPT09ICI8dGFibGU+IiAmJiAhcnRib2R5LnRlc3QoIGVsZW0gKSA/CgkJCQkJCQkJdG1wIDoKCQkJCQkJCQkwOwoKCQkJCQkJaiA9IGVsZW0gJiYgZWxlbS5jaGlsZE5vZGVzLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggKCB0Ym9keSA9IGVsZW0uY2hpbGROb2Rlc1sgaiBdICksICJ0Ym9keSIgKSAmJgoJCQkJCQkJCSF0Ym9keS5jaGlsZE5vZGVzLmxlbmd0aCApIHsKCgkJCQkJCQkJZWxlbS5yZW1vdmVDaGlsZCggdGJvZHkgKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCgkJCQkJalF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTsKCgkJCQkJLy8gRml4ICMxMjM5MiBmb3IgV2ViS2l0IGFuZCBJRSA+IDkKCQkJCQl0bXAudGV4dENvbnRlbnQgPSAiIjsKCgkJCQkJLy8gRml4ICMxMjM5MiBmb3Igb2xkSUUKCQkJCQl3aGlsZSAoIHRtcC5maXJzdENoaWxkICkgewoJCQkJCQl0bXAucmVtb3ZlQ2hpbGQoIHRtcC5maXJzdENoaWxkICk7CgkJCQkJfQoKCQkJCQkvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lciBmb3IgcHJvcGVyIGNsZWFudXAKCQkJCQl0bXAgPSBzYWZlLmxhc3RDaGlsZDsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gRml4ICMxMTM1NjogQ2xlYXIgZWxlbWVudHMgZnJvbSBmcmFnbWVudAoJCWlmICggdG1wICkgewoJCQlzYWZlLnJlbW92ZUNoaWxkKCB0bXAgKTsKCQl9CgoJCS8vIFJlc2V0IGRlZmF1bHRDaGVja2VkIGZvciBhbnkgcmFkaW9zIGFuZCBjaGVja2JveGVzCgkJLy8gYWJvdXQgdG8gYmUgYXBwZW5kZWQgdG8gdGhlIERPTSBpbiBJRSA2LzcgKCM4MDYwKQoJCWlmICggIXN1cHBvcnQuYXBwZW5kQ2hlY2tlZCApIHsKCQkJalF1ZXJ5LmdyZXAoIGdldEFsbCggbm9kZXMsICJpbnB1dCIgKSwgZml4RGVmYXVsdENoZWNrZWQgKTsKCQl9CgoJCWkgPSAwOwoJCXdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7CgoJCQkvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KQoJCQlpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgPiAtMSApIHsKCQkJCWlmICggaWdub3JlZCApIHsKCQkJCQlpZ25vcmVkLnB1c2goIGVsZW0gKTsKCQkJCX0KCgkJCQljb250aW51ZTsKCQkJfQoKCQkJY29udGFpbnMgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApOwoKCQkJLy8gQXBwZW5kIHRvIGZyYWdtZW50CgkJCXRtcCA9IGdldEFsbCggc2FmZS5hcHBlbmRDaGlsZCggZWxlbSApLCAic2NyaXB0IiApOwoKCQkJLy8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeQoJCQlpZiAoIGNvbnRhaW5zICkgewoJCQkJc2V0R2xvYmFsRXZhbCggdG1wICk7CgkJCX0KCgkJCS8vIENhcHR1cmUgZXhlY3V0YWJsZXMKCQkJaWYgKCBzY3JpcHRzICkgewoJCQkJaiA9IDA7CgkJCQl3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHsKCQkJCQlpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCAiIiApICkgewoJCQkJCQlzY3JpcHRzLnB1c2goIGVsZW0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCXRtcCA9IG51bGw7CgoJCXJldHVybiBzYWZlOwoJfQoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBpLCBldmVudE5hbWUsCgkJCWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgoJCS8vIFN1cHBvcnQ6IElFPDkgKGxhY2sgc3VibWl0L2NoYW5nZSBidWJibGUpLCBGaXJlZm94IChsYWNrIGZvY3VzKGluIHwgb3V0KSBldmVudHMpCgkJZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgY2hhbmdlOiB0cnVlLCBmb2N1c2luOiB0cnVlIH0gKSB7CgkJCWV2ZW50TmFtZSA9ICJvbiIgKyBpOwoKCQkJaWYgKCAhKCBzdXBwb3J0WyBpIF0gPSBldmVudE5hbWUgaW4gd2luZG93ICkgKSB7CgoJCQkJLy8gQmV3YXJlIG9mIENTUCByZXN0cmljdGlvbnMgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL1NlY3VyaXR5L0NTUCkKCQkJCWRpdi5zZXRBdHRyaWJ1dGUoIGV2ZW50TmFtZSwgInQiICk7CgkJCQlzdXBwb3J0WyBpIF0gPSBkaXYuYXR0cmlidXRlc1sgZXZlbnROYW1lIF0uZXhwYW5kbyA9PT0gZmFsc2U7CgkJCX0KCQl9CgoJCS8vIE51bGwgZWxlbWVudHMgdG8gYXZvaWQgbGVha3MgaW4gSUUuCgkJZGl2ID0gbnVsbDsKCX0gKSgpOwoKCgl2YXIgcmZvcm1FbGVtcyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSwKCQlya2V5RXZlbnQgPSAvXmtleS8sCgkJcm1vdXNlRXZlbnQgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sCgkJcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sCgkJcnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcLiguKyl8KS87CgoJZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiByZXR1cm5GYWxzZSgpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJLy8gU3VwcG9ydDogSUU5CgkvLyBTZWUgIzEzMzkzIGZvciBtb3JlIGluZm8KCWZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkgewoJCXRyeSB7CgkJCXJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoJCX0gY2F0Y2ggKCBlcnIgKSB7IH0KCX0KCglmdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkgewoJCXZhciBvcmlnRm4sIHR5cGU7CgoJCS8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVycwoJCWlmICggdHlwZW9mIHR5cGVzID09PSAib2JqZWN0IiApIHsKCgkJCS8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApCgkJCWlmICggdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiApIHsKCgkJCQkvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApCgkJCQlkYXRhID0gZGF0YSB8fCBzZWxlY3RvcjsKCQkJCXNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCQl9CgkJCWZvciAoIHR5cGUgaW4gdHlwZXMgKSB7CgkJCQlvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApOwoJCQl9CgkJCXJldHVybiBlbGVtOwoJCX0KCgkJaWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHsKCgkJCS8vICggdHlwZXMsIGZuICkKCQkJZm4gPSBzZWxlY3RvcjsKCQkJZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCX0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7CgkJCWlmICggdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiApIHsKCgkJCQkvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKQoJCQkJZm4gPSBkYXRhOwoJCQkJZGF0YSA9IHVuZGVmaW5lZDsKCQkJfSBlbHNlIHsKCgkJCQkvLyAoIHR5cGVzLCBkYXRhLCBmbiApCgkJCQlmbiA9IGRhdGE7CgkJCQlkYXRhID0gc2VsZWN0b3I7CgkJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQkJfQoJCX0KCQlpZiAoIGZuID09PSBmYWxzZSApIHsKCQkJZm4gPSByZXR1cm5GYWxzZTsKCQl9IGVsc2UgaWYgKCAhZm4gKSB7CgkJCXJldHVybiBlbGVtOwoJCX0KCgkJaWYgKCBvbmUgPT09IDEgKSB7CgkJCW9yaWdGbiA9IGZuOwoJCQlmbiA9IGZ1bmN0aW9uKCBldmVudCApIHsKCgkJCQkvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm8KCQkJCWpRdWVyeSgpLm9mZiggZXZlbnQgKTsKCQkJCXJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQl9OwoKCQkJLy8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm4KCQkJZm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7CgkJfQoJCXJldHVybiBlbGVtLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7CgkJfSApOwoJfQoKCS8qCgkgKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuCgkgKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLgoJICovCglqUXVlcnkuZXZlbnQgPSB7CgoJCWdsb2JhbDoge30sCgoJCWFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHsKCQkJdmFyIHRtcCwgZXZlbnRzLCB0LCBoYW5kbGVPYmpJbiwKCQkJCXNwZWNpYWwsIGV2ZW50SGFuZGxlLCBoYW5kbGVPYmosCgkJCQloYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsCgkJCQllbGVtRGF0YSA9IGpRdWVyeS5fZGF0YSggZWxlbSApOwoKCQkJLy8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cykKCQkJaWYgKCAhZWxlbURhdGEgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIENhbGxlciBjYW4gcGFzcyBpbiBhbiBvYmplY3Qgb2YgY3VzdG9tIGRhdGEgaW4gbGlldSBvZiB0aGUgaGFuZGxlcgoJCQlpZiAoIGhhbmRsZXIuaGFuZGxlciApIHsKCQkJCWhhbmRsZU9iakluID0gaGFuZGxlcjsKCQkJCWhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyOwoJCQkJc2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3RvcjsKCQkJfQoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGhhbmRsZXIgaGFzIGEgdW5pcXVlIElELCB1c2VkIHRvIGZpbmQvcmVtb3ZlIGl0IGxhdGVyCgkJCWlmICggIWhhbmRsZXIuZ3VpZCApIHsKCQkJCWhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7CgkJCX0KCgkJCS8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3QKCQkJaWYgKCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHsKCQkJCWV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9OwoJCQl9CgkJCWlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHsKCQkJCWV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7CgoJCQkJCS8vIERpc2NhcmQgdGhlIHNlY29uZCBldmVudCBvZiBhIGpRdWVyeS5ldmVudC50cmlnZ2VyKCkgYW5kCgkJCQkJLy8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZAoJCQkJCXJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSAidW5kZWZpbmVkIiAmJgoJCQkJCQkoICFlIHx8IGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSApID8KCQkJCQkJalF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBldmVudEhhbmRsZS5lbGVtLCBhcmd1bWVudHMgKSA6CgkJCQkJCXVuZGVmaW5lZDsKCQkJCX07CgoJCQkJLy8gQWRkIGVsZW0gYXMgYSBwcm9wZXJ0eSBvZiB0aGUgaGFuZGxlIGZuIHRvIHByZXZlbnQgYSBtZW1vcnkgbGVhawoJCQkJLy8gd2l0aCBJRSBub24tbmF0aXZlIGV2ZW50cwoJCQkJZXZlbnRIYW5kbGUuZWxlbSA9IGVsZW07CgkJCX0KCgkJCS8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2UKCQkJdHlwZXMgPSAoIHR5cGVzIHx8ICIiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCQkJdCA9IHR5cGVzLmxlbmd0aDsKCQkJd2hpbGUgKCB0LS0gKSB7CgkJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCQl0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTsKCQkJCW5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8ICIiICkuc3BsaXQoICIuIiApLnNvcnQoKTsKCgkJCQkvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnMKCQkJCWlmICggIXR5cGUgKSB7CgkJCQkJY29udGludWU7CgkJCQl9CgoJCQkJLy8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlCgkJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCgkJCQkvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGUKCQkJCXR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTsKCgkJCQkvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlCgkJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCgkJCQkvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVycwoJCQkJaGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCggewoJCQkJCXR5cGU6IHR5cGUsCgkJCQkJb3JpZ1R5cGU6IG9yaWdUeXBlLAoJCQkJCWRhdGE6IGRhdGEsCgkJCQkJaGFuZGxlcjogaGFuZGxlciwKCQkJCQlndWlkOiBoYW5kbGVyLmd1aWQsCgkJCQkJc2VsZWN0b3I6IHNlbGVjdG9yLAoJCQkJCW5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksCgkJCQkJbmFtZXNwYWNlOiBuYW1lc3BhY2VzLmpvaW4oICIuIiApCgkJCQl9LCBoYW5kbGVPYmpJbiApOwoKCQkJCS8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0CgkJCQlpZiAoICEoIGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gKSApIHsKCQkJCQloYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107CgkJCQkJaGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7CgoJCQkJCS8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIvYXR0YWNoRXZlbnQgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZQoJCQkJCWlmICggIXNwZWNpYWwuc2V0dXAgfHwKCQkJCQkJc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHsKCgkJCQkJCS8vIEJpbmQgdGhlIGdsb2JhbCBldmVudCBoYW5kbGVyIHRvIHRoZSBlbGVtZW50CgkJCQkJCWlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkgewoJCQkJCQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSwgZmFsc2UgKTsKCgkJCQkJCX0gZWxzZSBpZiAoIGVsZW0uYXR0YWNoRXZlbnQgKSB7CgkJCQkJCQllbGVtLmF0dGFjaEV2ZW50KCAib24iICsgdHlwZSwgZXZlbnRIYW5kbGUgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlpZiAoIHNwZWNpYWwuYWRkICkgewoJCQkJCXNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApOwoKCQkJCQlpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkgewoJCQkJCQloYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udAoJCQkJaWYgKCBzZWxlY3RvciApIHsKCQkJCQloYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7CgkJCQl9IGVsc2UgewoJCQkJCWhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApOwoJCQkJfQoKCQkJCS8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb24KCQkJCWpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7CgkJCX0KCgkJCS8vIE51bGxpZnkgZWxlbSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcyBpbiBJRQoJCQllbGVtID0gbnVsbDsKCQl9LAoKCQkvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnQKCQlyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkgewoJCQl2YXIgaiwgaGFuZGxlT2JqLCB0bXAsCgkJCQlvcmlnQ291bnQsIHQsIGV2ZW50cywKCQkJCXNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLAoJCQkJbmFtZXNwYWNlcywgb3JpZ1R5cGUsCgkJCQllbGVtRGF0YSA9IGpRdWVyeS5oYXNEYXRhKCBlbGVtICkgJiYgalF1ZXJ5Ll9kYXRhKCBlbGVtICk7CgoJCQlpZiAoICFlbGVtRGF0YSB8fCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZAoJCQl0eXBlcyA9ICggdHlwZXMgfHwgIiIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyAiIiBdOwoJCQl0ID0gdHlwZXMubGVuZ3RoOwoJCQl3aGlsZSAoIHQtLSApIHsKCQkJCXRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTsKCQkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQkJbmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgIiIgKS5zcGxpdCggIi4iICkuc29ydCgpOwoKCQkJCS8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudAoJCQkJaWYgKCAhdHlwZSApIHsKCQkJCQlmb3IgKCB0eXBlIGluIGV2ZW50cyApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7CgkJCQkJfQoJCQkJCWNvbnRpbnVlOwoJCQkJfQoKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoJCQkJdHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlOwoJCQkJaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTsKCQkJCXRtcCA9IHRtcFsgMiBdICYmCgkJCQkJbmV3IFJlZ0V4cCggIihefFxcLikiICsgbmFtZXM=", "base64"));
  res.write(new Buffer("cGFjZXMuam9pbiggIlxcLig/Oi4qXFwufCkiICkgKyAiKFxcLnwkKSIgKTsKCgkJCQkvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzCgkJCQlvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoOwoJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTsKCgkJCQkJaWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJgoJCQkJCQkoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJgoJCQkJCQkoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmCgkJCQkJCSggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHwKCQkJCQkJCXNlbGVjdG9yID09PSAiKioiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkgewoJCQkJCQloYW5kbGVycy5zcGxpY2UoIGosIDEgKTsKCgkJCQkJCWlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkgewoJCQkJCQkJaGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tOwoJCQkJCQl9CgkJCQkJCWlmICggc3BlY2lhbC5yZW1vdmUgKSB7CgkJCQkJCQlzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0CgkJCQkvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycykKCQkJCWlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7CgkJCQkJaWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fAoJCQkJCQlzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHsKCgkJCQkJCWpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7CgkJCQkJfQoKCQkJCQlkZWxldGUgZXZlbnRzWyB0eXBlIF07CgkJCQl9CgkJCX0KCgkJCS8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkCgkJCWlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkgewoJCQkJZGVsZXRlIGVsZW1EYXRhLmhhbmRsZTsKCgkJCQkvLyByZW1vdmVEYXRhIGFsc28gY2hlY2tzIGZvciBlbXB0aW5lc3MgYW5kIGNsZWFycyB0aGUgZXhwYW5kbyBpZiBlbXB0eQoJCQkJLy8gc28gdXNlIGl0IGluc3RlYWQgb2YgZGVsZXRlCgkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sICJldmVudHMiICk7CgkJCX0KCQl9LAoKCQl0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHsKCQkJdmFyIGhhbmRsZSwgb250eXBlLCBjdXIsCgkJCQlidWJibGVUeXBlLCBzcGVjaWFsLCB0bXAsIGksCgkJCQlldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSwKCQkJCXR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsICJ0eXBlIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LAoJCQkJbmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgIm5hbWVzcGFjZSIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggIi4iICkgOiBbXTsKCgkJCWN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50OwoKCQkJLy8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXMKCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vdwoJCQlpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggdHlwZS5pbmRleE9mKCAiLiIgKSA+IC0xICkgewoKCQkJCS8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKCkKCQkJCW5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCAiLiIgKTsKCQkJCXR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7CgkJCQluYW1lc3BhY2VzLnNvcnQoKTsKCQkJfQoJCQlvbnR5cGUgPSB0eXBlLmluZGV4T2YoICI6IiApIDwgMCAmJiAib24iICsgdHlwZTsKCgkJCS8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZwoJCQlldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID8KCQkJCWV2ZW50IDoKCQkJCW5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gIm9iamVjdCIgJiYgZXZlbnQgKTsKCgkJCS8vIFRyaWdnZXIgYml0bWFzazogJiAxIGZvciBuYXRpdmUgaGFuZGxlcnM7ICYgMiBmb3IgalF1ZXJ5IChhbHdheXMgdHJ1ZSkKCQkJZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7CgkJCWV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggIi4iICk7CgkJCWV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgPwoJCQkJbmV3IFJlZ0V4cCggIihefFxcLikiICsgbmFtZXNwYWNlcy5qb2luKCAiXFwuKD86LipcXC58KSIgKSArICIoXFwufCQpIiApIDoKCQkJCW51bGw7CgoJCQkvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWQKCQkJZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkOwoJCQlpZiAoICFldmVudC50YXJnZXQgKSB7CgkJCQlldmVudC50YXJnZXQgPSBlbGVtOwoJCQl9Cg==", "base64"));
  res.write(new Buffer("CgkJCS8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3QKCQkJZGF0YSA9IGRhdGEgPT0gbnVsbCA/CgkJCQlbIGV2ZW50IF0gOgoJCQkJalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7CgoJCQkvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzCgkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoJCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpCgkJCS8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpCgkJCWlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7CgoJCQkJYnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7CgkJCQlpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkgewoJCQkJCWN1ciA9IGN1ci5wYXJlbnROb2RlOwoJCQkJfQoJCQkJZm9yICggOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkgewoJCQkJCWV2ZW50UGF0aC5wdXNoKCBjdXIgKTsKCQkJCQl0bXAgPSBjdXI7CgkJCQl9CgoJCQkJLy8gT25seSBhZGQgd2luZG93IGlmIHdlIGdvdCB0byBkb2N1bWVudCAoZS5nLiwgbm90IHBsYWluIG9iaiBvciBkZXRhY2hlZCBET00pCgkJCQlpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHsKCQkJCQlldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7CgkJCQl9CgkJCX0KCgkJCS8vIEZpcmUgaGFuZGxlcnMgb24gdGhlIGV2ZW50IHBhdGgKCQkJaSA9IDA7CgkJCXdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQkJZXZlbnQudHlwZSA9IGkgPiAxID8KCQkJCQlidWJibGVUeXBlIDoKCQkJCQlzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7CgoJCQkJLy8galF1ZXJ5IGhhbmRsZXIKCQkJCWhhbmRsZSA9ICggalF1ZXJ5Ll9kYXRhKCBjdXIsICJldmVudHMiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmCgkJCQkJalF1ZXJ5Ll9kYXRhKCBjdXIsICJoYW5kbGUiICk7CgoJCQkJaWYgKCBoYW5kbGUgKSB7CgkJCQkJaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTsKCQkJCX0KCgkJCQkvLyBOYXRpdmUgaGFuZGxlcgoJCQkJaGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07CgkJCQlpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7CgkJCQkJZXZlbnQucmVzdWx0ID0gaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTsKCQkJCQlpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7CgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWV2ZW50LnR5cGUgPSB0eXBlOwoKCQkJLy8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vdwoJCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgewoKCQkJCWlmICgKCQkJCQkoICFzcGVjaWFsLl9kZWZhdWx0IHx8CgkJCQkJIHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZQoJCQkJCSkgJiYgYWNjZXB0RGF0YSggZWxlbSApCgkJCQkpIHsKCgkJCQkJLy8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LgoJCQkJCS8vIENhbid0IHVzZSBhbiAuaXNGdW5jdGlvbigpIGNoZWNrIGhlcmUgYmVjYXVzZSBJRTYvNyBmYWlscyB0aGF0IHRlc3QuCgkJCQkJLy8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKQoJCQkJCWlmICggb250eXBlICYmIGVsZW1bIHR5cGUgXSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7CgoJCQkJCQkvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kCgkJCQkJCXRtcCA9IGVsZW1bIG9udHlwZSBdOwoKCQkJCQkJaWYgKCB0bXAgKSB7CgkJCQkJCQllbGVtWyBvbnR5cGUgXSA9IG51bGw7CgkJCQkJCX0KCgkJCQkJCS8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlCgkJCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlOwoJCQkJCQl0cnkgewoJCQkJCQkJZWxlbVsgdHlwZSBdKCk7CgkJCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkJCS8vIElFPDkgZGllcyBvbiBmb2N1cy9ibHVyIHRvIGhpZGRlbiBlbGVtZW50ICgjMTQ4NiwjMTI1MTgpCgkJCQkJCQkvLyBvbmx5IHJlcHJvZHVjaWJsZSBvbiB3aW5YUCBJRTggbmF0aXZlLCBub3QgSUU5IGluIElFOCBtb2RlCgkJCQkJCX0KCQkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDsKCgkJCQkJCWlmICggdG1wICkgewoJCQkJCQkJZWxlbVsgb250eXBlIF0gPSB0bXA7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiBldmVudC5yZXN1bHQ7CgkJfSwKCgkJZGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHsKCgkJCS8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdAoJCQlldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICk7CgoJCQl2YXIgaSwgaiwgcmV0LCBtYXRjaGVkLCBoYW5kbGVPYmosCgkJCQloYW5kbGVyUXVldWUgPSBbXSwKCQkJCWFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSwKCQkJCWhhbmRsZXJzID0gKCBqUXVlcnkuX2RhdGEoIHRoaXMsICJldmVudHMiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLAoJCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307CgoJCQkvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudAoJCQlhcmdzWyAwIF0gPSBldmVudDsKCQkJZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzOwoKCQkJLy8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZAoJCQlpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gRGV0ZXJtaW5lIGhhbmRsZXJzCgkJCWhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTsKCgkJCS8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzCgkJCWkgPSAwOwoJCQl3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCQkJCWV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07CgoJCQkJaiA9IDA7CgkJCQl3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJgoJCQkJCSFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkgewoKCQkJCQkvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpCgkJCQkJLy8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuCgkJCQkJaWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHsKCgkJCQkJCWV2ZW50LmhhbmRsZU9iaiA9IGhhbmRsZU9iajsKCQkJCQkJZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhOwoKCQkJCQkJcmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fAoJCQkJCQkJaGFuZGxlT2JqLmhhbmRsZXIgKS5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7CgoJCQkJCQlpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQkJaWYgKCAoIGV2ZW50LnJlc3VsdCA9IHJldCApID09PSBmYWxzZSApIHsKCQkJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCQkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlCgkJCWlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7CgkJCQlzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApOwoJCQl9CgoJCQlyZXR1cm4gZXZlbnQucmVzdWx0OwoJCX0sCgoJCWhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkgewoJCQl2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosCgkJCQloYW5kbGVyUXVldWUgPSBbXSwKCQkJCWRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LAoJCQkJY3VyID0gZXZlbnQudGFyZ2V0OwoKCQkJLy8gU3VwcG9ydCAoYXQgbGVhc3QpOiBDaHJvbWUsIElFOQoJCQkvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzCgkJCS8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApCgkJCS8vCgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3g8PTQyKwoJCQkvLyBBdm9pZCBub24tbGVmdC1jbGljayBpbiBGRiBidXQgZG9uJ3QgYmxvY2sgSUUgcmFkaW8gZXZlbnRzICgjMzg2MSwgZ2gtMjM0MykKCQkJaWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJgoJCQkJKCBldmVudC50eXBlICE9PSAiY2xpY2siIHx8IGlzTmFOKCBldmVudC5idXR0b24gKSB8fCBldmVudC5idXR0b24gPCAxICkgKSB7CgoJCQkJLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi8KCQkJCWZvciAoIDsgY3VyICE9IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7CgkJCQkJLyoganNoaW50IGVxZXFlcTogdHJ1ZSAqLwoKCQkJCQkvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOCkKCQkJCQkvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NCkKCQkJCQlpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAoIGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSAiY2xpY2siICkgKSB7CgkJCQkJCW1hdGNoZXMgPSBbXTsKCQkJCQkJZm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7CgkJCQkJCQloYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdOwoKCQkJCQkJCS8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpCgkJCQkJCQlzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyAiICI7CgoJCQkJCQkJaWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkgewoJCQkJCQkJCW1hdGNoZXNbIHNlbCBdID0gaGFuZGxlT2JqLm5lZWRzQ29udGV4dCA/CgkJCQkJCQkJCWpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOgoJCQkJCQkJCQlqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoOwoJCQkJCQkJfQoJCQkJCQkJaWYgKCBtYXRjaGVzWyBzZWwgXSApIHsKCQkJCQkJCQltYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWlmICggbWF0Y2hlcy5sZW5ndGggKSB7CgkJCQkJCQloYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVycwoJCQlpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7CgkJCQloYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiB0aGlzLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7CgkJCX0KCgkJCXJldHVybiBoYW5kbGVyUXVldWU7CgkJfSwKCgkJZml4OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCWlmICggZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gKSB7CgkJCQlyZXR1cm4gZXZlbnQ7CgkJCX0KCgkJCS8vIENyZWF0ZSBhIHdyaXRhYmxlIGNvcHkgb2YgdGhlIGV2ZW50IG9iamVjdCBhbmQgbm9ybWFsaXplIHNvbWUgcHJvcGVydGllcwoJCQl2YXIgaSwgcHJvcCwgY29weSwKCQkJCXR5cGUgPSBldmVudC50eXBlLAoJCQkJb3JpZ2luYWxFdmVudCA9IGV2ZW50LAoJCQkJZml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTsKCgkJCWlmICggIWZpeEhvb2sgKSB7CgkJCQl0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID0KCQkJCQlybW91c2VFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLm1vdXNlSG9va3MgOgoJCQkJCXJrZXlFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLmtleUhvb2tzIDoKCQkJCQl7fTsKCQkJfQoJCQljb3B5ID0gZml4SG9vay5wcm9wcyA/IHRoaXMucHJvcHMuY29uY2F0KCBmaXhIb29rLnByb3BzICkgOiB0aGlzLnByb3BzOwoKCQkJZXZlbnQgPSBuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7CgoJCQlpID0gY29weS5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJcHJvcCA9IGNvcHlbIGkgXTsKCQkJCWV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gRml4IHRhcmdldCBwcm9wZXJ0eSAoIzE5MjUpCgkJCWlmICggIWV2ZW50LnRhcmdldCApIHsKCQkJCWV2ZW50LnRhcmdldCA9IG9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudCB8fCBkb2N1bWVudDsKCQkJfQoKCQkJLy8gU3VwcG9ydDogU2FmYXJpIDYtOCsKCQkJLy8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0MykKCQkJaWYgKCBldmVudC50YXJnZXQubm9kZVR5cGUgPT09IDMgKSB7CgkJCQlldmVudC50YXJnZXQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBGb3IgbW91c2Uva2V5IGV2ZW50cywgbWV0YUtleT09ZmFsc2UgaWYgaXQncyB1bmRlZmluZWQgKCMzMzY4LCAjMTEzMjgpCgkJCWV2ZW50Lm1ldGFLZXkgPSAhIWV2ZW50Lm1ldGFLZXk7CgoJCQlyZXR1cm4gZml4SG9vay5maWx0ZXIgPyBmaXhIb29rLmZpbHRlciggZXZlbnQsIG9yaWdpbmFsRXZlbnQgKSA6IGV2ZW50OwoJCX0sCgoJCS8vIEluY2x1ZGVzIHNvbWUgZXZlbnQgcHJvcHMgc2hhcmVkIGJ5IEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50CgkJcHJvcHM6ICggImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlICIgKwoJCQkibWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIgKS5zcGxpdCggIiAiICksCgoJCWZpeEhvb2tzOiB7fSwKCgkJa2V5SG9va3M6IHsKCQkJcHJvcHM6ICJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCggIiAiICksCgkJCWZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHsKCgkJCQkvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHMKCQkJCWlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHsKCQkJCQlldmVudC53aGljaCA9IG9yaWdpbmFsLmNoYXJDb2RlICE9IG51bGwgPyBvcmlnaW5hbC5jaGFyQ29kZSA6IG9yaWdpbmFsLmtleUNvZGU7CgkJCQl9CgoJCQkJcmV0dXJuIGV2ZW50OwoJCQl9CgkJfSwKCgkJbW91c2VIb29rczogewoJCQlwcm9wczogKCAiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSAiICsKCQkJCSJwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50IiApLnNwbGl0KCAiICIgKSwKCQkJZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkgewoJCQkJdmFyIGJvZHksIGV2ZW50RG9jLCBkb2MsCgkJCQkJYnV0dG9uID0gb3JpZ2luYWwuYnV0dG9uLAoJCQkJCWZyb21FbGVtZW50ID0gb3JpZ2luYWwuZnJvbUVsZW1lbnQ7CgoJCQkJLy8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZQoJCQkJaWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHsKCQkJCQlldmVu", "base64"));
  res.write(new Buffer("dERvYyA9IGV2ZW50LnRhcmdldC5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50OwoJCQkJCWRvYyA9IGV2ZW50RG9jLmRvY3VtZW50RWxlbWVudDsKCQkJCQlib2R5ID0gZXZlbnREb2MuYm9keTsKCgkJCQkJZXZlbnQucGFnZVggPSBvcmlnaW5hbC5jbGllbnRYICsKCQkJCQkJKCBkb2MgJiYgZG9jLnNjcm9sbExlZnQgfHwgYm9keSAmJiBib2R5LnNjcm9sbExlZnQgfHwgMCApIC0KCQkJCQkJKCBkb2MgJiYgZG9jLmNsaWVudExlZnQgfHwgYm9keSAmJiBib2R5LmNsaWVudExlZnQgfHwgMCApOwoJCQkJCWV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArCgkJCQkJCSggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtCgkJCQkJCSggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTsKCQkJCX0KCgkJCQkvLyBBZGQgcmVsYXRlZFRhcmdldCwgaWYgbmVjZXNzYXJ5CgkJCQlpZiAoICFldmVudC5yZWxhdGVkVGFyZ2V0ICYmIGZyb21FbGVtZW50ICkgewoJCQkJCWV2ZW50LnJlbGF0ZWRUYXJnZXQgPSBmcm9tRWxlbWVudCA9PT0gZXZlbnQudGFyZ2V0ID8KCQkJCQkJb3JpZ2luYWwudG9FbGVtZW50IDoKCQkJCQkJZnJvbUVsZW1lbnQ7CgkJCQl9CgoJCQkJLy8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodAoJCQkJLy8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXQKCQkJCWlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkgewoJCQkJCWV2ZW50LndoaWNoID0gKCBidXR0b24gJiAxID8gMSA6ICggYnV0dG9uICYgMiA/IDMgOiAoIGJ1dHRvbiAmIDQgPyAyIDogMCApICkgKTsKCQkJCX0KCgkJCQlyZXR1cm4gZXZlbnQ7CgkJCX0KCQl9LAoKCQlzcGVjaWFsOiB7CgkJCWxvYWQ6IHsKCgkJCQkvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkCgkJCQlub0J1YmJsZTogdHJ1ZQoJCQl9LAoJCQlmb2N1czogewoKCQkJCS8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdAoJCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQl0aGlzLmZvY3VzKCk7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCQkJCS8vIElmIHdlIGVycm9yIG9uIGZvY3VzIHRvIGhpZGRlbiBlbGVtZW50ICgjMTQ4NiwgIzEyNTE4KSwKCQkJCQkJCS8vIGxldCAudHJpZ2dlcigpIHJ1biB0aGUgaGFuZGxlcnMKCQkJCQkJfQoJCQkJCX0KCQkJCX0sCgkJCQlkZWxlZ2F0ZVR5cGU6ICJmb2N1c2luIgoJCQl9LAoJCQlibHVyOiB7CgkJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkgewoJCQkJCQl0aGlzLmJsdXIoKTsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0sCgkJCQlkZWxlZ2F0ZVR5cGU6ICJmb2N1c291dCIKCQkJfSwKCQkJY2xpY2s6IHsKCgkJCQkvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodAoJCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJpbnB1dCIgKSAmJiB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgJiYgdGhpcy5jbGljayApIHsKCQkJCQkJdGhpcy5jbGljaygpOwoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfSwKCgkJCQkvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3MKCQkJCV9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCAiYSIgKTsKCQkJCX0KCQkJfSwKCgkJCWJlZm9yZXVubG9hZDogewoJCQkJcG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkJCS8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArCgkJCQkJLy8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LgoJCQkJCWlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHsKCQkJCQkJZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9LAoKCQkvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUKCQlzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkgewoJCQl2YXIgZSA9IGpRdWVyeS5leHRlbmQoCgkJCQluZXcgalF1ZXJ5LkV2ZW50KCksCgkJCQlldmVudCwKCQkJCXsKCQkJCQl0eXBlOiB0eXBlLAoJCQkJCWlzU2ltdWxhdGVkOiB0cnVlCgoJCQkJCS8vIFByZXZpb3VzbHksIGBvcmlnaW5hbEV2ZW50OiB7fWAgd2FzIHNldCBoZXJlLCBzbyBzdG9wUHJvcGFnYXRpb24gY2FsbAoJCQkJCS8vIHdvdWxkIG5vdCBiZSB0cmlnZ2VyZWQgb24gZG9ub3IgZXZlbnQsIHNpbmNlIGluIG91ciBvd24KCQkJCQkvLyBqUXVlcnkuZXZlbnQuc3RvcFByb3BhZ2F0aW9uIGZ1bmN0aW9uIHdlIGhhZCBhIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YKCQkJCQkvLyBvcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbiBtZXRob2QsIHNvLCBjb25zZXF1ZW50bHkgaXQgd291bGQgYmUgYSBub29wLgoJCQkJCS8vCgkJCQkJLy8gR3VhcmQgZm9yIHNpbXVsYXRlZCBldmVudHMgd2FzIG1vdmVkIHRvIGpRdWVyeS5ldmVudC5zdG9wUHJvcGFnYXRpb24gZnVuY3Rpb24KCQkJCQkvLyBzaW5jZSBgb3JpZ2luYWxFdmVudGAgc2hvdWxkIHBvaW50IHRvIHRoZSBvcmlnaW5hbCBldmVudCBmb3IgdGhlCgkJCQkJLy8gY29uc3RhbmN5IHdpdGggb3RoZXIgZXZlbnRzIGFuZCBmb3IgbW9yZSBmb2N1c2VkIGxvZ2ljCgkJCQl9CgkJCSk7CgoJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApOwoKCQkJaWYgKCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0KCX07CgoJalF1ZXJ5LnJlbW92ZUV2ZW50ID0gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciA/CgkJZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHsKCgkJCS8vIFRoaXMgImlmIiBpcyBuZWVkZWQgZm9yIHBsYWluIG9iamVjdHMKCQkJaWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7CgkJCQllbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApOwoJCQl9CgkJfSA6CgkJZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHsKCQkJdmFyIG5hbWUgPSAib24iICsgdHlwZTsKCgkJCWlmICggZWxlbS5kZXRhY2hFdmVudCApIHsKCgkJCQkvLyAjODU0NSwgIzcwNTQsIHByZXZlbnRpbmcgbWVtb3J5IGxlYWtzIGZvciBjdXN0b20gZXZlbnRzIGluIElFNi04CgkJCQkvLyBkZXRhY2hFdmVudCBuZWVkZWQgcHJvcGVydHkgb24gZWxlbWVudCwgYnkgbmFtZSBvZiB0aGF0IGV2ZW50LAoJCQkJLy8gdG8gcHJvcGVybHkgZXhwb3NlIGl0IHRvIEdDCgkJCQlpZiAoIHR5cGVvZiBlbGVtWyBuYW1lIF0gPT09ICJ1bmRlZmluZWQiICkgewoJCQkJCWVsZW1bIG5hbWUgXSA9IG51bGw7CgkJCQl9CgoJCQkJZWxlbS5kZXRhY2hFdmVudCggbmFtZSwgaGFuZGxlICk7CgkJCX0KCQl9OwoKCWpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkgewoKCQkvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmQKCQlpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQgKSApIHsKCQkJcmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTsKCQl9CgoJCS8vIEV2ZW50IG9iamVjdAoJCWlmICggc3JjICYmIHNyYy50eXBlICkgewoJCQl0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7CgkJCXRoaXMudHlwZSA9IHNyYy50eXBlOwoKCQkJLy8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWQKCQkJLy8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuCgkJCXRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHwKCQkJCQlzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmCgoJCQkJCS8vIFN1cHBvcnQ6IElFIDwgOSwgQW5kcm9pZCA8IDQuMAoJCQkJCXNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgPwoJCQkJcmV0dXJuVHJ1ZSA6CgkJCQlyZXR1cm5GYWxzZTsKCgkJLy8gRXZlbnQgdHlwZQoJCX0gZWxzZSB7CgkJCXRoaXMudHlwZSA9IHNyYzsKCQl9CgoJCS8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0CgkJaWYgKCBwcm9wcyApIHsKCQkJalF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTsKCQl9CgoJCS8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lCgkJdGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBqUXVlcnkubm93KCk7CgoJCS8vIE1hcmsgaXQgYXMgZml4ZWQKCQl0aGlzWyBqUXVlcnkuZXhwYW5kbyBdID0gdHJ1ZTsKCX07CgoJLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nCgkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWwKCWpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7CgkJY29uc3RydWN0b3I6IGpRdWVyeS5FdmVudCwKCQlpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLAoJCWlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSwKCQlpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCgoJCXByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsKCQkJdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CgoJCQl0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7CgkJCWlmICggIWUgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIElmIHByZXZlbnREZWZhdWx0IGV4aXN0cywgcnVuIGl0IG9uIHRoZSBvcmlnaW5hbCBldmVudAoJCQlpZiAoIGUucHJldmVudERlZmF1bHQgKSB7CgkJCQllLnByZXZlbnREZWZhdWx0KCk7CgoJCQkvLyBTdXBwb3J0OiBJRQoJCQkvLyBPdGhlcndpc2Ugc2V0IHRoZSByZXR1cm5WYWx1ZSBwcm9wZXJ0eSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdG8gZmFsc2UKCQkJfSBlbHNlIHsKCQkJCWUucmV0dXJuVmFsdWUgPSBmYWxzZTsKCQkJfQoJCX0sCgkJc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsKCQkJdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CgoJCQl0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTsKCgkJCWlmICggIWUgfHwgdGhpcy5pc1NpbXVsYXRlZCApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gSWYgc3RvcFByb3BhZ2F0aW9uIGV4aXN0cywgcnVuIGl0IG9uIHRoZSBvcmlnaW5hbCBldmVudAoJCQlpZiAoIGUuc3RvcFByb3BhZ2F0aW9uICkgewoJCQkJZS5zdG9wUHJvcGFnYXRpb24oKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUUKCQkJLy8gU2V0IHRoZSBjYW5jZWxCdWJibGUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIHRydWUKCQkJZS5jYW5jZWxCdWJibGUgPSB0cnVlOwoJCX0sCgkJc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsKCQkJdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CgoJCQl0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTsKCgkJCWlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHsKCQkJCWUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgkJCX0KCgkJCXRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7CgkJfQoJfTsKCgkvLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3MKCS8vIHNvIHRoYXQgZXZlbnQgZGVsZWdhdGlvbiB3b3JrcyBpbiBqUXVlcnkuCgkvLyBEbyB0aGUgc2FtZSBmb3IgcG9pbnRlcmVudGVyL3BvaW50ZXJsZWF2ZSBhbmQgcG9pbnRlcm92ZXIvcG9pbnRlcm91dAoJLy8KCS8vIFN1cHBvcnQ6IFNhZmFyaSA3IG9ubHkKCS8vIFNhZmFyaSBzZW5kcyBtb3VzZWVudGVyIHRvbyBvZnRlbjsgc2VlOgoJLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3MDI1OAoJLy8gZm9yIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgYnVnIChpdCBleGlzdGVkIGluIG9sZGVyIENocm9tZSB2ZXJzaW9ucyBhcyB3ZWxsKS4KCWpRdWVyeS5lYWNoKCB7CgkJbW91c2VlbnRlcjogIm1vdXNlb3ZlciIsCgkJbW91c2VsZWF2ZTogIm1vdXNlb3V0IiwKCQlwb2ludGVyZW50ZXI6ICJwb2ludGVyb3ZlciIsCgkJcG9pbnRlcmxlYXZlOiAicG9pbnRlcm91dCIKCX0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7CgkJalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHsKCQkJZGVsZWdhdGVUeXBlOiBmaXgsCgkJCWJpbmRUeXBlOiBmaXgsCgoJCQloYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXZhciByZXQsCgkJCQkJdGFyZ2V0ID0gdGhpcywKCQkJCQlyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCwKCQkJCQloYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7CgoJCQkJLy8gRm9yIG1vdXNlZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC4KCQkJCS8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93CgkJCQlpZiAoICFyZWxhdGVkIHx8ICggcmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApICkgKSB7CgkJCQkJZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTsKCQkJCQlyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQkJZXZlbnQudHlwZSA9IGZpeDsKCQkJCX0KCQkJCXJldHVybiByZXQ7CgkJCX0KCQl9OwoJfSApOwoKCS8vIElFIHN1Ym1pdCBkZWxlZ2F0aW9uCglpZiAoICFzdXBwb3J0LnN1Ym1pdCApIHsKCgkJalF1ZXJ5LmV2ZW50LnNwZWNpYWwuc3VibWl0ID0gewoJCQlzZXR1cDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gT25seSBuZWVkIHRoaXMgZm9yIGRlbGVnYXRlZCBmb3JtIHN1Ym1pdCBldmVudHMKCQkJCWlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiZm9ybSIgKSApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgoJCQkJLy8gTGF6eS1hZGQgYSBzdWJtaXQgaGFuZGxlciB3aGVuIGEgZGVzY2VuZGFudCBmb3JtIG1heSBwb3RlbnRpYWxseSBiZSBzdWJtaXR0ZWQKCQkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLCBmdW5jdGlvbiggZSApIHsKCgkJCQkJLy8gTm9kZSBuYW1lIGNoZWNrIGF2b2lkcyBhIFZNTC1yZWxhdGVkIGNyYXNoIGluIElFICgjOTgwNykKCQkJCQl2YXIgZWxlbSA9IGUudGFyZ2V0LAoJCQkJCQlmb3JtID0galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaW5wdXQiICkgfHwgalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiYnV0dG9uIiApID8KCgkJCQkJCQkvLyBTdXBwb3J0OiBJRSA8PTgKCQkJCQkJCS8vIFdlIHVzZSBqUXVlcnkucHJvcCBpbnN0ZWFkIG9mIGVsZW0uZm9ybQoJCQkJCQkJLy8gdG8gYWxsb3cgZml4aW5nIHRoZSBJRTggZGVsZWdhdGVkIHN1Ym1pdCBpc3N1ZSAoZ2gtMjMzMikKCQkJCQkJCS8vIGJ5IDNyZCBwYXJ0eSBwb2x5ZmlsbHMvd29ya2Fyb3VuZHMuCgkJCQkJCQlqUXVlcnkucHJvcCggZWxlbSwgImZvcm0iICkgOgoJCQkJCQkJdW5kZWZpbmVkOwoKCQkJCQlpZiAoIGZvcm0gJiYgIWpRdWVyeS5fZGF0YSggZm9ybSwgInN1Ym1pdCIgKSApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggZm9ybSwgInN1Ym1pdC5fc3VibWl0IiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJZXZlbnQuX3N1Ym1pdEJ1YmJsZSA9IHRydWU7CgkJCQkJCX0gKTsKCQkJCQkJalF1ZXJ5Ll9kYXRhKCBmb3JtLCAic3VibWl0IiwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0gKTsKCgkJCQkvLyByZXR1cm4gdW5kZWZpbmVkIHNpbmNlIHdlIGRvbid0IG5lZWQgYW4gZXZlbnQgbGlzdGVuZXIKCQkJfSwKCgkJCXBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkgewoKCQkJCS8vIElmIGZvcm0gd2FzIHN1Ym1pdHRlZCBieSB0aGUgdXNlciwgYnViYmxlIHRoZSBldmVudCB1cCB0aGUgdHJlZQoJCQkJaWYgKCBldmVudC5fc3VibWl0QnViYmxlICkgewoJCQkJCWRlbGV0ZSBldmVudC5fc3VibWl0QnViYmxlOwoJCQkJCWlmICggdGhpcy5wYXJlbnROb2RlICYmICFldmVudC5pc1RyaWdnZXIgKSB7CgkJCQkJCWpRdWVyeS5ldmVudC5zaW11bGF0ZSggInN1Ym1pdCIsIHRoaXMucGFyZW50Tm9kZSwgZXZlbnQgKTsKCQkJCQl9CgkJCQl9CgkJCX0sCgoJCQl0ZWFyZG93bjogZnVuY3Rpb24oKSB7CgoJCQkJLy8gT25seSBuZWVkIHRoaXMgZm9yIGRlbGVnYXRlZCBmb3JtIHN1Ym1pdCBldmVudHMKCQkJCWlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiZm9ybSIgKSApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgoJCQkJLy8gUmVtb3ZlIGRlbGVnYXRlZCBoYW5kbGVyczsgY2xlYW5EYXRhIGV2ZW50dWFsbHkgcmVhcHMgc3VibWl0IGhhbmRsZXJzIGF0dGFjaGVkIGFib3ZlCgkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCAiLl9zdWJtaXQiICk7CgkJCX0KCQl9OwoJfQoKCS8vIElFIGNoYW5nZSBkZWxlZ2F0aW9uIGFuZCBjaGVja2JveC9yYWRpbyBmaXgKCWlmICggIXN1cHBvcnQuY2hhbmdlICkgewoKCQlqUXVlcnkuZXZlbnQuc3BlY2lhbC5jaGFuZ2UgPSB7CgoJCQlzZXR1cDogZnVuY3Rpb24oKSB7CgoJCQkJaWYgKCByZm9ybUVsZW1zLnRlc3QoIHRoaXMubm9kZU5hbWUgKSApIHsKCgkJCQkJLy8gSUUgZG9lc24ndCBmaXJlIGNoYW5nZSBvbiBhIGNoZWNrL3JhZGlvIHVudGlsIGJsdXI7IHRyaWdnZXIgaXQgb24gY2xpY2sKCQkJCQkvLyBhZnRlciBhIHByb3BlcnR5Y2hhbmdlLiBFYXQgdGhlIGJsdXItY2hhbmdlIGluIHNwZWNpYWwuY2hhbmdlLmhhbmRsZS4KCQkJCQkvLyBUaGlzIHN0aWxsIGZpcmVzIG9uY2hhbmdlIGEgc2Vjb25kIHRpbWUgZm9yIGNoZWNrL3JhZGlvIGFmdGVyIGJsdXIuCgkJCQkJaWYgKCB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgfHwgdGhpcy50eXBlID09PSAicmFkaW8iICkgewoJCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCAicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUgPT09ICJjaGVja2VkIiApIHsKCQkJCQkJCQl0aGlzLl9qdXN0Q2hhbmdlZCA9IHRydWU7CgkJCQkJCQl9CgkJCQkJCX0gKTsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgImNsaWNrLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlpZiAoIHRoaXMuX2p1c3RDaGFuZ2VkICYmICFldmVudC5pc1RyaWdnZXIgKSB7CgkJCQkJCQkJdGhpcy5fanVzdENoYW5nZWQgPSBmYWxzZTsKCQkJCQkJCX0KCgkJCQkJCQkvLyBBbGxvdyB0cmlnZ2VyZWQsIHNpbXVsYXRlZCBjaGFuZ2UgZXZlbnRzICgjMTE1MDApCgkJCQkJCQlqUXVlcnkuZXZlbnQuc2ltdWxhdGUoICJjaGFuZ2UiLCB0aGlzLCBldmVudCApOwoJCQkJCQl9ICk7CgkJCQkJfQoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCgkJCQkvLyBEZWxlZ2F0ZWQgZXZlbnQ7IGxhenktYWRkIGEgY2hhbmdlIGhhbmRsZXIgb24gZGVzY2VuZGFudCBpbnB1dHMKCQkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIiwgZnVuY3Rpb24oIGUgKSB7CgkJCQkJdmFyIGVsZW0gPSBlLnRhcmdldDsKCgkJCQkJaWYgKCByZm9ybUVsZW1zLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJiAhalF1ZXJ5Ll9kYXRhKCBlbGVtLCAiY2hhbmdlIiApICkgewoJCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCBlbGVtLCAiY2hhbmdlLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlpZiAoIHRoaXMucGFyZW50Tm9kZSAmJiAhZXZlbnQuaXNTaW11bGF0ZWQgJiYgIWV2ZW50LmlzVHJpZ2dlciApIHsKCQkJCQkJCQlqUXVlcnkuZXZlbnQuc2ltdWxhdGUoICJjaGFuZ2UiLCB0aGlzLnBhcmVudE5vZGUsIGV2ZW50ICk7CgkJCQkJCQl9CgkJCQkJCX0gKTsKCQkJCQkJalF1ZXJ5Ll9kYXRhKCBlbGVtLCAiY2hhbmdlIiwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0gKTsKCQkJfSwKCgkJCWhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdmFyIGVsZW0gPSBldmVudC50YXJnZXQ7CgoJCQkJLy8gU3dhbGxvdyBuYXRpdmUgY2hhbmdlIGV2ZW50cyBmcm9tIGNoZWNrYm94L3JhZGlvLCB3ZSBhbHJlYWR5IHRyaWdnZXJlZCB0aGVtIGFib3ZlCgkJCQlpZiAoIHRoaXMgIT09IGVsZW0gfHwgZXZlbnQuaXNTaW11bGF0ZWQgfHwgZXZlbnQuaXNUcmlnZ2VyIHx8CgkJCQkJKCBlbGVtLnR5cGUgIT09ICJyYWRpbyIgJiYgZWxlbS50eXBlICE9PSAiY2hlY2tib3giICkgKSB7CgoJCQkJCXJldHVybiBldmVudC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQl9CgkJCX0sCgoJCQl0ZWFyZG93bjogZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCAiLl9jaGFuZ2UiICk7CgoJCQkJcmV0dXJuICFyZm9ybUVsZW1zLnRlc3QoIHRoaXMubm9kZU5hbWUgKTsKCQkJfQoJCX07Cgl9CgoJLy8gU3VwcG9ydDogRmlyZWZveAoJLy8gRmlyZWZveCBkb2Vzbid0IGhhdmUgZm9jdXMoaW4gfCBvdXQpIGV2ZW50cwoJLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02ODc3ODcKCS8vCgkvLyBTdXBwb3J0OiBDaHJvbWUsIFNhZmFyaQoJLy8gZm9jdXMoaW4gfCBvdXQpIGV2ZW50cyBmaXJlIGFmdGVyIGZvY3VzICYgYmx1ciBldmVudHMsCgkvLyB3aGljaCBpcyBzcGVjIHZpb2xhdGlvbiAtIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWZvY3VzZXZlbnQtZXZlbnQtb3JkZXIKCS8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9jb2RlLg==", "base64"));
  res.write(new Buffer("Z29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ5ODU3CglpZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7CgkJalF1ZXJ5LmVhY2goIHsgZm9jdXM6ICJmb2N1c2luIiwgYmx1cjogImZvY3Vzb3V0IiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkgewoKCQkJLy8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXQKCQkJdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7CgkJCX07CgoJCQlqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7CgkJCQlzZXR1cDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAoJCQkJCQlhdHRhY2hlcyA9IGpRdWVyeS5fZGF0YSggZG9jLCBmaXggKTsKCgkJCQkJaWYgKCAhYXR0YWNoZXMgKSB7CgkJCQkJCWRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7CgkJCQkJfQoJCQkJCWpRdWVyeS5fZGF0YSggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApOwoJCQkJfSwKCQkJCXRlYXJkb3duOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsCgkJCQkJCWF0dGFjaGVzID0galF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCApIC0gMTsKCgkJCQkJaWYgKCAhYXR0YWNoZXMgKSB7CgkJCQkJCWRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7CgkJCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZG9jLCBmaXggKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlqUXVlcnkuX2RhdGEoIGRvYywgZml4LCBhdHRhY2hlcyApOwoJCQkJCX0KCQkJCX0KCQkJfTsKCQl9ICk7Cgl9CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoKCQlvbjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7CgkJCXJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApOwoJCX0sCgkJb25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7CgkJfSwKCQlvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkgewoJCQl2YXIgaGFuZGxlT2JqLCB0eXBlOwoJCQlpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHsKCgkJCQkvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50CgkJCQloYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7CgkJCQlqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKAoJCQkJCWhhbmRsZU9iai5uYW1lc3BhY2UgPwoJCQkJCQloYW5kbGVPYmoub3JpZ1R5cGUgKyAiLiIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDoKCQkJCQkJaGFuZGxlT2JqLm9yaWdUeXBlLAoJCQkJCWhhbmRsZU9iai5zZWxlY3RvciwKCQkJCQloYW5kbGVPYmouaGFuZGxlcgoJCQkJKTsKCQkJCXJldHVybiB0aGlzOwoJCQl9CgkJCWlmICggdHlwZW9mIHR5cGVzID09PSAib2JqZWN0IiApIHsKCgkJCQkvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKQoJCQkJZm9yICggdHlwZSBpbiB0eXBlcyApIHsKCQkJCQl0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTsKCQkJCX0KCQkJCXJldHVybiB0aGlzOwoJCQl9CgkJCWlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gImZ1bmN0aW9uIiApIHsKCgkJCQkvLyAoIHR5cGVzIFssIGZuXSApCgkJCQlmbiA9IHNlbGVjdG9yOwoJCQkJc2VsZWN0b3IgPSB1bmRlZmluZWQ7CgkJCX0KCQkJaWYgKCBmbiA9PT0gZmFsc2UgKSB7CgkJCQlmbiA9IHJldHVybkZhbHNlOwoJCQl9CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgdHlwZXMsIGZuLCBzZWxlY3RvciApOwoJCQl9ICk7CgkJfSwKCgkJdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTsKCQkJfSApOwoJCX0sCgkJdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkgewoJCQl2YXIgZWxlbSA9IHRoaXNbIDAgXTsKCQkJaWYgKCBlbGVtICkgewoJCQkJcmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7CgkJCX0KCQl9Cgl9ICk7CgoKCXZhciByaW5saW5lalF1ZXJ5ID0gLyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZywKCQlybm9zaGltY2FjaGUgPSBuZXcgUmVnRXhwKCAiPCg/OiIgKyBub2RlTmFtZXMgKyAiKVtcXHMvPl0iLCAiaSIgKSwKCQlyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6LV0rKVtePl0qKVwvPi9naSwKCgkJLy8gU3VwcG9ydDogSUUgMTAtMTEsIEVkZ2UgMTAyNDArCgkJLy8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy4KCQkvLyBTZWUgaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy8xNzM2NTEyLwoJCXJub0lubmVyaHRtbCA9IC88c2NyaXB0fDxzdHlsZXw8bGluay9pLAoKCQkvLyBjaGVja2VkPSJjaGVja2VkIiBvciBjaGVja2VkCgkJcmNoZWNrZWQgPSAvY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSwKCQlyc2NyaXB0VHlwZU1hc2tlZCA9IC9edHJ1ZVwvKC4qKS8sCgkJcmNsZWFuU2NyaXB0ID0gL15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLAoJCXNhZmVGcmFnbWVudCA9IGNyZWF0ZVNhZmVGcmFnbWVudCggZG9jdW1lbnQgKSwKCQlmcmFnbWVudERpdiA9IHNhZmVGcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCS8vIFN1cHBvcnQ6IElFPDgKCS8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keQoJZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkgewoJCXJldHVybiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJ0YWJsZSIgKSAmJgoJCQlqUXVlcnkubm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgIT09IDExID8gY29udGVudCA6IGNvbnRlbnQuZmlyc3RDaGlsZCwgInRyIiApID8KCgkJCWVsZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJ0Ym9keSIgKVsgMCBdIHx8CgkJCQllbGVtLmFwcGVuZENoaWxkKCBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCggInRib2R5IiApICkgOgoJCQllbGVtOwoJfQoKCS8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb24KCWZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7CgkJZWxlbS50eXBlID0gKCBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCAidHlwZSIgKSAhPT0gbnVsbCApICsgIi8iICsgZWxlbS50eXBlOwoJCXJldHVybiBlbGVtOwoJfQoJZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHsKCQl2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTsKCQlpZiAoIG1hdGNoICkgewoJCQllbGVtLnR5cGUgPSBtYXRjaFsgMSBdOwoJCX0gZWxzZSB7CgkJCWVsZW0ucmVtb3ZlQXR0cmlidXRlKCAidHlwZSIgKTsKCQl9CgkJcmV0dXJuIGVsZW07Cgl9CgoJZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHsKCQlpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgfHwgIWpRdWVyeS5oYXNEYXRhKCBzcmMgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIHR5cGUsIGksIGwsCgkJCW9sZERhdGEgPSBqUXVlcnkuX2RhdGEoIHNyYyApLAoJCQljdXJEYXRhID0galF1ZXJ5Ll9kYXRhKCBkZXN0LCBvbGREYXRhICksCgkJCWV2ZW50cyA9IG9sZERhdGEuZXZlbnRzOwoKCQlpZiAoIGV2ZW50cyApIHsKCQkJZGVsZXRlIGN1ckRhdGEuaGFuZGxlOwoJCQljdXJEYXRhLmV2ZW50cyA9IHt9OwoKCQkJZm9yICggdHlwZSBpbiBldmVudHMgKSB7CgkJCQlmb3IgKCBpID0gMCwgbCA9IGV2ZW50c1sgdHlwZSBdLmxlbmd0aDsgaSA8IGw7IGkrKyApIHsKCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIG1ha2UgdGhlIGNsb25lZCBwdWJsaWMgZGF0YSBvYmplY3QgYSBjb3B5IGZyb20gdGhlIG9yaWdpbmFsCgkJaWYgKCBjdXJEYXRhLmRhdGEgKSB7CgkJCWN1ckRhdGEuZGF0YSA9IGpRdWVyeS5leHRlbmQoIHt9LCBjdXJEYXRhLmRhdGEgKTsKCQl9Cgl9CgoJZnVuY3Rpb24gZml4Q2xvbmVOb2RlSXNzdWVzKCBzcmMsIGRlc3QgKSB7CgkJdmFyIG5vZGVOYW1lLCBlLCBkYXRhOwoKCQkvLyBXZSBkbyBub3QgbmVlZCB0byBkbyBhbnl0aGluZyBmb3Igbm9uLUVsZW1lbnRzCgkJaWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkgewoJCQlyZXR1cm47CgkJfQoKCQlub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCgkJLy8gSUU2LTggY29waWVzIGV2ZW50cyBib3VuZCB2aWEgYXR0YWNoRXZlbnQgd2hlbiB1c2luZyBjbG9uZU5vZGUuCgkJaWYgKCAhc3VwcG9ydC5ub0Nsb25lRXZlbnQgJiYgZGVzdFsgalF1ZXJ5LmV4cGFuZG8gXSApIHsKCQkJZGF0YSA9IGpRdWVyeS5fZGF0YSggZGVzdCApOwoKCQkJZm9yICggZSBpbiBkYXRhLmV2ZW50cyApIHsKCQkJCWpRdWVyeS5yZW1vdmVFdmVudCggZGVzdCwgZSwgZGF0YS5oYW5kbGUgKTsKCQkJfQoKCQkJLy8gRXZlbnQgZGF0YSBnZXRzIHJlZmVyZW5jZWQgaW5zdGVhZCBvZiBjb3BpZWQgaWYgdGhlIGV4cGFuZG8gZ2V0cyBjb3BpZWQgdG9vCgkJCWRlc3QucmVtb3ZlQXR0cmlidXRlKCBqUXVlcnkuZXhwYW5kbyApOwoJCX0KCgkJLy8gSUUgYmxhbmtzIGNvbnRlbnRzIHdoZW4gY2xvbmluZyBzY3JpcHRzLCBhbmQgdHJpZXMgdG8gZXZhbHVhdGUgbmV3bHktc2V0IHRleHQKCQlpZiAoIG5vZGVOYW1lID09PSAic2NyaXB0IiAmJiBkZXN0LnRleHQgIT09IHNyYy50ZXh0ICkgewoJCQlkaXNhYmxlU2NyaXB0KCBkZXN0ICkudGV4dCA9IHNyYy50ZXh0OwoJCQlyZXN0b3JlU2NyaXB0KCBkZXN0ICk7CgoJCS8vIElFNi0xMCBpbXByb3Blcmx5IGNsb25lcyBjaGlsZHJlbiBvZiBvYmplY3QgZWxlbWVudHMgdXNpbmcgY2xhc3NpZC4KCQkvLyBJRTEwIHRocm93cyBOb01vZGlmaWNhdGlvbkFsbG93ZWRFcnJvciBpZiBwYXJlbnQgaXMgbnVsbCwgIzEyMTMyLgoJCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAib2JqZWN0IiApIHsKCQkJaWYgKCBkZXN0LnBhcmVudE5vZGUgKSB7CgkJCQlkZXN0Lm91dGVySFRNTCA9IHNyYy5vdXRlckhUTUw7CgkJCX0KCgkJCS8vIFRoaXMgcGF0aCBhcHBlYXJzIHVuYXZvaWRhYmxlIGZvciBJRTkuIFdoZW4gY2xvbmluZyBhbiBvYmplY3QKCQkJLy8gZWxlbWVudCBpbiBJRTksIHRoZSBvdXRlckhUTUwgc3RyYXRlZ3kgYWJvdmUgaXMgbm90IHN1ZmZpY2llbnQuCgkJCS8vIElmIHRoZSBzcmMgaGFzIGlubmVySFRNTCBhbmQgdGhlIGRlc3RpbmF0aW9uIGRvZXMgbm90LAoJCQkvLyBjb3B5IHRoZSBzcmMuaW5uZXJIVE1MIGludG8gdGhlIGRlc3QuaW5uZXJIVE1MLiAjMTAzMjQKCQkJaWYgKCBzdXBwb3J0Lmh0bWw1Q2xvbmUgJiYgKCBzcmMuaW5uZXJIVE1MICYmICFqUXVlcnkudHJpbSggZGVzdC5pbm5lckhUTUwgKSApICkgewoJCQkJZGVzdC5pbm5lckhUTUwgPSBzcmMuaW5uZXJIVE1MOwoJCQl9CgoJCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAiaW5wdXQiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7CgoJCQkvLyBJRTYtOCBmYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94CgkJCS8vIG9yIHJhZGlvIGJ1dHRvbi4gV29yc2UsIElFNi03IGZhaWwgdG8gZ2l2ZSB0aGUgY2xvbmVkIGVsZW1lbnQKCQkJLy8gYSBjaGVja2VkIGFwcGVhcmFuY2UgaWYgdGhlIGRlZmF1bHRDaGVja2VkIHZhbHVlIGlzbid0IGFsc28gc2V0CgoJCQlkZXN0LmRlZmF1bHRDaGVja2VkID0gZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7CgoJCQkvLyBJRTYtNyBnZXQgY29uZnVzZWQgYW5kIGVuZCB1cCBzZXR0aW5nIHRoZSB2YWx1ZSBvZiBhIGNsb25lZAoJCQkvLyBjaGVja2JveC9yYWRpbyBidXR0b24gdG8gYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgIm9uIgoJCQlpZiAoIGRlc3QudmFsdWUgIT09IHNyYy52YWx1ZSApIHsKCQkJCWRlc3QudmFsdWUgPSBzcmMudmFsdWU7CgkJCX0KCgkJLy8gSUU2LTggZmFpbHMgdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBvcHRpb24gdG8gdGhlIGRlZmF1bHQgc2VsZWN0ZWQKCQkvLyBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9ucwoJCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAib3B0aW9uIiApIHsKCQkJZGVzdC5kZWZhdWx0U2VsZWN0ZWQgPSBkZXN0LnNlbGVjdGVkID0gc3JjLmRlZmF1bHRTZWxlY3RlZDsKCgkJLy8gSUU2LTggZmFpbHMgdG8gc2V0IHRoZSBkZWZhdWx0VmFsdWUgdG8gdGhlIGNvcnJlY3QgdmFsdWUgd2hlbgoJCS8vIGNsb25pbmcgb3RoZXIgdHlwZXMgb2YgaW5wdXQgZmllbGRzCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgfHwgbm9kZU5hbWUgPT09ICJ0ZXh0YXJlYSIgKSB7CgkJCWRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTsKCQl9Cgl9CgoJZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkgewoKCQkvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzCgkJYXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTsKCgkJdmFyIGZpcnN0LCBub2RlLCBoYXNTY3JpcHRzLAoJCQlzY3JpcHRzLCBkb2MsIGZyYWdtZW50LAoJCQlpID0gMCwKCQkJbCA9IGNvbGxlY3Rpb24ubGVuZ3RoLAoJCQlpTm9DbG9uZSA9IGwgLSAxLAoJCQl2YWx1ZSA9IGFyZ3NbIDAgXSwKCQkJaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApOwoKCQkvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXQKCQlpZiAoIGlzRnVuY3Rpb24gfHwKCQkJCSggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJgoJCQkJCSFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkgewoJCQlyZXR1cm4gY29sbGVjdGlvbi5lYWNoKCBmdW5jdGlvbiggaW5kZXggKSB7CgkJCQl2YXIgc2VsZiA9IGNvbGxlY3Rpb24uZXEoIGluZGV4ICk7CgkJCQlpZiAoIGlzRnVuY3Rpb24gKSB7CgkJCQkJYXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7CgkJCQl9CgkJCQlkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTsKCQkJfSApOwoJCX0KCgkJaWYgKCBsICkgewoJCQlmcmFnbWVudCA9IGJ1aWxkRnJhZ21lbnQoIGFyZ3MsIGNvbGxlY3Rpb25bIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgY29sbGVjdGlvbiwgaWdub3JlZCApOwoJCQlmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7CgoJCQlpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkgewoJCQkJZnJhZ21lbnQgPSBmaXJzdDsKCQkJfQoKCQkJLy8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrCgkJCWlmICggZmlyc3QgfHwgaWdub3JlZCApIHsKCQkJCXNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCAic2NyaXB0IiApLCBkaXNhYmxlU2NyaXB0ICk7CgkJCQloYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7CgoJCQkJLy8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbQoJCQkJLy8gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwCgkJCQkvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLgoJCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoJCQkJCW5vZGUgPSBmcmFnbWVudDsKCgkJCQkJaWYgKCBpICE9PSBpTm9DbG9uZSApIHsKCQkJCQkJbm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApOwoKCQkJCQkJLy8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvbgoJCQkJCQlpZiAoIGhhc1NjcmlwdHMgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIFBoYW50b21KUzwyCgkJCQkJCQkvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0CgkJCQkJCQlqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgInNjcmlwdCIgKSApOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQljYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTsKCQkJCX0KCgkJCQlpZiAoIGhhc1NjcmlwdHMgKSB7CgkJCQkJZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDsKCgkJCQkJLy8gUmVlbmFibGUgc2NyaXB0cwoJCQkJCWpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTsKCgkJCQkJLy8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvbgoJCQkJCWZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkgewoJCQkJCQlub2RlID0gc2NyaXB0c1sgaSBdOwoJCQkJCQlpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCAiIiApICYmCgkJCQkJCQkhalF1ZXJ5Ll9kYXRhKCBub2RlLCAiZ2xvYmFsRXZhbCIgKSAmJgoJCQkJCQkJalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHsKCgkJCQkJCQlpZiAoIG5vZGUuc3JjICkgewoKCQkJCQkJCQkvLyBPcHRpb25hbCBBSkFYIGRlcGVuZGVuY3ksIGJ1dCB3b24ndCBydW4gc2NyaXB0cyBpZiBub3QgcHJlc2VudAoJCQkJCQkJCWlmICggalF1ZXJ5Ll9ldmFsVXJsICkgewoJCQkJCQkJCQlqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlqUXVlcnkuZ2xvYmFsRXZhbCgKCQkJCQkJCQkJKCBub2RlLnRleHQgfHwgbm9kZS50ZXh0Q29udGVudCB8fCBub2RlLmlubmVySFRNTCB8fCAiIiApCgkJCQkJCQkJCQkucmVwbGFjZSggcmNsZWFuU2NyaXB0LCAiIiApCgkJCQkJCQkJKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBGaXggIzExODA5OiBBdm9pZCBsZWFraW5nIG1lbW9yeQoJCQkJZnJhZ21lbnQgPSBmaXJzdCA9IG51bGw7CgkJCX0KCQl9CgoJCXJldHVybiBjb2xsZWN0aW9uOwoJfQoKCWZ1bmN0aW9uIHJlbW92ZSggZWxlbSwgc2VsZWN0b3IsIGtlZXBEYXRhICkgewoJCXZhciBub2RlLAoJCQllbGVtcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sCgkJCWkgPSAwOwoKCQlmb3IgKCA7ICggbm9kZSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7CgoJCQlpZiAoICFrZWVwRGF0YSAmJiBub2RlLm5vZGVUeXBlID09PSAxICkgewoJCQkJalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBub2RlICkgKTsKCQkJfQoKCQkJaWYgKCBub2RlLnBhcmVudE5vZGUgKSB7CgkJCQlpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggbm9kZS5vd25lckRvY3VtZW50LCBub2RlICkgKSB7CgkJCQkJc2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCQl9CgkJCQlub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5vZGUgKTsKCQkJfQoJCX0KCgkJcmV0dXJuIGVsZW07Cgl9CgoJalF1ZXJ5LmV4dGVuZCggewoJCWh0bWxQcmVmaWx0ZXI6IGZ1bmN0aW9uKCBodG1sICkgewoJCQlyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsICI8JDE+PC8kMj4iICk7CgkJfSwKCgkJY2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJdmFyIGRlc3RFbGVtZW50cywgbm9kZSwgY2xvbmUsIGksIHNyY0VsZW1lbnRzLAoJCQkJaW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTsKCgkJCWlmICggc3VwcG9ydC5odG1sNUNsb25lIHx8IGpRdWVyeS5pc1hNTERvYyggZWxlbSApIHx8CgkJCQkhcm5vc2hpbWNhY2hlLnRlc3QoICI8IiArIGVsZW0ubm9kZU5hbWUgKyAiPiIgKSApIHsKCgkJCQljbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICk7CgoJCQkvLyBJRTw9OCBkb2VzIG5vdCBwcm9wZXJseSBjbG9uZSBkZXRhY2hlZCwgdW5rbm93biBlbGVtZW50IG5vZGVzCgkJCX0gZWxzZSB7CgkJCQlmcmFnbWVudERpdi5pbm5lckhUTUwgPSBlbGVtLm91dGVySFRNTDsKCQkJCWZyYWdtZW50RGl2LnJlbW92ZUNoaWxkKCBjbG9uZSA9IGZyYWdtZW50RGl2LmZpcnN0Q2hpbGQgKTsKCQkJfQoKCQkJaWYgKCAoICFzdXBwb3J0Lm5vQ2xvbmVFdmVudCB8fCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCApICYmCgkJCQkJKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiYgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkgewoKCQkJCS8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yCgkJCQlkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7CgkJCQlzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApOwoKCQkJCS8vIEZpeCBhbGwgSUUgY2xvbmluZyBpc3N1ZXMKCQkJCWZvciAoIGkgPSAwOyAoIG5vZGUgPSBzcmNFbGVtZW50c1sgaSBdICkgIT0gbnVsbDsgKytpICkgewoKCQkJCQkvLyBFbnN1cmUgdGhhdCB0aGUgZGVzdGluYXRpb24gbm9kZSBpcyBub3QgbnVsbDsgRml4ZXMgIzk1ODcKCQkJCQlpZiAoIGRlc3RFbGVtZW50c1sgaSBdICkgewoJCQkJCQlmaXhDbG9uZU5vZGVJc3N1ZXMoIG5vZGUsIGRlc3RFbGVtZW50c1sgaSBdICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lCgkJCWlmICggZGF0YUFuZEV2ZW50cyApIHsKCQkJCWlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJCQkJc3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTsKCQkJCQlkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApOwoKCQkJCQlmb3IgKCBpID0gMDsgKCBub2RlID0gc3JjRWxlbWVudHNbIGkgXSApICE9IG51bGw7IGkrKw==", "base64"));
  res.write(new Buffer("ICkgewoJCQkJCQljbG9uZUNvcHlFdmVudCggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApOwoJCQkJfQoJCQl9CgoJCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsICJzY3JpcHQiICk7CgkJCWlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7CgkJCQlzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCAic2NyaXB0IiApICk7CgkJCX0KCgkJCWRlc3RFbGVtZW50cyA9IHNyY0VsZW1lbnRzID0gbm9kZSA9IG51bGw7CgoJCQkvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXQKCQkJcmV0dXJuIGNsb25lOwoJCX0sCgoJCWNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zLCAvKiBpbnRlcm5hbCAqLyBmb3JjZUFjY2VwdERhdGEgKSB7CgkJCXZhciBlbGVtLCB0eXBlLCBpZCwgZGF0YSwKCQkJCWkgPSAwLAoJCQkJaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbywKCQkJCWNhY2hlID0galF1ZXJ5LmNhY2hlLAoJCQkJYXR0cmlidXRlcyA9IHN1cHBvcnQuYXR0cmlidXRlcywKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbDsKCgkJCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJCWlmICggZm9yY2VBY2NlcHREYXRhIHx8IGFjY2VwdERhdGEoIGVsZW0gKSApIHsKCgkJCQkJaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdOwoJCQkJCWRhdGEgPSBpZCAmJiBjYWNoZVsgaWQgXTsKCgkJCQkJaWYgKCBkYXRhICkgewoJCQkJCQlpZiAoIGRhdGEuZXZlbnRzICkgewoJCQkJCQkJZm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHsKCQkJCQkJCQlpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHsKCQkJCQkJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApOwoKCQkJCQkJCQkvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkCgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJalF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gUmVtb3ZlIGNhY2hlIG9ubHkgaWYgaXQgd2FzIG5vdCBhbHJlYWR5IHJlbW92ZWQgYnkgalF1ZXJ5LmV2ZW50LnJlbW92ZQoJCQkJCQlpZiAoIGNhY2hlWyBpZCBdICkgewoKCQkJCQkJCWRlbGV0ZSBjYWNoZVsgaWQgXTsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQkJCQkvLyBJRSBkb2VzIG5vdCBhbGxvdyB1cyB0byBkZWxldGUgZXhwYW5kbyBwcm9wZXJ0aWVzIGZyb20gbm9kZXMKCQkJCQkJCS8vIElFIGNyZWF0ZXMgZXhwYW5kbyBhdHRyaWJ1dGVzIGFsb25nIHdpdGggdGhlIHByb3BlcnR5CgkJCQkJCQkvLyBJRSBkb2VzIG5vdCBoYXZlIGEgcmVtb3ZlQXR0cmlidXRlIGZ1bmN0aW9uIG9uIERvY3VtZW50IG5vZGVzCgkJCQkJCQlpZiAoICFhdHRyaWJ1dGVzICYmIHR5cGVvZiBlbGVtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJCQkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIGludGVybmFsS2V5ICk7CgoJCQkJCQkJLy8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXMKCQkJCQkJCS8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWQKCQkJCQkJCS8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDcKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJZWxlbVsgaW50ZXJuYWxLZXkgXSA9IHVuZGVmaW5lZDsKCQkJCQkJCX0KCgkJCQkJCQlkZWxldGVkSWRzLnB1c2goIGlkICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoKCQkvLyBLZWVwIGRvbU1hbmlwIGV4cG9zZWQgdW50aWwgMy4wIChnaC0yMjI1KQoJCWRvbU1hbmlwOiBkb21NYW5pcCwKCgkJZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7CgkJfSwKCgkJcmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yICk7CgkJfSwKCgkJdGV4dDogZnVuY3Rpb24oIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQlyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/CgkJCQkJalF1ZXJ5LnRleHQoIHRoaXMgKSA6CgkJCQkJdGhpcy5lbXB0eSgpLmFwcGVuZCgKCQkJCQkJKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKS5jcmVhdGVUZXh0Tm9kZSggdmFsdWUgKQoJCQkJCSk7CgkJCX0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7CgkJfSwKCgkJYXBwZW5kOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJdmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApOwoJCQkJCXRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJcHJlcGVuZDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCWlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkgewoJCQkJCXZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTsKCQkJCQl0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJYmVmb3JlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7CgkJCQkJdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJYWZ0ZXI6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlpZiAoIHRoaXMucGFyZW50Tm9kZSApIHsKCQkJCQl0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzLm5leHRTaWJsaW5nICk7CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQllbXB0eTogZnVuY3Rpb24oKSB7CgkJCXZhciBlbGVtLAoJCQkJaSA9IDA7CgoJCQlmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCgkJCQkvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3MKCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJCX0KCgkJCQkvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2RlcwoJCQkJd2hpbGUgKCBlbGVtLmZpcnN0Q2hpbGQgKSB7CgkJCQkJZWxlbS5yZW1vdmVDaGlsZCggZWxlbS5maXJzdENoaWxkICk7CgkJCQl9CgoJCQkJLy8gSWYgdGhpcyBpcyBhIHNlbGVjdCwgZW5zdXJlIHRoYXQgaXQgZGlzcGxheXMgZW1wdHkgKCMxMjMzNikKCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCWlmICggZWxlbS5vcHRpb25zICYmIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgInNlbGVjdCIgKSApIHsKCQkJCQllbGVtLm9wdGlvbnMubGVuZ3RoID0gMDsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJY2xvbmU6IGZ1bmN0aW9uKCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50czsKCQkJZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzOwoKCQkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7CgkJCX0gKTsKCQl9LAoKCQlodG1sOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCXZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LAoJCQkJCWkgPSAwLAoJCQkJCWwgPSB0aGlzLmxlbmd0aDsKCgkJCQlpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDEgPwoJCQkJCQllbGVtLmlubmVySFRNTC5yZXBsYWNlKCByaW5saW5lalF1ZXJ5LCAiIiApIDoKCQkJCQkJdW5kZWZpbmVkOwoJCQkJfQoKCQkJCS8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUwKCQkJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiYKCQkJCQkoIHN1cHBvcnQuaHRtbFNlcmlhbGl6ZSB8fCAhcm5vc2hpbWNhY2hlLnRlc3QoIHZhbHVlICkgICkgJiYKCQkJCQkoIHN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgfHwgIXJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCB2YWx1ZSApICkgJiYKCQkJCQkhd3JhcE1hcFsgKCBydGFnTmFtZS5leGVjKCB2YWx1ZSApIHx8IFsgIiIsICIiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHsKCgkJCQkJdmFsdWUgPSBqUXVlcnkuaHRtbFByZWZpbHRlciggdmFsdWUgKTsKCgkJCQkJdHJ5IHsKCQkJCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoKCQkJCQkJCS8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrcwoJCQkJCQkJZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTsKCQkJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJCQkJCQllbGVtLmlubmVySFRNTCA9IHZhbHVlOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQllbGVtID0gMDsKCgkJCQkJLy8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kCgkJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQkJfQoKCQkJCWlmICggZWxlbSApIHsKCQkJCQl0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApOwoJCQkJfQoJCQl9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApOwoJCX0sCgoJCXJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKCQkJdmFyIGlnbm9yZWQgPSBbXTsKCgkJCS8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIG5vbi1pZ25vcmVkIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudAoJCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwoKCQkJCWlmICggalF1ZXJ5LmluQXJyYXkoIHRoaXMsIGlnbm9yZWQgKSA8IDAgKSB7CgkJCQkJalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTsKCQkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQkJcGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb24KCQkJfSwgaWdub3JlZCApOwoJCX0KCX0gKTsKCglqUXVlcnkuZWFjaCggewoJCWFwcGVuZFRvOiAiYXBwZW5kIiwKCQlwcmVwZW5kVG86ICJwcmVwZW5kIiwKCQlpbnNlcnRCZWZvcmU6ICJiZWZvcmUiLAoJCWluc2VydEFmdGVyOiAiYWZ0ZXIiLAoJCXJlcGxhY2VBbGw6ICJyZXBsYWNlV2l0aCIKCX0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJdmFyIGVsZW1zLAoJCQkJaSA9IDAsCgkJCQlyZXQgPSBbXSwKCQkJCWluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSwKCQkJCWxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMTsKCgkJCWZvciAoIDsgaSA8PSBsYXN0OyBpKysgKSB7CgkJCQllbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApOwoJCQkJalF1ZXJ5KCBpbnNlcnRbIGkgXSApWyBvcmlnaW5hbCBdKCBlbGVtcyApOwoKCQkJCS8vIE1vZGVybiBicm93c2VycyBjYW4gYXBwbHkgalF1ZXJ5IGNvbGxlY3Rpb25zIGFzIGFycmF5cywgYnV0IG9sZElFIG5lZWRzIGEgLmdldCgpCgkJCQlwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7CgkJfTsKCX0gKTsKCgoJdmFyIGlmcmFtZSwKCQllbGVtZGlzcGxheSA9IHsKCgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3gKCQkJLy8gV2UgaGF2ZSB0byBwcmUtZGVmaW5lIHRoZXNlIHZhbHVlcyBmb3IgRkYgKCMxMDIyNykKCQkJSFRNTDogImJsb2NrIiwKCQkJQk9EWTogImJsb2NrIgoJCX07CgoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50CgkgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudAoJICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3QKCSAqLwoKCS8vIENhbGxlZCBvbmx5IGZyb20gd2l0aGluIGRlZmF1bHREaXNwbGF5CglmdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7CgkJdmFyIGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSwKCgkJCWRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sICJkaXNwbGF5IiApOwoKCQkvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCwKCQkvLyBzbyB1c2UgImRldGFjaCIgbWV0aG9kIGFzIGZhc3Qgd2F5IHRvIGdldCByaWQgb2YgdGhlIGVsZW1lbnQKCQllbGVtLmRldGFjaCgpOwoKCQlyZXR1cm4gZGlzcGxheTsKCX0KCgkvKioKCSAqIFRyeSB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgZGlzcGxheSB2YWx1ZSBvZiBhbiBlbGVtZW50CgkgKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWUKCSAqLwoJZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkoIG5vZGVOYW1lICkgewoJCXZhciBkb2MgPSBkb2N1bWVudCwKCQkJZGlzcGxheSA9IGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdOwoKCQlpZiAoICFkaXNwbGF5ICkgewoJCQlkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApOwoKCQkJLy8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lCgkJCWlmICggZGlzcGxheSA9PT0gIm5vbmUiIHx8ICFkaXNwbGF5ICkgewoKCQkJCS8vIFVzZSB0aGUgYWxyZWFkeS1jcmVhdGVkIGlmcmFtZSBpZiBwb3NzaWJsZQoJCQkJaWZyYW1lID0gKCBpZnJhbWUgfHwgalF1ZXJ5KCAiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIgKSApCgkJCQkJLmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7CgoJCQkJLy8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlCgkJCQlkb2MgPSAoIGlmcmFtZVsgMCBdLmNvbnRlbnRXaW5kb3cgfHwgaWZyYW1lWyAwIF0uY29udGVudERvY3VtZW50ICkuZG9jdW1lbnQ7CgoJCQkJLy8gU3VwcG9ydDogSUUKCQkJCWRvYy53cml0ZSgpOwoJCQkJZG9jLmNsb3NlKCk7CgoJCQkJZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTsKCQkJCWlmcmFtZS5kZXRhY2goKTsKCQkJfQoKCQkJLy8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5CgkJCWVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTsKCQl9CgoJCXJldHVybiBkaXNwbGF5OwoJfQoJdmFyIHJtYXJnaW4gPSAoIC9ebWFyZ2luLyApOwoKCXZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIgKTsKCgl2YXIgc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHsKCQl2YXIgcmV0LCBuYW1lLAoJCQlvbGQgPSB7fTsKCgkJLy8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzCgkJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCQlvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTsKCQkJZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdOwoJCX0KCgkJcmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTsKCgkJLy8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzCgkJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCQllbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTsKCQl9CgoJCXJldHVybiByZXQ7Cgl9OwoKCgl2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCgoJKCBmdW5jdGlvbigpIHsKCQl2YXIgcGl4ZWxQb3NpdGlvblZhbCwgcGl4ZWxNYXJnaW5SaWdodFZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsCgkJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCwgcmVsaWFibGVNYXJnaW5SaWdodFZhbCwgcmVsaWFibGVNYXJnaW5MZWZ0VmFsLAoJCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCQkvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50cwoJCWlmICggIWRpdi5zdHlsZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJZGl2LnN0eWxlLmNzc1RleHQgPSAiZmxvYXQ6bGVmdDtvcGFjaXR5Oi41IjsKCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIE1ha2Ugc3VyZSB0aGF0IGVsZW1lbnQgb3BhY2l0eSBleGlzdHMgKGFzIG9wcG9zZWQgdG8gZmlsdGVyKQoJCXN1cHBvcnQub3BhY2l0eSA9IGRpdi5zdHlsZS5vcGFjaXR5ID09PSAiMC41IjsKCgkJLy8gVmVyaWZ5IHN0eWxlIGZsb2F0IGV4aXN0ZW5jZQoJCS8vIChJRSB1c2VzIHN0eWxlRmxvYXQgaW5zdGVhZCBvZiBjc3NGbG9hdCkKCQlzdXBwb3J0LmNzc0Zsb2F0ID0gISFkaXYuc3R5bGUuY3NzRmxvYXQ7CgoJCWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9ICJjb250ZW50LWJveCI7CgkJZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gIiI7CgkJc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09ICJjb250ZW50LWJveCI7CgoJCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAiYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDsiICsKCQkJInBhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZSI7CgkJZGl2LmlubmVySFRNTCA9ICIiOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCS8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zCgkJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCgkJc3VwcG9ydC5ib3hTaXppbmcgPSBkaXYuc3R5bGUuYm94U2l6aW5nID09PSAiIiB8fCBkaXYuc3R5bGUuTW96Qm94U2l6aW5nID09PSAiIiB8fAoJCQlkaXYuc3R5bGUuV2Via2l0Qm94U2l6aW5nID09PSAiIjsKCgkJalF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwgewoJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHM6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJCX0KCQkJCXJldHVybiByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWw7CgkJCX0sCgoJCQlib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7CgoJCQkJLy8gV2UncmUgY2hlY2tpbmcgZm9yIHBpeGVsUG9zaXRpb25WYWwgaGVyZSBpbnN0ZWFkIG9mIGJveFNpemluZ1JlbGlhYmxlVmFsCgkJCQkvLyBzaW5jZSB0aGF0IGNvbXByZXNzZXMgYmV0dGVyIGFuZCB0aGV5J3JlIGNvbXB1dGVkIHRvZ2V0aGVyIGFueXdheS4KCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7CgkJCX0sCgoJCQlwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMC00LjMKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcGl4ZWxNYXJnaW5SaWdodFZhbDsKCQkJfSwKCgkJCXBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJCX0KCQkJCXJldHVybiBwaXhlbFBvc2l0aW9uVmFsOwoJCQl9LAoKCQkJcmVsaWFibGVNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5SaWdodFZhbDsKCQkJfSwKCgkJCXJlbGlhYmxlTWFyZ2luTGVmdDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gU3VwcG9ydDogSUUgPD04IG9ubHksIEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gMzcKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsOwoJCQl9CgkJfSApOwoKCQlmdW5jdGlvbiBjb21wdXRlU3R5bGVUZXN0cygpIHsKCQkJdmFyIGNvbnRlbnRzLCBkaXZTdHlsZSwKCQkJCWRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJCS8vIFNldHVwCgkJCWRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7CgoJCQlkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCS8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZwoJCQkJIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDsiICsKCQkJCSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrOyIgKwoJCQkJIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7IiArCgkJCQkidG9wOjElO3dpZHRoOg==", "base64"));
  res.write(new Buffer("NTAlIjsKCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gQXNzdW1lIHJlYXNvbmFibGUgdmFsdWVzIGluIHRoZSBhYnNlbmNlIG9mIGdldENvbXB1dGVkU3R5bGUKCQkJcGl4ZWxQb3NpdGlvblZhbCA9IGJveFNpemluZ1JlbGlhYmxlVmFsID0gcmVsaWFibGVNYXJnaW5MZWZ0VmFsID0gZmFsc2U7CgkJCXBpeGVsTWFyZ2luUmlnaHRWYWwgPSByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID0gdHJ1ZTsKCgkJCS8vIENoZWNrIGZvciBnZXRDb21wdXRlZFN0eWxlIHNvIHRoYXQgdGhpcyBjb2RlIGlzIG5vdCBydW4gaW4gSUU8OS4KCQkJaWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHsKCQkJCWRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApOwoJCQkJcGl4ZWxQb3NpdGlvblZhbCA9ICggZGl2U3R5bGUgfHwge30gKS50b3AgIT09ICIxJSI7CgkJCQlyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSAoIGRpdlN0eWxlIHx8IHt9ICkubWFyZ2luTGVmdCA9PT0gIjJweCI7CgkJCQlib3hTaXppbmdSZWxpYWJsZVZhbCA9ICggZGl2U3R5bGUgfHwgeyB3aWR0aDogIjRweCIgfSApLndpZHRoID09PSAiNHB4IjsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5CgkJCQkvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3QKCQkJCWRpdi5zdHlsZS5tYXJnaW5SaWdodCA9ICI1MCUiOwoJCQkJcGl4ZWxNYXJnaW5SaWdodFZhbCA9ICggZGl2U3R5bGUgfHwgeyBtYXJnaW5SaWdodDogIjRweCIgfSApLm1hcmdpblJpZ2h0ID09PSAiNHB4IjsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMyBvbmx5CgkJCQkvLyBEaXYgd2l0aCBleHBsaWNpdCB3aWR0aCBhbmQgbm8gbWFyZ2luLXJpZ2h0IGluY29ycmVjdGx5CgkJCQkvLyBnZXRzIGNvbXB1dGVkIG1hcmdpbi1yaWdodCBiYXNlZCBvbiB3aWR0aCBvZiBjb250YWluZXIgKCMzMzMzKQoJCQkJLy8gV2ViS2l0IEJ1ZyAxMzM0MyAtIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyB3cm9uZyB2YWx1ZSBmb3IgbWFyZ2luLXJpZ2h0CgkJCQljb250ZW50cyA9IGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCQkJCS8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXI7IHBhZGRpbmcKCQkJCWNvbnRlbnRzLnN0eWxlLmNzc1RleHQgPSBkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zCgkJCQkJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCgkJCQkJIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IiArCgkJCQkJImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjAiOwoJCQkJY29udGVudHMuc3R5bGUubWFyZ2luUmlnaHQgPSBjb250ZW50cy5zdHlsZS53aWR0aCA9ICIwIjsKCQkJCWRpdi5zdHlsZS53aWR0aCA9ICIxcHgiOwoKCQkJCXJlbGlhYmxlTWFyZ2luUmlnaHRWYWwgPQoJCQkJCSFwYXJzZUZsb2F0KCAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBjb250ZW50cyApIHx8IHt9ICkubWFyZ2luUmlnaHQgKTsKCgkJCQlkaXYucmVtb3ZlQ2hpbGQoIGNvbnRlbnRzICk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFNi04CgkJCS8vIEZpcnN0IGNoZWNrIHRoYXQgZ2V0Q2xpZW50UmVjdHMgd29ya3MgYXMgZXhwZWN0ZWQKCQkJLy8gQ2hlY2sgaWYgdGFibGUgY2VsbHMgc3RpbGwgaGF2ZSBvZmZzZXRXaWR0aC9IZWlnaHQgd2hlbiB0aGV5IGFyZSBzZXQKCQkJLy8gdG8gZGlzcGxheTpub25lIGFuZCB0aGVyZSBhcmUgc3RpbGwgb3RoZXIgdmlzaWJsZSB0YWJsZSBjZWxscyBpbiBhCgkJCS8vIHRhYmxlIHJvdzsgaWYgc28sIG9mZnNldFdpZHRoL0hlaWdodCBhcmUgbm90IHJlbGlhYmxlIGZvciB1c2Ugd2hlbgoJCQkvLyBkZXRlcm1pbmluZyBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIGhpZGRlbiBkaXJlY3RseSB1c2luZwoJCQkvLyBkaXNwbGF5Om5vbmUgKGl0IGlzIHN0aWxsIHNhZmUgdG8gdXNlIG9mZnNldHMgaWYgYSBwYXJlbnQgZWxlbWVudCBpcwoJCQkvLyBoaWRkZW47IGRvbiBzYWZldHkgZ29nZ2xlcyBhbmQgc2VlIGJ1ZyAjNDUxMiBmb3IgbW9yZSBpbmZvcm1hdGlvbikuCgkJCWRpdi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwgPSBkaXYuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPT09IDA7CgkJCWlmICggcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsICkgewoJCQkJZGl2LnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJCWRpdi5pbm5lckhUTUwgPSAiPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiI7CgkJCQljb250ZW50cyA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRkIiApOwoJCQkJY29udGVudHNbIDAgXS5zdHlsZS5jc3NUZXh0ID0gIm1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmUiOwoJCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7CgkJCQlpZiAoIHJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCApIHsKCQkJCQljb250ZW50c1sgMCBdLnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJCQljb250ZW50c1sgMSBdLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7CgkJCQl9CgkJCX0KCgkJCS8vIFRlYXJkb3duCgkJCWRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7CgkJfQoKCX0gKSgpOwoKCgl2YXIgZ2V0U3R5bGVzLCBjdXJDU1MsCgkJcnBvc2l0aW9uID0gL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvOwoKCWlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7CgkJZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkvLyBTdXBwb3J0OiBJRTw9MTErLCBGaXJlZm94PD0zMCsgKCMxNTA5OCwgIzE0MTUwKQoJCQkvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHMKCQkJLy8gRkYgbWVhbndoaWxlIHRocm93cyBvbiBmcmFtZSBlbGVtZW50cyB0aHJvdWdoICJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlIgoJCQl2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKCgkJCWlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkgewoJCQkJdmlldyA9IHdpbmRvdzsKCQkJfQoKCQkJcmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSApOwoJCX07CgoJCWN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCQkJdmFyIHdpZHRoLCBtaW5XaWR0aCwgbWF4V2lkdGgsIHJldCwKCQkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgoJCQkvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG9ubHkgbmVlZGVkIGZvciAuY3NzKCdmaWx0ZXInKSBpbiBJRTksIHNlZSAjMTI1MzcKCQkJcmV0ID0gY29tcHV0ZWQgPyBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDsKCgkJCS8vIFN1cHBvcnQ6IE9wZXJhIDEyLjF4IG9ubHkKCQkJLy8gRmFsbCBiYWNrIHRvIHN0eWxlIGV2ZW4gd2l0aG91dCBjb21wdXRlZAoJCQkvLyBjb21wdXRlZCBpcyB1bmRlZmluZWQgZm9yIGVsZW1zIG9uIGRvY3VtZW50IGZyYWdtZW50cwoJCQlpZiAoICggcmV0ID09PSAiIiB8fCByZXQgPT09IHVuZGVmaW5lZCApICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkgewoJCQkJcmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7CgkJCX0KCgkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJLy8gQSB0cmlidXRlIHRvIHRoZSAiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkcyIKCQkJCS8vIENocm9tZSA8IDE3IGFuZCBTYWZhcmkgNS4wIHVzZXMgImNvbXB1dGVkIHZhbHVlIgoJCQkJLy8gaW5zdGVhZCBvZiAidXNlZCB2YWx1ZSIgZm9yIG1hcmdpbi1yaWdodAoJCQkJLy8gU2FmYXJpIDUuMS43IChhdCBsZWFzdCkgcmV0dXJucyBwZXJjZW50YWdlIGZvciBhIGxhcmdlciBzZXQgb2YgdmFsdWVzLAoJCQkJLy8gYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVscwoJCQkJLy8gdGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOgoJCQkJLy8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3Nzb20vI3Jlc29sdmVkLXZhbHVlcwoJCQkJaWYgKCAhc3VwcG9ydC5waXhlbE1hcmdpblJpZ2h0KCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkgewoKCQkJCQkvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzCgkJCQkJd2lkdGggPSBzdHlsZS53aWR0aDsKCQkJCQltaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoOwoJCQkJCW1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7CgoJCQkJCS8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXQKCQkJCQlzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7CgkJCQkJcmV0ID0gY29tcHV0ZWQud2lkdGg7CgoJCQkJCS8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXMKCQkJCQlzdHlsZS53aWR0aCA9IHdpZHRoOwoJCQkJCXN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7CgkJCQkJc3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDsKCQkJCX0KCQkJfQoKCQkJLy8gU3VwcG9ydDogSUUKCQkJLy8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci4KCQkJcmV0dXJuIHJldCA9PT0gdW5kZWZpbmVkID8KCQkJCXJldCA6CgkJCQlyZXQgKyAiIjsKCQl9OwoJfSBlbHNlIGlmICggZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSApIHsKCQlnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlOwoJCX07CgoJCWN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCQkJdmFyIGxlZnQsIHJzLCByc0xlZnQsIHJldCwKCQkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgkJCXJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDsKCgkJCS8vIEF2b2lkIHNldHRpbmcgcmV0IHRvIGVtcHR5IHN0cmluZyBoZXJlCgkJCS8vIHNvIHdlIGRvbid0IGRlZmF1bHQgdG8gYXV0bwoJCQlpZiAoIHJldCA9PSBudWxsICYmIHN0eWxlICYmIHN0eWxlWyBuYW1lIF0gKSB7CgkJCQlyZXQgPSBzdHlsZVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBGcm9tIHRoZSBhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzCgkJCS8vIGh0dHA6Ly9lcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwNy8wNy8yNy8xOC41NC4xNS8jY29tbWVudC0xMDIyOTEKCgkJCS8vIElmIHdlJ3JlIG5vdCBkZWFsaW5nIHdpdGggYSByZWd1bGFyIHBpeGVsIG51bWJlcgoJCQkvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHMKCQkJLy8gYnV0IG5vdCBwb3NpdGlvbiBjc3MgYXR0cmlidXRlcywgYXMgdGhvc2UgYXJlCgkJCS8vIHByb3BvcnRpb25hbCB0byB0aGUgcGFyZW50IGVsZW1lbnQgaW5zdGVhZAoJCQkvLyBhbmQgd2UgY2FuJ3QgbWVhc3VyZSB0aGUgcGFyZW50IGluc3RlYWQgYmVjYXVzZSBpdAoJCQkvLyBtaWdodCB0cmlnZ2VyIGEgInN0YWNraW5nIGRvbGxzIiBwcm9ibGVtCgkJCWlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmICFycG9zaXRpb24udGVzdCggbmFtZSApICkgewoKCQkJCS8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXMKCQkJCWxlZnQgPSBzdHlsZS5sZWZ0OwoJCQkJcnMgPSBlbGVtLnJ1bnRpbWVTdHlsZTsKCQkJCXJzTGVmdCA9IHJzICYmIHJzLmxlZnQ7CgoJCQkJLy8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dAoJCQkJaWYgKCByc0xlZnQgKSB7CgkJCQkJcnMubGVmdCA9IGVsZW0uY3VycmVudFN0eWxlLmxlZnQ7CgkJCQl9CgkJCQlzdHlsZS5sZWZ0ID0gbmFtZSA9PT0gImZvbnRTaXplIiA/ICIxZW0iIDogcmV0OwoJCQkJcmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgInB4IjsKCgkJCQkvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzCgkJCQlzdHlsZS5sZWZ0ID0gbGVmdDsKCQkJCWlmICggcnNMZWZ0ICkgewoJCQkJCXJzLmxlZnQgPSByc0xlZnQ7CgkJCQl9CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFCgkJCS8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuCgkJCXJldHVybiByZXQgPT09IHVuZGVmaW5lZCA/CgkJCQlyZXQgOgoJCQkJcmV0ICsgIiIgfHwgImF1dG8iOwoJCX07Cgl9CgoKCgoJZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkgewoKCQkvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLgoJCXJldHVybiB7CgkJCWdldDogZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGNvbmRpdGlvbkZuKCkgKSB7CgoJCQkJCS8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZQoJCQkJCS8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC4KCQkJCQlkZWxldGUgdGhpcy5nZXQ7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLgoJCQkJcmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCX0KCQl9OwoJfQoKCgl2YXIKCgkJCXJhbHBoYSA9IC9hbHBoYVwoW14pXSpcKS9pLAoJCXJvcGFjaXR5ID0gL29wYWNpdHlccyo9XHMqKFteKV0qKS9pLAoKCQkvLyBzd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdAoJCS8vICJ0YWJsZSIsICJ0YWJsZS1jZWxsIiwgb3IgInRhYmxlLWNhcHRpb24iCgkJLy8gc2VlIGhlcmUgZm9yIA==", "base64"));
  res.write(new Buffer("ZGlzcGxheSB2YWx1ZXM6CgkJLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9DU1MvZGlzcGxheQoJCXJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLywKCQlybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKC4qKSQiLCAiaSIgKSwKCgkJY3NzU2hvdyA9IHsgcG9zaXRpb246ICJhYnNvbHV0ZSIsIHZpc2liaWxpdHk6ICJoaWRkZW4iLCBkaXNwbGF5OiAiYmxvY2siIH0sCgkJY3NzTm9ybWFsVHJhbnNmb3JtID0gewoJCQlsZXR0ZXJTcGFjaW5nOiAiMCIsCgkJCWZvbnRXZWlnaHQ6ICI0MDAiCgkJfSwKCgkJY3NzUHJlZml4ZXMgPSBbICJXZWJraXQiLCAiTyIsICJNb3oiLCAibXMiIF0sCgkJZW1wdHlTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICkuc3R5bGU7CgoKCS8vIHJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHkKCWZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkgewoKCQkvLyBzaG9ydGN1dCBmb3IgbmFtZXMgdGhhdCBhcmUgbm90IHZlbmRvciBwcmVmaXhlZAoJCWlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkgewoJCQlyZXR1cm4gbmFtZTsKCQl9CgoJCS8vIGNoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXMKCQl2YXIgY2FwTmFtZSA9IG5hbWUuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSwKCQkJaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDsKCgkJd2hpbGUgKCBpLS0gKSB7CgkJCW5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTsKCQkJaWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7CgkJCQlyZXR1cm4gbmFtZTsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7CgkJdmFyIGRpc3BsYXksIGVsZW0sIGhpZGRlbiwKCQkJdmFsdWVzID0gW10sCgkJCWluZGV4ID0gMCwKCQkJbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOwoKCQlmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCQllbGVtID0gZWxlbWVudHNbIGluZGV4IF07CgkJCWlmICggIWVsZW0uc3R5bGUgKSB7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJdmFsdWVzWyBpbmRleCBdID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCAib2xkZGlzcGxheSIgKTsKCQkJZGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheTsKCQkJaWYgKCBzaG93ICkgewoKCQkJCS8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXMKCQkJCS8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3QKCQkJCWlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSAibm9uZSIgKSB7CgkJCQkJZWxlbS5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCQl9CgoJCQkJLy8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZQoJCQkJLy8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXMKCQkJCS8vIGZvciBzdWNoIGFuIGVsZW1lbnQKCQkJCWlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSAiIiAmJiBpc0hpZGRlbiggZWxlbSApICkgewoJCQkJCXZhbHVlc1sgaW5kZXggXSA9CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgIm9sZGRpc3BsYXkiLCBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApICk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQloaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApOwoKCQkJCWlmICggZGlzcGxheSAmJiBkaXNwbGF5ICE9PSAibm9uZSIgfHwgIWhpZGRlbiApIHsKCQkJCQlqUXVlcnkuX2RhdGEoCgkJCQkJCWVsZW0sCgkJCQkJCSJvbGRkaXNwbGF5IiwKCQkJCQkJaGlkZGVuID8gZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApCgkJCQkJKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AKCQkvLyB0byBhdm9pZCB0aGUgY29uc3RhbnQgcmVmbG93CgkJZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdOwoJCQlpZiAoICFlbGVtLnN0eWxlICkgewoJCQkJY29udGludWU7CgkJCX0KCQkJaWYgKCAhc2hvdyB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09ICJub25lIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09ICIiICkgewoJCQkJZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCAiIiA6ICJub25lIjsKCQkJfQoJCX0KCgkJcmV0dXJuIGVsZW1lbnRzOwoJfQoKCWZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7CgkJdmFyIG1hdGNoZXMgPSBybnVtc3BsaXQuZXhlYyggdmFsdWUgKTsKCQlyZXR1cm4gbWF0Y2hlcyA/CgoJCQkvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCAic3VidHJhY3QiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3MKCQkJTWF0aC5tYXgoIDAsIG1hdGNoZXNbIDEgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDIgXSB8fCAicHgiICkgOgoJCQl2YWx1ZTsKCX0KCglmdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7CgkJdmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/ICJib3JkZXIiIDogImNvbnRlbnQiICkgPwoKCQkJLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uCgkJCTQgOgoKCQkJLy8gT3RoZXJ3aXNlIA==", "base64"));
  res.write(new Buffer("aW5pdGlhbGl6ZSBmb3IgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBwcm9wZXJ0aWVzCgkJCW5hbWUgPT09ICJ3aWR0aCIgPyAxIDogMCwKCgkJCXZhbCA9IDA7CgoJCWZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHsKCgkJCS8vIGJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXQKCQkJaWYgKCBleHRyYSA9PT0gIm1hcmdpbiIgKSB7CgkJCQl2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7CgkJCX0KCgkJCWlmICggaXNCb3JkZXJCb3ggKSB7CgoJCQkJLy8gYm9yZGVyLWJveCBpbmNsdWRlcyBwYWRkaW5nLCBzbyByZW1vdmUgaXQgaWYgd2Ugd2FudCBjb250ZW50CgkJCQlpZiAoIGV4dHJhID09PSAiY29udGVudCIgKSB7CgkJCQkJdmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sICJwYWRkaW5nIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCQkJCX0KCgkJCQkvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBib3JkZXIgbm9yIG1hcmdpbiwgc28gcmVtb3ZlIGJvcmRlcgoJCQkJaWYgKCBleHRyYSAhPT0gIm1hcmdpbiIgKSB7CgkJCQkJdmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sICJib3JkZXIiICsgY3NzRXhwYW5kWyBpIF0gKyAiV2lkdGgiLCB0cnVlLCBzdHlsZXMgKTsKCQkJCX0KCQkJfSBlbHNlIHsKCgkJCQkvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZwoJCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sICJwYWRkaW5nIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCgkJCQkvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyCgkJCQlpZiAoIGV4dHJhICE9PSAicGFkZGluZyIgKSB7CgkJCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sICJib3JkZXIiICsgY3NzRXhwYW5kWyBpIF0gKyAiV2lkdGgiLCB0cnVlLCBzdHlsZXMgKTsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHZhbDsKCX0KCglmdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApIHsKCgkJLy8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWUKCQl2YXIgdmFsdWVJc0JvcmRlckJveCA9IHRydWUsCgkJCXZhbCA9IG5hbWUgPT09ICJ3aWR0aCIgPyBlbGVtLm9mZnNldFdpZHRoIDogZWxlbS5vZmZzZXRIZWlnaHQsCgkJCXN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLAoJCQlpc0JvcmRlckJveCA9IHN1cHBvcnQuYm94U2l6aW5nICYmCgkJCQlqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCI7CgoJCS8vIFN1cHBvcnQ6IElFMTEgb25seQoJCS8vIEluIElFIDExIGZ1bGxzY3JlZW4gZWxlbWVudHMgaW5zaWRlIG9mIGFuIGlmcmFtZSBoYXZlCgkJLy8gMTAweCB0b28gc21hbGwgZGltZW5zaW9ucyAoZ2gtMTc2NCkuCgkJaWYgKCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50ICYmIHdpbmRvdy50b3AgIT09IHdpbmRvdyApIHsKCgkJCS8vIFN1cHBvcnQ6IElFMTEgb25seQoJCQkvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlCgkJCS8vIGluIElFIHRocm93cyBhbiBlcnJvci4KCQkJaWYgKCBlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICkgewoJCQkJdmFsID0gTWF0aC5yb3VuZCggZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVsgbmFtZSBdICogMTAwICk7CgkJCX0KCQl9CgoJCS8vIHNvbWUgbm9uLWh0bWwgZWxlbWVudHMgcmV0dXJuIHVuZGVmaW5lZCBmb3Igb2Zmc2V0V2lkdGgsIHNvIGNoZWNrIGZvciBudWxsL3VuZGVmaW5lZAoJCS8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NQoJCS8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OAoJCWlmICggdmFsIDw9IDAgfHwgdmFsID09IG51bGwgKSB7CgoJCQkvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3NhcnkKCQkJdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTsKCQkJaWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkgewoJCQkJdmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLgoJCQlpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHsKCQkJCXJldHVybiB2YWw7CgkJCX0KCgkJCS8vIHdlIG5lZWQgdGhlIGNoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzCgkJCS8vIGZvciBnZXRDb21wdXRlZFN0eWxlIHNpbGVudGx5IGZhbGxzIGJhY2sgdG8gdGhlIHJlbGlhYmxlIGVsZW0uc3R5bGUKCQkJdmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmCgkJCQkoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApOwoKCQkJLy8gTm9ybWFsaXplICIiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmEKCQkJdmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDsKCQl9CgoJCS8vIHVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzCgkJcmV0dXJuICggdmFsICsKCQkJYXVnbWVudFdpZHRoT3JIZWlnaHQoCgkJCQllbGVtLAoJCQkJbmFtZSwKCQkJCWV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyAiYm9yZGVyIiA6ICJjb250ZW50IiApLAoJCQkJdmFsdWVJc0JvcmRlckJveCwKCQkJCXN0eWxlcwoJCQkpCgkJKSArICJweCI7Cgl9CgoJalF1ZXJ5LmV4dGVuZCggewoKCQkvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQKCQkvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHkKCQljc3NIb29rczogewoJCQlvcGFjaXR5OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJCQlpZiAoIGNvbXB1dGVkICkgewoKCQkJCQkJLy8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHkKCQkJCQkJdmFyIHJldCA9IGN1ckNTUyggZWxlbSwgIm9wYWNpdHkiICk7CgkJCQkJCXJldHVybiByZXQgPT09ICIiID8gIjEiIDogcmV0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgoJCS8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkICJweCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllcwoJCWNzc051bWJlcjogewoJCQkiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOiB0cnVlLAoJCQkiY29sdW1uQ291bnQiOiB0cnVlLAoJCQkiZmlsbE9wYWNpdHkiOiB0cnVlLAoJCQkiZmxleEdyb3ciOiB0cnVlLAoJCQkiZmxleFNocmluayI6IHRydWUsCgkJCSJmb250V2VpZ2h0IjogdHJ1ZSwKCQkJImxpbmVIZWlnaHQiOiB0cnVlLAoJCQkib3BhY2l0eSI6IHRydWUsCgkJCSJvcmRlciI6IHRydWUsCgkJCSJvcnBoYW5zIjogdHJ1ZSwKCQkJIndpZG93cyI6IHRydWUsCgkJCSJ6SW5kZXgiOiB0cnVlLAoJCQkiem9vbSI6IHRydWUKCQl9LAoKCQkvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlCgkJLy8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZQoJCWNzc1Byb3BzOiB7CgoJCQkvLyBub3JtYWxpemUgZmxvYXQgY3NzIHByb3BlcnR5CgkJCSJmbG9hdCI6IHN1cHBvcnQuY3NzRmxvYXQgPyAiY3NzRmxvYXQiIDogInN0eWxlRmxvYXQiCgkJfSwKCgkJLy8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGUKCQlzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHsKCgkJCS8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2RlcwoJCQlpZiAoICFlbGVtIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCB8fCAhZWxlbS5zdHlsZSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lCgkJCXZhciByZXQsIHR5cGUsIGhvb2tzLAoJCQkJb3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksCgkJCQlzdHlsZSA9IGVsZW0uc3R5bGU7CgoJCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCQkvLyBnZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uCgkJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07CgoJCQkvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWUKCQkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQkJdHlwZSA9IHR5cGVvZiB2YWx1ZTsKCgkJCQkvLyBDb252ZXJ0ICIrPSIgb3IgIi09IiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSkKCQkJCWlmICggdHlwZSA9PT0gInN0cmluZyIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHsKCQkJCQl2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7CgoJCQkJCS8vIEZpeGVzIGJ1ZyAjOTIzNwoJCQkJCXR5cGUgPSAibnVtYmVyIjsKCQkJCX0KCgkJCQkvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQuIFNlZTogIzcxMTYKCQkJCWlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKQoJCQkJaWYgKCB0eXBlID09PSAibnVtYmVyIiApIHsKCQkJCQl2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gIiIgOiAicHgiICk7CgkJCQl9CgoJCQkJLy8gRml4ZXMgIzg5MDgsIGl0IGNhbiBiZSBkb25lIG1vcmUgY29ycmVjdGx5IGJ5IHNwZWNpZmluZyBzZXR0ZXJzIGluIGNzc0hvb2tzLAoJCQkJLy8gYnV0IGl0IHdvdWxkIG1lYW4gdG8gZGVmaW5lIGVpZ2h0CgkJCQkvLyAoZm9yIGV2ZXJ5IHByb2JsZW1hdGljIHByb3BlcnR5KSBpZGVudGljYWwgZnVuY3Rpb25zCgkJCQlpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gIiIgJiYgbmFtZS5pbmRleE9mKCAiYmFja2dyb3VuZCIgKSA9PT0gMCApIHsKCQkJCQlzdHlsZVsgbmFtZSBdID0gImluaGVyaXQiOwoJCQkJfQoKCQkJCS8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZQoJCQkJaWYgKCAhaG9va3MgfHwgISggInNldCIgaW4gaG9va3MgKSB8fAoJCQkJCSggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHsKCgkJCQkJLy8gU3VwcG9ydDogSUUKCQkJCQkvLyBTd2FsbG93IGVycm9ycyBmcm9tICdpbnZhbGlkJyBDU1MgdmFsdWVzICgjNTUwOSkKCQkJCQl0cnkgewoJCQkJCQlzdHlsZVsgbmFtZSBdID0gdmFsdWU7CgkJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQkJfQoKCQkJfSBlbHNlIHsKCgkJCQkvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmUKCQkJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkgewoKCQkJCQlyZXR1cm4gcmV0OwoJCQkJfQoKCQkJCS8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0CgkJCQlyZXR1cm4gc3R5bGVbIG5hbWUgXTsKCQkJfQoJCX0sCgoJCWNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7CgkJCXZhciBudW0sIHZhbCwgaG9va3MsCgkJCQlvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTsKCgkJCS8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZQoJCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCQkoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7CgoJCQkvLyBnZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uCgkJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07CgoJCQkvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZQoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICkgewoJCQkJdmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApOwoJCQl9CgoJCQkvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdAoJCQlpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkgewoJCQkJdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTsKCQkJfQoKCQkJLy9jb252ZXJ0ICJub3JtYWwiIHRvIGNvbXB1dGVkIHZhbHVlCgkJCWlmICggdmFsID09PSAibm9ybWFsIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHsKCQkJCXZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBSZXR1cm4sIGNvbnZlcnRpbmcgdG8gbnVtYmVyIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljCgkJCWlmICggZXh0cmEgPT09ICIiIHx8IGV4dHJhICkgewoJCQkJbnVtID0gcGFyc2VGbG9hdCggdmFsICk7CgkJCQlyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgaXNGaW5pdGUoIG51bSApID8gbnVtIHx8IDAgOiB2YWw7CgkJCX0KCQkJcmV0dXJuIHZhbDsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmVhY2goIFsgImhlaWdodCIsICJ3aWR0aCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gPSB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHsKCQkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJCS8vIGNlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbQoJCQkJCS8vIGhvd2V2ZXIsIGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXQgZnJvbSB0aGlzCgkJCQkJcmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKSApICYmCgkJCQkJCWVsZW0ub2Zmc2V0V2lkdGggPT09IDAgPwoJCQkJCQkJc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7CgkJCQkJCQl9ICkgOgoJCQkJCQkJZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJCX0KCQkJfSwKCgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHsKCQkJCXZhciBzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKTsKCQkJCXJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIGV4dHJhID8KCQkJCQlhdWdtZW50V2lkdGhPckhlaWdodCgKCQkJCQkJZWxlbSwKCQkJCQkJbmFtZSwKCQkJCQkJZXh0cmEsCgkJCQkJCXN1cHBvcnQuYm94U2l6aW5nICYmCgkJCQkJCQlqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCIsCgkJCQkJCXN0eWxlcwoJCQkJCSkgOiAwCgkJCQkpOwoJCQl9CgkJfTsKCX0gKTsKCglpZiAoICFzdXBwb3J0Lm9wYWNpdHkgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzLm9wYWNpdHkgPSB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoKCQkJCS8vIElFIHVzZXMgZmlsdGVycyBmb3Igb3BhY2l0eQoJCQkJcmV0dXJuIHJvcGFjaXR5LnRlc3QoICggY29tcHV0ZWQgJiYgZWxlbS5jdXJyZW50U3R5bGUgPwoJCQkJCWVsZW0uY3VycmVudFN0eWxlLmZpbHRlciA6CgkJCQkJZWxlbS5zdHlsZS5maWx0ZXIgKSB8fCAiIiApID8KCQkJCQkJKCAwLjAxICogcGFyc2VGbG9hdCggUmVnRXhwLiQxICkgKSArICIiIDoKCQkJCQkJY29tcHV0ZWQgPyAiMSIgOiAiIjsKCQkJfSwKCgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJdmFyIHN0eWxlID0gZWxlbS5zdHlsZSwKCQkJCQljdXJyZW50U3R5bGUgPSBlbGVtLmN1cnJlbnRTdHlsZSwKCQkJCQlvcGFjaXR5ID0galF1ZXJ5LmlzTnVtZXJpYyggdmFsdWUgKSA/ICJhbHBoYShvcGFjaXR5PSIgKyB2YWx1ZSAqIDEwMCArICIpIiA6ICIiLAoJCQkJCWZpbHRlciA9IGN1cnJlbnRTdHlsZSAmJiBjdXJyZW50U3R5bGUuZmlsdGVyIHx8IHN0eWxlLmZpbHRlciB8fCAiIjsKCgkJCQkvLyBJRSBoYXMgdHJvdWJsZSB3aXRoIG9wYWNpdHkgaWYgaXQgZG9lcyBub3QgaGF2ZSBsYXlvdXQKCQkJCS8vIEZvcmNlIGl0IGJ5IHNldHRpbmcgdGhlIHpvb20gbGV2ZWwKCQkJCXN0eWxlLnpvb20gPSAxOwoKCQkJCS8vIGlmIHNldHRpbmcgb3BhY2l0eSB0byAxLCBhbmQgbm8gb3RoZXIgZmlsdGVycyBleGlzdCAtCgkJCQkvLyBhdHRlbXB0IHRvIHJlbW92ZSBmaWx0ZXIgYXR0cmlidXRlICM2NjUyCgkJCQkvLyBpZiB2YWx1ZSA9PT0gIiIsIHRoZW4gcmVtb3ZlIGlubGluZSBvcGFjaXR5ICMxMjY4NQoJCQkJaWYgKCAoIHZhbHVlID49IDEgfHwgdmFsdWUgPT09ICIiICkgJiYKCQkJCQkJalF1ZXJ5LnRyaW0oIGZpbHRlci5yZXBsYWNlKCByYWxwaGEsICIiICkgKSA9PT0gIiIgJiYKCQkJCQkJc3R5bGUucmVtb3ZlQXR0cmlidXRlICkgewoKCQkJCQkvLyBTZXR0aW5nIHN0eWxlLmZpbHRlciB0byBudWxsLCAiIiAmICIgIiBzdGlsbCBsZWF2ZSAiZmlsdGVyOiIgaW4gdGhlIGNzc1RleHQKCQkJCQkvLyBpZiAiZmlsdGVyOiIgaXMgcHJlc2VudCBhdCBhbGwsIGNsZWFyVHlwZSBpcyBkaXNhYmxlZCwgd2Ugd2FudCB0byBhdm9pZCB0aGlzCgkJCQkJLy8gc3R5bGUucmVtb3ZlQXR0cmlidXRlIGlzIElFIE9ubHksIGJ1dCBzbyBhcHBhcmVudGx5IGlzIHRoaXMgY29kZSBwYXRoLi4uCgkJCQkJc3R5bGUucmVtb3ZlQXR0cmlidXRlKCAiZmlsdGVyIiApOwoKCQkJCQkvLyBpZiB0aGVyZSBpcyBubyBmaWx0ZXIgc3R5bGUgYXBwbGllZCBpbiBhIGNzcyBydWxlCgkJCQkJLy8gb3IgdW5zZXQgaW5saW5lIG9wYWNpdHksIHdlIGFyZSBkb25lCgkJCQkJaWYgKCB2YWx1ZSA9PT0gIiIgfHwgY3VycmVudFN0eWxlICYmICFjdXJyZW50U3R5bGUuZmlsdGVyICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoKCQkJCS8vIG90aGVyd2lzZSwgc2V0IG5ldyBmaWx0ZXIgdmFsdWVzCgkJCQlzdHlsZS5maWx0ZXIgPSByYWxwaGEudGVzdCggZmlsdGVyICkgPwoJCQkJCWZpbHRlci5yZXBsYWNlKCByYWxwaGEsIG9wYWNpdHkgKSA6CgkJCQkJZmlsdGVyICsgIiAiICsgb3BhY2l0eTsKCQkJfQoJCX07Cgl9CgoJalF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsCgkJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQlpZiAoIGNvbXB1dGVkICkgewoJCQkJcmV0dXJuIHN3YXAoIGVsZW0sIHsgImRpc3BsYXkiOiAiaW5saW5lLWJsb2NrIiB9LAoJCQkJCWN1ckNTUywgWyBlbGVtLCAibWFyZ2luUmlnaHQiIF0gKTsKCQkJfQoJCX0KCSk7CgoJalF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LAoJCWZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJaWYgKCBjb21wdXRlZCApIHsKCQkJCXJldHVybiAoCgkJCQkJcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCAibWFyZ2luTGVmdCIgKSApIHx8CgoJCQkJCS8vIFN1cHBvcnQ6IElFPD0xMSsKCQkJCQkvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvcgoJCQkJCS8vIFN1cHBvcnQ6IElFOCBvbmx5CgkJCQkJLy8gZ2V0Q2xpZW50UmVjdHMoKSBlcnJvcnMgb24gZGlzY29ubmVjdGVkIGVsZW1zCgkJCQkJKCBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApID8KCQkJCQkJZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0KCQkJCQkJCXN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0OwoJCQkJCQkJfSApIDoKCQkJCQkJMAoJCQkJCSkKCQkJCSkgKyAicHgiOwoJCQl9CgkJfQoJKTsKCgkvLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzCglqUXVlcnkuZWFjaCggewoJCW1hcmdpbjogIiIsCgkJcGFkZGluZzogIiIsCgkJYm9yZGVyOiAiV2lkdGgiCgl9LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHsKCQkJZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQl2YXIgaSA9IDAsCgkJCQkJZXhwYW5kZWQgPSB7fSwKCgkJCQkJLy8gYXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nCgkJCQkJcGFydHMgPSB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciID8gdmFsdWUuc3BsaXQoICIgIiApIDogWyB2YWx1ZSBdOwoKCQkJCWZvciAoIDsgaSA8IDQ7IGkrKyApIHsKCQkJCQlleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9CgkJCQkJCXBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTsKCQkJCX0KCgkJCQlyZXR1cm4gZXhwYW5kZWQ7CgkJCX0KCQl9OwoKCQlpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkgewoJCQlqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyOwoJCX0KCX0gKTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJY3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHsKCQkJCQ==", "base64"));
  res.write(new Buffer("dmFyIHN0eWxlcywgbGVuLAoJCQkJCW1hcCA9IHt9LAoJCQkJCWkgPSAwOwoKCQkJCWlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHsKCQkJCQlzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTsKCQkJCQlsZW4gPSBuYW1lLmxlbmd0aDsKCgkJCQkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCQkJCW1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTsKCQkJCQl9CgoJCQkJCXJldHVybiBtYXA7CgkJCQl9CgoJCQkJcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPwoJCQkJCWpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6CgkJCQkJalF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApOwoJCQl9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCQl9LAoJCXNob3c6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTsKCQl9LAoJCWhpZGU6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTsKCQl9LAoJCXRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkgewoJCQlpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gImJvb2xlYW4iICkgewoJCQkJcmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGlzSGlkZGVuKCB0aGlzICkgKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkuc2hvdygpOwoJCQkJfSBlbHNlIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS5oaWRlKCk7CgkJCQl9CgkJCX0gKTsKCQl9Cgl9ICk7CgoKCWZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHsKCQlyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApOwoJfQoJalF1ZXJ5LlR3ZWVuID0gVHdlZW47CgoJVHdlZW4ucHJvdG90eXBlID0gewoJCWNvbnN0cnVjdG9yOiBUd2VlbiwKCQlpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7CgkJCXRoaXMuZWxlbSA9IGVsZW07CgkJCXRoaXMucHJvcCA9IHByb3A7CgkJCXRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7CgkJCXRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkJCXRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7CgkJCXRoaXMuZW5kID0gZW5kOwoJCQl0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICk7CgkJfSwKCQljdXI6IGZ1bmN0aW9uKCkgewoJCQl2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdOwoKCQkJcmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/CgkJCQlob29rcy5nZXQoIHRoaXMgKSA6CgkJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7CgkJfSwKCQlydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkgewoJCQl2YXIgZWFzZWQsCgkJCQlob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07CgoJCQlpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHsKCQkJCXRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKAoJCQkJCXBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbgoJCQkJKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50OwoJCQl9CgkJCXRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDsKCgkJCWlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7CgkJCQl0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7CgkJCX0KCgkJCWlmICggaG9va3MgJiYgaG9va3Muc2V0ICkgewoJCQkJaG9va3Muc2V0KCB0aGlzICk7CgkJCX0gZWxzZSB7CgkJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7CgkJCX0KCQkJcmV0dXJuIHRoaXM7CgkJfQoJfTsKCglUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7CgoJVHdlZW4ucHJvcEhvb2tzID0gewoJCV9kZWZhdWx0OiB7CgkJCWdldDogZnVuY3Rpb24oIHR3ZWVuICkgewoJCQkJdmFyIHJlc3VsdDsKCgkJCQkvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LAoJCQkJLy8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy4KCQkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fAoJCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkgewoJCQkJCXJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07CgkJCQl9CgoJCQkJLy8gcGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5CgkJCQkvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzCgkJCQkvLyBzbywgc2ltcGxlIHZhbHVlcyBzdWNoIGFzICIxMHB4IiBhcmUgcGFyc2VkIHRvIEZsb2F0LgoJCQkJLy8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyAicm90YXRlKDFyYWQpIiBhcmUgcmV0dXJuZWQgYXMgaXMuCgkJCQlyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCAiIiApOwoKCQkJCS8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZA==", "base64"));
  res.write(new Buffer("IGFuZCAiYXV0byIgYXJlIGNvbnZlcnRlZCB0byAwLgoJCQkJcmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSAiYXV0byIgPyAwIDogcmVzdWx0OwoJCQl9LAoJCQlzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHsKCgkJCQkvLyB1c2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdCAtIHVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZSAtIHVzZSAuc3R5bGUgaWYgaXRzCgkJCQkvLyBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZQoJCQkJaWYgKCBqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdICkgewoJCQkJCWpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7CgkJCQl9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmCgkJCQkJKCB0d2Vlbi5lbGVtLnN0eWxlWyBqUXVlcnkuY3NzUHJvcHNbIHR3ZWVuLnByb3AgXSBdICE9IG51bGwgfHwKCQkJCQkJalF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gKSApIHsKCQkJCQlqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTsKCQkJCX0gZWxzZSB7CgkJCQkJdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93OwoJCQkJfQoJCQl9CgkJfQoJfTsKCgkvLyBTdXBwb3J0OiBJRSA8PTkKCS8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2RlcwoKCVR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHsKCQlzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHsKCQkJaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHsKCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQkJfQoJCX0KCX07CgoJalF1ZXJ5LmVhc2luZyA9IHsKCQlsaW5lYXI6IGZ1bmN0aW9uKCBwICkgewoJCQlyZXR1cm4gcDsKCQl9LAoJCXN3aW5nOiBmdW5jdGlvbiggcCApIHsKCQkJcmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjsKCQl9LAoJCV9kZWZhdWx0OiAic3dpbmciCgl9OwoKCWpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0OwoKCS8vIEJhY2sgQ29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50CglqUXVlcnkuZnguc3RlcCA9IHt9OwoKCgoKCXZhcgoJCWZ4Tm93LCB0aW1lcklkLAoJCXJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLAoJCXJydW4gPSAvcXVldWVIb29rcyQvOwoKCS8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHkKCWZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkgewoJCXdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsKCQkJZnhOb3cgPSB1bmRlZmluZWQ7CgkJfSApOwoJCXJldHVybiAoIGZ4Tm93ID0galF1ZXJ5Lm5vdygpICk7Cgl9CgoJLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb24KCWZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7CgkJdmFyIHdoaWNoLAoJCQlhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH0sCgkJCWkgPSAwOwoKCQkvLyBpZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsCgkJLy8gaWYgd2UgZG9uJ3QgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodAoJCWluY2x1ZGVXaWR0aCA9IGluY2x1ZGVXaWR0aCA/IDEgOiAwOwoJCWZvciAoIDsgaSA8IDQgOyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7CgkJCXdoaWNoID0gY3NzRXhwYW5kWyBpIF07CgkJCWF0dHJzWyAibWFyZ2luIiArIHdoaWNoIF0gPSBhdHRyc1sgInBhZGRpbmciICsgd2hpY2ggXSA9IHR5cGU7CgkJfQoKCQlpZiAoIGluY2x1ZGVXaWR0aCApIHsKCQkJYXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTsKCQl9CgoJCXJldHVybiBhdHRyczsKCX0KCglmdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHsKCQl2YXIgdHdlZW4sCgkJCWNvbGxlY3Rpb24gPSAoIEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCBBbmltYXRpb24udHdlZW5lcnNbICIqIiBdICksCgkJCWluZGV4ID0gMCwKCQkJbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7CgkJZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJaWYgKCAoIHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkgKSApIHsKCgkJCQkvLyB3ZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eQoJCQkJcmV0dXJuIHR3ZWVuOwoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkgewoJCS8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi8KCQl2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgdHdlZW4sIGhvb2tzLCBvbGRmaXJlLCBkaXNwbGF5LCBjaGVja0Rpc3BsYXksCgkJCWFuaW0gPSB0aGlzLAoJCQlvcmlnID0ge30sCgkJCXN0eWxlID0gZWxlbS5zdHlsZSwKCQkJaGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLAoJCQlkYXRhU2hvdyA9IGpRdWVyeS5fZGF0YSggZWxlbSwgImZ4c2hvdyIgKTsKCgkJLy8gaGFuZGxlIHF1ZXVlOiBmYWxzZSBwcm9taXNlcwoJCWlmICggIW9wdHMucXVldWUgKSB7CgkJCWhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCAiZngiICk7CgkJCWlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHsKCQkJCWhvb2tzLnVucXVldWVkID0gMDsKCQkJCW9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlOwoJCQkJaG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggIWhvb2tzLnVucXVldWVkICkgewoJCQkJCQlvbGRmaXJlKCk7CgkJCQkJfQoJCQkJfTsKCQkJfQoJCQlob29rcy51bnF1ZXVlZCsrOwoKCQkJYW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkgewoKCQkJCS8vIGRvaW5nIHRoaXMgbWFrZXMgc3VyZSB0aGF0IHRoZSBjb21wbGV0ZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkCgkJCQkvLyBiZWZvcmUgdGhpcyBjb21wbGV0ZXMKCQkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCQkJCQlob29rcy51bnF1ZXVlZC0tOwoJCQkJCWlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgImZ4IiApLmxlbmd0aCApIHsKCQkJCQkJaG9va3MuZW1wdHkuZmlyZSgpOwoJCQkJCX0KCQkJCX0gKTsKCQkJfSApOwoJCX0KCgkJLy8gaGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3MKCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCAiaGVpZ2h0IiBpbiBwcm9wcyB8fCAid2lkdGgiIGluIHByb3BzICkgKSB7CgoJCQkvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXQKCQkJLy8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRSBkb2VzIG5vdAoJCQkvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmQKCQkJLy8gb3ZlcmZsb3dZIGFyZSBzZXQgdG8gdGhlIHNhbWUgdmFsdWUKCQkJb3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07CgoJCQkvLyBTZXQgZGlzcGxheSBwcm9wZXJ0eSB0byBpbmxpbmUtYmxvY2sgZm9yIGhlaWdodC93aWR0aAoJCQkvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkCgkJCWRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKTsKCgkJCS8vIFRlc3QgZGVmYXVsdCBkaXNwbGF5IGlmIGRpc3BsYXkgaXMgY3VycmVudGx5ICJub25lIgoJCQljaGVja0Rpc3BsYXkgPSBkaXNwbGF5ID09PSAibm9uZSIgPwoJCQkJalF1ZXJ5Ll9kYXRhKCBlbGVtLCAib2xkZGlzcGxheSIgKSB8fCBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheTsKCgkJCWlmICggY2hlY2tEaXNwbGF5ID09PSAiaW5saW5lIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCAiZmxvYXQiICkgPT09ICJub25lIiApIHsKCgkJCQkvLyBpbmxpbmUtbGV2ZWwgZWxlbWVudHMgYWNjZXB0IGlubGluZS1ibG9jazsKCQkJCS8vIGJsb2NrLWxldmVsIGVsZW1lbnRzIG5lZWQgdG8gYmUgaW5saW5lIHdpdGggbGF5b3V0CgkJCQlpZiAoICFzdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA9PT0gImlubGluZSIgKSB7CgkJCQkJc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siOwoJCQkJfSBlbHNlIHsKCQkJCQlzdHlsZS56b29tID0gMTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCBvcHRzLm92ZXJmbG93ICkgewoJCQlzdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwoJCQlpZiAoICFzdXBwb3J0LnNocmlua1dyYXBCbG9ja3MoKSApIHsKCQkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCQkJCQlzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTsKCQkJCQlzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07CgkJCQkJc3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdOwoJCQkJfSApOwoJCQl9CgkJfQoKCQkvLyBzaG93L2hpZGUgcGFzcwoJCWZvciAoIHByb3AgaW4gcHJvcHMgKSB7CgkJCXZhbHVlID0gcHJvcHNbIHByb3AgXTsKCQkJaWYgKCByZnh0eXBlcy5leGVjKCB2YWx1ZSApICkgewoJCQkJZGVsZXRlIHByb3BzWyBwcm9wIF07CgkJCQl0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09ICJ0b2dnbGUiOwoJCQkJaWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyAiaGlkZSIgOiAic2hvdyIgKSApIHsKCgkJCQkJLy8gSWYgdGhlcmUgaXMgZGF0YVNob3cgbGVmdCBvdmVyIGZyb20gYSBzdG9wcGVkIGhpZGUgb3Igc2hvdwoJCQkJCS8vIGFuZCB3ZSBhcmUgZ29pbmcgdG8gcHJvY2VlZCB3aXRoIHNob3csIHdlIHNob3VsZCBwcmV0ZW5kIHRvIGJlIGhpZGRlbgoJCQkJCWlmICggdmFsdWUgPT09ICJzaG93IiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJCWhpZGRlbiA9IHRydWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJfQoJCQkJb3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTsKCgkJCS8vIEFueSBub24tZnggdmFsdWUgc3RvcHMgdXMgZnJvbSByZXN0b3JpbmcgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWUKCQkJfSBlbHNlIHsKCQkJCWRpc3BsYXkgPSB1bmRlZmluZWQ7CgkJCX0KCQl9CgoJCWlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7CgkJCWlmICggZGF0YVNob3cgKSB7CgkJCQlpZiAoICJoaWRkZW4iIGluIGRhdGFTaG93ICkgewoJCQkJCWhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWRhdGFTaG93ID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCAiZnhzaG93Iiwge30gKTsKCQkJfQoKCQkJLy8gc3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byAicmV2ZXJzZSIKCQkJaWYgKCB0b2dnbGUgKSB7CgkJCQlkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuOwoJCQl9CgkJCWlmICggaGlkZGVuICkgewoJCQkJalF1ZXJ5KCBlbGVtICkuc2hvdygpOwoJCQl9IGVsc2UgewoJCQkJYW5pbS5kb25lKCBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkoIGVsZW0gKS5oaWRlKCk7CgkJCQl9ICk7CgkJCX0KCQkJYW5pbS5kb25lKCBmdW5jdGlvbigpIHsKCQkJCXZhciBwcm9wOwoJCQkJalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCAiZnhzaG93IiApOwoJCQkJZm9yICggcHJvcCBpbiBvcmlnICkgewoJCQkJCWpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7CgkJCQl9CgkJCX0gKTsKCQkJZm9yICggcHJvcCBpbiBvcmlnICkgewoJCQkJdHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTsKCgkJCQlpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHsKCQkJCQlkYXRhU2hvd1sgcHJvcCBdID0gdHdlZW4uc3RhcnQ7CgkJCQkJaWYgKCBoaWRkZW4gKSB7CgkJCQkJCXR3ZWVuLmVuZCA9IHR3ZWVuLnN0YXJ0OwoJCQkJCQl0d2Vlbi5zdGFydCA9IHByb3AgPT09ICJ3aWR0aCIgfHwgcHJvcCA9PT0gImhlaWdodCIgPyAxIDogMDsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJLy8gSWYgdGhpcyBpcyBhIG5vb3AgbGlrZSAuaGlkZSgpLmhpZGUoKSwgcmVzdG9yZSBhbiBvdmVyd3JpdHRlbiBkaXNwbGF5IHZhbHVlCgkJfSBlbHNlIGlmICggKCBkaXNwbGF5ID09PSAibm9uZSIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSApID09PSAiaW5saW5lIiApIHsKCQkJc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7CgkJfQoJfQoKCWZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkgewoJCXZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7CgoJCS8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzcwoJCWZvciAoIGluZGV4IGluIHByb3BzICkgewoJCQluYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggaW5kZXggKTsKCQkJZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdOwoJCQl2YWx1ZSA9IHByb3BzWyBpbmRleCBdOwoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkgewoJCQkJZWFzaW5nID0gdmFsdWVbIDEgXTsKCQkJCXZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdOwoJCQl9CgoJCQlpZiAoIGluZGV4ICE9PSBuYW1lICkgewoJCQkJcHJvcHNbIG5hbWUgXSA9IHZhbHVlOwoJCQkJZGVsZXRlIHByb3BzWyBpbmRleCBdOwoJCQl9CgoJCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdOwoJCQlpZiAoIGhvb2tzICYmICJleHBhbmQiIGluIGhvb2tzICkgewoJCQkJdmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7CgkJCQlkZWxldGUgcHJvcHNbIG5hbWUgXTsKCgkJCQkvLyBub3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29udCBvdmVyd3JpdGUga2V5cyBhbHJlYWR5IHByZXNlbnQuCgkJCQkvLyBhbHNvIC0gcmV1c2luZyAnaW5kZXgnIGZyb20gYWJvdmUgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0ICJuYW1lIgoJCQkJZm9yICggaW5kZXggaW4gdmFsdWUgKSB7CgkJCQkJaWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkgewoJCQkJCQlwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdOwoJCQkJCQlzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZzsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBBbmltYXRpb24oIGVsZW0sIHByb3BlcnRpZXMsIG9wdGlvbnMgKSB7CgkJdmFyIHJlc3VsdCwKCQkJc3RvcHBlZCwKCQkJaW5kZXggPSAwLAoJCQlsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsCgkJCWRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCQkvLyBkb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3IKCQkJCWRlbGV0ZSB0aWNrLmVsZW07CgkJCX0gKSwKCQkJdGljayA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBzdG9wcGVkICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJCXZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksCgkJCQkJcmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLAoKCQkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkJCS8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5NykKCQkJCQl0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsCgkJCQkJcGVyY2VudCA9IDEgLSB0ZW1wLAoJCQkJCWluZGV4ID0gMCwKCQkJCQlsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDsKCgkJCQlmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHsKCQkJCQlhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApOwoJCQkJfQoKCQkJCWRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSApOwoKCQkJCWlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkgewoJCQkJCXJldHVybiByZW1haW5pbmc7CgkJCQl9IGVsc2UgewoJCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9LAoJCQlhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKCB7CgkJCQllbGVtOiBlbGVtLAoJCQkJcHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksCgkJCQlvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7CgkJCQkJc3BlY2lhbEVhc2luZzoge30sCgkJCQkJZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0CgkJCQl9LCBvcHRpb25zICksCgkJCQlvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsCgkJCQlvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsCgkJCQlzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksCgkJCQlkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiwKCQkJCXR3ZWVuczogW10sCgkJCQljcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHsKCQkJCQl2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsCgkJCQkJCQlhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7CgkJCQkJYW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApOwoJCQkJCXJldHVybiB0d2VlbjsKCQkJCX0sCgkJCQlzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHsKCQkJCQl2YXIgaW5kZXggPSAwLAoKCQkJCQkJLy8gaWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zCgkJCQkJCS8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydAoJCQkJCQlsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwOwoJCQkJCWlmICggc3RvcHBlZCApIHsKCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfQoJCQkJCXN0b3BwZWQgPSB0cnVlOwoJCQkJCWZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkgewoJCQkJCQlhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApOwoJCQkJCX0KCgkJCQkJLy8gcmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZQoJCQkJCS8vIG90aGVyd2lzZSwgcmVqZWN0CgkJCQkJaWYgKCBnb3RvRW5kICkgewoJCQkJCQlkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7CgkJCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJZGVmZXJyZWQucmVqZWN0V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCQkJfSApLAoJCQlwcm9wcyA9IGFuaW1hdGlvbi5wcm9wczsKCgkJcHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTsKCgkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCXJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7CgkJCWlmICggcmVzdWx0ICkgewoJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHsKCQkJCQlqUXVlcnkuX3F1ZXU=", "base64"));
  res.write(new Buffer("ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID0KCQkJCQkJalF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7CgkJCQl9CgkJCQlyZXR1cm4gcmVzdWx0OwoJCQl9CgkJfQoKCQlqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApOwoKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkgewoJCQlhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTsKCQl9CgoJCWpRdWVyeS5meC50aW1lcigKCQkJalF1ZXJ5LmV4dGVuZCggdGljaywgewoJCQkJZWxlbTogZWxlbSwKCQkJCWFuaW06IGFuaW1hdGlvbiwKCQkJCXF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZQoJCQl9ICkKCQkpOwoKCQkvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9ucwoJCXJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzICkKCQkJLmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlICkKCQkJLmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKQoJCQkuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTsKCX0KCglqUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7CgoJCXR3ZWVuZXJzOiB7CgkJCSIqIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJCQl2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApOwoJCQkJYWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7CgkJCQlyZXR1cm4gdHdlZW47CgkJCX0gXQoJCX0sCgoJCXR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHByb3BzICkgKSB7CgkJCQljYWxsYmFjayA9IHByb3BzOwoJCQkJcHJvcHMgPSBbICIqIiBdOwoJCQl9IGVsc2UgewoJCQkJcHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdHdoaXRlICk7CgkJCX0KCgkJCXZhciBwcm9wLAoJCQkJaW5kZXggPSAwLAoJCQkJbGVuZ3RoID0gcHJvcHMubGVuZ3RoOwoKCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQlwcm9wID0gcHJvcHNbIGluZGV4IF07CgkJCQlBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdOwoJCQkJQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfQoJCX0sCgoJCXByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLAoKCQlwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHsKCQkJaWYgKCBwcmVwZW5kICkgewoJCQkJQW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfSBlbHNlIHsKCQkJCUFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7CgkJCX0KCQl9Cgl9ICk7CgoJalF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkgewoJCXZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09ICJvYmplY3QiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7CgkJCWNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8CgkJCQlqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCwKCQkJZHVyYXRpb246IHNwZWVkLAoJCQllYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmcKCQl9OwoKCQlvcHQuZHVyYXRpb24gPSBqUXVlcnkuZngub2ZmID8gMCA6IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09ICJudW1iZXIiID8gb3B0LmR1cmF0aW9uIDoKCQkJb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPwoJCQkJalF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0OwoKCQkvLyBub3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiAiZngiCgkJaWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7CgkJCW9wdC5xdWV1ZSA9ICJmeCI7CgkJfQoKCQkvLyBRdWV1ZWluZwoJCW9wdC5vbGQgPSBvcHQuY29tcGxldGU7CgoJCW9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7CgkJCQlvcHQub2xkLmNhbGwoIHRoaXMgKTsKCQkJfQoKCQkJaWYgKCBvcHQucXVldWUgKSB7CgkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7CgkJCX0KCQl9OwoKCQlyZXR1cm4gb3B0OwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkgewoKCQkJLy8gc2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwCgkJCXJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoICJvcGFjaXR5IiwgMCApLnNob3coKQoKCQkJCS8vIGFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZAoJCQkJLmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9LAoJCWFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJdmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSwKCQkJCW9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSwKCQkJCWRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7CgoJCQkJCS8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0CgkJCQkJdmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApOwoKCQkJCQkvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHkKCQkJCQlpZiAoIGVtcHR5IHx8IGpRdWVyeS5fZGF0YSggdGhpcywgImZpbmlzaCIgKSApIHsKCQkJCQkJYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJfQoJCQkJfTsKCQkJCWRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uOwoKCQkJcmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgPwoJCQkJdGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDoKCQkJCXRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTsKCQl9LAoJCXN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkgewoJCQl2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkgewoJCQkJdmFyIHN0b3AgPSBob29rcy5zdG9wOwoJCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCQlzdG9wKCBnb3RvRW5kICk7CgkJCX07CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWdvdG9FbmQgPSBjbGVhclF1ZXVlOwoJCQkJY2xlYXJRdWV1ZSA9IHR5cGU7CgkJCQl0eXBlID0gdW5kZWZpbmVkOwoJCQl9CgkJCWlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXRoaXMucXVldWUoIHR5cGUgfHwgImZ4IiwgW10gKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgZGVxdWV1ZSA9IHRydWUsCgkJCQkJaW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArICJxdWV1ZUhvb2tzIiwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKTsKCgkJCQlpZiAoIGluZGV4ICkgewoJCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7CgkJCQkJCXN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJZm9yICggaW5kZXggaW4gZGF0YSApIHsKCQkJCQkJaWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7CgkJCQkJCQlzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYKCQkJCQkJKCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7CgoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7CgkJCQkJCWRlcXVldWUgPSBmYWxzZTsKCQkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gc3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZAoJCQkJLy8gdGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaCB3aWxsIGRlcXVldWUKCQkJCS8vIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kCgkJCQlpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7CgkJCQkJalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgkJZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHsKCQkJaWYgKCB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgkJCX0KCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5kZXgsCgkJCQkJZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApLAoJCQkJCXF1ZXVlID0gZGF0YVsgdHlwZSArICJxdWV1ZSIgXSwKCQkJCQlob29rcyA9IGRhdGFbIHR5cGUgKyAicXVldWVIb29rcyIgXSwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDsKCgkJCQkvLyBlbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhCgkJCQlkYXRhLmZpbmlzaCA9IHRydWU7CgoJCQkJLy8gZW1wdHkgdGhlIHF1ZXVlIGZpcnN0CgkJCQlqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7CgoJCQkJaWYgKCBob29rcyAmJiBob29rcy5zdG9wICkgewoJCQkJCWhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApOwoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgewoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJCXRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCQkJCWlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkgewoJCQkJCQlxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyB0dXJuIG9mZiBmaW5pc2hpbmcgZmxhZwoJCQkJZGVsZXRlIGRhdGEuZmluaXNoOwoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5lYWNoKCBbICJ0b2dnbGUiLCAic2hvdyIsICJoaWRlIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQl2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSAiYm9vbGVhbiIgPwoJCQkJY3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDoKCQkJCXRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9OwoJfSApOwoKCS8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnMKCWpRdWVyeS5lYWNoKCB7CgkJc2xpZGVEb3duOiBnZW5GeCggInNob3ciICksCgkJc2xpZGVVcDogZ2VuRngoICJoaWRlIiApLAoJCXNsaWRlVG9nZ2xlOiBnZW5GeCggInRvZ2dsZSIgKSwKCQlmYWRlSW46IHsgb3BhY2l0eTogInNob3ciIH0sCgkJZmFkZU91dDogeyBvcGFjaXR5OiAiaGlkZSIgfSwKCQlmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6ICJ0b2dnbGUiIH0KCX0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7CgkJfTsKCX0gKTsKCglqUXVlcnkudGltZXJzID0gW107CglqUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkgewoJCXZhciB0aW1lciwKCQkJdGltZXJzID0galF1ZXJ5LnRpbWVycywKCQkJaSA9IDA7CgoJCWZ4Tm93ID0galF1ZXJ5Lm5vdygpOwoKCQlmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7CgkJCXRpbWVyID0gdGltZXJzWyBpIF07CgoJCQkvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWQKCQkJaWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7CgkJCQl0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTsKCQkJfQoJCX0KCgkJaWYgKCAhdGltZXJzLmxlbmd0aCApIHsKCQkJalF1ZXJ5LmZ4LnN0b3AoKTsKCQl9CgkJZnhOb3cgPSB1bmRlZmluZWQ7Cgl9OwoKCWpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHsKCQlqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7CgkJaWYgKCB0aW1lcigpICkgewoJCQlqUXVlcnkuZnguc3RhcnQoKTsKCQl9IGVsc2UgewoJCQlqUXVlcnkudGltZXJzLnBvcCgpOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LmludGVydmFsID0gMTM7CgoJalF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7CgkJaWYgKCAhdGltZXJJZCApIHsKCQkJdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHsKCQl3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApOwoJCXRpbWVySWQgPSBudWxsOwoJfTsKCglqUXVlcnkuZnguc3BlZWRzID0gewoJCXNsb3c6IDYwMCwKCQlmYXN0OiAyMDAsCgoJCS8vIERlZmF1bHQgc3BlZWQKCQlfZGVmYXVsdDogNDAwCgl9OwoKCgkvLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uCgkvLyBodHRwOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEwMDMyNDAxNDc0Ny9odHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvCglqUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHsKCQl0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lOwoJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJCXJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7CgkJCXZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTsKCQkJaG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkgewoJCQkJd2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApOwoJCQl9OwoJCX0gKTsKCX07CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIGEsCgkJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApLAoJCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2VsZWN0IiApLAoJCQlvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJvcHRpb24iICkgKTsKCgkJLy8gU2V0dXAKCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWRpdi5zZXRBdHRyaWJ1dGUoICJjbGFzc05hbWUiLCAidCIgKTsKCQlkaXYuaW5uZXJIVE1MID0gIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7CgkJYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggImEiIClbIDAgXTsKCgkJLy8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKQoJCS8vIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSkKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgImNoZWNrYm94IiApOwoJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTsKCgkJYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggImEiIClbIDAgXTsKCgkJLy8gRmlyc3QgYmF0Y2ggb2YgdGVzdHMuCgkJYS5zdHlsZS5jc3NUZXh0ID0gInRvcDoxcHgiOwoKCQkvLyBUZXN0IHNldEF0dHJpYnV0ZSBvbiBjYW1lbENhc2UgY2xhc3MuCgkJLy8gSWYgaXQgd29ya3MsIHdlIG5lZWQgYXR0ckZpeGVzIHdoZW4gZG9pbmcgZ2V0L3NldEF0dHJpYnV0ZSAoaWU2LzcpCgkJc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUgPSBkaXYuY2xhc3NOYW1lICE9PSAidCI7CgoJCS8vIEdldCB0aGUgc3R5bGUgaW5mb3JtYXRpb24gZnJvbSBnZXRBdHRyaWJ1dGUKCQkvLyAoSUUgdXNlcyAuY3NzVGV4dCBpbnN0ZWFkKQoJCXN1cHBvcnQuc3R5bGUgPSAvdG9wLy50ZXN0KCBhLmdldEF0dHJpYnV0ZSggInN0eWxlIiApICk7CgoJCS8vIE1ha2Ugc3VyZSB0aGF0IFVSTHMgYXJlbid0IG1hbmlwdWxhdGVkCgkJLy8gKElFIG5vcm1hbGl6ZXMgaXQgYnkgZGVmYXVsdCkKCQlzdXBwb3J0LmhyZWZOb3JtYWxpemVkID0gYS5nZXRBdHRyaWJ1dGUoICJocmVmIiApID09PSAiL2EiOwoKCQkvLyBDaGVjayB0aGUgZGVmYXVsdCBjaGVja2JveC9yYWRpbyB2YWx1ZSAoIiIgb24gV2ViS2l0OyAib24iIGVsc2V3aGVyZSkKCQlzdXBwb3J0LmNoZWNrT24gPSAhIWlucHV0LnZhbHVlOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCBhIHNlbGVjdGVkLWJ5LWRlZmF1bHQgb3B0aW9uIGhhcyBhIHdvcmtpbmcgc2VsZWN0ZWQgcHJvcGVydHkuCgkJLy8gKFdlYktpdCBkZWZhdWx0cyB0byBmYWxzZSBpbnN0ZWFkIG9mIHRydWUsIElFIHRvbywgaWYgaXQncyBpbiBhbiBvcHRncm91cCkKCQlzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkOwoKCQkvLyBUZXN0cyBmb3IgZW5jdHlwZSBzdXBwb3J0IG9uIGEgZm9ybSAoIzY3NDMpCgkJc3VwcG9ydC5lbmN0eXBlID0gISFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZm9ybSIgKS5lbmN0eXBlOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3B0aW9ucyBpbnNpZGUgZGlzYWJsZWQgc2VsZWN0cyBhcmVuJ3QgbWFya2VkIGFzIGRpc2FibGVkCgkJLy8gKFdlYktpdCBtYXJrcyB0aGVtIGFzIGRpc2FibGVkKQoJCXNlbGVjdC5kaXNhYmxlZCA9IHRydWU7CgkJc3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7CgoJCS8vIFN1cHBvcnQ6IElFOCBvbmx5CgkJLy8gQ2hlY2sgaWYgd2UgY2FuIHRydXN0IGdldEF0dHJpYnV0ZSgidmFsdWUiKQoJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggInZhbHVlIiwgIiIgKTsKCQlzdXBwb3J0LmlucHV0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09ICIiOwoKCQkvLyBDaGVjayBpZiBhbiBpbnB1dCBtYWludGFpbnMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW8KCQlpbnB1dC52YWx1ZSA9ICJ0IjsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgInJhZGlvIiApOwoJCXN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSAidCI7Cgl9ICkoKTsKCgoJdmFyIHJyZXR1cm4gPSAvXHIvZzsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJdmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLAoJCQkJZWxlbSA9IHRoaXNbIDAgXTsKCgkJCWlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCQlpZiAoIGVsZW0gKSB7CgkJCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8CgkJCQkJCWpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkJCWlmICgKCQkJCQkJaG9va3MgJiYKCQkJCQkJImdldCIgaW4gaG9va3MgJiYKCQkJCQkJKCByZXQgPSBob29rcy5nZXQoIGVsZW0sICJ2YWx1ZSIgKSApICE9PSB1bmRlZmluZWQKCQkJCQkpIHsKCQkJCQkJcmV0dXJuIHJldDsKCQkJCQl9CgoJCQkJCXJldCA9IGVsZW0udmFsdWU7CgoJCQkJCXJldHVybiB0eXBlb2YgcmV0ID09PSAic3RyaW5nIiA/CgoJCQkJCQkvLyBoYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzCgkJCQkJCXJldC5yZXBsYWNlKCBycmV0dXJuLCAiIiApIDoKCgkJCQkJCS8vIGhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlcgoJCQkJCQlyZXQgPT0gbnVsbCA/ICIiIDogcmV0OwoJCQkJfQoKCQkJCXJldHVybjsKCQkJfQoKCQkJaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApOwoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQl2YXIgdmFsOwoKCQkJCWlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJaWYgKCBpc0Z1bmN0aW9uICkgewoJCQkJCXZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7CgkJCQl9IGVsc2UgewoJCQkJCXZhbCA9IHZhbHVlOwoJCQkJfQoKCQkJCS8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzICIiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nCgkJCQlpZiAoIHZhbCA9PSBudWxsICkgewoJCQkJCXZhbCA9ICIiOwoJCQkJfSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gIm51bWJlciIgKSB7CgkJCQkJdmFsICs9ICIiOwoJCQkJfSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkgewoJCQkJCXZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJCQlyZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICIiIDogdmFsdWUgKyAiIjsKCQkJCQl9ICk7CgkJCQl9CgoJCQkJaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkJLy8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmcKCQkJCWlmICggIWhvb2tzIHx8ICEoICJzZXQiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsICJ2YWx1ZSIgKSA9PT0gdW5kZWZpbmVkICkgewoJCQkJCXRoaXMudg==", "base64"));
  res.write(new Buffer("YWx1ZSA9IHZhbDsKCQkJCX0KCQkJfSApOwoJCX0KCX0gKTsKCglqUXVlcnkuZXh0ZW5kKCB7CgkJdmFsSG9va3M6IHsKCQkJb3B0aW9uOiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCAidmFsdWUiICk7CgkJCQkJcmV0dXJuIHZhbCAhPSBudWxsID8KCQkJCQkJdmFsIDoKCgkJCQkJCS8vIFN1cHBvcnQ6IElFMTAtMTErCgkJCQkJCS8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OCkKCQkJCQkJalF1ZXJ5LnRyaW0oIGpRdWVyeS50ZXh0KCBlbGVtICkgKTsKCQkJCX0KCQkJfSwKCQkJc2VsZWN0OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXZhciB2YWx1ZSwgb3B0aW9uLAoJCQkJCQlvcHRpb25zID0gZWxlbS5vcHRpb25zLAoJCQkJCQlpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCwKCQkJCQkJb25lID0gZWxlbS50eXBlID09PSAic2VsZWN0LW9uZSIgfHwgaW5kZXggPCAwLAoJCQkJCQl2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sCgkJCQkJCW1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLAoJCQkJCQlpID0gaW5kZXggPCAwID8KCQkJCQkJCW1heCA6CgkJCQkJCQlvbmUgPyBpbmRleCA6IDA7CgoJCQkJCS8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnMKCQkJCQlmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHsKCQkJCQkJb3B0aW9uID0gb3B0aW9uc1sgaSBdOwoKCQkJCQkJLy8gb2xkSUUgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpCgkJCQkJCWlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJgoKCQkJCQkJCQkvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwCgkJCQkJCQkJKCBzdXBwb3J0Lm9wdERpc2FibGVkID8KCQkJCQkJCQkJIW9wdGlvbi5kaXNhYmxlZCA6CgkJCQkJCQkJCW9wdGlvbi5nZXRBdHRyaWJ1dGUoICJkaXNhYmxlZCIgKSA9PT0gbnVsbCApICYmCgkJCQkJCQkJKCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwKCQkJCQkJCQkJIWpRdWVyeS5ub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsICJvcHRncm91cCIgKSApICkgewoKCQkJCQkJCS8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb24KCQkJCQkJCXZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTsKCgkJCQkJCQkvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0cwoJCQkJCQkJaWYgKCBvbmUgKSB7CgkJCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCQkJfQoKCQkJCQkJCS8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5CgkJCQkJCQl2YWx1ZXMucHVzaCggdmFsdWUgKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIHZhbHVlczsKCQkJCX0sCgoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJdmFyIG9wdGlvblNldCwgb3B0aW9uLAoJCQkJCQlvcHRpb25zID0gZWxlbS5vcHRpb25zLAoJCQkJCQl2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLAoJCQkJCQlpID0gb3B0aW9ucy5sZW5ndGg7CgoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlvcHRpb24gPSBvcHRpb25zWyBpIF07CgoJCQkJCQlpZiAoIGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID49IDAgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUU2CgkJCQkJCQkvLyBXaGVuIG5ldyBvcHRpb24gZWxlbWVudCBpcyBhZGRlZCB0byBzZWxlY3QgYm94IHdlIG5lZWQgdG8KCQkJCQkJCS8vIGZvcmNlIHJlZmxvdyBvZiBuZXdseSBhZGRlZCBub2RlIGluIG9yZGVyIHRvIHdvcmthcm91bmQgZGVsYXkKCQkJCQkJCS8vIG9mIGluaXRpYWxpemF0aW9uIHByb3BlcnRpZXMKCQkJCQkJCXRyeSB7CgkJCQkJCQkJb3B0aW9uLnNlbGVjdGVkID0gb3B0aW9uU2V0ID0gdHJ1ZTsKCgkJCQkJCQl9IGNhdGNoICggXyApIHsKCgkJCQkJCQkJLy8gV2lsbCBiZSBleGVjdXRlZCBvbmx5IGluIElFNgoJCQkJCQkJCW9wdGlvbi5zY3JvbGxIZWlnaHQ7CgkJCQkJCQl9CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJb3B0aW9uLnNlbGVjdGVkID0gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0CgkJCQkJaWYgKCAhb3B0aW9uU2V0ICkgewoJCQkJCQllbGVtLnNlbGVjdGVkSW5kZXggPSAtMTsKCQkJCQl9CgoJCQkJCXJldHVybiBvcHRpb25zOwoJCQkJfQoJCQl9CgkJfQoJfSApOwoKCS8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyCglqUXVlcnkuZWFjaCggWyAicmFkaW8iLCAiY2hlY2tib3giIF0sIGZ1bmN0aW9uKCkgewoJCWpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0gewoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCWlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7CgkJCQkJcmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTsKCQkJCX0KCQkJfQoJCX07CgkJaWYgKCAhc3VwcG9ydC5jaGVja09uICkgewoJCQlqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSBudWxsID8gIm9uIiA6IGVsZW0udmFsdWU7CgkJCX07CgkJfQoJfSApOwoKCgoKCXZhciBub2RlSG9vaywgYm9vbEhvb2ssCgkJYXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGUsCgkJcnVzZURlZmF1bHQgPSAvXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLAoJCWdldFNldEF0dHJpYnV0ZSA9IHN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLAoJCWdldFNldElucHV0ID0gc3VwcG9ydC5pbnB1dDsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJYXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7CgkJfSwKCgkJcmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTsKCQkJfSApOwoJCX0KCX0gKTsKCglqUXVlcnkuZXh0ZW5kKCB7CgkJYXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCQl2YXIgcmV0LCBob29rcywKCQkJCW5UeXBlID0gZWxlbS5ub2RlVHlwZTsKCgkJCS8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXMKCQkJaWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKCQkJaWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09ICJ1bmRlZmluZWQiICkgewoJCQkJcmV0dXJuIGpRdWVyeS5wcm9wKCBlbGVtLCBuYW1lLCB2YWx1ZSApOwoJCQl9CgoJCQkvLyBBbGwgYXR0cmlidXRlcyBhcmUgbG93ZXJjYXNlCgkJCS8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWQKCQkJaWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgkJCQluYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJaG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lIF0gfHwKCQkJCQkoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApOwoJCQl9CgoJCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CgkJCQlpZiAoIHZhbHVlID09PSBudWxsICkgewoJCQkJCWpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCWlmICggaG9va3MgJiYgInNldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQllbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyAiIiApOwoJCQkJcmV0dXJuIHZhbHVlOwoJCQl9CgoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCXJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTsKCgkJCS8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkCgkJCXJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDsKCQl9LAoKCQlhdHRySG9va3M6IHsKCQkJdHlwZTogewoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJaWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSAicmFkaW8iICYmCgkJCQkJCWpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApICkgewoKCQkJCQkJLy8gU2V0dGluZyB0aGUgdHlwZSBvbiBhIHJhZGlvIGJ1dHRvbiBhZnRlciB0aGUgdmFsdWUgcmVzZXRzIHRoZSB2YWx1ZSBpbiBJRTgtOQoJCQkJCQkvLyBSZXNldCB2YWx1ZSB0byBkZWZhdWx0IGluIGNhc2UgdHlwZSBpcyBzZXQgYWZ0ZXIgdmFsdWUgZHVyaW5nIGNyZWF0aW9uCgkJCQkJCXZhciB2YWwgPSBlbGVtLnZhbHVlOwoJCQkJCQllbGVtLnNldEF0dHJpYnV0ZSggInR5cGUiLCB2YWx1ZSApOwoJCQkJCQlpZiAoIHZhbCApIHsKCQkJCQkJCWVsZW0udmFsdWUgPSB2YWw7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgoJCXJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJdmFyIG5hbWUsIHByb3BOYW1lLAoJCQkJaSA9IDAsCgkJCQlhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7CgoJCQlpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJd2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7CgkJCQkJcHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7CgoJCQkJCS8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MCkKCQkJCQlpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkgewoKCQkJCQkJLy8gU2V0IGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgdG8gZmFsc2UKCQkJCQkJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQkJCQkJCWVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCQkJLy8gQWxzbyBjbGVhciBkZWZhdWx0Q2hlY2tlZC9kZWZhdWx0U2VsZWN0ZWQgKGlmIGFwcHJvcHJpYXRlKQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggImRlZmF1bHQtIiArIG5hbWUgKSBdID0KCQkJCQkJCQllbGVtWyBwcm9wTmFtZSBdID0gZmFsc2U7CgkJCQkJCX0KCgkJCQkJLy8gU2VlICM5Njk5IGZvciBleHBsYW5hdGlvbiBvZiB0aGlzIGFwcHJvYWNoIChzZXR0aW5nIGZpcnN0LCB0aGVuIHJlbW92YWwpCgkJCQkJfSBlbHNlIHsKCQkJCQkJalF1ZXJ5LmF0dHIoIGVsZW0sIG5hbWUsICIiICk7CgkJCQkJfQoKCQkJCQllbGVtLnJlbW92ZUF0dHJpYnV0ZSggZ2V0U2V0QXR0cmlidXRlID8gbmFtZSA6IHByb3BOYW1lICk7CgkJCQl9CgkJCX0KCQl9Cgl9ICk7CgoJLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlcwoJYm9vbEhvb2sgPSB7CgkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgkJCWlmICggdmFsdWUgPT09IGZhbHNlICkgewoKCQkJCS8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2UKCQkJCWpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7CgkJCX0gZWxzZSBpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkgewoKCQkJCS8vIElFPDggbmVlZHMgdGhlICpwcm9wZXJ0eSogbmFtZQoJCQkJZWxlbS5zZXRBdHRyaWJ1dGUoICFnZXRTZXRBdHRyaWJ1dGUgJiYgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lLCBuYW1lICk7CgoJCQl9IGVsc2UgewoKCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCS8vIFVzZSBkZWZhdWx0Q2hlY2tlZCBhbmQgZGVmYXVsdFNlbGVjdGVkIGZvciBvbGRJRQoJCQkJZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggImRlZmF1bHQtIiArIG5hbWUgKSBdID0gZWxlbVsgbmFtZSBdID0gdHJ1ZTsKCQkJfQoJCQlyZXR1cm4gbmFtZTsKCQl9Cgl9OwoKCWpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1x3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkgewoJCXZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjsKCgkJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJdmFyIHJldCwgaGFuZGxlOwoJCQkJaWYgKCAhaXNYTUwgKSB7CgoJCQkJCS8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXIKCQkJCQloYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07CgkJCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0OwoJCQkJCXJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID8KCQkJCQkJbmFtZS50b0xvd2VyQ2FzZSgpIDoKCQkJCQkJbnVsbDsKCQkJCQlhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7CgkJCQl9CgkJCQlyZXR1cm4gcmV0OwoJCQl9OwoJCX0gZWxzZSB7CgkJCWF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKA==", "base64"));
  res.write(new Buffer("IGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJaWYgKCAhaXNYTUwgKSB7CgkJCQkJcmV0dXJuIGVsZW1bIGpRdWVyeS5jYW1lbENhc2UoICJkZWZhdWx0LSIgKyBuYW1lICkgXSA/CgkJCQkJCW5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJCW51bGw7CgkJCQl9CgkJCX07CgkJfQoJfSApOwoKCS8vIGZpeCBvbGRJRSBhdHRyb3BlcnRpZXMKCWlmICggIWdldFNldElucHV0IHx8ICFnZXRTZXRBdHRyaWJ1dGUgKSB7CgkJalF1ZXJ5LmF0dHJIb29rcy52YWx1ZSA9IHsKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApICkgewoKCQkJCQkvLyBEb2VzIG5vdCByZXR1cm4gc28gdGhhdCBzZXRBdHRyaWJ1dGUgaXMgYWxzbyB1c2VkCgkJCQkJZWxlbS5kZWZhdWx0VmFsdWUgPSB2YWx1ZTsKCQkJCX0gZWxzZSB7CgoJCQkJCS8vIFVzZSBub2RlSG9vayBpZiBkZWZpbmVkICgjMTk1NCk7IG90aGVyd2lzZSBzZXRBdHRyaWJ1dGUgaXMgZmluZQoJCQkJCXJldHVybiBub2RlSG9vayAmJiBub2RlSG9vay5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICk7CgkJCQl9CgkJCX0KCQl9OwoJfQoKCS8vIElFNi83IGRvIG5vdCBzdXBwb3J0IGdldHRpbmcvc2V0dGluZyBzb21lIGF0dHJpYnV0ZXMgd2l0aCBnZXQvc2V0QXR0cmlidXRlCglpZiAoICFnZXRTZXRBdHRyaWJ1dGUgKSB7CgoJCS8vIFVzZSB0aGlzIGZvciBhbnkgYXR0cmlidXRlIGluIElFNi83CgkJLy8gVGhpcyBmaXhlcyBhbG1vc3QgZXZlcnkgSUU2LzcgaXNzdWUKCQlub2RlSG9vayA9IHsKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgoJCQkJLy8gU2V0IHRoZSBleGlzdGluZyBvciBjcmVhdGUgYSBuZXcgYXR0cmlidXRlIG5vZGUKCQkJCXZhciByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKTsKCQkJCWlmICggIXJldCApIHsKCQkJCQllbGVtLnNldEF0dHJpYnV0ZU5vZGUoCgkJCQkJCSggcmV0ID0gZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSggbmFtZSApICkKCQkJCQkpOwoJCQkJfQoKCQkJCXJldC52YWx1ZSA9IHZhbHVlICs9ICIiOwoKCQkJCS8vIEJyZWFrIGFzc29jaWF0aW9uIHdpdGggY2xvbmVkIGVsZW1lbnRzIGJ5IGFsc28gdXNpbmcgc2V0QXR0cmlidXRlICgjOTY0NikKCQkJCWlmICggbmFtZSA9PT0gInZhbHVlIiB8fCB2YWx1ZSA9PT0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSApIHsKCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQl9CgkJCX0KCQl9OwoKCQkvLyBTb21lIGF0dHJpYnV0ZXMgYXJlIGNvbnN0cnVjdGVkIHdpdGggZW1wdHktc3RyaW5nIHZhbHVlcyB3aGVuIG5vdCBkZWZpbmVkCgkJYXR0ckhhbmRsZS5pZCA9IGF0dHJIYW5kbGUubmFtZSA9IGF0dHJIYW5kbGUuY29vcmRzID0KCQkJZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJdmFyIHJldDsKCQkJCWlmICggIWlzWE1MICkgewoJCQkJCXJldHVybiAoIHJldCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApICkgJiYgcmV0LnZhbHVlICE9PSAiIiA/CgkJCQkJCXJldC52YWx1ZSA6CgkJCQkJCW51bGw7CgkJCQl9CgkJCX07CgoJCS8vIEZpeGluZyB2YWx1ZSByZXRyaWV2YWwgb24gYSBidXR0b24gcmVxdWlyZXMgdGhpcyBtb2R1bGUKCQlqUXVlcnkudmFsSG9va3MuYnV0dG9uID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQkJdmFyIHJldCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApOwoJCQkJaWYgKCByZXQgJiYgcmV0LnNwZWNpZmllZCApIHsKCQkJCQlyZXR1cm4gcmV0LnZhbHVlOwoJCQkJfQoJCQl9LAoJCQlzZXQ6IG5vZGVIb29rLnNldAoJCX07CgoJCS8vIFNldCBjb250ZW50ZWRpdGFibGUgdG8gZmFsc2Ugb24gcmVtb3ZhbHMoIzEwNDI5KQoJCS8vIFNldHRpbmcgdG8gZW1wdHkgc3RyaW5nIHRocm93cyBhbiBlcnJvciBhcyBhbiBpbnZhbGlkIHZhbHVlCgkJalF1ZXJ5LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGUgPSB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkgewoJCQkJbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSA9PT0gIiIgPyBmYWxzZSA6IHZhbHVlLCBuYW1lICk7CgkJCX0KCQl9OwoKCQkvLyBTZXQgd2lkdGggYW5kIGhlaWdodCB0byBhdXRvIGluc3RlYWQgb2YgMCBvbiBlbXB0eSBzdHJpbmcoIEJ1ZyAjODE1MCApCgkJLy8gVGhpcyBpcyBmb3IgcmVtb3ZhbHMKCQlqUXVlcnkuZWFjaCggWyAid2lkdGgiLCAiaGVpZ2h0IiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQkJalF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdID0gewoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJaWYgKCB2YWx1ZSA9PT0gIiIgKSB7CgkJCQkJCWVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCAiYXV0byIgKTsKCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfTsKCQl9ICk7Cgl9CgoJaWYgKCAhc3VwcG9ydC5zdHlsZSApIHsKCQlqUXVlcnkuYXR0ckhvb2tzLnN0eWxlID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJCS8vIFJldHVybiB1bmRlZmluZWQgaW4gdGhlIGNhc2Ugb2YgZW1wdHkgc3RyaW5nCgkJCQkvLyBOb3RlOiBJRSB1cHBlcmNhc2VzIGNzcyBwcm9wZXJ0eSBuYW1lcywgYnV0IGlmIHdlIHdlcmUgdG8gLnRvTG93ZXJDYXNlKCkKCQkJCS8vIC5jc3NUZXh0LCB0aGF0IHdvdWxkIGRlc3Ryb3kgY2FzZSBzZW5zaXRpdml0eSBpbiBVUkwncywgbGlrZSBpbiAiYmFja2dyb3VuZCIKCQkJCXJldHVybiBlbGVtLnN0eWxlLmNzc1RleHQgfHwgdW5kZWZpbmVkOwoJCQl9LAoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCXJldHVybiAoIGVsZW0uc3R5bGUuY3NzVGV4dCA9IHZhbHVlICsgIiIgKTsKCQkJfQoJCX07Cgl9CgoKCgoJdmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSwKCQlyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlwcm9wOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCQl9LAoKCQlyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHsKCQkJbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgoJCQkJLy8gdHJ5L2NhdGNoIGhhbmRsZXMgY2FzZXMgd2hlcmUgSUUgYmFsa3MgKHN1Y2ggYXMgcmVtb3ZpbmcgYSBwcm9wZXJ0eSBvbiB3aW5kb3cpCgkJCQl0cnkgewoJCQkJCXRoaXNbIG5hbWUgXSA9IHVuZGVmaW5lZDsKCQkJCQlkZWxldGUgdGhpc1sgbmFtZSBdOwoJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5leHRlbmQoIHsKCQlwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7CgkJCXZhciByZXQsIGhvb2tzLAoJCQkJblR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQkJLy8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2RlcwoJCQlpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHsKCgkJCQkvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzCgkJCQluYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lOwoJCQkJaG9va3MgPSBqUXVlcnkucHJvcEhvb2tzWyBuYW1lIF07CgkJCX0KCgkJCWlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJCWlmICggaG9va3MgJiYgInNldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQlyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApOwoJCQl9CgoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCXJldHVybiBlbGVtWyBuYW1lIF07CgkJfSwKCgkJcHJvcEhvb2tzOiB7CgkJCXRhYkluZGV4OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJCQkvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGUKCQkJCQkvLyBjb3JyZWN0", "base64"));
  res.write(new Buffer("IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXQKCQkJCQkvLyBodHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0LwoJCQkJCS8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpCgkJCQkJdmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInRhYmluZGV4IiApOwoKCQkJCQlyZXR1cm4gdGFiaW5kZXggPwoJCQkJCQlwYXJzZUludCggdGFiaW5kZXgsIDEwICkgOgoJCQkJCQlyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fAoJCQkJCQkJcmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgZWxlbS5ocmVmID8KCQkJCQkJCQkwIDoKCQkJCQkJCQktMTsKCQkJCX0KCQkJfQoJCX0sCgoJCXByb3BGaXg6IHsKCQkJImZvciI6ICJodG1sRm9yIiwKCQkJImNsYXNzIjogImNsYXNzTmFtZSIKCQl9Cgl9ICk7CgoJLy8gU29tZSBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBzcGVjaWFsIGNhbGwgb24gSUUKCS8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHgKCWlmICggIXN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQgKSB7CgoJCS8vIGhyZWYvc3JjIHByb3BlcnR5IHNob3VsZCBnZXQgdGhlIGZ1bGwgbm9ybWFsaXplZCBVUkwgKCMxMDI5OS8jMTI5MTUpCgkJalF1ZXJ5LmVhY2goIFsgImhyZWYiLCAic3JjIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQkJalF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdID0gewoJCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIDQgKTsKCQkJCX0KCQkJfTsKCQl9ICk7Cgl9CgoJLy8gU3VwcG9ydDogU2FmYXJpLCBJRTkrCgkvLyBtaXMtcmVwb3J0cyB0aGUgZGVmYXVsdCBzZWxlY3RlZCBwcm9wZXJ0eSBvZiBhbiBvcHRpb24KCS8vIEFjY2Vzc2luZyB0aGUgcGFyZW50J3Mgc2VsZWN0ZWRJbmRleCBwcm9wZXJ0eSBmaXhlcyBpdAoJaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHsKCQlqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsKCgkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQlwYXJlbnQuc2VsZWN0ZWRJbmRleDsKCgkJCQkJLy8gTWFrZSBzdXJlIHRoYXQgaXQgYWxzbyB3b3JrcyB3aXRoIG9wdGdyb3Vwcywgc2VlICM1NzAxCgkJCQkJaWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHsKCQkJCQkJcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCX07Cgl9CgoJalF1ZXJ5LmVhY2goIFsKCQkidGFiSW5kZXgiLAoJCSJyZWFkT25seSIsCgkJIm1heExlbmd0aCIsCgkJImNlbGxTcGFjaW5nIiwKCQkiY2VsbFBhZGRpbmciLAoJCSJyb3dTcGFuIiwKCQkiY29sU3BhbiIsCgkJInVzZU1hcCIsCgkJImZyYW1lQm9yZGVyIiwKCQkiY29udGVudEVkaXRhYmxlIgoJXSwgZnVuY3Rpb24oKSB7CgkJalF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpczsKCX0gKTsKCgkvLyBJRTYvNyBjYWxsIGVuY3R5cGUgZW5jb2RpbmcKCWlmICggIXN1cHBvcnQuZW5jdHlwZSApIHsKCQlqUXVlcnkucHJvcEZpeC5lbmN0eXBlID0gImVuY29kaW5nIjsKCX0KCgoKCgl2YXIgcmNsYXNzID0gL1tcdFxyXG5cZl0vZzsKCglmdW5jdGlvbiBnZXRDbGFzcyggZWxlbSApIHsKCQlyZXR1cm4galF1ZXJ5LmF0dHIoIGVsZW0sICJjbGFzcyIgKSB8fCAiIjsKCX0KCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJYWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQkJaSA9IDA7CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgdmFsdWUgKSB7CgkJCQljbGFzc2VzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdOwoKCQkJCXdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHsKCQkJCQljdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7CgkJCQkJY3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCQkoICIgIiArIGN1clZhbHVlICsgIiAiICkucmVwbGFjZSggcmNsYXNzLCAiICIgKTsKCgkJCQkJaWYgKCBjdXIgKSB7CgkJCQkJCWogPSAwOwoJCQkJCQl3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkgewoJCQkJCQkJaWYgKCBjdXIuaW5kZXhPZiggIiAiICsgY2xhenogKyAiICIgKSA8IDAgKSB7CgkJCQkJCQkJY3VyICs9IGNsYXp6ICsgIiAiOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLgoJCQkJCQlmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApOwoJCQkJCQlpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkgewoJCQkJCQkJalF1ZXJ5LmF0dHIoIGVsZW0sICJjbGFzcyIsIGZpbmFsVmFsdWUgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQkJaSA9IDA7CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlpZiAoICFhcmd1bWVudHMubGVuZ3RoICkgewoJCQkJcmV0dXJuIHRoaXMuYXR0ciggImNsYXNzIiwgIiIgKTsKCQkJfQoKCQkJaWYgKCB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmIHZhbHVlICkgewoJCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQkJY3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApOwoKCQkJCQkvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKQoJCQkJCWN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkJKCAiICIgKyBjdXJWYWx1ZSArICIgIiApLnJlcGxhY2UoIHJjbGFzcywgIiAiICk7CgoJCQkJCWlmICggY3VyICkgewoJCQkJCQlqID0gMDsKCQkJCQkJd2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHsKCgkJCQkJCQkvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzCgkJCQkJCQl3aGlsZSAoIGN1ci5pbmRleE9mKCAiICIgKyBjbGF6eiArICIgIiApID4gLTEgKSB7CgkJCQkJCQkJY3VyID0gY3VyLnJlcGxhY2UoICIgIiArIGNsYXp6ICsgIiAiLCAiICIgKTsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy4KCQkJCQkJZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTsKCQkJCQkJaWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHsKCQkJCQkJCWpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiLCBmaW5hbFZhbHVlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCXRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkgewoJCQl2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTsKCgkJCWlmICggdHlwZW9mIHN0YXRlVmFsID09PSAiYm9vbGVhbiIgJiYgdHlwZSA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTsKCQkJfQoKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCWpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKAoJCQkJCQl2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLAoJCQkJCQlzdGF0ZVZhbAoJCQkJCSk7CgkJCQl9ICk7CgkJCX0KCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJdmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lczsKCgkJCQlpZiAoIHR5cGUgPT09ICJzdHJpbmciICkgewoKCQkJCQkvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lcwoJCQkJCWkgPSAwOwoJCQkJCXNlbGYgPSBqUXVlcnkoIHRoaXMgKTsKCQkJCQljbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdOwoKCQkJCQl3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHsKCgkJCQkJCS8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdAoJCQkJCQlpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkgewoJCQkJCQkJc2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZQoJCQkJfSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSAiYm9vbGVhbiIgKSB7CgkJCQkJY2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTsKCQkJCQlpZiAoIGNsYXNzTmFtZSApIHsKCgkJCQkJCS8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXQKCQkJCQkJalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiX19jbGFzc05hbWVfXyIsIGNsYXNzTmFtZSApOwoJCQkJCX0KCgkJCQkJLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgImZhbHNlIiwKCQkJCQkvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLgoJCQkJCS8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksCgkJCQkJLy8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLgoJCQkJCWpRdWVyeS5hdHRyKCB0aGlzLCAiY2xhc3MiLAoJCQkJCQljbGFzc05hbWUgfHwgdmFsdWUgPT09IGZhbHNlID8KCQkJCQkJIiIgOgoJCQkJCQlqUXVlcnkuX2RhdGEoIHRoaXMsICJfX2NsYXNzTmFtZV9fIiApIHx8ICIiCgkJCQkJKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCWhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXZhciBjbGFzc05hbWUsIGVsZW0sCgkJCQlpID0gMDsKCgkJCWNsYXNzTmFtZSA9ICIgIiArIHNlbGVjdG9yICsgIiAiOwoJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkoICIgIiArIGdldENsYXNzKCBlbGVtICkgKyAiICIgKS5yZXBsYWNlKCByY2xhc3MsICIgIiApCgkJCQkJCS5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xCgkJCQkpIHsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0gKTsKCgoKCgkvLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uCgoKCWpRdWVyeS5lYWNoKCAoICJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayAiICsKCQkibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgIiArCgkJImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiICkuc3BsaXQoICIgIiApLAoJCWZ1bmN0aW9uKCBpLCBuYW1lICkgewoKCQkvLyBIYW5kbGUgZXZlbnQgYmluZGluZwoJCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgPwoJCQkJdGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6CgkJCQl0aGlzLnRyaWdnZXIoIG5hbWUgKTsKCQl9OwoJfSApOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7CgkJCXJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApOwoJCX0KCX0gKTsKCgoJdmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uOwoKCXZhciBub25jZSA9IGpRdWVyeS5ub3coKTsKCgl2YXIgcnF1ZXJ5ID0gKCAvXD8vICk7CgoKCgl2YXIgcnZhbGlkdG9rZW5zID0gLygsKXwoXFt8eyl8KH18XSl8Iig/OlteIlxcXHJcbl18XFxbIlxcXC9iZm5ydF18XFx1W1xkYS1mQS1GXXs0fSkqIlxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcZClcZCsoPzpcLlxkK3wpKD86W2VFXVsrLV0/XGQrfCkvZzsKCglqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oIGRhdGEgKSB7CgoJCS8vIEF0dGVtcHQgdG8gcGFyc2UgdXNpbmcgdGhlIG5hdGl2ZSBKU09OIHBhcnNlciBmaXJzdAoJCWlmICggd2luZG93LkpTT04gJiYgd2luZG93LkpTT04ucGFyc2UgKSB7CgoJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkvLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dAoJCQlyZXR1cm4gd2luZG93LkpTT04ucGFyc2UoIGRhdGEgKyAiIiApOwoJCX0KCgkJdmFyIHJlcXVpcmVOb25Db21tYSwKCQkJZGVwdGggPSBudWxsLAoJCQlzdHIgPSBqUXVlcnkudHJpbSggZGF0YSArICIiICk7CgoJCS8vIEd1YXJkIGFnYWluc3QgaW52YWxpZCAoYW5kIHBvc3NpYmx5IGRhbmdlcm91cykgaW5wdXQgYnkgZW5zdXJpbmcgdGhhdCBub3RoaW5nIHJlbWFpbnMKCQkvLyBhZnRlciByZW1vdmluZyB2YWxpZCB0b2tlbnMKCQlyZXR1cm4gc3RyICYmICFqUXVlcnkudHJpbSggc3RyLnJlcGxhY2UoIHJ2YWxpZHRva2VucywgZnVuY3Rpb24oIHRva2VuLCBjb21tYSwgb3BlbiwgY2xvc2UgKSB7CgoJCQkvLyBGb3JjZSB0ZXJtaW5hdGlvbiBpZiB3ZSBzZWUgYSBtaXNwbGFjZWQgY29tbWEKCQkJaWYgKCByZXF1aXJlTm9uQ29tbWEgJiYgY29tbWEgKSB7CgkJCQlkZXB0aCA9IDA7CgkJCX0KCgkJCS8vIFBlcmZvcm0gbm8gbW9yZSByZXBsYWNlbWVudHMgYWZ0ZXIgcmV0dXJuaW5nIHRvIG91dGVybW9zdCBkZXB0aAoJCQlpZiAoIGRlcHRoID09PSAwICkgewoJCQkJcmV0dXJuIHRva2VuOwoJCQl9CgoJCQkvLyBDb21tYXMgbXVzdCBub3QgZm9sbG93ICJbIiwgInsiLCBvciAiLCIKCQkJcmVxdWlyZU5vbkNvbW1hID0gb3BlbiB8fCBjb21tYTsKCgkJCS8vIERldGVybWluZSBuZXcgZGVwdGgKCQkJLy8gYXJyYXkvb2JqZWN0IG9wZW4gKCJbIiBvciAieyIpOiBkZXB0aCArPSB0cnVlIC0gZmFsc2UgKGluY3JlbWVudCkKCQkJLy8gYXJyYXkvb2JqZWN0IGNsb3NlICgiXSIgb3IgIn0iKTogZGVwdGggKz0gZmFsc2UgLSB0cnVlIChkZWNyZW1lbnQpCgkJCS8vIG90aGVyIGNhc2VzICgiLCIgb3IgcHJpbWl0aXZlKTogZGVwdGggKz0gdHJ1ZSAtIHRydWUgKG51bWVyaWMgY2FzdCkKCQkJZGVwdGggKz0gIWNsb3NlIC0gIW9wZW47CgoJCQkvLyBSZW1vdmUgdGhpcyB0b2tlbgoJCQlyZXR1cm4gIiI7CgkJfSApICkgPwoJCQkoIEZ1bmN0aW9uKCAicmV0dXJuICIgKyBzdHIgKSApKCkgOgoJCQlqUXVlcnkuZXJyb3IoICJJbnZhbGlkIEpTT046ICIgKyBkYXRhICk7Cgl9OwoKCgkvLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nCglqUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHsKCQl2YXIgeG1sLCB0bXA7CgkJaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQl0cnkgewoJCQlpZiAoIHdpbmRvdy5ET01QYXJzZXIgKSB7IC8vIFN0YW5kYXJkCgkJCQl0bXAgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpOwoJCQkJeG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgInRleHQveG1sIiApOwoJCQl9IGVsc2UgeyAvLyBJRQoJCQkJeG1sID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCAiTWljcm9zb2Z0LlhNTERPTSIgKTsKCQkJCXhtbC5hc3luYyA9ICJmYWxzZSI7CgkJCQl4bWwubG9hZFhNTCggZGF0YSApOwoJCQl9CgkJfSBjYXRjaCAoIGUgKSB7CgkJCXhtbCA9IHVuZGVmaW5lZDsKCQl9CgkJaWYgKCAheG1sIHx8ICF4bWwuZG9jdW1lbnRFbGVtZW50IHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggInBhcnNlcmVycm9yIiApLmxlbmd0aCApIHsKCQkJalF1ZXJ5LmVycm9yKCAiSW52YWxpZCBYTUw6ICIgKyBkYXRhICk7CgkJfQoJCXJldHVybiB4bWw7Cgl9OwoKCgl2YXIKCQlyaGFzaCA9IC8jLiokLywKCQlydHMgPSAvKFs/Jl0pXz1bXiZdKi8sCgoJCS8vIElFIGxlYXZlcyBhbiBcciBjaGFyYWN0ZXIgYXQgRU9MCgkJcmhlYWRlcnMgPSAvXiguKj8pOlsgXHRdKihbXlxyXG5dKilccj8kL21nLAoKCQkvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb24KCQlybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLAoJCXJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLAoJCXJwcm90b2NvbCA9IC9eXC9cLy8sCgkJcnVybCA9IC9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLAoKCQkvKiBQcmVmaWx0ZXJzCgkJICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSkKCQkgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOgoJCSAqICAgIC0gQkVGT1JFIGFza2luZyBmb3IgYSB0cmFuc3BvcnQKCQkgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpCgkJICogMykga2V5IGlzIHRoZSBkYXRhVHlwZQoJCSAqIDQpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkJICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byAiKiIgaWYgbmVlZGVkCgkJICovCgkJcHJlZmlsdGVycyA9IHt9LAoKCQkvKiBUcmFuc3BvcnRzIGJpbmRpbmdzCgkJICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZQoJCSAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkJICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gIioiIGlmIG5lZWRlZAoJCSAqLwoJCXRyYW5zcG9ydHMgPSB7fSwKCgkJLy8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uCgkJYWxsVHlwZXMgPSAiKi8iLmNvbmNhdCggIioiICksCgoJCS8vIERvY3VtZW50IGxvY2F0aW9uCgkJYWpheExvY2F0aW9uID0gbG9jYXRpb24uaHJlZiwKCgkJLy8gU2VnbWVudCBsb2NhdGlvbiBpbnRvIHBhcnRzCgkJYWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdOwoKCS8vIEJhc2UgImNvbnN0cnVjdG9yIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0CglmdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHsKCgkJLy8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAiKiIKCQlyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHsKCgkJCWlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gInN0cmluZyIgKSB7CgkJCQlmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uOwoJCQkJZGF0YVR5cGVFeHByZXNzaW9uID0gIioiOwoJCQl9CgoJCQl2YXIgZGF0YVR5cGUsCgkJCQlpID0gMCwKCQkJCWRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHsKCgkJCQkvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uCgkJCQl3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7CgoJCQkJCS8vIFByZXBlbmQgaWYgcmVxdWVzdGVkCgkJCQkJaWYgKCBkYXRhVHlwZS5jaGFyQXQoIDAgKSA9PT0gIisiICkgewoJCQkJCQlkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgIioiOwoJCQkJCQkoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnVuc2hpZnQoIGZ1bmMgKTsKCgkJCQkJLy8gT3RoZXJ3aXNlIGFwcGVuZAoJCQkJCX0gZWxzZSB7CgkJCQkJCSggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX07Cgl9CgoJLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzCglmdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkgewoKCQl2YXIgaW5zcGVjdGVkID0ge30sCgkJCXNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApOwoKCQlmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHsKCQkJdmFyIHNlbGVjdGVkOwoJCQlpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlOwoJCQlqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkgewoJCQkJdmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTsKCQkJCWlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09ICJzdHJpbmciICYmCgkJCQkJIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkgewoKCQkJCQlvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7CgkJCQkJaW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7CgkJCQkJcmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJfQoJCQl9ICk7CgkJCXJldHVybiBzZWxlY3RlZDsKCQl9CgoJCXJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgIioiIF0gJiYgaW5zcGVjdCggIioiICk7Cgl9CgoJLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zCgkvLyB0aGF0IHRha2VzICJmbGF0IiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZCkKCS8vIEZpeGVzICM5ODg3CglmdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHsKCQl2YXIgZGVlcCwga2V5LAoJCQlmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307CgoJCWZvciAoIGtleSBpbiBzcmMgKSB7CgkJCWlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkgewoJCQkJKCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKCBkZWVwID0ge30gKSApIClbIGtleSBdID0gc3JjWyBrZXkgXTsKCQkJfQoJCX0KCQlpZiAoIGRlZXAgKSB7CgkJCWpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApOwoJCX0KCgkJcmV0dXJuIHRhcmdldDsKCX0KCgkvKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6CgkgKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKQoJICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlCgkgKi8KCWZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7CgkJdmFyIGZpcnN0RGF0YVR5cGUsIGN0LCBmaW5hbERhdGFUeXBlLCB0eXBlLAoJCQljb250ZW50cyA9IHMuY29udGVudHMsCgkJCWRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzOwoKCQkvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2VzcwoJCXdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09ICIqIiApIHsKCQkJZGF0YVR5cGVzLnNoaWZ0KCk7CgkJCWlmICggY3QgPT09IHVuZGVmaW5lZCApIHsKCQkJCWN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggIkNvbnRlbnQtVHlwZSIgKTsKCQkJfQoJCX0KCgkJLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlCgkJaWYgKCBjdCApIHsKCQkJZm9yICggdHlwZSBpbiBjb250ZW50cyApIHsKCQkJCWlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250", "base64"));
  res.write(new Buffer("ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7CgkJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlCgkJaWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7CgkJCWZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTsKCQl9IGVsc2UgewoKCQkJLy8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlcwoJCQlmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHsKCQkJCWlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArICIgIiArIGRhdGFUeXBlc1sgMCBdIF0gKSB7CgkJCQkJZmluYWxEYXRhVHlwZSA9IHR5cGU7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQlpZiAoICFmaXJzdERhdGFUeXBlICkgewoJCQkJCWZpcnN0RGF0YVR5cGUgPSB0eXBlOwoJCQkJfQoJCQl9CgoJCQkvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmUKCQkJZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTsKCQl9CgoJCS8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGUKCQkvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZAoJCS8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2UKCQlpZiAoIGZpbmFsRGF0YVR5cGUgKSB7CgkJCWlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7CgkJCQlkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApOwoJCQl9CgkJCXJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTsKCQl9Cgl9CgoJLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZQoJICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlCgkgKi8KCWZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHsKCQl2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldiwKCQkJY29udmVydGVycyA9IHt9LAoKCQkJLy8gV29yayB3aXRoIGEgY29weSBvZiBkYXRhVHlwZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vZGlmeSBpdCBmb3IgY29udmVyc2lvbgoJCQlkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpOwoKCQkvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXMKCQlpZiAoIGRhdGFUeXBlc1sgMSBdICkgewoJCQlmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHsKCQkJCWNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07CgkJCX0KCQl9CgoJCWN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTsKCgkJLy8gQ29udmVydCB0byBlYWM=", "base64"));
  res.write(new Buffer("aCBzZXF1ZW50aWFsIGRhdGFUeXBlCgkJd2hpbGUgKCBjdXJyZW50ICkgewoKCQkJaWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7CgkJCQlqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTsKCQkJfQoKCQkJLy8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWQKCQkJaWYgKCAhcHJldiAmJiBpc1N1Y2Nlc3MgJiYgcy5kYXRhRmlsdGVyICkgewoJCQkJcmVzcG9uc2UgPSBzLmRhdGFGaWx0ZXIoIHJlc3BvbnNlLCBzLmRhdGFUeXBlICk7CgkJCX0KCgkJCXByZXYgPSBjdXJyZW50OwoJCQljdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7CgoJCQlpZiAoIGN1cnJlbnQgKSB7CgoJCQkJLy8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0bwoJCQkJaWYgKCBjdXJyZW50ID09PSAiKiIgKSB7CgoJCQkJCWN1cnJlbnQgPSBwcmV2OwoKCQkJCS8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnQKCQkJCX0gZWxzZSBpZiAoIHByZXYgIT09ICIqIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkgewoKCQkJCQkvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlcgoJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbICIqICIgKyBjdXJyZW50IF07CgoJCQkJCS8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyCgkJCQkJaWYgKCAhY29udiApIHsKCQkJCQkJZm9yICggY29udjIgaW4gY29udmVydGVycyApIHsKCgkJCQkJCQkvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnQKCQkJCQkJCXRtcCA9IGNvbnYyLnNwbGl0KCAiICIgKTsKCQkJCQkJCWlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7CgoJCQkJCQkJCS8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dAoJCQkJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgdG1wWyAwIF0gXSB8fAoJCQkJCQkJCQljb252ZXJ0ZXJzWyAiKiAiICsgdG1wWyAwIF0gXTsKCQkJCQkJCQlpZiAoIGNvbnYgKSB7CgoJCQkJCQkJCQkvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzCgkJCQkJCQkJCWlmICggY29udiA9PT0gdHJ1ZSApIHsKCQkJCQkJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdOwoKCQkJCQkJCQkJLy8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZQoJCQkJCQkJCQl9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkgewoJCQkJCQkJCQkJY3VycmVudCA9IHRtcFsgMCBdOwoJCQkJCQkJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSkKCQkJCQlpZiAoIGNvbnYgIT09IHRydWUgKSB7CgoJCQkJCQkvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtCgkJCQkJCWlmICggY29udiAmJiBzWyAidGhyb3dzIiBdICkgeyAvLyBqc2NzOmlnbm9yZSByZXF1aXJlRG90Tm90YXRpb24KCQkJCQkJCXJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJcmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApOwoJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJc3RhdGU6ICJwYXJzZXJlcnJvciIsCgkJCQkJCQkJCWVycm9yOiBjb252ID8gZSA6ICJObyBjb252ZXJzaW9uIGZyb20gIiArIHByZXYgKyAiIHRvICIgKyBjdXJyZW50CgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHsgc3RhdGU6ICJzdWNjZXNzIiwgZGF0YTogcmVzcG9uc2UgfTsKCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgoJCS8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllcwoJCWFjdGl2ZTogMCwKCgkJLy8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdAoJCWxhc3RNb2RpZmllZDoge30sCgkJZXRhZzoge30sCgoJCWFqYXhTZXR0aW5nczogewoJCQl1cmw6IGFqYXhMb2NhdGlvbiwKCQkJdHlwZTogIkdFVCIsCgkJCWlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGFqYXhMb2NQYXJ0c1sgMSBdICksCgkJCWdsb2JhbDogdHJ1ZSwKCQkJcHJvY2Vzc0RhdGE6IHRydWUsCgkJCWFzeW5jOiB0cnVlLAoJCQljb250ZW50VHlwZTogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCgkJCS8qCgkJCXRpbWVvdXQ6IDAsCgkJCWRhdGE6IG51bGwsCgkJCWRhdGFUeXBlOiBudWxsLAoJCQl1c2VybmFtZTogbnVsbCwKCQkJcGFzc3dvcmQ6IG51bGwsCgkJCWNhY2hlOiBudWxsLAoJCQl0aHJvd3M6IGZhbHNlLAoJCQl0cmFkaXRpb25hbDogZmFsc2UsCgkJCWhlYWRlcnM6IHt9LAoJCQkqLwoKCQkJYWNjZXB0czogewoJCQkJIioiOiBhbGxUeXBlcywKCQkJCXRleHQ6ICJ0ZXh0L3BsYWluIiwKCQkJCWh0bWw6ICJ0ZXh0L2h0bWwiLAoJCQkJeG1sOiAiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsCgkJCQlqc29uOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0IgoJCQl9LAoKCQkJY29udGVudHM6IHsKCQkJCXhtbDogL1xieG1sXGIvLAoJCQkJaHRtbDogL1xiaHRtbC8sCgkJCQlqc29uOiAvXGJqc29uXGIvCgkJCX0sCgoJCQlyZXNwb25zZUZpZWxkczogewoJCQkJeG1sOiAicmVzcG9uc2VYTUwiLAoJCQkJdGV4dDogInJlc3BvbnNlVGV4dCIsCgkJCQlqc29uOiAicmVzcG9uc2VKU09OIgoJCQl9LAoKCQkJLy8gRGF0YSBjb252ZXJ0ZXJzCgkJCS8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCAiKiIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlCgkJCWNvbnZlcnRlcnM6IHsKCgkJCQkvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHQKCQkJCSIqIHRleHQiOiBTdHJpbmcsCgoJCQkJLy8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pCgkJCQkidGV4dCBodG1sIjogdHJ1ZSwKCgkJCQkvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uCgkJCQkidGV4dCBqc29uIjogalF1ZXJ5LnBhcnNlSlNPTiwKCgkJCQkvLyBQYXJzZSB0ZXh0IGFzIHhtbAoJCQkJInRleHQgeG1sIjogalF1ZXJ5LnBhcnNlWE1MCgkJCX0sCgoJCQkvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOgoJCQkvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmCgkJCS8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlCgkJCS8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKQoJCQlmbGF0T3B0aW9uczogewoJCQkJdXJsOiB0cnVlLAoJCQkJY29udGV4dDogdHJ1ZQoJCQl9CgkJfSwKCgkJLy8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXQKCQkvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuCgkJLy8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy4KCQlhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkgewoJCQlyZXR1cm4gc2V0dGluZ3MgPwoKCQkJCS8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0CgkJCQlhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6CgoJCQkJLy8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5ncwoJCQkJYWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7CgkJfSwKCgkJYWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksCgkJYWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksCgoJCS8vIE1haW4gbWV0aG9kCgkJYWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHsKCgkJCS8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlCgkJCWlmICggdHlwZW9mIHVybCA9PT0gIm9iamVjdCIgKSB7CgkJCQlvcHRpb25zID0gdXJsOwoJCQkJdXJsID0gdW5kZWZpbmVkOwoJCQl9CgoJCQkvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdAoJCQlvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCgkJCXZhcgoKCQkJCS8vIENyb3NzLWRvbWFpbiBkZXRlY3Rpb24gdmFycwoJCQkJcGFydHMsCgoJCQkJLy8gTG9vcCB2YXJpYWJsZQoJCQkJaSwKCgkJCQkvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtCgkJCQljYWNoZVVSTCwKCgkJCQkvLyBSZXNwb25zZSBoZWFkZXJzIGFzIHN0cmluZwoJCQkJcmVzcG9uc2VIZWFkZXJzU3RyaW5nLAoKCQkJCS8vIHRpbWVvdXQgaGFuZGxlCgkJCQl0aW1lb3V0VGltZXIsCgoJCQkJLy8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkCgkJCQlmaXJlR2xvYmFscywKCgkJCQl0cmFuc3BvcnQsCgoJCQkJLy8gUmVzcG9uc2UgaGVhZGVycwoJCQkJcmVzcG9uc2VIZWFkZXJzLAoKCQkJCS8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3QKCQkJCXMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLAoKCQkJCS8vIENhbGxiYWNrcyBjb250ZXh0CgkJCQljYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcywKCgkJCQkvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uCgkJCQlnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYKCQkJCQkoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgPwoJCQkJCQlqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDoKCQkJCQkJalF1ZXJ5LmV2ZW50LAoKCQkJCS8vIERlZmVycmVkcwoJCQkJZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJCWNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksCgoJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCXN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sCgoJCQkJLy8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSkKCQkJCXJlcXVlc3RIZWFkZXJzID0ge30sCgkJCQlyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sCgoJCQkJLy8gVGhlIGpxWEhSIHN0YXRlCgkJCQlzdGF0ZSA9IDAsCgoJCQkJLy8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlCgkJCQlzdHJBYm9ydCA9ICJjYW5jZWxlZCIsCgoJCQkJLy8gRmFrZSB4aHIKCQkJCWpxWEhSID0gewoJCQkJCXJlYWR5U3RhdGU6IDAsCgoJCQkJCS8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWQKCQkJCQlnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHsKCQkJCQkJdmFyIG1hdGNoOwoJCQkJCQlpZiAoIHN0YXRlID09PSAyICkgewoJCQkJCQkJaWYgKCAhcmVzcG9uc2VIZWFkZXJzICkgewoJCQkJCQkJCXJlc3BvbnNlSGVhZGVycyA9IHt9OwoJCQkJCQkJCXdoaWxlICggKCBtYXRjaCA9IHJoZWE=", "base64"));
  res.write(new Buffer("ZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSApICkgewoJCQkJCQkJCQlyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQltYXRjaCA9IHJlc3BvbnNlSGVhZGVyc1sga2V5LnRvTG93ZXJDYXNlKCkgXTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDsKCQkJCQl9LAoKCQkJCQkvLyBSYXcgc3RyaW5nCgkJCQkJZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDsKCQkJCQl9LAoKCQkJCQkvLyBDYWNoZXMgdGhlIGhlYWRlcgoJCQkJCXNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQkJCQkJdmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJCQlpZiAoICFzdGF0ZSApIHsKCQkJCQkJCW5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSB8fCBuYW1lOwoJCQkJCQkJcmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlOwoJCQkJCQl9CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0sCgoJCQkJCS8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyCgkJCQkJb3ZlcnJpZGVNaW1lVHlwZTogZnVuY3Rpb24oIHR5cGUgKSB7CgkJCQkJCWlmICggIXN0YXRlICkgewoJCQkJCQkJcy5taW1lVHlwZSA9IHR5cGU7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfSwKCgkJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCQlzdGF0dXNDb2RlOiBmdW5jdGlvbiggbWFwICkgewoJCQkJCQl2YXIgY29kZTsKCQkJCQkJaWYgKCBtYXAgKSB7CgkJCQkJCQlpZiAoIHN0YXRlIDwgMiApIHsKCQkJCQkJCQlmb3IgKCBjb2RlIGluIG1hcCApIHsKCgkJCQkJCQkJCS8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2sgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXMKCQkJCQkJCQkJc3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJLy8gRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzCgkJCQkJCQkJanFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfSwKCgkJCQkJLy8gQ2FuY2VsIHRoZSByZXF1ZXN0CgkJCQkJYWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkgewoJCQkJCQl2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDsKCQkJCQkJaWYgKCB0cmFuc3BvcnQgKSB7CgkJCQkJCQl0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApOwoJCQkJCQl9CgkJCQkJCWRvbmUoIDAsIGZpbmFsVGV4dCApOwoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9CgkJCQl9OwoKCQkJLy8gQXR0YWNoIGRlZmVycmVkcwoJCQlkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7CgkJCWpxWEhSLnN1Y2Nlc3MgPSBqcVhIUi5kb25lOwoJCQlqcVhIUi5lcnJvciA9IGpxWEhSLmZhaWw7CgoJCQkvLyBSZW1vdmUgaGFzaCBjaGFyYWN0ZXIgKCM3NTMxOiBhbmQgc3RyaW5nIHByb21vdGlvbikKCQkJLy8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAoIzU4NjY6IElFNyBpc3N1ZSB3aXRoIHByb3RvY29sLWxlc3MgdXJscykKCQkJLy8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSkKCQkJLy8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlCgkJCXMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBhamF4TG9jYXRpb24gKSArICIiICkKCQkJCS5yZXBsYWNlKCByaGFzaCwgIiIgKQoJCQkJLnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyAiLy8iICk7CgoJCQkvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDQKCQkJcy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTsKCgkJCS8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3QKCQkJcy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCAiKiIgKS50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbICIiIF07CgoJCQkvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gd2UgaGF2ZSBhIHByb3RvY29sOmhvc3Q6cG9ydCBtaXNtYXRjaAoJCQlpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHsKCQkJCXBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7CgkJCQlzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmCgkJCQkJKCBwYXJ0c1sgMSBdICE9PSBhamF4TG9jUGFydHNbIDEgXSB8fCBwYXJ0c1sgMiBdICE9PSBhamF4TG9jUGFydHNbIDIgXSB8fAoJCQkJCQkoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSAiaHR0cDoiID8gIjgwIiA6ICI0NDMiICkgKSAhPT0KCQkJCQkJCSggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gImh0dHA6IiA/ICI4MCIgOiAiNDQzIiApICkgKQoJCQkJKTsKCQkJfQoKCQkJLy8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nCgkJCWlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCQlzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApOwoJCQl9CgoJCQkvLyBBcHBseSBwcmVmaWx0ZXJzCgkJCWluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApOwoKCQkJLy8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmUKCQkJaWYgKCBzdGF0ZSA9PT0gMiApIHsKCQkJCXJldHVybiBqcVhIUjsKCQkJfQoKCQkJLy8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG8KCQkJLy8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOCkKCQkJZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7CgoJCQkvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzCgkJCWlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkgewoJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoICJhamF4U3RhcnQiICk7CgkJCX0KCgkJCS8vIFVwcGVyY2FzZSB0aGUgdHlwZQoJCQlzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTsKCgkJCS8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50CgkJCXMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApOwoKCQkJLy8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlCgkJCS8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvbgoJCQljYWNoZVVSTCA9IHMudXJsOwoKCQkJLy8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnQKCQkJaWYgKCAhcy5oYXNDb250ZW50ICkgewoKCQkJCS8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmwKCQkJCWlmICggcy5kYXRhICkgewoJCQkJCWNhY2hlVVJMID0gKCBzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gIiYiIDogIj8iICkgKyBzLmRhdGEgKTsKCgkJCQkJLy8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeQoJCQkJCWRlbGV0ZSBzLmRhdGE7CgkJCQl9CgoJCQkJLy8gQWRkIGFudGktY2FjaGUgaW4gdXJsIGlmIG5lZWRlZAoJCQkJaWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHsKCQkJCQlzLnVybCA9IHJ0cy50ZXN0KCBjYWNoZVVSTCApID8KCgkJCQkJCS8vIElmIHRoZXJlIGlzIGFscmVhZHkgYSAnXycgcGFyYW1ldGVyLCBzZXQgaXRzIHZhbHVlCgkJCQkJCWNhY2hlVVJMLnJlcGxhY2UoIHJ0cywgIiQxXz0iICsgbm9uY2UrKyApIDoKCgkJCQkJCS8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmQKCQkJCQkJY2FjaGVVUkwgKyAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gIiYiIDogIj8iICkgKyAiXz0iICsgbm9uY2UrKzsKCQkJCX0KCQkJfQoKCQkJLy8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS4KCQkJaWYgKCBzLmlmTW9kaWZpZWQgKSB7CgkJCQlpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7CgkJCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggIklmLU1vZGlmaWVkLVNpbmNlIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApOwoJCQkJfQoJCQkJaWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHsKCQkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiSWYtTm9uZS1NYXRjaCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7CgkJCQl9CgkJCX0KCgkJCS8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudAoJCQlpZiAoIHMuZGF0YSAmJiBzLmhhc0NvbnRlbnQgJiYgcy5jb250ZW50VHlwZSAhPT0gZmFsc2UgfHwgb3B0aW9ucy5jb250ZW50VHlwZSApIHsKCQkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoICJDb250ZW50LVR5cGUiLCBzLmNvbnRlbnRUeXBlICk7CgkJCX0KCgkJCS8vIFNldCB0aGUgQWNjZXB0cyBoZWFkZXIgZm9yIHRoZSBzZXJ2ZXIsIGRlcGVuZGluZyBvbiB0aGUgZGF0YVR5cGUKCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlcigKCQkJCSJBY2NlcHQiLAoJCQkJcy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/CgkJCQkJcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gKwoJCQkJCQkoIHMuZGF0YVR5cGVzWyAwIF0gIT09ICIqIiA/ICIsICIgKyBhbGxUeXBlcyArICI7IHE9MC4wMSIgOiAiIiApIDoKCQkJCQlzLmFjY2VwdHNbICIqIiBdCgkJCSk7CgoJCQkvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb24KCQkJZm9yICggaSBpbiBzLmhlYWRlcnMgKSB7CgkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApOwoJCQl9CgoJCQkvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0CgkJCWlmICggcy5iZWZvcmVTZW5kICYmCgkJCQkoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7CgoJCQkJLy8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuCgkJCQlyZXR1cm4ganFYSFIuYWJvcnQoKTsKCQkJfQoKCQkJLy8gYWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uCgkJCXN0ckFib3J0ID0gImFib3J0IjsKCgkJCS8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkcwoJCQlmb3IgKCBpIGluIHsgc3VjY2VzczogMSwgZXJyb3I6IDEsIGNvbXBsZXRlOiAxIH0gKSB7CgkJCQlqcVhIUlsgaSBdKCBzWyBpIF0gKTsKCQkJfQoKCQkJLy8gR2V0IHRyYW5zcG9ydAoJCQl0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTsKCgkJCS8vIElmIG5vIHRyYW5zcG9ydCwgd2UgYXV0by1hYm9ydAoJCQlpZiAoICF0cmFuc3BvcnQgKSB7CgkJCQlkb25lKCAtMSwgIk5vIFRyYW5zcG9ydCIgKTsKCQkJfSBlbHNlIHsKCQkJCWpxWEhSLnJlYWR5U3RhdGUgPSAxOwoKCQkJCS8vIFNlbmQgZ2xvYmFsIGV2ZW50CgkJCQlpZiAoIGZpcmVHbG9iYWxzICkgewoJCQkJCWdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCAiYWpheFNlbmQiLCBbIGpxWEhSLCBzIF0gKTsKCQkJCX0KCgkJCQkvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhamF4U2VuZCwgc3RvcCB0aGVyZQoJCQkJaWYgKCBzdGF0ZSA9PT0gMiApIHsKCQkJCQlyZXR1cm4ganFYSFI7CgkJCQl9CgoJCQkJLy8gVGltZW91dAoJCQkJaWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7CgkJCQkJdGltZW91dFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewoJCQkJCQlqcVhIUi5hYm9ydCggInRpbWVvdXQiICk7CgkJCQkJfSwgcy50aW1lb3V0ICk7CgkJCQl9CgoJCQkJdHJ5IHsKCQkJCQlzdGF0ZSA9IDE7CgkJCQkJdHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7CgkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJLy8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZQoJCQkJCWlmICggc3RhdGUgPCAyICkgewoJCQkJCQlkb25lKCAtMSwgZSApOwoKCQkJCQkvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2UKCQkJCQl9IGVsc2UgewoJCQkJCQl0aHJvdyBlOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lCgkJCWZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkgewoJCQkJdmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCwKCQkJCQlzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDsKCgkJCQkvLyBDYWxsZWQgb25jZQoJCQkJaWYgKCBzdGF0ZSA9PT0gMiApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJLy8gU3RhdGUgaXMgImRvbmUiIG5vdwoJCQkJc3RhdGUgPSAyOwoKCQkJCS8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzCgkJCQlpZiAoIHRpbWVvdXRUaW1lciApIHsKCQkJCQl3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTsKCQkJCX0KCgkJCQkvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvbgoJCQkJLy8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZCkKCQkJCXRyYW5zcG9ydCA9IHVuZGVmaW5lZDsKCgkJCQkvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzCgkJCQlyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8ICIiOwoKCQkJCS8vIFNldCByZWFkeVN0YXRlCgkJCQlqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwOwoKCQkJCS8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsCgkJCQlpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDsKCgkJCQkvLyBHZXQgcmVzcG9uc2UgZGF0YQoJCQkJaWYgKCByZXNwb25zZXMgKSB7CgkJCQkJcmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7CgkJCQl9CgoJCQkJLy8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KQoJCQkJcmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTsKCgkJCQkvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZwoJCQkJaWYgKCBpc1N1Y2Nlc3MgKSB7CgoJCQkJCS8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuCgkJCQkJaWYgKCBzLmlmTW9kaWZpZWQgKSB7CgkJCQkJCW1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoICJMYXN0LU1vZGlmaWVkIiApOwoJCQkJCQlpZiAoIG1vZGlmaWVkICkgewoJCQkJCQkJalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkOwoJCQkJCQl9CgkJCQkJCW1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoICJldGFnIiApOwoJCQkJCQlpZiAoIG1vZGlmaWVkICkgewoJCQkJCQkJalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLy8gaWYgbm8gY29udGVudAoJCQkJCWlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSAiSEVBRCIgKSB7CgkJCQkJCXN0YXR1c1RleHQgPSAibm9jb250ZW50IjsKCgkJCQkJLy8gaWYgbm90IG1vZGlmaWVkCgkJCQkJfSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7CgkJCQkJCXN0YXR1c1RleHQgPSAibm90bW9kaWZpZWQiOwoKCQkJCQkvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXQKCQkJCQl9IGVsc2UgewoJCQkJCQlzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7CgkJCQkJCXN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhOwoJCQkJCQllcnJvciA9IHJlc3BvbnNlLmVycm9yOwoJCQkJCQlpc1N1Y2Nlc3MgPSAhZXJyb3I7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCgkJCQkJLy8gV2UgZXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQKCQkJCQkvLyB0aGVuIG5vcm1hbGl6ZSBzdGF0dXNUZXh0IGFuZCBzdGF0dXMgZm9yIG5vbi1hYm9ydHMKCQkJCQllcnJvciA9IHN0YXR1c1RleHQ7CgkJCQkJaWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7CgkJCQkJCXN0YXR1c1RleHQgPSAiZXJyb3IiOwoJCQkJCQlpZiAoIHN0YXR1cyA8IDAgKSB7CgkJCQkJCQlzdGF0dXMgPSAwOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0CgkJCQlqcVhIUi5zdGF0dXMgPSBzdGF0dXM7CgkJCQlqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArICIiOwoKCQkJCS8vIFN1Y2Nlc3MvRXJyb3IKCQkJCWlmICggaXNTdWNjZXNzICkgewoJCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTsKCQkJCX0KCgkJCQkvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrcwoJCQkJanFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApOwoJCQkJc3RhdHVzQ29kZSA9IHVuZGVmaW5lZDsKCgkJCQlpZiAoIGZpcmVHbG9iYWxzICkgewoJCQkJCWdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyAiYWpheFN1Y2Nlc3MiIDogImFqYXhFcnJvciIsCgkJCQkJCVsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7CgkJCQl9CgoJCQkJLy8gQ29tcGxldGUKCQkJCWNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7CgoJCQkJaWYgKCBmaXJlR2xvYmFscyApIHsKCQkJCQlnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggImFqYXhDb21wbGV0ZSIsIFsganFYSFIsIHMgXSApOwoKCQkJCQkvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXIKCQkJCQlpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkgewoJCQkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggImFqYXhTdG9wIiApOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGpxWEhSOwoJCX0sCgoJCWdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkgewoJCQlyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgImpzb24iICk7CgkJfSwKCgkJZ2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgInNjcmlwdCIgKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmVhY2goIFsgImdldCIsICJwb3N0IiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkgewoJCWpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHsKCgkJCS8vIHNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkCgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGRhdGEgKSApIHsKCQkJCXR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrOwoJCQkJY2FsbGJhY2sgPSBkYXRhOwoJCQkJZGF0YSA9IHVuZGVmaW5lZDsKCQkJfQoKCQkJLy8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpCgkJCXJldHVybiBqUXVlcnkuYWpheCggalF1ZXJ5LmV4dGVuZCggewoJCQkJdXJsOiB1cmwsCgkJCQl0eXBlOiBtZXRob2QsCgkJCQlkYXRhVHlwZTogdHlwZSwKCQkJCWRhdGE6IGRhdGEsCgkJCQlzdWNjZXNzOiBjYWxsYmFjawoJCQl9LCBqUXVlcnkuaXNQbGFpbk9iamVjdCggdXJsICkgJiYgdXJsICkgKTsKCQl9OwoJfSApOwoKCglqUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkgewoJCXJldHVybiBqUXVlcnkuYWpheCggewoJCQl1cmw6IHVybCwKCgkJCS8vIE1ha2UgdGhpcyBleHBsaWNpdCwgc2luY2UgdXNlciBjYW4gb3ZlcnJpZGUgdGhpcyB0aHJvdWdoIGFqYXhTZXR1cCAoIzExMjY0KQoJCQl0eXBlOiAiR0VUIiwKCQkJZGF0YVR5cGU6ICJzY3JpcHQiLAoJCQljYWNoZTogdHJ1ZSwKCQkJYXN5bmM6IGZhbHNlLAoJCQlnbG9iYWw6IGZhbHNlLAoJCQkidGhyb3dzIjogdHJ1ZQoJCX0gKTsKCX07CgoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQl3cmFwQWxsOiBmdW5jdGlvbiggaHRtbCApIHsKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJaWYgKCB0aGlzWyAwIF0gKSB7CgoJCQkJLy8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmQKCQkJCXZhciB3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTsKCgkJCQlpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgewoJCQkJCXdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWyAwIF0gKTsKCQkJCX0KCgkJCQl3cmFwLm1hcCggZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGVsZW0gPSB0aGlzOwoKCQkJCQl3aGlsZSAoIGVsZW0uZmlyc3RDaGlsZCAmJiBlbGVtLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCWVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7CgkJCQkJfQoKCQkJCQlyZXR1cm4gZWxlbTsKCQkJCX0gKS5hcHBlbmQoIHRoaXMgKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJd3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHsKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCXZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksCgkJCQkJY29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7CgoJCQkJaWYgKCBjb250ZW50cy5sZW5ndGggKSB7CgkJCQkJY29udGVudHMud3JhcEFsbCggaHRtbCApOwoKCQkJCX0gZWxzZSB7CgkJCQkJc2VsZi5hcHBlbmQoIGh0bWwgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCXdyYXA6IGZ1bmN0aW9uKCBodG1sICkgewoJCQl2YXIgaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICk7CgoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCWpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwoIHRoaXMsIGkgKSA6IGh0bWwgKTsKCQkJfSApOwoJCX0sCgoJCXVud3JhcDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiYm9keSIgKSApIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7CgkJCQl9CgkJCX0gKS5lbmQoKTsKCQl9Cgl9ICk7CgoKCWZ1bmN0aW9uIGdldERpc3BsYXkoIGVsZW0gKSB7CgkJcmV0dXJuIGVsZW0uc3R5bGUgJiYgZWxlbS5zdHlsZS5kaXNwbGF5IHx8IGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApOwoJfQoKCWZ1bmN0aW9uIGZpbHRlckhpZGRlbiggZWxlbSApIHsKCQl3aGlsZSAoIGVsZW0gJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJaWYgKCBnZXREaXNwbGF5KCBlbGVtICkgPT09ICJub25lIiB8fCBlbGVtLnR5cGUgPT09ICJoaWRkZW4iICkgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQkJZWxlbSA9IGVsZW0ucGFyZW50Tm9kZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoKCWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7CgoJCS8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyCgkJLy8gT3BlcmEgcmVwb3J0cyBvZmZzZXRXaWR0aHMgYW5kIG9mZnNldEhlaWdodHMgbGVzcyB0aGFuIHplcm8gb24gc29tZSBlbGVtZW50cwoJCXJldHVybiBzdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpID8KCQkJKCBlbGVtLm9mZnNldFdpZHRoIDw9IDAgJiYgZWxlbS5vZmZzZXRIZWlnaHQgPD0gMCAmJgoJCQkJIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSA6CgkJCQlmaWx0ZXJIaWRkZW4oIGVsZW0gKTsKCX07CgoJalF1ZXJ5LmV4cHIuZmlsdGVycy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuICFqUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiggZWxlbSApOwoJfTsKCgoKCgl2YXIgcjIwID0gLyUyMC9nLAoJCXJicmFja2V0ID0gL1xbXF0kLywKCQlyQ1JMRiA9IC9ccj9cbi9nLAoJCXJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSwKCQlyc3VibWl0dGFibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7CgoJZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkgewoJCXZhciBuYW1lOwoKCQlpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHsKCgkJCS8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLgoJCQlqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHsKCQkJCWlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7CgoJCQkJCS8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci4KCQkJCQlhZGQoIHByZWZpeCwgdiApOwoKCQkJCX0gZWxzZSB7CgoJCQkJCS8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LgoJCQkJCWJ1aWxkUGFyYW1zKAoJCQkJCQlwcmVmaXggKyAiWyIgKyAoIHR5cGVvZiB2ID09PSAib2JqZWN0IiAmJiB2ICE9IG51bGwgPyBpIDogIiIgKSArICJdIiwKCQkJCQkJdiwKCQkJCQkJdHJhZGl0aW9uYWwsCgkJCQkJCWFkZAoJCQkJCSk7CgkJCQl9CgkJCX0gKTsKCgkJfSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gIm9iamVjdCIgKSB7CgoJCQkvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uCgkJCWZvciAoIG5hbWUgaW4gb2JqICkgewoJCQkJYnVpbGRQYXJhbXMoIHByZWZpeCArICJbIiArIG5hbWUgKyAiXSIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7CgkJCX0KCgkJfSBlbHNlIHsKCgkJCS8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS4KCQkJYWRkKCBwcmVmaXgsIG9iaiApOwoJCX0KCX0KCgkvLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZgoJLy8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nCglqUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7CgkJdmFyIHByZWZpeCwKCQkJcyA9IFtdLAoJCQlhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCgkJCQkvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWUKCQkJCXZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSApOwoJCQkJc1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlICk7CgkJCX07CgoJCS8vIFNldCB0cmFkaXRpb25hbCB0byB0cnVlIGZvciBqUXVlcnkgPD0gMS4zLjIgYmVoYXZpb3IuCgkJaWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkgewoJCQl0cmFkaXRpb25hbCA9IGpRdWVyeS5hamF4U2V0dGluZ3MgJiYgalF1ZXJ5LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDsKCQl9CgoJCS8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuCgkJaWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHsKCgkJCS8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50cwoJCQlqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7CgkJCQlhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApOwoJCQl9ICk7CgoJCX0gZWxzZSB7CgoJCQkvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSAib2xkIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXIKCQkJLy8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuCgkJCWZvciAoIHByZWZpeCBpbiBhICkgewoJCQkJYnVpbGRQYXJhbXMoIHByZWZpeCwgYVsgcHJlZml4IF0sIHRyYWRpdGlvbmFsLCBhZGQgKTsKCQkJfQoJCX0KCgkJLy8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvbgoJCXJldHVybiBzLmpvaW4oICImIiApLnJlcGxhY2UoIHIyMCwgIisiICk7Cgl9OwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlzZXJpYWxpemU6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTsKCQl9LAoJCXNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCgkJCQkvLyBDYW4gYWRkIHByb3BIb29rIGZvciAiZWxlbWVudHMiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50cwoJCQkJdmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsICJlbGVtZW50cyIgKTsKCQkJCXJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzOwoJCQl9ICkKCQkJLmZpbHRlciggZnVuY3Rpb24oKSB7CgkJCQl2YXIgdHlwZSA9IHRoaXMudHlwZTsKCgkJCQkvLyBVc2UgLmlzKCI6ZGlzYWJsZWQiKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3JrcwoJCQkJcmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoICI6ZGlzYWJsZWQiICkgJiYKCQkJCQlyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmCgkJCQkJKCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApOwoJCQl9ICkKCQkJLm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7CgkJCQl2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7CgoJCQkJcmV0dXJuIHZhbCA9PSBudWxsID8KCQkJCQludWxsIDoKCQkJCQlqUXVlcnkuaXNBcnJheSggdmFsICkgPwoJCQkJCQlqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7CgkJCQkJCQlyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsICJcclxuIiApIH07CgkJCQkJCX0gKSA6CgkJCQkJCXsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCAiXHJcbiIgKSB9OwoJCQl9ICkuZ2V0KCk7CgkJfQoJfSApOwoKCgkvLyBDcmVhdGUgdGhlIHJlcXVlc3Qgb2JqZWN0CgkvLyAoVGhpcyBpcyBzdGlsbCBhdHRhY2hlZCB0byBhamF4U2V0dGluZ3MgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpCglqUXVlcnkuYWpheFNldHRpbmdzLnhociA9IHdpbmRvdy5BY3RpdmVYT2JqZWN0ICE9PSB1bmRlZmluZWQgPwoKCQkvLyBTdXBwb3J0OiBJRTYtSUU4CgkJZnVuY3Rpb24oKSB7CgoJCQkvLyBYSFIgY2Fubm90IGFjY2VzcyBsb2NhbCBmaWxlcywgYWx3YXlzIHVzZSBBY3RpdmVYIGZvciB0aGF0IGNhc2UKCQkJaWYgKCB0aGlzLmlzTG9jYWwgKSB7CgkJCQlyZXR1cm4gY3JlYXRlQWN0aXZlWEhSKCk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFIDktMTEKCQkJLy8gSUUgc2VlbXMgdG8gZXJyb3Igb24gY3Jvc3MtZG9tYWluIFBBVENIIHJlcXVlc3RzIHdoZW4gQWN0aXZlWCBYSFIKCQkJLy8gaXMgdXNlZC4gSW4gSUUgOSsgYWx3YXlzIHVzZSB0aGUgbmF0aXZlIFhIUi4KCQkJLy8gTm90ZTogdGhpcyBjb25kaXRpb24gd29uJ3QgY2F0Y2ggRWRnZSBhcyBpdCBkb2Vzbid0IGRlZmluZQoJCQkvLyBkb2N1bWVudC5kb2N1bWVudE1vZGUgYnV0IGl0IGFsc28gZG9lc24ndCBzdXBwb3J0IEFjdGl2ZVggc28gaXQgd29uJ3QKCQkJLy8gcmVhY2ggdGhpcyBjb2RlLgoJCQlpZiAoIGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDggKSB7CgkJCQlyZXR1cm4gY3JlYXRlU3RhbmRhcmRYSFIoKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBvbGRJRSBYSFIgZG9lcyBub3Qgc3VwcG9ydCBub24tUkZDMjYxNiBtZXRob2RzICgjMTMyNDApCgkJCS8vIFNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvbXM1MzY2NDgodj12cy44NSkuYXNweAoJCQkvLyBhbmQgaHR0cDovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWM5Lmh0bWwjc2VjOQoJCQkvLyBBbHRob3VnaCB0aGlzIGNoZWNrIGZvciBzaXggbWV0aG9kcyBpbnN0ZWFkIG9mIGVpZ2h0CgkJCS8vIHNpbmNlIElFIGFsc28gZG9lcyBub3Qgc3VwcG9ydCAidHJhY2UiIGFuZCAiY29ubmVjdCIKCQkJcmV0dXJuIC9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaS50ZXN0KCB0aGlzLnR5cGUgKSAmJgoJCQkJY3JlYXRlU3RhbmRhcmRYSFIoKSB8fCBjcmVhdGVBY3RpdmVYSFIoKTsKCQl9IDoKCgkJLy8gRm9yIGFsbCBvdGhlciBicm93c2VycywgdXNlIHRoZSBzdGFuZGFyZCBYTUxIdHRwUmVxdWVzdCBvYmplY3QKCQljcmVhdGVTdGFuZGFyZFhIUjsKCgl2YXIgeGhySWQgPSAwLAoJCXhockNhbGxiYWNrcyA9IHt9LAoJCXhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7CgoJLy8gU3VwcG9ydDogSUU8MTAKCS8vIE9wZW4gcmVxdWVzdHMgbXVzdCBiZSBtYW51YWxseSBhYm9ydGVkIG9uIHVubG9hZCAoIzUyODApCgkvLyBTZWUgaHR0cHM6Ly9zdXBwb3J0Lm1pY3Jvc29mdC5jb20va2IvMjg1Njc0NiBmb3IgbW9yZSBpbmZvCglpZiAoIHdpbmRvdy5hdHRhY2hFdmVudCApIHsKCQl3aW5kb3cuYXR0YWNoRXZlbnQoICJvbnVubG9hZCIsIGZ1bmN0aW9uKCkgewoJCQlmb3IgKCB2YXIga2V5IGluIHhockNhbGxiYWNrcyApIHsKCQkJCXhockNhbGxiYWNrc1sga2V5IF0oIHVuZGVmaW5lZCwgdHJ1ZSApOwoJCQl9CgkJfSApOwoJfQoKCS8vIERldGVybWluZSBzdXBwb3J0IHByb3BlcnRpZXMKCXN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggIndpdGhDcmVkZW50aWFscyIgaW4geGhyU3VwcG9ydGVkICk7Cgl4aHJTdXBwb3J0ZWQgPSBzdXBwb3J0LmFqYXggPSAhIXhoclN1cHBvcnRlZDsKCgkvLyBDcmVhdGUgdHJhbnNwb3J0IGlmIHRoZSBicm93c2VyIGNhbiBwcm92aWRlIGFuIHhocgoJaWYgKCB4aHJTdXBwb3J0ZWQgKSB7CgoJCWpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHsKCgkJCS8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3QKCQkJaWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiB8fCBzdXBwb3J0LmNvcnMgKSB7CgoJCQkJdmFyIGNhbGxiYWNrOwoKCQkJCXJldHVybiB7CgkJCQkJc2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkgewoJCQkJCQl2YXIgaSwKCQkJCQkJCXhociA9IG9wdGlvbnMueGhyKCksCgkJCQkJCQlpZCA9ICsreGhySWQ7CgoJCQkJCQkvLyBPcGVuIHRoZSBzb2NrZXQKCQkJCQkJeGhyLm9wZW4oCgkJCQkJCQlvcHRpb25zLnR5cGUsCgkJCQkJCQlvcHRpb25zLnVybCwKCQkJCQkJCW9wdGlvbnMuYXN5bmMsCgkJCQkJCQlvcHRpb25zLnVzZXJuYW1lLAoJCQkJCQkJb3B0aW9ucy5wYXNzd29yZAoJCQkJCQkpOwoKCQkJCQkJLy8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZAoJCQkJCQlpZiAoIG9wdGlvbnMueGhyRmllbGRzICkgewoJCQkJCQkJZm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHsKCQkJCQkJCQl4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIE92ZXJyaWRlIG1pbWUgdHlwZSBpZiBuZWVkZWQKCQkJCQkJaWYgKCBvcHRpb25zLm1pbWVUeXBlICYmIHhoci5vdmVycmlkZU1pbWVUeXBlICkgewoJCQkJCQkJeGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTsKCQkJCQkJfQoKCQkJCQkJLy8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXIKCQkJCQkJLy8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZQoJCQkJCQkvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLgoJCQkJCQkvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cCkKCQkJCQkJLy8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuCgkJCQkJCWlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbICJYLVJlcXVlc3RlZC1XaXRoIiBdICkgewoJCQkJCQkJaGVhZGVyc1sgIlgtUmVxdWVzdGVkLVdpdGgiIF0gPSAiWE1MSHR0cFJlcXVlc3QiOwoJCQkJCQl9CgoJCQkJCQkvLyBTZXQgaGVhZGVycwoJCQkJCQlmb3IgKCBpIGluIGhlYWRlcnMgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkJLy8gSUUncyBBY3RpdmVYT2JqZWN0IHRocm93cyBhICdUeXBlIE1pc21hdGNoJyBleGNlcHRpb24gd2hlbiBzZXR0aW5nCgkJCQkJCQkvLyByZXF1ZXN0IGhlYWRlciB0byBhIG51bGwtdmFsdWUuCgkJCQkJCQkvLwoJCQkJCQkJLy8gVG8ga2VlcCBjb25zaXN0ZW50IHdpdGggb3RoZXIgWEhSIGltcGxlbWVudGF0aW9ucywgY2FzdCB0aGUgdmFsdWUKCQkJCQkJCS8vIHRvIHN0cmluZyBhbmQgaWdub3JlIGB1bmRlZmluZWRgLgoJCQkJCQkJaWYgKCBoZWFkZXJzWyBpIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCQkJCQl4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICsgIiIgKTsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gRG8gc2VuZCB0aGUgcmVxdWVzdAoJCQkJCQkvLyBUaGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24gd2hpY2ggaXMgYWN0dWFsbHkKCQkJCQkJLy8gaGFuZGxlZCBpbiBqUXVlcnkuYWpheCAoc28gbm8gdHJ5L2NhdGNoIGhlcmUpCgkJCQkJCXhoci5zZW5kKCAoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgKSB8fCBudWxsICk7CgoJCQkJCQkvLyBMaXN0ZW5lcgoJCQkJCQljYWxsYmFjayA9IGZ1bmN0aW9uKCBfLCBpc0Fib3J0ICkgewoJCQkJCQkJdmFyIHN0YXR1cywgc3RhdHVzVGV4dCwgcmVzcG9uc2VzOwoKCQkJCQkJCS8vIFdhcyBuZXZlciBjYWxsZWQgYW5kIGlzIGFib3J0ZWQgb3IgY29tcGxldGUKCQkJCQkJCWlmICggY2FsbGJhY2sgJiYgKCBpc0Fib3J0IHx8IHhoci5yZWFkeVN0YXRlID09PSA0ICkgKSB7CgoJCQkJCQkJCS8vIENsZWFuIHVwCgkJCQkJCQkJZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTsKCQkJCQkJCQljYWxsYmFjayA9IHVuZGVmaW5lZDsKCQkJCQkJCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0galF1ZXJ5Lm5vb3A7CgoJCQkJCQkJCS8vIEFib3J0IG1hbnVhbGx5IGlmIG5lZWRlZAoJCQkJCQkJCWlmICggaXNBYm9ydCApIHsKCQkJCQkJCQkJaWYgKCB4aHIucmVhZHlTdGF0ZSAhPT0gNCApIHsKCQkJCQkJCQkJCXhoci5hYm9ydCgpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmVzcG9uc2VzID0ge307CgkJCQkJCQkJCXN0YXR1cyA9IHhoci5zdGF0dXM7CgoJCQkJCQkJCQkvLyBTdXBwb3J0OiBJRTwxMAoJCQkJCQkJCQkvLyBBY2Nlc3NpbmcgYmluYXJ5LWRhdGEgcmVzcG9uc2VUZXh0IHRocm93cyBhbiBleGNlcHRpb24KCQkJCQkJCQkJLy8gKCMxMTQyNikKCQkJCQkJCQkJaWYgKCB0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCA9PT0gInN0cmluZyIgKSB7CgkJCQkJCQkJCQlyZXNwb25zZXMudGV4dCA9IHhoci5yZXNwb25zZVRleHQ7CgkJCQkJCQkJCX0KCgkJCQkJCQkJCS8vIEZpcmVmb3ggdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIGFjY2Vzc2luZwoJCQkJCQkJCQkvLyBzdGF0dXNUZXh0IGZvciBmYXVsdHkgY3Jvc3MtZG9tYWluIHJlcXVlc3RzCgkJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCQlzdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQ7CgkJCQkJCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkJCQkJCS8vIFdlIG5vcm1hbGl6ZSB3aXRoIFdlYmtpdCBnaXZpbmcgYW4gZW1wdHkgc3RhdHVzVGV4dAoJCQkJCQkJCQkJc3RhdHVzVGV4dCA9ICIiOwoJCQkJCQkJCQl9CgoJCQkJCQkJCQkvLyBGaWx0ZXIgc3RhdHVzIGZvciBub24gc3RhbmRhcmQgYmVoYXZpb3JzCgoJCQkJCQkJCQkvLyBJZiB0aGUgcmVxdWVzdCBpcyBsb2NhbCBhbmQgd2UgaGF2ZSBkYXRhOiBhc3N1bWUgYSBzdWNjZXNzCgkJCQkJCQkJCS8vIChzdWNjZXNzIHdpdGggbm8gZGF0YSB3b24ndCBnZXQgbm90aWZpZWQsIHRoYXQncyB0aGUgYmVzdCB3ZQoJCQkJCQkJCQkvLyBjYW4gZG8gZ2l2ZW4gY3VycmVudCBpbXBsZW1lbnRhdGlvbnMpCgkJCQkJCQkJCWlmICggIXN0YXR1cyAmJiBvcHRpb25zLmlzTG9jYWwgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7CgkJCQkJCQkJCQlzdGF0dXMgPSByZXNwb25zZXMudGV4dCA/IDIwMCA6IDQwNDsKCgkJCQkJCQkJCS8vIElFIC0gIzE0NTA6IHNvbWV0aW1lcyByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0CgkJCQkJCQkJCX0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMTIyMyApIHsKCQkJCQkJCQkJCXN0YXR1cyA9IDIwNDsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQkvLyBDYWxsIGNvbXBsZXRlIGlmIG5lZWRlZAoJCQkJCQkJaWYgKCByZXNwb25zZXMgKSB7CgkJCQkJCQkJY29tcGxldGUoIHN0YXR1cywgc3RhdHVzVGV4dCwgcmVzcG9uc2VzLCB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkgKTsKCQkJCQkJCX0KCQkJCQkJfTsKCgkJCQkJCS8vIERvIHNlbmQgdGhlIHJlcXVlc3QKCQkJCQkJLy8gYHhoci5zZW5kYCBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uLCBidXQgaXQgd2lsbCBiZQoJCQkJCQkvLyBoYW5kbGVkIGluIGpRdWVyeS5hamF4IChzbyBubyB0cnkvY2F0Y2ggaGVyZSkKCQkJCQkJaWYgKCAhb3B0aW9ucy5hc3luYyApIHsKCgkJCQkJCQkvLyBJZiB3ZSdyZSBpbiBzeW5jIG1vZGUgd2UgZmlyZSB0aGUgY2FsbGJhY2sKCQkJCQkJCWNhbGxiYWNrKCk7CgkJCQkJCX0gZWxzZSBpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkgewoKCQkJCQkJCS8vIChJRTYgJiBJRTcpIGlmIGl0J3MgaW4gY2FjaGUgYW5kIGhhcyBiZWVuCgkJCQkJCQkvLyByZXRyaWV2ZWQgZGlyZWN0bHkgd2UgbmVlZCB0byBmaXJlIHRoZSBjYWxsYmFjawoJCQkJCQkJd2luZG93LnNldFRpbWVvdXQoIGNhbGxiYWNrICk7CgkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJLy8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrLCBidXQgZGVsYXkgaXQgaW4gY2FzZSBgeGhyLnNlbmRgIHRocm93cwoJCQkJCQkJLy8gQWRkIHRvIHRoZSBsaXN0IG9mIGFjdGl2ZSB4aHIgY2FsbGJhY2tzCgkJCQkJCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0geGhyQ2FsbGJhY2tzWyBpZCBdID0gY2FsbGJhY2s7CgkJCQkJCX0KCQkJCQl9LAoKCQkJCQlhYm9ydDogZnVuY3Rpb24oKSB7CgkJCQkJCWlmICggY2FsbGJhY2sgKSB7CgkJCQkJCQljYWxsYmFjayggdW5kZWZpbmVkLCB0cnVlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9OwoJCQl9CgkJfSApOwoJfQoKCS8vIEZ1bmN0aW9ucyB0byBjcmVhdGUgeGhycwoJZnVuY3Rpb24gY3JlYXRlU3RhbmRhcmRYSFIoKSB7CgkJdHJ5IHsKCQkJcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTsKCQl9IGNhdGNoICggZSApIHt9Cgl9CgoJZnVuY3Rpb24gY3JlYXRlQWN0aXZlWEhSKCkgewoJCXRyeSB7CgkJCXJldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoICJNaWNyb3NvZnQuWE1MSFRUUCIgKTsKCQl9IGNhdGNoICggZSApIHt9Cgl9CgoKCgoJLy8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMikKCWpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHsKCQlpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgkJCXMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7CgkJfQoJfSApOwoKCS8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlCglqUXVlcnkuYWpheFNldHVwKCB7CgkJYWNjZXB0czogewoJCQlzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIgKwoJCQkJImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCIKCQl9LAoJCWNvbnRlbnRzOiB7CgkJCXNjcmlwdDogL1xiKD86amF2YXxlY21hKXNjcmlwdFxiLwoJCX0sCgkJY29udmVydGVyczogewoJCQkidGV4dCBzY3JpcHQiOiBmdW5jdGlvbiggdGV4dCApIHsKCQkJCWpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7CgkJCQlyZXR1cm4gdGV4dDsKCQkJfQoJCX0KCX0gKTsKCgkvLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGdsb2JhbAoJalF1ZXJ5LmFqYXhQcmVmaWx0ZXIoICJzY3JpcHQiLCBmdW5jdGlvbiggcyApIHsKCQlpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHsKCQkJcy5jYWNoZSA9IGZhbHNlOwoJCX0KCQlpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgkJCXMudHlwZSA9ICJHRVQiOwoJCQlzLmdsb2JhbCA9IGZhbHNlOwoJCX0KCX0gKTsKCgkvLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnQKCWpRdWVyeS5hamF4VHJhbnNwb3J0KCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CgoJCS8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHMKCQlpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgoJCQl2YXIgc2NyaXB0LAoJCQkJaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgalF1ZXJ5KCAiaGVhZCIgKVsgMCBdIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJCXJldHVybiB7CgoJCQkJc2VuZDogZnVuY3Rpb24oIF8sIGNhbGxiYWNrICkgewoKCQkJCQlzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2NyaXB0IiApOwoKCQkJCQlzY3JpcHQuYXN5bmMgPSB0cnVlOwoKCQkJCQlpZiAoIHMuc2NyaXB0Q2hhcnNldCApIHsKCQkJCQkJc2NyaXB0LmNoYXJzZXQgPSBzLnNjcmlwdENoYXJzZXQ7CgkJCQkJfQoKCQkJCQlzY3JpcHQuc3JjID0gcy51cmw7CgoJCQkJCS8vIEF0dGFjaCBoYW5kbGVycyBmb3IgYWxsIGJyb3dzZXJzCgkJCQkJc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHsKCgkJCQkJCWlmICggaXNBYm9ydCB8fCAhc2NyaXB0LnJlYWR5U3RhdGUgfHwgL2xvYWRlZHxjb21wbGV0ZS8udGVzdCggc2NyaXB0LnJlYWR5U3RhdGUgKSApIHsKCgkJCQkJCQkvLyBIYW5kbGUgbWVtb3J5IGxlYWsgaW4gSUUKCQkJCQkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDsKCgkJCQkJCQkvLyBSZW1vdmUgdGhlIHNjcmlwdAoJCQkJCQkJaWYgKCBzY3JpcHQucGFyZW50Tm9kZSApIHsKCQkJCQkJCQlzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7CgkJCQkJCQl9CgoJCQkJCQkJLy8gRGVyZWZlcmVuY2UgdGhlIHNjcmlwdAoJCQkJCQkJc2NyaXB0ID0gbnVsbA==", "base64"));
  res.write(new Buffer("OwoKCQkJCQkJCS8vIENhbGxiYWNrIGlmIG5vdCBhYm9ydAoJCQkJCQkJaWYgKCAhaXNBYm9ydCApIHsKCQkJCQkJCQljYWxsYmFjayggMjAwLCAic3VjY2VzcyIgKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX07CgoJCQkJCS8vIENpcmN1bXZlbnQgSUU2IGJ1Z3Mgd2l0aCBiYXNlIGVsZW1lbnRzICgjMjcwOSBhbmQgIzQzNzgpIGJ5IHByZXBlbmRpbmcKCQkJCQkvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnkKCQkJCQloZWFkLmluc2VydEJlZm9yZSggc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQgKTsKCQkJCX0sCgoJCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggc2NyaXB0ICkgewoJCQkJCQlzY3JpcHQub25sb2FkKCB1bmRlZmluZWQsIHRydWUgKTsKCQkJCQl9CgkJCQl9CgkJCX07CgkJfQoJfSApOwoKCgoKCXZhciBvbGRDYWxsYmFja3MgPSBbXSwKCQlyanNvbnAgPSAvKD0pXD8oPz0mfCQpfFw/XD8vOwoKCS8vIERlZmF1bHQganNvbnAgc2V0dGluZ3MKCWpRdWVyeS5hamF4U2V0dXAoIHsKCQlqc29ucDogImNhbGxiYWNrIiwKCQlqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHsKCQkJdmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyAiXyIgKyAoIG5vbmNlKysgKSApOwoJCQl0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTsKCQkJcmV0dXJuIGNhbGxiYWNrOwoJCX0KCX0gKTsKCgkvLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHMKCWpRdWVyeS5hamF4UHJlZmlsdGVyKCAianNvbiBqc29ucCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHsKCgkJdmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLAoJCQlqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgPwoJCQkJInVybCIgOgoJCQkJdHlwZW9mIHMuZGF0YSA9PT0gInN0cmluZyIgJiYKCQkJCQkoIHMuY29udGVudFR5cGUgfHwgIiIgKQoJCQkJCQkuaW5kZXhPZiggImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIgKSA9PT0gMCAmJgoJCQkJCXJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiAiZGF0YSIKCQkJKTsKCgkJLy8gSGFuZGxlIGlmZiB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlIGlzICJqc29ucCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXQKCQlpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09ICJqc29ucCIgKSB7CgoJCQkvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0CgkJCWNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/CgkJCQlzLmpzb25wQ2FsbGJhY2soKSA6CgkJCQlzLmpzb25wQ2FsbGJhY2s7CgoJCQkvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhCgkJCWlmICgganNvblByb3AgKSB7CgkJCQlzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsICIkMSIgKyBjYWxsYmFja05hbWUgKTsKCQkJfSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7CgkJCQlzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gIiYiIDogIj8iICkgKyBzLmpzb25wICsgIj0iICsgY2FsbGJhY2tOYW1lOwoJCQl9CgoJCQkvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uCgkJCXMuY29udmVydGVyc1sgInNjcmlwdCBqc29uIiBdID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHsKCQkJCQlqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArICIgd2FzIG5vdCBjYWxsZWQiICk7CgkJCQl9CgkJCQlyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTsKCQkJfTsKCgkJCS8vIGZvcmNlIGpzb24gZGF0YVR5cGUKCQkJcy5kYXRhVHlwZXNbIDAgXSA9ICJqc29uIjsKCgkJCS8vIEluc3RhbGwgY2FsbGJhY2sKCQkJb3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdOwoJCQl3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7CgkJCQlyZXNwb25zZUNvbnRhaW5lciA9IGFyZ3VtZW50czsKCQkJfTsKCgkJCS8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKQoJCQlqcVhIUi5hbHdheXMoIGZ1bmN0aW9uKCkgewoKCQkJCS8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdAoJCQkJaWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkgewoJCQkJCWpRdWVyeSggd2luZG93ICkucmVtb3ZlUHJvcCggY2FsbGJhY2tOYW1lICk7CgoJCQkJLy8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWUKCQkJCX0gZWxzZSB7CgkJCQkJd2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuOwoJCQkJfQoKCQkJCS8vIFNhdmUgYmFjayBhcyBmcmVlCgkJCQlpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkgewoKCQkJCQkvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmQKCQkJCQlzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7CgoJCQkJCS8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2UKCQkJCQlvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7CgkJCQl9CgoJCQkJLy8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlCgkJCQlpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkgewoJCQkJCW92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7CgkJCQl9CgoJCQkJcmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDsKCQkJfSApOwoKCQkJLy8gRGVsZWdhdGUgdG8gc2NyaXB0CgkJCXJldHVybiAic2NyaXB0IjsKCQl9Cgl9ICk7CgoKCgoJLy8gU3VwcG9ydDogU2FmYXJpIDgrCgkvLyBJbiBTYWZhcmkgOCBkb2N1bWVudHMgY3JlYXRlZCB2aWEgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50CgkvLyBjb2xsYXBzZSBzaWJsaW5nIGZvcm1zOiB0aGUgc2Vjb25kIG9uZSBiZWNvbWVzIGEgY2hpbGQgb2YgdGhlIGZpcnN0IG9uZS4KCS8vIEJlY2F1c2Ugb2YgdGhhdCwgdGhpcyBzZWN1cml0eSBtZWFzdXJlIGhhcyB0byBiZSBkaXNhYmxlZCBpbiBTYWZhcmkgOC4KCS8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzczMzcKCXN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ID0gKCBmdW5jdGlvbigpIHsKCQlpZiAoICFkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJdmFyIGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggIiIgKTsKCQlkb2MuYm9keS5pbm5lckhUTUwgPSAiPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT4iOwoJCXJldHVybiBkb2MuYm9keS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMjsKCX0gKSgpOwoKCgkvLyBkYXRhOiBzdHJpbmcgb2YgaHRtbAoJLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LAoJLy8gZGVmYXVsdHMgdG8gZG9jdW1lbnQKCS8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmcKCWpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7CgkJaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQlpZiAoIHR5cGVvZiBjb250ZXh0ID09PSAiYm9vbGVhbiIgKSB7CgkJCWtlZXBTY3JpcHRzID0gY29udGV4dDsKCQkJY29udGV4dCA9IGZhbHNlOwoJCX0KCgkJLy8gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24gc3RvcHMgc2NyaXB0cyBvciBpbmxpbmUgZXZlbnQgaGFuZGxlcnMgZnJvbQoJCS8vIGJlaW5nIGV4ZWN1dGVkIGltbWVkaWF0ZWx5CgkJY29udGV4dCA9IGNvbnRleHQgfHwgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCA/CgkJCWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggIiIgKSA6CgkJCWRvY3VtZW50ICk7CgoJCXZhciBwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKSwKCQkJc2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTsKCgkJLy8gU2luZ2xlIHRhZwoJCWlmICggcGFyc2VkICkgewoJCQlyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsgMSBdICkgXTsKCQl9CgoJCXBhcnNlZCA9IGJ1aWxkRnJhZ21lbnQoIFsgZGF0YSBdLCBjb250ZXh0LCBzY3JpcHRzICk7CgoJCWlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHsKCQkJalF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7CgkJfQoKCQlyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTsKCX07CgoKCS8vIEtlZXAgYSBjb3B5IG9mIHRoZSBvbGQgbG9hZCBtZXRob2QKCXZhciBfbG9hZCA9IGpRdWVyeS5mbi5sb2FkOwoKCS8qKgoJICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZQoJICovCglqUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7CgkJaWYgKCB0eXBlb2YgdXJsICE9PSAic3RyaW5nIiAmJiBfbG9hZCApIHsKCQkJcmV0dXJuIF9sb2FkLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9CgoJCXZhciBzZWxlY3RvciwgdHlwZSwgcmVzcG9uc2UsCgkJCXNlbGYgPSB0aGlzLAoJCQlvZmYgPSB1cmwuaW5kZXhPZiggIiAiICk7CgoJCWlmICggb2ZmID4gLTEgKSB7CgkJCXNlbGVjdG9yID0galF1ZXJ5LnRyaW0oIHVybC5zbGljZSggb2ZmLCB1cmwubGVuZ3RoICkgKTsKCQkJdXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTsKCQl9CgoJCS8vIElmIGl0J3MgYSBmdW5jdGlvbgoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkgewoKCQkJLy8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2sKCQkJY2FsbGJhY2sgPSBwYXJhbXM7CgkJCXBhcmFtcyA9IHVuZGVmaW5lZDsKCgkJLy8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZwoJCX0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSAib2JqZWN0IiApIHsKCQkJdHlwZSA9ICJQT1NUIjsKCQl9CgoJCS8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0CgkJaWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7CgkJCWpRdWVyeS5hamF4KCB7CgkJCQl1cmw6IHVybCwKCgkJCQkvLyBJZiAidHlwZSIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuICJHRVQiIG1ldGhvZCB3aWxsIGJlIHVzZWQuCgkJCQkvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2UKCQkJCS8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZAoJCQkJdHlwZTogdHlwZSB8fCAiR0VUIiwKCQkJCWRhdGFUeXBlOiAiaHRtbCIsCgkJCQlkYXRhOiBwYXJhbXMKCQkJfSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7CgoJCQkJLy8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrCgkJCQlyZXNwb25zZSA9IGFyZ3VtZW50czsKCgkJCQlzZWxmLmh0bWwoIHNlbGVjdG9yID8KCgkJCQkJLy8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2CgkJCQkJLy8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzCgkJCQkJalF1ZXJ5KCAiPGRpdj4iICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOgoKCQkJCQkvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdAoJCQkJCXJlc3BvbnNlVGV4dCApOwoKCQkJLy8gSWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyAiZGF0YSIsICJzdGF0dXMiLCAianFYSFIiCgkJCS8vIGJ1dCB0aGV5IGFyZSBpZ25vcmVkIGJlY2F1c2UgcmVzcG9uc2Ugd2FzIHNldCBhYm92ZS4KCQkJLy8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyAianFYSFIiLCAic3RhdHVzIiwgImVycm9yIgoJCQl9ICkuYWx3YXlzKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHsKCQkJCXNlbGYuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQkJY2FsbGJhY2suYXBwbHkoIHNlbGYsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTsKCQkJCX0gKTsKCQkJfSApOwoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9OwoKCgoKCS8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzCglqUXVlcnkuZWFjaCggWwoJCSJhamF4U3RhcnQiLAoJCSJhamF4U3RvcCIsCgkJImFqYXhDb21wbGV0ZSIsCgkJImFqYXhFcnJvciIsCgkJImFqYXhTdWNjZXNzIiwKCQkiYWpheFNlbmQiCgldLCBmdW5jdGlvbiggaSwgdHlwZSApIHsKCQlqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHsKCQkJcmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7CgkJfTsKCX0gKTsKCgoKCglqUXVlcnkuZXhwci5maWx0ZXJzLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGpRdWVyeS5ncmVwKCBqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7CgkJCXJldHVybiBlbGVtID09PSBmbi5lbGVtOwoJCX0gKS5sZW5ndGg7Cgl9OwoKCgoKCgkvKioKCSAqIEdldHMgYSB3aW5kb3cgZnJvbSBhbiBlbGVtZW50CgkgKi8KCWZ1bmN0aW9uIGdldFdpbmRvdyggZWxlbSApIHsKCQlyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPwoJCQllbGVtIDoKCQkJZWxlbS5ub2RlVHlwZSA9PT0gOSA/CgkJCQllbGVtLmRlZmF1bHRWaWV3IHx8IGVsZW0ucGFyZW50V2luZG93IDoKCQkJCWZhbHNlOwoJfQoKCWpRdWVyeS5vZmZzZXQgPSB7CgkJc2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHsKCQkJdmFyIGN1clBvc2l0aW9uLCBjdXJMZWZ0LCBjdXJDU1NUb3AsIGN1clRvcCwgY3VyT2Zmc2V0LCBjdXJDU1NMZWZ0LCBjYWxjdWxhdGVQb3NpdGlvbiwKCQkJCXBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgInBvc2l0aW9uIiApLAoJCQkJY3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLAoJCQkJcHJvcHMgPSB7fTsKCgkJCS8vIHNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW0KCQkJaWYgKCBwb3NpdGlvbiA9PT0gInN0YXRpYyIgKSB7CgkJCQllbGVtLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKCQkJfQoKCQkJY3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTsKCQkJY3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgInRvcCIgKTsKCQkJY3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sICJsZWZ0IiApOwoJCQljYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgfHwgcG9zaXRpb24gPT09ICJmaXhlZCIgKSAmJgoJCQkJalF1ZXJ5LmluQXJyYXkoICJhdXRvIiwgWyBjdXJDU1NUb3AsIGN1ckNTU0xlZnQgXSApID4gLTE7CgoJCQkvLyBuZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlciB0b3Agb3IgbGVmdAoJCQkvLyBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWQKCQkJaWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHsKCQkJCWN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpOwoJCQkJY3VyVG9wID0gY3VyUG9zaXRpb24udG9wOwoJCQkJY3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7CgkJCX0gZWxzZSB7CgkJCQljdXJUb3AgPSBwYXJzZUZsb2F0KCBjdXJDU1NUb3AgKSB8fCAwOwoJCQkJY3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwOwoJCQl9CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7CgoJCQkJLy8gVXNlIGpRdWVyeS5leHRlbmQgaGVyZSB0byBhbGxvdyBtb2RpZmljYXRpb24gb2YgY29vcmRpbmF0ZXMgYXJndW1lbnQgKGdoLTE4NDgpCgkJCQlvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTsKCQkJfQoKCQkJaWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkgewoJCQkJcHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDsKCQkJfQoJCQlpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkgewoJCQkJcHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7CgkJCX0KCgkJCWlmICggInVzaW5nIiBpbiBvcHRpb25zICkgewoJCQkJb3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApOwoJCQl9IGVsc2UgewoJCQkJY3VyRWxlbS5jc3MoIHByb3BzICk7CgkJCX0KCQl9Cgl9OwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQlvZmZzZXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkgewoJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCQlyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID8KCQkJCQl0aGlzIDoKCQkJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJCQlqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApOwoJCQkJCX0gKTsKCQkJfQoKCQkJdmFyIGRvY0VsZW0sIHdpbiwKCQkJCWJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sCgkJCQllbGVtID0gdGhpc1sgMCBdLAoJCQkJZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7CgoJCQlpZiAoICFkb2MgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50OwoKCQkJLy8gTWFrZSBzdXJlIGl0J3Mgbm90IGEgZGlzY29ubmVjdGVkIERPTSBub2RlCgkJCWlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkgewoJCQkJcmV0dXJuIGJveDsKCQkJfQoKCQkJLy8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3IKCQkJLy8gQmxhY2tCZXJyeSA1LCBpT1MgMyAob3JpZ2luYWwgaVBob25lKQoJCQlpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQlib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJCQl9CgkJCXdpbiA9IGdldFdpbmRvdyggZG9jICk7CgkJCXJldHVybiB7CgkJCQl0b3A6IGJveC50b3AgICsgKCB3aW4ucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3AgKSAgLSAoIGRvY0VsZW0uY2xpZW50VG9wICB8fCAwICksCgkJCQlsZWZ0OiBib3gubGVmdCArICggd2luLnBhZ2VYT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsTGVmdCApIC0gKCBkb2NFbGVtLmNsaWVudExlZnQgfHwgMCApCgkJCX07CgkJfSwKCgkJcG9zaXRpb246IGZ1bmN0aW9uKCkgewoJCQlpZiAoICF0aGlzWyAwIF0gKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwKCQkJCXBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sCgkJCQllbGVtID0gdGhpc1sgMCBdOwoKCQkJLy8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSwKCQkJLy8gYmVjYXVzZSBpdCBpcyBpdHMgb25seSBvZmZzZXQgcGFyZW50CgkJCWlmICggalF1ZXJ5LmNzcyggZWxlbSwgInBvc2l0aW9uIiApID09PSAiZml4ZWQiICkgewoKCQkJCS8vIHdlIGFzc3VtZSB0aGF0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyBhdmFpbGFibGUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZAoJCQkJb2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCQkJfSBlbHNlIHsKCgkJCQkvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudAoJCQkJb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTsKCgkJCQkvLyBHZXQgY29ycmVjdCBvZmZzZXRzCgkJCQlvZmZzZXQgPSB0aGlzLm9mZnNldCgpOwoJCQkJaWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnRbIDAgXSwgImh0bWwiICkgKSB7CgkJCQkJcGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50Lm9mZnNldCgpOwoJCQkJfQoKCQkJCS8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVycwoJCQkJcGFyZW50T2Zmc2V0LnRvcCAgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sICJib3JkZXJUb3BXaWR0aCIsIHRydWUgKTsKCQkJCXBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCAiYm9yZGVyTGVmdFdpZHRoIiwgdHJ1ZSApOwoJCQl9CgoJCQkvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zCgkJCS8vIG5vdGU6IHdoZW4gYW4gZWxlbWVudCBoYXMgbWFyZ2luOiBhdXRvIHRoZSBvZmZzZXRMZWZ0IGFuZCBtYXJnaW5MZWZ0CgkJCS8vIGFyZSB0aGUgc2FtZSBpbiBTYWZhcmkgY2F1c2luZyBvZmZzZXQubGVmdCB0byBpbmNvcnJlY3RseSBiZSAwCgkJCXJldHVybiB7CgkJCQl0b3A6ICBvZmZzZXQudG9wICAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCAibWFyZ2luVG9wIiwgdHJ1ZSApLAoJCQkJbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sICJtYXJnaW5MZWZ0IiwgdHJ1ZSApCgkJCX07CgkJfSwKCgkJb2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCQkJCXZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudDsKCgkJCQl3aGlsZSAoIG9mZnNldFBhcmVudCAmJiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudCwgImh0bWwiICkgJiYKCQkJCQlqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsICJwb3NpdGlvbiIgKSA9PT0gInN0YXRpYyIgKSApIHsKCQkJCQlvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50OwoJCQkJfQoJCQkJcmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudEVsZW1lbnQ7CgkJCX0gKTsKCQl9Cgl9ICk7CgoJLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzCglqUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiAicGFnZVhPZmZzZXQiLCBzY3JvbGxUb3A6ICJwYWdlWU9mZnNldCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHsKCQl2YXIgdG9wID0gL1kvLnRlc3QoIHByb3AgKTsKCgkJalF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHsKCQkJCXZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTsKCgkJCQlpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkgewoJCQkJCXJldHVybiB3aW4gPyAoIHByb3AgaW4gd2luICkgPyB3aW5bIHByb3AgXSA6CgkJCQkJCXdpbi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIG1ldGhvZCBdIDoKCQkJCQkJZWxlbVsgbWV0aG9kIF07CgkJCQl9CgoJCQkJaWYgKCB3aW4gKSB7CgkJCQkJd2luLnNjcm9sbFRvKAoJCQkJCQkhdG9wID8gdmFsIDogalF1ZXJ5KCB3aW4gKS5zY3JvbGxMZWZ0KCksCgkJCQkJCXRvcCA/IHZhbCA6IGpRdWVyeSggd2luICkuc2Nyb2xsVG9wKCkKCQkJCQkpOwoKCQkJCX0gZWxzZSB7CgkJCQkJZWxlbVsgbWV0aG9kIF0gPSB2YWw7CgkJCQl9CgkJCX0sIG1ldGhvZCwgdmFsLCBhcmd1bWVudHMubGVuZ3RoLCBudWxsICk7CgkJfTsKCX0gKTsKCgkvLyBTdXBwb3J0OiBTYWZhcmk8Ny04KywgQ2hyb21lPDM3LTQ0KwoJLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb24KCS8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NAoJLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodAoJLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIHdlIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmUKCWpRdWVyeS5lYWNoKCBbICJ0b3AiLCAibGVmdCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbiwKCQkJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQkJaWYgKCBjb21wdXRlZCApIHsKCQkJCQljb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApOwoKCQkJCQkvLyBpZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXQKCQkJCQlyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgPwoJCQkJCQlqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyAicHgiIDoKCQkJCQkJY29tcHV0ZWQ7CgkJCQl9CgkJCX0KCQkpOwoJfSApOwoKCgkvLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHMKCWpRdWVyeS5lYWNoKCB7IEhlaWdodDogImhlaWdodCIsIFdpZHRoOiAid2lkdGgiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkgewoJCWpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6ICJpbm5lciIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCAiIjogIm91dGVyIiArIG5hbWUgfSwKCQlmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHsKCgkJCS8vIG1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aAoJCQlqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHsKCQkJCXZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09ICJib29sZWFuIiApLAoJCQkJCWV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gIm1hcmdpbiIgOiAiYm9yZGVyIiApOwoKCQkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHsKCQkJCQl2YXIgZG9jOwoKCQkJCQlpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkgewoKCQkJCQkJLy8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmUKCQkJCQkJLy8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOgoJCQkJCQkvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzc2NAoJCQkJCQlyZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbICJjbGllbnQiICsgbmFtZSBdOwoJCQkJCX0KCgkJCQkJLy8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodAoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHsKCQkJCQkJZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7CgoJCQkJCQkvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sCgkJCQkJCS8vIHdoaWNoZXZlciBpcyBncmVhdGVzdAoJCQkJCQkvLyB1bmZvcnR1bmF0ZWx5LCB0aGlzIGNhdXNlcyBidWcgIzM4MzggaW4gSUU2Lzggb25seSwKCQkJCQkJLy8gYnV0IHRoZXJlIGlzIGN1cnJlbnRseSBubyBnb29kLCBzbWFsbCB3YXkgdG8gZml4IGl0LgoJCQkJCQlyZXR1cm4gTWF0aC5tYXgoCgkJCQkJCQllbGVtLmJvZHlbICJzY3JvbGwiICsgbmFtZSBdLCBkb2NbICJzY3JvbGwiICsgbmFtZSBdLAoJCQkJCQkJZWxlbS5ib2R5WyAib2Zmc2V0IiArIG5hbWUgXSwgZG9jWyAib2Zmc2V0IiArIG5hbWUgXSwKCQkJCQkJCWRvY1sgImNsaWVudCIgKyBuYW1lIF0KCQkJCQkJKTsKCQkJCQl9CgoJCQkJCXJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8KCgkJCQkJCS8vIEdldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQsIHJlcXVlc3RpbmcgYnV0IG5vdCBmb3JjaW5nIHBhcnNlRmxvYXQKCQkJCQkJalF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6CgoJCQkJCQkvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50CgkJCQkJCWpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7CgkJCQl9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApOwoJCQl9OwoJCX0gKTsKCX0gKTsKCgoJalF1ZXJ5LmZuLmV4dGVuZCggewoKCQliaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7CgkJfSwKCQl1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7CgkJCXJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7CgkJfSwKCgkJZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApOwoJCX0sCgkJdW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7CgoJCQkvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApCgkJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8KCQkJCXRoaXMub2ZmKCBzZWxlY3RvciwgIioqIiApIDoKCQkJCXRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgIioqIiwgZm4gKTsKCQl9Cgl9ICk7CgoJLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQKCWpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubGVuZ3RoOwoJfTsKCglqUXVlcnkuZm4uYW5kU2VsZiA9IGpRdWVyeS5mbi5hZGRCYWNrOwoKCgoKCS8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlcgoJLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdAoJLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0CgkvLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlCgkvLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2UKCS8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50cwoJLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbA==", "base64"));
  res.write(new Buffer("IHdvcmsuCgoJLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGQKCS8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW4KCS8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlCgkvLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uCgoJaWYgKCB0cnVlICkgewoJCSEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4galF1ZXJ5OwoJCX0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCX0KCgoKCXZhcgoKCQkvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGUKCQlfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSwKCgkJLy8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGUKCQlfJCA9IHdpbmRvdy4kOwoKCWpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7CgkJaWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkgewoJCQl3aW5kb3cuJCA9IF8kOwoJCX0KCgkJaWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHsKCQkJd2luZG93LmpRdWVyeSA9IF9qUXVlcnk7CgkJfQoKCQlyZXR1cm4galF1ZXJ5OwoJfTsKCgkvLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluCgkvLyBBTUQgKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KQoJLy8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KQoJaWYgKCAhbm9HbG9iYWwgKSB7CgkJd2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5OwoJfQoKCXJldHVybiBqUXVlcnk7Cgl9KSk7CgoKLyoqKi8gfSksCi8qIDEzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187J3VzZSBzdHJpY3QnOwoKCS8vIFNpbXBsZSBjbGFzcyB0aGF0IHBvc3RzIGxvZ2luIGRhdGEgdG8gdGhlIGFjY291bnQgY2hvb3NlciBkaXNjb3ZlcnkgdXJsIG9uCgkvLyBzdWNjZXNzZnVsIGxvZ2lucy4gVGhpcyB1cmwgaXMgYSBjcm9zcyBvcmlnaW4gb2t0YSBkb21haW4gdGhhdCBjYW4gYmUKCS8vIGFjY2Vzc2VkIGJ5IGFueSBva3RhIG9yaWdpbiBpbnRlcmVzdGVkIGluIHNlZWluZyB3aGljaCBhY2NvdW50cyB0aGUgY3VycmVudAoJLy8gdXNlciBoYXMgc2lnbmVkIGludG8uCgkhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg0KV0sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCQsIEhhbmRsZWJhcnMpIHsKCgkgIC8vIE1heCB0aW1lIHRvIHdhaXQgZm9yIGEgcmVzcG9uc2UgZnJvbSBhY2NvdW50IGNob29zZXIgaWZyYW1lIGFmdGVyCgkgIC8vIGxvZ2luIG1lc3NhZ2UgaXMgc2VudC4KCSAgdmFyIE1BWF9XQUlUID0gMTAwMDsKCgkgIHZhciBpZnJhbWVUcGwgPSBIYW5kbGViYXJzLmNvbXBpbGUoJ1wKCSAgICA8aWZyYW1lIGRhdGEtc2U9ImFjY291bnQtY2hvb3NlciIgc3JjPSJ7e3NyY319IiBzdHlsZT0iZGlzcGxheTpub25lIj48L2lmcmFtZT5cCgkgICcpOwoKCSAgZnVuY3Rpb24gQWNjb3VudENob29zZXIob3B0aW9ucykgewoJICAgIHZhciBpZnJhbWUgPSAkKGlmcmFtZVRwbCh7IHNyYzogb3B0aW9ucy5kaXNjb3ZlcnlVcmwgfSkpOwoJICAgIHRoaXMuZGlzY292ZXJ5VXJsID0gb3B0aW9ucy5kaXNjb3ZlcnlVcmw7CgkgICAgdGhpcy5pZnJhbWUgPSBpZnJhbWUuZ2V0KDApOwoJICAgICQoZnVuY3Rpb24gKCkgewoJICAgICAgJCgnYm9keScpLmFwcGVuZChpZnJhbWUpOwoJICAgIH0pOwoJICB9CgoJICAvLyBQb3N0cyBsb2dpbiBtZXNzYWdlIHRvIGFjY291bnQgY2hvb3NlciBpZnJhbWUuIFRoZSBhY2NvdW50IGNob29zZXIKCSAgLy8gd2lsbCBzdG9yZSB0aGlzIGRhdGEgaW4gbG9jYWxTdG9yYWdlIGZvciBmdXR1cmUgY3Jvc3Mgb3JpZ2luIGFjY2Vzcy4KCSAgQWNjb3VudENob29zZXIucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJQcm9maWxlLCBjYikgewoJICAgIHZhciBtc2csIG1hdGNoZXMsIHRhcmdldE9yaWdpbiwgbWF4VGltZW91dDsKCgkgICAgbXNnID0gewoJICAgICAgbWVzc2FnZVR5cGU6ICdsb2dpbicsCgkgICAgICBkaXNwbGF5TmFtZTogdXNlclByb2ZpbGUuZmlyc3ROYW1lICsgJyAnICsgdXNlclByb2ZpbGUubGFzdE5hbWUsCgkgICAgICBsb2dpbjogdXNlclByb2ZpbGUubG9naW4KCSAgICB9OwoKCSAgICAvLyBBdXRvbWF0aWNhbGx5IHJlZGlyZWN0IGFmdGVyIE1BWF9XQUlUIG1zIGluIHRoZSBldmVudCB0aGF0IHRoZSBhY2NvdW50CgkgICAgLy8gY2hvb3NlciBkb21haW4gaXMgdG9vIHNsb3cgdG8gcmVzcG9uZC4KCSAgICBtYXhUaW1lb3V0ID0gc2V0VGltZW91dChjYiwgTUFYX1dBSVQpOwoKCSAgICBtYXRjaGVzID0gbmV3IFJlZ0V4cCgnXmh0dHBzPzovL1teL10rJykuZXhlYyh0aGlzLmRpc2NvdmVyeVVybCk7CgkgICAgdGFyZ2V0T3JpZ2luID0gbWF0Y2hlcyA/IG1hdGNoZXNbMF0gOiBudWxsOwoKCSAgICBpZiAodGFyZ2V0T3JpZ2luKSB7CgkgICAgICAvLyAxLiBTZXR1cCB0aGUgcmVzcG9uc2UgbWVzc2FnZSBoYW5kbGVyCgkgICAgICAkKHdpbmRvdykub24oJ21lc3NhZ2UuYWNjb3VudENob29zZXInLCBmdW5jdGlvbiAoZSkgewoJICAgICAgICAvLyBPbmx5IGxpc3RlbiB0byBtZXNzYWdlcyBmcm9tIHRoZSBkaXNjb3ZlcnkgZG9tYWluCgkgICAgICAgIGlmIChlLm9yaWdpbmFsRXZlbnQub3JpZ2luICE9PSB0YXJnZXRPcmlnaW4pIHsKCSAgICAgICAgICByZXR1cm47CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUub3JpZ2luYWxFdmVudC5kYXRhLm1lc3NhZ2VUeXBlID09PSAncHJvY2Vzc2VkX2xvZ2luJykgewoJICAgICAgICAgICQod2luZG93KS5vZmYoJ21lc3NhZ2UuYWNjb3VudENob29zZXInKTsKCSAgICAgICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dCk7CgkgICAgICAgICAgY2IoKTsKCSAgICAgICAgfQoJICAgICAgfSk7CgoJICAgICAgLy8gMi4gU2VuZCB0aGUgdXNlciBwcm9maWxlIGRhdGEgdG8gdGhlIGFjY291bnQgY2hvb3NlciBvcmlnaW4KCSAgICAgIHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UobXNnLCB0YXJnZXRPcmlnaW4pOwoJICAgIH0KCSAgfTsKCgkgIHJldHVybiBBY2NvdW50Q2hvb3NlcjsKCX0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCi8qKiovIH0pLAovKiAxNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohCgkgKiBqUXVlcnkgU21hcnQgQmFubmVyCgkgKiBDb3B5cmlnaHQgKGMpIDIwMTIgQXJub2xkIERhbmllbHMgPGFybm9sZEBqYXNueS5uZXQ+CgkgKiBCYXNlZCBvbiAnalF1ZXJ5IFNtYXJ0IFdlYiBBcHAgQmFubmVyJyBieSBLdXJ0IFplbmlzZWsgQCBremVuaS5jb20KCSAqLwoJKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CgkgIGlmICh0cnVlKSB7CgkgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW19fd2VicGFja19yZXF1aXJlX18oMildLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZmFjdG9yeSksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPyAoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCSAgfSBlbHNlIHsKCSAgICBmYWN0b3J5KHJvb3QualF1ZXJ5KTsKCSAgfQoJfSkodGhpcywgZnVuY3Rpb24gKCQpIHsKCSAgICB2YXIgU21hcnRCYW5uZXIgPSBmdW5jdGlvbiAob3B0aW9ucykgewoJICAgICAgICB0aGlzLm9yaWdIdG1sTWFyZ2luID0gcGFyc2VGbG9hdCgkKCdodG1sJykuY3NzKCdtYXJnaW4tdG9wJykpOyAvLyBHZXQgdGhlIG9yaWdpbmFsIG1hcmdpbi10b3Agb2YgdGhlIEhUTUwgZWxlbWVudCBzbyB3ZSBjYW4gdGFrZSB0aGF0IGludG8gYWNjb3VudAoJICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5zbWFydGJhbm5lci5kZWZhdWx0cywgb3B0aW9ucyk7CgoJICAgICAgICB2YXIgc3RhbmRhbG9uZSA9IG5hdmlnYXRvci5zdGFuZGFsb25lOyAvLyBDaGVjayBpZiBpdCdzIGFscmVhZHkgYSBzdGFuZGFsb25lIHdlYiBhcHAgb3IgcnVubmluZyB3aXRoaW4gYSB3ZWJ1aSB2aWV3IG9mIGFuIGFwcCAobm90IG1vYmlsZSBzYWZhcmkpCgkgICAgICAgIHZhciBVQSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CgoJICAgICAgICAvLyBEZXRlY3QgYmFubmVyIHR5cGUgKGlPUyBvciBBbmRyb2lkKQoJICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZvcmNlKSB7CgkgICAgICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLm9wdGlvbnMuZm9yY2U7CgkgICAgICAgIH0gZWxzZSBpZiAoVUEubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSkgIT09IG51bGwgJiYgVUEubWF0Y2goL0VkZ2V8VG91Y2gvaSkgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMudHlwZSA9ICd3aW5kb3dzJzsKCSAgICAgICAgfSBlbHNlIGlmIChVQS5tYXRjaCgvaVBob25lfGlQb2QvaSkgIT09IG51bGwgfHwgKFVBLm1hdGNoKC9pUGFkLykgJiYgdGhpcy5vcHRpb25zLmlPU1VuaXZlcnNhbEFwcCkpIHsKCSAgICAgICAgICAgIGlmIChVQS5tYXRjaCgvU2FmYXJpL2kpICE9PSBudWxsICYmCgkgICAgICAgICAgICAgICAoVUEubWF0Y2goL0NyaU9TL2kpICE9PSBudWxsIHx8CgkgICAgICAgICAgICAgICB3aW5kb3cuTnVtYmVyKFVBLnN1YnN0cihVQS5pbmRleE9mKCdPUyAnKSArIDMsIDMpLnJlcGxhY2UoJ18nLCAnLicpKSA8IDYpKSB0aGlzLnR5cGUgPSAnaW9zJzsgLy8gQ2hlY2sgd2VidmlldyBhbmQgbmF0aXZlIHNtYXJ0IGJhbm5lciBzdXBwb3J0IChpT1MgNispCgkgICAgICAgIH0gZWxzZSBpZiAoVUEubWF0Y2goL1xiU2lsa1wvKC4qXGJNb2JpbGUgU2FmYXJpXGIpPy8pIHx8IFVBLm1hdGNoKC9cYktGXHcvKSB8fCBVQS5tYXRjaCgnS2luZGxlIEZpcmUnKSkgewoJICAgICAgICAgICAgdGhpcy50eXBlID0gJ2tpbmRsZSc7CgkgICAgICAgIH0gZWxzZSBpZiAoVUEubWF0Y2goL0FuZHJvaWQvaSkgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMudHlwZSA9ICdhbmRyb2lkJzsKCSAgICAgICAgfQoKCSAgICAgICAgLy8gRG9uJ3Qgc2hvdyBiYW5uZXIgaWYgZGV2aWNlIGlzbid0IGlPUyBvciBBbmRyb2lkLCB3ZWJzaXRlIGlzIGxvYWRlZCBpbiBhcHAgb3IgdXNlciBkaXNtaXNzZWQgYmFubmVyCgkgICAgICAgIGlmICghdGhpcy50eXBlIHx8IHN0YW5kYWxvbmUgfHwgdGhpcy5nZXRDb29raWUoJ3NiLWNsb3NlZCcpIHx8IHRoaXMuZ2V0Q29va2llKCdzYi1pbnN0YWxsZWQnKSkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgoJICAgICAgICAvLyBDYWxjdWxhdGUgc2NhbGUKCSAgICAgICAgdGhpcy5zY2FsZSA9IHRoaXMub3B0aW9ucy5zY2FsZSA9PSAnYXV0bycgPyAkKHdpbmRvdykud2lkdGgoKSAvIHdpbmRvdy5zY3JlZW4ud2lkdGggOiB0aGlzLm9wdGlvbnMuc2NhbGU7CgkgICAgICAgIGlmICh0aGlzLnNjYWxlIDwgMSkgdGhpcy5zY2FsZSA9IDE7CgoJICAgICAgICAvLyBHZXQgaW5mbyBmcm9tIG1ldGEgZGF0YQoJICAgICAgICB2YXIgbWV0YSA9ICQodGhpcy50eXBlID09ICdhbmRyb2lkJyA/ICdtZXRhW25hbWU9Imdvb2dsZS1wbGF5LWFwcCJdJyA6CgkgICAgICAgICAgICB0aGlzLnR5cGUgPT0gJ2lvcycgPyAnbWV0YVtuYW1lPSJhcHBsZS1pdHVuZXMtYXBwIl0nIDoKCSAgICAgICAgICAgIHRoaXMudHlwZSA9PSAna2luZGxlJyA/ICdtZXRhW25hbWU9ImtpbmRsZS1maXJlLWFwcCJdJyA6ICdtZXRhW25hbWU9Im1zQXBwbGljYXRpb24tSUQiXScpOwoJICAgICAgICBpZiAobWV0YS5sZW5ndGggPT09IDApIHJldHVybjsKCgkgICAgICAgIC8vIEZvciBXaW5kb3dzIFN0b3JlIGFwcHMsIGdldCB0aGUgUGFja2FnZUZhbWlseU5hbWUgZm9yIHByb3RvY29sIGxhdW5jaAoJICAgICAgICBpZiAodGhpcy50eXBlID09ICd3aW5kb3dzJykgewoJICAgICAgICAgICAgdGhpcy5hcHBJZCA9ICQoJ21ldGFbbmFtZT0ibXNBcHBsaWNhdGlvbi1QYWNrYWdlRmFtaWx5TmFtZSJdJykuYXR0cignY29udGVudCcpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgLy8gVHJ5IHRvIHB1bGwgdGhlIGFwcElkIG91dCBvZiB0aGUgbWV0YSB0YWcgYW5kIHN0b3JlIHRoZSByZXN1bHQKCSAgICAgICAgICAgIHZhciBwYXJzZWRNZXRhQ29udGVudCA9IC9hcHAtaWQ9KFteXHMsXSspLy5leGVjKG1ldGEuYXR0cignY29udGVudCcpKTsKCgkgICAgICAgICAgICBpZihwYXJzZWRNZXRhQ29udGVudCkgewoJICAgICAgICAgICAgICB0aGlzLmFwcElkID0gcGFyc2VkTWV0YUNvbnRlbnRbMV07CgkgICAgICAgICAgICB9IGVsc2UgewoJIA==", "base64"));
  res.write(new Buffer("ICAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMub3B0aW9ucy50aXRsZSA/IHRoaXMub3B0aW9ucy50aXRsZSA6IG1ldGEuZGF0YSgndGl0bGUnKSB8fCAkKCd0aXRsZScpLnRleHQoKS5yZXBsYWNlKC9ccypbfFwtwrddLiokLywgJycpOwoJICAgICAgICB0aGlzLmF1dGhvciA9IHRoaXMub3B0aW9ucy5hdXRob3IgPyB0aGlzLm9wdGlvbnMuYXV0aG9yIDogbWV0YS5kYXRhKCdhdXRob3InKSB8fCAoJCgnbWV0YVtuYW1lPSJhdXRob3IiXScpLmxlbmd0aCA/ICQoJ21ldGFbbmFtZT0iYXV0aG9yIl0nKS5hdHRyKCdjb250ZW50JykgOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpOwoJICAgICAgICB0aGlzLmljb25VcmwgPSBtZXRhLmRhdGEoJ2ljb24tdXJsJyk7CgkgICAgICAgIHRoaXMucHJpY2UgPSBtZXRhLmRhdGEoJ3ByaWNlJyk7CgoJICAgICAgICAvLyBTZXQgZGVmYXVsdCBvbkluc3RhbGwgY2FsbGJhY2sgaWYgbm90IHNldCBpbiBvcHRpb25zCgkgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uSW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykgewoJICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uSW5zdGFsbCA9IHRoaXMub3B0aW9ucy5vbkluc3RhbGw7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25JbnN0YWxsID0gZnVuY3Rpb24gKCkge307CgkgICAgICAgIH0KCgkgICAgICAgIC8vIFNldCBkZWZhdWx0IG9uQ2xvc2UgY2FsbGJhY2sgaWYgbm90IHNldCBpbiBvcHRpb25zCgkgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKCSAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlID0gdGhpcy5vcHRpb25zLm9uQ2xvc2U7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZSA9IGZ1bmN0aW9uICgpIHt9OwoJICAgICAgICB9CgoJICAgICAgICAvLyBDcmVhdGUgYmFubmVyCgkgICAgICAgIHRoaXMuY3JlYXRlKCk7CgkgICAgICAgIHRoaXMuc2hvdygpOwoJICAgICAgICB0aGlzLmxpc3RlbigpOwoJICAgIH07CgoJICAgIFNtYXJ0QmFubmVyLnByb3RvdHlwZSA9IHsKCgkgICAgICAgIGNvbnN0cnVjdG9yOiBTbWFydEJhbm5lcgoKCSAgICAgICwgY3JlYXRlOiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICB2YXIgaWNvblVSTDsKCSAgICAgICAgICAgIHZhciBsaW5rID0gKHRoaXMub3B0aW9ucy51cmwgPyB0aGlzLm9wdGlvbnMudXJsIDogKHRoaXMudHlwZSA9PSAnd2luZG93cycgPyAnbXMtd2luZG93cy1zdG9yZTpuYXZpZ2F0ZT9hcHBpZD0nIDogKHRoaXMudHlwZSA9PSAnYW5kcm9pZCcgPyAnbWFya2V0Oi8vZGV0YWlscz9pZD0nIDogKHRoaXMudHlwZSA9PSAna2luZGxlJyA/ICdhbXpuOi8vYXBwcy9hbmRyb2lkP2FzaW49JyA6ICdodHRwczovL2l0dW5lcy5hcHBsZS5jb20vJyArIHRoaXMub3B0aW9ucy5hcHBTdG9yZUxhbmd1YWdlICsgJy9hcHAvaWQnKSkpICsgdGhpcy5hcHBJZCk7CgkgICAgICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLnByaWNlIHx8IHRoaXMub3B0aW9ucy5wcmljZTsKCSAgICAgICAgICAgIHZhciBpblN0b3JlID0gcHJpY2UgPyBwcmljZSArICcgLSAnICsgKHRoaXMudHlwZSA9PSAnYW5kcm9pZCcgPyB0aGlzLm9wdGlvbnMuaW5Hb29nbGVQbGF5IDogdGhpcy50eXBlID09ICdraW5kbGUnID8gdGhpcy5vcHRpb25zLmluQW1hem9uQXBwU3RvcmUgOiB0aGlzLnR5cGUgPT0gJ2lvcycgPyB0aGlzLm9wdGlvbnMuaW5BcHBTdG9yZSA6IHRoaXMub3B0aW9ucy5pbldpbmRvd3NTdG9yZSkgOiAnJzsKCSAgICAgICAgICAgIHZhciBnbG9zcyA9IHRoaXMub3B0aW9ucy5pY29uR2xvc3MgPT09IG51bGwgPyAodGhpcy50eXBlPT0naW9zJykgOiB0aGlzLm9wdGlvbnMuaWNvbkdsb3NzOwoKCSAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ2FuZHJvaWQnICYmIHRoaXMub3B0aW9ucy5Hb29nbGVQbGF5UGFyYW1zKSB7CgkgICAgICAgICAgICAgIGxpbmsgPSBsaW5rICsgJyZyZWZlcnJlcj0nICsgdGhpcy5vcHRpb25zLkdvb2dsZVBsYXlQYXJhbXM7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgdmFyIGJhbm5lciA9ICc8ZGl2IGlkPSJzbWFydGJhbm5lciIgY2xhc3M9IicgKyB0aGlzLnR5cGUgKyAnIj48ZGl2IGNsYXNzPSJzYi1jb250YWluZXIiPjxhIGhyZWY9IiMiIGNsYXNzPSJzYi1jbG9zZSI+JnRpbWVzOzwvYT48c3BhbiBjbGFzcz0ic2ItaWNvbiI+PC9zcGFuPjxkaXYgY2xhc3M9InNiLWluZm8iPjxzdHJvbmc+JyArIHRoaXMudGl0bGUgKyAnPC9zdHJvbmc+PHNwYW4+JyArIHRoaXMuYXV0aG9yICsgJzwvc3Bhbj48c3Bhbj4nICsgaW5TdG9yZSArICc8L3NwYW4+PC9kaXY+PGEgaHJlZj0iJyArIGxpbmsgKyAnIiBjbGFzcz0ic2ItYnV0dG9uIj48c3Bhbj4nICsgdGhpcy5vcHRpb25zLmJ1dHRvbiArICc8L3NwYW4+PC9hPjwvZGl2PjwvZGl2Pic7CgkgICAgICAgICAgICAodGhpcy5vcHRpb25zLmxheWVyKSA/ICQodGhpcy5vcHRpb25zLmFwcGVuZFRvU2VsZWN0b3IpLmFwcGVuZChiYW5uZXIpIDogJCh0aGlzLm9wdGlvbnMuYXBwZW5kVG9TZWxlY3RvcikucHJlcGVuZChiYW5uZXIpOwoKCSAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaWNvbikgewoJICAgICAgICAgICAgICAgIGljb25VUkwgPSB0aGlzLm9wdGlvbnMuaWNvbjsKCSAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmljb25VcmwpIHsKCSAgICAgICAgICAgICAgICBpY29uVVJMID0gdGhpcy5pY29uVXJsOwoJICAgICAgICAgICAgfSBlbHNlIGlmICgkKCdsaW5rW3JlbD0iYXBwbGUtdG91Y2gtaWNvbi1wcmVjb21wb3NlZCJdJykubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgIGljb25VUkwgPSAkKCdsaW5rW3JlbD0iYXBwbGUtdG91Y2gtaWNvbi1wcmVjb21wb3NlZCJdJykuYXR0cignaHJlZicpOwoJICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaWNvbkdsb3NzID09PSBudWxsKSBnbG9zcyA9IGZhbHNlOwoJICAgICAgICAgICAgfSBlbHNlIGlmICgkKCdsaW5rW3JlbD0iYXBwbGUtdG91Y2gtaWNvbiJdJykubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgIGljb25VUkwgPSAkKCdsaW5rW3JlbD0iYXBwbGUtdG91Y2gtaWNvbiJdJykuYXR0cignaHJlZicpOwoJICAgICAgICAgICAgfSBlbHNlIGlmICgkKCdtZXRhW25hbWU9Im1zQXBwbGljYXRpb24tVGlsZUltYWdlIl0nKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAgIGljb25VUkwgPSAkKCdtZXRhW25hbWU9Im1zQXBwbGljYXRpb24tVGlsZUltYWdlIl0nKS5hdHRyKCdjb250ZW50Jyk7CgkgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJ21ldGFbbmFtZT0ibXNhcHBsaWNhdGlvbi1UaWxlSW1hZ2UiXScpLmxlbmd0aCA+IDApIHsgLyogcmVkdW5kYW50IGJlY2F1c2UgbXMgZG9jcyBzaG93IHR3byBjYXNlIHVzYWdlcyAqLwoJICAgICAgICAgICAgICBpY29uVVJMID0gJCgnbWV0YVtuYW1lPSJtc2FwcGxpY2F0aW9uLVRpbGVJbWFnZSJdJykuYXR0cignY29udGVudCcpOwoJICAgICAgICAgICAgfQoKCSAgICAgICAgICAgIGlmIChpY29uVVJMKSB7CgkgICAgICAgICAgICAgICAgJCgnI3NtYXJ0YmFubmVyIC5zYi1pY29uJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywndXJsKCcgKyBpY29uVVJMICsgJyknKTsKCSAgICAgICAgICAgICAgICBpZiAoZ2xvc3MpICQoJyNzbWFydGJhbm5lciAuc2ItaWNvbicpLmFkZENsYXNzKCdnbG9zcycpOwoJICAgICAgICAgICAgfSBlbHNlewoJICAgICAgICAgICAgICAgICQoJyNzbWFydGJhbm5lcicpLmFkZENsYXNzKCduby1pY29uJyk7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgdGhpcy5iYW5uZXJIZWlnaHQgPSAkKCcjc21hcnRiYW5uZXInKS5vdXRlckhlaWdodCgpICsgMjsKCgkgICAgICAgICAgICBpZiAodGhpcy5zY2FsZSA+IDEpIHsKCSAgICAgICAgICAgICAgICAkKCcjc21hcnRiYW5uZXInKQoJICAgICAgICAgICAgICAgICAgICAuY3NzKCd0b3AnLCBwYXJzZUZsb2F0KCQoJyNzbWFydGJhbm5lcicpLmNzcygndG9wJykpICogdGhpcy5zY2FsZSkKCSAgICAgICAgICAgICAgICAgICAgLmNzcygnaGVpZ2h0JywgcGFyc2VGbG9hdCgkKCcjc21hcnRiYW5uZXInKS5jc3MoJ2hlaWdodCcpKSAqIHRoaXMuc2NhbGUpCgkgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7CgkgICAgICAgICAgICAgICAgJCgnI3NtYXJ0YmFubmVyIC5zYi1jb250YWluZXInKQoJICAgICAgICAgICAgICAgICAgICAuY3NzKCctd2Via2l0LXRyYW5zZm9ybScsICdzY2Fs", "base64"));
  res.write(new Buffer("ZSgnICsgdGhpcy5zY2FsZSArICcpJykKCSAgICAgICAgICAgICAgICAgICAgLmNzcygnLW1zaWUtdHJhbnNmb3JtJywgJ3NjYWxlKCcgKyB0aGlzLnNjYWxlICsgJyknKQoJICAgICAgICAgICAgICAgICAgICAuY3NzKCctbW96LXRyYW5zZm9ybScsICdzY2FsZSgnICsgdGhpcy5zY2FsZSArICcpJykKCSAgICAgICAgICAgICAgICAgICAgLmNzcygnd2lkdGgnLCAkKHdpbmRvdykud2lkdGgoKSAvIHRoaXMuc2NhbGUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgJCgnI3NtYXJ0YmFubmVyJykuY3NzKCdwb3NpdGlvbicsICh0aGlzLm9wdGlvbnMubGF5ZXIpID8gJ2Fic29sdXRlJyA6ICdzdGF0aWMnKTsKCSAgICAgICAgfQoKCSAgICAgICwgbGlzdGVuOiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICAkKCcjc21hcnRiYW5uZXIgLnNiLWNsb3NlJykub24oJ2NsaWNrJywkLnByb3h5KHRoaXMuY2xvc2UsIHRoaXMpKTsKCSAgICAgICAgICAgICQoJyNzbWFydGJhbm5lciAuc2ItYnV0dG9uJykub24oJ2NsaWNrJywkLnByb3h5KHRoaXMuaW5zdGFsbCwgdGhpcykpOwoJICAgICAgICB9CgoJICAgICAgLCBzaG93OiBmdW5jdGlvbiAoY2FsbGJhY2spIHsKCSAgICAgICAgICAgIHZhciBiYW5uZXIgPSAkKCcjc21hcnRiYW5uZXInKTsKCSAgICAgICAgICAgIGJhbm5lci5zdG9wKCk7CgoJICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sYXllcikgewoJICAgICAgICAgICAgICAgIGJhbm5lci5hbmltYXRlKHt0b3A6IDAsIGRpc3BsYXk6ICdibG9jayd9LCB0aGlzLm9wdGlvbnMuc3BlZWRJbikuYWRkQ2xhc3MoJ3Nob3duJykuc2hvdygpOwoJICAgICAgICAgICAgICAgICQodGhpcy5wdXNoU2VsZWN0b3IpLmFuaW1hdGUoe3BhZGRpbmdUb3A6IHRoaXMub3JpZ0h0bWxNYXJnaW4gKyAodGhpcy5iYW5uZXJIZWlnaHQgKiB0aGlzLnNjYWxlKX0sIHRoaXMub3B0aW9ucy5zcGVlZEluLCAnc3dpbmcnLCBjYWxsYmFjayk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgIGlmICgkLnN1cHBvcnQudHJhbnNpdGlvbikgewoJICAgICAgICAgICAgICAgICAgICBiYW5uZXIuYW5pbWF0ZSh7dG9wOjB9LHRoaXMub3B0aW9ucy5zcGVlZEluKS5hZGRDbGFzcygnc2hvd24nKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnc2ItYW5pbWF0aW9uJyk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9OwoJICAgICAgICAgICAgICAgICAgICAkKHRoaXMucHVzaFNlbGVjdG9yKS5hZGRDbGFzcygnc2ItYW5pbWF0aW9uJykub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgdHJhbnNpdGlvbkNhbGxiYWNrKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0aGlzLm9wdGlvbnMuc3BlZWRJbikuY3NzKCdtYXJnaW4tdG9wJywgdGhpcy5vcmlnSHRtbE1hcmdpbiArICh0aGlzLmJhbm5lckhlaWdodCAqIHRoaXMuc2NhbGUpKTsKCSAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBiYW5uZXIuc2xpZGVEb3duKHRoaXMub3B0aW9ucy5zcGVlZEluKS5hZGRDbGFzcygnc2hvd24nKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAsIGhpZGU6IGZ1bmN0aW9uIChjYWxsYmFjaykgewoJICAgICAgICAgICAgdmFyIGJhbm5lciA9ICQoJyNzbWFydGJhbm5lcicpOwoJICAgICAgICAgICAgYmFubmVyLnN0b3AoKTsKCgkgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxheWVyKSB7CgkgICAgICAgICAgICAgICAgYmFubmVyLmFuaW1hdGUoe3RvcDogLTEgKiB0aGlzLmJhbm5lckhlaWdodCAqIHRoaXMuc2NhbGUsIGRpc3BsYXk6ICdibG9jayd9LCB0aGlzLm9wdGlvbnMuc3BlZWRJbikucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7CgkgICAgICAgICAgICAgICAgJCh0aGlzLnB1c2hTZWxlY3RvcikuYW5pbWF0ZSh7cGFkZGluZ1RvcDogdGhpcy5vcmlnSHRtbE1hcmdpbn0sIHRoaXMub3B0aW9ucy5zcGVlZEluLCAnc3dpbmcnLCBjYWxsYmFjayk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgIGlmICgkLnN1cHBvcnQudHJhbnNpdGlvbikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMudHlwZSAhPT0gJ2FuZHJvaWQnICkKCSAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuY3NzKCd0b3AnLCAtMSAqIHRoaXMuYmFubmVySGVpZ2h0ICogdGhpcy5zY2FsZSkucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7CgkgICAgICAgICAgICAgICAgICAgIGVsc2UKCSAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuY3NzKHtkaXNwbGF5Oidub25lJ30pLnJlbW92ZUNsYXNzKCdzaG93bicpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdzYi1hbmltYXRpb24nKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH07CgkgICAgICAgICAgICAgICAgICAgICQodGhpcy5wdXNoU2VsZWN0b3IpLmFkZENsYXNzKCdzYi1hbmltYXRpb24nKS5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCB0cmFuc2l0aW9uQ2FsbGJhY2spLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRoaXMub3B0aW9ucy5zcGVlZE91dCkuY3NzKCdtYXJnaW4tdG9wJywgdGhpcy5vcmlnSHRtbE1hcmdpbik7CgkgICAgICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgYmFubmVyLnNsaWRlVXAodGhpcy5vcHRpb25zLnNwZWVkT3V0KS5yZW1vdmVDbGFzcygnc2hvd24nKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAsIGNsb3NlOiBmdW5jdGlvbiAoZSkgewoJICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoJICAgICAgICAgICAgdGhpcy5oaWRlKCk7CgkgICAgICAgICAgICB0aGlzLnNldENvb2tpZSgnc2ItY2xvc2VkJywndHJ1ZScsdGhpcy5vcHRpb25zLmRheXNIaWRkZW4pOwoJICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2UoZSk7CgkgICAgICAgIH0KCgkgICAgICAsIGluc3RhbGw6IGZ1bmN0aW9uIChlKSB7CgkgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhpZGVPbkluc3RhbGwpIHsKCSAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHRoaXMuc2V0Q29va2llKCdzYi1pbnN0YWxsZWQnLCd0cnVlJyx0aGlzLm9wdGlvbnMuZGF5c1JlbWluZGVyKTsKCSAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkluc3RhbGwoZSk7CgkgICAgICAgIH0KCgkgICAgICAsIHNldENvb2tpZTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBleGRheXMpIHsKCSAgICAgICAgICAgIHZhciBleGRhdGUgPSBuZXcgRGF0ZSgpOwoJICAgICAgICAgICAgZXhkYXRlLnNldERhdGUoZXhkYXRlLmdldERhdGUoKSArIGV4ZGF5cyk7CgkgICAgICAgICAgICB2YWx1ZSA9IGVuY29kZVVSSSh2YWx1ZSkgKyAoKGV4ZGF5cyA9PT0gbnVsbCkgPyAnJyA6ICc7IGV4cGlyZXM9JyArIGV4ZGF0ZS50b1VUQ1N0cmluZygpKTsKCSAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWx1ZSArICc7IHBhdGg9LzsnOwoJICAgICAgICB9CgoJICAgICAgLCBnZXRDb29raWU6IGZ1bmN0aW9uIChuYW1lKSB7CgkgICAgICAgICAgICB2YXIgaSx4LHksQVJSY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyIpOwoJICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IEFSUmNvb2tpZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgICAgICB4ID0gQVJSY29va2llc1tpXS5zdWJzdHIoMCxBUlJjb29raWVzW2ldLmluZGV4T2YoIj0iKSk7CgkgICAgICAgICAgICAgICAgeSA9IEFSUmNvb2tpZXNbaV0uc3Vic3RyKEFSUmNvb2tpZXNbaV0uaW5kZXhPZigiPSIpICsgMSk7CgkgICAgICAgICAgICAgICAgeCA9IHgucmVwbGFjZSgvXlxzK3xccyskL2csIiIpOwoJICAgICAgICAgICAgICAgIGlmICh4ID09IG5hbWUpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSSh5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoKCSAgICAgIC8vIERlbW8gb25seQoJICAgICAgLCBzd2l0Y2hUeXBlOiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKCSAgICAgICAgICB0aGlzLmhpZGUoZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICB0aGF0LnR5cGUgPSB0aGF0LnR5cGUgPT0gJ2FuZHJvaWQnID8gJ2lvcycgOiAnYW5kcm9pZCc7CgkgICAgICAgICAgICAgIHZhciBtZXRhID0gJCh0aGF0LnR5cGUgPT0gJ2FuZHJvaWQnID8gJ21ldGFbbmFtZT0iZ29vZ2xlLXBsYXktYXBwIl0nIDogJ21ldGFbbmFtZT0iYXBwbGUtaXR1bmVzLWFwcCJdJykuYXR0cignY29udGVudCcpOwoJICAgICAgICAgICAgICB0aGF0LmFwcElkID0gL2FwcC1pZD0oW15ccyxdKykvLmV4ZWMobWV0YSlbMV07CgoJICAgICAgICAgICAgICAkKCcjc21hcnRiYW5uZXInKS5kZXRhY2goKTsKCSAgICAgICAgICAgICAgdGhhdC5jcmVhdGUoKTsKCSAgICAgICAgICAgICAgdGhhdC5zaG93KCk7CgkgICAgICAgICAgfSk7CgkgICAgICB9CgkgICAgfTsKCgkgICAgJC5zbWFydGJhbm5lciA9IGZ1bmN0aW9uIChvcHRpb24pIHsKCSAgICAgICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7CgkgICAgICAgIHZhciBkYXRhID0gJHdpbmRvdy5kYXRhKCdzbWFydGJhbm5lcicpOwoJICAgICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uOwoJICAgICAgICBpZiAoIWRhdGEpICR3aW5kb3cuZGF0YSgnc21hcnRiYW5uZXInLCAoZGF0YSA9IG5ldyBTbWFydEJhbm5lcihvcHRpb25zKSkpOwoJICAgICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCk7CgkgICAgfTsKCgkgICAgLy8gb3ZlcnJpZGUgdGhlc2UgZ2xvYmFsbHkgaWYgeW91IGxpa2UgKHRoZXkgYXJlIGFsbCBvcHRpb25hbCkKCSAgICAkLnNtYXJ0YmFubmVyLmRlZmF1bHRzID0gewoJICAgICAgICB0aXRsZTogbnVsbCwgLy8gV2hhdCB0aGUgdGl0bGUgb2YgdGhlIGFwcCBzaG91bGQgYmUgaW4gdGhlIGJhbm5lciAoZGVmYXVsdHMgdG8gPHRpdGxlPikKCSAgICAgICAgYXV0aG9yOiBudWxsLCAvLyBXaGF0IHRoZSBhdXRob3Igb2YgdGhlIGFwcCBzaG91bGQgYmUgaW4gdGhlIGJhbm5lciAoZGVmYXVsdHMgdG8gPG1ldGEgbmFtZT0iYXV0aG9yIj4gb3IgaG9zdG5hbWUpCgkgICAgICAgIHByaWNlOiAnRlJFRScsIC8vIFByaWNlIG9mIHRoZSBhcHAKCSAgICAgICAgYXBwU3RvcmVMYW5ndWFnZTogJ3VzJywgLy8gTGFuZ3VhZ2UgY29kZSBmb3IgQXBwIFN0b3JlCgkgICAgICAgIGluQXBwU3RvcmU6ICdPbiB0aGUgQXBwIFN0b3JlJywgLy8gVGV4dCBvZiBwcmljZSBmb3IgaU9TCgkgICAgICAgIGluR29vZ2xlUGxheTogJ0luIEdvb2dsZSBQbGF5JywgLy8gVGV4dCBvZiBwcmljZSBmb3IgQW5kcm9pZAoJICAgICAgICBpbkFtYXpvbkFwcFN0b3JlOiAnSW4gdGhlIEFtYXpvbiBBcHBzdG9yZScsCgkgICAgICAgIGluV2luZG93c1N0b3JlOiAnSW4gdGhlIFdpbmRvd3MgU3RvcmUnLCAvL1RleHQgb2YgcHJpY2UgZm9yIFdpbmRvd3MKCSAgICAgICAgR29vZ2xlUGxheVBhcmFtczogbnVsbCwgLy8gQWRpdGlvbmFsIHBhcmFtZXRlcnMgZm9yIHRoZSBtYXJrZXQKCSAgICAgICAgaWNvbjogbnVsbCwgLy8gVGhlIFVSTCBvZiB0aGUgaWNvbiAoZGVmYXVsdHMgdG8gPG1ldGEgbmFtZT0iYXBwbGUtdG91Y2gtaWNvbiI+KQoJICAgICAgICBpY29uR2xvc3M6IG51bGwsIC8vIEZvcmNlIGdsb3NzIGVmZmVjdCBmb3IgaU9TIGV2ZW4gZm9yIHByZWNvbXBvc2VkCgkgICAgICAgIGJ1dHRvbjogJ1ZJRVcnLCAvLyBUZXh0IGZvciB0aGUgaW5zdGFsbCBidXR0b24KCSAgICAgICAgdXJsOiBudWxsLCAvLyBUaGUgVVJMIGZvciB0aGUgYnV0dG9uLiBLZWVwIG51bGwgaWYgeW91IHdhbnQgdGhlIGJ1dHRvbiB0byBsaW5rIHRvIHRoZSBhcHAgc3RvcmUuCgkgICAgICAgIHNjYWxlOiAnYXV0bycsIC8vIFNjYWxlIGJhc2VkIG9uIHZpZXdwb3J0IHNpemUgKHNldCB0byAxIHRvIGRpc2FibGUpCgkgICAgICAgIHNwZWVkSW46IDMwMCwgLy8gU2hvdyBhbmltYXRpb24gc3BlZWQgb2YgdGhlIGJhbm5lcgoJICAgICAgICBzcGVlZE91dDogNDAwLCAvLyBDbG9zZSBhbmltYXRpb24gc3BlZWQgb2YgdGhlIGJhbm5lcgoJICAgICAgICBkYXlzSGlkZGVuOiAxNSwgLy8gRHVyYXRpb24gdG8gaGlkZSB0aGUgYmFubmVyIGFmdGVyIGJlaW5nIGNsb3NlZCAoMCA9IGFsd2F5cyBzaG93IGJhbm5lcikKCSAgICAgICAgZGF5c1JlbWluZGVyOiA5MCwgLy8gRHVyYXRpb24gdG8gaGlkZSB0aGUgYmFubmVyIGFmdGVyICJWSUVXIiBpcyBjbGlja2VkICpzZXBhcmF0ZSBmcm9tIHdoZW4gdGhlIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkKiAoMCA9IGFsd2F5cyBzaG93IGJhbm5lcikKCSAgICAgICAgZm9yY2U6IG51bGwsIC8vIENob29zZSAnaW9zJywgJ2FuZHJvaWQnIG9yICd3aW5kb3dzJy4gRG9uJ3QgZG8gYSBicm93c2VyIGNoZWNrLCBqdXN0IGFsd2F5cyBzaG93IHRoaXMgYmFubmVyCgkgICAgICAgIGhpZGVPbkluc3RhbGw6IHRydWUsIC8vIEhpZGUgdGhlIGJhbm5lciBhZnRlciAiVklFVyIgaXMgY2xpY2tlZC4KCSAgICAgICAgbGF5ZXI6IGZhbHNlLCAvLyBEaXNwbGF5IGFzIG92ZXJsYXkgbGF5ZXIgb3Igc2xpZGUgZG93biB0aGUgcGFnZQoJICAgICAgICBpT1NVbml2ZXJzYWxBcHA6IHRydWUsIC8vIElmIHRoZSBpT1MgQXBwIGlzIGEgdW5pdmVyc2FsIGFwcCBmb3IgYm90aCBpUGFkIGFuZCBpUGhvbmUsIGRpc3BsYXkgU21hcnQgQmFubmVyIHRvIGlQYWQgdXNlcnMsIHRvby4KCSAgICAgICAgYXBwZW5kVG9TZWxlY3RvcjogJ2JvZHknLCAvL0FwcGVuZCB0aGUgYmFubmVyIHRvIGEgc3BlY2lmaWMgc2VsZWN0b3IKCSAgICAgICAgcHVzaFNlbGVjdG9yOiAnaHRtbCcgLy8gV2hhdCBlbGVtZW50IGlzIGdvaW5nIHRvIHB1c2ggdGhlIHNpdGUgY29udGVudCBkb3duOyB0aGlzIGlzIHdoZXJlIHRoZSBiYW5uZXIgYXBwZW5kIGFuaW1hdGlvbiB3aWxsIHN0YXJ0LgoJICAgIH07CgoJICAgICQuc21hcnRiYW5uZXIuQ29uc3RydWN0b3IgPSBTbWFydEJhbm5lcjsKCgoJICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoJICAgIC8vIEJvb3RzdHJhcCB0cmFuc2l0aW9uCgkgICAgLy8gQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCgkgICAgLy8gTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkKCgkgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZCAoKSB7CgkgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NtYXJ0YmFubmVyJyk7CgoJICAgICAgICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0gewoJICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLAoJICAgICAgICAgICAgTW96VHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLAoJICAgICAgICAgICAgT1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsCgkgICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcKCSAgICAgICAgfTsKCgkgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdHJhbnNFbmRFdmVudE5hbWVzKSB7CgkgICAgICAgICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHJldHVybiB7ZW5kOiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV19OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGV4cGxpY2l0IGZvciBpZTggKCAgLl8uKQoJICAgIH0KCgkgICAgaWYgKCQuc3VwcG9ydC50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQpCgkgICAgICAgIHJldHVybjsgLy8gUHJldmVudCBjb25mbGljdCB3aXRoIFR3aXR0ZXIgQm9vdHN0cmFwCgoJICAgIC8vIGh0dHA6Ly9ibG9nLmFsZXhtYWNjYXcuY29tL2Nzcy10cmFuc2l0aW9ucwoJICAgICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHsKCSAgICAgICAgdmFyIGNhbGxlZCA9IGZhbHNlLCAkZWwgPSB0aGlzOwoJICAgICAgICAkKHRoaXMpLm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsIGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7CgkgICAgICAgIH0pOwoJICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAoIWNhbGxlZCkgJCgkZWwpLnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKTsKCSAgICAgICAgfTsKCSAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgZHVyYXRpb24pOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoKCSAgICAkKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKCk7CgkgICAgfSk7CgkgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoJfSk7CgoKLyoqKi8gfSkKLyoqKioqKi8gXSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWluaXRMb2dpblBhZ2UucGFjay5qcy5tYXA=", "base64"));
  res.end();

  return __filename;
};
